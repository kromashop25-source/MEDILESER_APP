(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(c){if(c.ep)return;c.ep=!0;const d=s(c);fetch(c.href,d)}})();function ox(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ff={exports:{}},lo={};var mv;function Wj(){if(mv)return lo;mv=1;var e=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function s(i,c,d){var f=null;if(d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),"key"in c){d={};for(var h in c)h!=="key"&&(d[h]=c[h])}else d=c;return c=d.ref,{$$typeof:e,type:i,key:f,ref:c!==void 0?c:null,props:d}}return lo.Fragment=a,lo.jsx=s,lo.jsxs=s,lo}var hv;function eS(){return hv||(hv=1,Ff.exports=Wj()),Ff.exports}var l=eS(),Hf={exports:{}},ut={};var pv;function tS(){if(pv)return ut;pv=1;var e=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),j=Symbol.iterator;function H(w){return w===null||typeof w!="object"?null:(w=j&&w[j]||w["@@iterator"],typeof w=="function"?w:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,R={};function F(w,X,ce){this.props=w,this.context=X,this.refs=R,this.updater=ce||_}F.prototype.isReactComponent={},F.prototype.setState=function(w,X){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,X,"setState")},F.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function z(){}z.prototype=F.prototype;function te(w,X,ce){this.props=w,this.context=X,this.refs=R,this.updater=ce||_}var M=te.prototype=new z;M.constructor=te,A(M,F.prototype),M.isPureReactComponent=!0;var D=Array.isArray;function K(){}var q={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function fe(w,X,ce){var Y=ce.ref;return{$$typeof:e,type:w,key:X,ref:Y!==void 0?Y:null,props:ce}}function Re(w,X){return fe(w.type,X,w.props)}function Ce(w){return typeof w=="object"&&w!==null&&w.$$typeof===e}function ve(w){var X={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(ce){return X[ce]})}var _e=/\/+/g;function ke(w,X){return typeof w=="object"&&w!==null&&w.key!=null?ve(""+w.key):X.toString(36)}function De(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(K,K):(w.status="pending",w.then(function(X){w.status==="pending"&&(w.status="fulfilled",w.value=X)},function(X){w.status==="pending"&&(w.status="rejected",w.reason=X)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function U(w,X,ce,Y,ye){var Se=typeof w;(Se==="undefined"||Se==="boolean")&&(w=null);var Le=!1;if(w===null)Le=!0;else switch(Se){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(w.$$typeof){case e:case a:Le=!0;break;case y:return Le=w._init,U(Le(w._payload),X,ce,Y,ye)}}if(Le)return ye=ye(w),Le=Y===""?"."+ke(w,0):Y,D(ye)?(ce="",Le!=null&&(ce=Le.replace(_e,"$&/")+"/"),U(ye,X,ce,"",function(Be){return Be})):ye!=null&&(Ce(ye)&&(ye=Re(ye,ce+(ye.key==null||w&&w.key===ye.key?"":(""+ye.key).replace(_e,"$&/")+"/")+Le)),X.push(ye)),1;Le=0;var Ze=Y===""?".":Y+":";if(D(w))for(var pe=0;pe<w.length;pe++)Y=w[pe],Se=Ze+ke(Y,pe),Le+=U(Y,X,ce,Se,ye);else if(pe=H(w),typeof pe=="function")for(w=pe.call(w),pe=0;!(Y=w.next()).done;)Y=Y.value,Se=Ze+ke(Y,pe++),Le+=U(Y,X,ce,Se,ye);else if(Se==="object"){if(typeof w.then=="function")return U(De(w),X,ce,Y,ye);throw X=String(w),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Le}function Z(w,X,ce){if(w==null)return w;var Y=[],ye=0;return U(w,Y,"","",function(Se){return X.call(ce,Se,ye++)}),Y}function ae(w){if(w._status===-1){var X=w._result;X=X(),X.then(function(ce){(w._status===0||w._status===-1)&&(w._status=1,w._result=ce)},function(ce){(w._status===0||w._status===-1)&&(w._status=2,w._result=ce)}),w._status===-1&&(w._status=0,w._result=X)}if(w._status===1)return w._result.default;throw w._result}var he=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)},me={map:Z,forEach:function(w,X,ce){Z(w,function(){X.apply(this,arguments)},ce)},count:function(w){var X=0;return Z(w,function(){X++}),X},toArray:function(w){return Z(w,function(X){return X})||[]},only:function(w){if(!Ce(w))throw Error("React.Children.only expected to receive a single React element child.");return w}};return ut.Activity=x,ut.Children=me,ut.Component=F,ut.Fragment=s,ut.Profiler=c,ut.PureComponent=te,ut.StrictMode=i,ut.Suspense=v,ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,ut.__COMPILER_RUNTIME={__proto__:null,c:function(w){return q.H.useMemoCache(w)}},ut.cache=function(w){return function(){return w.apply(null,arguments)}},ut.cacheSignal=function(){return null},ut.cloneElement=function(w,X,ce){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var Y=A({},w.props),ye=w.key;if(X!=null)for(Se in X.key!==void 0&&(ye=""+X.key),X)!V.call(X,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&X.ref===void 0||(Y[Se]=X[Se]);var Se=arguments.length-2;if(Se===1)Y.children=ce;else if(1<Se){for(var Le=Array(Se),Ze=0;Ze<Se;Ze++)Le[Ze]=arguments[Ze+2];Y.children=Le}return fe(w.type,ye,Y)},ut.createContext=function(w){return w={$$typeof:f,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:d,_context:w},w},ut.createElement=function(w,X,ce){var Y,ye={},Se=null;if(X!=null)for(Y in X.key!==void 0&&(Se=""+X.key),X)V.call(X,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(ye[Y]=X[Y]);var Le=arguments.length-2;if(Le===1)ye.children=ce;else if(1<Le){for(var Ze=Array(Le),pe=0;pe<Le;pe++)Ze[pe]=arguments[pe+2];ye.children=Ze}if(w&&w.defaultProps)for(Y in Le=w.defaultProps,Le)ye[Y]===void 0&&(ye[Y]=Le[Y]);return fe(w,Se,ye)},ut.createRef=function(){return{current:null}},ut.forwardRef=function(w){return{$$typeof:h,render:w}},ut.isValidElement=Ce,ut.lazy=function(w){return{$$typeof:y,_payload:{_status:-1,_result:w},_init:ae}},ut.memo=function(w,X){return{$$typeof:g,type:w,compare:X===void 0?null:X}},ut.startTransition=function(w){var X=q.T,ce={};q.T=ce;try{var Y=w(),ye=q.S;ye!==null&&ye(ce,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(K,he)}catch(Se){he(Se)}finally{X!==null&&ce.types!==null&&(X.types=ce.types),q.T=X}},ut.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},ut.use=function(w){return q.H.use(w)},ut.useActionState=function(w,X,ce){return q.H.useActionState(w,X,ce)},ut.useCallback=function(w,X){return q.H.useCallback(w,X)},ut.useContext=function(w){return q.H.useContext(w)},ut.useDebugValue=function(){},ut.useDeferredValue=function(w,X){return q.H.useDeferredValue(w,X)},ut.useEffect=function(w,X){return q.H.useEffect(w,X)},ut.useEffectEvent=function(w){return q.H.useEffectEvent(w)},ut.useId=function(){return q.H.useId()},ut.useImperativeHandle=function(w,X,ce){return q.H.useImperativeHandle(w,X,ce)},ut.useInsertionEffect=function(w,X){return q.H.useInsertionEffect(w,X)},ut.useLayoutEffect=function(w,X){return q.H.useLayoutEffect(w,X)},ut.useMemo=function(w,X){return q.H.useMemo(w,X)},ut.useOptimistic=function(w,X){return q.H.useOptimistic(w,X)},ut.useReducer=function(w,X,ce){return q.H.useReducer(w,X,ce)},ut.useRef=function(w){return q.H.useRef(w)},ut.useState=function(w){return q.H.useState(w)},ut.useSyncExternalStore=function(w,X,ce){return q.H.useSyncExternalStore(w,X,ce)},ut.useTransition=function(){return q.H.useTransition()},ut.version="19.2.0",ut}var gv;function sh(){return gv||(gv=1,Hf.exports=tS()),Hf.exports}var p=sh();const pt=ox(p);var Vf={exports:{}},io={},Zf={exports:{}},Gf={};var bv;function nS(){return bv||(bv=1,(function(e){function a(U,Z){var ae=U.length;U.push(Z);e:for(;0<ae;){var he=ae-1>>>1,me=U[he];if(0<c(me,Z))U[he]=Z,U[ae]=me,ae=he;else break e}}function s(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var Z=U[0],ae=U.pop();if(ae!==Z){U[0]=ae;e:for(var he=0,me=U.length,w=me>>>1;he<w;){var X=2*(he+1)-1,ce=U[X],Y=X+1,ye=U[Y];if(0>c(ce,ae))Y<me&&0>c(ye,ce)?(U[he]=ye,U[Y]=ae,he=Y):(U[he]=ce,U[X]=ae,he=X);else if(Y<me&&0>c(ye,ae))U[he]=ye,U[Y]=ae,he=Y;else break e}}return Z}function c(U,Z){var ae=U.sortIndex-Z.sortIndex;return ae!==0?ae:U.id-Z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var f=Date,h=f.now();e.unstable_now=function(){return f.now()-h}}var v=[],g=[],y=1,x=null,j=3,H=!1,_=!1,A=!1,R=!1,F=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function M(U){for(var Z=s(g);Z!==null;){if(Z.callback===null)i(g);else if(Z.startTime<=U)i(g),Z.sortIndex=Z.expirationTime,a(v,Z);else break;Z=s(g)}}function D(U){if(A=!1,M(U),!_)if(s(v)!==null)_=!0,K||(K=!0,ve());else{var Z=s(g);Z!==null&&De(D,Z.startTime-U)}}var K=!1,q=-1,V=5,fe=-1;function Re(){return R?!0:!(e.unstable_now()-fe<V)}function Ce(){if(R=!1,K){var U=e.unstable_now();fe=U;var Z=!0;try{e:{_=!1,A&&(A=!1,z(q),q=-1),H=!0;var ae=j;try{t:{for(M(U),x=s(v);x!==null&&!(x.expirationTime>U&&Re());){var he=x.callback;if(typeof he=="function"){x.callback=null,j=x.priorityLevel;var me=he(x.expirationTime<=U);if(U=e.unstable_now(),typeof me=="function"){x.callback=me,M(U),Z=!0;break t}x===s(v)&&i(v),M(U)}else i(v);x=s(v)}if(x!==null)Z=!0;else{var w=s(g);w!==null&&De(D,w.startTime-U),Z=!1}}break e}finally{x=null,j=ae,H=!1}Z=void 0}}finally{Z?ve():K=!1}}}var ve;if(typeof te=="function")ve=function(){te(Ce)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,ke=_e.port2;_e.port1.onmessage=Ce,ve=function(){ke.postMessage(null)}}else ve=function(){F(Ce,0)};function De(U,Z){q=F(function(){U(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return j},e.unstable_next=function(U){switch(j){case 1:case 2:case 3:var Z=3;break;default:Z=j}var ae=j;j=Z;try{return U()}finally{j=ae}},e.unstable_requestPaint=function(){R=!0},e.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ae=j;j=U;try{return Z()}finally{j=ae}},e.unstable_scheduleCallback=function(U,Z,ae){var he=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?he+ae:he):ae=he,U){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ae+me,U={id:y++,callback:Z,priorityLevel:U,startTime:ae,expirationTime:me,sortIndex:-1},ae>he?(U.sortIndex=ae,a(g,U),s(v)===null&&U===s(g)&&(A?(z(q),q=-1):A=!0,De(D,ae-he))):(U.sortIndex=me,a(v,U),_||H||(_=!0,K||(K=!0,ve()))),U},e.unstable_shouldYield=Re,e.unstable_wrapCallback=function(U){var Z=j;return function(){var ae=j;j=Z;try{return U.apply(this,arguments)}finally{j=ae}}}})(Gf)),Gf}var vv;function aS(){return vv||(vv=1,Zf.exports=nS()),Zf.exports}var Pf={exports:{}},la={};var yv;function sS(){if(yv)return la;yv=1;var e=sh();function a(v){var g="https://react.dev/errors/"+v;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+v+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(v,g,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:x==null?null:""+x,children:v,containerInfo:g,implementation:y}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(v,g){if(v==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return la.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,la.createPortal=function(v,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(a(299));return d(v,g,null,y)},la.flushSync=function(v){var g=f.T,y=i.p;try{if(f.T=null,i.p=2,v)return v()}finally{f.T=g,i.p=y,i.d.f()}},la.preconnect=function(v,g){typeof v=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(v,g))},la.prefetchDNS=function(v){typeof v=="string"&&i.d.D(v)},la.preinit=function(v,g){if(typeof v=="string"&&g&&typeof g.as=="string"){var y=g.as,x=h(y,g.crossOrigin),j=typeof g.integrity=="string"?g.integrity:void 0,H=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(v,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:j,fetchPriority:H}):y==="script"&&i.d.X(v,{crossOrigin:x,integrity:j,fetchPriority:H,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},la.preinitModule=function(v,g){if(typeof v=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=h(g.as,g.crossOrigin);i.d.M(v,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(v)},la.preload=function(v,g){if(typeof v=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,x=h(y,g.crossOrigin);i.d.L(v,y,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},la.preloadModule=function(v,g){if(typeof v=="string")if(g){var y=h(g.as,g.crossOrigin);i.d.m(v,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(v)},la.requestFormReset=function(v){i.d.r(v)},la.unstable_batchedUpdates=function(v,g){return v(g)},la.useFormState=function(v,g,y){return f.H.useFormState(v,g,y)},la.useFormStatus=function(){return f.H.useHostTransitionStatus()},la.version="19.2.0",la}var xv;function rS(){if(xv)return Pf.exports;xv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(a){console.error(a)}}return e(),Pf.exports=sS(),Pf.exports}var Nv;function lS(){if(Nv)return io;Nv=1;var e=aS(),a=sh(),s=rS();function i(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function h(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function v(t){if(d(t)!==t)throw Error(i(188))}function g(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(i(188));return n!==t?null:t}for(var r=t,o=n;;){var u=r.return;if(u===null)break;var m=u.alternate;if(m===null){if(o=u.return,o!==null){r=o;continue}break}if(u.child===m.child){for(m=u.child;m;){if(m===r)return v(u),t;if(m===o)return v(u),n;m=m.sibling}throw Error(i(188))}if(r.return!==o.return)r=u,o=m;else{for(var b=!1,N=u.child;N;){if(N===r){b=!0,r=u,o=m;break}if(N===o){b=!0,o=u,r=m;break}N=N.sibling}if(!b){for(N=m.child;N;){if(N===r){b=!0,r=m,o=u;break}if(N===o){b=!0,o=m,r=u;break}N=N.sibling}if(!b)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?t:n}function y(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=y(t),n!==null)return n;t=t.sibling}return null}var x=Object.assign,j=Symbol.for("react.element"),H=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),te=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),fe=Symbol.for("react.activity"),Re=Symbol.for("react.memo_cache_sentinel"),Ce=Symbol.iterator;function ve(t){return t===null||typeof t!="object"?null:(t=Ce&&t[Ce]||t["@@iterator"],typeof t=="function"?t:null)}var _e=Symbol.for("react.client.reference");function ke(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===_e?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case A:return"Fragment";case F:return"Profiler";case R:return"StrictMode";case D:return"Suspense";case K:return"SuspenseList";case fe:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case _:return"Portal";case te:return t.displayName||"Context";case z:return(t._context.displayName||"Context")+".Consumer";case M:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case q:return n=t.displayName||null,n!==null?n:ke(t.type)||"Memo";case V:n=t._payload,t=t._init;try{return ke(t(n))}catch{}}return null}var De=Array.isArray,U=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},he=[],me=-1;function w(t){return{current:t}}function X(t){0>me||(t.current=he[me],he[me]=null,me--)}function ce(t,n){me++,he[me]=t.current,t.current=n}var Y=w(null),ye=w(null),Se=w(null),Le=w(null);function Ze(t,n){switch(ce(Se,n),ce(ye,t),ce(Y,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Ub(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Ub(n),t=Lb(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}X(Y),ce(Y,t)}function pe(){X(Y),X(ye),X(Se)}function Be(t){t.memoizedState!==null&&ce(Le,t);var n=Y.current,r=Lb(n,t.type);n!==r&&(ce(ye,t),ce(Y,r))}function Ge(t){ye.current===t&&(X(Y),X(ye)),Le.current===t&&(X(Le),no._currentValue=ae)}var Je,ot;function ze(t){if(Je===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Je=n&&n[1]||"",ot=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Je+t+ot}var Qe=!1;function ue(t,n){if(!t||Qe)return"";Qe=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var Ae=function(){throw Error()};if(Object.defineProperty(Ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ae,[])}catch(oe){var re=oe}Reflect.construct(t,[],Ae)}else{try{Ae.call()}catch(oe){re=oe}t.call(Ae.prototype)}}else{try{throw Error()}catch(oe){re=oe}(Ae=t())&&typeof Ae.catch=="function"&&Ae.catch(function(){})}}catch(oe){if(oe&&re&&typeof oe.stack=="string")return[oe.stack,re.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),b=m[0],N=m[1];if(b&&N){var k=b.split(`
`),ne=N.split(`
`);for(u=o=0;o<k.length&&!k[o].includes("DetermineComponentFrameRoot");)o++;for(;u<ne.length&&!ne[u].includes("DetermineComponentFrameRoot");)u++;if(o===k.length||u===ne.length)for(o=k.length-1,u=ne.length-1;1<=o&&0<=u&&k[o]!==ne[u];)u--;for(;1<=o&&0<=u;o--,u--)if(k[o]!==ne[u]){if(o!==1||u!==1)do if(o--,u--,0>u||k[o]!==ne[u]){var ge=`
`+k[o].replace(" at new "," at ");return t.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",t.displayName)),ge}while(1<=o&&0<=u);break}}}finally{Qe=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?ze(r):""}function Fe(t,n){switch(t.tag){case 26:case 27:case 5:return ze(t.type);case 16:return ze("Lazy");case 13:return t.child!==n&&n!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return ue(t.type,!1);case 11:return ue(t.type.render,!1);case 1:return ue(t.type,!0);case 31:return ze("Activity");default:return""}}function we(t){try{var n="",r=null;do n+=Fe(t,r),r=t,t=t.return;while(t);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var We=Object.prototype.hasOwnProperty,O=e.unstable_scheduleCallback,T=e.unstable_cancelCallback,S=e.unstable_shouldYield,L=e.unstable_requestPaint,$=e.unstable_now,J=e.unstable_getCurrentPriorityLevel,be=e.unstable_ImmediatePriority,Ee=e.unstable_UserBlockingPriority,G=e.unstable_NormalPriority,Me=e.unstable_LowPriority,$e=e.unstable_IdlePriority,nt=e.log,zt=e.unstable_setDisableYieldValue,Ne=null,Ie=null;function Kt(t){if(typeof nt=="function"&&zt(t),Ie&&typeof Ie.setStrictMode=="function")try{Ie.setStrictMode(Ne,t)}catch{}}var Et=Math.clz32?Math.clz32:na,Xt=Math.log,cn=Math.LN2;function na(t){return t>>>=0,t===0?32:31-(Xt(t)/cn|0)|0}var Zn=256,rt=262144,Mn=4194304;function En(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Xn(t,n,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var N=o&134217727;return N!==0?(o=N&~m,o!==0?u=En(o):(b&=N,b!==0?u=En(b):r||(r=N&~t,r!==0&&(u=En(r))))):(N=o&~m,N!==0?u=En(N):b!==0?u=En(b):r||(r=o&~t,r!==0&&(u=En(r)))),u===0?0:n!==0&&n!==u&&(n&m)===0&&(m=u&-u,r=n&-n,m>=r||m===32&&(r&4194048)!==0)?n:u}function Un(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Ln(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W(){var t=Mn;return Mn<<=1,(Mn&62914560)===0&&(Mn=4194304),t}function se(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function Te(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ve(t,n,r,o,u,m){var b=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var N=t.entanglements,k=t.expirationTimes,ne=t.hiddenUpdates;for(r=b&~r;0<r;){var ge=31-Et(r),Ae=1<<ge;N[ge]=0,k[ge]=-1;var re=ne[ge];if(re!==null)for(ne[ge]=null,ge=0;ge<re.length;ge++){var oe=re[ge];oe!==null&&(oe.lane&=-536870913)}r&=~Ae}o!==0&&et(t,o,0),m!==0&&u===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~n))}function et(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-Et(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|r&261930}function ct(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var o=31-Et(r),u=1<<o;u&n|t[o]&n&&(t[o]|=n),r&=~u}}function Ke(t,n){var r=n&-n;return r=(r&42)!==0?1:Ut(r),(r&(t.suspendedLanes|n))!==0?0:r}function Ut(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Lt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Bt(){var t=Z.p;return t!==0?t:(t=window.event,t===void 0?32:lv(t.type))}function un(t,n){var r=Z.p;try{return Z.p=t,n()}finally{Z.p=r}}var Ct=Math.random().toString(36).slice(2),dt="__reactFiber$"+Ct,yt="__reactProps$"+Ct,Gt="__reactContainer$"+Ct,hn="__reactEvents$"+Ct,Pt="__reactListeners$"+Ct,Nn="__reactHandles$"+Ct,an="__reactResources$"+Ct,kt="__reactMarker$"+Ct;function Mt(t){delete t[dt],delete t[yt],delete t[hn],delete t[Pt],delete t[Nn]}function dn(t){var n=t[dt];if(n)return n;for(var r=t.parentNode;r;){if(n=r[Gt]||r[dt]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=Vb(t);t!==null;){if(r=t[dt])return r;t=Vb(t)}return n}t=r,r=t.parentNode}return null}function jn(t){if(t=t[dt]||t[Gt]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function An(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(i(33))}function Jt(t){var n=t[an];return n||(n=t[an]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function wt(t){t[kt]=!0}var gs=new Set,ha={};function pn(t,n){Gn(t,n),Gn(t+"Capture",n)}function Gn(t,n){for(ha[t]=n,t=0;t<n.length;t++)gs.add(n[t])}var Bn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ia={},$a={};function Fa(t){return We.call($a,t)?!0:We.call(Ia,t)?!1:Bn.test(t)?$a[t]=!0:(Ia[t]=!0,!1)}function qt(t,n,r){if(Fa(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function aa(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function Qt(t,n,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+o)}}function gn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ar(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function bl(t,n,r){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,m=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return u.call(this)},set:function(b){r=""+b,m.call(this,b)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(b){r=""+b},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Cr(t){if(!t._valueTracker){var n=Ar(t)?"checked":"value";t._valueTracker=bl(t,n,""+t[n])}}function Or(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return t&&(o=Ar(t)?t.checked?"true":"false":t.value),t=o,t!==r?(n.setValue(t),!0):!1}function bs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Rr=/[\n"\\]/g;function Cn(t){return t.replace(Rr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Tr(t,n,r,o,u,m,b,N){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),n!=null?b==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+gn(n)):t.value!==""+gn(n)&&(t.value=""+gn(n)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),n!=null?Ha(t,b,gn(n)):r!=null?Ha(t,b,gn(r)):o!=null&&t.removeAttribute("value"),u==null&&m!=null&&(t.defaultChecked=!!m),u!=null&&(t.checked=u&&typeof u!="function"&&typeof u!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?t.name=""+gn(N):t.removeAttribute("name")}function is(t,n,r,o,u,m,b,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),n!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){Cr(t);return}r=r!=null?""+gn(r):"",n=n!=null?""+gn(n):r,N||n===t.value||(t.value=n),t.defaultValue=n}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=N?t.checked:!!o,t.defaultChecked=!!o,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),Cr(t)}function Ha(t,n,r){n==="number"&&bs(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Pn(t,n,r,o){if(t=t.options,n){n={};for(var u=0;u<r.length;u++)n["$"+r[u]]=!0;for(r=0;r<t.length;r++)u=n.hasOwnProperty("$"+t[r].value),t[r].selected!==u&&(t[r].selected=u),u&&o&&(t[r].defaultSelected=!0)}else{for(r=""+gn(r),n=null,u=0;u<t.length;u++){if(t[u].value===r){t[u].selected=!0,o&&(t[u].defaultSelected=!0);return}n!==null||t[u].disabled||(n=t[u])}n!==null&&(n.selected=!0)}}function Dr(t,n,r){if(n!=null&&(n=""+gn(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+gn(r):""}function vl(t,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(i(92));if(De(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=gn(n),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o),Cr(t)}function vs(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var zr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pa(t,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,r):typeof r!="number"||r===0||zr.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function yl(t,n,r){if(n!=null&&typeof n!="object")throw Error(i(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var u in n)o=n[u],n.hasOwnProperty(u)&&r[u]!==o&&pa(t,u,o)}else for(var m in n)n.hasOwnProperty(m)&&pa(t,m,n[m])}function Ys(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ni=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ks(t){return Ni.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ta(){}var ys=null;function kr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xs=null,Ns=null;function xl(t){var n=jn(t);if(n&&(t=n.stateNode)){var r=t[yt]||null;e:switch(t=n.stateNode,n.type){case"input":if(Tr(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Cn(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==t&&o.form===t.form){var u=o[yt]||null;if(!u)throw Error(i(90));Tr(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===t.form&&Or(o)}break e;case"textarea":Dr(t,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&Pn(t,!!r.multiple,n,!1)}}}var Mr=!1;function Ur(t,n,r){if(Mr)return t(n,r);Mr=!0;try{var o=t(n);return o}finally{if(Mr=!1,(xs!==null||Ns!==null)&&(Nc(),xs&&(n=xs,t=Ns,Ns=xs=null,xl(n),t)))for(n=0;n<t.length;n++)xl(t[n])}}function qn(t,n){var r=t.stateNode;if(r===null)return null;var o=r[yt]||null;if(o===null)return null;r=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(i(231,n,typeof r));return r}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Va=!1;if(ga)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){Va=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{Va=!1}var ba=null,C=null,P=null;function xe(){if(P)return P;var t,n=C,r=n.length,o,u="value"in ba?ba.value:ba.textContent,m=u.length;for(t=0;t<r&&n[t]===u[t];t++);var b=r-t;for(o=1;o<=b&&n[r-o]===u[m-o];o++);return P=u.slice(t,1<o?1-o:void 0)}function Ue(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function lt(){return!0}function At(){return!1}function it(t){function n(r,o,u,m,b){this._reactName=r,this._targetInst=u,this.type=o,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var N in t)t.hasOwnProperty(N)&&(r=t[N],this[N]=r?r(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?lt:At,this.isPropagationStopped=At,this}return x(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=lt)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=lt)},persist:function(){},isPersistent:lt}),n}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=it(bn),xt=x({},bn,{view:0,detail:0}),In=it(xt),Lr,ji,Za,os=x({},xt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nt,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Za&&(Za&&t.type==="mousemove"?(Lr=t.screenX-Za.screenX,ji=t.screenY-Za.screenY):ji=Lr=0,Za=t),Lr)},movementY:function(t){return"movementY"in t?t.movementY:ji}}),Os=it(os),va=x({},os,{dataTransfer:0}),Qn=it(va),Hu=x({},xt,{relatedTarget:0}),js=it(Hu),Vu=x({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Lo=it(Vu),Bo=x({},bn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qo=it(Bo),E=x({},bn,{data:0}),B=it(E),ie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},de={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ot(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=qe[t])?!!n[t]:!1}function Nt(){return Ot}var ca=x({},xt,{key:function(t){if(t.key){var n=ie[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ue(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?de[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nt,charCode:function(t){return t.type==="keypress"?Ue(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ue(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ya=it(ca),cs=x({},os,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rs=it(cs),Br=x({},xt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nt}),Zu=it(Br),Gu=x({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nl=it(Gu),bN=x({},os,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vN=it(bN),yN=x({},bn,{newState:0,oldState:0}),xN=it(yN),NN=[9,13,27,32],Pu=ga&&"CompositionEvent"in window,Si=null;ga&&"documentMode"in document&&(Si=document.documentMode);var jN=ga&&"TextEvent"in window&&!Si,Fh=ga&&(!Pu||Si&&8<Si&&11>=Si),Hh=" ",Vh=!1;function Zh(t,n){switch(t){case"keyup":return NN.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jl=!1;function SN(t,n){switch(t){case"compositionend":return Gh(n);case"keypress":return n.which!==32?null:(Vh=!0,Hh);case"textInput":return t=n.data,t===Hh&&Vh?null:t;default:return null}}function wN(t,n){if(jl)return t==="compositionend"||!Pu&&Zh(t,n)?(t=xe(),P=C=ba=null,jl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Fh&&n.locale!=="ko"?null:n.data;default:return null}}var _N={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ph(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!_N[t.type]:n==="textarea"}function Qh(t,n,r,o){xs?Ns?Ns.push(o):Ns=[o]:xs=o,n=Cc(n,"onChange"),0<n.length&&(r=new ra("onChange","change",null,r,o),t.push({event:r,listeners:n}))}var wi=null,_i=null;function EN(t){Rb(t,0)}function Io(t){var n=An(t);if(Or(n))return t}function Yh(t,n){if(t==="change")return n}var Kh=!1;if(ga){var Qu;if(ga){var Yu="oninput"in document;if(!Yu){var Xh=document.createElement("div");Xh.setAttribute("oninput","return;"),Yu=typeof Xh.oninput=="function"}Qu=Yu}else Qu=!1;Kh=Qu&&(!document.documentMode||9<document.documentMode)}function Jh(){wi&&(wi.detachEvent("onpropertychange",Wh),_i=wi=null)}function Wh(t){if(t.propertyName==="value"&&Io(_i)){var n=[];Qh(n,_i,t,kr(t)),Ur(EN,n)}}function AN(t,n,r){t==="focusin"?(Jh(),wi=n,_i=r,wi.attachEvent("onpropertychange",Wh)):t==="focusout"&&Jh()}function CN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Io(_i)}function ON(t,n){if(t==="click")return Io(n)}function RN(t,n){if(t==="input"||t==="change")return Io(n)}function TN(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Da=typeof Object.is=="function"?Object.is:TN;function Ei(t,n){if(Da(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var u=r[o];if(!We.call(n,u)||!Da(t[u],n[u]))return!1}return!0}function ep(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tp(t,n){var r=ep(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=n&&o>=n)return{node:r,offset:n-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ep(r)}}function np(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?np(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function ap(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=bs(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=bs(t.document)}return n}function Ku(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var DN=ga&&"documentMode"in document&&11>=document.documentMode,Sl=null,Xu=null,Ai=null,Ju=!1;function sp(t,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ju||Sl==null||Sl!==bs(o)||(o=Sl,"selectionStart"in o&&Ku(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ai&&Ei(Ai,o)||(Ai=o,o=Cc(Xu,"onSelect"),0<o.length&&(n=new ra("onSelect","select",null,n,r),t.push({event:n,listeners:o}),n.target=Sl)))}function qr(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var wl={animationend:qr("Animation","AnimationEnd"),animationiteration:qr("Animation","AnimationIteration"),animationstart:qr("Animation","AnimationStart"),transitionrun:qr("Transition","TransitionRun"),transitionstart:qr("Transition","TransitionStart"),transitioncancel:qr("Transition","TransitionCancel"),transitionend:qr("Transition","TransitionEnd")},Wu={},rp={};ga&&(rp=document.createElement("div").style,"AnimationEvent"in window||(delete wl.animationend.animation,delete wl.animationiteration.animation,delete wl.animationstart.animation),"TransitionEvent"in window||delete wl.transitionend.transition);function Ir(t){if(Wu[t])return Wu[t];if(!wl[t])return t;var n=wl[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in rp)return Wu[t]=n[r];return t}var lp=Ir("animationend"),ip=Ir("animationiteration"),op=Ir("animationstart"),zN=Ir("transitionrun"),kN=Ir("transitionstart"),MN=Ir("transitioncancel"),cp=Ir("transitionend"),up=new Map,ed="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ed.push("scrollEnd");function us(t,n){up.set(t,n),pn(n,[t])}var $o=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ga=[],_l=0,td=0;function Fo(){for(var t=_l,n=td=_l=0;n<t;){var r=Ga[n];Ga[n++]=null;var o=Ga[n];Ga[n++]=null;var u=Ga[n];Ga[n++]=null;var m=Ga[n];if(Ga[n++]=null,o!==null&&u!==null){var b=o.pending;b===null?u.next=u:(u.next=b.next,b.next=u),o.pending=u}m!==0&&dp(r,u,m)}}function Ho(t,n,r,o){Ga[_l++]=t,Ga[_l++]=n,Ga[_l++]=r,Ga[_l++]=o,td|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function nd(t,n,r,o){return Ho(t,n,r,o),Vo(t)}function $r(t,n){return Ho(t,null,null,n),Vo(t)}function dp(t,n,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var u=!1,m=t.return;m!==null;)m.childLanes|=r,o=m.alternate,o!==null&&(o.childLanes|=r),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(u=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,u&&n!==null&&(u=31-Et(r),t=m.hiddenUpdates,o=t[u],o===null?t[u]=[n]:o.push(n),n.lane=r|536870912),m):null}function Vo(t){if(50<Yi)throw Yi=0,ff=null,Error(i(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var El={};function UN(t,n,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function za(t,n,r,o){return new UN(t,n,r,o)}function ad(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ts(t,n){var r=t.alternate;return r===null?(r=za(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function fp(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Zo(t,n,r,o,u,m){var b=0;if(o=t,typeof t=="function")ad(t)&&(b=1);else if(typeof t=="string")b=$j(t,r,Y.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case fe:return t=za(31,r,n,u),t.elementType=fe,t.lanes=m,t;case A:return Fr(r.children,u,m,n);case R:b=8,u|=24;break;case F:return t=za(12,r,n,u|2),t.elementType=F,t.lanes=m,t;case D:return t=za(13,r,n,u),t.elementType=D,t.lanes=m,t;case K:return t=za(19,r,n,u),t.elementType=K,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case te:b=10;break e;case z:b=9;break e;case M:b=11;break e;case q:b=14;break e;case V:b=16,o=null;break e}b=29,r=Error(i(130,t===null?"null":typeof t,"")),o=null}return n=za(b,r,n,u),n.elementType=t,n.type=o,n.lanes=m,n}function Fr(t,n,r,o){return t=za(7,t,o,n),t.lanes=r,t}function sd(t,n,r){return t=za(6,t,null,n),t.lanes=r,t}function mp(t){var n=za(18,null,null,0);return n.stateNode=t,n}function rd(t,n,r){return n=za(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var hp=new WeakMap;function Pa(t,n){if(typeof t=="object"&&t!==null){var r=hp.get(t);return r!==void 0?r:(n={value:t,source:n,stack:we(n)},hp.set(t,n),n)}return{value:t,source:n,stack:we(n)}}var Al=[],Cl=0,Go=null,Ci=0,Qa=[],Ya=0,Xs=null,Ss=1,ws="";function Ds(t,n){Al[Cl++]=Ci,Al[Cl++]=Go,Go=t,Ci=n}function pp(t,n,r){Qa[Ya++]=Ss,Qa[Ya++]=ws,Qa[Ya++]=Xs,Xs=t;var o=Ss;t=ws;var u=32-Et(o)-1;o&=~(1<<u),r+=1;var m=32-Et(n)+u;if(30<m){var b=u-u%5;m=(o&(1<<b)-1).toString(32),o>>=b,u-=b,Ss=1<<32-Et(n)+u|r<<u|o,ws=m+t}else Ss=1<<m|r<<u|o,ws=t}function ld(t){t.return!==null&&(Ds(t,1),pp(t,1,0))}function id(t){for(;t===Go;)Go=Al[--Cl],Al[Cl]=null,Ci=Al[--Cl],Al[Cl]=null;for(;t===Xs;)Xs=Qa[--Ya],Qa[Ya]=null,ws=Qa[--Ya],Qa[Ya]=null,Ss=Qa[--Ya],Qa[Ya]=null}function gp(t,n){Qa[Ya++]=Ss,Qa[Ya++]=ws,Qa[Ya++]=Xs,Ss=n.id,ws=n.overflow,Xs=t}var Jn=null,en=null,_t=!1,Js=null,Ka=!1,od=Error(i(519));function Ws(t){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oi(Pa(n,t)),od}function bp(t){var n=t.stateNode,r=t.type,o=t.memoizedProps;switch(n[dt]=t,n[yt]=o,r){case"dialog":vt("cancel",n),vt("close",n);break;case"iframe":case"object":case"embed":vt("load",n);break;case"video":case"audio":for(r=0;r<Xi.length;r++)vt(Xi[r],n);break;case"source":vt("error",n);break;case"img":case"image":case"link":vt("error",n),vt("load",n);break;case"details":vt("toggle",n);break;case"input":vt("invalid",n),is(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":vt("invalid",n);break;case"textarea":vt("invalid",n),vl(n,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||kb(n.textContent,r)?(o.popover!=null&&(vt("beforetoggle",n),vt("toggle",n)),o.onScroll!=null&&vt("scroll",n),o.onScrollEnd!=null&&vt("scrollend",n),o.onClick!=null&&(n.onclick=Ta),n=!0):n=!1,n||Ws(t,!0)}function vp(t){for(Jn=t.return;Jn;)switch(Jn.tag){case 5:case 31:case 13:Ka=!1;return;case 27:case 3:Ka=!0;return;default:Jn=Jn.return}}function Ol(t){if(t!==Jn)return!1;if(!_t)return vp(t),_t=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Af(t.type,t.memoizedProps)),r=!r),r&&en&&Ws(t),vp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));en=Hb(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));en=Hb(t)}else n===27?(n=en,mr(t.type)?(t=Df,Df=null,en=t):en=n):en=Jn?Ja(t.stateNode.nextSibling):null;return!0}function Hr(){en=Jn=null,_t=!1}function cd(){var t=Js;return t!==null&&(Sa===null?Sa=t:Sa.push.apply(Sa,t),Js=null),t}function Oi(t){Js===null?Js=[t]:Js.push(t)}var ud=w(null),Vr=null,zs=null;function er(t,n,r){ce(ud,n._currentValue),n._currentValue=r}function ks(t){t._currentValue=ud.current,X(ud)}function dd(t,n,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===r)break;t=t.return}}function fd(t,n,r,o){var u=t.child;for(u!==null&&(u.return=t);u!==null;){var m=u.dependencies;if(m!==null){var b=u.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=u;for(var k=0;k<n.length;k++)if(N.context===n[k]){m.lanes|=r,N=m.alternate,N!==null&&(N.lanes|=r),dd(m.return,r,t),o||(b=null);break e}m=N.next}}else if(u.tag===18){if(b=u.return,b===null)throw Error(i(341));b.lanes|=r,m=b.alternate,m!==null&&(m.lanes|=r),dd(b,r,t),b=null}else b=u.child;if(b!==null)b.return=u;else for(b=u;b!==null;){if(b===t){b=null;break}if(u=b.sibling,u!==null){u.return=b.return,b=u;break}b=b.return}u=b}}function Rl(t,n,r,o){t=null;for(var u=n,m=!1;u!==null;){if(!m){if((u.flags&524288)!==0)m=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var b=u.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var N=u.type;Da(u.pendingProps.value,b.value)||(t!==null?t.push(N):t=[N])}}else if(u===Le.current){if(b=u.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(t!==null?t.push(no):t=[no])}u=u.return}t!==null&&fd(n,t,r,o),n.flags|=262144}function Po(t){for(t=t.firstContext;t!==null;){if(!Da(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Zr(t){Vr=t,zs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Wn(t){return yp(Vr,t)}function Qo(t,n){return Vr===null&&Zr(t),yp(t,n)}function yp(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},zs===null){if(t===null)throw Error(i(308));zs=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else zs=zs.next=n;return r}var LN=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},BN=e.unstable_scheduleCallback,qN=e.unstable_NormalPriority,On={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function md(){return{controller:new LN,data:new Map,refCount:0}}function Ri(t){t.refCount--,t.refCount===0&&BN(qN,function(){t.controller.abort()})}var Ti=null,hd=0,Tl=0,Dl=null;function IN(t,n){if(Ti===null){var r=Ti=[];hd=0,Tl=vf(),Dl={status:"pending",value:void 0,then:function(o){r.push(o)}}}return hd++,n.then(xp,xp),n}function xp(){if(--hd===0&&Ti!==null){Dl!==null&&(Dl.status="fulfilled");var t=Ti;Ti=null,Tl=0,Dl=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function $N(t,n){var r=[],o={status:"pending",value:null,reason:null,then:function(u){r.push(u)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var u=0;u<r.length;u++)(0,r[u])(n)},function(u){for(o.status="rejected",o.reason=u,u=0;u<r.length;u++)(0,r[u])(void 0)}),o}var Np=U.S;U.S=function(t,n){sb=$(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&IN(t,n),Np!==null&&Np(t,n)};var Gr=w(null);function pd(){var t=Gr.current;return t!==null?t:Yt.pooledCache}function Yo(t,n){n===null?ce(Gr,Gr.current):ce(Gr,n.pool)}function jp(){var t=pd();return t===null?null:{parent:On._currentValue,pool:t}}var zl=Error(i(460)),gd=Error(i(474)),Ko=Error(i(542)),Xo={then:function(){}};function Sp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function wp(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(Ta,Ta),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Ep(t),t;default:if(typeof n.status=="string")n.then(Ta,Ta);else{if(t=Yt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=o}},function(o){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Ep(t),t}throw Qr=n,zl}}function Pr(t){try{var n=t._init;return n(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Qr=r,zl):r}}var Qr=null;function _p(){if(Qr===null)throw Error(i(459));var t=Qr;return Qr=null,t}function Ep(t){if(t===zl||t===Ko)throw Error(i(483))}var kl=null,Di=0;function Jo(t){var n=Di;return Di+=1,kl===null&&(kl=[]),wp(kl,t,n)}function zi(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Wo(t,n){throw n.$$typeof===j?Error(i(525)):(t=Object.prototype.toString.call(n),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Ap(t){function n(Q,I){if(t){var ee=Q.deletions;ee===null?(Q.deletions=[I],Q.flags|=16):ee.push(I)}}function r(Q,I){if(!t)return null;for(;I!==null;)n(Q,I),I=I.sibling;return null}function o(Q){for(var I=new Map;Q!==null;)Q.key!==null?I.set(Q.key,Q):I.set(Q.index,Q),Q=Q.sibling;return I}function u(Q,I){return Q=Ts(Q,I),Q.index=0,Q.sibling=null,Q}function m(Q,I,ee){return Q.index=ee,t?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<I?(Q.flags|=67108866,I):ee):(Q.flags|=67108866,I)):(Q.flags|=1048576,I)}function b(Q){return t&&Q.alternate===null&&(Q.flags|=67108866),Q}function N(Q,I,ee,je){return I===null||I.tag!==6?(I=sd(ee,Q.mode,je),I.return=Q,I):(I=u(I,ee),I.return=Q,I)}function k(Q,I,ee,je){var tt=ee.type;return tt===A?ge(Q,I,ee.props.children,je,ee.key):I!==null&&(I.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===V&&Pr(tt)===I.type)?(I=u(I,ee.props),zi(I,ee),I.return=Q,I):(I=Zo(ee.type,ee.key,ee.props,null,Q.mode,je),zi(I,ee),I.return=Q,I)}function ne(Q,I,ee,je){return I===null||I.tag!==4||I.stateNode.containerInfo!==ee.containerInfo||I.stateNode.implementation!==ee.implementation?(I=rd(ee,Q.mode,je),I.return=Q,I):(I=u(I,ee.children||[]),I.return=Q,I)}function ge(Q,I,ee,je,tt){return I===null||I.tag!==7?(I=Fr(ee,Q.mode,je,tt),I.return=Q,I):(I=u(I,ee),I.return=Q,I)}function Ae(Q,I,ee){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=sd(""+I,Q.mode,ee),I.return=Q,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case H:return ee=Zo(I.type,I.key,I.props,null,Q.mode,ee),zi(ee,I),ee.return=Q,ee;case _:return I=rd(I,Q.mode,ee),I.return=Q,I;case V:return I=Pr(I),Ae(Q,I,ee)}if(De(I)||ve(I))return I=Fr(I,Q.mode,ee,null),I.return=Q,I;if(typeof I.then=="function")return Ae(Q,Jo(I),ee);if(I.$$typeof===te)return Ae(Q,Qo(Q,I),ee);Wo(Q,I)}return null}function re(Q,I,ee,je){var tt=I!==null?I.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return tt!==null?null:N(Q,I,""+ee,je);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case H:return ee.key===tt?k(Q,I,ee,je):null;case _:return ee.key===tt?ne(Q,I,ee,je):null;case V:return ee=Pr(ee),re(Q,I,ee,je)}if(De(ee)||ve(ee))return tt!==null?null:ge(Q,I,ee,je,null);if(typeof ee.then=="function")return re(Q,I,Jo(ee),je);if(ee.$$typeof===te)return re(Q,I,Qo(Q,ee),je);Wo(Q,ee)}return null}function oe(Q,I,ee,je,tt){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return Q=Q.get(ee)||null,N(I,Q,""+je,tt);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case H:return Q=Q.get(je.key===null?ee:je.key)||null,k(I,Q,je,tt);case _:return Q=Q.get(je.key===null?ee:je.key)||null,ne(I,Q,je,tt);case V:return je=Pr(je),oe(Q,I,ee,je,tt)}if(De(je)||ve(je))return Q=Q.get(ee)||null,ge(I,Q,je,tt,null);if(typeof je.then=="function")return oe(Q,I,ee,Jo(je),tt);if(je.$$typeof===te)return oe(Q,I,ee,Qo(I,je),tt);Wo(I,je)}return null}function Pe(Q,I,ee,je){for(var tt=null,Rt=null,Xe=I,ht=I=0,St=null;Xe!==null&&ht<ee.length;ht++){Xe.index>ht?(St=Xe,Xe=null):St=Xe.sibling;var Tt=re(Q,Xe,ee[ht],je);if(Tt===null){Xe===null&&(Xe=St);break}t&&Xe&&Tt.alternate===null&&n(Q,Xe),I=m(Tt,I,ht),Rt===null?tt=Tt:Rt.sibling=Tt,Rt=Tt,Xe=St}if(ht===ee.length)return r(Q,Xe),_t&&Ds(Q,ht),tt;if(Xe===null){for(;ht<ee.length;ht++)Xe=Ae(Q,ee[ht],je),Xe!==null&&(I=m(Xe,I,ht),Rt===null?tt=Xe:Rt.sibling=Xe,Rt=Xe);return _t&&Ds(Q,ht),tt}for(Xe=o(Xe);ht<ee.length;ht++)St=oe(Xe,Q,ht,ee[ht],je),St!==null&&(t&&St.alternate!==null&&Xe.delete(St.key===null?ht:St.key),I=m(St,I,ht),Rt===null?tt=St:Rt.sibling=St,Rt=St);return t&&Xe.forEach(function(vr){return n(Q,vr)}),_t&&Ds(Q,ht),tt}function st(Q,I,ee,je){if(ee==null)throw Error(i(151));for(var tt=null,Rt=null,Xe=I,ht=I=0,St=null,Tt=ee.next();Xe!==null&&!Tt.done;ht++,Tt=ee.next()){Xe.index>ht?(St=Xe,Xe=null):St=Xe.sibling;var vr=re(Q,Xe,Tt.value,je);if(vr===null){Xe===null&&(Xe=St);break}t&&Xe&&vr.alternate===null&&n(Q,Xe),I=m(vr,I,ht),Rt===null?tt=vr:Rt.sibling=vr,Rt=vr,Xe=St}if(Tt.done)return r(Q,Xe),_t&&Ds(Q,ht),tt;if(Xe===null){for(;!Tt.done;ht++,Tt=ee.next())Tt=Ae(Q,Tt.value,je),Tt!==null&&(I=m(Tt,I,ht),Rt===null?tt=Tt:Rt.sibling=Tt,Rt=Tt);return _t&&Ds(Q,ht),tt}for(Xe=o(Xe);!Tt.done;ht++,Tt=ee.next())Tt=oe(Xe,Q,ht,Tt.value,je),Tt!==null&&(t&&Tt.alternate!==null&&Xe.delete(Tt.key===null?ht:Tt.key),I=m(Tt,I,ht),Rt===null?tt=Tt:Rt.sibling=Tt,Rt=Tt);return t&&Xe.forEach(function(Jj){return n(Q,Jj)}),_t&&Ds(Q,ht),tt}function Zt(Q,I,ee,je){if(typeof ee=="object"&&ee!==null&&ee.type===A&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case H:e:{for(var tt=ee.key;I!==null;){if(I.key===tt){if(tt=ee.type,tt===A){if(I.tag===7){r(Q,I.sibling),je=u(I,ee.props.children),je.return=Q,Q=je;break e}}else if(I.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===V&&Pr(tt)===I.type){r(Q,I.sibling),je=u(I,ee.props),zi(je,ee),je.return=Q,Q=je;break e}r(Q,I);break}else n(Q,I);I=I.sibling}ee.type===A?(je=Fr(ee.props.children,Q.mode,je,ee.key),je.return=Q,Q=je):(je=Zo(ee.type,ee.key,ee.props,null,Q.mode,je),zi(je,ee),je.return=Q,Q=je)}return b(Q);case _:e:{for(tt=ee.key;I!==null;){if(I.key===tt)if(I.tag===4&&I.stateNode.containerInfo===ee.containerInfo&&I.stateNode.implementation===ee.implementation){r(Q,I.sibling),je=u(I,ee.children||[]),je.return=Q,Q=je;break e}else{r(Q,I);break}else n(Q,I);I=I.sibling}je=rd(ee,Q.mode,je),je.return=Q,Q=je}return b(Q);case V:return ee=Pr(ee),Zt(Q,I,ee,je)}if(De(ee))return Pe(Q,I,ee,je);if(ve(ee)){if(tt=ve(ee),typeof tt!="function")throw Error(i(150));return ee=tt.call(ee),st(Q,I,ee,je)}if(typeof ee.then=="function")return Zt(Q,I,Jo(ee),je);if(ee.$$typeof===te)return Zt(Q,I,Qo(Q,ee),je);Wo(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,I!==null&&I.tag===6?(r(Q,I.sibling),je=u(I,ee),je.return=Q,Q=je):(r(Q,I),je=sd(ee,Q.mode,je),je.return=Q,Q=je),b(Q)):r(Q,I)}return function(Q,I,ee,je){try{Di=0;var tt=Zt(Q,I,ee,je);return kl=null,tt}catch(Xe){if(Xe===zl||Xe===Ko)throw Xe;var Rt=za(29,Xe,null,Q.mode);return Rt.lanes=je,Rt.return=Q,Rt}finally{}}}var Yr=Ap(!0),Cp=Ap(!1),tr=!1;function bd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vd(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function nr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ar(t,n,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Dt&2)!==0){var u=o.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),o.pending=n,n=Vo(t),dp(t,null,r),n}return Ho(t,o,n,r),Vo(t)}function ki(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,ct(t,r)}}function yd(t,n){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var u=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?u=m=b:m=m.next=b,r=r.next}while(r!==null);m===null?u=m=n:m=m.next=n}else u=m=n;r={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var xd=!1;function Mi(){if(xd){var t=Dl;if(t!==null)throw t}}function Ui(t,n,r,o){xd=!1;var u=t.updateQueue;tr=!1;var m=u.firstBaseUpdate,b=u.lastBaseUpdate,N=u.shared.pending;if(N!==null){u.shared.pending=null;var k=N,ne=k.next;k.next=null,b===null?m=ne:b.next=ne,b=k;var ge=t.alternate;ge!==null&&(ge=ge.updateQueue,N=ge.lastBaseUpdate,N!==b&&(N===null?ge.firstBaseUpdate=ne:N.next=ne,ge.lastBaseUpdate=k))}if(m!==null){var Ae=u.baseState;b=0,ge=ne=k=null,N=m;do{var re=N.lane&-536870913,oe=re!==N.lane;if(oe?(jt&re)===re:(o&re)===re){re!==0&&re===Tl&&(xd=!0),ge!==null&&(ge=ge.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Pe=t,st=N;re=n;var Zt=r;switch(st.tag){case 1:if(Pe=st.payload,typeof Pe=="function"){Ae=Pe.call(Zt,Ae,re);break e}Ae=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=st.payload,re=typeof Pe=="function"?Pe.call(Zt,Ae,re):Pe,re==null)break e;Ae=x({},Ae,re);break e;case 2:tr=!0}}re=N.callback,re!==null&&(t.flags|=64,oe&&(t.flags|=8192),oe=u.callbacks,oe===null?u.callbacks=[re]:oe.push(re))}else oe={lane:re,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ge===null?(ne=ge=oe,k=Ae):ge=ge.next=oe,b|=re;if(N=N.next,N===null){if(N=u.shared.pending,N===null)break;oe=N,N=oe.next,oe.next=null,u.lastBaseUpdate=oe,u.shared.pending=null}}while(!0);ge===null&&(k=Ae),u.baseState=k,u.firstBaseUpdate=ne,u.lastBaseUpdate=ge,m===null&&(u.shared.lanes=0),or|=b,t.lanes=b,t.memoizedState=Ae}}function Op(t,n){if(typeof t!="function")throw Error(i(191,t));t.call(n)}function Rp(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Op(r[t],n)}var Ml=w(null),ec=w(0);function Tp(t,n){t=Hs,ce(ec,t),ce(Ml,n),Hs=t|n.baseLanes}function Nd(){ce(ec,Hs),ce(Ml,Ml.current)}function jd(){Hs=ec.current,X(Ml),X(ec)}var ka=w(null),Xa=null;function sr(t){var n=t.alternate;ce(Sn,Sn.current&1),ce(ka,t),Xa===null&&(n===null||Ml.current!==null||n.memoizedState!==null)&&(Xa=t)}function Sd(t){ce(Sn,Sn.current),ce(ka,t),Xa===null&&(Xa=t)}function Dp(t){t.tag===22?(ce(Sn,Sn.current),ce(ka,t),Xa===null&&(Xa=t)):rr()}function rr(){ce(Sn,Sn.current),ce(ka,ka.current)}function Ma(t){X(ka),Xa===t&&(Xa=null),X(Sn)}var Sn=w(0);function tc(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Rf(r)||Tf(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ms=0,ft=null,Ht=null,Rn=null,nc=!1,Ul=!1,Kr=!1,ac=0,Li=0,Ll=null,FN=0;function vn(){throw Error(i(321))}function wd(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!Da(t[r],n[r]))return!1;return!0}function _d(t,n,r,o,u,m){return Ms=m,ft=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,U.H=t===null||t.memoizedState===null?pg:Id,Kr=!1,m=r(o,u),Kr=!1,Ul&&(m=kp(n,r,o,u)),zp(t),m}function zp(t){U.H=Ii;var n=Ht!==null&&Ht.next!==null;if(Ms=0,Rn=Ht=ft=null,nc=!1,Li=0,Ll=null,n)throw Error(i(300));t===null||Tn||(t=t.dependencies,t!==null&&Po(t)&&(Tn=!0))}function kp(t,n,r,o){ft=t;var u=0;do{if(Ul&&(Ll=null),Li=0,Ul=!1,25<=u)throw Error(i(301));if(u+=1,Rn=Ht=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}U.H=gg,m=n(r,o)}while(Ul);return m}function HN(){var t=U.H,n=t.useState()[0];return n=typeof n.then=="function"?Bi(n):n,t=t.useState()[0],(Ht!==null?Ht.memoizedState:null)!==t&&(ft.flags|=1024),n}function Ed(){var t=ac!==0;return ac=0,t}function Ad(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function Cd(t){if(nc){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}nc=!1}Ms=0,Rn=Ht=ft=null,Ul=!1,Li=ac=0,Ll=null}function ua(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?ft.memoizedState=Rn=t:Rn=Rn.next=t,Rn}function wn(){if(Ht===null){var t=ft.alternate;t=t!==null?t.memoizedState:null}else t=Ht.next;var n=Rn===null?ft.memoizedState:Rn.next;if(n!==null)Rn=n,Ht=t;else{if(t===null)throw ft.alternate===null?Error(i(467)):Error(i(310));Ht=t,t={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Rn===null?ft.memoizedState=Rn=t:Rn=Rn.next=t}return Rn}function sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bi(t){var n=Li;return Li+=1,Ll===null&&(Ll=[]),t=wp(Ll,t,n),n=ft,(Rn===null?n.memoizedState:Rn.next)===null&&(n=n.alternate,U.H=n===null||n.memoizedState===null?pg:Id),t}function rc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Bi(t);if(t.$$typeof===te)return Wn(t)}throw Error(i(438,String(t)))}function Od(t){var n=null,r=ft.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=ft.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=sc(),ft.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),o=0;o<t;o++)r[o]=Re;return n.index++,r}function Us(t,n){return typeof n=="function"?n(t):n}function lc(t){var n=wn();return Rd(n,Ht,t)}function Rd(t,n,r){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=t.baseQueue,m=o.pending;if(m!==null){if(u!==null){var b=u.next;u.next=m.next,m.next=b}n.baseQueue=u=m,o.pending=null}if(m=t.baseState,u===null)t.memoizedState=m;else{n=u.next;var N=b=null,k=null,ne=n,ge=!1;do{var Ae=ne.lane&-536870913;if(Ae!==ne.lane?(jt&Ae)===Ae:(Ms&Ae)===Ae){var re=ne.revertLane;if(re===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),Ae===Tl&&(ge=!0);else if((Ms&re)===re){ne=ne.next,re===Tl&&(ge=!0);continue}else Ae={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},k===null?(N=k=Ae,b=m):k=k.next=Ae,ft.lanes|=re,or|=re;Ae=ne.action,Kr&&r(m,Ae),m=ne.hasEagerState?ne.eagerState:r(m,Ae)}else re={lane:Ae,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},k===null?(N=k=re,b=m):k=k.next=re,ft.lanes|=Ae,or|=Ae;ne=ne.next}while(ne!==null&&ne!==n);if(k===null?b=m:k.next=N,!Da(m,t.memoizedState)&&(Tn=!0,ge&&(r=Dl,r!==null)))throw r;t.memoizedState=m,t.baseState=b,t.baseQueue=k,o.lastRenderedState=m}return u===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Td(t){var n=wn(),r=n.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=t;var o=r.dispatch,u=r.pending,m=n.memoizedState;if(u!==null){r.pending=null;var b=u=u.next;do m=t(m,b.action),b=b.next;while(b!==u);Da(m,n.memoizedState)||(Tn=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),r.lastRenderedState=m}return[m,o]}function Mp(t,n,r){var o=ft,u=wn(),m=_t;if(m){if(r===void 0)throw Error(i(407));r=r()}else r=n();var b=!Da((Ht||u).memoizedState,r);if(b&&(u.memoizedState=r,Tn=!0),u=u.queue,kd(Bp.bind(null,o,u,t),[t]),u.getSnapshot!==n||b||Rn!==null&&Rn.memoizedState.tag&1){if(o.flags|=2048,Bl(9,{destroy:void 0},Lp.bind(null,o,u,r,n),null),Yt===null)throw Error(i(349));m||(Ms&127)!==0||Up(o,n,r)}return r}function Up(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=ft.updateQueue,n===null?(n=sc(),ft.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function Lp(t,n,r,o){n.value=r,n.getSnapshot=o,qp(n)&&Ip(t)}function Bp(t,n,r){return r(function(){qp(n)&&Ip(t)})}function qp(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!Da(t,r)}catch{return!0}}function Ip(t){var n=$r(t,2);n!==null&&wa(n,t,2)}function Dd(t){var n=ua();if(typeof t=="function"){var r=t;if(t=r(),Kr){Kt(!0);try{r()}finally{Kt(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:t},n}function $p(t,n,r,o){return t.baseState=r,Rd(t,Ht,typeof o=="function"?o:Us)}function VN(t,n,r,o,u){if(cc(t))throw Error(i(485));if(t=n.action,t!==null){var m={payload:u,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};U.T!==null?r(!0):m.isTransition=!1,o(m),r=n.pending,r===null?(m.next=n.pending=m,Fp(n,m)):(m.next=r.next,n.pending=r.next=m)}}function Fp(t,n){var r=n.action,o=n.payload,u=t.state;if(n.isTransition){var m=U.T,b={};U.T=b;try{var N=r(u,o),k=U.S;k!==null&&k(b,N),Hp(t,n,N)}catch(ne){zd(t,n,ne)}finally{m!==null&&b.types!==null&&(m.types=b.types),U.T=m}}else try{m=r(u,o),Hp(t,n,m)}catch(ne){zd(t,n,ne)}}function Hp(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){Vp(t,n,o)},function(o){return zd(t,n,o)}):Vp(t,n,r)}function Vp(t,n,r){n.status="fulfilled",n.value=r,Zp(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,Fp(t,r)))}function zd(t,n,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,Zp(n),n=n.next;while(n!==o)}t.action=null}function Zp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Gp(t,n){return n}function Pp(t,n){if(_t){var r=Yt.formState;if(r!==null){e:{var o=ft;if(_t){if(en){t:{for(var u=en,m=Ka;u.nodeType!==8;){if(!m){u=null;break t}if(u=Ja(u.nextSibling),u===null){u=null;break t}}m=u.data,u=m==="F!"||m==="F"?u:null}if(u){en=Ja(u.nextSibling),o=u.data==="F!";break e}}Ws(o)}o=!1}o&&(n=r[0])}}return r=ua(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gp,lastRenderedState:n},r.queue=o,r=fg.bind(null,ft,o),o.dispatch=r,o=Dd(!1),m=qd.bind(null,ft,!1,o.queue),o=ua(),u={state:n,dispatch:null,action:t,pending:null},o.queue=u,r=VN.bind(null,ft,u,m,r),u.dispatch=r,o.memoizedState=t,[n,r,!1]}function Qp(t){var n=wn();return Yp(n,Ht,t)}function Yp(t,n,r){if(n=Rd(t,n,Gp)[0],t=lc(Us)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Bi(n)}catch(b){throw b===zl?Ko:b}else o=n;n=wn();var u=n.queue,m=u.dispatch;return r!==n.memoizedState&&(ft.flags|=2048,Bl(9,{destroy:void 0},ZN.bind(null,u,r),null)),[o,m,t]}function ZN(t,n){t.action=n}function Kp(t){var n=wn(),r=Ht;if(r!==null)return Yp(n,r,t);wn(),n=n.memoizedState,r=wn();var o=r.queue.dispatch;return r.memoizedState=t,[n,o,!1]}function Bl(t,n,r,o){return t={tag:t,create:r,deps:o,inst:n,next:null},n=ft.updateQueue,n===null&&(n=sc(),ft.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,n.lastEffect=t),t}function Xp(){return wn().memoizedState}function ic(t,n,r,o){var u=ua();ft.flags|=t,u.memoizedState=Bl(1|n,{destroy:void 0},r,o===void 0?null:o)}function oc(t,n,r,o){var u=wn();o=o===void 0?null:o;var m=u.memoizedState.inst;Ht!==null&&o!==null&&wd(o,Ht.memoizedState.deps)?u.memoizedState=Bl(n,m,r,o):(ft.flags|=t,u.memoizedState=Bl(1|n,m,r,o))}function Jp(t,n){ic(8390656,8,t,n)}function kd(t,n){oc(2048,8,t,n)}function GN(t){ft.flags|=4;var n=ft.updateQueue;if(n===null)n=sc(),ft.updateQueue=n,n.events=[t];else{var r=n.events;r===null?n.events=[t]:r.push(t)}}function Wp(t){var n=wn().memoizedState;return GN({ref:n,nextImpl:t}),function(){if((Dt&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function eg(t,n){return oc(4,2,t,n)}function tg(t,n){return oc(4,4,t,n)}function ng(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function ag(t,n,r){r=r!=null?r.concat([t]):null,oc(4,4,ng.bind(null,n,t),r)}function Md(){}function sg(t,n){var r=wn();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&wd(n,o[1])?o[0]:(r.memoizedState=[t,n],t)}function rg(t,n){var r=wn();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&wd(n,o[1]))return o[0];if(o=t(),Kr){Kt(!0);try{t()}finally{Kt(!1)}}return r.memoizedState=[o,n],o}function Ud(t,n,r){return r===void 0||(Ms&1073741824)!==0&&(jt&261930)===0?t.memoizedState=n:(t.memoizedState=r,t=lb(),ft.lanes|=t,or|=t,r)}function lg(t,n,r,o){return Da(r,n)?r:Ml.current!==null?(t=Ud(t,r,o),Da(t,n)||(Tn=!0),t):(Ms&42)===0||(Ms&1073741824)!==0&&(jt&261930)===0?(Tn=!0,t.memoizedState=r):(t=lb(),ft.lanes|=t,or|=t,n)}function ig(t,n,r,o,u){var m=Z.p;Z.p=m!==0&&8>m?m:8;var b=U.T,N={};U.T=N,qd(t,!1,n,r);try{var k=u(),ne=U.S;if(ne!==null&&ne(N,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ge=$N(k,o);qi(t,n,ge,Ba(t))}else qi(t,n,o,Ba(t))}catch(Ae){qi(t,n,{then:function(){},status:"rejected",reason:Ae},Ba())}finally{Z.p=m,b!==null&&N.types!==null&&(b.types=N.types),U.T=b}}function PN(){}function Ld(t,n,r,o){if(t.tag!==5)throw Error(i(476));var u=og(t).queue;ig(t,u,n,ae,r===null?PN:function(){return cg(t),r(o)})}function og(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:ae},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function cg(t){var n=og(t);n.next===null&&(n=t.alternate.memoizedState),qi(t,n.next.queue,{},Ba())}function Bd(){return Wn(no)}function ug(){return wn().memoizedState}function dg(){return wn().memoizedState}function QN(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=Ba();t=nr(r);var o=ar(n,t,r);o!==null&&(wa(o,n,r),ki(o,n,r)),n={cache:md()},t.payload=n;return}n=n.return}}function YN(t,n,r){var o=Ba();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},cc(t)?mg(n,r):(r=nd(t,n,r,o),r!==null&&(wa(r,t,o),hg(r,n,o)))}function fg(t,n,r){var o=Ba();qi(t,n,r,o)}function qi(t,n,r,o){var u={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(cc(t))mg(n,u);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var b=n.lastRenderedState,N=m(b,r);if(u.hasEagerState=!0,u.eagerState=N,Da(N,b))return Ho(t,n,u,0),Yt===null&&Fo(),!1}catch{}finally{}if(r=nd(t,n,u,o),r!==null)return wa(r,t,o),hg(r,n,o),!0}return!1}function qd(t,n,r,o){if(o={lane:2,revertLane:vf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},cc(t)){if(n)throw Error(i(479))}else n=nd(t,r,o,2),n!==null&&wa(n,t,2)}function cc(t){var n=t.alternate;return t===ft||n!==null&&n===ft}function mg(t,n){Ul=nc=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function hg(t,n,r){if((r&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,ct(t,r)}}var Ii={readContext:Wn,use:rc,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn};Ii.useEffectEvent=vn;var pg={readContext:Wn,use:rc,useCallback:function(t,n){return ua().memoizedState=[t,n===void 0?null:n],t},useContext:Wn,useEffect:Jp,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,ic(4194308,4,ng.bind(null,n,t),r)},useLayoutEffect:function(t,n){return ic(4194308,4,t,n)},useInsertionEffect:function(t,n){ic(4,2,t,n)},useMemo:function(t,n){var r=ua();n=n===void 0?null:n;var o=t();if(Kr){Kt(!0);try{t()}finally{Kt(!1)}}return r.memoizedState=[o,n],o},useReducer:function(t,n,r){var o=ua();if(r!==void 0){var u=r(n);if(Kr){Kt(!0);try{r(n)}finally{Kt(!1)}}}else u=n;return o.memoizedState=o.baseState=u,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:u},o.queue=t,t=t.dispatch=YN.bind(null,ft,t),[o.memoizedState,t]},useRef:function(t){var n=ua();return t={current:t},n.memoizedState=t},useState:function(t){t=Dd(t);var n=t.queue,r=fg.bind(null,ft,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:Md,useDeferredValue:function(t,n){var r=ua();return Ud(r,t,n)},useTransition:function(){var t=Dd(!1);return t=ig.bind(null,ft,t.queue,!0,!1),ua().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var o=ft,u=ua();if(_t){if(r===void 0)throw Error(i(407));r=r()}else{if(r=n(),Yt===null)throw Error(i(349));(jt&127)!==0||Up(o,n,r)}u.memoizedState=r;var m={value:r,getSnapshot:n};return u.queue=m,Jp(Bp.bind(null,o,m,t),[t]),o.flags|=2048,Bl(9,{destroy:void 0},Lp.bind(null,o,m,r,n),null),r},useId:function(){var t=ua(),n=Yt.identifierPrefix;if(_t){var r=ws,o=Ss;r=(o&~(1<<32-Et(o)-1)).toString(32)+r,n="_"+n+"R_"+r,r=ac++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=FN++,n="_"+n+"r_"+r.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Bd,useFormState:Pp,useActionState:Pp,useOptimistic:function(t){var n=ua();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=qd.bind(null,ft,!0,r),r.dispatch=n,[t,n]},useMemoCache:Od,useCacheRefresh:function(){return ua().memoizedState=QN.bind(null,ft)},useEffectEvent:function(t){var n=ua(),r={impl:t};return n.memoizedState=r,function(){if((Dt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},Id={readContext:Wn,use:rc,useCallback:sg,useContext:Wn,useEffect:kd,useImperativeHandle:ag,useInsertionEffect:eg,useLayoutEffect:tg,useMemo:rg,useReducer:lc,useRef:Xp,useState:function(){return lc(Us)},useDebugValue:Md,useDeferredValue:function(t,n){var r=wn();return lg(r,Ht.memoizedState,t,n)},useTransition:function(){var t=lc(Us)[0],n=wn().memoizedState;return[typeof t=="boolean"?t:Bi(t),n]},useSyncExternalStore:Mp,useId:ug,useHostTransitionStatus:Bd,useFormState:Qp,useActionState:Qp,useOptimistic:function(t,n){var r=wn();return $p(r,Ht,t,n)},useMemoCache:Od,useCacheRefresh:dg};Id.useEffectEvent=Wp;var gg={readContext:Wn,use:rc,useCallback:sg,useContext:Wn,useEffect:kd,useImperativeHandle:ag,useInsertionEffect:eg,useLayoutEffect:tg,useMemo:rg,useReducer:Td,useRef:Xp,useState:function(){return Td(Us)},useDebugValue:Md,useDeferredValue:function(t,n){var r=wn();return Ht===null?Ud(r,t,n):lg(r,Ht.memoizedState,t,n)},useTransition:function(){var t=Td(Us)[0],n=wn().memoizedState;return[typeof t=="boolean"?t:Bi(t),n]},useSyncExternalStore:Mp,useId:ug,useHostTransitionStatus:Bd,useFormState:Kp,useActionState:Kp,useOptimistic:function(t,n){var r=wn();return Ht!==null?$p(r,Ht,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Od,useCacheRefresh:dg};gg.useEffectEvent=Wp;function $d(t,n,r,o){n=t.memoizedState,r=r(o,n),r=r==null?n:x({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Fd={enqueueSetState:function(t,n,r){t=t._reactInternals;var o=Ba(),u=nr(o);u.payload=n,r!=null&&(u.callback=r),n=ar(t,u,o),n!==null&&(wa(n,t,o),ki(n,t,o))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var o=Ba(),u=nr(o);u.tag=1,u.payload=n,r!=null&&(u.callback=r),n=ar(t,u,o),n!==null&&(wa(n,t,o),ki(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=Ba(),o=nr(r);o.tag=2,n!=null&&(o.callback=n),n=ar(t,o,r),n!==null&&(wa(n,t,r),ki(n,t,r))}};function bg(t,n,r,o,u,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,b):n.prototype&&n.prototype.isPureReactComponent?!Ei(r,o)||!Ei(u,m):!0}function vg(t,n,r,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==t&&Fd.enqueueReplaceState(n,n.state,null)}function Xr(t,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(t=t.defaultProps){r===n&&(r=x({},r));for(var u in t)r[u]===void 0&&(r[u]=t[u])}return r}function yg(t){$o(t)}function xg(t){console.error(t)}function Ng(t){$o(t)}function uc(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function jg(t,n,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function Hd(t,n,r){return r=nr(r),r.tag=3,r.payload={element:null},r.callback=function(){uc(t,n)},r}function Sg(t){return t=nr(t),t.tag=3,t}function wg(t,n,r,o){var u=r.type.getDerivedStateFromError;if(typeof u=="function"){var m=o.value;t.payload=function(){return u(m)},t.callback=function(){jg(n,r,o)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){jg(n,r,o),typeof u!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var N=o.stack;this.componentDidCatch(o.value,{componentStack:N!==null?N:""})})}function KN(t,n,r,o,u){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&Rl(n,r,u,!0),r=ka.current,r!==null){switch(r.tag){case 31:case 13:return Xa===null?jc():r.alternate===null&&yn===0&&(yn=3),r.flags&=-257,r.flags|=65536,r.lanes=u,o===Xo?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),pf(t,o,u)),!1;case 22:return r.flags|=65536,o===Xo?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),pf(t,o,u)),!1}throw Error(i(435,r.tag))}return pf(t,o,u),jc(),!1}if(_t)return n=ka.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,o!==od&&(t=Error(i(422),{cause:o}),Oi(Pa(t,r)))):(o!==od&&(n=Error(i(423),{cause:o}),Oi(Pa(n,r))),t=t.current.alternate,t.flags|=65536,u&=-u,t.lanes|=u,o=Pa(o,r),u=Hd(t.stateNode,o,u),yd(t,u),yn!==4&&(yn=2)),!1;var m=Error(i(520),{cause:o});if(m=Pa(m,r),Qi===null?Qi=[m]:Qi.push(m),yn!==4&&(yn=2),n===null)return!0;o=Pa(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=u&-u,r.lanes|=t,t=Hd(r.stateNode,o,t),yd(r,t),!1;case 1:if(n=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(cr===null||!cr.has(m))))return r.flags|=65536,u&=-u,r.lanes|=u,u=Sg(u),wg(u,t,r,o),yd(r,u),!1}r=r.return}while(r!==null);return!1}var Vd=Error(i(461)),Tn=!1;function ea(t,n,r,o){n.child=t===null?Cp(n,null,r,o):Yr(n,t.child,r,o)}function _g(t,n,r,o,u){r=r.render;var m=n.ref;if("ref"in o){var b={};for(var N in o)N!=="ref"&&(b[N]=o[N])}else b=o;return Zr(n),o=_d(t,n,r,b,m,u),N=Ed(),t!==null&&!Tn?(Ad(t,n,u),Ls(t,n,u)):(_t&&N&&ld(n),n.flags|=1,ea(t,n,o,u),n.child)}function Eg(t,n,r,o,u){if(t===null){var m=r.type;return typeof m=="function"&&!ad(m)&&m.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=m,Ag(t,n,m,o,u)):(t=Zo(r.type,null,o,n,n.mode,u),t.ref=n.ref,t.return=n,n.child=t)}if(m=t.child,!Jd(t,u)){var b=m.memoizedProps;if(r=r.compare,r=r!==null?r:Ei,r(b,o)&&t.ref===n.ref)return Ls(t,n,u)}return n.flags|=1,t=Ts(m,o),t.ref=n.ref,t.return=n,n.child=t}function Ag(t,n,r,o,u){if(t!==null){var m=t.memoizedProps;if(Ei(m,o)&&t.ref===n.ref)if(Tn=!1,n.pendingProps=o=m,Jd(t,u))(t.flags&131072)!==0&&(Tn=!0);else return n.lanes=t.lanes,Ls(t,n,u)}return Zd(t,n,r,o,u)}function Cg(t,n,r,o){var u=o.children,m=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,t!==null){for(o=n.child=t.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~m}else o=0,n.child=null;return Og(t,n,m,r,o)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Yo(n,m!==null?m.cachePool:null),m!==null?Tp(n,m):Nd(),Dp(n);else return o=n.lanes=536870912,Og(t,n,m!==null?m.baseLanes|r:r,r,o)}else m!==null?(Yo(n,m.cachePool),Tp(n,m),rr(),n.memoizedState=null):(t!==null&&Yo(n,null),Nd(),rr());return ea(t,n,u,r),n.child}function $i(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Og(t,n,r,o,u){var m=pd();return m=m===null?null:{parent:On._currentValue,pool:m},n.memoizedState={baseLanes:r,cachePool:m},t!==null&&Yo(n,null),Nd(),Dp(n),t!==null&&Rl(t,n,o,!0),n.childLanes=u,null}function dc(t,n){return n=mc({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function Rg(t,n,r){return Yr(n,t.child,null,r),t=dc(n,n.pendingProps),t.flags|=2,Ma(n),n.memoizedState=null,t}function XN(t,n,r){var o=n.pendingProps,u=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(_t){if(o.mode==="hidden")return t=dc(n,o),n.lanes=536870912,$i(null,t);if(Sd(n),(t=en)?(t=Fb(t,Ka),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Xs!==null?{id:Ss,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},r=mp(t),r.return=n,n.child=r,Jn=n,en=null)):t=null,t===null)throw Ws(n);return n.lanes=536870912,null}return dc(n,o)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if(Sd(n),u)if(n.flags&256)n.flags&=-257,n=Rg(t,n,r);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(i(558));else if(Tn||Rl(t,n,r,!1),u=(r&t.childLanes)!==0,Tn||u){if(o=Yt,o!==null&&(b=Ke(o,r),b!==0&&b!==m.retryLane))throw m.retryLane=b,$r(t,b),wa(o,t,b),Vd;jc(),n=Rg(t,n,r)}else t=m.treeContext,en=Ja(b.nextSibling),Jn=n,_t=!0,Js=null,Ka=!1,t!==null&&gp(n,t),n=dc(n,o),n.flags|=4096;return n}return t=Ts(t.child,{mode:o.mode,children:o.children}),t.ref=n.ref,n.child=t,t.return=n,t}function fc(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function Zd(t,n,r,o,u){return Zr(n),r=_d(t,n,r,o,void 0,u),o=Ed(),t!==null&&!Tn?(Ad(t,n,u),Ls(t,n,u)):(_t&&o&&ld(n),n.flags|=1,ea(t,n,r,u),n.child)}function Tg(t,n,r,o,u,m){return Zr(n),n.updateQueue=null,r=kp(n,o,r,u),zp(t),o=Ed(),t!==null&&!Tn?(Ad(t,n,m),Ls(t,n,m)):(_t&&o&&ld(n),n.flags|=1,ea(t,n,r,m),n.child)}function Dg(t,n,r,o,u){if(Zr(n),n.stateNode===null){var m=El,b=r.contextType;typeof b=="object"&&b!==null&&(m=Wn(b)),m=new r(o,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Fd,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=o,m.state=n.memoizedState,m.refs={},bd(n),b=r.contextType,m.context=typeof b=="object"&&b!==null?Wn(b):El,m.state=n.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&($d(n,r,b,o),m.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&Fd.enqueueReplaceState(m,m.state,null),Ui(n,o,m,u),Mi(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){m=n.stateNode;var N=n.memoizedProps,k=Xr(r,N);m.props=k;var ne=m.context,ge=r.contextType;b=El,typeof ge=="object"&&ge!==null&&(b=Wn(ge));var Ae=r.getDerivedStateFromProps;ge=typeof Ae=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=n.pendingProps!==N,ge||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||ne!==b)&&vg(n,m,o,b),tr=!1;var re=n.memoizedState;m.state=re,Ui(n,o,m,u),Mi(),ne=n.memoizedState,N||re!==ne||tr?(typeof Ae=="function"&&($d(n,r,Ae,o),ne=n.memoizedState),(k=tr||bg(n,r,k,o,re,ne,b))?(ge||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=ne),m.props=o,m.state=ne,m.context=b,o=k):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{m=n.stateNode,vd(t,n),b=n.memoizedProps,ge=Xr(r,b),m.props=ge,Ae=n.pendingProps,re=m.context,ne=r.contextType,k=El,typeof ne=="object"&&ne!==null&&(k=Wn(ne)),N=r.getDerivedStateFromProps,(ne=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==Ae||re!==k)&&vg(n,m,o,k),tr=!1,re=n.memoizedState,m.state=re,Ui(n,o,m,u),Mi();var oe=n.memoizedState;b!==Ae||re!==oe||tr||t!==null&&t.dependencies!==null&&Po(t.dependencies)?(typeof N=="function"&&($d(n,r,N,o),oe=n.memoizedState),(ge=tr||bg(n,r,ge,o,re,oe,k)||t!==null&&t.dependencies!==null&&Po(t.dependencies))?(ne||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,oe,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,oe,k)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&re===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&re===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=oe),m.props=o,m.state=oe,m.context=k,o=ge):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&re===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&re===t.memoizedState||(n.flags|=1024),o=!1)}return m=o,fc(t,n),o=(n.flags&128)!==0,m||o?(m=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,t!==null&&o?(n.child=Yr(n,t.child,null,u),n.child=Yr(n,null,r,u)):ea(t,n,r,u),n.memoizedState=m.state,t=n.child):t=Ls(t,n,u),t}function zg(t,n,r,o){return Hr(),n.flags|=256,ea(t,n,r,o),n.child}var Gd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pd(t){return{baseLanes:t,cachePool:jp()}}function Qd(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=La),t}function kg(t,n,r){var o=n.pendingProps,u=!1,m=(n.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(Sn.current&2)!==0),b&&(u=!0,n.flags&=-129),b=(n.flags&32)!==0,n.flags&=-33,t===null){if(_t){if(u?sr(n):rr(),(t=en)?(t=Fb(t,Ka),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Xs!==null?{id:Ss,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},r=mp(t),r.return=n,n.child=r,Jn=n,en=null)):t=null,t===null)throw Ws(n);return Tf(t)?n.lanes=32:n.lanes=536870912,null}var N=o.children;return o=o.fallback,u?(rr(),u=n.mode,N=mc({mode:"hidden",children:N},u),o=Fr(o,u,r,null),N.return=n,o.return=n,N.sibling=o,n.child=N,o=n.child,o.memoizedState=Pd(r),o.childLanes=Qd(t,b,r),n.memoizedState=Gd,$i(null,o)):(sr(n),Yd(n,N))}var k=t.memoizedState;if(k!==null&&(N=k.dehydrated,N!==null)){if(m)n.flags&256?(sr(n),n.flags&=-257,n=Kd(t,n,r)):n.memoizedState!==null?(rr(),n.child=t.child,n.flags|=128,n=null):(rr(),N=o.fallback,u=n.mode,o=mc({mode:"visible",children:o.children},u),N=Fr(N,u,r,null),N.flags|=2,o.return=n,N.return=n,o.sibling=N,n.child=o,Yr(n,t.child,null,r),o=n.child,o.memoizedState=Pd(r),o.childLanes=Qd(t,b,r),n.memoizedState=Gd,n=$i(null,o));else if(sr(n),Tf(N)){if(b=N.nextSibling&&N.nextSibling.dataset,b)var ne=b.dgst;b=ne,o=Error(i(419)),o.stack="",o.digest=b,Oi({value:o,source:null,stack:null}),n=Kd(t,n,r)}else if(Tn||Rl(t,n,r,!1),b=(r&t.childLanes)!==0,Tn||b){if(b=Yt,b!==null&&(o=Ke(b,r),o!==0&&o!==k.retryLane))throw k.retryLane=o,$r(t,o),wa(b,t,o),Vd;Rf(N)||jc(),n=Kd(t,n,r)}else Rf(N)?(n.flags|=192,n.child=t.child,n=null):(t=k.treeContext,en=Ja(N.nextSibling),Jn=n,_t=!0,Js=null,Ka=!1,t!==null&&gp(n,t),n=Yd(n,o.children),n.flags|=4096);return n}return u?(rr(),N=o.fallback,u=n.mode,k=t.child,ne=k.sibling,o=Ts(k,{mode:"hidden",children:o.children}),o.subtreeFlags=k.subtreeFlags&65011712,ne!==null?N=Ts(ne,N):(N=Fr(N,u,r,null),N.flags|=2),N.return=n,o.return=n,o.sibling=N,n.child=o,$i(null,o),o=n.child,N=t.child.memoizedState,N===null?N=Pd(r):(u=N.cachePool,u!==null?(k=On._currentValue,u=u.parent!==k?{parent:k,pool:k}:u):u=jp(),N={baseLanes:N.baseLanes|r,cachePool:u}),o.memoizedState=N,o.childLanes=Qd(t,b,r),n.memoizedState=Gd,$i(t.child,o)):(sr(n),r=t.child,t=r.sibling,r=Ts(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,t!==null&&(b=n.deletions,b===null?(n.deletions=[t],n.flags|=16):b.push(t)),n.child=r,n.memoizedState=null,r)}function Yd(t,n){return n=mc({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function mc(t,n){return t=za(22,t,null,n),t.lanes=0,t}function Kd(t,n,r){return Yr(n,t.child,null,r),t=Yd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Mg(t,n,r){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),dd(t.return,n,r)}function Xd(t,n,r,o,u,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:u,treeForkCount:m}:(b.isBackwards=n,b.rendering=null,b.renderingStartTime=0,b.last=o,b.tail=r,b.tailMode=u,b.treeForkCount=m)}function Ug(t,n,r){var o=n.pendingProps,u=o.revealOrder,m=o.tail;o=o.children;var b=Sn.current,N=(b&2)!==0;if(N?(b=b&1|2,n.flags|=128):b&=1,ce(Sn,b),ea(t,n,o,r),o=_t?Ci:0,!N&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mg(t,r,n);else if(t.tag===19)Mg(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(u){case"forwards":for(r=n.child,u=null;r!==null;)t=r.alternate,t!==null&&tc(t)===null&&(u=r),r=r.sibling;r=u,r===null?(u=n.child,n.child=null):(u=r.sibling,r.sibling=null),Xd(n,!1,u,r,m,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,u=n.child,n.child=null;u!==null;){if(t=u.alternate,t!==null&&tc(t)===null){n.child=u;break}t=u.sibling,u.sibling=r,r=u,u=t}Xd(n,!0,r,null,m,o);break;case"together":Xd(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Ls(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),or|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(Rl(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(i(153));if(n.child!==null){for(t=n.child,r=Ts(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=Ts(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Jd(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Po(t)))}function JN(t,n,r){switch(n.tag){case 3:Ze(n,n.stateNode.containerInfo),er(n,On,t.memoizedState.cache),Hr();break;case 27:case 5:Be(n);break;case 4:Ze(n,n.stateNode.containerInfo);break;case 10:er(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Sd(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(sr(n),n.flags|=128,null):(r&n.child.childLanes)!==0?kg(t,n,r):(sr(n),t=Ls(t,n,r),t!==null?t.sibling:null);sr(n);break;case 19:var u=(t.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(Rl(t,n,r,!1),o=(r&n.childLanes)!==0),u){if(o)return Ug(t,n,r);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),ce(Sn,Sn.current),o)break;return null;case 22:return n.lanes=0,Cg(t,n,r,n.pendingProps);case 24:er(n,On,t.memoizedState.cache)}return Ls(t,n,r)}function Lg(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)Tn=!0;else{if(!Jd(t,r)&&(n.flags&128)===0)return Tn=!1,JN(t,n,r);Tn=(t.flags&131072)!==0}else Tn=!1,_t&&(n.flags&1048576)!==0&&pp(n,Ci,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(t=Pr(n.elementType),n.type=t,typeof t=="function")ad(t)?(o=Xr(t,o),n.tag=1,n=Dg(null,n,t,o,r)):(n.tag=0,n=Zd(null,n,t,o,r));else{if(t!=null){var u=t.$$typeof;if(u===M){n.tag=11,n=_g(null,n,t,o,r);break e}else if(u===q){n.tag=14,n=Eg(null,n,t,o,r);break e}}throw n=ke(t)||t,Error(i(306,n,""))}}return n;case 0:return Zd(t,n,n.type,n.pendingProps,r);case 1:return o=n.type,u=Xr(o,n.pendingProps),Dg(t,n,o,u,r);case 3:e:{if(Ze(n,n.stateNode.containerInfo),t===null)throw Error(i(387));o=n.pendingProps;var m=n.memoizedState;u=m.element,vd(t,n),Ui(n,o,null,r);var b=n.memoizedState;if(o=b.cache,er(n,On,o),o!==m.cache&&fd(n,[On],r,!0),Mi(),o=b.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:b.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=zg(t,n,o,r);break e}else if(o!==u){u=Pa(Error(i(424)),n),Oi(u),n=zg(t,n,o,r);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(en=Ja(t.firstChild),Jn=n,_t=!0,Js=null,Ka=!0,r=Cp(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Hr(),o===u){n=Ls(t,n,r);break e}ea(t,n,o,r)}n=n.child}return n;case 26:return fc(t,n),t===null?(r=Qb(n.type,null,n.pendingProps,null))?n.memoizedState=r:_t||(r=n.type,t=n.pendingProps,o=Oc(Se.current).createElement(r),o[dt]=n,o[yt]=t,ta(o,r,t),wt(o),n.stateNode=o):n.memoizedState=Qb(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Be(n),t===null&&_t&&(o=n.stateNode=Zb(n.type,n.pendingProps,Se.current),Jn=n,Ka=!0,u=en,mr(n.type)?(Df=u,en=Ja(o.firstChild)):en=u),ea(t,n,n.pendingProps.children,r),fc(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&_t&&((u=o=en)&&(o=Cj(o,n.type,n.pendingProps,Ka),o!==null?(n.stateNode=o,Jn=n,en=Ja(o.firstChild),Ka=!1,u=!0):u=!1),u||Ws(n)),Be(n),u=n.type,m=n.pendingProps,b=t!==null?t.memoizedProps:null,o=m.children,Af(u,m)?o=null:b!==null&&Af(u,b)&&(n.flags|=32),n.memoizedState!==null&&(u=_d(t,n,HN,null,null,r),no._currentValue=u),fc(t,n),ea(t,n,o,r),n.child;case 6:return t===null&&_t&&((t=r=en)&&(r=Oj(r,n.pendingProps,Ka),r!==null?(n.stateNode=r,Jn=n,en=null,t=!0):t=!1),t||Ws(n)),null;case 13:return kg(t,n,r);case 4:return Ze(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=Yr(n,null,o,r):ea(t,n,o,r),n.child;case 11:return _g(t,n,n.type,n.pendingProps,r);case 7:return ea(t,n,n.pendingProps,r),n.child;case 8:return ea(t,n,n.pendingProps.children,r),n.child;case 12:return ea(t,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,er(n,n.type,o.value),ea(t,n,o.children,r),n.child;case 9:return u=n.type._context,o=n.pendingProps.children,Zr(n),u=Wn(u),o=o(u),n.flags|=1,ea(t,n,o,r),n.child;case 14:return Eg(t,n,n.type,n.pendingProps,r);case 15:return Ag(t,n,n.type,n.pendingProps,r);case 19:return Ug(t,n,r);case 31:return XN(t,n,r);case 22:return Cg(t,n,r,n.pendingProps);case 24:return Zr(n),o=Wn(On),t===null?(u=pd(),u===null&&(u=Yt,m=md(),u.pooledCache=m,m.refCount++,m!==null&&(u.pooledCacheLanes|=r),u=m),n.memoizedState={parent:o,cache:u},bd(n),er(n,On,u)):((t.lanes&r)!==0&&(vd(t,n),Ui(n,null,null,r),Mi()),u=t.memoizedState,m=n.memoizedState,u.parent!==o?(u={parent:o,cache:o},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),er(n,On,o)):(o=m.cache,er(n,On,o),o!==u.cache&&fd(n,[On],r,!0))),ea(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function Bs(t){t.flags|=4}function Wd(t,n,r,o,u){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(u&335544128)===u)if(t.stateNode.complete)t.flags|=8192;else if(ub())t.flags|=8192;else throw Qr=Xo,gd}else t.flags&=-16777217}function Bg(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Wb(n))if(ub())t.flags|=8192;else throw Qr=Xo,gd}function hc(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?W():536870912,t.lanes|=n,Fl|=n)}function Fi(t,n){if(!_t)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function tn(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(n)for(var u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=o,t.childLanes=r,n}function WN(t,n,r){var o=n.pendingProps;switch(id(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(n),null;case 1:return tn(n),null;case 3:return r=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),ks(On),pe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ol(n)?Bs(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,cd())),tn(n),null;case 26:var u=n.type,m=n.memoizedState;return t===null?(Bs(n),m!==null?(tn(n),Bg(n,m)):(tn(n),Wd(n,u,null,o,r))):m?m!==t.memoizedState?(Bs(n),tn(n),Bg(n,m)):(tn(n),n.flags&=-16777217):(t=t.memoizedProps,t!==o&&Bs(n),tn(n),Wd(n,u,t,o,r)),null;case 27:if(Ge(n),r=Se.current,u=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Bs(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return tn(n),null}t=Y.current,Ol(n)?bp(n):(t=Zb(u,o,r),n.stateNode=t,Bs(n))}return tn(n),null;case 5:if(Ge(n),u=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Bs(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return tn(n),null}if(m=Y.current,Ol(n))bp(n);else{var b=Oc(Se.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?b.createElement("select",{is:o.is}):b.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?b.createElement(u,{is:o.is}):b.createElement(u)}}m[dt]=n,m[yt]=o;e:for(b=n.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===n)break e;for(;b.sibling===null;){if(b.return===null||b.return===n)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}n.stateNode=m;e:switch(ta(m,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Bs(n)}}return tn(n),Wd(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,r),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&Bs(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(i(166));if(t=Se.current,Ol(n)){if(t=n.stateNode,r=n.memoizedProps,o=null,u=Jn,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}t[dt]=n,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||kb(t.nodeValue,r)),t||Ws(n,!0)}else t=Oc(t).createTextNode(o),t[dt]=n,n.stateNode=t}return tn(n),null;case 31:if(r=n.memoizedState,t===null||t.memoizedState!==null){if(o=Ol(n),r!==null){if(t===null){if(!o)throw Error(i(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[dt]=n}else Hr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;tn(n),t=!1}else r=cd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return n.flags&256?(Ma(n),n):(Ma(n),null);if((n.flags&128)!==0)throw Error(i(558))}return tn(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(u=Ol(n),o!==null&&o.dehydrated!==null){if(t===null){if(!u)throw Error(i(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));u[dt]=n}else Hr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;tn(n),u=!1}else u=cd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(Ma(n),n):(Ma(n),null)}return Ma(n),(n.flags&128)!==0?(n.lanes=r,n):(r=o!==null,t=t!==null&&t.memoizedState!==null,r&&(o=n.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==u&&(o.flags|=2048)),r!==t&&r&&(n.child.flags|=8192),hc(n,n.updateQueue),tn(n),null);case 4:return pe(),t===null&&jf(n.stateNode.containerInfo),tn(n),null;case 10:return ks(n.type),tn(n),null;case 19:if(X(Sn),o=n.memoizedState,o===null)return tn(n),null;if(u=(n.flags&128)!==0,m=o.rendering,m===null)if(u)Fi(o,!1);else{if(yn!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(m=tc(t),m!==null){for(n.flags|=128,Fi(o,!1),t=m.updateQueue,n.updateQueue=t,hc(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)fp(r,t),r=r.sibling;return ce(Sn,Sn.current&1|2),_t&&Ds(n,o.treeForkCount),n.child}t=t.sibling}o.tail!==null&&$()>yc&&(n.flags|=128,u=!0,Fi(o,!1),n.lanes=4194304)}else{if(!u)if(t=tc(m),t!==null){if(n.flags|=128,u=!0,t=t.updateQueue,n.updateQueue=t,hc(n,t),Fi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!_t)return tn(n),null}else 2*$()-o.renderingStartTime>yc&&r!==536870912&&(n.flags|=128,u=!0,Fi(o,!1),n.lanes=4194304);o.isBackwards?(m.sibling=n.child,n.child=m):(t=o.last,t!==null?t.sibling=m:n.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$(),t.sibling=null,r=Sn.current,ce(Sn,u?r&1|2:r&1),_t&&Ds(n,o.treeForkCount),t):(tn(n),null);case 22:case 23:return Ma(n),jd(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(tn(n),n.subtreeFlags&6&&(n.flags|=8192)):tn(n),r=n.updateQueue,r!==null&&hc(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),t!==null&&X(Gr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),ks(On),tn(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function ej(t,n){switch(id(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return ks(On),pe(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Ge(n),null;case 31:if(n.memoizedState!==null){if(Ma(n),n.alternate===null)throw Error(i(340));Hr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Ma(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(i(340));Hr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return X(Sn),null;case 4:return pe(),null;case 10:return ks(n.type),null;case 22:case 23:return Ma(n),jd(),t!==null&&X(Gr),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return ks(On),null;case 25:return null;default:return null}}function qg(t,n){switch(id(n),n.tag){case 3:ks(On),pe();break;case 26:case 27:case 5:Ge(n);break;case 4:pe();break;case 31:n.memoizedState!==null&&Ma(n);break;case 13:Ma(n);break;case 19:X(Sn);break;case 10:ks(n.type);break;case 22:case 23:Ma(n),jd(),t!==null&&X(Gr);break;case 24:ks(On)}}function Hi(t,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var u=o.next;r=u;do{if((r.tag&t)===t){o=void 0;var m=r.create,b=r.inst;o=m(),b.destroy=o}r=r.next}while(r!==u)}}catch(N){$t(n,n.return,N)}}function lr(t,n,r){try{var o=n.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&t)===t){var b=o.inst,N=b.destroy;if(N!==void 0){b.destroy=void 0,u=n;var k=r,ne=N;try{ne()}catch(ge){$t(u,k,ge)}}}o=o.next}while(o!==m)}}catch(ge){$t(n,n.return,ge)}}function Ig(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{Rp(n,r)}catch(o){$t(t,t.return,o)}}}function $g(t,n,r){r.props=Xr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){$t(t,n,o)}}function Vi(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(u){$t(t,n,u)}}function _s(t,n){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(u){$t(t,n,u)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(u){$t(t,n,u)}else r.current=null}function Fg(t){var n=t.type,r=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(u){$t(t,t.return,u)}}function ef(t,n,r){try{var o=t.stateNode;jj(o,t.type,r,n),o[yt]=n}catch(u){$t(t,t.return,u)}}function Hg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&mr(t.type)||t.tag===4}function tf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&mr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nf(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Ta));else if(o!==4&&(o===27&&mr(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(nf(t,n,r),t=t.sibling;t!==null;)nf(t,n,r),t=t.sibling}function pc(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(o!==4&&(o===27&&mr(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(pc(t,n,r),t=t.sibling;t!==null;)pc(t,n,r),t=t.sibling}function Vg(t){var n=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);ta(n,o,r),n[dt]=t,n[yt]=r}catch(m){$t(t,t.return,m)}}var qs=!1,Dn=!1,af=!1,Zg=typeof WeakSet=="function"?WeakSet:Set,Yn=null;function tj(t,n){if(t=t.containerInfo,_f=Uc,t=ap(t),Ku(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var u=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var b=0,N=-1,k=-1,ne=0,ge=0,Ae=t,re=null;t:for(;;){for(var oe;Ae!==r||u!==0&&Ae.nodeType!==3||(N=b+u),Ae!==m||o!==0&&Ae.nodeType!==3||(k=b+o),Ae.nodeType===3&&(b+=Ae.nodeValue.length),(oe=Ae.firstChild)!==null;)re=Ae,Ae=oe;for(;;){if(Ae===t)break t;if(re===r&&++ne===u&&(N=b),re===m&&++ge===o&&(k=b),(oe=Ae.nextSibling)!==null)break;Ae=re,re=Ae.parentNode}Ae=oe}r=N===-1||k===-1?null:{start:N,end:k}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ef={focusedElem:t,selectionRange:r},Uc=!1,Yn=n;Yn!==null;)if(n=Yn,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Yn=t;else for(;Yn!==null;){switch(n=Yn,m=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)u=t[r],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,r=n,u=m.memoizedProps,m=m.memoizedState,o=r.stateNode;try{var Pe=Xr(r.type,u);t=o.getSnapshotBeforeUpdate(Pe,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(st){$t(r,r.return,st)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)Of(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Of(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=n.sibling,t!==null){t.return=n.return,Yn=t;break}Yn=n.return}}function Gg(t,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:$s(t,r),o&4&&Hi(5,r);break;case 1:if($s(t,r),o&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(b){$t(r,r.return,b)}else{var u=Xr(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(u,n,t.__reactInternalSnapshotBeforeUpdate)}catch(b){$t(r,r.return,b)}}o&64&&Ig(r),o&512&&Vi(r,r.return);break;case 3:if($s(t,r),o&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{Rp(t,n)}catch(b){$t(r,r.return,b)}}break;case 27:n===null&&o&4&&Vg(r);case 26:case 5:$s(t,r),n===null&&o&4&&Fg(r),o&512&&Vi(r,r.return);break;case 12:$s(t,r);break;case 31:$s(t,r),o&4&&Yg(t,r);break;case 13:$s(t,r),o&4&&Kg(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=uj.bind(null,r),Rj(t,r))));break;case 22:if(o=r.memoizedState!==null||qs,!o){n=n!==null&&n.memoizedState!==null||Dn,u=qs;var m=Dn;qs=o,(Dn=n)&&!m?Fs(t,r,(r.subtreeFlags&8772)!==0):$s(t,r),qs=u,Dn=m}break;case 30:break;default:$s(t,r)}}function Pg(t){var n=t.alternate;n!==null&&(t.alternate=null,Pg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Mt(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var sn=null,xa=!1;function Is(t,n,r){for(r=r.child;r!==null;)Qg(t,n,r),r=r.sibling}function Qg(t,n,r){if(Ie&&typeof Ie.onCommitFiberUnmount=="function")try{Ie.onCommitFiberUnmount(Ne,r)}catch{}switch(r.tag){case 26:Dn||_s(r,n),Is(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Dn||_s(r,n);var o=sn,u=xa;mr(r.type)&&(sn=r.stateNode,xa=!1),Is(t,n,r),Wi(r.stateNode),sn=o,xa=u;break;case 5:Dn||_s(r,n);case 6:if(o=sn,u=xa,sn=null,Is(t,n,r),sn=o,xa=u,sn!==null)if(xa)try{(sn.nodeType===9?sn.body:sn.nodeName==="HTML"?sn.ownerDocument.body:sn).removeChild(r.stateNode)}catch(m){$t(r,n,m)}else try{sn.removeChild(r.stateNode)}catch(m){$t(r,n,m)}break;case 18:sn!==null&&(xa?(t=sn,Ib(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Kl(t)):Ib(sn,r.stateNode));break;case 4:o=sn,u=xa,sn=r.stateNode.containerInfo,xa=!0,Is(t,n,r),sn=o,xa=u;break;case 0:case 11:case 14:case 15:lr(2,r,n),Dn||lr(4,r,n),Is(t,n,r);break;case 1:Dn||(_s(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&$g(r,n,o)),Is(t,n,r);break;case 21:Is(t,n,r);break;case 22:Dn=(o=Dn)||r.memoizedState!==null,Is(t,n,r),Dn=o;break;default:Is(t,n,r)}}function Yg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Kl(t)}catch(r){$t(n,n.return,r)}}}function Kg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Kl(t)}catch(r){$t(n,n.return,r)}}function nj(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Zg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Zg),n;default:throw Error(i(435,t.tag))}}function gc(t,n){var r=nj(t);n.forEach(function(o){if(!r.has(o)){r.add(o);var u=dj.bind(null,t,o);o.then(u,u)}})}function Na(t,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var u=r[o],m=t,b=n,N=b;e:for(;N!==null;){switch(N.tag){case 27:if(mr(N.type)){sn=N.stateNode,xa=!1;break e}break;case 5:sn=N.stateNode,xa=!1;break e;case 3:case 4:sn=N.stateNode.containerInfo,xa=!0;break e}N=N.return}if(sn===null)throw Error(i(160));Qg(m,b,u),sn=null,xa=!1,m=u.alternate,m!==null&&(m.return=null),u.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Xg(n,t),n=n.sibling}var ds=null;function Xg(t,n){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Na(n,t),ja(t),o&4&&(lr(3,t,t.return),Hi(3,t),lr(5,t,t.return));break;case 1:Na(n,t),ja(t),o&512&&(Dn||r===null||_s(r,r.return)),o&64&&qs&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var u=ds;if(Na(n,t),ja(t),o&512&&(Dn||r===null||_s(r,r.return)),o&4){var m=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){e:{o=t.type,r=t.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":m=u.getElementsByTagName("title")[0],(!m||m[kt]||m[dt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=u.createElement(o),u.head.insertBefore(m,u.querySelector("head > title"))),ta(m,o,r),m[dt]=t,wt(m),o=m;break e;case"link":var b=Xb("link","href",u).get(o+(r.href||""));if(b){for(var N=0;N<b.length;N++)if(m=b[N],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(N,1);break t}}m=u.createElement(o),ta(m,o,r),u.head.appendChild(m);break;case"meta":if(b=Xb("meta","content",u).get(o+(r.content||""))){for(N=0;N<b.length;N++)if(m=b[N],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(N,1);break t}}m=u.createElement(o),ta(m,o,r),u.head.appendChild(m);break;default:throw Error(i(468,o))}m[dt]=t,wt(m),o=m}t.stateNode=o}else Jb(u,t.type,t.stateNode);else t.stateNode=Kb(u,o,t.memoizedProps);else m!==o?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,o===null?Jb(u,t.type,t.stateNode):Kb(u,o,t.memoizedProps)):o===null&&t.stateNode!==null&&ef(t,t.memoizedProps,r.memoizedProps)}break;case 27:Na(n,t),ja(t),o&512&&(Dn||r===null||_s(r,r.return)),r!==null&&o&4&&ef(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Na(n,t),ja(t),o&512&&(Dn||r===null||_s(r,r.return)),t.flags&32){u=t.stateNode;try{vs(u,"")}catch(Pe){$t(t,t.return,Pe)}}o&4&&t.stateNode!=null&&(u=t.memoizedProps,ef(t,u,r!==null?r.memoizedProps:u)),o&1024&&(af=!0);break;case 6:if(Na(n,t),ja(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(Pe){$t(t,t.return,Pe)}}break;case 3:if(Dc=null,u=ds,ds=Rc(n.containerInfo),Na(n,t),ds=u,ja(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Kl(n.containerInfo)}catch(Pe){$t(t,t.return,Pe)}af&&(af=!1,Jg(t));break;case 4:o=ds,ds=Rc(t.stateNode.containerInfo),Na(n,t),ja(t),ds=o;break;case 12:Na(n,t),ja(t);break;case 31:Na(n,t),ja(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,gc(t,o)));break;case 13:Na(n,t),ja(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(vc=$()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,gc(t,o)));break;case 22:u=t.memoizedState!==null;var k=r!==null&&r.memoizedState!==null,ne=qs,ge=Dn;if(qs=ne||u,Dn=ge||k,Na(n,t),Dn=ge,qs=ne,ja(t),o&8192)e:for(n=t.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(r===null||k||qs||Dn||Jr(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){k=r=n;try{if(m=k.stateNode,u)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{N=k.stateNode;var Ae=k.memoizedProps.style,re=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null;N.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(Pe){$t(k,k.return,Pe)}}}else if(n.tag===6){if(r===null){k=n;try{k.stateNode.nodeValue=u?"":k.memoizedProps}catch(Pe){$t(k,k.return,Pe)}}}else if(n.tag===18){if(r===null){k=n;try{var oe=k.stateNode;u?$b(oe,!0):$b(k.stateNode,!1)}catch(Pe){$t(k,k.return,Pe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,gc(t,r))));break;case 19:Na(n,t),ja(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,gc(t,o)));break;case 30:break;case 21:break;default:Na(n,t),ja(t)}}function ja(t){var n=t.flags;if(n&2){try{for(var r,o=t.return;o!==null;){if(Hg(o)){r=o;break}o=o.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var u=r.stateNode,m=tf(t);pc(t,m,u);break;case 5:var b=r.stateNode;r.flags&32&&(vs(b,""),r.flags&=-33);var N=tf(t);pc(t,N,b);break;case 3:case 4:var k=r.stateNode.containerInfo,ne=tf(t);nf(t,ne,k);break;default:throw Error(i(161))}}catch(ge){$t(t,t.return,ge)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Jg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Jg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function $s(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Gg(t,n.alternate,n),n=n.sibling}function Jr(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:lr(4,n,n.return),Jr(n);break;case 1:_s(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&$g(n,n.return,r),Jr(n);break;case 27:Wi(n.stateNode);case 26:case 5:_s(n,n.return),Jr(n);break;case 22:n.memoizedState===null&&Jr(n);break;case 30:Jr(n);break;default:Jr(n)}t=t.sibling}}function Fs(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,u=t,m=n,b=m.flags;switch(m.tag){case 0:case 11:case 15:Fs(u,m,r),Hi(4,m);break;case 1:if(Fs(u,m,r),o=m,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(ne){$t(o,o.return,ne)}if(o=m,u=o.updateQueue,u!==null){var N=o.stateNode;try{var k=u.shared.hiddenCallbacks;if(k!==null)for(u.shared.hiddenCallbacks=null,u=0;u<k.length;u++)Op(k[u],N)}catch(ne){$t(o,o.return,ne)}}r&&b&64&&Ig(m),Vi(m,m.return);break;case 27:Vg(m);case 26:case 5:Fs(u,m,r),r&&o===null&&b&4&&Fg(m),Vi(m,m.return);break;case 12:Fs(u,m,r);break;case 31:Fs(u,m,r),r&&b&4&&Yg(u,m);break;case 13:Fs(u,m,r),r&&b&4&&Kg(u,m);break;case 22:m.memoizedState===null&&Fs(u,m,r),Vi(m,m.return);break;case 30:break;default:Fs(u,m,r)}n=n.sibling}}function sf(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Ri(r))}function rf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ri(t))}function fs(t,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Wg(t,n,r,o),n=n.sibling}function Wg(t,n,r,o){var u=n.flags;switch(n.tag){case 0:case 11:case 15:fs(t,n,r,o),u&2048&&Hi(9,n);break;case 1:fs(t,n,r,o);break;case 3:fs(t,n,r,o),u&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ri(t)));break;case 12:if(u&2048){fs(t,n,r,o),t=n.stateNode;try{var m=n.memoizedProps,b=m.id,N=m.onPostCommit;typeof N=="function"&&N(b,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){$t(n,n.return,k)}}else fs(t,n,r,o);break;case 31:fs(t,n,r,o);break;case 13:fs(t,n,r,o);break;case 23:break;case 22:m=n.stateNode,b=n.alternate,n.memoizedState!==null?m._visibility&2?fs(t,n,r,o):Zi(t,n):m._visibility&2?fs(t,n,r,o):(m._visibility|=2,ql(t,n,r,o,(n.subtreeFlags&10256)!==0||!1)),u&2048&&sf(b,n);break;case 24:fs(t,n,r,o),u&2048&&rf(n.alternate,n);break;default:fs(t,n,r,o)}}function ql(t,n,r,o,u){for(u=u&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=t,b=n,N=r,k=o,ne=b.flags;switch(b.tag){case 0:case 11:case 15:ql(m,b,N,k,u),Hi(8,b);break;case 23:break;case 22:var ge=b.stateNode;b.memoizedState!==null?ge._visibility&2?ql(m,b,N,k,u):Zi(m,b):(ge._visibility|=2,ql(m,b,N,k,u)),u&&ne&2048&&sf(b.alternate,b);break;case 24:ql(m,b,N,k,u),u&&ne&2048&&rf(b.alternate,b);break;default:ql(m,b,N,k,u)}n=n.sibling}}function Zi(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,o=n,u=o.flags;switch(o.tag){case 22:Zi(r,o),u&2048&&sf(o.alternate,o);break;case 24:Zi(r,o),u&2048&&rf(o.alternate,o);break;default:Zi(r,o)}n=n.sibling}}var Gi=8192;function Il(t,n,r){if(t.subtreeFlags&Gi)for(t=t.child;t!==null;)eb(t,n,r),t=t.sibling}function eb(t,n,r){switch(t.tag){case 26:Il(t,n,r),t.flags&Gi&&t.memoizedState!==null&&Fj(r,ds,t.memoizedState,t.memoizedProps);break;case 5:Il(t,n,r);break;case 3:case 4:var o=ds;ds=Rc(t.stateNode.containerInfo),Il(t,n,r),ds=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Gi,Gi=16777216,Il(t,n,r),Gi=o):Il(t,n,r));break;default:Il(t,n,r)}}function tb(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Pi(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];Yn=o,ab(o,t)}tb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)nb(t),t=t.sibling}function nb(t){switch(t.tag){case 0:case 11:case 15:Pi(t),t.flags&2048&&lr(9,t,t.return);break;case 3:Pi(t);break;case 12:Pi(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,bc(t)):Pi(t);break;default:Pi(t)}}function bc(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];Yn=o,ab(o,t)}tb(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:lr(8,n,n.return),bc(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,bc(n));break;default:bc(n)}t=t.sibling}}function ab(t,n){for(;Yn!==null;){var r=Yn;switch(r.tag){case 0:case 11:case 15:lr(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ri(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,Yn=o;else e:for(r=t;Yn!==null;){o=Yn;var u=o.sibling,m=o.return;if(Pg(o),o===r){Yn=null;break e}if(u!==null){u.return=m,Yn=u;break e}Yn=m}}}var aj={getCacheForType:function(t){var n=Wn(On),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r},cacheSignal:function(){return Wn(On).controller.signal}},sj=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Yt=null,bt=null,jt=0,It=0,Ua=null,ir=!1,$l=!1,lf=!1,Hs=0,yn=0,or=0,Wr=0,of=0,La=0,Fl=0,Qi=null,Sa=null,cf=!1,vc=0,sb=0,yc=1/0,xc=null,cr=null,$n=0,ur=null,Hl=null,Vs=0,uf=0,df=null,rb=null,Yi=0,ff=null;function Ba(){return(Dt&2)!==0&&jt!==0?jt&-jt:U.T!==null?vf():Bt()}function lb(){if(La===0)if((jt&536870912)===0||_t){var t=rt;rt<<=1,(rt&3932160)===0&&(rt=262144),La=t}else La=536870912;return t=ka.current,t!==null&&(t.flags|=32),La}function wa(t,n,r){(t===Yt&&(It===2||It===9)||t.cancelPendingCommit!==null)&&(Vl(t,0),dr(t,jt,La,!1)),Te(t,r),((Dt&2)===0||t!==Yt)&&(t===Yt&&((Dt&2)===0&&(Wr|=r),yn===4&&dr(t,jt,La,!1)),Es(t))}function ib(t,n,r){if((Dt&6)!==0)throw Error(i(327));var o=!r&&(n&127)===0&&(n&t.expiredLanes)===0||Un(t,n),u=o?ij(t,n):hf(t,n,!0),m=o;do{if(u===0){$l&&!o&&dr(t,n,0,!1);break}else{if(r=t.current.alternate,m&&!rj(r)){u=hf(t,n,!1),m=!1;continue}if(u===2){if(m=n,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){n=b;e:{var N=t;u=Qi;var k=N.current.memoizedState.isDehydrated;if(k&&(Vl(N,b).flags|=256),b=hf(N,b,!1),b!==2){if(lf&&!k){N.errorRecoveryDisabledLanes|=m,Wr|=m,u=4;break e}m=Sa,Sa=u,m!==null&&(Sa===null?Sa=m:Sa.push.apply(Sa,m))}u=b}if(m=!1,u!==2)continue}}if(u===1){Vl(t,0),dr(t,n,0,!0);break}e:{switch(o=t,m=u,m){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:dr(o,n,La,!ir);break e;case 2:Sa=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(u=vc+300-$(),10<u)){if(dr(o,n,La,!ir),Xn(o,0,!0)!==0)break e;Vs=n,o.timeoutHandle=Bb(ob.bind(null,o,r,Sa,xc,cf,n,La,Wr,Fl,ir,m,"Throttled",-0,0),u);break e}ob(o,r,Sa,xc,cf,n,La,Wr,Fl,ir,m,null,-0,0)}}break}while(!0);Es(t)}function ob(t,n,r,o,u,m,b,N,k,ne,ge,Ae,re,oe){if(t.timeoutHandle=-1,Ae=n.subtreeFlags,Ae&8192||(Ae&16785408)===16785408){Ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ta},eb(n,m,Ae);var Pe=(m&62914560)===m?vc-$():(m&4194048)===m?sb-$():0;if(Pe=Hj(Ae,Pe),Pe!==null){Vs=m,t.cancelPendingCommit=Pe(gb.bind(null,t,n,m,r,o,u,b,N,k,ge,Ae,null,re,oe)),dr(t,m,b,!ne);return}}gb(t,n,m,r,o,u,b,N,k)}function rj(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var u=r[o],m=u.getSnapshot;u=u.value;try{if(!Da(m(),u))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function dr(t,n,r,o){n&=~of,n&=~Wr,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var u=n;0<u;){var m=31-Et(u),b=1<<m;o[m]=-1,u&=~b}r!==0&&et(t,r,n)}function Nc(){return(Dt&6)===0?(Ki(0),!1):!0}function mf(){if(bt!==null){if(It===0)var t=bt.return;else t=bt,zs=Vr=null,Cd(t),kl=null,Di=0,t=bt;for(;t!==null;)qg(t.alternate,t),t=t.return;bt=null}}function Vl(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,_j(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Vs=0,mf(),Yt=t,bt=r=Ts(t.current,null),jt=n,It=0,Ua=null,ir=!1,$l=Un(t,n),lf=!1,Fl=La=of=Wr=or=yn=0,Sa=Qi=null,cf=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var u=31-Et(o),m=1<<u;n|=t[u],o&=~m}return Hs=n,Fo(),r}function cb(t,n){ft=null,U.H=Ii,n===zl||n===Ko?(n=_p(),It=3):n===gd?(n=_p(),It=4):It=n===Vd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ua=n,bt===null&&(yn=1,uc(t,Pa(n,t.current)))}function ub(){var t=ka.current;return t===null?!0:(jt&4194048)===jt?Xa===null:(jt&62914560)===jt||(jt&536870912)!==0?t===Xa:!1}function db(){var t=U.H;return U.H=Ii,t===null?Ii:t}function fb(){var t=U.A;return U.A=aj,t}function jc(){yn=4,ir||(jt&4194048)!==jt&&ka.current!==null||($l=!0),(or&134217727)===0&&(Wr&134217727)===0||Yt===null||dr(Yt,jt,La,!1)}function hf(t,n,r){var o=Dt;Dt|=2;var u=db(),m=fb();(Yt!==t||jt!==n)&&(xc=null,Vl(t,n)),n=!1;var b=yn;e:do try{if(It!==0&&bt!==null){var N=bt,k=Ua;switch(It){case 8:mf(),b=6;break e;case 3:case 2:case 9:case 6:ka.current===null&&(n=!0);var ne=It;if(It=0,Ua=null,Zl(t,N,k,ne),r&&$l){b=0;break e}break;default:ne=It,It=0,Ua=null,Zl(t,N,k,ne)}}lj(),b=yn;break}catch(ge){cb(t,ge)}while(!0);return n&&t.shellSuspendCounter++,zs=Vr=null,Dt=o,U.H=u,U.A=m,bt===null&&(Yt=null,jt=0,Fo()),b}function lj(){for(;bt!==null;)mb(bt)}function ij(t,n){var r=Dt;Dt|=2;var o=db(),u=fb();Yt!==t||jt!==n?(xc=null,yc=$()+500,Vl(t,n)):$l=Un(t,n);e:do try{if(It!==0&&bt!==null){n=bt;var m=Ua;t:switch(It){case 1:It=0,Ua=null,Zl(t,n,m,1);break;case 2:case 9:if(Sp(m)){It=0,Ua=null,hb(n);break}n=function(){It!==2&&It!==9||Yt!==t||(It=7),Es(t)},m.then(n,n);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:Sp(m)?(It=0,Ua=null,hb(n)):(It=0,Ua=null,Zl(t,n,m,7));break;case 5:var b=null;switch(bt.tag){case 26:b=bt.memoizedState;case 5:case 27:var N=bt;if(b?Wb(b):N.stateNode.complete){It=0,Ua=null;var k=N.sibling;if(k!==null)bt=k;else{var ne=N.return;ne!==null?(bt=ne,Sc(ne)):bt=null}break t}}It=0,Ua=null,Zl(t,n,m,5);break;case 6:It=0,Ua=null,Zl(t,n,m,6);break;case 8:mf(),yn=6;break e;default:throw Error(i(462))}}oj();break}catch(ge){cb(t,ge)}while(!0);return zs=Vr=null,U.H=o,U.A=u,Dt=r,bt!==null?0:(Yt=null,jt=0,Fo(),yn)}function oj(){for(;bt!==null&&!S();)mb(bt)}function mb(t){var n=Lg(t.alternate,t,Hs);t.memoizedProps=t.pendingProps,n===null?Sc(t):bt=n}function hb(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=Tg(r,n,n.pendingProps,n.type,void 0,jt);break;case 11:n=Tg(r,n,n.pendingProps,n.type.render,n.ref,jt);break;case 5:Cd(n);default:qg(r,n),n=bt=fp(n,Hs),n=Lg(r,n,Hs)}t.memoizedProps=t.pendingProps,n===null?Sc(t):bt=n}function Zl(t,n,r,o){zs=Vr=null,Cd(n),kl=null,Di=0;var u=n.return;try{if(KN(t,u,n,r,jt)){yn=1,uc(t,Pa(r,t.current)),bt=null;return}}catch(m){if(u!==null)throw bt=u,m;yn=1,uc(t,Pa(r,t.current)),bt=null;return}n.flags&32768?(_t||o===1?t=!0:$l||(jt&536870912)!==0?t=!1:(ir=t=!0,(o===2||o===9||o===3||o===6)&&(o=ka.current,o!==null&&o.tag===13&&(o.flags|=16384))),pb(n,t)):Sc(n)}function Sc(t){var n=t;do{if((n.flags&32768)!==0){pb(n,ir);return}t=n.return;var r=WN(n.alternate,n,Hs);if(r!==null){bt=r;return}if(n=n.sibling,n!==null){bt=n;return}bt=n=t}while(n!==null);yn===0&&(yn=5)}function pb(t,n){do{var r=ej(t.alternate,t);if(r!==null){r.flags&=32767,bt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){bt=t;return}bt=t=r}while(t!==null);yn=6,bt=null}function gb(t,n,r,o,u,m,b,N,k){t.cancelPendingCommit=null;do wc();while($n!==0);if((Dt&6)!==0)throw Error(i(327));if(n!==null){if(n===t.current)throw Error(i(177));if(m=n.lanes|n.childLanes,m|=td,Ve(t,r,m,b,N,k),t===Yt&&(bt=Yt=null,jt=0),Hl=n,ur=t,Vs=r,uf=m,df=u,rb=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,fj(G,function(){return Nb(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=U.T,U.T=null,u=Z.p,Z.p=2,b=Dt,Dt|=4;try{tj(t,n,r)}finally{Dt=b,Z.p=u,U.T=o}}$n=1,bb(),vb(),yb()}}function bb(){if($n===1){$n=0;var t=ur,n=Hl,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=U.T,U.T=null;var o=Z.p;Z.p=2;var u=Dt;Dt|=4;try{Xg(n,t);var m=Ef,b=ap(t.containerInfo),N=m.focusedElem,k=m.selectionRange;if(b!==N&&N&&N.ownerDocument&&np(N.ownerDocument.documentElement,N)){if(k!==null&&Ku(N)){var ne=k.start,ge=k.end;if(ge===void 0&&(ge=ne),"selectionStart"in N)N.selectionStart=ne,N.selectionEnd=Math.min(ge,N.value.length);else{var Ae=N.ownerDocument||document,re=Ae&&Ae.defaultView||window;if(re.getSelection){var oe=re.getSelection(),Pe=N.textContent.length,st=Math.min(k.start,Pe),Zt=k.end===void 0?st:Math.min(k.end,Pe);!oe.extend&&st>Zt&&(b=Zt,Zt=st,st=b);var Q=tp(N,st),I=tp(N,Zt);if(Q&&I&&(oe.rangeCount!==1||oe.anchorNode!==Q.node||oe.anchorOffset!==Q.offset||oe.focusNode!==I.node||oe.focusOffset!==I.offset)){var ee=Ae.createRange();ee.setStart(Q.node,Q.offset),oe.removeAllRanges(),st>Zt?(oe.addRange(ee),oe.extend(I.node,I.offset)):(ee.setEnd(I.node,I.offset),oe.addRange(ee))}}}}for(Ae=[],oe=N;oe=oe.parentNode;)oe.nodeType===1&&Ae.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<Ae.length;N++){var je=Ae[N];je.element.scrollLeft=je.left,je.element.scrollTop=je.top}}Uc=!!_f,Ef=_f=null}finally{Dt=u,Z.p=o,U.T=r}}t.current=n,$n=2}}function vb(){if($n===2){$n=0;var t=ur,n=Hl,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=U.T,U.T=null;var o=Z.p;Z.p=2;var u=Dt;Dt|=4;try{Gg(t,n.alternate,n)}finally{Dt=u,Z.p=o,U.T=r}}$n=3}}function yb(){if($n===4||$n===3){$n=0,L();var t=ur,n=Hl,r=Vs,o=rb;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?$n=5:($n=0,Hl=ur=null,xb(t,t.pendingLanes));var u=t.pendingLanes;if(u===0&&(cr=null),Lt(r),n=n.stateNode,Ie&&typeof Ie.onCommitFiberRoot=="function")try{Ie.onCommitFiberRoot(Ne,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=U.T,u=Z.p,Z.p=2,U.T=null;try{for(var m=t.onRecoverableError,b=0;b<o.length;b++){var N=o[b];m(N.value,{componentStack:N.stack})}}finally{U.T=n,Z.p=u}}(Vs&3)!==0&&wc(),Es(t),u=t.pendingLanes,(r&261930)!==0&&(u&42)!==0?t===ff?Yi++:(Yi=0,ff=t):Yi=0,Ki(0)}}function xb(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Ri(n)))}function wc(){return bb(),vb(),yb(),Nb()}function Nb(){if($n!==5)return!1;var t=ur,n=uf;uf=0;var r=Lt(Vs),o=U.T,u=Z.p;try{Z.p=32>r?32:r,U.T=null,r=df,df=null;var m=ur,b=Vs;if($n=0,Hl=ur=null,Vs=0,(Dt&6)!==0)throw Error(i(331));var N=Dt;if(Dt|=4,nb(m.current),Wg(m,m.current,b,r),Dt=N,Ki(0,!1),Ie&&typeof Ie.onPostCommitFiberRoot=="function")try{Ie.onPostCommitFiberRoot(Ne,m)}catch{}return!0}finally{Z.p=u,U.T=o,xb(t,n)}}function jb(t,n,r){n=Pa(r,n),n=Hd(t.stateNode,n,2),t=ar(t,n,2),t!==null&&(Te(t,2),Es(t))}function $t(t,n,r){if(t.tag===3)jb(t,t,r);else for(;n!==null;){if(n.tag===3){jb(n,t,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(cr===null||!cr.has(o))){t=Pa(r,t),r=Sg(2),o=ar(n,r,2),o!==null&&(wg(r,o,n,t),Te(o,2),Es(o));break}}n=n.return}}function pf(t,n,r){var o=t.pingCache;if(o===null){o=t.pingCache=new sj;var u=new Set;o.set(n,u)}else u=o.get(n),u===void 0&&(u=new Set,o.set(n,u));u.has(r)||(lf=!0,u.add(r),t=cj.bind(null,t,n,r),n.then(t,t))}function cj(t,n,r){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Yt===t&&(jt&r)===r&&(yn===4||yn===3&&(jt&62914560)===jt&&300>$()-vc?(Dt&2)===0&&Vl(t,0):of|=r,Fl===jt&&(Fl=0)),Es(t)}function Sb(t,n){n===0&&(n=W()),t=$r(t,n),t!==null&&(Te(t,n),Es(t))}function uj(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),Sb(t,r)}function dj(t,n){var r=0;switch(t.tag){case 31:case 13:var o=t.stateNode,u=t.memoizedState;u!==null&&(r=u.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(n),Sb(t,r)}function fj(t,n){return O(t,n)}var _c=null,Gl=null,gf=!1,Ec=!1,bf=!1,fr=0;function Es(t){t!==Gl&&t.next===null&&(Gl===null?_c=Gl=t:Gl=Gl.next=t),Ec=!0,gf||(gf=!0,hj())}function Ki(t,n){if(!bf&&Ec){bf=!0;do for(var r=!1,o=_c;o!==null;){if(t!==0){var u=o.pendingLanes;if(u===0)var m=0;else{var b=o.suspendedLanes,N=o.pingedLanes;m=(1<<31-Et(42|t)+1)-1,m&=u&~(b&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,Ab(o,m))}else m=jt,m=Xn(o,o===Yt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||Un(o,m)||(r=!0,Ab(o,m));o=o.next}while(r);bf=!1}}function mj(){wb()}function wb(){Ec=gf=!1;var t=0;fr!==0&&wj()&&(t=fr);for(var n=$(),r=null,o=_c;o!==null;){var u=o.next,m=_b(o,n);m===0?(o.next=null,r===null?_c=u:r.next=u,u===null&&(Gl=r)):(r=o,(t!==0||(m&3)!==0)&&(Ec=!0)),o=u}$n!==0&&$n!==5||Ki(t),fr!==0&&(fr=0)}function _b(t,n){for(var r=t.suspendedLanes,o=t.pingedLanes,u=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-Et(m),N=1<<b,k=u[b];k===-1?((N&r)===0||(N&o)!==0)&&(u[b]=Ln(N,n)):k<=n&&(t.expiredLanes|=N),m&=~N}if(n=Yt,r=jt,r=Xn(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===n&&(It===2||It===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&T(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Un(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(o!==null&&T(o),Lt(r)){case 2:case 8:r=Ee;break;case 32:r=G;break;case 268435456:r=$e;break;default:r=G}return o=Eb.bind(null,t),r=O(r,o),t.callbackPriority=n,t.callbackNode=r,n}return o!==null&&o!==null&&T(o),t.callbackPriority=2,t.callbackNode=null,2}function Eb(t,n){if($n!==0&&$n!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(wc()&&t.callbackNode!==r)return null;var o=jt;return o=Xn(t,t===Yt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(ib(t,o,n),_b(t,$()),t.callbackNode!=null&&t.callbackNode===r?Eb.bind(null,t):null)}function Ab(t,n){if(wc())return null;ib(t,n,!0)}function hj(){Ej(function(){(Dt&6)!==0?O(be,mj):wb()})}function vf(){if(fr===0){var t=Tl;t===0&&(t=Zn,Zn<<=1,(Zn&261888)===0&&(Zn=256)),fr=t}return fr}function Cb(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ks(""+t)}function Ob(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function pj(t,n,r,o,u){if(n==="submit"&&r&&r.stateNode===u){var m=Cb((u[yt]||null).action),b=o.submitter;b&&(n=(n=b[yt]||null)?Cb(n.formAction):b.getAttribute("formAction"),n!==null&&(m=n,b=null));var N=new ra("action","action",null,o,u);t.push({event:N,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(fr!==0){var k=b?Ob(u,b):new FormData(u);Ld(r,{pending:!0,data:k,method:u.method,action:m},null,k)}}else typeof m=="function"&&(N.preventDefault(),k=b?Ob(u,b):new FormData(u),Ld(r,{pending:!0,data:k,method:u.method,action:m},m,k))},currentTarget:u}]})}}for(var yf=0;yf<ed.length;yf++){var xf=ed[yf],gj=xf.toLowerCase(),bj=xf[0].toUpperCase()+xf.slice(1);us(gj,"on"+bj)}us(lp,"onAnimationEnd"),us(ip,"onAnimationIteration"),us(op,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(zN,"onTransitionRun"),us(kN,"onTransitionStart"),us(MN,"onTransitionCancel"),us(cp,"onTransitionEnd"),Gn("onMouseEnter",["mouseout","mouseover"]),Gn("onMouseLeave",["mouseout","mouseover"]),Gn("onPointerEnter",["pointerout","pointerover"]),Gn("onPointerLeave",["pointerout","pointerover"]),pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xi));function Rb(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],u=o.event;o=o.listeners;e:{var m=void 0;if(n)for(var b=o.length-1;0<=b;b--){var N=o[b],k=N.instance,ne=N.currentTarget;if(N=N.listener,k!==m&&u.isPropagationStopped())break e;m=N,u.currentTarget=ne;try{m(u)}catch(ge){$o(ge)}u.currentTarget=null,m=k}else for(b=0;b<o.length;b++){if(N=o[b],k=N.instance,ne=N.currentTarget,N=N.listener,k!==m&&u.isPropagationStopped())break e;m=N,u.currentTarget=ne;try{m(u)}catch(ge){$o(ge)}u.currentTarget=null,m=k}}}}function vt(t,n){var r=n[hn];r===void 0&&(r=n[hn]=new Set);var o=t+"__bubble";r.has(o)||(Tb(n,t,2,!1),r.add(o))}function Nf(t,n,r){var o=0;n&&(o|=4),Tb(r,t,o,n)}var Ac="_reactListening"+Math.random().toString(36).slice(2);function jf(t){if(!t[Ac]){t[Ac]=!0,gs.forEach(function(r){r!=="selectionchange"&&(vj.has(r)||Nf(r,!1,t),Nf(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ac]||(n[Ac]=!0,Nf("selectionchange",!1,n))}}function Tb(t,n,r,o){switch(lv(n)){case 2:var u=Gj;break;case 8:u=Pj;break;default:u=Lf}r=u.bind(null,n,r,t),u=void 0,!Va||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),o?u!==void 0?t.addEventListener(n,r,{capture:!0,passive:u}):t.addEventListener(n,r,!0):u!==void 0?t.addEventListener(n,r,{passive:u}):t.addEventListener(n,r,!1)}function Sf(t,n,r,o,u){var m=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var b=o.tag;if(b===3||b===4){var N=o.stateNode.containerInfo;if(N===u)break;if(b===4)for(b=o.return;b!==null;){var k=b.tag;if((k===3||k===4)&&b.stateNode.containerInfo===u)return;b=b.return}for(;N!==null;){if(b=dn(N),b===null)return;if(k=b.tag,k===5||k===6||k===26||k===27){o=m=b;continue e}N=N.parentNode}}o=o.return}Ur(function(){var ne=m,ge=kr(r),Ae=[];e:{var re=up.get(t);if(re!==void 0){var oe=ra,Pe=t;switch(t){case"keypress":if(Ue(r)===0)break e;case"keydown":case"keyup":oe=ya;break;case"focusin":Pe="focus",oe=js;break;case"focusout":Pe="blur",oe=js;break;case"beforeblur":case"afterblur":oe=js;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Os;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Qn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=Zu;break;case lp:case ip:case op:oe=Lo;break;case cp:oe=Nl;break;case"scroll":case"scrollend":oe=In;break;case"wheel":oe=vN;break;case"copy":case"cut":case"paste":oe=qo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Rs;break;case"toggle":case"beforetoggle":oe=xN}var st=(n&4)!==0,Zt=!st&&(t==="scroll"||t==="scrollend"),Q=st?re!==null?re+"Capture":null:re;st=[];for(var I=ne,ee;I!==null;){var je=I;if(ee=je.stateNode,je=je.tag,je!==5&&je!==26&&je!==27||ee===null||Q===null||(je=qn(I,Q),je!=null&&st.push(Ji(I,je,ee))),Zt)break;I=I.return}0<st.length&&(re=new oe(re,Pe,null,r,ge),Ae.push({event:re,listeners:st}))}}if((n&7)===0){e:{if(re=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",re&&r!==ys&&(Pe=r.relatedTarget||r.fromElement)&&(dn(Pe)||Pe[Gt]))break e;if((oe||re)&&(re=ge.window===ge?ge:(re=ge.ownerDocument)?re.defaultView||re.parentWindow:window,oe?(Pe=r.relatedTarget||r.toElement,oe=ne,Pe=Pe?dn(Pe):null,Pe!==null&&(Zt=d(Pe),st=Pe.tag,Pe!==Zt||st!==5&&st!==27&&st!==6)&&(Pe=null)):(oe=null,Pe=ne),oe!==Pe)){if(st=Os,je="onMouseLeave",Q="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(st=Rs,je="onPointerLeave",Q="onPointerEnter",I="pointer"),Zt=oe==null?re:An(oe),ee=Pe==null?re:An(Pe),re=new st(je,I+"leave",oe,r,ge),re.target=Zt,re.relatedTarget=ee,je=null,dn(ge)===ne&&(st=new st(Q,I+"enter",Pe,r,ge),st.target=ee,st.relatedTarget=Zt,je=st),Zt=je,oe&&Pe)t:{for(st=yj,Q=oe,I=Pe,ee=0,je=Q;je;je=st(je))ee++;je=0;for(var tt=I;tt;tt=st(tt))je++;for(;0<ee-je;)Q=st(Q),ee--;for(;0<je-ee;)I=st(I),je--;for(;ee--;){if(Q===I||I!==null&&Q===I.alternate){st=Q;break t}Q=st(Q),I=st(I)}st=null}else st=null;oe!==null&&Db(Ae,re,oe,st,!1),Pe!==null&&Zt!==null&&Db(Ae,Zt,Pe,st,!0)}}e:{if(re=ne?An(ne):window,oe=re.nodeName&&re.nodeName.toLowerCase(),oe==="select"||oe==="input"&&re.type==="file")var Rt=Yh;else if(Ph(re))if(Kh)Rt=RN;else{Rt=CN;var Xe=AN}else oe=re.nodeName,!oe||oe.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ne&&Ys(ne.elementType)&&(Rt=Yh):Rt=ON;if(Rt&&(Rt=Rt(t,ne))){Qh(Ae,Rt,r,ge);break e}Xe&&Xe(t,re,ne),t==="focusout"&&ne&&re.type==="number"&&ne.memoizedProps.value!=null&&Ha(re,"number",re.value)}switch(Xe=ne?An(ne):window,t){case"focusin":(Ph(Xe)||Xe.contentEditable==="true")&&(Sl=Xe,Xu=ne,Ai=null);break;case"focusout":Ai=Xu=Sl=null;break;case"mousedown":Ju=!0;break;case"contextmenu":case"mouseup":case"dragend":Ju=!1,sp(Ae,r,ge);break;case"selectionchange":if(DN)break;case"keydown":case"keyup":sp(Ae,r,ge)}var ht;if(Pu)e:{switch(t){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else jl?Zh(t,r)&&(St="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(St="onCompositionStart");St&&(Fh&&r.locale!=="ko"&&(jl||St!=="onCompositionStart"?St==="onCompositionEnd"&&jl&&(ht=xe()):(ba=ge,C="value"in ba?ba.value:ba.textContent,jl=!0)),Xe=Cc(ne,St),0<Xe.length&&(St=new B(St,t,null,r,ge),Ae.push({event:St,listeners:Xe}),ht?St.data=ht:(ht=Gh(r),ht!==null&&(St.data=ht)))),(ht=jN?SN(t,r):wN(t,r))&&(St=Cc(ne,"onBeforeInput"),0<St.length&&(Xe=new B("onBeforeInput","beforeinput",null,r,ge),Ae.push({event:Xe,listeners:St}),Xe.data=ht)),pj(Ae,t,ne,r,ge)}Rb(Ae,n)})}function Ji(t,n,r){return{instance:t,listener:n,currentTarget:r}}function Cc(t,n){for(var r=n+"Capture",o=[];t!==null;){var u=t,m=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||m===null||(u=qn(t,r),u!=null&&o.unshift(Ji(t,u,m)),u=qn(t,n),u!=null&&o.push(Ji(t,u,m))),t.tag===3)return o;t=t.return}return[]}function yj(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Db(t,n,r,o,u){for(var m=n._reactName,b=[];r!==null&&r!==o;){var N=r,k=N.alternate,ne=N.stateNode;if(N=N.tag,k!==null&&k===o)break;N!==5&&N!==26&&N!==27||ne===null||(k=ne,u?(ne=qn(r,m),ne!=null&&b.unshift(Ji(r,ne,k))):u||(ne=qn(r,m),ne!=null&&b.push(Ji(r,ne,k)))),r=r.return}b.length!==0&&t.push({event:n,listeners:b})}var xj=/\r\n?/g,Nj=/\u0000|\uFFFD/g;function zb(t){return(typeof t=="string"?t:""+t).replace(xj,`
`).replace(Nj,"")}function kb(t,n){return n=zb(n),zb(t)===n}function Vt(t,n,r,o,u,m){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||vs(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&vs(t,""+o);break;case"className":aa(t,"class",o);break;case"tabIndex":aa(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":aa(t,r,o);break;case"style":yl(t,o,m);break;case"data":if(n!=="object"){aa(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Ks(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(n!=="input"&&Vt(t,n,"name",u.name,u,null),Vt(t,n,"formEncType",u.formEncType,u,null),Vt(t,n,"formMethod",u.formMethod,u,null),Vt(t,n,"formTarget",u.formTarget,u,null)):(Vt(t,n,"encType",u.encType,u,null),Vt(t,n,"method",u.method,u,null),Vt(t,n,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Ks(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=Ta);break;case"onScroll":o!=null&&vt("scroll",t);break;case"onScrollEnd":o!=null&&vt("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(u.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=Ks(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":vt("beforetoggle",t),vt("toggle",t),qt(t,"popover",o);break;case"xlinkActuate":Qt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Qt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Qt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Qt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Qt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Qt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":qt(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=xi.get(r)||r,qt(t,r,o))}}function wf(t,n,r,o,u,m){switch(r){case"style":yl(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(u.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"children":typeof o=="string"?vs(t,o):(typeof o=="number"||typeof o=="bigint")&&vs(t,""+o);break;case"onScroll":o!=null&&vt("scroll",t);break;case"onScrollEnd":o!=null&&vt("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Ta);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ha.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(u=r.endsWith("Capture"),n=r.slice(2,u?r.length-7:void 0),m=t[yt]||null,m=m!=null?m[r]:null,typeof m=="function"&&t.removeEventListener(n,m,u),typeof o=="function")){typeof m!="function"&&m!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,o,u);break e}r in t?t[r]=o:o===!0?t.setAttribute(r,""):qt(t,r,o)}}}function ta(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",t),vt("load",t);var o=!1,u=!1,m;for(m in r)if(r.hasOwnProperty(m)){var b=r[m];if(b!=null)switch(m){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Vt(t,n,m,b,r,null)}}u&&Vt(t,n,"srcSet",r.srcSet,r,null),o&&Vt(t,n,"src",r.src,r,null);return;case"input":vt("invalid",t);var N=m=b=u=null,k=null,ne=null;for(o in r)if(r.hasOwnProperty(o)){var ge=r[o];if(ge!=null)switch(o){case"name":u=ge;break;case"type":b=ge;break;case"checked":k=ge;break;case"defaultChecked":ne=ge;break;case"value":m=ge;break;case"defaultValue":N=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(i(137,n));break;default:Vt(t,n,o,ge,r,null)}}is(t,m,N,k,ne,b,u,!1);return;case"select":vt("invalid",t),o=b=m=null;for(u in r)if(r.hasOwnProperty(u)&&(N=r[u],N!=null))switch(u){case"value":m=N;break;case"defaultValue":b=N;break;case"multiple":o=N;default:Vt(t,n,u,N,r,null)}n=m,r=b,t.multiple=!!o,n!=null?Pn(t,!!o,n,!1):r!=null&&Pn(t,!!o,r,!0);return;case"textarea":vt("invalid",t),m=u=o=null;for(b in r)if(r.hasOwnProperty(b)&&(N=r[b],N!=null))switch(b){case"value":o=N;break;case"defaultValue":u=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:Vt(t,n,b,N,r,null)}vl(t,o,u,m);return;case"option":for(k in r)if(r.hasOwnProperty(k)&&(o=r[k],o!=null))switch(k){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Vt(t,n,k,o,r,null)}return;case"dialog":vt("beforetoggle",t),vt("toggle",t),vt("cancel",t),vt("close",t);break;case"iframe":case"object":vt("load",t);break;case"video":case"audio":for(o=0;o<Xi.length;o++)vt(Xi[o],t);break;case"image":vt("error",t),vt("load",t);break;case"details":vt("toggle",t);break;case"embed":case"source":case"link":vt("error",t),vt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in r)if(r.hasOwnProperty(ne)&&(o=r[ne],o!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Vt(t,n,ne,o,r,null)}return;default:if(Ys(n)){for(ge in r)r.hasOwnProperty(ge)&&(o=r[ge],o!==void 0&&wf(t,n,ge,o,r,void 0));return}}for(N in r)r.hasOwnProperty(N)&&(o=r[N],o!=null&&Vt(t,n,N,o,r,null))}function jj(t,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,m=null,b=null,N=null,k=null,ne=null,ge=null;for(oe in r){var Ae=r[oe];if(r.hasOwnProperty(oe)&&Ae!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":k=Ae;default:o.hasOwnProperty(oe)||Vt(t,n,oe,null,o,Ae)}}for(var re in o){var oe=o[re];if(Ae=r[re],o.hasOwnProperty(re)&&(oe!=null||Ae!=null))switch(re){case"type":m=oe;break;case"name":u=oe;break;case"checked":ne=oe;break;case"defaultChecked":ge=oe;break;case"value":b=oe;break;case"defaultValue":N=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,n));break;default:oe!==Ae&&Vt(t,n,re,oe,o,Ae)}}Tr(t,b,N,k,ne,ge,m,u);return;case"select":oe=b=N=re=null;for(m in r)if(k=r[m],r.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":oe=k;default:o.hasOwnProperty(m)||Vt(t,n,m,null,o,k)}for(u in o)if(m=o[u],k=r[u],o.hasOwnProperty(u)&&(m!=null||k!=null))switch(u){case"value":re=m;break;case"defaultValue":N=m;break;case"multiple":b=m;default:m!==k&&Vt(t,n,u,m,o,k)}n=N,r=b,o=oe,re!=null?Pn(t,!!r,re,!1):!!o!=!!r&&(n!=null?Pn(t,!!r,n,!0):Pn(t,!!r,r?[]:"",!1));return;case"textarea":oe=re=null;for(N in r)if(u=r[N],r.hasOwnProperty(N)&&u!=null&&!o.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Vt(t,n,N,null,o,u)}for(b in o)if(u=o[b],m=r[b],o.hasOwnProperty(b)&&(u!=null||m!=null))switch(b){case"value":re=u;break;case"defaultValue":oe=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(i(91));break;default:u!==m&&Vt(t,n,b,u,o,m)}Dr(t,re,oe);return;case"option":for(var Pe in r)if(re=r[Pe],r.hasOwnProperty(Pe)&&re!=null&&!o.hasOwnProperty(Pe))switch(Pe){case"selected":t.selected=!1;break;default:Vt(t,n,Pe,null,o,re)}for(k in o)if(re=o[k],oe=r[k],o.hasOwnProperty(k)&&re!==oe&&(re!=null||oe!=null))switch(k){case"selected":t.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:Vt(t,n,k,re,o,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in r)re=r[st],r.hasOwnProperty(st)&&re!=null&&!o.hasOwnProperty(st)&&Vt(t,n,st,null,o,re);for(ne in o)if(re=o[ne],oe=r[ne],o.hasOwnProperty(ne)&&re!==oe&&(re!=null||oe!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,n));break;default:Vt(t,n,ne,re,o,oe)}return;default:if(Ys(n)){for(var Zt in r)re=r[Zt],r.hasOwnProperty(Zt)&&re!==void 0&&!o.hasOwnProperty(Zt)&&wf(t,n,Zt,void 0,o,re);for(ge in o)re=o[ge],oe=r[ge],!o.hasOwnProperty(ge)||re===oe||re===void 0&&oe===void 0||wf(t,n,ge,re,o,oe);return}}for(var Q in r)re=r[Q],r.hasOwnProperty(Q)&&re!=null&&!o.hasOwnProperty(Q)&&Vt(t,n,Q,null,o,re);for(Ae in o)re=o[Ae],oe=r[Ae],!o.hasOwnProperty(Ae)||re===oe||re==null&&oe==null||Vt(t,n,Ae,re,o,oe)}function Mb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Sj(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var u=r[o],m=u.transferSize,b=u.initiatorType,N=u.duration;if(m&&N&&Mb(b)){for(b=0,N=u.responseEnd,o+=1;o<r.length;o++){var k=r[o],ne=k.startTime;if(ne>N)break;var ge=k.transferSize,Ae=k.initiatorType;ge&&Mb(Ae)&&(k=k.responseEnd,b+=ge*(k<N?1:(N-ne)/(k-ne)))}if(--o,n+=8*(m+b)/(u.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var _f=null,Ef=null;function Oc(t){return t.nodeType===9?t:t.ownerDocument}function Ub(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lb(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Af(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Cf=null;function wj(){var t=window.event;return t&&t.type==="popstate"?t===Cf?!1:(Cf=t,!0):(Cf=null,!1)}var Bb=typeof setTimeout=="function"?setTimeout:void 0,_j=typeof clearTimeout=="function"?clearTimeout:void 0,qb=typeof Promise=="function"?Promise:void 0,Ej=typeof queueMicrotask=="function"?queueMicrotask:typeof qb<"u"?function(t){return qb.resolve(null).then(t).catch(Aj)}:Bb;function Aj(t){setTimeout(function(){throw t})}function mr(t){return t==="head"}function Ib(t,n){var r=n,o=0;do{var u=r.nextSibling;if(t.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"||r==="/&"){if(o===0){t.removeChild(u),Kl(n);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Wi(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Wi(r);for(var m=r.firstChild;m;){var b=m.nextSibling,N=m.nodeName;m[kt]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=b}}else r==="body"&&Wi(t.ownerDocument.body);r=u}while(r);Kl(n)}function $b(t,n){var r=t;t=0;do{var o=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=o}while(r)}function Of(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Of(r),Mt(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function Cj(t,n,r,o){for(;t.nodeType===1;){var u=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[kt])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==u.rel||t.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||t.getAttribute("title")!==(u.title==null?null:u.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(u.src==null?null:u.src)||t.getAttribute("type")!==(u.type==null?null:u.type)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var m=u.name==null?null:""+u.name;if(u.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Ja(t.nextSibling),t===null)break}return null}function Oj(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Ja(t.nextSibling),t===null))return null;return t}function Fb(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Ja(t.nextSibling),t===null))return null;return t}function Rf(t){return t.data==="$?"||t.data==="$~"}function Tf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Rj(t,n){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||r.readyState!=="loading")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Ja(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Df=null;function Hb(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(n===0)return Ja(t.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}t=t.nextSibling}return null}function Vb(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return t;n--}else r!=="/$"&&r!=="/&"||n++}t=t.previousSibling}return null}function Zb(t,n,r){switch(n=Oc(r),t){case"html":if(t=n.documentElement,!t)throw Error(i(452));return t;case"head":if(t=n.head,!t)throw Error(i(453));return t;case"body":if(t=n.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Wi(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Mt(t)}var Wa=new Map,Gb=new Set;function Rc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Zs=Z.d;Z.d={f:Tj,r:Dj,D:zj,C:kj,L:Mj,m:Uj,X:Bj,S:Lj,M:qj};function Tj(){var t=Zs.f(),n=Nc();return t||n}function Dj(t){var n=jn(t);n!==null&&n.tag===5&&n.type==="form"?cg(n):Zs.r(t)}var Pl=typeof document>"u"?null:document;function Pb(t,n,r){var o=Pl;if(o&&typeof n=="string"&&n){var u=Cn(n);u='link[rel="'+t+'"][href="'+u+'"]',typeof r=="string"&&(u+='[crossorigin="'+r+'"]'),Gb.has(u)||(Gb.add(u),t={rel:t,crossOrigin:r,href:n},o.querySelector(u)===null&&(n=o.createElement("link"),ta(n,"link",t),wt(n),o.head.appendChild(n)))}}function zj(t){Zs.D(t),Pb("dns-prefetch",t,null)}function kj(t,n){Zs.C(t,n),Pb("preconnect",t,n)}function Mj(t,n,r){Zs.L(t,n,r);var o=Pl;if(o&&t&&n){var u='link[rel="preload"][as="'+Cn(n)+'"]';n==="image"&&r&&r.imageSrcSet?(u+='[imagesrcset="'+Cn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(u+='[imagesizes="'+Cn(r.imageSizes)+'"]')):u+='[href="'+Cn(t)+'"]';var m=u;switch(n){case"style":m=Ql(t);break;case"script":m=Yl(t)}Wa.has(m)||(t=x({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),Wa.set(m,t),o.querySelector(u)!==null||n==="style"&&o.querySelector(eo(m))||n==="script"&&o.querySelector(to(m))||(n=o.createElement("link"),ta(n,"link",t),wt(n),o.head.appendChild(n)))}}function Uj(t,n){Zs.m(t,n);var r=Pl;if(r&&t){var o=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+Cn(o)+'"][href="'+Cn(t)+'"]',m=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Yl(t)}if(!Wa.has(m)&&(t=x({rel:"modulepreload",href:t},n),Wa.set(m,t),r.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(to(m)))return}o=r.createElement("link"),ta(o,"link",t),wt(o),r.head.appendChild(o)}}}function Lj(t,n,r){Zs.S(t,n,r);var o=Pl;if(o&&t){var u=Jt(o).hoistableStyles,m=Ql(t);n=n||"default";var b=u.get(m);if(!b){var N={loading:0,preload:null};if(b=o.querySelector(eo(m)))N.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":n},r),(r=Wa.get(m))&&zf(t,r);var k=b=o.createElement("link");wt(k),ta(k,"link",t),k._p=new Promise(function(ne,ge){k.onload=ne,k.onerror=ge}),k.addEventListener("load",function(){N.loading|=1}),k.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Tc(b,n,o)}b={type:"stylesheet",instance:b,count:1,state:N},u.set(m,b)}}}function Bj(t,n){Zs.X(t,n);var r=Pl;if(r&&t){var o=Jt(r).hoistableScripts,u=Yl(t),m=o.get(u);m||(m=r.querySelector(to(u)),m||(t=x({src:t,async:!0},n),(n=Wa.get(u))&&kf(t,n),m=r.createElement("script"),wt(m),ta(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(u,m))}}function qj(t,n){Zs.M(t,n);var r=Pl;if(r&&t){var o=Jt(r).hoistableScripts,u=Yl(t),m=o.get(u);m||(m=r.querySelector(to(u)),m||(t=x({src:t,async:!0,type:"module"},n),(n=Wa.get(u))&&kf(t,n),m=r.createElement("script"),wt(m),ta(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(u,m))}}function Qb(t,n,r,o){var u=(u=Se.current)?Rc(u):null;if(!u)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Ql(r.href),r=Jt(u).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Ql(r.href);var m=Jt(u).hoistableStyles,b=m.get(t);if(b||(u=u.ownerDocument||u,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=u.querySelector(eo(t)))&&!m._p&&(b.instance=m,b.state.loading=5),Wa.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Wa.set(t,r),m||Ij(u,t,r,b.state))),n&&o===null)throw Error(i(528,""));return b}if(n&&o!==null)throw Error(i(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Yl(r),r=Jt(u).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Ql(t){return'href="'+Cn(t)+'"'}function eo(t){return'link[rel="stylesheet"]['+t+"]"}function Yb(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function Ij(t,n,r,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),ta(n,"link",r),wt(n),t.head.appendChild(n))}function Yl(t){return'[src="'+Cn(t)+'"]'}function to(t){return"script[async]"+t}function Kb(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+Cn(r.href)+'"]');if(o)return n.instance=o,wt(o),o;var u=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),wt(o),ta(o,"style",u),Tc(o,r.precedence,t),n.instance=o;case"stylesheet":u=Ql(r.href);var m=t.querySelector(eo(u));if(m)return n.state.loading|=4,n.instance=m,wt(m),m;o=Yb(r),(u=Wa.get(u))&&zf(o,u),m=(t.ownerDocument||t).createElement("link"),wt(m);var b=m;return b._p=new Promise(function(N,k){b.onload=N,b.onerror=k}),ta(m,"link",o),n.state.loading|=4,Tc(m,r.precedence,t),n.instance=m;case"script":return m=Yl(r.src),(u=t.querySelector(to(m)))?(n.instance=u,wt(u),u):(o=r,(u=Wa.get(m))&&(o=x({},r),kf(o,u)),t=t.ownerDocument||t,u=t.createElement("script"),wt(u),ta(u,"link",o),t.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Tc(o,r.precedence,t));return n.instance}function Tc(t,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,m=u,b=0;b<o.length;b++){var N=o[b];if(N.dataset.precedence===n)m=N;else if(m!==u)break}m?m.parentNode.insertBefore(t,m.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function zf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function kf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Dc=null;function Xb(t,n,r){if(Dc===null){var o=new Map,u=Dc=new Map;u.set(r,o)}else u=Dc,o=u.get(r),o||(o=new Map,u.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),u=0;u<r.length;u++){var m=r[u];if(!(m[kt]||m[dt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(n)||"";b=t+b;var N=o.get(b);N?N.push(m):o.set(b,[m])}}return o}function Jb(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function $j(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Wb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Fj(t,n,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var u=Ql(o.href),m=n.querySelector(eo(u));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=zc.bind(t),n.then(t,t)),r.state.loading|=4,r.instance=m,wt(m);return}m=n.ownerDocument||n,o=Yb(o),(u=Wa.get(u))&&zf(o,u),m=m.createElement("link"),wt(m);var b=m;b._p=new Promise(function(N,k){b.onload=N,b.onerror=k}),ta(m,"link",o),r.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=zc.bind(t),n.addEventListener("load",r),n.addEventListener("error",r))}}var Mf=0;function Hj(t,n){return t.stylesheets&&t.count===0&&Mc(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var o=setTimeout(function(){if(t.stylesheets&&Mc(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+n);0<t.imgBytes&&Mf===0&&(Mf=62500*Sj());var u=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Mc(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Mf?50:800)+n);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function zc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Mc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var kc=null;function Mc(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,kc=new Map,n.forEach(Vj,t),kc=null,zc.call(t))}function Vj(t,n){if(!(n.state.loading&4)){var r=kc.get(t);if(r)var o=r.get(null);else{r=new Map,kc.set(t,r);for(var u=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<u.length;m++){var b=u[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),o=b)}o&&r.set(null,o)}u=n.instance,b=u.getAttribute("data-precedence"),m=r.get(b)||o,m===o&&r.set(null,u),r.set(b,u),this.count++,o=zc.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),m?m.parentNode.insertBefore(u,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(u,t.firstChild)),n.state.loading|=4}}var no={$$typeof:te,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function Zj(t,n,r,o,u,m,b,N,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=se(0),this.hiddenUpdates=se(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function ev(t,n,r,o,u,m,b,N,k,ne,ge,Ae){return t=new Zj(t,n,r,b,k,ne,ge,Ae,N),n=1,m===!0&&(n|=24),m=za(3,null,null,n),t.current=m,m.stateNode=t,n=md(),n.refCount++,t.pooledCache=n,n.refCount++,m.memoizedState={element:o,isDehydrated:r,cache:n},bd(m),t}function tv(t){return t?(t=El,t):El}function nv(t,n,r,o,u,m){u=tv(u),o.context===null?o.context=u:o.pendingContext=u,o=nr(n),o.payload={element:r},m=m===void 0?null:m,m!==null&&(o.callback=m),r=ar(t,o,n),r!==null&&(wa(r,t,n),ki(r,t,n))}function av(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function Uf(t,n){av(t,n),(t=t.alternate)&&av(t,n)}function sv(t){if(t.tag===13||t.tag===31){var n=$r(t,67108864);n!==null&&wa(n,t,67108864),Uf(t,67108864)}}function rv(t){if(t.tag===13||t.tag===31){var n=Ba();n=Ut(n);var r=$r(t,n);r!==null&&wa(r,t,n),Uf(t,n)}}var Uc=!0;function Gj(t,n,r,o){var u=U.T;U.T=null;var m=Z.p;try{Z.p=2,Lf(t,n,r,o)}finally{Z.p=m,U.T=u}}function Pj(t,n,r,o){var u=U.T;U.T=null;var m=Z.p;try{Z.p=8,Lf(t,n,r,o)}finally{Z.p=m,U.T=u}}function Lf(t,n,r,o){if(Uc){var u=Bf(o);if(u===null)Sf(t,n,o,Lc,r),iv(t,o);else if(Yj(u,t,n,r,o))o.stopPropagation();else if(iv(t,o),n&4&&-1<Qj.indexOf(t)){for(;u!==null;){var m=jn(u);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=En(m.pendingLanes);if(b!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;b;){var k=1<<31-Et(b);N.entanglements[1]|=k,b&=~k}Es(m),(Dt&6)===0&&(yc=$()+500,Ki(0))}}break;case 31:case 13:N=$r(m,2),N!==null&&wa(N,m,2),Nc(),Uf(m,2)}if(m=Bf(o),m===null&&Sf(t,n,o,Lc,r),m===u)break;u=m}u!==null&&o.stopPropagation()}else Sf(t,n,o,null,r)}}function Bf(t){return t=kr(t),qf(t)}var Lc=null;function qf(t){if(Lc=null,t=dn(t),t!==null){var n=d(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=f(n),t!==null)return t;t=null}else if(r===31){if(t=h(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Lc=t,null}function lv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(J()){case be:return 2;case Ee:return 8;case G:case Me:return 32;case $e:return 268435456;default:return 32}default:return 32}}var If=!1,hr=null,pr=null,gr=null,ao=new Map,so=new Map,br=[],Qj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iv(t,n){switch(t){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":ao.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":so.delete(n.pointerId)}}function ro(t,n,r,o,u,m){return t===null||t.nativeEvent!==m?(t={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:m,targetContainers:[u]},n!==null&&(n=jn(n),n!==null&&sv(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),t)}function Yj(t,n,r,o,u){switch(n){case"focusin":return hr=ro(hr,t,n,r,o,u),!0;case"dragenter":return pr=ro(pr,t,n,r,o,u),!0;case"mouseover":return gr=ro(gr,t,n,r,o,u),!0;case"pointerover":var m=u.pointerId;return ao.set(m,ro(ao.get(m)||null,t,n,r,o,u)),!0;case"gotpointercapture":return m=u.pointerId,so.set(m,ro(so.get(m)||null,t,n,r,o,u)),!0}return!1}function ov(t){var n=dn(t.target);if(n!==null){var r=d(n);if(r!==null){if(n=r.tag,n===13){if(n=f(r),n!==null){t.blockedOn=n,un(t.priority,function(){rv(r)});return}}else if(n===31){if(n=h(r),n!==null){t.blockedOn=n,un(t.priority,function(){rv(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bc(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=Bf(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);ys=o,r.target.dispatchEvent(o),ys=null}else return n=jn(r),n!==null&&sv(n),t.blockedOn=r,!1;n.shift()}return!0}function cv(t,n,r){Bc(t)&&r.delete(n)}function Kj(){If=!1,hr!==null&&Bc(hr)&&(hr=null),pr!==null&&Bc(pr)&&(pr=null),gr!==null&&Bc(gr)&&(gr=null),ao.forEach(cv),so.forEach(cv)}function qc(t,n){t.blockedOn===n&&(t.blockedOn=null,If||(If=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Kj)))}var Ic=null;function uv(t){Ic!==t&&(Ic=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ic===t&&(Ic=null);for(var n=0;n<t.length;n+=3){var r=t[n],o=t[n+1],u=t[n+2];if(typeof o!="function"){if(qf(o||r)===null)continue;break}var m=jn(r);m!==null&&(t.splice(n,3),n-=3,Ld(m,{pending:!0,data:u,method:r.method,action:o},o,u))}}))}function Kl(t){function n(k){return qc(k,t)}hr!==null&&qc(hr,t),pr!==null&&qc(pr,t),gr!==null&&qc(gr,t),ao.forEach(n),so.forEach(n);for(var r=0;r<br.length;r++){var o=br[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<br.length&&(r=br[0],r.blockedOn===null);)ov(r),r.blockedOn===null&&br.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var u=r[o],m=r[o+1],b=u[yt]||null;if(typeof m=="function")b||uv(r);else if(b){var N=null;if(m&&m.hasAttribute("formAction")){if(u=m,b=m[yt]||null)N=b.formAction;else if(qf(u)!==null)continue}else N=b.action;typeof N=="function"?r[o+1]=N:(r.splice(o,3),o-=3),uv(r)}}}function dv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return u=b})},focusReset:"manual",scroll:"manual"})}function n(){u!==null&&(u(),u=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),u!==null&&(u(),u=null)}}}function $f(t){this._internalRoot=t}$c.prototype.render=$f.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(i(409));var r=n.current,o=Ba();nv(r,o,t,n,null,null)},$c.prototype.unmount=$f.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;nv(t.current,2,null,t,null,null),Nc(),n[Gt]=null}};function $c(t){this._internalRoot=t}$c.prototype.unstable_scheduleHydration=function(t){if(t){var n=Bt();t={blockedOn:null,target:t,priority:n};for(var r=0;r<br.length&&n!==0&&n<br[r].priority;r++);br.splice(r,0,t),r===0&&ov(t)}};var fv=a.version;if(fv!=="19.2.0")throw Error(i(527,fv,"19.2.0"));Z.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=g(n),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var Xj={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{Ne=Fc.inject(Xj),Ie=Fc}catch{}}return io.createRoot=function(t,n){if(!c(t))throw Error(i(299));var r=!1,o="",u=yg,m=xg,b=Ng;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError)),n=ev(t,1,!1,null,null,r,o,null,u,m,b,dv),t[Gt]=n.current,jf(t),new $f(n)},io.hydrateRoot=function(t,n,r){if(!c(t))throw Error(i(299));var o=!1,u="",m=yg,b=xg,N=Ng,k=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(N=r.onRecoverableError),r.formState!==void 0&&(k=r.formState)),n=ev(t,1,!0,n,r??null,o,u,k,m,b,N,dv),n.context=tv(null),r=n.current,o=Ba(),o=Ut(o),u=nr(o),u.callback=null,ar(r,u,o),r=o,n.current.lanes=r,Te(n,r),Es(n),t[Gt]=n.current,jf(t),new $c(n)},io.version="19.2.0",io}var jv;function iS(){if(jv)return Vf.exports;jv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(a){console.error(a)}}return e(),Vf.exports=lS(),Vf.exports}var oS=iS();const cS=ox(oS);var Sv="popstate";function uS(e={}){function a(i,c){let{pathname:d,search:f,hash:h}=i.location;return Em("",{pathname:d,search:f,hash:h},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(i,c){return typeof c=="string"?c:yo(c)}return fS(a,s,null,e)}function ln(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function as(e,a){if(!e){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function dS(){return Math.random().toString(36).substring(2,10)}function wv(e,a){return{usr:e.state,key:e.key,idx:a}}function Em(e,a,s=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof a=="string"?di(a):a,state:s,key:a&&a.key||i||dS()}}function yo({pathname:e="/",search:a="",hash:s=""}){return a&&a!=="?"&&(e+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function di(e){let a={};if(e){let s=e.indexOf("#");s>=0&&(a.hash=e.substring(s),e=e.substring(0,s));let i=e.indexOf("?");i>=0&&(a.search=e.substring(i),e=e.substring(0,i)),e&&(a.pathname=e)}return a}function fS(e,a,s,i={}){let{window:c=document.defaultView,v5Compat:d=!1}=i,f=c.history,h="POP",v=null,g=y();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function y(){return(f.state||{idx:null}).idx}function x(){h="POP";let R=y(),F=R==null?null:R-g;g=R,v&&v({action:h,location:A.location,delta:F})}function j(R,F){h="PUSH";let z=Em(A.location,R,F);g=y()+1;let te=wv(z,g),M=A.createHref(z);try{f.pushState(te,"",M)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;c.location.assign(M)}d&&v&&v({action:h,location:A.location,delta:1})}function H(R,F){h="REPLACE";let z=Em(A.location,R,F);g=y();let te=wv(z,g),M=A.createHref(z);f.replaceState(te,"",M),d&&v&&v({action:h,location:A.location,delta:0})}function _(R){return mS(R)}let A={get action(){return h},get location(){return e(c,f)},listen(R){if(v)throw new Error("A history only accepts one active listener");return c.addEventListener(Sv,x),v=R,()=>{c.removeEventListener(Sv,x),v=null}},createHref(R){return a(c,R)},createURL:_,encodeLocation(R){let F=_(R);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:j,replace:H,go(R){return f.go(R)}};return A}function mS(e,a=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),ln(s,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:yo(e);return i=i.replace(/ $/,"%20"),!a&&i.startsWith("//")&&(i=s+i),new URL(i,s)}function cx(e,a,s="/"){return hS(e,a,s,!1)}function hS(e,a,s,i){let c=typeof a=="string"?di(a):a,d=Qs(c.pathname||"/",s);if(d==null)return null;let f=ux(e);pS(f);let h=null;for(let v=0;h==null&&v<f.length;++v){let g=ES(d);h=wS(f[v],g,i)}return h}function ux(e,a=[],s=[],i="",c=!1){let d=(f,h,v=c,g)=>{let y={relativePath:g===void 0?f.path||"":g,caseSensitive:f.caseSensitive===!0,childrenIndex:h,route:f};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&v)return;ln(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let x=Ps([i,y.relativePath]),j=s.concat(y);f.children&&f.children.length>0&&(ln(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),ux(f.children,a,j,x,v)),!(f.path==null&&!f.index)&&a.push({path:x,score:jS(x,f.index),routesMeta:j})};return e.forEach((f,h)=>{if(f.path===""||!f.path?.includes("?"))d(f,h);else for(let v of dx(f.path))d(f,h,!0,v)}),a}function dx(e){let a=e.split("/");if(a.length===0)return[];let[s,...i]=a,c=s.endsWith("?"),d=s.replace(/\?$/,"");if(i.length===0)return c?[d,""]:[d];let f=dx(i.join("/")),h=[];return h.push(...f.map(v=>v===""?d:[d,v].join("/"))),c&&h.push(...f),h.map(v=>e.startsWith("/")&&v===""?"/":v)}function pS(e){e.sort((a,s)=>a.score!==s.score?s.score-a.score:SS(a.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}var gS=/^:[\w-]+$/,bS=3,vS=2,yS=1,xS=10,NS=-2,_v=e=>e==="*";function jS(e,a){let s=e.split("/"),i=s.length;return s.some(_v)&&(i+=NS),a&&(i+=vS),s.filter(c=>!_v(c)).reduce((c,d)=>c+(gS.test(d)?bS:d===""?yS:xS),i)}function SS(e,a){return e.length===a.length&&e.slice(0,-1).every((i,c)=>i===a[c])?e[e.length-1]-a[a.length-1]:0}function wS(e,a,s=!1){let{routesMeta:i}=e,c={},d="/",f=[];for(let h=0;h<i.length;++h){let v=i[h],g=h===i.length-1,y=d==="/"?a:a.slice(d.length)||"/",x=xo({path:v.relativePath,caseSensitive:v.caseSensitive,end:g},y),j=v.route;if(!x&&g&&s&&!i[i.length-1].route.index&&(x=xo({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},y)),!x)return null;Object.assign(c,x.params),f.push({params:c,pathname:Ps([d,x.pathname]),pathnameBase:RS(Ps([d,x.pathnameBase])),route:j}),x.pathnameBase!=="/"&&(d=Ps([d,x.pathnameBase]))}return f}function xo(e,a){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,i]=_S(e.path,e.caseSensitive,e.end),c=a.match(s);if(!c)return null;let d=c[0],f=d.replace(/(.)\/+$/,"$1"),h=c.slice(1);return{params:i.reduce((g,{paramName:y,isOptional:x},j)=>{if(y==="*"){let _=h[j]||"";f=d.slice(0,d.length-_.length).replace(/(.)\/+$/,"$1")}const H=h[j];return x&&!H?g[y]=void 0:g[y]=(H||"").replace(/%2F/g,"/"),g},{}),pathname:d,pathnameBase:f,pattern:e}}function _S(e,a=!1,s=!0){as(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,h,v)=>(i.push({paramName:h,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),i]}function ES(e){try{return e.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return as(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),e}}function Qs(e,a){if(a==="/")return e;if(!e.toLowerCase().startsWith(a.toLowerCase()))return null;let s=a.endsWith("/")?a.length-1:a.length,i=e.charAt(s);return i&&i!=="/"?null:e.slice(s)||"/"}function AS(e,a="/"){let{pathname:s,search:i="",hash:c=""}=typeof e=="string"?di(e):e;return{pathname:s?s.startsWith("/")?s:CS(s,a):a,search:TS(i),hash:DS(c)}}function CS(e,a){let s=a.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function Qf(e,a,s,i){return`Cannot include a '${e}' character in a manually specified \`to.${a}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function OS(e){return e.filter((a,s)=>s===0||a.route.path&&a.route.path.length>0)}function rh(e){let a=OS(e);return a.map((s,i)=>i===a.length-1?s.pathname:s.pathnameBase)}function lh(e,a,s,i=!1){let c;typeof e=="string"?c=di(e):(c={...e},ln(!c.pathname||!c.pathname.includes("?"),Qf("?","pathname","search",c)),ln(!c.pathname||!c.pathname.includes("#"),Qf("#","pathname","hash",c)),ln(!c.search||!c.search.includes("#"),Qf("#","search","hash",c)));let d=e===""||c.pathname==="",f=d?"/":c.pathname,h;if(f==null)h=s;else{let x=a.length-1;if(!i&&f.startsWith("..")){let j=f.split("/");for(;j[0]==="..";)j.shift(),x-=1;c.pathname=j.join("/")}h=x>=0?a[x]:"/"}let v=AS(c,h),g=f&&f!=="/"&&f.endsWith("/"),y=(d||f===".")&&s.endsWith("/");return!v.pathname.endsWith("/")&&(g||y)&&(v.pathname+="/"),v}var Ps=e=>e.join("/").replace(/\/\/+/g,"/"),RS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),TS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,DS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function zS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var fx=["POST","PUT","PATCH","DELETE"];new Set(fx);var kS=["GET",...fx];new Set(kS);var fi=p.createContext(null);fi.displayName="DataRouter";var xu=p.createContext(null);xu.displayName="DataRouterState";p.createContext(!1);var mx=p.createContext({isTransitioning:!1});mx.displayName="ViewTransition";var MS=p.createContext(new Map);MS.displayName="Fetchers";var US=p.createContext(null);US.displayName="Await";var ss=p.createContext(null);ss.displayName="Navigation";var Ao=p.createContext(null);Ao.displayName="Location";var rs=p.createContext({outlet:null,matches:[],isDataRoute:!1});rs.displayName="Route";var ih=p.createContext(null);ih.displayName="RouteError";function LS(e,{relative:a}={}){ln(mi(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:i}=p.useContext(ss),{hash:c,pathname:d,search:f}=Co(e,{relative:a}),h=d;return s!=="/"&&(h=d==="/"?s:Ps([s,d])),i.createHref({pathname:h,search:f,hash:c})}function mi(){return p.useContext(Ao)!=null}function ma(){return ln(mi(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(Ao).location}var hx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function px(e){p.useContext(ss).static||p.useLayoutEffect(e)}function fl(){let{isDataRoute:e}=p.useContext(rs);return e?WS():BS()}function BS(){ln(mi(),"useNavigate() may be used only in the context of a <Router> component.");let e=p.useContext(fi),{basename:a,navigator:s}=p.useContext(ss),{matches:i}=p.useContext(rs),{pathname:c}=ma(),d=JSON.stringify(rh(i)),f=p.useRef(!1);return px(()=>{f.current=!0}),p.useCallback((v,g={})=>{if(as(f.current,hx),!f.current)return;if(typeof v=="number"){s.go(v);return}let y=lh(v,JSON.parse(d),c,g.relative==="path");e==null&&a!=="/"&&(y.pathname=y.pathname==="/"?a:Ps([a,y.pathname])),(g.replace?s.replace:s.push)(y,g.state,g)},[a,s,d,c,e])}var qS=p.createContext(null);function IS(e){let a=p.useContext(rs).outlet;return p.useMemo(()=>a&&p.createElement(qS.Provider,{value:e},a),[a,e])}function $S(){let{matches:e}=p.useContext(rs),a=e[e.length-1];return a?a.params:{}}function Co(e,{relative:a}={}){let{matches:s}=p.useContext(rs),{pathname:i}=ma(),c=JSON.stringify(rh(s));return p.useMemo(()=>lh(e,JSON.parse(c),i,a==="path"),[e,c,i,a])}function FS(e,a){return gx(e,a)}function gx(e,a,s,i,c){ln(mi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=p.useContext(ss),{matches:f}=p.useContext(rs),h=f[f.length-1],v=h?h.params:{},g=h?h.pathname:"/",y=h?h.pathnameBase:"/",x=h&&h.route;{let z=x&&x.path||"";bx(g,!x||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let j=ma(),H;if(a){let z=typeof a=="string"?di(a):a;ln(y==="/"||z.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${z.pathname}" was given in the \`location\` prop.`),H=z}else H=j;let _=H.pathname||"/",A=_;if(y!=="/"){let z=y.replace(/^\//,"").split("/");A="/"+_.replace(/^\//,"").split("/").slice(z.length).join("/")}let R=cx(e,{pathname:A});as(x||R!=null,`No routes matched location "${H.pathname}${H.search}${H.hash}" `),as(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${H.pathname}${H.search}${H.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let F=PS(R&&R.map(z=>Object.assign({},z,{params:Object.assign({},v,z.params),pathname:Ps([y,d.encodeLocation?d.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?y:Ps([y,d.encodeLocation?d.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),f,s,i,c);return a&&F?p.createElement(Ao.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...H},navigationType:"POP"}},F):F}function HS(){let e=JS(),a=zS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:i},d={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",e),f=p.createElement(p.Fragment,null,p.createElement("p",null," Hey developer "),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:d},"ErrorBoundary")," or"," ",p.createElement("code",{style:d},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},a),s?p.createElement("pre",{style:c},s):null,f)}var VS=p.createElement(HS,null),ZS=class extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,a){return a.location!==e.location||a.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:a.error,location:a.location,revalidation:e.revalidation||a.revalidation}}componentDidCatch(e,a){this.props.unstable_onError?this.props.unstable_onError(e,a):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?p.createElement(rs.Provider,{value:this.props.routeContext},p.createElement(ih.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function GS({routeContext:e,match:a,children:s}){let i=p.useContext(fi);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),p.createElement(rs.Provider,{value:e},s)}function PS(e,a=[],s=null,i=null,c=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(a.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let d=e,f=s?.errors;if(f!=null){let g=d.findIndex(y=>y.route.id&&f?.[y.route.id]!==void 0);ln(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),d=d.slice(0,Math.min(d.length,g+1))}let h=!1,v=-1;if(s)for(let g=0;g<d.length;g++){let y=d[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(v=g),y.route.id){let{loaderData:x,errors:j}=s,H=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!j||j[y.route.id]===void 0);if(y.route.lazy||H){h=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((g,y,x)=>{let j,H=!1,_=null,A=null;s&&(j=f&&y.route.id?f[y.route.id]:void 0,_=y.route.errorElement||VS,h&&(v<0&&x===0?(bx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),H=!0,A=null):v===x&&(H=!0,A=y.route.hydrateFallbackElement||null)));let R=a.concat(d.slice(0,x+1)),F=()=>{let z;return j?z=_:H?z=A:y.route.Component?z=p.createElement(y.route.Component,null):y.route.element?z=y.route.element:z=g,p.createElement(GS,{match:y,routeContext:{outlet:g,matches:R,isDataRoute:s!=null},children:z})};return s&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?p.createElement(ZS,{location:s.location,revalidation:s.revalidation,component:_,error:j,children:F(),routeContext:{outlet:null,matches:R,isDataRoute:!0},unstable_onError:i}):F()},null)}function oh(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QS(e){let a=p.useContext(fi);return ln(a,oh(e)),a}function YS(e){let a=p.useContext(xu);return ln(a,oh(e)),a}function KS(e){let a=p.useContext(rs);return ln(a,oh(e)),a}function ch(e){let a=KS(e),s=a.matches[a.matches.length-1];return ln(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function XS(){return ch("useRouteId")}function JS(){let e=p.useContext(ih),a=YS("useRouteError"),s=ch("useRouteError");return e!==void 0?e:a.errors?.[s]}function WS(){let{router:e}=QS("useNavigate"),a=ch("useNavigate"),s=p.useRef(!1);return px(()=>{s.current=!0}),p.useCallback(async(c,d={})=>{as(s.current,hx),s.current&&(typeof c=="number"?e.navigate(c):await e.navigate(c,{fromRouteId:a,...d}))},[e,a])}var Ev={};function bx(e,a,s){!a&&!Ev[e]&&(Ev[e]=!0,as(!1,s))}p.memo(ew);function ew({routes:e,future:a,state:s,unstable_onError:i}){return gx(e,void 0,s,i,a)}function Sr({to:e,replace:a,state:s,relative:i}){ln(mi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=p.useContext(ss);as(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=p.useContext(rs),{pathname:f}=ma(),h=fl(),v=lh(e,rh(d),f,i==="path"),g=JSON.stringify(v);return p.useEffect(()=>{h(JSON.parse(g),{replace:a,state:s,relative:i})},[h,g,i,a,s]),null}function vx(e){return IS(e.context)}function fn(e){ln(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tw({basename:e="/",children:a=null,location:s,navigationType:i="POP",navigator:c,static:d=!1}){ln(!mi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),h=p.useMemo(()=>({basename:f,navigator:c,static:d,future:{}}),[f,c,d]);typeof s=="string"&&(s=di(s));let{pathname:v="/",search:g="",hash:y="",state:x=null,key:j="default"}=s,H=p.useMemo(()=>{let _=Qs(v,f);return _==null?null:{location:{pathname:_,search:g,hash:y,state:x,key:j},navigationType:i}},[f,v,g,y,x,j,i]);return as(H!=null,`<Router basename="${f}"> is not able to match the URL "${v}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),H==null?null:p.createElement(ss.Provider,{value:h},p.createElement(Ao.Provider,{children:a,value:H}))}function nw({children:e,location:a}){return FS(Am(e),a)}function Am(e,a=[]){let s=[];return p.Children.forEach(e,(i,c)=>{if(!p.isValidElement(i))return;let d=[...a,c];if(i.type===p.Fragment){s.push.apply(s,Am(i.props.children,d));return}ln(i.type===fn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ln(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||d.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=Am(i.props.children,d)),s.push(f)}),s}var Wc="get",eu="application/x-www-form-urlencoded";function Nu(e){return e!=null&&typeof e.tagName=="string"}function aw(e){return Nu(e)&&e.tagName.toLowerCase()==="button"}function sw(e){return Nu(e)&&e.tagName.toLowerCase()==="form"}function rw(e){return Nu(e)&&e.tagName.toLowerCase()==="input"}function lw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function iw(e,a){return e.button===0&&(!a||a==="_self")&&!lw(e)}function Cm(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((a,s)=>{let i=e[s];return a.concat(Array.isArray(i)?i.map(c=>[s,c]):[[s,i]])},[]))}function ow(e,a){let s=Cm(e);return a&&a.forEach((i,c)=>{s.has(c)||a.getAll(c).forEach(d=>{s.append(c,d)})}),s}var Hc=null;function cw(){if(Hc===null)try{new FormData(document.createElement("form"),0),Hc=!1}catch{Hc=!0}return Hc}var uw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yf(e){return e!=null&&!uw.has(e)?(as(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${eu}"`),null):e}function dw(e,a){let s,i,c,d,f;if(sw(e)){let h=e.getAttribute("action");i=h?Qs(h,a):null,s=e.getAttribute("method")||Wc,c=Yf(e.getAttribute("enctype"))||eu,d=new FormData(e)}else if(aw(e)||rw(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=e.getAttribute("formaction")||h.getAttribute("action");if(i=v?Qs(v,a):null,s=e.getAttribute("formmethod")||h.getAttribute("method")||Wc,c=Yf(e.getAttribute("formenctype"))||Yf(h.getAttribute("enctype"))||eu,d=new FormData(h,e),!cw()){let{name:g,type:y,value:x}=e;if(y==="image"){let j=g?`${g}.`:"";d.append(`${j}x`,"0"),d.append(`${j}y`,"0")}else g&&d.append(g,x)}}else{if(Nu(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Wc,i=null,c=eu,f=e}return d&&c==="text/plain"&&(f=d,d=void 0),{action:i,method:s.toLowerCase(),encType:c,formData:d,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uh(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function fw(e,a,s){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${s}`:a&&Qs(i.pathname,a)==="/"?i.pathname=`${a.replace(/\/$/,"")}/_root.${s}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${s}`,i}async function mw(e,a){if(e.id in a)return a[e.id];try{let s=await import(e.module);return a[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function pw(e,a,s){let i=await Promise.all(e.map(async c=>{let d=a.routes[c.route.id];if(d){let f=await mw(d,s);return f.links?f.links():[]}return[]}));return yw(i.flat(1).filter(hw).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Av(e,a,s,i,c,d){let f=(v,g)=>s[g]?v.route.id!==s[g].route.id:!0,h=(v,g)=>s[g].pathname!==v.pathname||s[g].route.path?.endsWith("*")&&s[g].params["*"]!==v.params["*"];return d==="assets"?a.filter((v,g)=>f(v,g)||h(v,g)):d==="data"?a.filter((v,g)=>{let y=i.routes[v.route.id];if(!y||!y.hasLoader)return!1;if(f(v,g)||h(v,g))return!0;if(v.route.shouldRevalidate){let x=v.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function gw(e,a,{includeHydrateFallback:s}={}){return bw(e.map(i=>{let c=a.routes[i.route.id];if(!c)return[];let d=[c.module];return c.clientActionModule&&(d=d.concat(c.clientActionModule)),c.clientLoaderModule&&(d=d.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(d=d.concat(c.hydrateFallbackModule)),c.imports&&(d=d.concat(c.imports)),d}).flat(1))}function bw(e){return[...new Set(e)]}function vw(e){let a={},s=Object.keys(e).sort();for(let i of s)a[i]=e[i];return a}function yw(e,a){let s=new Set;return new Set(a),e.reduce((i,c)=>{let d=JSON.stringify(vw(c));return s.has(d)||(s.add(d),i.push({key:d,link:c})),i},[])}function yx(){let e=p.useContext(fi);return uh(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function xw(){let e=p.useContext(xu);return uh(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var dh=p.createContext(void 0);dh.displayName="FrameworkContext";function xx(){let e=p.useContext(dh);return uh(e,"You must render this element inside a <HydratedRouter> element"),e}function Nw(e,a){let s=p.useContext(dh),[i,c]=p.useState(!1),[d,f]=p.useState(!1),{onFocus:h,onBlur:v,onMouseEnter:g,onMouseLeave:y,onTouchStart:x}=a,j=p.useRef(null);p.useEffect(()=>{if(e==="render"&&f(!0),e==="viewport"){let A=F=>{F.forEach(z=>{f(z.isIntersecting)})},R=new IntersectionObserver(A,{threshold:.5});return j.current&&R.observe(j.current),()=>{R.disconnect()}}},[e]),p.useEffect(()=>{if(i){let A=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(A)}}},[i]);let H=()=>{c(!0)},_=()=>{c(!1),f(!1)};return s?e!=="intent"?[d,j,{}]:[d,j,{onFocus:oo(h,H),onBlur:oo(v,_),onMouseEnter:oo(g,H),onMouseLeave:oo(y,_),onTouchStart:oo(x,H)}]:[!1,j,{}]}function oo(e,a){return s=>{e&&e(s),s.defaultPrevented||a(s)}}function jw({page:e,...a}){let{router:s}=yx(),i=p.useMemo(()=>cx(s.routes,e,s.basename),[s.routes,e,s.basename]);return i?p.createElement(ww,{page:e,matches:i,...a}):null}function Sw(e){let{manifest:a,routeModules:s}=xx(),[i,c]=p.useState([]);return p.useEffect(()=>{let d=!1;return pw(e,a,s).then(f=>{d||c(f)}),()=>{d=!0}},[e,a,s]),i}function ww({page:e,matches:a,...s}){let i=ma(),{manifest:c,routeModules:d}=xx(),{basename:f}=yx(),{loaderData:h,matches:v}=xw(),g=p.useMemo(()=>Av(e,a,v,c,i,"data"),[e,a,v,c,i]),y=p.useMemo(()=>Av(e,a,v,c,i,"assets"),[e,a,v,c,i]),x=p.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let _=new Set,A=!1;if(a.forEach(F=>{let z=c.routes[F.route.id];!z||!z.hasLoader||(!g.some(te=>te.route.id===F.route.id)&&F.route.id in h&&d[F.route.id]?.shouldRevalidate||z.hasClientLoader?A=!0:_.add(F.route.id))}),_.size===0)return[];let R=fw(e,f,"data");return A&&_.size>0&&R.searchParams.set("_routes",a.filter(F=>_.has(F.route.id)).map(F=>F.route.id).join(",")),[R.pathname+R.search]},[f,h,i,c,g,a,e,d]),j=p.useMemo(()=>gw(y,c),[y,c]),H=Sw(y);return p.createElement(p.Fragment,null,x.map(_=>p.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...s})),j.map(_=>p.createElement("link",{key:_,rel:"modulepreload",href:_,...s})),H.map(({key:_,link:A})=>p.createElement("link",{key:_,nonce:s.nonce,...A})))}function _w(...e){return a=>{e.forEach(s=>{typeof s=="function"?s(a):s!=null&&(s.current=a)})}}var Nx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Nx&&(window.__reactRouterVersion="7.9.5")}catch{}function Ew({basename:e,children:a,window:s}){let i=p.useRef();i.current==null&&(i.current=uS({window:s,v5Compat:!0}));let c=i.current,[d,f]=p.useState({action:c.action,location:c.location}),h=p.useCallback(v=>{p.startTransition(()=>f(v))},[f]);return p.useLayoutEffect(()=>c.listen(h),[c,h]),p.createElement(tw,{basename:e,children:a,location:d.location,navigationType:d.action,navigator:c})}var jx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,su=p.forwardRef(function({onClick:a,discover:s="render",prefetch:i="none",relative:c,reloadDocument:d,replace:f,state:h,target:v,to:g,preventScrollReset:y,viewTransition:x,...j},H){let{basename:_}=p.useContext(ss),A=typeof g=="string"&&jx.test(g),R,F=!1;if(typeof g=="string"&&A&&(R=g,Nx))try{let fe=new URL(window.location.href),Re=g.startsWith("//")?new URL(fe.protocol+g):new URL(g),Ce=Qs(Re.pathname,_);Re.origin===fe.origin&&Ce!=null?g=Ce+Re.search+Re.hash:F=!0}catch{as(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=LS(g,{relative:c}),[te,M,D]=Nw(i,j),K=Ow(g,{replace:f,state:h,target:v,preventScrollReset:y,relative:c,viewTransition:x});function q(fe){a&&a(fe),fe.defaultPrevented||K(fe)}let V=p.createElement("a",{...j,...D,href:R||z,onClick:F||d?a:q,ref:_w(H,M),target:v,"data-discover":!A&&s==="render"?"true":void 0});return te&&!A?p.createElement(p.Fragment,null,V,p.createElement(jw,{page:z})):V});su.displayName="Link";var Sx=p.forwardRef(function({"aria-current":a="page",caseSensitive:s=!1,className:i="",end:c=!1,style:d,to:f,viewTransition:h,children:v,...g},y){let x=Co(f,{relative:g.relative}),j=ma(),H=p.useContext(xu),{navigator:_,basename:A}=p.useContext(ss),R=H!=null&&kw(x)&&h===!0,F=_.encodeLocation?_.encodeLocation(x).pathname:x.pathname,z=j.pathname,te=H&&H.navigation&&H.navigation.location?H.navigation.location.pathname:null;s||(z=z.toLowerCase(),te=te?te.toLowerCase():null,F=F.toLowerCase()),te&&A&&(te=Qs(te,A)||te);const M=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let D=z===F||!c&&z.startsWith(F)&&z.charAt(M)==="/",K=te!=null&&(te===F||!c&&te.startsWith(F)&&te.charAt(F.length)==="/"),q={isActive:D,isPending:K,isTransitioning:R},V=D?a:void 0,fe;typeof i=="function"?fe=i(q):fe=[i,D?"active":null,K?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let Re=typeof d=="function"?d(q):d;return p.createElement(su,{...g,"aria-current":V,className:fe,ref:y,style:Re,to:f,viewTransition:h},typeof v=="function"?v(q):v)});Sx.displayName="NavLink";var Aw=p.forwardRef(({discover:e="render",fetcherKey:a,navigate:s,reloadDocument:i,replace:c,state:d,method:f=Wc,action:h,onSubmit:v,relative:g,preventScrollReset:y,viewTransition:x,...j},H)=>{let _=Dw(),A=zw(h,{relative:g}),R=f.toLowerCase()==="get"?"get":"post",F=typeof h=="string"&&jx.test(h),z=te=>{if(v&&v(te),te.defaultPrevented)return;te.preventDefault();let M=te.nativeEvent.submitter,D=M?.getAttribute("formmethod")||f;_(M||te.currentTarget,{fetcherKey:a,method:D,navigate:s,replace:c,state:d,relative:g,preventScrollReset:y,viewTransition:x})};return p.createElement("form",{ref:H,method:R,action:A,onSubmit:i?v:z,...j,"data-discover":!F&&e==="render"?"true":void 0})});Aw.displayName="Form";function Cw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wx(e){let a=p.useContext(fi);return ln(a,Cw(e)),a}function Ow(e,{target:a,replace:s,state:i,preventScrollReset:c,relative:d,viewTransition:f}={}){let h=fl(),v=ma(),g=Co(e,{relative:d});return p.useCallback(y=>{if(iw(y,a)){y.preventDefault();let x=s!==void 0?s:yo(v)===yo(g);h(e,{replace:x,state:i,preventScrollReset:c,relative:d,viewTransition:f})}},[v,h,g,s,i,a,e,c,d,f])}function _x(e){as(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=p.useRef(Cm(e)),s=p.useRef(!1),i=ma(),c=p.useMemo(()=>ow(i.search,s.current?null:a.current),[i.search]),d=fl(),f=p.useCallback((h,v)=>{const g=Cm(typeof h=="function"?h(new URLSearchParams(c)):h);s.current=!0,d("?"+g,v)},[d,c]);return[c,f]}var Rw=0,Tw=()=>`__${String(++Rw)}__`;function Dw(){let{router:e}=wx("useSubmit"),{basename:a}=p.useContext(ss),s=XS();return p.useCallback(async(i,c={})=>{let{action:d,method:f,encType:h,formData:v,body:g}=dw(i,a);if(c.navigate===!1){let y=c.fetcherKey||Tw();await e.fetch(y,s,c.action||d,{preventScrollReset:c.preventScrollReset,formData:v,body:g,formMethod:c.method||f,formEncType:c.encType||h,flushSync:c.flushSync})}else await e.navigate(c.action||d,{preventScrollReset:c.preventScrollReset,formData:v,body:g,formMethod:c.method||f,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:s,flushSync:c.flushSync,viewTransition:c.viewTransition})},[e,a,s])}function zw(e,{relative:a}={}){let{basename:s}=p.useContext(ss),i=p.useContext(rs);ln(i,"useFormAction must be used inside a RouteContext");let[c]=i.matches.slice(-1),d={...Co(e||".",{relative:a})},f=ma();if(e==null){d.search=f.search;let h=new URLSearchParams(d.search),v=h.getAll("index");if(v.some(y=>y==="")){h.delete("index"),v.filter(x=>x).forEach(x=>h.append("index",x));let y=h.toString();d.search=y?`?${y}`:""}}return(!e||e===".")&&c.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(d.pathname=d.pathname==="/"?s:Ps([s,d.pathname])),yo(d)}function kw(e,{relative:a}={}){let s=p.useContext(mx);ln(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=wx("useViewTransitionState"),c=Co(e,{relative:a});if(!s.isTransitioning)return!1;let d=Qs(s.currentLocation.pathname,i)||s.currentLocation.pathname,f=Qs(s.nextLocation.pathname,i)||s.nextLocation.pathname;return xo(c.pathname,f)!=null||xo(c.pathname,d)!=null}var hi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Mw={setTimeout:(e,a)=>setTimeout(e,a),clearTimeout:e=>clearTimeout(e),setInterval:(e,a)=>setInterval(e,a),clearInterval:e=>clearInterval(e)},Uw=class{#e=Mw;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,a){return this.#e.setTimeout(e,a)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,a){return this.#e.setInterval(e,a)}clearInterval(e){this.#e.clearInterval(e)}},tl=new Uw;function Lw(e){setTimeout(e,0)}var rl=typeof window>"u"||"Deno"in globalThis;function fa(){}function Bw(e,a){return typeof e=="function"?e(a):e}function Om(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ex(e,a){return Math.max(e+(a||0)-Date.now(),0)}function wr(e,a){return typeof e=="function"?e(a):e}function es(e,a){return typeof e=="function"?e(a):e}function Cv(e,a){const{type:s="all",exact:i,fetchStatus:c,predicate:d,queryKey:f,stale:h}=e;if(f){if(i){if(a.queryHash!==fh(f,a.options))return!1}else if(!No(a.queryKey,f))return!1}if(s!=="all"){const v=a.isActive();if(s==="active"&&!v||s==="inactive"&&v)return!1}return!(typeof h=="boolean"&&a.isStale()!==h||c&&c!==a.state.fetchStatus||d&&!d(a))}function Ov(e,a){const{exact:s,status:i,predicate:c,mutationKey:d}=e;if(d){if(!a.options.mutationKey)return!1;if(s){if(ll(a.options.mutationKey)!==ll(d))return!1}else if(!No(a.options.mutationKey,d))return!1}return!(i&&a.state.status!==i||c&&!c(a))}function fh(e,a){return(a?.queryKeyHashFn||ll)(e)}function ll(e){return JSON.stringify(e,(a,s)=>Rm(s)?Object.keys(s).sort().reduce((i,c)=>(i[c]=s[c],i),{}):s)}function No(e,a){return e===a?!0:typeof e!=typeof a?!1:e&&a&&typeof e=="object"&&typeof a=="object"?Object.keys(a).every(s=>No(e[s],a[s])):!1}var qw=Object.prototype.hasOwnProperty;function Ax(e,a){if(e===a)return e;const s=Rv(e)&&Rv(a);if(!s&&!(Rm(e)&&Rm(a)))return a;const c=(s?e:Object.keys(e)).length,d=s?a:Object.keys(a),f=d.length,h=s?new Array(f):{};let v=0;for(let g=0;g<f;g++){const y=s?g:d[g],x=e[y],j=a[y];if(x===j){h[y]=x,(s?g<c:qw.call(e,y))&&v++;continue}if(x===null||j===null||typeof x!="object"||typeof j!="object"){h[y]=j;continue}const H=Ax(x,j);h[y]=H,H===x&&v++}return c===f&&v===c?e:h}function ru(e,a){if(!a||Object.keys(e).length!==Object.keys(a).length)return!1;for(const s in e)if(e[s]!==a[s])return!1;return!0}function Rv(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Rm(e){if(!Tv(e))return!1;const a=e.constructor;if(a===void 0)return!0;const s=a.prototype;return!(!Tv(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Tv(e){return Object.prototype.toString.call(e)==="[object Object]"}function Iw(e){return new Promise(a=>{tl.setTimeout(a,e)})}function Tm(e,a,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,a):s.structuralSharing!==!1?Ax(e,a):a}function $w(e,a,s=0){const i=[...e,a];return s&&i.length>s?i.slice(1):i}function Fw(e,a,s=0){const i=[a,...e];return s&&i.length>s?i.slice(0,-1):i}var mh=Symbol();function Cx(e,a){return!e.queryFn&&a?.initialPromise?()=>a.initialPromise:!e.queryFn||e.queryFn===mh?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Ox(e,a){return typeof e=="function"?e(...a):!!e}var Hw=class extends hi{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!rl&&window.addEventListener){const a=()=>e();return window.addEventListener("visibilitychange",a,!1),()=>{window.removeEventListener("visibilitychange",a)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(a=>{a(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},hh=new Hw;function Dm(){let e,a;const s=new Promise((c,d)=>{e=c,a=d});s.status="pending",s.catch(()=>{});function i(c){Object.assign(s,c),delete s.resolve,delete s.reject}return s.resolve=c=>{i({status:"fulfilled",value:c}),e(c)},s.reject=c=>{i({status:"rejected",reason:c}),a(c)},s}var Vw=Lw;function Zw(){let e=[],a=0,s=h=>{h()},i=h=>{h()},c=Vw;const d=h=>{a?e.push(h):c(()=>{s(h)})},f=()=>{const h=e;e=[],h.length&&c(()=>{i(()=>{h.forEach(v=>{s(v)})})})};return{batch:h=>{let v;a++;try{v=h()}finally{a--,a||f()}return v},batchCalls:h=>(...v)=>{d(()=>{h(...v)})},schedule:d,setNotifyFunction:h=>{s=h},setBatchNotifyFunction:h=>{i=h},setScheduler:h=>{c=h}}}var Fn=Zw(),Gw=class extends hi{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!rl&&window.addEventListener){const a=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",a,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#e}},lu=new Gw;function Pw(e){return Math.min(1e3*2**e,3e4)}function Rx(e){return(e??"online")==="online"?lu.isOnline():!0}var zm=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Tx(e){let a=!1,s=0,i;const c=Dm(),d=()=>c.status!=="pending",f=A=>{if(!d()){const R=new zm(A);j(R),e.onCancel?.(R)}},h=()=>{a=!0},v=()=>{a=!1},g=()=>hh.isFocused()&&(e.networkMode==="always"||lu.isOnline())&&e.canRun(),y=()=>Rx(e.networkMode)&&e.canRun(),x=A=>{d()||(i?.(),c.resolve(A))},j=A=>{d()||(i?.(),c.reject(A))},H=()=>new Promise(A=>{i=R=>{(d()||g())&&A(R)},e.onPause?.()}).then(()=>{i=void 0,d()||e.onContinue?.()}),_=()=>{if(d())return;let A;const R=s===0?e.initialPromise:void 0;try{A=R??e.fn()}catch(F){A=Promise.reject(F)}Promise.resolve(A).then(x).catch(F=>{if(d())return;const z=e.retry??(rl?0:3),te=e.retryDelay??Pw,M=typeof te=="function"?te(s,F):te,D=z===!0||typeof z=="number"&&s<z||typeof z=="function"&&z(s,F);if(a||!D){j(F);return}s++,e.onFail?.(s,F),Iw(M).then(()=>g()?void 0:H()).then(()=>{a?j(F):_()})})};return{promise:c,status:()=>c.status,cancel:f,continue:()=>(i?.(),c),cancelRetry:h,continueRetry:v,canStart:y,start:()=>(y()?_():H().then(_),c)}}var Dx=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Om(this.gcTime)&&(this.#e=tl.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(rl?1/0:300*1e3))}clearGcTimeout(){this.#e&&(tl.clearTimeout(this.#e),this.#e=void 0)}},Qw=class extends Dx{#e;#t;#n;#s;#a;#l;#i;constructor(e){super(),this.#i=!1,this.#l=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=zv(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(e){if(this.options={...this.#l,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const a=zv(this.options);a.data!==void 0&&(this.setState(Dv(a.data,a.dataUpdatedAt)),this.#e=a)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,a){const s=Tm(this.state.data,e,this.options);return this.#r({data:s,type:"success",dataUpdatedAt:a?.updatedAt,manual:a?.manual}),s}setState(e,a){this.#r({type:"setState",state:e,setStateOptions:a})}cancel(e){const a=this.#a?.promise;return this.#a?.cancel(e),a?a.then(fa).catch(fa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>es(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===mh||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>wr(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Ex(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(a=>a.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(a=>a.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(a=>a!==e),this.observers.length||(this.#a&&(this.#i?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}async fetch(e,a){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&a?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(v=>v.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(this.#i=!0,s.signal)})},c=()=>{const h=Cx(this.options,a),g=(()=>{const y={client:this.#s,queryKey:this.queryKey,meta:this.meta};return i(y),y})();return this.#i=!1,this.options.persister?this.options.persister(h,g,this):h(g)},f=(()=>{const h={fetchOptions:a,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:c};return i(h),h})();this.options.behavior?.onFetch(f,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==f.fetchOptions?.meta)&&this.#r({type:"fetch",meta:f.fetchOptions?.meta}),this.#a=Tx({initialPromise:a?.initialPromise,fn:f.fetchFn,onCancel:h=>{h instanceof zm&&h.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(h,v)=>{this.#r({type:"failed",failureCount:h,error:v})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0});try{const h=await this.#a.start();if(h===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(h),this.#n.config.onSuccess?.(h,this),this.#n.config.onSettled?.(h,this.state.error,this),h}catch(h){if(h instanceof zm){if(h.silent)return this.#a.promise;if(h.revert){if(this.state.data===void 0)throw h;return this.state.data}}throw this.#r({type:"error",error:h}),this.#n.config.onError?.(h,this),this.#n.config.onSettled?.(this.state.data,h,this),h}finally{this.scheduleGc()}}#r(e){const a=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...zx(s.data,this.options),fetchMeta:e.meta??null};case"success":const i={...s,...Dv(e.data,e.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?i:void 0,i;case"error":const c=e.error;return{...s,error:c,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=a(this.state),Fn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function zx(e,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Rx(a.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Dv(e,a){return{data:e,dataUpdatedAt:a??Date.now(),error:null,isInvalidated:!1,status:"success"}}function zv(e){const a=typeof e.initialData=="function"?e.initialData():e.initialData,s=a!==void 0,i=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:s?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Yw=class extends hi{constructor(e,a){super(),this.options=a,this.#e=e,this.#r=null,this.#i=Dm(),this.bindMethods(),this.setOptions(a)}#e;#t=void 0;#n=void 0;#s=void 0;#a;#l;#i;#r;#p;#f;#m;#c;#u;#o;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),kv(this.#t,this.options)?this.#d():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return km(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return km(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#N(),this.#t.removeObserver(this)}setOptions(e){const a=this.options,s=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof es(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),a._defaulted&&!ru(this.options,a)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&Mv(this.#t,s,this.options,a)&&this.#d(),this.updateResult(),i&&(this.#t!==s||es(this.options.enabled,this.#t)!==es(a.enabled,this.#t)||wr(this.options.staleTime,this.#t)!==wr(a.staleTime,this.#t))&&this.#g();const c=this.#b();i&&(this.#t!==s||es(this.options.enabled,this.#t)!==es(a.enabled,this.#t)||c!==this.#o)&&this.#v(c)}getOptimisticResult(e){const a=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(a,e);return Xw(this,s)&&(this.#s=s,this.#l=this.options,this.#a=this.#t.state),s}getCurrentResult(){return this.#s}trackResult(e,a){return new Proxy(e,{get:(s,i)=>(this.trackProp(i),a?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,i))})}trackProp(e){this.#h.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const a=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,a);return s.fetch().then(()=>this.createResult(s,a))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(e){this.#j();let a=this.#t.fetch(this.options,e);return e?.throwOnError||(a=a.catch(fa)),a}#g(){this.#x();const e=wr(this.options.staleTime,this.#t);if(rl||this.#s.isStale||!Om(e))return;const s=Ex(this.#s.dataUpdatedAt,e)+1;this.#c=tl.setTimeout(()=>{this.#s.isStale||this.updateResult()},s)}#b(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#N(),this.#o=e,!(rl||es(this.options.enabled,this.#t)===!1||!Om(this.#o)||this.#o===0)&&(this.#u=tl.setInterval(()=>{(this.options.refetchIntervalInBackground||hh.isFocused())&&this.#d()},this.#o))}#y(){this.#g(),this.#v(this.#b())}#x(){this.#c&&(tl.clearTimeout(this.#c),this.#c=void 0)}#N(){this.#u&&(tl.clearInterval(this.#u),this.#u=void 0)}createResult(e,a){const s=this.#t,i=this.options,c=this.#s,d=this.#a,f=this.#l,v=e!==s?e.state:this.#n,{state:g}=e;let y={...g},x=!1,j;if(a._optimisticResults){const V=this.hasListeners(),fe=!V&&kv(e,a),Re=V&&Mv(e,s,a,i);(fe||Re)&&(y={...y,...zx(g.data,e.options)}),a._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:H,errorUpdatedAt:_,status:A}=y;j=y.data;let R=!1;if(a.placeholderData!==void 0&&j===void 0&&A==="pending"){let V;c?.isPlaceholderData&&a.placeholderData===f?.placeholderData?(V=c.data,R=!0):V=typeof a.placeholderData=="function"?a.placeholderData(this.#m?.state.data,this.#m):a.placeholderData,V!==void 0&&(A="success",j=Tm(c?.data,V,a),x=!0)}if(a.select&&j!==void 0&&!R)if(c&&j===d?.data&&a.select===this.#p)j=this.#f;else try{this.#p=a.select,j=a.select(j),j=Tm(c?.data,j,a),this.#f=j,this.#r=null}catch(V){this.#r=V}this.#r&&(H=this.#r,j=this.#f,_=Date.now(),A="error");const F=y.fetchStatus==="fetching",z=A==="pending",te=A==="error",M=z&&F,D=j!==void 0,q={status:A,fetchStatus:y.fetchStatus,isPending:z,isSuccess:A==="success",isError:te,isInitialLoading:M,isLoading:M,data:j,dataUpdatedAt:y.dataUpdatedAt,error:H,errorUpdatedAt:_,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>v.dataUpdateCount||y.errorUpdateCount>v.errorUpdateCount,isFetching:F,isRefetching:F&&!z,isLoadingError:te&&!D,isPaused:y.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:te&&D,isStale:ph(e,a),refetch:this.refetch,promise:this.#i,isEnabled:es(a.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const V=Ce=>{q.status==="error"?Ce.reject(q.error):q.data!==void 0&&Ce.resolve(q.data)},fe=()=>{const Ce=this.#i=q.promise=Dm();V(Ce)},Re=this.#i;switch(Re.status){case"pending":e.queryHash===s.queryHash&&V(Re);break;case"fulfilled":(q.status==="error"||q.data!==Re.value)&&fe();break;case"rejected":(q.status!=="error"||q.error!==Re.reason)&&fe();break}}return q}updateResult(){const e=this.#s,a=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#l=this.options,this.#a.data!==void 0&&(this.#m=this.#t),ru(a,e))return;this.#s=a;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,c=typeof i=="function"?i():i;if(c==="all"||!c&&!this.#h.size)return!0;const d=new Set(c??this.#h);return this.options.throwOnError&&d.add("error"),Object.keys(this.#s).some(f=>{const h=f;return this.#s[h]!==e[h]&&d.has(h)})};this.#S({listeners:s()})}#j(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const a=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(a?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#S(e){Fn.batch(()=>{e.listeners&&this.listeners.forEach(a=>{a(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Kw(e,a){return es(a.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&a.retryOnMount===!1)}function kv(e,a){return Kw(e,a)||e.state.data!==void 0&&km(e,a,a.refetchOnMount)}function km(e,a,s){if(es(a.enabled,e)!==!1&&wr(a.staleTime,e)!=="static"){const i=typeof s=="function"?s(e):s;return i==="always"||i!==!1&&ph(e,a)}return!1}function Mv(e,a,s,i){return(e!==a||es(i.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&ph(e,s)}function ph(e,a){return es(a.enabled,e)!==!1&&e.isStaleByTime(wr(a.staleTime,e))}function Xw(e,a){return!ru(e.getCurrentResult(),a)}function Uv(e){return{onFetch:(a,s)=>{const i=a.options,c=a.fetchOptions?.meta?.fetchMore?.direction,d=a.state.data?.pages||[],f=a.state.data?.pageParams||[];let h={pages:[],pageParams:[]},v=0;const g=async()=>{let y=!1;const x=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(a.signal.aborted?y=!0:a.signal.addEventListener("abort",()=>{y=!0}),a.signal)})},j=Cx(a.options,a.fetchOptions),H=async(_,A,R)=>{if(y)return Promise.reject();if(A==null&&_.pages.length)return Promise.resolve(_);const z=(()=>{const K={client:a.client,queryKey:a.queryKey,pageParam:A,direction:R?"backward":"forward",meta:a.options.meta};return x(K),K})(),te=await j(z),{maxPages:M}=a.options,D=R?Fw:$w;return{pages:D(_.pages,te,M),pageParams:D(_.pageParams,A,M)}};if(c&&d.length){const _=c==="backward",A=_?Jw:Lv,R={pages:d,pageParams:f},F=A(i,R);h=await H(R,F,_)}else{const _=e??d.length;do{const A=v===0?f[0]??i.initialPageParam:Lv(i,h);if(v>0&&A==null)break;h=await H(h,A),v++}while(v<_)}return h};a.options.persister?a.fetchFn=()=>a.options.persister?.(g,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},s):a.fetchFn=g}}}function Lv(e,{pages:a,pageParams:s}){const i=a.length-1;return a.length>0?e.getNextPageParam(a[i],a,s[i],s):void 0}function Jw(e,{pages:a,pageParams:s}){return a.length>0?e.getPreviousPageParam?.(a[0],a,s[0],s):void 0}var Ww=class extends Dx{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||kx(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(a=>a!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const a=()=>{this.#a({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=Tx({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(d,f)=>{this.#a({type:"failed",failureCount:d,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:a,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",c=!this.#s.canStart();try{if(i)a();else{this.#a({type:"pending",variables:e,isPaused:c}),await this.#n.config.onMutate?.(e,this,s);const f=await this.options.onMutate?.(e,s);f!==this.state.context&&this.#a({type:"pending",context:f,variables:e,isPaused:c})}const d=await this.#s.start();return await this.#n.config.onSuccess?.(d,e,this.state.context,this,s),await this.options.onSuccess?.(d,e,this.state.context,s),await this.#n.config.onSettled?.(d,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(d,null,e,this.state.context,s),this.#a({type:"success",data:d}),d}catch(d){try{throw await this.#n.config.onError?.(d,e,this.state.context,this,s),await this.options.onError?.(d,e,this.state.context,s),await this.#n.config.onSettled?.(void 0,d,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,d,e,this.state.context,s),d}finally{this.#a({type:"error",error:d})}}finally{this.#n.runNext(this)}}#a(e){const a=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=a(this.state),Fn.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function kx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var e_=class extends hi{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,a,s){const i=new Ww({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(a),state:s});return this.add(i),i}add(e){this.#e.add(e);const a=Vc(e);if(typeof a=="string"){const s=this.#t.get(a);s?s.push(e):this.#t.set(a,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const a=Vc(e);if(typeof a=="string"){const s=this.#t.get(a);if(s)if(s.length>1){const i=s.indexOf(e);i!==-1&&s.splice(i,1)}else s[0]===e&&this.#t.delete(a)}}this.notify({type:"removed",mutation:e})}canRun(e){const a=Vc(e);if(typeof a=="string"){const i=this.#t.get(a)?.find(c=>c.state.status==="pending");return!i||i===e}else return!0}runNext(e){const a=Vc(e);return typeof a=="string"?this.#t.get(a)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Fn.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const a={exact:!0,...e};return this.getAll().find(s=>Ov(a,s))}findAll(e={}){return this.getAll().filter(a=>Ov(e,a))}notify(e){Fn.batch(()=>{this.listeners.forEach(a=>{a(e)})})}resumePausedMutations(){const e=this.getAll().filter(a=>a.state.isPaused);return Fn.batch(()=>Promise.all(e.map(a=>a.continue().catch(fa))))}};function Vc(e){return e.options.scope?.id}var t_=class extends hi{#e;#t=void 0;#n;#s;constructor(a,s){super(),this.#e=a,this.setOptions(s),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){const s=this.options;this.options=this.#e.defaultMutationOptions(a),ru(this.options,s)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),s?.mutationKey&&this.options.mutationKey&&ll(s.mutationKey)!==ll(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(a){this.#a(),this.#l(a)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#a(),this.#l()}mutate(a,s){return this.#s=s,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(a)}#a(){const a=this.#n?.state??kx();this.#t={...a,isPending:a.status==="pending",isSuccess:a.status==="success",isError:a.status==="error",isIdle:a.status==="idle",mutate:this.mutate,reset:this.reset}}#l(a){Fn.batch(()=>{if(this.#s&&this.hasListeners()){const s=this.#t.variables,i=this.#t.context,c={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};a?.type==="success"?(this.#s.onSuccess?.(a.data,s,i,c),this.#s.onSettled?.(a.data,null,s,i,c)):a?.type==="error"&&(this.#s.onError?.(a.error,s,i,c),this.#s.onSettled?.(void 0,a.error,s,i,c))}this.listeners.forEach(s=>{s(this.#t)})})}},n_=class extends hi{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,a,s){const i=a.queryKey,c=a.queryHash??fh(i,a);let d=this.get(c);return d||(d=new Qw({client:e,queryKey:i,queryHash:c,options:e.defaultQueryOptions(a),state:s,defaultOptions:e.getQueryDefaults(i)}),this.add(d)),d}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const a=this.#e.get(e.queryHash);a&&(e.destroy(),a===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Fn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const a={exact:!0,...e};return this.getAll().find(s=>Cv(a,s))}findAll(e={}){const a=this.getAll();return Object.keys(e).length>0?a.filter(s=>Cv(e,s)):a}notify(e){Fn.batch(()=>{this.listeners.forEach(a=>{a(e)})})}onFocus(){Fn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Fn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},a_=class{#e;#t;#n;#s;#a;#l;#i;#r;constructor(e={}){this.#e=e.queryCache||new n_,this.#t=e.mutationCache||new e_,this.#n=e.defaultOptions||{},this.#s=new Map,this.#a=new Map,this.#l=0}mount(){this.#l++,this.#l===1&&(this.#i=hh.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#r=lu.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#l--,this.#l===0&&(this.#i?.(),this.#i=void 0,this.#r?.(),this.#r=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const a=this.defaultQueryOptions({queryKey:e});return this.#e.get(a.queryHash)?.state.data}ensureQueryData(e){const a=this.defaultQueryOptions(e),s=this.#e.build(this,a),i=s.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(wr(a.staleTime,s))&&this.prefetchQuery(a),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:a,state:s})=>{const i=s.data;return[a,i]})}setQueryData(e,a,s){const i=this.defaultQueryOptions({queryKey:e}),d=this.#e.get(i.queryHash)?.state.data,f=Bw(a,d);if(f!==void 0)return this.#e.build(this,i).setData(f,{...s,manual:!0})}setQueriesData(e,a,s){return Fn.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,a,s)]))}getQueryState(e){const a=this.defaultQueryOptions({queryKey:e});return this.#e.get(a.queryHash)?.state}removeQueries(e){const a=this.#e;Fn.batch(()=>{a.findAll(e).forEach(s=>{a.remove(s)})})}resetQueries(e,a){const s=this.#e;return Fn.batch(()=>(s.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},a)))}cancelQueries(e,a={}){const s={revert:!0,...a},i=Fn.batch(()=>this.#e.findAll(e).map(c=>c.cancel(s)));return Promise.all(i).then(fa).catch(fa)}invalidateQueries(e,a={}){return Fn.batch(()=>(this.#e.findAll(e).forEach(s=>{s.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},a)))}refetchQueries(e,a={}){const s={...a,cancelRefetch:a.cancelRefetch??!0},i=Fn.batch(()=>this.#e.findAll(e).filter(c=>!c.isDisabled()&&!c.isStatic()).map(c=>{let d=c.fetch(void 0,s);return s.throwOnError||(d=d.catch(fa)),c.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(i).then(fa)}fetchQuery(e){const a=this.defaultQueryOptions(e);a.retry===void 0&&(a.retry=!1);const s=this.#e.build(this,a);return s.isStaleByTime(wr(a.staleTime,s))?s.fetch(a):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(fa).catch(fa)}fetchInfiniteQuery(e){return e.behavior=Uv(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(fa).catch(fa)}ensureInfiniteQueryData(e){return e.behavior=Uv(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return lu.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,a){this.#s.set(ll(e),{queryKey:e,defaultOptions:a})}getQueryDefaults(e){const a=[...this.#s.values()],s={};return a.forEach(i=>{No(e,i.queryKey)&&Object.assign(s,i.defaultOptions)}),s}setMutationDefaults(e,a){this.#a.set(ll(e),{mutationKey:e,defaultOptions:a})}getMutationDefaults(e){const a=[...this.#a.values()],s={};return a.forEach(i=>{No(e,i.mutationKey)&&Object.assign(s,i.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const a={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return a.queryHash||(a.queryHash=fh(a.queryKey,a)),a.refetchOnReconnect===void 0&&(a.refetchOnReconnect=a.networkMode!=="always"),a.throwOnError===void 0&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===mh&&(a.enabled=!1),a}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Mx=p.createContext(void 0),gh=e=>{const a=p.useContext(Mx);if(!a)throw new Error("No QueryClient set, use QueryClientProvider to set one");return a},s_=({client:e,children:a})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),l.jsx(Mx.Provider,{value:e,children:a})),Ux=p.createContext(!1),r_=()=>p.useContext(Ux);Ux.Provider;function l_(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var i_=p.createContext(l_()),o_=()=>p.useContext(i_),c_=(e,a)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(a.isReset()||(e.retryOnMount=!1))},u_=e=>{p.useEffect(()=>{e.clearReset()},[e])},d_=({result:e,errorResetBoundary:a,throwOnError:s,query:i,suspense:c})=>e.isError&&!a.isReset()&&!e.isFetching&&i&&(c&&e.data===void 0||Ox(s,[e.error,i])),f_=e=>{if(e.suspense){const s=c=>c==="static"?c:Math.max(c??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...c)=>s(i(...c)):s(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},m_=(e,a)=>e.isLoading&&e.isFetching&&!a,h_=(e,a)=>e?.suspense&&a.isPending,Bv=(e,a,s)=>a.fetchOptimistic(e).catch(()=>{s.clearReset()});function p_(e,a,s){const i=r_(),c=o_(),d=gh(),f=d.defaultQueryOptions(e);d.getDefaultOptions().queries?._experimental_beforeQuery?.(f),f._optimisticResults=i?"isRestoring":"optimistic",f_(f),c_(f,c),u_(c);const h=!d.getQueryCache().get(f.queryHash),[v]=p.useState(()=>new a(d,f)),g=v.getOptimisticResult(f),y=!i&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(x=>{const j=y?v.subscribe(Fn.batchCalls(x)):fa;return v.updateResult(),j},[v,y]),()=>v.getCurrentResult(),()=>v.getCurrentResult()),p.useEffect(()=>{v.setOptions(f)},[f,v]),h_(f,g))throw Bv(f,v,c);if(d_({result:g,errorResetBoundary:c,throwOnError:f.throwOnError,query:d.getQueryCache().get(f.queryHash),suspense:f.suspense}))throw g.error;return d.getDefaultOptions().queries?._experimental_afterQuery?.(f,g),f.experimental_prefetchInRender&&!rl&&m_(g,i)&&(h?Bv(f,v,c):d.getQueryCache().get(f.queryHash)?.promise)?.catch(fa).finally(()=>{v.updateResult()}),f.notifyOnChangeProps?g:v.trackResult(g)}function il(e,a){return p_(e,Yw)}function g_(e,a){const s=gh(),[i]=p.useState(()=>new t_(s,e));p.useEffect(()=>{i.setOptions(e)},[i,e]);const c=p.useSyncExternalStore(p.useCallback(f=>i.subscribe(Fn.batchCalls(f)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),d=p.useCallback((f,h)=>{i.mutate(f,h).catch(fa)},[i]);if(c.error&&Ox(i.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:d,mutateAsync:c.mutate}}var Oo=e=>e.type==="checkbox",nl=e=>e instanceof Date,Ea=e=>e==null;const Lx=e=>typeof e=="object";var zn=e=>!Ea(e)&&!Array.isArray(e)&&Lx(e)&&!nl(e),b_=e=>zn(e)&&e.target?Oo(e.target)?e.target.checked:e.target.value:e,v_=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,y_=(e,a)=>e.has(v_(a)),x_=e=>{const a=e.constructor&&e.constructor.prototype;return zn(a)&&a.hasOwnProperty("isPrototypeOf")},bh=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function rn(e){let a;const s=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)a=new Date(e);else if(!(bh&&(e instanceof Blob||i))&&(s||zn(e)))if(a=s?[]:Object.create(Object.getPrototypeOf(e)),!s&&!x_(e))a=e;else for(const c in e)e.hasOwnProperty(c)&&(a[c]=rn(e[c]));else return e;return a}var ju=e=>/^\w*$/.test(e),nn=e=>e===void 0,Su=e=>Array.isArray(e)?e.filter(Boolean):[],vh=e=>Su(e.replace(/["|']|\]/g,"").split(/\.|\[/)),He=(e,a,s)=>{if(!a||!zn(e))return s;const i=(ju(a)?[a]:vh(a)).reduce((c,d)=>Ea(c)?c:c[d],e);return nn(i)||i===e?nn(e[a])?s:e[a]:i},Cs=e=>typeof e=="boolean",Ft=(e,a,s)=>{let i=-1;const c=ju(a)?[a]:vh(a),d=c.length,f=d-1;for(;++i<d;){const h=c[i];let v=s;if(i!==f){const g=e[h];v=zn(g)||Array.isArray(g)?g:isNaN(+c[i+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;e[h]=v,e=e[h]}};const qv={BLUR:"blur",FOCUS_OUT:"focusout"},ts={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Gs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Bx=pt.createContext(null);Bx.displayName="HookFormContext";const qx=()=>pt.useContext(Bx);var N_=(e,a,s,i=!0)=>{const c={defaultValues:a._defaultValues};for(const d in e)Object.defineProperty(c,d,{get:()=>{const f=d;return a._proxyFormState[f]!==ts.all&&(a._proxyFormState[f]=!i||ts.all),e[f]}});return c};const yh=typeof window<"u"?pt.useLayoutEffect:pt.useEffect;var qa=e=>typeof e=="string",Mm=(e,a,s,i,c)=>qa(e)?(i&&a.watch.add(e),He(s,e,c)):Array.isArray(e)?e.map(d=>(i&&a.watch.add(d),He(s,d))):(i&&(a.watchAll=!0),s),Um=e=>Ea(e)||!Lx(e);function ms(e,a,s=new WeakSet){if(Um(e)||Um(a))return e===a;if(nl(e)&&nl(a))return e.getTime()===a.getTime();const i=Object.keys(e),c=Object.keys(a);if(i.length!==c.length)return!1;if(s.has(e)||s.has(a))return!0;s.add(e),s.add(a);for(const d of i){const f=e[d];if(!c.includes(d))return!1;if(d!=="ref"){const h=a[d];if(nl(f)&&nl(h)||zn(f)&&zn(h)||Array.isArray(f)&&Array.isArray(h)?!ms(f,h,s):f!==h)return!1}}return!0}function co(e){const a=qx(),{control:s=a.control,name:i,defaultValue:c,disabled:d,exact:f,compute:h}=e||{},v=pt.useRef(c),g=pt.useRef(h),y=pt.useRef(void 0),x=pt.useRef(s),j=pt.useRef(i);g.current=h;const[H,_]=pt.useState(()=>{const M=s._getWatch(i,v.current);return g.current?g.current(M):M}),A=pt.useCallback(M=>{const D=Mm(i,s._names,M||s._formValues,!1,v.current);return g.current?g.current(D):D},[s._formValues,s._names,i]),R=pt.useCallback(M=>{if(!d){const D=Mm(i,s._names,M||s._formValues,!1,v.current);if(g.current){const K=g.current(D);ms(K,y.current)||(_(K),y.current=K)}else _(D)}},[s._formValues,s._names,d,i]);yh(()=>((x.current!==s||!ms(j.current,i))&&(x.current=s,j.current=i,R()),s._subscribe({name:i,formState:{values:!0},exact:f,callback:M=>{R(M.values)}})),[s,f,i,R]),pt.useEffect(()=>s._removeUnmounted());const F=x.current!==s,z=j.current,te=pt.useMemo(()=>{if(d)return null;const M=!F&&!ms(z,i);return F||M?A():null},[d,F,i,z,A]);return te!==null?te:H}var xh=(e,a,s,i,c)=>a?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[i]:c||!0}}:{},Aa=e=>Array.isArray(e)?e:[e],Iv=()=>{let e=[];return{get observers(){return e},next:c=>{for(const d of e)d.next&&d.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(d=>d!==c)}}),unsubscribe:()=>{e=[]}}};function Ix(e,a){const s={};for(const i in e)if(e.hasOwnProperty(i)){const c=e[i],d=a[i];if(c&&zn(c)&&d){const f=Ix(c,d);zn(f)&&(s[i]=f)}else e[i]&&(s[i]=d)}return s}var ia=e=>zn(e)&&!Object.keys(e).length,Nh=e=>e.type==="file",hs=e=>typeof e=="function",iu=e=>{if(!bh)return!1;const a=e?e.ownerDocument:0;return e instanceof(a&&a.defaultView?a.defaultView.HTMLElement:HTMLElement)},$x=e=>e.type==="select-multiple",jh=e=>e.type==="radio",j_=e=>jh(e)||Oo(e),Kf=e=>iu(e)&&e.isConnected;function S_(e,a){const s=a.slice(0,-1).length;let i=0;for(;i<s;)e=nn(e)?i++:e[a[i++]];return e}function w_(e){for(const a in e)if(e.hasOwnProperty(a)&&!nn(e[a]))return!1;return!0}function _n(e,a){const s=Array.isArray(a)?a:ju(a)?[a]:vh(a),i=s.length===1?e:S_(e,s),c=s.length-1,d=s[c];return i&&delete i[d],c!==0&&(zn(i)&&ia(i)||Array.isArray(i)&&w_(i))&&_n(e,s.slice(0,-1)),e}var __=e=>{for(const a in e)if(hs(e[a]))return!0;return!1};function Fx(e){return Array.isArray(e)||zn(e)&&!__(e)}function Lm(e,a={}){for(const s in e)Fx(e[s])?(a[s]=Array.isArray(e[s])?[]:{},Lm(e[s],a[s])):nn(e[s])||(a[s]=!0);return a}function ai(e,a,s){s||(s=Lm(a));for(const i in e)Fx(e[i])?nn(a)||Um(s[i])?s[i]=Lm(e[i],Array.isArray(e[i])?[]:{}):ai(e[i],Ea(a)?{}:a[i],s[i]):s[i]=!ms(e[i],a[i]);return s}const $v={value:!1,isValid:!1},Fv={value:!0,isValid:!0};var Hx=e=>{if(Array.isArray(e)){if(e.length>1){const a=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:a,isValid:!!a.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!nn(e[0].attributes.value)?nn(e[0].value)||e[0].value===""?Fv:{value:e[0].value,isValid:!0}:Fv:$v}return $v},Vx=(e,{valueAsNumber:a,valueAsDate:s,setValueAs:i})=>nn(e)?e:a?e===""?NaN:e&&+e:s&&qa(e)?new Date(e):i?i(e):e;const Hv={isValid:!1,value:null};var Zx=e=>Array.isArray(e)?e.reduce((a,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:a,Hv):Hv;function Vv(e){const a=e.ref;return Nh(a)?a.files:jh(a)?Zx(e.refs).value:$x(a)?[...a.selectedOptions].map(({value:s})=>s):Oo(a)?Hx(e.refs).value:Vx(nn(a.value)?e.ref.value:a.value,e)}var E_=(e,a,s,i)=>{const c={};for(const d of e){const f=He(a,d);f&&Ft(c,d,f._f)}return{criteriaMode:s,names:[...e],fields:c,shouldUseNativeValidation:i}},ou=e=>e instanceof RegExp,uo=e=>nn(e)?e:ou(e)?e.source:zn(e)?ou(e.value)?e.value.source:e.value:e,si=e=>({isOnSubmit:!e||e===ts.onSubmit,isOnBlur:e===ts.onBlur,isOnChange:e===ts.onChange,isOnAll:e===ts.all,isOnTouch:e===ts.onTouched});const Zv="AsyncFunction";var A_=e=>!!e&&!!e.validate&&!!(hs(e.validate)&&e.validate.constructor.name===Zv||zn(e.validate)&&Object.values(e.validate).find(a=>a.constructor.name===Zv)),C_=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Bm=(e,a,s)=>!s&&(a.watchAll||a.watch.has(e)||[...a.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const li=(e,a,s,i)=>{for(const c of s||Object.keys(e)){const d=He(e,c);if(d){const{_f:f,...h}=d;if(f){if(f.refs&&f.refs[0]&&a(f.refs[0],c)&&!i)return!0;if(f.ref&&a(f.ref,f.name)&&!i)return!0;if(li(h,a))break}else if(zn(h)&&li(h,a))break}}};function Gv(e,a,s){const i=He(e,s);if(i||ju(s))return{error:i,name:s};const c=s.split(".");for(;c.length;){const d=c.join("."),f=He(a,d),h=He(e,d);if(f&&!Array.isArray(f)&&s!==d)return{name:s};if(h&&h.type)return{name:d,error:h};if(h&&h.root&&h.root.type)return{name:`${d}.root`,error:h.root};c.pop()}return{name:s}}var O_=(e,a,s,i)=>{s(e);const{name:c,...d}=e;return ia(d)||Object.keys(d).length>=Object.keys(a).length||Object.keys(d).find(f=>a[f]===(!i||ts.all))},R_=(e,a,s)=>!e||!a||e===a||Aa(e).some(i=>i&&(s?i===a:i.startsWith(a)||a.startsWith(i))),T_=(e,a,s,i,c)=>c.isOnAll?!1:!s&&c.isOnTouch?!(a||e):(s?i.isOnBlur:c.isOnBlur)?!e:(s?i.isOnChange:c.isOnChange)?e:!0,D_=(e,a)=>!Su(He(e,a)).length&&_n(e,a),Gx=(e,a,s)=>{const i=Aa(He(e,s));return Ft(i,"root",a[s]),Ft(e,s,i),e};function Pv(e,a,s="validate"){if(qa(e)||Array.isArray(e)&&e.every(qa)||Cs(e)&&!e)return{type:s,message:qa(e)?e:"",ref:a}}var Xl=e=>zn(e)&&!ou(e)?e:{value:e,message:""},qm=async(e,a,s,i,c,d)=>{const{ref:f,refs:h,required:v,maxLength:g,minLength:y,min:x,max:j,pattern:H,validate:_,name:A,valueAsNumber:R,mount:F}=e._f,z=He(s,A);if(!F||a.has(A))return{};const te=h?h[0]:f,M=ve=>{c&&te.reportValidity&&(te.setCustomValidity(Cs(ve)?"":ve||""),te.reportValidity())},D={},K=jh(f),q=Oo(f),V=K||q,fe=(R||Nh(f))&&nn(f.value)&&nn(z)||iu(f)&&f.value===""||z===""||Array.isArray(z)&&!z.length,Re=xh.bind(null,A,i,D),Ce=(ve,_e,ke,De=Gs.maxLength,U=Gs.minLength)=>{const Z=ve?_e:ke;D[A]={type:ve?De:U,message:Z,ref:f,...Re(ve?De:U,Z)}};if(d?!Array.isArray(z)||!z.length:v&&(!V&&(fe||Ea(z))||Cs(z)&&!z||q&&!Hx(h).isValid||K&&!Zx(h).isValid)){const{value:ve,message:_e}=qa(v)?{value:!!v,message:v}:Xl(v);if(ve&&(D[A]={type:Gs.required,message:_e,ref:te,...Re(Gs.required,_e)},!i))return M(_e),D}if(!fe&&(!Ea(x)||!Ea(j))){let ve,_e;const ke=Xl(j),De=Xl(x);if(!Ea(z)&&!isNaN(z)){const U=f.valueAsNumber||z&&+z;Ea(ke.value)||(ve=U>ke.value),Ea(De.value)||(_e=U<De.value)}else{const U=f.valueAsDate||new Date(z),Z=me=>new Date(new Date().toDateString()+" "+me),ae=f.type=="time",he=f.type=="week";qa(ke.value)&&z&&(ve=ae?Z(z)>Z(ke.value):he?z>ke.value:U>new Date(ke.value)),qa(De.value)&&z&&(_e=ae?Z(z)<Z(De.value):he?z<De.value:U<new Date(De.value))}if((ve||_e)&&(Ce(!!ve,ke.message,De.message,Gs.max,Gs.min),!i))return M(D[A].message),D}if((g||y)&&!fe&&(qa(z)||d&&Array.isArray(z))){const ve=Xl(g),_e=Xl(y),ke=!Ea(ve.value)&&z.length>+ve.value,De=!Ea(_e.value)&&z.length<+_e.value;if((ke||De)&&(Ce(ke,ve.message,_e.message),!i))return M(D[A].message),D}if(H&&!fe&&qa(z)){const{value:ve,message:_e}=Xl(H);if(ou(ve)&&!z.match(ve)&&(D[A]={type:Gs.pattern,message:_e,ref:f,...Re(Gs.pattern,_e)},!i))return M(_e),D}if(_){if(hs(_)){const ve=await _(z,s),_e=Pv(ve,te);if(_e&&(D[A]={..._e,...Re(Gs.validate,_e.message)},!i))return M(_e.message),D}else if(zn(_)){let ve={};for(const _e in _){if(!ia(ve)&&!i)break;const ke=Pv(await _[_e](z,s),te,_e);ke&&(ve={...ke,...Re(_e,ke.message)},M(ke.message),i&&(D[A]=ve))}if(!ia(ve)&&(D[A]={ref:te,...ve},!i))return D}}return M(!0),D};const z_={mode:ts.onSubmit,reValidateMode:ts.onChange,shouldFocusError:!0};function k_(e={}){let a={...z_,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:hs(a.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1},i={},c=zn(a.defaultValues)||zn(a.values)?rn(a.defaultValues||a.values)||{}:{},d=a.shouldUnregister?{}:rn(c),f={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},v,g=0;const y={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let x={...y};const j={array:Iv(),state:Iv()},H=a.criteriaMode===ts.all,_=O=>T=>{clearTimeout(g),g=setTimeout(O,T)},A=async O=>{if(!a.disabled&&(y.isValid||x.isValid||O)){const T=a.resolver?ia((await q()).errors):await fe(i,!0);T!==s.isValid&&j.state.next({isValid:T})}},R=(O,T)=>{!a.disabled&&(y.isValidating||y.validatingFields||x.isValidating||x.validatingFields)&&((O||Array.from(h.mount)).forEach(S=>{S&&(T?Ft(s.validatingFields,S,T):_n(s.validatingFields,S))}),j.state.next({validatingFields:s.validatingFields,isValidating:!ia(s.validatingFields)}))},F=(O,T=[],S,L,$=!0,J=!0)=>{if(L&&S&&!a.disabled){if(f.action=!0,J&&Array.isArray(He(i,O))){const be=S(He(i,O),L.argA,L.argB);$&&Ft(i,O,be)}if(J&&Array.isArray(He(s.errors,O))){const be=S(He(s.errors,O),L.argA,L.argB);$&&Ft(s.errors,O,be),D_(s.errors,O)}if((y.touchedFields||x.touchedFields)&&J&&Array.isArray(He(s.touchedFields,O))){const be=S(He(s.touchedFields,O),L.argA,L.argB);$&&Ft(s.touchedFields,O,be)}(y.dirtyFields||x.dirtyFields)&&(s.dirtyFields=ai(c,d)),j.state.next({name:O,isDirty:Ce(O,T),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Ft(d,O,T)},z=(O,T)=>{Ft(s.errors,O,T),j.state.next({errors:s.errors})},te=O=>{s.errors=O,j.state.next({errors:s.errors,isValid:!1})},M=(O,T,S,L)=>{const $=He(i,O);if($){const J=He(d,O,nn(S)?He(c,O):S);nn(J)||L&&L.defaultChecked||T?Ft(d,O,T?J:Vv($._f)):ke(O,J),f.mount&&A()}},D=(O,T,S,L,$)=>{let J=!1,be=!1;const Ee={name:O};if(!a.disabled){if(!S||L){(y.isDirty||x.isDirty)&&(be=s.isDirty,s.isDirty=Ee.isDirty=Ce(),J=be!==Ee.isDirty);const G=ms(He(c,O),T);be=!!He(s.dirtyFields,O),G?_n(s.dirtyFields,O):Ft(s.dirtyFields,O,!0),Ee.dirtyFields=s.dirtyFields,J=J||(y.dirtyFields||x.dirtyFields)&&be!==!G}if(S){const G=He(s.touchedFields,O);G||(Ft(s.touchedFields,O,S),Ee.touchedFields=s.touchedFields,J=J||(y.touchedFields||x.touchedFields)&&G!==S)}J&&$&&j.state.next(Ee)}return J?Ee:{}},K=(O,T,S,L)=>{const $=He(s.errors,O),J=(y.isValid||x.isValid)&&Cs(T)&&s.isValid!==T;if(a.delayError&&S?(v=_(()=>z(O,S)),v(a.delayError)):(clearTimeout(g),v=null,S?Ft(s.errors,O,S):_n(s.errors,O)),(S?!ms($,S):$)||!ia(L)||J){const be={...L,...J&&Cs(T)?{isValid:T}:{},errors:s.errors,name:O};s={...s,...be},j.state.next(be)}},q=async O=>{R(O,!0);const T=await a.resolver(d,a.context,E_(O||h.mount,i,a.criteriaMode,a.shouldUseNativeValidation));return R(O),T},V=async O=>{const{errors:T}=await q(O);if(O)for(const S of O){const L=He(T,S);L?Ft(s.errors,S,L):_n(s.errors,S)}else s.errors=T;return T},fe=async(O,T,S={valid:!0})=>{for(const L in O){const $=O[L];if($){const{_f:J,...be}=$;if(J){const Ee=h.array.has(J.name),G=$._f&&A_($._f);G&&y.validatingFields&&R([J.name],!0);const Me=await qm($,h.disabled,d,H,a.shouldUseNativeValidation&&!T,Ee);if(G&&y.validatingFields&&R([J.name]),Me[J.name]&&(S.valid=!1,T))break;!T&&(He(Me,J.name)?Ee?Gx(s.errors,Me,J.name):Ft(s.errors,J.name,Me[J.name]):_n(s.errors,J.name))}!ia(be)&&await fe(be,T,S)}}return S.valid},Re=()=>{for(const O of h.unMount){const T=He(i,O);T&&(T._f.refs?T._f.refs.every(S=>!Kf(S)):!Kf(T._f.ref))&&Le(O)}h.unMount=new Set},Ce=(O,T)=>!a.disabled&&(O&&T&&Ft(d,O,T),!ms(me(),c)),ve=(O,T,S)=>Mm(O,h,{...f.mount?d:nn(T)?c:qa(O)?{[O]:T}:T},S,T),_e=O=>Su(He(f.mount?d:c,O,a.shouldUnregister?He(c,O,[]):[])),ke=(O,T,S={})=>{const L=He(i,O);let $=T;if(L){const J=L._f;J&&(!J.disabled&&Ft(d,O,Vx(T,J)),$=iu(J.ref)&&Ea(T)?"":T,$x(J.ref)?[...J.ref.options].forEach(be=>be.selected=$.includes(be.value)):J.refs?Oo(J.ref)?J.refs.forEach(be=>{(!be.defaultChecked||!be.disabled)&&(Array.isArray($)?be.checked=!!$.find(Ee=>Ee===be.value):be.checked=$===be.value||!!$)}):J.refs.forEach(be=>be.checked=be.value===$):Nh(J.ref)?J.ref.value="":(J.ref.value=$,J.ref.type||j.state.next({name:O,values:rn(d)})))}(S.shouldDirty||S.shouldTouch)&&D(O,$,S.shouldTouch,S.shouldDirty,!0),S.shouldValidate&&he(O)},De=(O,T,S)=>{for(const L in T){if(!T.hasOwnProperty(L))return;const $=T[L],J=O+"."+L,be=He(i,J);(h.array.has(O)||zn($)||be&&!be._f)&&!nl($)?De(J,$,S):ke(J,$,S)}},U=(O,T,S={})=>{const L=He(i,O),$=h.array.has(O),J=rn(T);Ft(d,O,J),$?(j.array.next({name:O,values:rn(d)}),(y.isDirty||y.dirtyFields||x.isDirty||x.dirtyFields)&&S.shouldDirty&&j.state.next({name:O,dirtyFields:ai(c,d),isDirty:Ce(O,J)})):L&&!L._f&&!Ea(J)?De(O,J,S):ke(O,J,S),Bm(O,h)&&j.state.next({...s,name:O}),j.state.next({name:f.mount?O:void 0,values:rn(d)})},Z=async O=>{f.mount=!0;const T=O.target;let S=T.name,L=!0;const $=He(i,S),J=G=>{L=Number.isNaN(G)||nl(G)&&isNaN(G.getTime())||ms(G,He(d,S,G))},be=si(a.mode),Ee=si(a.reValidateMode);if($){let G,Me;const $e=T.type?Vv($._f):b_(O),nt=O.type===qv.BLUR||O.type===qv.FOCUS_OUT,zt=!C_($._f)&&!a.resolver&&!He(s.errors,S)&&!$._f.deps||T_(nt,He(s.touchedFields,S),s.isSubmitted,Ee,be),Ne=Bm(S,h,nt);Ft(d,S,$e),nt?(!T||!T.readOnly)&&($._f.onBlur&&$._f.onBlur(O),v&&v(0)):$._f.onChange&&$._f.onChange(O);const Ie=D(S,$e,nt),Kt=!ia(Ie)||Ne;if(!nt&&j.state.next({name:S,type:O.type,values:rn(d)}),zt)return(y.isValid||x.isValid)&&(a.mode==="onBlur"?nt&&A():nt||A()),Kt&&j.state.next({name:S,...Ne?{}:Ie});if(!nt&&Ne&&j.state.next({...s}),a.resolver){const{errors:Et}=await q([S]);if(J($e),L){const Xt=Gv(s.errors,i,S),cn=Gv(Et,i,Xt.name||S);G=cn.error,S=cn.name,Me=ia(Et)}}else R([S],!0),G=(await qm($,h.disabled,d,H,a.shouldUseNativeValidation))[S],R([S]),J($e),L&&(G?Me=!1:(y.isValid||x.isValid)&&(Me=await fe(i,!0)));L&&($._f.deps&&(!Array.isArray($._f.deps)||$._f.deps.length>0)&&he($._f.deps),K(S,Me,G,Ie))}},ae=(O,T)=>{if(He(s.errors,T)&&O.focus)return O.focus(),1},he=async(O,T={})=>{let S,L;const $=Aa(O);if(a.resolver){const J=await V(nn(O)?O:$);S=ia(J),L=O?!$.some(be=>He(J,be)):S}else O?(L=(await Promise.all($.map(async J=>{const be=He(i,J);return await fe(be&&be._f?{[J]:be}:be)}))).every(Boolean),!(!L&&!s.isValid)&&A()):L=S=await fe(i);return j.state.next({...!qa(O)||(y.isValid||x.isValid)&&S!==s.isValid?{}:{name:O},...a.resolver||!O?{isValid:S}:{},errors:s.errors}),T.shouldFocus&&!L&&li(i,ae,O?$:h.mount),L},me=(O,T)=>{let S={...f.mount?d:c};return T&&(S=Ix(T.dirtyFields?s.dirtyFields:s.touchedFields,S)),nn(O)?S:qa(O)?He(S,O):O.map(L=>He(S,L))},w=(O,T)=>({invalid:!!He((T||s).errors,O),isDirty:!!He((T||s).dirtyFields,O),error:He((T||s).errors,O),isValidating:!!He(s.validatingFields,O),isTouched:!!He((T||s).touchedFields,O)}),X=O=>{O&&Aa(O).forEach(T=>_n(s.errors,T)),j.state.next({errors:O?s.errors:{}})},ce=(O,T,S)=>{const L=(He(i,O,{_f:{}})._f||{}).ref,$=He(s.errors,O)||{},{ref:J,message:be,type:Ee,...G}=$;Ft(s.errors,O,{...G,...T,ref:L}),j.state.next({name:O,errors:s.errors,isValid:!1}),S&&S.shouldFocus&&L&&L.focus&&L.focus()},Y=(O,T)=>hs(O)?j.state.subscribe({next:S=>"values"in S&&O(ve(void 0,T),S)}):ve(O,T,!0),ye=O=>j.state.subscribe({next:T=>{R_(O.name,T.name,O.exact)&&O_(T,O.formState||y,Fe,O.reRenderRoot)&&O.callback({values:{...d},...s,...T,defaultValues:c})}}).unsubscribe,Se=O=>(f.mount=!0,x={...x,...O.formState},ye({...O,formState:x})),Le=(O,T={})=>{for(const S of O?Aa(O):h.mount)h.mount.delete(S),h.array.delete(S),T.keepValue||(_n(i,S),_n(d,S)),!T.keepError&&_n(s.errors,S),!T.keepDirty&&_n(s.dirtyFields,S),!T.keepTouched&&_n(s.touchedFields,S),!T.keepIsValidating&&_n(s.validatingFields,S),!a.shouldUnregister&&!T.keepDefaultValue&&_n(c,S);j.state.next({values:rn(d)}),j.state.next({...s,...T.keepDirty?{isDirty:Ce()}:{}}),!T.keepIsValid&&A()},Ze=({disabled:O,name:T})=>{(Cs(O)&&f.mount||O||h.disabled.has(T))&&(O?h.disabled.add(T):h.disabled.delete(T))},pe=(O,T={})=>{let S=He(i,O);const L=Cs(T.disabled)||Cs(a.disabled);return Ft(i,O,{...S||{},_f:{...S&&S._f?S._f:{ref:{name:O}},name:O,mount:!0,...T}}),h.mount.add(O),S?Ze({disabled:Cs(T.disabled)?T.disabled:a.disabled,name:O}):M(O,!0,T.value),{...L?{disabled:T.disabled||a.disabled}:{},...a.progressive?{required:!!T.required,min:uo(T.min),max:uo(T.max),minLength:uo(T.minLength),maxLength:uo(T.maxLength),pattern:uo(T.pattern)}:{},name:O,onChange:Z,onBlur:Z,ref:$=>{if($){pe(O,T),S=He(i,O);const J=nn($.value)&&$.querySelectorAll&&$.querySelectorAll("input,select,textarea")[0]||$,be=j_(J),Ee=S._f.refs||[];if(be?Ee.find(G=>G===J):J===S._f.ref)return;Ft(i,O,{_f:{...S._f,...be?{refs:[...Ee.filter(Kf),J,...Array.isArray(He(c,O))?[{}]:[]],ref:{type:J.type,name:O}}:{ref:J}}}),M(O,!1,void 0,J)}else S=He(i,O,{}),S._f&&(S._f.mount=!1),(a.shouldUnregister||T.shouldUnregister)&&!(y_(h.array,O)&&f.action)&&h.unMount.add(O)}}},Be=()=>a.shouldFocusError&&li(i,ae,h.mount),Ge=O=>{Cs(O)&&(j.state.next({disabled:O}),li(i,(T,S)=>{const L=He(i,S);L&&(T.disabled=L._f.disabled||O,Array.isArray(L._f.refs)&&L._f.refs.forEach($=>{$.disabled=L._f.disabled||O}))},0,!1))},Je=(O,T)=>async S=>{let L;S&&(S.preventDefault&&S.preventDefault(),S.persist&&S.persist());let $=rn(d);if(j.state.next({isSubmitting:!0}),a.resolver){const{errors:J,values:be}=await q();s.errors=J,$=rn(be)}else await fe(i);if(h.disabled.size)for(const J of h.disabled)_n($,J);if(_n(s.errors,"root"),ia(s.errors)){j.state.next({errors:{}});try{await O($,S)}catch(J){L=J}}else T&&await T({...s.errors},S),Be(),setTimeout(Be);if(j.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ia(s.errors)&&!L,submitCount:s.submitCount+1,errors:s.errors}),L)throw L},ot=(O,T={})=>{He(i,O)&&(nn(T.defaultValue)?U(O,rn(He(c,O))):(U(O,T.defaultValue),Ft(c,O,rn(T.defaultValue))),T.keepTouched||_n(s.touchedFields,O),T.keepDirty||(_n(s.dirtyFields,O),s.isDirty=T.defaultValue?Ce(O,rn(He(c,O))):Ce()),T.keepError||(_n(s.errors,O),y.isValid&&A()),j.state.next({...s}))},ze=(O,T={})=>{const S=O?rn(O):c,L=rn(S),$=ia(O),J=$?c:L;if(T.keepDefaultValues||(c=S),!T.keepValues){if(T.keepDirtyValues){const be=new Set([...h.mount,...Object.keys(ai(c,d))]);for(const Ee of Array.from(be))He(s.dirtyFields,Ee)?Ft(J,Ee,He(d,Ee)):U(Ee,He(J,Ee))}else{if(bh&&nn(O))for(const be of h.mount){const Ee=He(i,be);if(Ee&&Ee._f){const G=Array.isArray(Ee._f.refs)?Ee._f.refs[0]:Ee._f.ref;if(iu(G)){const Me=G.closest("form");if(Me){Me.reset();break}}}}if(T.keepFieldsRef)for(const be of h.mount)U(be,He(J,be));else i={}}d=a.shouldUnregister?T.keepDefaultValues?rn(c):{}:rn(J),j.array.next({values:{...J}}),j.state.next({values:{...J}})}h={mount:T.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!y.isValid||!!T.keepIsValid||!!T.keepDirtyValues||!a.shouldUnregister&&!ia(J),f.watch=!!a.shouldUnregister,j.state.next({submitCount:T.keepSubmitCount?s.submitCount:0,isDirty:$?!1:T.keepDirty?s.isDirty:!!(T.keepDefaultValues&&!ms(O,c)),isSubmitted:T.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:$?{}:T.keepDirtyValues?T.keepDefaultValues&&d?ai(c,d):s.dirtyFields:T.keepDefaultValues&&O?ai(c,O):T.keepDirty?s.dirtyFields:{},touchedFields:T.keepTouched?s.touchedFields:{},errors:T.keepErrors?s.errors:{},isSubmitSuccessful:T.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:c})},Qe=(O,T)=>ze(hs(O)?O(d):O,T),ue=(O,T={})=>{const S=He(i,O),L=S&&S._f;if(L){const $=L.refs?L.refs[0]:L.ref;$.focus&&($.focus(),T.shouldSelect&&hs($.select)&&$.select())}},Fe=O=>{s={...s,...O}},We={control:{register:pe,unregister:Le,getFieldState:w,handleSubmit:Je,setError:ce,_subscribe:ye,_runSchema:q,_focusError:Be,_getWatch:ve,_getDirty:Ce,_setValid:A,_setFieldArray:F,_setDisabledField:Ze,_setErrors:te,_getFieldArray:_e,_reset:ze,_resetDefaultValues:()=>hs(a.defaultValues)&&a.defaultValues().then(O=>{Qe(O,a.resetOptions),j.state.next({isLoading:!1})}),_removeUnmounted:Re,_disableForm:Ge,_subjects:j,_proxyFormState:y,get _fields(){return i},get _formValues(){return d},get _state(){return f},set _state(O){f=O},get _defaultValues(){return c},get _names(){return h},set _names(O){h=O},get _formState(){return s},get _options(){return a},set _options(O){a={...a,...O}}},subscribe:Se,trigger:he,register:pe,handleSubmit:Je,watch:Y,setValue:U,getValues:me,reset:Qe,resetField:ot,clearErrors:X,unregister:Le,setError:ce,setFocus:ue,getFieldState:w};return{...We,formControl:We}}var yr=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const s=(Math.random()*16+e)%16|0;return(a=="x"?s:s&3|8).toString(16)})},Xf=(e,a,s={})=>s.shouldFocus||nn(s.shouldFocus)?s.focusName||`${e}.${nn(s.focusIndex)?a:s.focusIndex}.`:"",Jf=(e,a)=>[...e,...Aa(a)],Wf=e=>Array.isArray(e)?e.map(()=>{}):void 0;function em(e,a,s){return[...e.slice(0,a),...Aa(s),...e.slice(a)]}var tm=(e,a,s)=>Array.isArray(e)?(nn(e[s])&&(e[s]=void 0),e.splice(s,0,e.splice(a,1)[0]),e):[],nm=(e,a)=>[...Aa(a),...Aa(e)];function M_(e,a){let s=0;const i=[...e];for(const c of a)i.splice(c-s,1),s++;return Su(i).length?i:[]}var am=(e,a)=>nn(a)?[]:M_(e,Aa(a).sort((s,i)=>s-i)),sm=(e,a,s)=>{[e[a],e[s]]=[e[s],e[a]]},Qv=(e,a,s)=>(e[a]=s,e);function U_(e){const a=qx(),{control:s=a.control,name:i,keyName:c="id",shouldUnregister:d,rules:f}=e,[h,v]=pt.useState(s._getFieldArray(i)),g=pt.useRef(s._getFieldArray(i).map(yr)),y=pt.useRef(!1);s._names.array.add(i),pt.useMemo(()=>f&&h.length>=0&&s.register(i,f),[s,i,h.length,f]),yh(()=>s._subjects.array.subscribe({next:({values:M,name:D})=>{if(D===i||!D){const K=He(M,i);Array.isArray(K)&&(v(K),g.current=K.map(yr))}}}).unsubscribe,[s,i]);const x=pt.useCallback(M=>{y.current=!0,s._setFieldArray(i,M)},[s,i]),j=(M,D)=>{const K=Aa(rn(M)),q=Jf(s._getFieldArray(i),K);s._names.focus=Xf(i,q.length-1,D),g.current=Jf(g.current,K.map(yr)),x(q),v(q),s._setFieldArray(i,q,Jf,{argA:Wf(M)})},H=(M,D)=>{const K=Aa(rn(M)),q=nm(s._getFieldArray(i),K);s._names.focus=Xf(i,0,D),g.current=nm(g.current,K.map(yr)),x(q),v(q),s._setFieldArray(i,q,nm,{argA:Wf(M)})},_=M=>{const D=am(s._getFieldArray(i),M);g.current=am(g.current,M),x(D),v(D),!Array.isArray(He(s._fields,i))&&Ft(s._fields,i,void 0),s._setFieldArray(i,D,am,{argA:M})},A=(M,D,K)=>{const q=Aa(rn(D)),V=em(s._getFieldArray(i),M,q);s._names.focus=Xf(i,M,K),g.current=em(g.current,M,q.map(yr)),x(V),v(V),s._setFieldArray(i,V,em,{argA:M,argB:Wf(D)})},R=(M,D)=>{const K=s._getFieldArray(i);sm(K,M,D),sm(g.current,M,D),x(K),v(K),s._setFieldArray(i,K,sm,{argA:M,argB:D},!1)},F=(M,D)=>{const K=s._getFieldArray(i);tm(K,M,D),tm(g.current,M,D),x(K),v(K),s._setFieldArray(i,K,tm,{argA:M,argB:D},!1)},z=(M,D)=>{const K=rn(D),q=Qv(s._getFieldArray(i),M,K);g.current=[...q].map((V,fe)=>!V||fe===M?yr():g.current[fe]),x(q),v([...q]),s._setFieldArray(i,q,Qv,{argA:M,argB:K},!0,!1)},te=M=>{const D=Aa(rn(M));g.current=D.map(yr),x([...D]),v([...D]),s._setFieldArray(i,[...D],K=>K,{},!0,!1)};return pt.useEffect(()=>{if(s._state.action=!1,Bm(i,s._names)&&s._subjects.state.next({...s._formState}),y.current&&(!si(s._options.mode).isOnSubmit||s._formState.isSubmitted)&&!si(s._options.reValidateMode).isOnSubmit)if(s._options.resolver)s._runSchema([i]).then(M=>{const D=He(M.errors,i),K=He(s._formState.errors,i);(K?!D&&K.type||D&&(K.type!==D.type||K.message!==D.message):D&&D.type)&&(D?Ft(s._formState.errors,i,D):_n(s._formState.errors,i),s._subjects.state.next({errors:s._formState.errors}))});else{const M=He(s._fields,i);M&&M._f&&!(si(s._options.reValidateMode).isOnSubmit&&si(s._options.mode).isOnSubmit)&&qm(M,s._names.disabled,s._formValues,s._options.criteriaMode===ts.all,s._options.shouldUseNativeValidation,!0).then(D=>!ia(D)&&s._subjects.state.next({errors:Gx(s._formState.errors,D,i)}))}s._subjects.state.next({name:i,values:rn(s._formValues)}),s._names.focus&&li(s._fields,(M,D)=>{if(s._names.focus&&D.startsWith(s._names.focus)&&M.focus)return M.focus(),1}),s._names.focus="",s._setValid(),y.current=!1},[h,i,s]),pt.useEffect(()=>(!He(s._formValues,i)&&s._setFieldArray(i),()=>{const M=(D,K)=>{const q=He(s._fields,D);q&&q._f&&(q._f.mount=K)};s._options.shouldUnregister||d?s.unregister(i):M(i,!1)}),[i,s,c,d]),{swap:pt.useCallback(R,[x,i,s]),move:pt.useCallback(F,[x,i,s]),prepend:pt.useCallback(H,[x,i,s]),append:pt.useCallback(j,[x,i,s]),remove:pt.useCallback(_,[x,i,s]),insert:pt.useCallback(A,[x,i,s]),update:pt.useCallback(z,[x,i,s]),replace:pt.useCallback(te,[x,i,s]),fields:pt.useMemo(()=>h.map((M,D)=>({...M,[c]:g.current[D]||yr()})),[h,c])}}function wu(e={}){const a=pt.useRef(void 0),s=pt.useRef(void 0),[i,c]=pt.useState({isDirty:!1,isValidating:!1,isLoading:hs(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:hs(e.defaultValues)?void 0:e.defaultValues});if(!a.current)if(e.formControl)a.current={...e.formControl,formState:i},e.defaultValues&&!hs(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:f,...h}=k_(e);a.current={...h,formState:i}}const d=a.current.control;return d._options=e,yh(()=>{const f=d._subscribe({formState:d._proxyFormState,callback:()=>c({...d._formState}),reRenderRoot:!0});return c(h=>({...h,isReady:!0})),d._formState.isReady=!0,f},[d]),pt.useEffect(()=>d._disableForm(e.disabled),[d,e.disabled]),pt.useEffect(()=>{e.mode&&(d._options.mode=e.mode),e.reValidateMode&&(d._options.reValidateMode=e.reValidateMode)},[d,e.mode,e.reValidateMode]),pt.useEffect(()=>{e.errors&&(d._setErrors(e.errors),d._focusError())},[d,e.errors]),pt.useEffect(()=>{e.shouldUnregister&&d._subjects.state.next({values:d._getWatch()})},[d,e.shouldUnregister]),pt.useEffect(()=>{if(d._proxyFormState.isDirty){const f=d._getDirty();f!==i.isDirty&&d._subjects.state.next({isDirty:f})}},[d,i.isDirty]),pt.useEffect(()=>{e.values&&!ms(e.values,s.current)?(d._reset(e.values,{keepFieldsRef:!0,...d._options.resetOptions}),s.current=e.values,c(f=>({...f}))):d._resetDefaultValues()},[d,e.values]),pt.useEffect(()=>{d._state.mount||(d._setValid(),d._state.mount=!0),d._state.watch&&(d._state.watch=!1,d._subjects.state.next({...d._formState})),d._removeUnmounted()}),a.current.formState=N_(i,d),a.current}function Px(e,a){return function(){return e.apply(a,arguments)}}const{toString:L_}=Object.prototype,{getPrototypeOf:Sh}=Object,{iterator:_u,toStringTag:Qx}=Symbol,Eu=(e=>a=>{const s=L_.call(a);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),ps=e=>(e=e.toLowerCase(),a=>Eu(a)===e),Au=e=>a=>typeof a===e,{isArray:pi}=Array,oi=Au("undefined");function Ro(e){return e!==null&&!oi(e)&&e.constructor!==null&&!oi(e.constructor)&&Ca(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Yx=ps("ArrayBuffer");function B_(e){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(e):a=e&&e.buffer&&Yx(e.buffer),a}const q_=Au("string"),Ca=Au("function"),Kx=Au("number"),To=e=>e!==null&&typeof e=="object",I_=e=>e===!0||e===!1,tu=e=>{if(Eu(e)!=="object")return!1;const a=Sh(e);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Qx in e)&&!(_u in e)},$_=e=>{if(!To(e)||Ro(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},F_=ps("Date"),H_=ps("File"),V_=ps("Blob"),Z_=ps("FileList"),G_=e=>To(e)&&Ca(e.pipe),P_=e=>{let a;return e&&(typeof FormData=="function"&&e instanceof FormData||Ca(e.append)&&((a=Eu(e))==="formdata"||a==="object"&&Ca(e.toString)&&e.toString()==="[object FormData]"))},Q_=ps("URLSearchParams"),[Y_,K_,X_,J_]=["ReadableStream","Request","Response","Headers"].map(ps),W_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Do(e,a,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let i,c;if(typeof e!="object"&&(e=[e]),pi(e))for(i=0,c=e.length;i<c;i++)a.call(null,e[i],i,e);else{if(Ro(e))return;const d=s?Object.getOwnPropertyNames(e):Object.keys(e),f=d.length;let h;for(i=0;i<f;i++)h=d[i],a.call(null,e[h],h,e)}}function Xx(e,a){if(Ro(e))return null;a=a.toLowerCase();const s=Object.keys(e);let i=s.length,c;for(;i-- >0;)if(c=s[i],a===c.toLowerCase())return c;return null}const al=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Jx=e=>!oi(e)&&e!==al;function Im(){const{caseless:e,skipUndefined:a}=Jx(this)&&this||{},s={},i=(c,d)=>{const f=e&&Xx(s,d)||d;tu(s[f])&&tu(c)?s[f]=Im(s[f],c):tu(c)?s[f]=Im({},c):pi(c)?s[f]=c.slice():(!a||!oi(c))&&(s[f]=c)};for(let c=0,d=arguments.length;c<d;c++)arguments[c]&&Do(arguments[c],i);return s}const e1=(e,a,s,{allOwnKeys:i}={})=>(Do(a,(c,d)=>{s&&Ca(c)?e[d]=Px(c,s):e[d]=c},{allOwnKeys:i}),e),t1=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),n1=(e,a,s,i)=>{e.prototype=Object.create(a.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:a.prototype}),s&&Object.assign(e.prototype,s)},a1=(e,a,s,i)=>{let c,d,f;const h={};if(a=a||{},e==null)return a;do{for(c=Object.getOwnPropertyNames(e),d=c.length;d-- >0;)f=c[d],(!i||i(f,e,a))&&!h[f]&&(a[f]=e[f],h[f]=!0);e=s!==!1&&Sh(e)}while(e&&(!s||s(e,a))&&e!==Object.prototype);return a},s1=(e,a,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=a.length;const i=e.indexOf(a,s);return i!==-1&&i===s},r1=e=>{if(!e)return null;if(pi(e))return e;let a=e.length;if(!Kx(a))return null;const s=new Array(a);for(;a-- >0;)s[a]=e[a];return s},l1=(e=>a=>e&&a instanceof e)(typeof Uint8Array<"u"&&Sh(Uint8Array)),i1=(e,a)=>{const i=(e&&e[_u]).call(e);let c;for(;(c=i.next())&&!c.done;){const d=c.value;a.call(e,d[0],d[1])}},o1=(e,a)=>{let s;const i=[];for(;(s=e.exec(a))!==null;)i.push(s);return i},c1=ps("HTMLFormElement"),u1=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,i,c){return i.toUpperCase()+c}),Yv=(({hasOwnProperty:e})=>(a,s)=>e.call(a,s))(Object.prototype),d1=ps("RegExp"),Wx=(e,a)=>{const s=Object.getOwnPropertyDescriptors(e),i={};Do(s,(c,d)=>{let f;(f=a(c,d,e))!==!1&&(i[d]=f||c)}),Object.defineProperties(e,i)},f1=e=>{Wx(e,(a,s)=>{if(Ca(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const i=e[s];if(Ca(i)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},m1=(e,a)=>{const s={},i=c=>{c.forEach(d=>{s[d]=!0})};return pi(e)?i(e):i(String(e).split(a)),s},h1=()=>{},p1=(e,a)=>e!=null&&Number.isFinite(e=+e)?e:a;function g1(e){return!!(e&&Ca(e.append)&&e[Qx]==="FormData"&&e[_u])}const b1=e=>{const a=new Array(10),s=(i,c)=>{if(To(i)){if(a.indexOf(i)>=0)return;if(Ro(i))return i;if(!("toJSON"in i)){a[c]=i;const d=pi(i)?[]:{};return Do(i,(f,h)=>{const v=s(f,c+1);!oi(v)&&(d[h]=v)}),a[c]=void 0,d}}return i};return s(e,0)},v1=ps("AsyncFunction"),y1=e=>e&&(To(e)||Ca(e))&&Ca(e.then)&&Ca(e.catch),e0=((e,a)=>e?setImmediate:a?((s,i)=>(al.addEventListener("message",({source:c,data:d})=>{c===al&&d===s&&i.length&&i.shift()()},!1),c=>{i.push(c),al.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Ca(al.postMessage)),x1=typeof queueMicrotask<"u"?queueMicrotask.bind(al):typeof process<"u"&&process.nextTick||e0,N1=e=>e!=null&&Ca(e[_u]),le={isArray:pi,isArrayBuffer:Yx,isBuffer:Ro,isFormData:P_,isArrayBufferView:B_,isString:q_,isNumber:Kx,isBoolean:I_,isObject:To,isPlainObject:tu,isEmptyObject:$_,isReadableStream:Y_,isRequest:K_,isResponse:X_,isHeaders:J_,isUndefined:oi,isDate:F_,isFile:H_,isBlob:V_,isRegExp:d1,isFunction:Ca,isStream:G_,isURLSearchParams:Q_,isTypedArray:l1,isFileList:Z_,forEach:Do,merge:Im,extend:e1,trim:W_,stripBOM:t1,inherits:n1,toFlatObject:a1,kindOf:Eu,kindOfTest:ps,endsWith:s1,toArray:r1,forEachEntry:i1,matchAll:o1,isHTMLForm:c1,hasOwnProperty:Yv,hasOwnProp:Yv,reduceDescriptors:Wx,freezeMethods:f1,toObjectSet:m1,toCamelCase:u1,noop:h1,toFiniteNumber:p1,findKey:Xx,global:al,isContextDefined:Jx,isSpecCompliantForm:g1,toJSONObject:b1,isAsyncFn:v1,isThenable:y1,setImmediate:e0,asap:x1,isIterable:N1};function mt(e,a,s,i,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",a&&(this.code=a),s&&(this.config=s),i&&(this.request=i),c&&(this.response=c,this.status=c.status?c.status:null)}le.inherits(mt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:le.toJSONObject(this.config),code:this.code,status:this.status}}});const t0=mt.prototype,n0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{n0[e]={value:e}});Object.defineProperties(mt,n0);Object.defineProperty(t0,"isAxiosError",{value:!0});mt.from=(e,a,s,i,c,d)=>{const f=Object.create(t0);le.toFlatObject(e,f,function(y){return y!==Error.prototype},g=>g!=="isAxiosError");const h=e&&e.message?e.message:"Error",v=a==null&&e?e.code:a;return mt.call(f,h,v,s,i,c),e&&f.cause==null&&Object.defineProperty(f,"cause",{value:e,configurable:!0}),f.name=e&&e.name||"Error",d&&Object.assign(f,d),f};const j1=null;function $m(e){return le.isPlainObject(e)||le.isArray(e)}function a0(e){return le.endsWith(e,"[]")?e.slice(0,-2):e}function Kv(e,a,s){return e?e.concat(a).map(function(c,d){return c=a0(c),!s&&d?"["+c+"]":c}).join(s?".":""):a}function S1(e){return le.isArray(e)&&!e.some($m)}const w1=le.toFlatObject(le,{},null,function(a){return/^is[A-Z]/.test(a)});function Cu(e,a,s){if(!le.isObject(e))throw new TypeError("target must be an object");a=a||new FormData,s=le.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,R){return!le.isUndefined(R[A])});const i=s.metaTokens,c=s.visitor||y,d=s.dots,f=s.indexes,v=(s.Blob||typeof Blob<"u"&&Blob)&&le.isSpecCompliantForm(a);if(!le.isFunction(c))throw new TypeError("visitor must be a function");function g(_){if(_===null)return"";if(le.isDate(_))return _.toISOString();if(le.isBoolean(_))return _.toString();if(!v&&le.isBlob(_))throw new mt("Blob is not supported. Use a Buffer instead.");return le.isArrayBuffer(_)||le.isTypedArray(_)?v&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function y(_,A,R){let F=_;if(_&&!R&&typeof _=="object"){if(le.endsWith(A,"{}"))A=i?A:A.slice(0,-2),_=JSON.stringify(_);else if(le.isArray(_)&&S1(_)||(le.isFileList(_)||le.endsWith(A,"[]"))&&(F=le.toArray(_)))return A=a0(A),F.forEach(function(te,M){!(le.isUndefined(te)||te===null)&&a.append(f===!0?Kv([A],M,d):f===null?A:A+"[]",g(te))}),!1}return $m(_)?!0:(a.append(Kv(R,A,d),g(_)),!1)}const x=[],j=Object.assign(w1,{defaultVisitor:y,convertValue:g,isVisitable:$m});function H(_,A){if(!le.isUndefined(_)){if(x.indexOf(_)!==-1)throw Error("Circular reference detected in "+A.join("."));x.push(_),le.forEach(_,function(F,z){(!(le.isUndefined(F)||F===null)&&c.call(a,F,le.isString(z)?z.trim():z,A,j))===!0&&H(F,A?A.concat(z):[z])}),x.pop()}}if(!le.isObject(e))throw new TypeError("data must be an object");return H(e),a}function Xv(e){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return a[i]})}function wh(e,a){this._pairs=[],e&&Cu(e,this,a)}const s0=wh.prototype;s0.append=function(a,s){this._pairs.push([a,s])};s0.toString=function(a){const s=a?function(i){return a.call(this,i,Xv)}:Xv;return this._pairs.map(function(c){return s(c[0])+"="+s(c[1])},"").join("&")};function _1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function r0(e,a,s){if(!a)return e;const i=s&&s.encode||_1;le.isFunction(s)&&(s={serialize:s});const c=s&&s.serialize;let d;if(c?d=c(a,s):d=le.isURLSearchParams(a)?a.toString():new wh(a,s).toString(i),d){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class Jv{constructor(){this.handlers=[]}use(a,s,i){return this.handlers.push({fulfilled:a,rejected:s,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){le.forEach(this.handlers,function(i){i!==null&&a(i)})}}const l0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},E1=typeof URLSearchParams<"u"?URLSearchParams:wh,A1=typeof FormData<"u"?FormData:null,C1=typeof Blob<"u"?Blob:null,O1={isBrowser:!0,classes:{URLSearchParams:E1,FormData:A1,Blob:C1},protocols:["http","https","file","blob","url","data"]},_h=typeof window<"u"&&typeof document<"u",Fm=typeof navigator=="object"&&navigator||void 0,R1=_h&&(!Fm||["ReactNative","NativeScript","NS"].indexOf(Fm.product)<0),T1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",D1=_h&&window.location.href||"http://localhost",z1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:_h,hasStandardBrowserEnv:R1,hasStandardBrowserWebWorkerEnv:T1,navigator:Fm,origin:D1},Symbol.toStringTag,{value:"Module"})),oa={...z1,...O1};function k1(e,a){return Cu(e,new oa.classes.URLSearchParams,{visitor:function(s,i,c,d){return oa.isNode&&le.isBuffer(s)?(this.append(i,s.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...a})}function M1(e){return le.matchAll(/\w+|\[(\w*)]/g,e).map(a=>a[0]==="[]"?"":a[1]||a[0])}function U1(e){const a={},s=Object.keys(e);let i;const c=s.length;let d;for(i=0;i<c;i++)d=s[i],a[d]=e[d];return a}function i0(e){function a(s,i,c,d){let f=s[d++];if(f==="__proto__")return!0;const h=Number.isFinite(+f),v=d>=s.length;return f=!f&&le.isArray(c)?c.length:f,v?(le.hasOwnProp(c,f)?c[f]=[c[f],i]:c[f]=i,!h):((!c[f]||!le.isObject(c[f]))&&(c[f]=[]),a(s,i,c[f],d)&&le.isArray(c[f])&&(c[f]=U1(c[f])),!h)}if(le.isFormData(e)&&le.isFunction(e.entries)){const s={};return le.forEachEntry(e,(i,c)=>{a(M1(i),c,s,0)}),s}return null}function L1(e,a,s){if(le.isString(e))try{return(a||JSON.parse)(e),le.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(s||JSON.stringify)(e)}const zo={transitional:l0,adapter:["xhr","http","fetch"],transformRequest:[function(a,s){const i=s.getContentType()||"",c=i.indexOf("application/json")>-1,d=le.isObject(a);if(d&&le.isHTMLForm(a)&&(a=new FormData(a)),le.isFormData(a))return c?JSON.stringify(i0(a)):a;if(le.isArrayBuffer(a)||le.isBuffer(a)||le.isStream(a)||le.isFile(a)||le.isBlob(a)||le.isReadableStream(a))return a;if(le.isArrayBufferView(a))return a.buffer;if(le.isURLSearchParams(a))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let h;if(d){if(i.indexOf("application/x-www-form-urlencoded")>-1)return k1(a,this.formSerializer).toString();if((h=le.isFileList(a))||i.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Cu(h?{"files[]":a}:a,v&&new v,this.formSerializer)}}return d||c?(s.setContentType("application/json",!1),L1(a)):a}],transformResponse:[function(a){const s=this.transitional||zo.transitional,i=s&&s.forcedJSONParsing,c=this.responseType==="json";if(le.isResponse(a)||le.isReadableStream(a))return a;if(a&&le.isString(a)&&(i&&!this.responseType||c)){const f=!(s&&s.silentJSONParsing)&&c;try{return JSON.parse(a,this.parseReviver)}catch(h){if(f)throw h.name==="SyntaxError"?mt.from(h,mt.ERR_BAD_RESPONSE,this,null,this.response):h}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:oa.classes.FormData,Blob:oa.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};le.forEach(["delete","get","head","post","put","patch"],e=>{zo.headers[e]={}});const B1=le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),q1=e=>{const a={};let s,i,c;return e&&e.split(`
`).forEach(function(f){c=f.indexOf(":"),s=f.substring(0,c).trim().toLowerCase(),i=f.substring(c+1).trim(),!(!s||a[s]&&B1[s])&&(s==="set-cookie"?a[s]?a[s].push(i):a[s]=[i]:a[s]=a[s]?a[s]+", "+i:i)}),a},Wv=Symbol("internals");function fo(e){return e&&String(e).trim().toLowerCase()}function nu(e){return e===!1||e==null?e:le.isArray(e)?e.map(nu):String(e)}function I1(e){const a=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=s.exec(e);)a[i[1]]=i[2];return a}const $1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function rm(e,a,s,i,c){if(le.isFunction(i))return i.call(this,a,s);if(c&&(a=s),!!le.isString(a)){if(le.isString(i))return a.indexOf(i)!==-1;if(le.isRegExp(i))return i.test(a)}}function F1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,s,i)=>s.toUpperCase()+i)}function H1(e,a){const s=le.toCamelCase(" "+a);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+s,{value:function(c,d,f){return this[i].call(this,a,c,d,f)},configurable:!0})})}let Oa=class{constructor(a){a&&this.set(a)}set(a,s,i){const c=this;function d(h,v,g){const y=fo(v);if(!y)throw new Error("header name must be a non-empty string");const x=le.findKey(c,y);(!x||c[x]===void 0||g===!0||g===void 0&&c[x]!==!1)&&(c[x||v]=nu(h))}const f=(h,v)=>le.forEach(h,(g,y)=>d(g,y,v));if(le.isPlainObject(a)||a instanceof this.constructor)f(a,s);else if(le.isString(a)&&(a=a.trim())&&!$1(a))f(q1(a),s);else if(le.isObject(a)&&le.isIterable(a)){let h={},v,g;for(const y of a){if(!le.isArray(y))throw TypeError("Object iterator must return a key-value pair");h[g=y[0]]=(v=h[g])?le.isArray(v)?[...v,y[1]]:[v,y[1]]:y[1]}f(h,s)}else a!=null&&d(s,a,i);return this}get(a,s){if(a=fo(a),a){const i=le.findKey(this,a);if(i){const c=this[i];if(!s)return c;if(s===!0)return I1(c);if(le.isFunction(s))return s.call(this,c,i);if(le.isRegExp(s))return s.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,s){if(a=fo(a),a){const i=le.findKey(this,a);return!!(i&&this[i]!==void 0&&(!s||rm(this,this[i],i,s)))}return!1}delete(a,s){const i=this;let c=!1;function d(f){if(f=fo(f),f){const h=le.findKey(i,f);h&&(!s||rm(i,i[h],h,s))&&(delete i[h],c=!0)}}return le.isArray(a)?a.forEach(d):d(a),c}clear(a){const s=Object.keys(this);let i=s.length,c=!1;for(;i--;){const d=s[i];(!a||rm(this,this[d],d,a,!0))&&(delete this[d],c=!0)}return c}normalize(a){const s=this,i={};return le.forEach(this,(c,d)=>{const f=le.findKey(i,d);if(f){s[f]=nu(c),delete s[d];return}const h=a?F1(d):String(d).trim();h!==d&&delete s[d],s[h]=nu(c),i[h]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const s=Object.create(null);return le.forEach(this,(i,c)=>{i!=null&&i!==!1&&(s[c]=a&&le.isArray(i)?i.join(", "):i)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,s])=>a+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...s){const i=new this(a);return s.forEach(c=>i.set(c)),i}static accessor(a){const i=(this[Wv]=this[Wv]={accessors:{}}).accessors,c=this.prototype;function d(f){const h=fo(f);i[h]||(H1(c,f),i[h]=!0)}return le.isArray(a)?a.forEach(d):d(a),this}};Oa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);le.reduceDescriptors(Oa.prototype,({value:e},a)=>{let s=a[0].toUpperCase()+a.slice(1);return{get:()=>e,set(i){this[s]=i}}});le.freezeMethods(Oa);function lm(e,a){const s=this||zo,i=a||s,c=Oa.from(i.headers);let d=i.data;return le.forEach(e,function(h){d=h.call(s,d,c.normalize(),a?a.status:void 0)}),c.normalize(),d}function o0(e){return!!(e&&e.__CANCEL__)}function gi(e,a,s){mt.call(this,e??"canceled",mt.ERR_CANCELED,a,s),this.name="CanceledError"}le.inherits(gi,mt,{__CANCEL__:!0});function c0(e,a,s){const i=s.config.validateStatus;!s.status||!i||i(s.status)?e(s):a(new mt("Request failed with status code "+s.status,[mt.ERR_BAD_REQUEST,mt.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function V1(e){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return a&&a[1]||""}function Z1(e,a){e=e||10;const s=new Array(e),i=new Array(e);let c=0,d=0,f;return a=a!==void 0?a:1e3,function(v){const g=Date.now(),y=i[d];f||(f=g),s[c]=v,i[c]=g;let x=d,j=0;for(;x!==c;)j+=s[x++],x=x%e;if(c=(c+1)%e,c===d&&(d=(d+1)%e),g-f<a)return;const H=y&&g-y;return H?Math.round(j*1e3/H):void 0}}function G1(e,a){let s=0,i=1e3/a,c,d;const f=(g,y=Date.now())=>{s=y,c=null,d&&(clearTimeout(d),d=null),e(...g)};return[(...g)=>{const y=Date.now(),x=y-s;x>=i?f(g,y):(c=g,d||(d=setTimeout(()=>{d=null,f(c)},i-x)))},()=>c&&f(c)]}const cu=(e,a,s=3)=>{let i=0;const c=Z1(50,250);return G1(d=>{const f=d.loaded,h=d.lengthComputable?d.total:void 0,v=f-i,g=c(v),y=f<=h;i=f;const x={loaded:f,total:h,progress:h?f/h:void 0,bytes:v,rate:g||void 0,estimated:g&&h&&y?(h-f)/g:void 0,event:d,lengthComputable:h!=null,[a?"download":"upload"]:!0};e(x)},s)},ey=(e,a)=>{const s=e!=null;return[i=>a[0]({lengthComputable:s,total:e,loaded:i}),a[1]]},ty=e=>(...a)=>le.asap(()=>e(...a)),P1=oa.hasStandardBrowserEnv?((e,a)=>s=>(s=new URL(s,oa.origin),e.protocol===s.protocol&&e.host===s.host&&(a||e.port===s.port)))(new URL(oa.origin),oa.navigator&&/(msie|trident)/i.test(oa.navigator.userAgent)):()=>!0,Q1=oa.hasStandardBrowserEnv?{write(e,a,s,i,c,d,f){if(typeof document>"u")return;const h=[`${e}=${encodeURIComponent(a)}`];le.isNumber(s)&&h.push(`expires=${new Date(s).toUTCString()}`),le.isString(i)&&h.push(`path=${i}`),le.isString(c)&&h.push(`domain=${c}`),d===!0&&h.push("secure"),le.isString(f)&&h.push(`SameSite=${f}`),document.cookie=h.join("; ")},read(e){if(typeof document>"u")return null;const a=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return a?decodeURIComponent(a[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Y1(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function K1(e,a){return a?e.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):e}function u0(e,a,s){let i=!Y1(a);return e&&(i||s==!1)?K1(e,a):a}const ny=e=>e instanceof Oa?{...e}:e;function ol(e,a){a=a||{};const s={};function i(g,y,x,j){return le.isPlainObject(g)&&le.isPlainObject(y)?le.merge.call({caseless:j},g,y):le.isPlainObject(y)?le.merge({},y):le.isArray(y)?y.slice():y}function c(g,y,x,j){if(le.isUndefined(y)){if(!le.isUndefined(g))return i(void 0,g,x,j)}else return i(g,y,x,j)}function d(g,y){if(!le.isUndefined(y))return i(void 0,y)}function f(g,y){if(le.isUndefined(y)){if(!le.isUndefined(g))return i(void 0,g)}else return i(void 0,y)}function h(g,y,x){if(x in a)return i(g,y);if(x in e)return i(void 0,g)}const v={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:h,headers:(g,y,x)=>c(ny(g),ny(y),x,!0)};return le.forEach(Object.keys({...e,...a}),function(y){const x=v[y]||c,j=x(e[y],a[y],y);le.isUndefined(j)&&x!==h||(s[y]=j)}),s}const d0=e=>{const a=ol({},e);let{data:s,withXSRFToken:i,xsrfHeaderName:c,xsrfCookieName:d,headers:f,auth:h}=a;if(a.headers=f=Oa.from(f),a.url=r0(u0(a.baseURL,a.url,a.allowAbsoluteUrls),e.params,e.paramsSerializer),h&&f.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),le.isFormData(s)){if(oa.hasStandardBrowserEnv||oa.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(le.isFunction(s.getHeaders)){const v=s.getHeaders(),g=["content-type","content-length"];Object.entries(v).forEach(([y,x])=>{g.includes(y.toLowerCase())&&f.set(y,x)})}}if(oa.hasStandardBrowserEnv&&(i&&le.isFunction(i)&&(i=i(a)),i||i!==!1&&P1(a.url))){const v=c&&d&&Q1.read(d);v&&f.set(c,v)}return a},X1=typeof XMLHttpRequest<"u",J1=X1&&function(e){return new Promise(function(s,i){const c=d0(e);let d=c.data;const f=Oa.from(c.headers).normalize();let{responseType:h,onUploadProgress:v,onDownloadProgress:g}=c,y,x,j,H,_;function A(){H&&H(),_&&_(),c.cancelToken&&c.cancelToken.unsubscribe(y),c.signal&&c.signal.removeEventListener("abort",y)}let R=new XMLHttpRequest;R.open(c.method.toUpperCase(),c.url,!0),R.timeout=c.timeout;function F(){if(!R)return;const te=Oa.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),D={data:!h||h==="text"||h==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:te,config:e,request:R};c0(function(q){s(q),A()},function(q){i(q),A()},D),R=null}"onloadend"in R?R.onloadend=F:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(F)},R.onabort=function(){R&&(i(new mt("Request aborted",mt.ECONNABORTED,e,R)),R=null)},R.onerror=function(M){const D=M&&M.message?M.message:"Network Error",K=new mt(D,mt.ERR_NETWORK,e,R);K.event=M||null,i(K),R=null},R.ontimeout=function(){let M=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const D=c.transitional||l0;c.timeoutErrorMessage&&(M=c.timeoutErrorMessage),i(new mt(M,D.clarifyTimeoutError?mt.ETIMEDOUT:mt.ECONNABORTED,e,R)),R=null},d===void 0&&f.setContentType(null),"setRequestHeader"in R&&le.forEach(f.toJSON(),function(M,D){R.setRequestHeader(D,M)}),le.isUndefined(c.withCredentials)||(R.withCredentials=!!c.withCredentials),h&&h!=="json"&&(R.responseType=c.responseType),g&&([j,_]=cu(g,!0),R.addEventListener("progress",j)),v&&R.upload&&([x,H]=cu(v),R.upload.addEventListener("progress",x),R.upload.addEventListener("loadend",H)),(c.cancelToken||c.signal)&&(y=te=>{R&&(i(!te||te.type?new gi(null,e,R):te),R.abort(),R=null)},c.cancelToken&&c.cancelToken.subscribe(y),c.signal&&(c.signal.aborted?y():c.signal.addEventListener("abort",y)));const z=V1(c.url);if(z&&oa.protocols.indexOf(z)===-1){i(new mt("Unsupported protocol "+z+":",mt.ERR_BAD_REQUEST,e));return}R.send(d||null)})},W1=(e,a)=>{const{length:s}=e=e?e.filter(Boolean):[];if(a||s){let i=new AbortController,c;const d=function(g){if(!c){c=!0,h();const y=g instanceof Error?g:this.reason;i.abort(y instanceof mt?y:new gi(y instanceof Error?y.message:y))}};let f=a&&setTimeout(()=>{f=null,d(new mt(`timeout ${a} of ms exceeded`,mt.ETIMEDOUT))},a);const h=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(g=>{g.unsubscribe?g.unsubscribe(d):g.removeEventListener("abort",d)}),e=null)};e.forEach(g=>g.addEventListener("abort",d));const{signal:v}=i;return v.unsubscribe=()=>le.asap(h),v}},eE=function*(e,a){let s=e.byteLength;if(s<a){yield e;return}let i=0,c;for(;i<s;)c=i+a,yield e.slice(i,c),i=c},tE=async function*(e,a){for await(const s of nE(e))yield*eE(s,a)},nE=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const a=e.getReader();try{for(;;){const{done:s,value:i}=await a.read();if(s)break;yield i}}finally{await a.cancel()}},ay=(e,a,s,i)=>{const c=tE(e,a);let d=0,f,h=v=>{f||(f=!0,i&&i(v))};return new ReadableStream({async pull(v){try{const{done:g,value:y}=await c.next();if(g){h(),v.close();return}let x=y.byteLength;if(s){let j=d+=x;s(j)}v.enqueue(new Uint8Array(y))}catch(g){throw h(g),g}},cancel(v){return h(v),c.return()}},{highWaterMark:2})},sy=64*1024,{isFunction:Zc}=le,aE=(({Request:e,Response:a})=>({Request:e,Response:a}))(le.global),{ReadableStream:ry,TextEncoder:ly}=le.global,iy=(e,...a)=>{try{return!!e(...a)}catch{return!1}},sE=e=>{e=le.merge.call({skipUndefined:!0},aE,e);const{fetch:a,Request:s,Response:i}=e,c=a?Zc(a):typeof fetch=="function",d=Zc(s),f=Zc(i);if(!c)return!1;const h=c&&Zc(ry),v=c&&(typeof ly=="function"?(_=>A=>_.encode(A))(new ly):async _=>new Uint8Array(await new s(_).arrayBuffer())),g=d&&h&&iy(()=>{let _=!1;const A=new s(oa.origin,{body:new ry,method:"POST",get duplex(){return _=!0,"half"}}).headers.has("Content-Type");return _&&!A}),y=f&&h&&iy(()=>le.isReadableStream(new i("").body)),x={stream:y&&(_=>_.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(_=>{!x[_]&&(x[_]=(A,R)=>{let F=A&&A[_];if(F)return F.call(A);throw new mt(`Response type '${_}' is not supported`,mt.ERR_NOT_SUPPORT,R)})});const j=async _=>{if(_==null)return 0;if(le.isBlob(_))return _.size;if(le.isSpecCompliantForm(_))return(await new s(oa.origin,{method:"POST",body:_}).arrayBuffer()).byteLength;if(le.isArrayBufferView(_)||le.isArrayBuffer(_))return _.byteLength;if(le.isURLSearchParams(_)&&(_=_+""),le.isString(_))return(await v(_)).byteLength},H=async(_,A)=>{const R=le.toFiniteNumber(_.getContentLength());return R??j(A)};return async _=>{let{url:A,method:R,data:F,signal:z,cancelToken:te,timeout:M,onDownloadProgress:D,onUploadProgress:K,responseType:q,headers:V,withCredentials:fe="same-origin",fetchOptions:Re}=d0(_),Ce=a||fetch;q=q?(q+"").toLowerCase():"text";let ve=W1([z,te&&te.toAbortSignal()],M),_e=null;const ke=ve&&ve.unsubscribe&&(()=>{ve.unsubscribe()});let De;try{if(K&&g&&R!=="get"&&R!=="head"&&(De=await H(V,F))!==0){let w=new s(A,{method:"POST",body:F,duplex:"half"}),X;if(le.isFormData(F)&&(X=w.headers.get("content-type"))&&V.setContentType(X),w.body){const[ce,Y]=ey(De,cu(ty(K)));F=ay(w.body,sy,ce,Y)}}le.isString(fe)||(fe=fe?"include":"omit");const U=d&&"credentials"in s.prototype,Z={...Re,signal:ve,method:R.toUpperCase(),headers:V.normalize().toJSON(),body:F,duplex:"half",credentials:U?fe:void 0};_e=d&&new s(A,Z);let ae=await(d?Ce(_e,Re):Ce(A,Z));const he=y&&(q==="stream"||q==="response");if(y&&(D||he&&ke)){const w={};["status","statusText","headers"].forEach(ye=>{w[ye]=ae[ye]});const X=le.toFiniteNumber(ae.headers.get("content-length")),[ce,Y]=D&&ey(X,cu(ty(D),!0))||[];ae=new i(ay(ae.body,sy,ce,()=>{Y&&Y(),ke&&ke()}),w)}q=q||"text";let me=await x[le.findKey(x,q)||"text"](ae,_);return!he&&ke&&ke(),await new Promise((w,X)=>{c0(w,X,{data:me,headers:Oa.from(ae.headers),status:ae.status,statusText:ae.statusText,config:_,request:_e})})}catch(U){throw ke&&ke(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new mt("Network Error",mt.ERR_NETWORK,_,_e),{cause:U.cause||U}):mt.from(U,U&&U.code,_,_e)}}},rE=new Map,f0=e=>{let a=e&&e.env||{};const{fetch:s,Request:i,Response:c}=a,d=[i,c,s];let f=d.length,h=f,v,g,y=rE;for(;h--;)v=d[h],g=y.get(v),g===void 0&&y.set(v,g=h?new Map:sE(a)),y=g;return g};f0();const Eh={http:j1,xhr:J1,fetch:{get:f0}};le.forEach(Eh,(e,a)=>{if(e){try{Object.defineProperty(e,"name",{value:a})}catch{}Object.defineProperty(e,"adapterName",{value:a})}});const oy=e=>`- ${e}`,lE=e=>le.isFunction(e)||e===null||e===!1;function iE(e,a){e=le.isArray(e)?e:[e];const{length:s}=e;let i,c;const d={};for(let f=0;f<s;f++){i=e[f];let h;if(c=i,!lE(i)&&(c=Eh[(h=String(i)).toLowerCase()],c===void 0))throw new mt(`Unknown adapter '${h}'`);if(c&&(le.isFunction(c)||(c=c.get(a))))break;d[h||"#"+f]=c}if(!c){const f=Object.entries(d).map(([v,g])=>`adapter ${v} `+(g===!1?"is not supported by the environment":"is not available in the build"));let h=s?f.length>1?`since :
`+f.map(oy).join(`
`):" "+oy(f[0]):"as no adapter specified";throw new mt("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return c}const m0={getAdapter:iE,adapters:Eh};function im(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new gi(null,e)}function cy(e){return im(e),e.headers=Oa.from(e.headers),e.data=lm.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),m0.getAdapter(e.adapter||zo.adapter,e)(e).then(function(i){return im(e),i.data=lm.call(e,e.transformResponse,i),i.headers=Oa.from(i.headers),i},function(i){return o0(i)||(im(e),i&&i.response&&(i.response.data=lm.call(e,e.transformResponse,i.response),i.response.headers=Oa.from(i.response.headers))),Promise.reject(i)})}const h0="1.13.2",Ou={};["object","boolean","number","function","string","symbol"].forEach((e,a)=>{Ou[e]=function(i){return typeof i===e||"a"+(a<1?"n ":" ")+e}});const uy={};Ou.transitional=function(a,s,i){function c(d,f){return"[Axios v"+h0+"] Transitional option '"+d+"'"+f+(i?". "+i:"")}return(d,f,h)=>{if(a===!1)throw new mt(c(f," has been removed"+(s?" in "+s:"")),mt.ERR_DEPRECATED);return s&&!uy[f]&&(uy[f]=!0,console.warn(c(f," has been deprecated since v"+s+" and will be removed in the near future"))),a?a(d,f,h):!0}};Ou.spelling=function(a){return(s,i)=>(console.warn(`${i} is likely a misspelling of ${a}`),!0)};function oE(e,a,s){if(typeof e!="object")throw new mt("options must be an object",mt.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let c=i.length;for(;c-- >0;){const d=i[c],f=a[d];if(f){const h=e[d],v=h===void 0||f(h,d,e);if(v!==!0)throw new mt("option "+d+" must be "+v,mt.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new mt("Unknown option "+d,mt.ERR_BAD_OPTION)}}const au={assertOptions:oE,validators:Ou},As=au.validators;let sl=class{constructor(a){this.defaults=a||{},this.interceptors={request:new Jv,response:new Jv}}async request(a,s){try{return await this._request(a,s)}catch(i){if(i instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const d=c.stack?c.stack.replace(/^.+\n/,""):"";try{i.stack?d&&!String(i.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+d):i.stack=d}catch{}}throw i}}_request(a,s){typeof a=="string"?(s=s||{},s.url=a):s=a||{},s=ol(this.defaults,s);const{transitional:i,paramsSerializer:c,headers:d}=s;i!==void 0&&au.assertOptions(i,{silentJSONParsing:As.transitional(As.boolean),forcedJSONParsing:As.transitional(As.boolean),clarifyTimeoutError:As.transitional(As.boolean)},!1),c!=null&&(le.isFunction(c)?s.paramsSerializer={serialize:c}:au.assertOptions(c,{encode:As.function,serialize:As.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),au.assertOptions(s,{baseUrl:As.spelling("baseURL"),withXsrfToken:As.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let f=d&&le.merge(d.common,d[s.method]);d&&le.forEach(["delete","get","head","post","put","patch","common"],_=>{delete d[_]}),s.headers=Oa.concat(f,d);const h=[];let v=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(s)===!1||(v=v&&A.synchronous,h.unshift(A.fulfilled,A.rejected))});const g=[];this.interceptors.response.forEach(function(A){g.push(A.fulfilled,A.rejected)});let y,x=0,j;if(!v){const _=[cy.bind(this),void 0];for(_.unshift(...h),_.push(...g),j=_.length,y=Promise.resolve(s);x<j;)y=y.then(_[x++],_[x++]);return y}j=h.length;let H=s;for(;x<j;){const _=h[x++],A=h[x++];try{H=_(H)}catch(R){A.call(this,R);break}}try{y=cy.call(this,H)}catch(_){return Promise.reject(_)}for(x=0,j=g.length;x<j;)y=y.then(g[x++],g[x++]);return y}getUri(a){a=ol(this.defaults,a);const s=u0(a.baseURL,a.url,a.allowAbsoluteUrls);return r0(s,a.params,a.paramsSerializer)}};le.forEach(["delete","get","head","options"],function(a){sl.prototype[a]=function(s,i){return this.request(ol(i||{},{method:a,url:s,data:(i||{}).data}))}});le.forEach(["post","put","patch"],function(a){function s(i){return function(d,f,h){return this.request(ol(h||{},{method:a,headers:i?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}sl.prototype[a]=s(),sl.prototype[a+"Form"]=s(!0)});let cE=class p0{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(d){s=d});const i=this;this.promise.then(c=>{if(!i._listeners)return;let d=i._listeners.length;for(;d-- >0;)i._listeners[d](c);i._listeners=null}),this.promise.then=c=>{let d;const f=new Promise(h=>{i.subscribe(h),d=h}).then(c);return f.cancel=function(){i.unsubscribe(d)},f},a(function(d,f,h){i.reason||(i.reason=new gi(d,f,h),s(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const s=this._listeners.indexOf(a);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const a=new AbortController,s=i=>{a.abort(i)};return this.subscribe(s),a.signal.unsubscribe=()=>this.unsubscribe(s),a.signal}static source(){let a;return{token:new p0(function(c){a=c}),cancel:a}}};function uE(e){return function(s){return e.apply(null,s)}}function dE(e){return le.isObject(e)&&e.isAxiosError===!0}const Hm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Hm).forEach(([e,a])=>{Hm[a]=e});function g0(e){const a=new sl(e),s=Px(sl.prototype.request,a);return le.extend(s,sl.prototype,a,{allOwnKeys:!0}),le.extend(s,a,null,{allOwnKeys:!0}),s.create=function(c){return g0(ol(e,c))},s}const gt=g0(zo);gt.Axios=sl;gt.CanceledError=gi;gt.CancelToken=cE;gt.isCancel=o0;gt.VERSION=h0;gt.toFormData=Cu;gt.AxiosError=mt;gt.Cancel=gt.CanceledError;gt.all=function(a){return Promise.all(a)};gt.spread=uE;gt.isAxiosError=dE;gt.mergeConfig=ol;gt.AxiosHeaders=Oa;gt.formToJSON=e=>i0(le.isHTMLForm(e)?new FormData(e):e);gt.getAdapter=m0.getAdapter;gt.HttpStatusCode=Hm;gt.default=gt;const{Axios:CD,AxiosError:OD,CanceledError:RD,isCancel:TD,CancelToken:DD,VERSION:zD,all:kD,Cancel:MD,isAxiosError:UD,spread:LD,toFormData:BD,AxiosHeaders:qD,HttpStatusCode:ID,formToJSON:$D,getAdapter:FD,mergeConfig:HD}=gt,fE="medileser:draft:v1",uu="medileser:recovery:v1",du="medileser:recovery:intent",mE="vi.auth",hE="vi_auth",pE="medileser.selectedBank",gE=1440*60*1e3,Ah=e=>{if(!e)return!1;const a=Date.parse(e);return Number.isNaN(a)?!1:Date.now()-a>gE},om=e=>{const{userId:a,bankId:s,oiId:i,type:c,bancadaId:d,isNew:f}=e;if(!a||s==null)return null;const h=i!=null?String(i):"new",v=`${fE}:u${a}:b${s}:oi:${h}`;if(c==="header")return`${v}:header`;const g=f?"new":d;return g==null?null:`${v}:bancada:${g}`},bo=(e,a,s)=>{try{localStorage.setItem(e,JSON.stringify(a))}catch{}s&&b0(s)},cm=e=>{try{const a=localStorage.getItem(e);if(!a)return null;const s=JSON.parse(a);return!s||typeof s!="object"?null:Ah(s.ts)?(localStorage.removeItem(e),null):s}catch{return null}},jr=e=>{try{localStorage.removeItem(e)}catch{}},b0=e=>{try{localStorage.setItem(uu,JSON.stringify(e))}catch{}},v0=()=>{try{const e=localStorage.getItem(uu);if(!e)return null;const a=JSON.parse(e);return!a||typeof a!="object"?null:Ah(a.ts)?(localStorage.removeItem(uu),null):a}catch{return null}},bE=()=>{try{localStorage.removeItem(uu)}catch{}},vE=e=>{const a=e.userId??null,s=e.bankId??null,i=e.oiId??null;if(!a||s==null||!i)return;const c=v0(),d={version:1,ts:new Date().toISOString(),userId:a,bankId:s,oiId:i,oiCode:e.oiCode??c?.oiCode??null,returnTo:e.returnTo??c?.returnTo??`/oi/${i}?mode=edit`,mode:"edit",modal:e.modal??c?.modal};b0(d)},yE=e=>{const a={version:1,ts:new Date().toISOString(),userId:e.userId,bankId:e.bankId,oiId:e.oiId,modal:e.modal,returnTo:e.returnTo};try{sessionStorage.setItem(du,JSON.stringify(a))}catch{}},xE=()=>{try{const e=sessionStorage.getItem(du);if(!e)return null;const a=JSON.parse(e);return!a||typeof a!="object"?null:Ah(a.ts)?(sessionStorage.removeItem(du),null):a}catch{return null}},um=()=>{try{sessionStorage.removeItem(du)}catch{}},NE=()=>{try{const e=localStorage.getItem(mE)??localStorage.getItem(hE);if(!e)return{userId:null,bankId:null};const a=JSON.parse(e),s=Number(a.userId??a.id),i=a.bancoId!=null?Number(a.bancoId):null;return{userId:Number.isFinite(s)?s:null,bankId:i!=null&&Number.isFinite(i)?i:null}}catch{}return{userId:null,bankId:null}},jE=()=>{try{const e=localStorage.getItem(pE);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}},Vm=(e,a)=>{const s=v0();if(!s)return{target:null};if(!e||s.userId!==e)return{target:"/home",reason:"user"};if(a==null||s.bankId!==a)return{target:"/home",reason:"bank"};const i=s.returnTo||`/oi/${s.oiId}?mode=edit`,c=i==="/oi"||i==="/oi/"?`/oi/${s.oiId}?mode=edit`:i;return yE(s),{target:c,recovery:s}},dy="http://127.0.0.1:8000",bi="openOiId",Ru="vi.currentOI",y0="vi.auth",x0="vi_auth",SE="medileser.selectedBank",wE="medileser:selectedBank",Zm="medileser.pendingToast",ko="medileser.pendingAction",_E="medileser:auth-expired",Gm="medileser.sessionUserId",Pm="medileser.sessionBankId",N0=()=>typeof window<"u"?window.location.port==="5173"?dy:window.location.origin:dy,Ye=gt.create({baseURL:N0()}),j0=gt.create({baseURL:N0()}),S0=e=>{try{const a=localStorage.getItem(y0)??localStorage.getItem(x0);if(a){const{token:s}=JSON.parse(a);s&&(e.headers&&typeof e.headers.set=="function"?e.headers.set("Authorization",`Bearer ${s}`):e.headers={...e.headers||{},Authorization:`Bearer ${s}`})}}catch{}return e};Ye.interceptors.request.use(S0);j0.interceptors.request.use(S0);function EE(){try{const e=sessionStorage.getItem(bi);if(!e)return null;const a=Number(e);return Number.isFinite(a)&&a>0?a:null}catch{return null}}const w0=()=>{try{const e=sessionStorage.getItem(Ru);if(!e)return null;const a=JSON.parse(e),s=Number(a?.id);return Number.isFinite(s)&&s>0?s:null}catch{return null}};function AE(e){try{sessionStorage.setItem(bi,String(e))}catch{}}function _0(){try{sessionStorage.removeItem(bi)}catch{}}async function Mo(){const e=EE();if(e)try{await j0.post(`/oi/${e}/close`)}catch{}finally{_0()}}function CE(e){try{sessionStorage.setItem(Zm,e)}catch{}}function OE(){try{const e=sessionStorage.getItem(Zm);return e?(sessionStorage.removeItem(Zm),e):null}catch{return null}}function RE(e){try{sessionStorage.setItem(ko,JSON.stringify(e))}catch{}}function TE(){try{const e=sessionStorage.getItem(ko);return e?JSON.parse(e):null}catch{return null}}function Jl(){try{sessionStorage.removeItem(ko)}catch{}}function E0(){try{const e=sessionStorage.getItem(Gm);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}}function fy(e){try{e==null?sessionStorage.removeItem(Gm):sessionStorage.setItem(Gm,String(e))}catch{}}function A0(){try{const e=sessionStorage.getItem(Pm);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}}function fu(e){try{e==null?sessionStorage.removeItem(Pm):sessionStorage.setItem(Pm,String(e))}catch{}}function C0(e){const a=E0();if(e==null)return!1;if(a===null||a===e)return fy(e),!1;try{const s=[];for(let i=0;i<sessionStorage.length;i+=1){const c=sessionStorage.key(i);c&&(c.startsWith("oi:")||c===bi||c===Ru||c===ko)&&s.push(c)}s.forEach(i=>sessionStorage.removeItem(i))}catch{}return fy(e),fu(null),!0}function DE(e){const a=A0();if(e==null)return!1;if(a===null||a===e)return fu(e),!1;try{const s=[];for(let i=0;i<sessionStorage.length;i+=1){const c=sessionStorage.key(i);c&&(c.startsWith("oi:")||c===bi||c===Ru||c===ko)&&s.push(c)}s.forEach(i=>sessionStorage.removeItem(i))}catch{}return fu(e),!0}function zE(){try{localStorage.removeItem(y0),localStorage.removeItem(x0),localStorage.removeItem(SE)}catch{}finally{try{window.dispatchEvent(new Event(wE))}catch{}}try{sessionStorage.removeItem(Ru),sessionStorage.removeItem(bi)}catch{}}let my=!1;async function O0(e){if(!my){my=!0;try{await Mo()}finally{zE();const a=e?.pending?"Sesion expirada. Inicia sesion para guardar. Tu borrador esta guardado.":"Sesion invalida o expirada";if(CE(a),typeof window<"u"&&window.location.pathname!=="/login"){const s=e?.returnTo,i=s?`?returnTo=${encodeURIComponent(s)}${e?.pending?"&pending=1":""}`:"";window.location.replace(`/login${i}`)}}}}const go=e=>{const a=e?.response?.status,s=String(e?.response?.headers?.["x-code"]??"").toUpperCase();if(s==="PASSWORD_REQUIRED"||s==="WRONG_PASSWORD")return!1;if(a===401)return!0;const i=e?.response?.data?.detail;return!!(typeof i=="string"&&/token requerido/i.test(i))},dm=(e,a)=>{const s=a.match(e);if(!s)return null;const i=Number(s[1]);return Number.isFinite(i)?i:null},kE=e=>{if(typeof window>"u")return null;const a=String(e?.config?.method??"").toUpperCase(),s=String(e?.config?.url??""),i=`${window.location.pathname}${window.location.search}`;return a==="PUT"&&/\/oi\/\d+$/.test(s)?{type:"save_oi",route:i,oiId:dm(/\/oi\/(\d+)$/,s),ts:new Date().toISOString()}:a==="POST"&&s==="/oi"?{type:"save_oi",route:i,oiId:null,ts:new Date().toISOString()}:a==="POST"&&/\/oi\/\d+\/bancadas$/.test(s)?{type:"save_bancada",route:i,oiId:dm(/\/oi\/(\d+)\/bancadas$/,s),ts:new Date().toISOString()}:a==="PUT"&&/\/oi\/bancadas\/\d+$/.test(s)?{type:"save_bancada",route:i,bancadaId:dm(/\/oi\/bancadas\/(\d+)$/,s),ts:new Date().toISOString()}:null},ME=e=>{if(typeof window>"u")return;const{pathname:a,search:s,hash:i}=window.location,c=new URLSearchParams(s);(a==="/oi"||a.startsWith("/oi/"))&&c.set("mode","edit");const f=c.toString(),h=g=>`${g}${f?`?${f}`:""}${i??""}`;let v=h(a);if(a==="/oi"||a==="/oi/"){const g=e?.oiId??w0();g&&(v=h(`/oi/${g}`))}return v},UE=(e,a,s,i,c)=>{try{window.dispatchEvent(new CustomEvent(_E,{detail:{status:a,detail:e,url:s,method:i,pending:c}}))}catch{}};Ye.interceptors.response.use(e=>e,async e=>{const a=e?.response?.status,s=String(e?.config?.url??""),i=e?.response?.data?.detail,c=String(e?.config?.method??"").toUpperCase();if(!s.includes("/auth/login")&&go(e)){const f=kE(e);f&&RE(f),UE(i,a,s,c,f);const h=ME(f),v=NE(),g=v.bankId??jE(),y=f?.oiId??w0();if(v.userId&&g!=null&&y){const x=f?.type==="save_bancada"?{type:"bancada",bancadaId:f.bancadaId??null,isNew:f.bancadaId==null}:void 0;vE({userId:v.userId,bankId:g,oiId:y,returnTo:h,modal:x})}await O0({returnTo:h,pending:!!f})}return Promise.reject(e)});const Ch=async()=>{const{data:e}=await Ye.get("/catalogs");return e},Tu="medileser.selectedBank",mu="medileser:selectedBank";function ns(e,a){if((a??"").toLowerCase()==="admin")return"admin";const i=(e??"").toLowerCase();return i==="admin"||i==="administrator"||i==="administrador"?"administrator":i==="technician"||i==="user"||i==="tecnico"||i==="tcnico"?"technician":"standard"}function ci(e){return ns(e)==="technician"}function Du(e){return(e?.username??e?.user??"").toLowerCase()==="admin"}function jo(){try{const e=localStorage.getItem(Tu);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}}function R0(e){try{localStorage.setItem(Tu,String(e))}finally{window.dispatchEvent(new Event(mu))}}function T0(){try{localStorage.removeItem(Tu)}finally{window.dispatchEvent(new Event(mu))}}function LE(e){const a=()=>e(),s=i=>{i.key===Tu&&e()};return window.addEventListener(mu,a),window.addEventListener("storage",s),()=>{window.removeEventListener(mu,a),window.removeEventListener("storage",s)}}async function BE(e,a){try{await Ye.put("/auth/password",{old_password:e,new_password:a})}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo actualizar la contrasea";throw new Error(i)}}async function qE(e){try{await Mo();const{data:a}=await Ye.post("/auth/login",e);return localStorage.setItem("vi.auth",JSON.stringify(a)),C0(a.userId??null),!ci(a.role)&&a.bancoId!=null&&fu(a.bancoId),ci(a.role)?T0():R0(0),a}catch(a){const s=a?.response?.status,i=a?.response?.data?.detail,c=s===401?"Credenciales invlidas":i??a?.message??"Error de autenticacin";throw new Error(c)}}function Hn(){const e=localStorage.getItem("vi.auth")??localStorage.getItem("vi_auth");if(!e)return null;try{const a=JSON.parse(e),s=a.username??a.user??"",i=[a.firstName,a.lastName].filter(Boolean).join(" ")||void 0,c={user:a.user??a.username??"",userId:a.userId??a.id??0,username:s,firstName:a.firstName??"",lastName:a.lastName??"",fullName:a.fullName??i??s,bancoId:a.bancoId??null,token:a.token,techNumber:a.techNumber,role:ns(a.role,s),allowedModules:Array.isArray(a.allowedModules)?a.allowedModules.map(d=>d==="future_logistica"?"logistica":d):void 0};return c.username&&c.token?c:null}catch{return null}}async function D0(e){await Mo();const{data:a}=await Ye.put("/auth/banco",{bancoId:e});return localStorage.setItem("vi.auth",JSON.stringify(a)),C0(a.userId??null),DE(e),R0(e),a}function z0(){localStorage.removeItem("vi.auth"),localStorage.removeItem("vi_auth"),T0();try{sessionStorage.removeItem("vi.currentOI"),sessionStorage.removeItem("openOiId")}catch{}}async function IE(){await Mo(),z0()}function So({label:e,inputId:a,className:s="",inputRef:i,helpText:c,...d}){const[f,h]=p.useState(!1),v=a||d.name||void 0,{ref:g,...y}=d,x=i??g;return l.jsxs("div",{className:s,children:[e&&l.jsx("label",{className:"form-label",htmlFor:v,children:e}),l.jsxs("div",{className:"input-group",children:[l.jsx("input",{...y,id:v,type:f?"text":"password",className:"form-control",ref:x}),l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:()=>h(j=>!j),tabIndex:-1,"aria-label":f?"Ocultar contrasea":"Mostrar contrasea",children:l.jsx("i",{className:`ti ${f?"ti-eye-off":"ti-eye"}`})})]}),c&&l.jsx("div",{className:"form-text",children:c})]})}function vi({show:e=!0,label:a="Cargando..."}){return e?l.jsxs("div",{className:"vi-spinner-overlay",role:"status","aria-live":"polite","aria-label":a,children:[l.jsx("img",{className:"vi-spinner-logo",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"","aria-hidden":"true"}),l.jsx("span",{className:"visually-hidden",children:a})]}):null}const k0=p.createContext(null);function $E(e){return e==="success"?"success":e==="error"?"danger":e==="warning"?"warning":"secondary"}function FE({children:e}){const[a,s]=p.useState([]),i=p.useCallback(d=>{const f=Date.now()+Math.random(),{kind:h="info",duration:v=3500,...g}=d,y={id:f,kind:h,duration:v,...g};s(x=>[...x,y]),window.setTimeout(()=>{s(x=>x.filter(j=>j.id!==f))},v)},[]),c=d=>s(f=>f.filter(h=>h.id!==d));return l.jsxs(k0.Provider,{value:{push:i},children:[e,l.jsx("div",{className:"vi-toast-container position-fixed top-0 end-0 p-3",children:a.map(d=>l.jsx("div",{className:`toast show align-items-center text-bg-${$E(d.kind)} border-0 mb-2`,role:"alert",children:l.jsxs("div",{className:"d-flex",children:[l.jsxs("div",{className:"toast-body",children:[d.title&&l.jsx("strong",{className:"me-2",children:d.title}),d.message]}),l.jsx("button",{className:"btn-close btn-close-white me-2 m-auto","aria-label":"Close",onClick:()=>c(d.id)})]})},d.id))})]})}function ml(){const e=p.useContext(k0);if(!e)throw new Error("useToast must be used inside <ToastProvider>");return{toast:e.push}}const Oh="medileser.theme",Rh="adminator-theme",Qm=new Set;function hy(e){return e==="light"||e==="dark"}function HE(){try{const e=localStorage.getItem(Oh);if(hy(e))return e;const a=localStorage.getItem(Rh);return hy(a)?a:null}catch{return null}}function M0(){return HE()??"light"}function U0(e){if(typeof document>"u")return;const a=document.documentElement;a.setAttribute("data-theme",e),a.setAttribute("data-bs-theme",e),a.style.colorScheme=e}function VE(){const e=M0();try{localStorage.setItem(Oh,e)}catch{}try{localStorage.setItem(Rh,e)}catch{}return U0(e),e}function ZE(e){try{localStorage.setItem(Oh,e)}catch{}try{localStorage.setItem(Rh,e)}catch{}U0(e),typeof window<"u"&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("adminator:themeChanged",{detail:{theme:e}})),Qm.forEach(a=>a(e))}function GE(e){return Qm.add(e),()=>{Qm.delete(e)}}function L0({className:e}){const a=p.useId(),[s,i]=p.useState(()=>M0());p.useEffect(()=>GE(i),[]);const c=s==="dark";return l.jsx("div",{className:`theme-toggle d-flex ai-c ${e??""}`.trim(),children:l.jsxs("div",{className:"form-check form-switch d-flex ai-c",style:{margin:0,padding:0},children:[l.jsxs("label",{className:"form-check-label me-2 text-nowrap c-grey-700",htmlFor:a,style:{fontSize:"12px",marginRight:"8px"},children:[l.jsx("i",{className:"ti-sun",style:{marginRight:"4px"}}),l.jsx("span",{className:"theme-label",children:"Claro"})]}),l.jsx("input",{className:"form-check-input",type:"checkbox",id:a,checked:c,onChange:d=>ZE(d.target.checked?"dark":"light"),"aria-label":"Cambiar tema",style:{margin:0}}),l.jsxs("label",{className:"form-check-label ms-2 text-nowrap c-grey-700",htmlFor:a,style:{fontSize:"12px",marginLeft:"8px"},children:[l.jsx("span",{className:"theme-label",children:"Oscuro"}),l.jsx("i",{className:"ti-moon",style:{marginLeft:"4px"}})]})]})})}function PE(){const{register:e,handleSubmit:a}=wu({defaultValues:{username:"",password:""}}),{toast:s}=ml(),i=new URLSearchParams(window.location.search),c=i.get("returnTo")??"",d=c.startsWith("/")?c:"/home",f=i.get("pending")==="1",[h,v]=p.useState(!1),g=p.useRef(d),[y,x]=p.useState(!1),[j,H]=p.useState(0),[_,A]=p.useState(!1),{data:R,isLoading:F,error:z,refetch:te}=il({queryKey:["catalogs"],queryFn:Ch,enabled:y}),M=R?.bancos??[];p.useEffect(()=>{const fe=OE();fe&&s({kind:"error",message:fe})},[s]),p.useEffect(()=>{y&&(j>0||M.length>0&&H(M[0].id))},[j,M,y]);const D=async fe=>{try{v(!0);const Re=E0(),Ce=await qE(fe),ve=Re!=null&&Ce.userId&&Re!==Ce.userId,_e=Vm(Ce.userId,Ce.bancoId??0);if(_e.target?g.current=_e.target:f||ve?g.current="/home":g.current=d,ci(Ce.role)){x(!0),s({kind:"info",title:"Banco",message:"Seleccione el banco para continuar."});return}window.location.replace(g.current)}catch(Re){const Ce=Re?.message??Re?.response?.data?.detail??(typeof Re=="string"?Re:"Error de autenticacin");s({kind:"error",title:"Login",message:String(Ce)})}finally{v(!1)}},K=j>0&&!_&&!F,q=async()=>{if(K)try{A(!0);const fe=A0(),Re=fe!=null&&fe!==j,Ce=await D0(j),ve=Vm(Ce.userId,Ce.bancoId??j);ve.target?g.current=ve.target:(f||Re)&&(g.current="/home"),window.location.replace(g.current)}catch(fe){const Re=fe?.response?.data?.detail??fe?.message??"No se pudo guardar el banco.";s({kind:"error",title:"Banco",message:String(Re)})}finally{A(!1)}},V=()=>{z0(),x(!1),H(0)};return l.jsxs("div",{className:"vi-login",children:[l.jsx(vi,{show:h||_,label:_?"Guardando banco...":"Validando credenciales..."}),l.jsx("div",{className:"vi-login__theme",children:l.jsx(L0,{})}),l.jsxs("div",{className:"vi-login__split",children:[l.jsx("section",{className:"vi-login__left",children:l.jsx("div",{className:"text-center text-md-start",children:l.jsx("h1",{className:"vi-title display-6 mb-0",children:"ACCESO AL SISTEMA MEDILESER APP"})})}),l.jsx("section",{className:"vi-login__right",children:l.jsx("div",{className:"card shadow-sm vi-login__card",children:l.jsxs("div",{className:"card-body p-4 p-md-5",children:[l.jsx("h2",{className:"h4 text-center mb-4",children:"Bienvenido"}),l.jsxs("form",{onSubmit:a(D),className:"row g-3",children:[l.jsxs("div",{className:"col-md-6",children:[l.jsx("label",{htmlFor:"username",className:"form-label",children:"Usuario"}),l.jsx("input",{id:"username",className:"form-control",autoFocus:!0,autoComplete:"username",...e("username",{required:!0})})]}),l.jsx("div",{className:"col-md-6",children:l.jsx(So,{label:"Contrasea",inputId:"password",autoComplete:"current-password",...e("password",{required:!0})})}),l.jsx("div",{className:"col-12 d-grid",children:l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h||y,"aria-busy":h?"true":"false",children:h?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Ingresando..."]}):"Ingresar"})})]})]})})})]}),y&&l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:l.jsx("div",{className:"modal-dialog modal-dialog-centered",children:l.jsxs("div",{className:"modal-content",children:[l.jsx("div",{className:"modal-header",children:l.jsx("h5",{className:"modal-title",children:"Seleccionar banco"})}),l.jsxs("div",{className:"modal-body",children:[l.jsx("p",{className:"text-muted mb-3",children:"Seleccione el banco de trabajo para continuar."}),l.jsx("label",{className:"form-label",htmlFor:"bankId",children:"Banco"}),l.jsx("select",{id:"bankId",className:"form-select",value:j||"",onChange:fe=>H(Number(fe.target.value)),disabled:F||_,children:M.map(fe=>l.jsx("option",{value:fe.id,children:fe.name},fe.id))}),z?l.jsxs("div",{className:"alert alert-danger mt-3 mb-0",role:"alert",children:["No se pudieron cargar los bancos.",l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger ms-2",onClick:()=>te(),children:"Reintentar"})]}):null]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:V,disabled:_,children:"Cancelar"}),l.jsx("button",{type:"button",className:"btn btn-primary",disabled:!K,onClick:q,children:_?"Guardando...":"Continuar"})]})]})})})]})}const py=(e,a,s)=>{if(e&&"reportValidity"in e){const i=He(s,a);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},Ym=(e,a)=>{for(const s in a.fields){const i=a.fields[s];i&&i.ref&&"reportValidity"in i.ref?py(i.ref,s,e):i&&i.refs&&i.refs.forEach(c=>py(c,s,e))}},gy=(e,a)=>{a.shouldUseNativeValidation&&Ym(e,a);const s={};for(const i in e){const c=He(a.fields,i),d=Object.assign(e[i]||{},{ref:c&&c.ref});if(QE(a.names||Object.keys(e),i)){const f=Object.assign({},He(s,i));Ft(f,"root",d),Ft(s,i,f)}else Ft(s,i,d)}return s},QE=(e,a)=>{const s=by(a);return e.some(i=>by(i).match(`^${s}\\.\\d+`))};function by(e){return e.replace(/\]|\[/g,"")}function Oe(e,a,s){function i(h,v){var g;Object.defineProperty(h,"_zod",{value:h._zod??{},enumerable:!1}),(g=h._zod).traits??(g.traits=new Set),h._zod.traits.add(e),a(h,v);for(const y in f.prototype)y in h||Object.defineProperty(h,y,{value:f.prototype[y].bind(h)});h._zod.constr=f,h._zod.def=v}const c=s?.Parent??Object;class d extends c{}Object.defineProperty(d,"name",{value:e});function f(h){var v;const g=s?.Parent?new d:this;i(g,h),(v=g._zod).deferred??(v.deferred=[]);for(const y of g._zod.deferred)y();return g}return Object.defineProperty(f,"init",{value:i}),Object.defineProperty(f,Symbol.hasInstance,{value:h=>s?.Parent&&h instanceof s.Parent?!0:h?._zod?.traits?.has(e)}),Object.defineProperty(f,"name",{value:e}),f}class ii extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class B0 extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}const q0={};function cl(e){return q0}function YE(e){const a=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,c])=>a.indexOf(+i)===-1).map(([i,c])=>c)}function Km(e,a){return typeof a=="bigint"?a.toString():a}function Th(e){return{get value(){{const a=e();return Object.defineProperty(this,"value",{value:a}),a}}}}function Dh(e){return e==null}function zh(e){const a=e.startsWith("^")?1:0,s=e.endsWith("$")?e.length-1:e.length;return e.slice(a,s)}function KE(e,a){const s=(e.toString().split(".")[1]||"").length,i=a.toString();let c=(i.split(".")[1]||"").length;if(c===0&&/\d?e-\d?/.test(i)){const v=i.match(/\d?e-(\d?)/);v?.[1]&&(c=Number.parseInt(v[1]))}const d=s>c?s:c,f=Number.parseInt(e.toFixed(d).replace(".","")),h=Number.parseInt(a.toFixed(d).replace(".",""));return f%h/10**d}const vy=Symbol("evaluating");function Wt(e,a,s){let i;Object.defineProperty(e,a,{get(){if(i!==vy)return i===void 0&&(i=vy,i=s()),i},set(c){Object.defineProperty(e,a,{value:c})},configurable:!0})}function hl(e,a,s){Object.defineProperty(e,a,{value:s,writable:!0,enumerable:!0,configurable:!0})}function pl(...e){const a={};for(const s of e){const i=Object.getOwnPropertyDescriptors(s);Object.assign(a,i)}return Object.defineProperties({},a)}function yy(e){return JSON.stringify(e)}const I0="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function hu(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const XE=Th(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function wo(e){if(hu(e)===!1)return!1;const a=e.constructor;if(a===void 0)return!0;const s=a.prototype;return!(hu(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}function $0(e){return wo(e)?{...e}:Array.isArray(e)?[...e]:e}const JE=new Set(["string","number","symbol"]);function zu(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Er(e,a,s){const i=new e._zod.constr(a??e._zod.def);return(!a||s?.parent)&&(i._zod.parent=e),i}function at(e){const a=e;if(!a)return{};if(typeof a=="string")return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");a.error=a.message}return delete a.message,typeof a.error=="string"?{...a,error:()=>a.error}:a}function WE(e){return Object.keys(e).filter(a=>e[a]._zod.optin==="optional"&&e[a]._zod.optout==="optional")}const eA={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function tA(e,a){const s=e._zod.def,i=pl(e._zod.def,{get shape(){const c={};for(const d in a){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);a[d]&&(c[d]=s.shape[d])}return hl(this,"shape",c),c},checks:[]});return Er(e,i)}function nA(e,a){const s=e._zod.def,i=pl(e._zod.def,{get shape(){const c={...e._zod.def.shape};for(const d in a){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);a[d]&&delete c[d]}return hl(this,"shape",c),c},checks:[]});return Er(e,i)}function aA(e,a){if(!wo(a))throw new Error("Invalid input to extend: expected a plain object");const s=e._zod.def.checks;if(s&&s.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const c=pl(e._zod.def,{get shape(){const d={...e._zod.def.shape,...a};return hl(this,"shape",d),d},checks:[]});return Er(e,c)}function sA(e,a){if(!wo(a))throw new Error("Invalid input to safeExtend: expected a plain object");const s={...e._zod.def,get shape(){const i={...e._zod.def.shape,...a};return hl(this,"shape",i),i},checks:e._zod.def.checks};return Er(e,s)}function rA(e,a){const s=pl(e._zod.def,{get shape(){const i={...e._zod.def.shape,...a._zod.def.shape};return hl(this,"shape",i),i},get catchall(){return a._zod.def.catchall},checks:[]});return Er(e,s)}function lA(e,a,s){const i=pl(a._zod.def,{get shape(){const c=a._zod.def.shape,d={...c};if(s)for(const f in s){if(!(f in c))throw new Error(`Unrecognized key: "${f}"`);s[f]&&(d[f]=e?new e({type:"optional",innerType:c[f]}):c[f])}else for(const f in c)d[f]=e?new e({type:"optional",innerType:c[f]}):c[f];return hl(this,"shape",d),d},checks:[]});return Er(a,i)}function iA(e,a,s){const i=pl(a._zod.def,{get shape(){const c=a._zod.def.shape,d={...c};if(s)for(const f in s){if(!(f in d))throw new Error(`Unrecognized key: "${f}"`);s[f]&&(d[f]=new e({type:"nonoptional",innerType:c[f]}))}else for(const f in c)d[f]=new e({type:"nonoptional",innerType:c[f]});return hl(this,"shape",d),d},checks:[]});return Er(a,i)}function ri(e,a=0){if(e.aborted===!0)return!0;for(let s=a;s<e.issues.length;s++)if(e.issues[s]?.continue!==!0)return!0;return!1}function F0(e,a){return a.map(s=>{var i;return(i=s).path??(i.path=[]),s.path.unshift(e),s})}function Gc(e){return typeof e=="string"?e:e?.message}function ul(e,a,s){const i={...e,path:e.path??[]};if(!e.message){const c=Gc(e.inst?._zod.def?.error?.(e))??Gc(a?.error?.(e))??Gc(s.customError?.(e))??Gc(s.localeError?.(e))??"Invalid input";i.message=c}return delete i.inst,delete i.continue,a?.reportInput||delete i.input,i}function kh(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function _o(...e){const[a,s,i]=e;return typeof a=="string"?{message:a,code:"custom",input:s,inst:i}:{...a}}const H0=(e,a)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:a,enumerable:!1}),e.message=JSON.stringify(a,Km,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Mh=Oe("$ZodError",H0),ku=Oe("$ZodError",H0,{Parent:Error});function oA(e,a=s=>s.message){const s={},i=[];for(const c of e.issues)c.path.length>0?(s[c.path[0]]=s[c.path[0]]||[],s[c.path[0]].push(a(c))):i.push(a(c));return{formErrors:i,fieldErrors:s}}function cA(e,a=s=>s.message){const s={_errors:[]},i=c=>{for(const d of c.issues)if(d.code==="invalid_union"&&d.errors.length)d.errors.map(f=>i({issues:f}));else if(d.code==="invalid_key")i({issues:d.issues});else if(d.code==="invalid_element")i({issues:d.issues});else if(d.path.length===0)s._errors.push(a(d));else{let f=s,h=0;for(;h<d.path.length;){const v=d.path[h];h===d.path.length-1?(f[v]=f[v]||{_errors:[]},f[v]._errors.push(a(d))):f[v]=f[v]||{_errors:[]},f=f[v],h++}}};return i(e),s}const Mu=e=>(a,s,i,c)=>{const d=i?Object.assign(i,{async:!1}):{async:!1},f=a._zod.run({value:s,issues:[]},d);if(f instanceof Promise)throw new ii;if(f.issues.length){const h=new(c?.Err??e)(f.issues.map(v=>ul(v,d,cl())));throw I0(h,c?.callee),h}return f.value},uA=Mu(ku),Uu=e=>async(a,s,i,c)=>{const d=i?Object.assign(i,{async:!0}):{async:!0};let f=a._zod.run({value:s,issues:[]},d);if(f instanceof Promise&&(f=await f),f.issues.length){const h=new(c?.Err??e)(f.issues.map(v=>ul(v,d,cl())));throw I0(h,c?.callee),h}return f.value},dA=Uu(ku),Lu=e=>(a,s,i)=>{const c=i?{...i,async:!1}:{async:!1},d=a._zod.run({value:s,issues:[]},c);if(d instanceof Promise)throw new ii;return d.issues.length?{success:!1,error:new(e??Mh)(d.issues.map(f=>ul(f,c,cl())))}:{success:!0,data:d.value}},fA=Lu(ku),Bu=e=>async(a,s,i)=>{const c=i?Object.assign(i,{async:!0}):{async:!0};let d=a._zod.run({value:s,issues:[]},c);return d instanceof Promise&&(d=await d),d.issues.length?{success:!1,error:new e(d.issues.map(f=>ul(f,c,cl())))}:{success:!0,data:d.value}},mA=Bu(ku),hA=e=>(a,s,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Mu(e)(a,s,c)},pA=e=>(a,s,i)=>Mu(e)(a,s,i),gA=e=>async(a,s,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Uu(e)(a,s,c)},bA=e=>async(a,s,i)=>Uu(e)(a,s,i),vA=e=>(a,s,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Lu(e)(a,s,c)},yA=e=>(a,s,i)=>Lu(e)(a,s,i),xA=e=>async(a,s,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Bu(e)(a,s,c)},NA=e=>async(a,s,i)=>Bu(e)(a,s,i),jA=/^[cC][^\s-]{8,}$/,SA=/^[0-9a-z]+$/,wA=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,_A=/^[0-9a-vA-V]{20}$/,EA=/^[A-Za-z0-9]{27}$/,AA=/^[a-zA-Z0-9_-]{21}$/,CA=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,OA=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,xy=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,RA=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,TA="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function DA(){return new RegExp(TA,"u")}const zA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,kA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,MA=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,UA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,LA=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,V0=/^[A-Za-z0-9_-]*$/,BA=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,qA=/^\+(?:[0-9]){6,14}[0-9]$/,Z0="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",IA=new RegExp(`^${Z0}$`);function G0(e){const a="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${a}`:e.precision===0?`${a}:[0-5]\\d`:`${a}:[0-5]\\d\\.\\d{${e.precision}}`:`${a}(?::[0-5]\\d(?:\\.\\d+)?)?`}function $A(e){return new RegExp(`^${G0(e)}$`)}function FA(e){const a=G0({precision:e.precision}),s=["Z"];e.local&&s.push(""),e.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${a}(?:${s.join("|")})`;return new RegExp(`^${Z0}T(?:${i})$`)}const HA=e=>{const a=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${a}$`)},VA=/^-?\d+$/,ZA=/^-?\d+(?:\.\d+)?/,GA=/^[^A-Z]*$/,PA=/^[^a-z]*$/,Ra=Oe("$ZodCheck",(e,a)=>{var s;e._zod??(e._zod={}),e._zod.def=a,(s=e._zod).onattach??(s.onattach=[])}),P0={number:"number",bigint:"bigint",object:"date"},Q0=Oe("$ZodCheckLessThan",(e,a)=>{Ra.init(e,a);const s=P0[typeof a.value];e._zod.onattach.push(i=>{const c=i._zod.bag,d=(a.inclusive?c.maximum:c.exclusiveMaximum)??Number.POSITIVE_INFINITY;a.value<d&&(a.inclusive?c.maximum=a.value:c.exclusiveMaximum=a.value)}),e._zod.check=i=>{(a.inclusive?i.value<=a.value:i.value<a.value)||i.issues.push({origin:s,code:"too_big",maximum:a.value,input:i.value,inclusive:a.inclusive,inst:e,continue:!a.abort})}}),Y0=Oe("$ZodCheckGreaterThan",(e,a)=>{Ra.init(e,a);const s=P0[typeof a.value];e._zod.onattach.push(i=>{const c=i._zod.bag,d=(a.inclusive?c.minimum:c.exclusiveMinimum)??Number.NEGATIVE_INFINITY;a.value>d&&(a.inclusive?c.minimum=a.value:c.exclusiveMinimum=a.value)}),e._zod.check=i=>{(a.inclusive?i.value>=a.value:i.value>a.value)||i.issues.push({origin:s,code:"too_small",minimum:a.value,input:i.value,inclusive:a.inclusive,inst:e,continue:!a.abort})}}),QA=Oe("$ZodCheckMultipleOf",(e,a)=>{Ra.init(e,a),e._zod.onattach.push(s=>{var i;(i=s._zod.bag).multipleOf??(i.multipleOf=a.value)}),e._zod.check=s=>{if(typeof s.value!=typeof a.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof s.value=="bigint"?s.value%a.value===BigInt(0):KE(s.value,a.value)===0)||s.issues.push({origin:typeof s.value,code:"not_multiple_of",divisor:a.value,input:s.value,inst:e,continue:!a.abort})}}),YA=Oe("$ZodCheckNumberFormat",(e,a)=>{Ra.init(e,a),a.format=a.format||"float64";const s=a.format?.includes("int"),i=s?"int":"number",[c,d]=eA[a.format];e._zod.onattach.push(f=>{const h=f._zod.bag;h.format=a.format,h.minimum=c,h.maximum=d,s&&(h.pattern=VA)}),e._zod.check=f=>{const h=f.value;if(s){if(!Number.isInteger(h)){f.issues.push({expected:i,format:a.format,code:"invalid_type",continue:!1,input:h,inst:e});return}if(!Number.isSafeInteger(h)){h>0?f.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,continue:!a.abort}):f.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,continue:!a.abort});return}}h<c&&f.issues.push({origin:"number",input:h,code:"too_small",minimum:c,inclusive:!0,inst:e,continue:!a.abort}),h>d&&f.issues.push({origin:"number",input:h,code:"too_big",maximum:d,inst:e})}}),KA=Oe("$ZodCheckMaxLength",(e,a)=>{var s;Ra.init(e,a),(s=e._zod.def).when??(s.when=i=>{const c=i.value;return!Dh(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag.maximum??Number.POSITIVE_INFINITY;a.maximum<c&&(i._zod.bag.maximum=a.maximum)}),e._zod.check=i=>{const c=i.value;if(c.length<=a.maximum)return;const f=kh(c);i.issues.push({origin:f,code:"too_big",maximum:a.maximum,inclusive:!0,input:c,inst:e,continue:!a.abort})}}),XA=Oe("$ZodCheckMinLength",(e,a)=>{var s;Ra.init(e,a),(s=e._zod.def).when??(s.when=i=>{const c=i.value;return!Dh(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;a.minimum>c&&(i._zod.bag.minimum=a.minimum)}),e._zod.check=i=>{const c=i.value;if(c.length>=a.minimum)return;const f=kh(c);i.issues.push({origin:f,code:"too_small",minimum:a.minimum,inclusive:!0,input:c,inst:e,continue:!a.abort})}}),JA=Oe("$ZodCheckLengthEquals",(e,a)=>{var s;Ra.init(e,a),(s=e._zod.def).when??(s.when=i=>{const c=i.value;return!Dh(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag;c.minimum=a.length,c.maximum=a.length,c.length=a.length}),e._zod.check=i=>{const c=i.value,d=c.length;if(d===a.length)return;const f=kh(c),h=d>a.length;i.issues.push({origin:f,...h?{code:"too_big",maximum:a.length}:{code:"too_small",minimum:a.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!a.abort})}}),qu=Oe("$ZodCheckStringFormat",(e,a)=>{var s,i;Ra.init(e,a),e._zod.onattach.push(c=>{const d=c._zod.bag;d.format=a.format,a.pattern&&(d.patterns??(d.patterns=new Set),d.patterns.add(a.pattern))}),a.pattern?(s=e._zod).check??(s.check=c=>{a.pattern.lastIndex=0,!a.pattern.test(c.value)&&c.issues.push({origin:"string",code:"invalid_format",format:a.format,input:c.value,...a.pattern?{pattern:a.pattern.toString()}:{},inst:e,continue:!a.abort})}):(i=e._zod).check??(i.check=()=>{})}),WA=Oe("$ZodCheckRegex",(e,a)=>{qu.init(e,a),e._zod.check=s=>{a.pattern.lastIndex=0,!a.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:a.pattern.toString(),inst:e,continue:!a.abort})}}),eC=Oe("$ZodCheckLowerCase",(e,a)=>{a.pattern??(a.pattern=GA),qu.init(e,a)}),tC=Oe("$ZodCheckUpperCase",(e,a)=>{a.pattern??(a.pattern=PA),qu.init(e,a)}),nC=Oe("$ZodCheckIncludes",(e,a)=>{Ra.init(e,a);const s=zu(a.includes),i=new RegExp(typeof a.position=="number"?`^.{${a.position}}${s}`:s);a.pattern=i,e._zod.onattach.push(c=>{const d=c._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(i)}),e._zod.check=c=>{c.value.includes(a.includes,a.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:a.includes,input:c.value,inst:e,continue:!a.abort})}}),aC=Oe("$ZodCheckStartsWith",(e,a)=>{Ra.init(e,a);const s=new RegExp(`^${zu(a.prefix)}.*`);a.pattern??(a.pattern=s),e._zod.onattach.push(i=>{const c=i._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(s)}),e._zod.check=i=>{i.value.startsWith(a.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:a.prefix,input:i.value,inst:e,continue:!a.abort})}}),sC=Oe("$ZodCheckEndsWith",(e,a)=>{Ra.init(e,a);const s=new RegExp(`.*${zu(a.suffix)}$`);a.pattern??(a.pattern=s),e._zod.onattach.push(i=>{const c=i._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(s)}),e._zod.check=i=>{i.value.endsWith(a.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:a.suffix,input:i.value,inst:e,continue:!a.abort})}}),rC=Oe("$ZodCheckOverwrite",(e,a)=>{Ra.init(e,a),e._zod.check=s=>{s.value=a.tx(s.value)}});class lC{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if(typeof a=="function"){a(this,{execution:"sync"}),a(this,{execution:"async"});return}const i=a.split(`
`).filter(f=>f),c=Math.min(...i.map(f=>f.length-f.trimStart().length)),d=i.map(f=>f.slice(c)).map(f=>" ".repeat(this.indent*2)+f);for(const f of d)this.content.push(f)}compile(){const a=Function,s=this?.args,c=[...(this?.content??[""]).map(d=>`  ${d}`)];return new a(...s,c.join(`
`))}}const iC={major:4,minor:1,patch:12},kn=Oe("$ZodType",(e,a)=>{var s;e??(e={}),e._zod.def=a,e._zod.bag=e._zod.bag||{},e._zod.version=iC;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const c of i)for(const d of c._zod.onattach)d(e);if(i.length===0)(s=e._zod).deferred??(s.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const c=(f,h,v)=>{let g=ri(f),y;for(const x of h){if(x._zod.def.when){if(!x._zod.def.when(f))continue}else if(g)continue;const j=f.issues.length,H=x._zod.check(f);if(H instanceof Promise&&v?.async===!1)throw new ii;if(y||H instanceof Promise)y=(y??Promise.resolve()).then(async()=>{await H,f.issues.length!==j&&(g||(g=ri(f,j)))});else{if(f.issues.length===j)continue;g||(g=ri(f,j))}}return y?y.then(()=>f):f},d=(f,h,v)=>{if(ri(f))return f.aborted=!0,f;const g=c(h,i,v);if(g instanceof Promise){if(v.async===!1)throw new ii;return g.then(y=>e._zod.parse(y,v))}return e._zod.parse(g,v)};e._zod.run=(f,h)=>{if(h.skipChecks)return e._zod.parse(f,h);if(h.direction==="backward"){const g=e._zod.parse({value:f.value,issues:[]},{...h,skipChecks:!0});return g instanceof Promise?g.then(y=>d(y,f,h)):d(g,f,h)}const v=e._zod.parse(f,h);if(v instanceof Promise){if(h.async===!1)throw new ii;return v.then(g=>c(g,i,h))}return c(v,i,h)}}e["~standard"]={validate:c=>{try{const d=fA(e,c);return d.success?{value:d.data}:{issues:d.error?.issues}}catch{return mA(e,c).then(f=>f.success?{value:f.data}:{issues:f.error?.issues})}},vendor:"zod",version:1}}),Uh=Oe("$ZodString",(e,a)=>{kn.init(e,a),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??HA(e._zod.bag),e._zod.parse=(s,i)=>{if(a.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),on=Oe("$ZodStringFormat",(e,a)=>{qu.init(e,a),Uh.init(e,a)}),oC=Oe("$ZodGUID",(e,a)=>{a.pattern??(a.pattern=OA),on.init(e,a)}),cC=Oe("$ZodUUID",(e,a)=>{if(a.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[a.version];if(i===void 0)throw new Error(`Invalid UUID version: "${a.version}"`);a.pattern??(a.pattern=xy(i))}else a.pattern??(a.pattern=xy());on.init(e,a)}),uC=Oe("$ZodEmail",(e,a)=>{a.pattern??(a.pattern=RA),on.init(e,a)}),dC=Oe("$ZodURL",(e,a)=>{on.init(e,a),e._zod.check=s=>{try{const i=s.value.trim(),c=new URL(i);a.hostname&&(a.hostname.lastIndex=0,a.hostname.test(c.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:BA.source,input:s.value,inst:e,continue:!a.abort})),a.protocol&&(a.protocol.lastIndex=0,a.protocol.test(c.protocol.endsWith(":")?c.protocol.slice(0,-1):c.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:a.protocol.source,input:s.value,inst:e,continue:!a.abort})),a.normalize?s.value=c.href:s.value=i;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:e,continue:!a.abort})}}}),fC=Oe("$ZodEmoji",(e,a)=>{a.pattern??(a.pattern=DA()),on.init(e,a)}),mC=Oe("$ZodNanoID",(e,a)=>{a.pattern??(a.pattern=AA),on.init(e,a)}),hC=Oe("$ZodCUID",(e,a)=>{a.pattern??(a.pattern=jA),on.init(e,a)}),pC=Oe("$ZodCUID2",(e,a)=>{a.pattern??(a.pattern=SA),on.init(e,a)}),gC=Oe("$ZodULID",(e,a)=>{a.pattern??(a.pattern=wA),on.init(e,a)}),bC=Oe("$ZodXID",(e,a)=>{a.pattern??(a.pattern=_A),on.init(e,a)}),vC=Oe("$ZodKSUID",(e,a)=>{a.pattern??(a.pattern=EA),on.init(e,a)}),yC=Oe("$ZodISODateTime",(e,a)=>{a.pattern??(a.pattern=FA(a)),on.init(e,a)}),xC=Oe("$ZodISODate",(e,a)=>{a.pattern??(a.pattern=IA),on.init(e,a)}),NC=Oe("$ZodISOTime",(e,a)=>{a.pattern??(a.pattern=$A(a)),on.init(e,a)}),jC=Oe("$ZodISODuration",(e,a)=>{a.pattern??(a.pattern=CA),on.init(e,a)}),SC=Oe("$ZodIPv4",(e,a)=>{a.pattern??(a.pattern=zA),on.init(e,a),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format="ipv4"})}),wC=Oe("$ZodIPv6",(e,a)=>{a.pattern??(a.pattern=kA),on.init(e,a),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format="ipv6"}),e._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:e,continue:!a.abort})}}}),_C=Oe("$ZodCIDRv4",(e,a)=>{a.pattern??(a.pattern=MA),on.init(e,a)}),EC=Oe("$ZodCIDRv6",(e,a)=>{a.pattern??(a.pattern=UA),on.init(e,a),e._zod.check=s=>{const i=s.value.split("/");try{if(i.length!==2)throw new Error;const[c,d]=i;if(!d)throw new Error;const f=Number(d);if(`${f}`!==d)throw new Error;if(f<0||f>128)throw new Error;new URL(`http://[${c}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:e,continue:!a.abort})}}});function K0(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const AC=Oe("$ZodBase64",(e,a)=>{a.pattern??(a.pattern=LA),on.init(e,a),e._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64"}),e._zod.check=s=>{K0(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:e,continue:!a.abort})}});function CC(e){if(!V0.test(e))return!1;const a=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),s=a.padEnd(Math.ceil(a.length/4)*4,"=");return K0(s)}const OC=Oe("$ZodBase64URL",(e,a)=>{a.pattern??(a.pattern=V0),on.init(e,a),e._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64url"}),e._zod.check=s=>{CC(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:e,continue:!a.abort})}}),RC=Oe("$ZodE164",(e,a)=>{a.pattern??(a.pattern=qA),on.init(e,a)});function TC(e,a=null){try{const s=e.split(".");if(s.length!==3)return!1;const[i]=s;if(!i)return!1;const c=JSON.parse(atob(i));return!("typ"in c&&c?.typ!=="JWT"||!c.alg||a&&(!("alg"in c)||c.alg!==a))}catch{return!1}}const DC=Oe("$ZodJWT",(e,a)=>{on.init(e,a),e._zod.check=s=>{TC(s.value,a.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:e,continue:!a.abort})}}),X0=Oe("$ZodNumber",(e,a)=>{kn.init(e,a),e._zod.pattern=e._zod.bag.pattern??ZA,e._zod.parse=(s,i)=>{if(a.coerce)try{s.value=Number(s.value)}catch{}const c=s.value;if(typeof c=="number"&&!Number.isNaN(c)&&Number.isFinite(c))return s;const d=typeof c=="number"?Number.isNaN(c)?"NaN":Number.isFinite(c)?void 0:"Infinity":void 0;return s.issues.push({expected:"number",code:"invalid_type",input:c,inst:e,...d?{received:d}:{}}),s}}),zC=Oe("$ZodNumber",(e,a)=>{YA.init(e,a),X0.init(e,a)}),kC=Oe("$ZodUnknown",(e,a)=>{kn.init(e,a),e._zod.parse=s=>s}),MC=Oe("$ZodNever",(e,a)=>{kn.init(e,a),e._zod.parse=(s,i)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:e}),s)});function Ny(e,a,s){e.issues.length&&a.issues.push(...F0(s,e.issues)),a.value[s]=e.value}const UC=Oe("$ZodArray",(e,a)=>{kn.init(e,a),e._zod.parse=(s,i)=>{const c=s.value;if(!Array.isArray(c))return s.issues.push({expected:"array",code:"invalid_type",input:c,inst:e}),s;s.value=Array(c.length);const d=[];for(let f=0;f<c.length;f++){const h=c[f],v=a.element._zod.run({value:h,issues:[]},i);v instanceof Promise?d.push(v.then(g=>Ny(g,s,f))):Ny(v,s,f)}return d.length?Promise.all(d).then(()=>s):s}});function pu(e,a,s,i){e.issues.length&&a.issues.push(...F0(s,e.issues)),e.value===void 0?s in i&&(a.value[s]=void 0):a.value[s]=e.value}function J0(e){const a=Object.keys(e.shape);for(const i of a)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const s=WE(e.shape);return{...e,keys:a,keySet:new Set(a),numKeys:a.length,optionalKeys:new Set(s)}}function W0(e,a,s,i,c,d){const f=[],h=c.keySet,v=c.catchall._zod,g=v.def.type;for(const y of Object.keys(a)){if(h.has(y))continue;if(g==="never"){f.push(y);continue}const x=v.run({value:a[y],issues:[]},i);x instanceof Promise?e.push(x.then(j=>pu(j,s,y,a))):pu(x,s,y,a)}return f.length&&s.issues.push({code:"unrecognized_keys",keys:f,input:a,inst:d}),e.length?Promise.all(e).then(()=>s):s}const LC=Oe("$ZodObject",(e,a)=>{if(kn.init(e,a),!Object.getOwnPropertyDescriptor(a,"shape")?.get){const h=a.shape;Object.defineProperty(a,"shape",{get:()=>{const v={...h};return Object.defineProperty(a,"shape",{value:v}),v}})}const i=Th(()=>J0(a));Wt(e._zod,"propValues",()=>{const h=a.shape,v={};for(const g in h){const y=h[g]._zod;if(y.values){v[g]??(v[g]=new Set);for(const x of y.values)v[g].add(x)}}return v});const c=hu,d=a.catchall;let f;e._zod.parse=(h,v)=>{f??(f=i.value);const g=h.value;if(!c(g))return h.issues.push({expected:"object",code:"invalid_type",input:g,inst:e}),h;h.value={};const y=[],x=f.shape;for(const j of f.keys){const _=x[j]._zod.run({value:g[j],issues:[]},v);_ instanceof Promise?y.push(_.then(A=>pu(A,h,j,g))):pu(_,h,j,g)}return d?W0(y,g,h,v,i.value,e):y.length?Promise.all(y).then(()=>h):h}}),BC=Oe("$ZodObjectJIT",(e,a)=>{LC.init(e,a);const s=e._zod.parse,i=Th(()=>J0(a)),c=j=>{const H=new lC(["shape","payload","ctx"]),_=i.value,A=te=>{const M=yy(te);return`shape[${M}]._zod.run({ value: input[${M}], issues: [] }, ctx)`};H.write("const input = payload.value;");const R=Object.create(null);let F=0;for(const te of _.keys)R[te]=`key_${F++}`;H.write("const newResult = {};");for(const te of _.keys){const M=R[te],D=yy(te);H.write(`const ${M} = ${A(te)};`),H.write(`
        if (${M}.issues.length) {
          payload.issues = payload.issues.concat(${M}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${D}, ...iss.path] : [${D}]
          })));
        }
        
        
        if (${M}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${M}.value;
        }
        
      `)}H.write("payload.value = newResult;"),H.write("return payload;");const z=H.compile();return(te,M)=>z(j,te,M)};let d;const f=hu,h=!q0.jitless,g=h&&XE.value,y=a.catchall;let x;e._zod.parse=(j,H)=>{x??(x=i.value);const _=j.value;return f(_)?h&&g&&H?.async===!1&&H.jitless!==!0?(d||(d=c(a.shape)),j=d(j,H),y?W0([],_,j,H,x,e):j):s(j,H):(j.issues.push({expected:"object",code:"invalid_type",input:_,inst:e}),j)}});function jy(e,a,s,i){for(const d of e)if(d.issues.length===0)return a.value=d.value,a;const c=e.filter(d=>!ri(d));return c.length===1?(a.value=c[0].value,c[0]):(a.issues.push({code:"invalid_union",input:a.value,inst:s,errors:e.map(d=>d.issues.map(f=>ul(f,i,cl())))}),a)}const qC=Oe("$ZodUnion",(e,a)=>{kn.init(e,a),Wt(e._zod,"optin",()=>a.options.some(c=>c._zod.optin==="optional")?"optional":void 0),Wt(e._zod,"optout",()=>a.options.some(c=>c._zod.optout==="optional")?"optional":void 0),Wt(e._zod,"values",()=>{if(a.options.every(c=>c._zod.values))return new Set(a.options.flatMap(c=>Array.from(c._zod.values)))}),Wt(e._zod,"pattern",()=>{if(a.options.every(c=>c._zod.pattern)){const c=a.options.map(d=>d._zod.pattern);return new RegExp(`^(${c.map(d=>zh(d.source)).join("|")})$`)}});const s=a.options.length===1,i=a.options[0]._zod.run;e._zod.parse=(c,d)=>{if(s)return i(c,d);let f=!1;const h=[];for(const v of a.options){const g=v._zod.run({value:c.value,issues:[]},d);if(g instanceof Promise)h.push(g),f=!0;else{if(g.issues.length===0)return g;h.push(g)}}return f?Promise.all(h).then(v=>jy(v,c,e,d)):jy(h,c,e,d)}}),IC=Oe("$ZodIntersection",(e,a)=>{kn.init(e,a),e._zod.parse=(s,i)=>{const c=s.value,d=a.left._zod.run({value:c,issues:[]},i),f=a.right._zod.run({value:c,issues:[]},i);return d instanceof Promise||f instanceof Promise?Promise.all([d,f]).then(([v,g])=>Sy(s,v,g)):Sy(s,d,f)}});function Xm(e,a){if(e===a)return{valid:!0,data:e};if(e instanceof Date&&a instanceof Date&&+e==+a)return{valid:!0,data:e};if(wo(e)&&wo(a)){const s=Object.keys(a),i=Object.keys(e).filter(d=>s.indexOf(d)!==-1),c={...e,...a};for(const d of i){const f=Xm(e[d],a[d]);if(!f.valid)return{valid:!1,mergeErrorPath:[d,...f.mergeErrorPath]};c[d]=f.data}return{valid:!0,data:c}}if(Array.isArray(e)&&Array.isArray(a)){if(e.length!==a.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let i=0;i<e.length;i++){const c=e[i],d=a[i],f=Xm(c,d);if(!f.valid)return{valid:!1,mergeErrorPath:[i,...f.mergeErrorPath]};s.push(f.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function Sy(e,a,s){if(a.issues.length&&e.issues.push(...a.issues),s.issues.length&&e.issues.push(...s.issues),ri(e))return e;const i=Xm(a.value,s.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const $C=Oe("$ZodEnum",(e,a)=>{kn.init(e,a);const s=YE(a.entries),i=new Set(s);e._zod.values=i,e._zod.pattern=new RegExp(`^(${s.filter(c=>JE.has(typeof c)).map(c=>typeof c=="string"?zu(c):c.toString()).join("|")})$`),e._zod.parse=(c,d)=>{const f=c.value;return i.has(f)||c.issues.push({code:"invalid_value",values:s,input:f,inst:e}),c}}),FC=Oe("$ZodTransform",(e,a)=>{kn.init(e,a),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new B0(e.constructor.name);const c=a.transform(s.value,s);if(i.async)return(c instanceof Promise?c:Promise.resolve(c)).then(f=>(s.value=f,s));if(c instanceof Promise)throw new ii;return s.value=c,s}});function wy(e,a){return e.issues.length&&a===void 0?{issues:[],value:void 0}:e}const HC=Oe("$ZodOptional",(e,a)=>{kn.init(e,a),e._zod.optin="optional",e._zod.optout="optional",Wt(e._zod,"values",()=>a.innerType._zod.values?new Set([...a.innerType._zod.values,void 0]):void 0),Wt(e._zod,"pattern",()=>{const s=a.innerType._zod.pattern;return s?new RegExp(`^(${zh(s.source)})?$`):void 0}),e._zod.parse=(s,i)=>{if(a.innerType._zod.optin==="optional"){const c=a.innerType._zod.run(s,i);return c instanceof Promise?c.then(d=>wy(d,s.value)):wy(c,s.value)}return s.value===void 0?s:a.innerType._zod.run(s,i)}}),VC=Oe("$ZodNullable",(e,a)=>{kn.init(e,a),Wt(e._zod,"optin",()=>a.innerType._zod.optin),Wt(e._zod,"optout",()=>a.innerType._zod.optout),Wt(e._zod,"pattern",()=>{const s=a.innerType._zod.pattern;return s?new RegExp(`^(${zh(s.source)}|null)$`):void 0}),Wt(e._zod,"values",()=>a.innerType._zod.values?new Set([...a.innerType._zod.values,null]):void 0),e._zod.parse=(s,i)=>s.value===null?s:a.innerType._zod.run(s,i)}),ZC=Oe("$ZodDefault",(e,a)=>{kn.init(e,a),e._zod.optin="optional",Wt(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return a.innerType._zod.run(s,i);if(s.value===void 0)return s.value=a.defaultValue,s;const c=a.innerType._zod.run(s,i);return c instanceof Promise?c.then(d=>_y(d,a)):_y(c,a)}});function _y(e,a){return e.value===void 0&&(e.value=a.defaultValue),e}const GC=Oe("$ZodPrefault",(e,a)=>{kn.init(e,a),e._zod.optin="optional",Wt(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(s,i)=>(i.direction==="backward"||s.value===void 0&&(s.value=a.defaultValue),a.innerType._zod.run(s,i))}),PC=Oe("$ZodNonOptional",(e,a)=>{kn.init(e,a),Wt(e._zod,"values",()=>{const s=a.innerType._zod.values;return s?new Set([...s].filter(i=>i!==void 0)):void 0}),e._zod.parse=(s,i)=>{const c=a.innerType._zod.run(s,i);return c instanceof Promise?c.then(d=>Ey(d,e)):Ey(c,e)}});function Ey(e,a){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:a}),e}const QC=Oe("$ZodCatch",(e,a)=>{kn.init(e,a),Wt(e._zod,"optin",()=>a.innerType._zod.optin),Wt(e._zod,"optout",()=>a.innerType._zod.optout),Wt(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return a.innerType._zod.run(s,i);const c=a.innerType._zod.run(s,i);return c instanceof Promise?c.then(d=>(s.value=d.value,d.issues.length&&(s.value=a.catchValue({...s,error:{issues:d.issues.map(f=>ul(f,i,cl()))},input:s.value}),s.issues=[]),s)):(s.value=c.value,c.issues.length&&(s.value=a.catchValue({...s,error:{issues:c.issues.map(d=>ul(d,i,cl()))},input:s.value}),s.issues=[]),s)}}),YC=Oe("$ZodPipe",(e,a)=>{kn.init(e,a),Wt(e._zod,"values",()=>a.in._zod.values),Wt(e._zod,"optin",()=>a.in._zod.optin),Wt(e._zod,"optout",()=>a.out._zod.optout),Wt(e._zod,"propValues",()=>a.in._zod.propValues),e._zod.parse=(s,i)=>{if(i.direction==="backward"){const d=a.out._zod.run(s,i);return d instanceof Promise?d.then(f=>Pc(f,a.in,i)):Pc(d,a.in,i)}const c=a.in._zod.run(s,i);return c instanceof Promise?c.then(d=>Pc(d,a.out,i)):Pc(c,a.out,i)}});function Pc(e,a,s){return e.issues.length?(e.aborted=!0,e):a._zod.run({value:e.value,issues:e.issues},s)}const KC=Oe("$ZodReadonly",(e,a)=>{kn.init(e,a),Wt(e._zod,"propValues",()=>a.innerType._zod.propValues),Wt(e._zod,"values",()=>a.innerType._zod.values),Wt(e._zod,"optin",()=>a.innerType._zod.optin),Wt(e._zod,"optout",()=>a.innerType._zod.optout),e._zod.parse=(s,i)=>{if(i.direction==="backward")return a.innerType._zod.run(s,i);const c=a.innerType._zod.run(s,i);return c instanceof Promise?c.then(Ay):Ay(c)}});function Ay(e){return e.value=Object.freeze(e.value),e}const XC=Oe("$ZodCustom",(e,a)=>{Ra.init(e,a),kn.init(e,a),e._zod.parse=(s,i)=>s,e._zod.check=s=>{const i=s.value,c=a.fn(i);if(c instanceof Promise)return c.then(d=>Cy(d,s,i,e));Cy(c,s,i,e)}});function Cy(e,a,s,i){if(!e){const c={code:"custom",input:s,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(c.params=i._zod.def.params),a.issues.push(_o(c))}}class JC{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...s){const i=s[0];if(this._map.set(a,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,a)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){const s=this._map.get(a);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(a),this}get(a){const s=a._zod.parent;if(s){const i={...this.get(s)??{}};delete i.id;const c={...i,...this._map.get(a)};return Object.keys(c).length?c:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}function WC(){return new JC}const Qc=WC();function eO(e,a){return new e({type:"string",...at(a)})}function tO(e,a){return new e({type:"string",format:"email",check:"string_format",abort:!1,...at(a)})}function Oy(e,a){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...at(a)})}function nO(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...at(a)})}function aO(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...at(a)})}function sO(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...at(a)})}function rO(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...at(a)})}function lO(e,a){return new e({type:"string",format:"url",check:"string_format",abort:!1,...at(a)})}function iO(e,a){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...at(a)})}function oO(e,a){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...at(a)})}function cO(e,a){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...at(a)})}function uO(e,a){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...at(a)})}function dO(e,a){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...at(a)})}function fO(e,a){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...at(a)})}function mO(e,a){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...at(a)})}function hO(e,a){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...at(a)})}function pO(e,a){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...at(a)})}function gO(e,a){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...at(a)})}function bO(e,a){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...at(a)})}function vO(e,a){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...at(a)})}function yO(e,a){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...at(a)})}function xO(e,a){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...at(a)})}function NO(e,a){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...at(a)})}function jO(e,a){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...at(a)})}function SO(e,a){return new e({type:"string",format:"date",check:"string_format",...at(a)})}function wO(e,a){return new e({type:"string",format:"time",check:"string_format",precision:null,...at(a)})}function _O(e,a){return new e({type:"string",format:"duration",check:"string_format",...at(a)})}function EO(e,a){return new e({type:"number",checks:[],...at(a)})}function AO(e,a){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...at(a)})}function CO(e){return new e({type:"unknown"})}function OO(e,a){return new e({type:"never",...at(a)})}function Ry(e,a){return new Q0({check:"less_than",...at(a),value:e,inclusive:!1})}function fm(e,a){return new Q0({check:"less_than",...at(a),value:e,inclusive:!0})}function Ty(e,a){return new Y0({check:"greater_than",...at(a),value:e,inclusive:!1})}function mm(e,a){return new Y0({check:"greater_than",...at(a),value:e,inclusive:!0})}function Dy(e,a){return new QA({check:"multiple_of",...at(a),value:e})}function eN(e,a){return new KA({check:"max_length",...at(a),maximum:e})}function gu(e,a){return new XA({check:"min_length",...at(a),minimum:e})}function tN(e,a){return new JA({check:"length_equals",...at(a),length:e})}function RO(e,a){return new WA({check:"string_format",format:"regex",...at(a),pattern:e})}function TO(e){return new eC({check:"string_format",format:"lowercase",...at(e)})}function DO(e){return new tC({check:"string_format",format:"uppercase",...at(e)})}function zO(e,a){return new nC({check:"string_format",format:"includes",...at(a),includes:e})}function kO(e,a){return new aC({check:"string_format",format:"starts_with",...at(a),prefix:e})}function MO(e,a){return new sC({check:"string_format",format:"ends_with",...at(a),suffix:e})}function Uo(e){return new rC({check:"overwrite",tx:e})}function UO(e){return Uo(a=>a.normalize(e))}function LO(){return Uo(e=>e.trim())}function BO(){return Uo(e=>e.toLowerCase())}function qO(){return Uo(e=>e.toUpperCase())}function IO(e,a,s){return new e({type:"array",element:a,...at(s)})}function $O(e,a,s){return new e({type:"custom",check:"custom",fn:a,...at(s)})}function FO(e){const a=HO(s=>(s.addIssue=i=>{if(typeof i=="string")s.issues.push(_o(i,s.value,a._zod.def));else{const c=i;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=s.value),c.inst??(c.inst=a),c.continue??(c.continue=!a._zod.def.abort),s.issues.push(_o(c))}},e(s.value,s)));return a}function HO(e,a){const s=new Ra({check:"custom",...at(a)});return s._zod.check=e,s}function zy(e,a){try{var s=e()}catch(i){return a(i)}return s&&s.then?s.then(void 0,a):s}function VO(e,a){for(var s={};e.length;){var i=e[0],c=i.code,d=i.message,f=i.path.join(".");if(!s[f])if("unionErrors"in i){var h=i.unionErrors[0].errors[0];s[f]={message:h.message,type:h.code}}else s[f]={message:d,type:c};if("unionErrors"in i&&i.unionErrors.forEach(function(y){return y.errors.forEach(function(x){return e.push(x)})}),a){var v=s[f].types,g=v&&v[i.code];s[f]=xh(f,a,s,c,g?[].concat(g,i.message):i.message)}e.shift()}return s}function ZO(e,a){for(var s={};e.length;){var i=e[0],c=i.code,d=i.message,f=i.path.join(".");if(!s[f])if(i.code==="invalid_union"&&i.errors.length>0){var h=i.errors[0][0];s[f]={message:h.message,type:h.code}}else s[f]={message:d,type:c};if(i.code==="invalid_union"&&i.errors.forEach(function(y){return y.forEach(function(x){return e.push(x)})}),a){var v=s[f].types,g=v&&v[i.code];s[f]=xh(f,a,s,c,g?[].concat(g,i.message):i.message)}e.shift()}return s}function GO(e,a,s){if(s===void 0&&(s={}),(function(i){return"_def"in i&&typeof i._def=="object"&&"typeName"in i._def})(e))return function(i,c,d){try{return Promise.resolve(zy(function(){return Promise.resolve(e[s.mode==="sync"?"parse":"parseAsync"](i,a)).then(function(f){return d.shouldUseNativeValidation&&Ym({},d),{errors:{},values:s.raw?Object.assign({},i):f}})},function(f){if((function(h){return Array.isArray(h?.issues)})(f))return{values:{},errors:gy(VO(f.errors,!d.shouldUseNativeValidation&&d.criteriaMode==="all"),d)};throw f}))}catch(f){return Promise.reject(f)}};if((function(i){return"_zod"in i&&typeof i._zod=="object"})(e))return function(i,c,d){try{return Promise.resolve(zy(function(){return Promise.resolve((s.mode==="sync"?uA:dA)(e,i,a)).then(function(f){return d.shouldUseNativeValidation&&Ym({},d),{errors:{},values:s.raw?Object.assign({},i):f}})},function(f){if((function(h){return h instanceof Mh})(f))return{values:{},errors:gy(ZO(f.issues,!d.shouldUseNativeValidation&&d.criteriaMode==="all"),d)};throw f}))}catch(f){return Promise.reject(f)}};throw new Error("Invalid input: not a Zod schema")}const PO=Oe("ZodISODateTime",(e,a)=>{yC.init(e,a),mn.init(e,a)});function QO(e){return jO(PO,e)}const YO=Oe("ZodISODate",(e,a)=>{xC.init(e,a),mn.init(e,a)});function KO(e){return SO(YO,e)}const XO=Oe("ZodISOTime",(e,a)=>{NC.init(e,a),mn.init(e,a)});function JO(e){return wO(XO,e)}const WO=Oe("ZodISODuration",(e,a)=>{jC.init(e,a),mn.init(e,a)});function eR(e){return _O(WO,e)}const tR=(e,a)=>{Mh.init(e,a),e.name="ZodError",Object.defineProperties(e,{format:{value:s=>cA(e,s)},flatten:{value:s=>oA(e,s)},addIssue:{value:s=>{e.issues.push(s),e.message=JSON.stringify(e.issues,Km,2)}},addIssues:{value:s=>{e.issues.push(...s),e.message=JSON.stringify(e.issues,Km,2)}},isEmpty:{get(){return e.issues.length===0}}})},ls=Oe("ZodError",tR,{Parent:Error}),nR=Mu(ls),aR=Uu(ls),sR=Lu(ls),rR=Bu(ls),lR=hA(ls),iR=pA(ls),oR=gA(ls),cR=bA(ls),uR=vA(ls),dR=yA(ls),fR=xA(ls),mR=NA(ls),Vn=Oe("ZodType",(e,a)=>(kn.init(e,a),e.def=a,e.type=a.type,Object.defineProperty(e,"_def",{value:a}),e.check=(...s)=>e.clone(pl(a,{checks:[...a.checks??[],...s.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),e.clone=(s,i)=>Er(e,s,i),e.brand=()=>e,e.register=((s,i)=>(s.add(e,i),e)),e.parse=(s,i)=>nR(e,s,i,{callee:e.parse}),e.safeParse=(s,i)=>sR(e,s,i),e.parseAsync=async(s,i)=>aR(e,s,i,{callee:e.parseAsync}),e.safeParseAsync=async(s,i)=>rR(e,s,i),e.spa=e.safeParseAsync,e.encode=(s,i)=>lR(e,s,i),e.decode=(s,i)=>iR(e,s,i),e.encodeAsync=async(s,i)=>oR(e,s,i),e.decodeAsync=async(s,i)=>cR(e,s,i),e.safeEncode=(s,i)=>uR(e,s,i),e.safeDecode=(s,i)=>dR(e,s,i),e.safeEncodeAsync=async(s,i)=>fR(e,s,i),e.safeDecodeAsync=async(s,i)=>mR(e,s,i),e.refine=(s,i)=>e.check(nT(s,i)),e.superRefine=s=>e.check(aT(s)),e.overwrite=s=>e.check(Uo(s)),e.optional=()=>Ly(e),e.nullable=()=>By(e),e.nullish=()=>Ly(By(e)),e.nonoptional=s=>YR(e,s),e.array=()=>sN(e),e.or=s=>qR([e,s]),e.and=s=>$R(e,s),e.transform=s=>qy(e,HR(s)),e.default=s=>GR(e,s),e.prefault=s=>QR(e,s),e.catch=s=>XR(e,s),e.pipe=s=>qy(e,s),e.readonly=()=>eT(e),e.describe=s=>{const i=e.clone();return Qc.add(i,{description:s}),i},Object.defineProperty(e,"description",{get(){return Qc.get(e)?.description},configurable:!0}),e.meta=(...s)=>{if(s.length===0)return Qc.get(e);const i=e.clone();return Qc.add(i,s[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),nN=Oe("_ZodString",(e,a)=>{Uh.init(e,a),Vn.init(e,a);const s=e._zod.bag;e.format=s.format??null,e.minLength=s.minimum??null,e.maxLength=s.maximum??null,e.regex=(...i)=>e.check(RO(...i)),e.includes=(...i)=>e.check(zO(...i)),e.startsWith=(...i)=>e.check(kO(...i)),e.endsWith=(...i)=>e.check(MO(...i)),e.min=(...i)=>e.check(gu(...i)),e.max=(...i)=>e.check(eN(...i)),e.length=(...i)=>e.check(tN(...i)),e.nonempty=(...i)=>e.check(gu(1,...i)),e.lowercase=i=>e.check(TO(i)),e.uppercase=i=>e.check(DO(i)),e.trim=()=>e.check(LO()),e.normalize=(...i)=>e.check(UO(...i)),e.toLowerCase=()=>e.check(BO()),e.toUpperCase=()=>e.check(qO())}),hR=Oe("ZodString",(e,a)=>{Uh.init(e,a),nN.init(e,a),e.email=s=>e.check(tO(pR,s)),e.url=s=>e.check(lO(gR,s)),e.jwt=s=>e.check(NO(TR,s)),e.emoji=s=>e.check(iO(bR,s)),e.guid=s=>e.check(Oy(ky,s)),e.uuid=s=>e.check(nO(Yc,s)),e.uuidv4=s=>e.check(aO(Yc,s)),e.uuidv6=s=>e.check(sO(Yc,s)),e.uuidv7=s=>e.check(rO(Yc,s)),e.nanoid=s=>e.check(oO(vR,s)),e.guid=s=>e.check(Oy(ky,s)),e.cuid=s=>e.check(cO(yR,s)),e.cuid2=s=>e.check(uO(xR,s)),e.ulid=s=>e.check(dO(NR,s)),e.base64=s=>e.check(vO(CR,s)),e.base64url=s=>e.check(yO(OR,s)),e.xid=s=>e.check(fO(jR,s)),e.ksuid=s=>e.check(mO(SR,s)),e.ipv4=s=>e.check(hO(wR,s)),e.ipv6=s=>e.check(pO(_R,s)),e.cidrv4=s=>e.check(gO(ER,s)),e.cidrv6=s=>e.check(bO(AR,s)),e.e164=s=>e.check(xO(RR,s)),e.datetime=s=>e.check(QO(s)),e.date=s=>e.check(KO(s)),e.time=s=>e.check(JO(s)),e.duration=s=>e.check(eR(s))});function bu(e){return eO(hR,e)}const mn=Oe("ZodStringFormat",(e,a)=>{on.init(e,a),nN.init(e,a)}),pR=Oe("ZodEmail",(e,a)=>{uC.init(e,a),mn.init(e,a)}),ky=Oe("ZodGUID",(e,a)=>{oC.init(e,a),mn.init(e,a)}),Yc=Oe("ZodUUID",(e,a)=>{cC.init(e,a),mn.init(e,a)}),gR=Oe("ZodURL",(e,a)=>{dC.init(e,a),mn.init(e,a)}),bR=Oe("ZodEmoji",(e,a)=>{fC.init(e,a),mn.init(e,a)}),vR=Oe("ZodNanoID",(e,a)=>{mC.init(e,a),mn.init(e,a)}),yR=Oe("ZodCUID",(e,a)=>{hC.init(e,a),mn.init(e,a)}),xR=Oe("ZodCUID2",(e,a)=>{pC.init(e,a),mn.init(e,a)}),NR=Oe("ZodULID",(e,a)=>{gC.init(e,a),mn.init(e,a)}),jR=Oe("ZodXID",(e,a)=>{bC.init(e,a),mn.init(e,a)}),SR=Oe("ZodKSUID",(e,a)=>{vC.init(e,a),mn.init(e,a)}),wR=Oe("ZodIPv4",(e,a)=>{SC.init(e,a),mn.init(e,a)}),_R=Oe("ZodIPv6",(e,a)=>{wC.init(e,a),mn.init(e,a)}),ER=Oe("ZodCIDRv4",(e,a)=>{_C.init(e,a),mn.init(e,a)}),AR=Oe("ZodCIDRv6",(e,a)=>{EC.init(e,a),mn.init(e,a)}),CR=Oe("ZodBase64",(e,a)=>{AC.init(e,a),mn.init(e,a)}),OR=Oe("ZodBase64URL",(e,a)=>{OC.init(e,a),mn.init(e,a)}),RR=Oe("ZodE164",(e,a)=>{RC.init(e,a),mn.init(e,a)}),TR=Oe("ZodJWT",(e,a)=>{DC.init(e,a),mn.init(e,a)}),aN=Oe("ZodNumber",(e,a)=>{X0.init(e,a),Vn.init(e,a),e.gt=(i,c)=>e.check(Ty(i,c)),e.gte=(i,c)=>e.check(mm(i,c)),e.min=(i,c)=>e.check(mm(i,c)),e.lt=(i,c)=>e.check(Ry(i,c)),e.lte=(i,c)=>e.check(fm(i,c)),e.max=(i,c)=>e.check(fm(i,c)),e.int=i=>e.check(My(i)),e.safe=i=>e.check(My(i)),e.positive=i=>e.check(Ty(0,i)),e.nonnegative=i=>e.check(mm(0,i)),e.negative=i=>e.check(Ry(0,i)),e.nonpositive=i=>e.check(fm(0,i)),e.multipleOf=(i,c)=>e.check(Dy(i,c)),e.step=(i,c)=>e.check(Dy(i,c)),e.finite=()=>e;const s=e._zod.bag;e.minValue=Math.max(s.minimum??Number.NEGATIVE_INFINITY,s.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(s.maximum??Number.POSITIVE_INFINITY,s.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(s.format??"").includes("int")||Number.isSafeInteger(s.multipleOf??.5),e.isFinite=!0,e.format=s.format??null});function da(e){return EO(aN,e)}const DR=Oe("ZodNumberFormat",(e,a)=>{zC.init(e,a),aN.init(e,a)});function My(e){return AO(DR,e)}const zR=Oe("ZodUnknown",(e,a)=>{kC.init(e,a),Vn.init(e,a)});function Uy(){return CO(zR)}const kR=Oe("ZodNever",(e,a)=>{MC.init(e,a),Vn.init(e,a)});function MR(e){return OO(kR,e)}const UR=Oe("ZodArray",(e,a)=>{UC.init(e,a),Vn.init(e,a),e.element=a.element,e.min=(s,i)=>e.check(gu(s,i)),e.nonempty=s=>e.check(gu(1,s)),e.max=(s,i)=>e.check(eN(s,i)),e.length=(s,i)=>e.check(tN(s,i)),e.unwrap=()=>e.element});function sN(e,a){return IO(UR,e,a)}const LR=Oe("ZodObject",(e,a)=>{BC.init(e,a),Vn.init(e,a),Wt(e,"shape",()=>a.shape),e.keyof=()=>rN(Object.keys(e._zod.def.shape)),e.catchall=s=>e.clone({...e._zod.def,catchall:s}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Uy()}),e.loose=()=>e.clone({...e._zod.def,catchall:Uy()}),e.strict=()=>e.clone({...e._zod.def,catchall:MR()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=s=>aA(e,s),e.safeExtend=s=>sA(e,s),e.merge=s=>rA(e,s),e.pick=s=>tA(e,s),e.omit=s=>nA(e,s),e.partial=(...s)=>lA(lN,e,s[0]),e.required=(...s)=>iA(iN,e,s[0])});function Iu(e,a){const s={type:"object",shape:e??{},...at(a)};return new LR(s)}const BR=Oe("ZodUnion",(e,a)=>{qC.init(e,a),Vn.init(e,a),e.options=a.options});function qR(e,a){return new BR({type:"union",options:e,...at(a)})}const IR=Oe("ZodIntersection",(e,a)=>{IC.init(e,a),Vn.init(e,a)});function $R(e,a){return new IR({type:"intersection",left:e,right:a})}const Jm=Oe("ZodEnum",(e,a)=>{$C.init(e,a),Vn.init(e,a),e.enum=a.entries,e.options=Object.values(a.entries);const s=new Set(Object.keys(a.entries));e.extract=(i,c)=>{const d={};for(const f of i)if(s.has(f))d[f]=a.entries[f];else throw new Error(`Key ${f} not found in enum`);return new Jm({...a,checks:[],...at(c),entries:d})},e.exclude=(i,c)=>{const d={...a.entries};for(const f of i)if(s.has(f))delete d[f];else throw new Error(`Key ${f} not found in enum`);return new Jm({...a,checks:[],...at(c),entries:d})}});function rN(e,a){const s=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new Jm({type:"enum",entries:s,...at(a)})}const FR=Oe("ZodTransform",(e,a)=>{FC.init(e,a),Vn.init(e,a),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new B0(e.constructor.name);s.addIssue=d=>{if(typeof d=="string")s.issues.push(_o(d,s.value,a));else{const f=d;f.fatal&&(f.continue=!1),f.code??(f.code="custom"),f.input??(f.input=s.value),f.inst??(f.inst=e),s.issues.push(_o(f))}};const c=a.transform(s.value,s);return c instanceof Promise?c.then(d=>(s.value=d,s)):(s.value=c,s)}});function HR(e){return new FR({type:"transform",transform:e})}const lN=Oe("ZodOptional",(e,a)=>{HC.init(e,a),Vn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function Ly(e){return new lN({type:"optional",innerType:e})}const VR=Oe("ZodNullable",(e,a)=>{VC.init(e,a),Vn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function By(e){return new VR({type:"nullable",innerType:e})}const ZR=Oe("ZodDefault",(e,a)=>{ZC.init(e,a),Vn.init(e,a),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function GR(e,a){return new ZR({type:"default",innerType:e,get defaultValue(){return typeof a=="function"?a():$0(a)}})}const PR=Oe("ZodPrefault",(e,a)=>{GC.init(e,a),Vn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function QR(e,a){return new PR({type:"prefault",innerType:e,get defaultValue(){return typeof a=="function"?a():$0(a)}})}const iN=Oe("ZodNonOptional",(e,a)=>{PC.init(e,a),Vn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function YR(e,a){return new iN({type:"nonoptional",innerType:e,...at(a)})}const KR=Oe("ZodCatch",(e,a)=>{QC.init(e,a),Vn.init(e,a),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function XR(e,a){return new KR({type:"catch",innerType:e,catchValue:typeof a=="function"?a:()=>a})}const JR=Oe("ZodPipe",(e,a)=>{YC.init(e,a),Vn.init(e,a),e.in=a.in,e.out=a.out});function qy(e,a){return new JR({type:"pipe",in:e,out:a})}const WR=Oe("ZodReadonly",(e,a)=>{KC.init(e,a),Vn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function eT(e){return new WR({type:"readonly",innerType:e})}const tT=Oe("ZodCustom",(e,a)=>{XC.init(e,a),Vn.init(e,a)});function nT(e,a={}){return $O(tT,e,a)}function aT(e){return FO(e)}const sT=["correlativo","no correlativo"],rT=Iu({oi:bu().regex(/^OI-\d{4}-\d{4}$/,"Formato OI-####-YYYY"),q3:da(),alcance:da(),pma:da().refine(e=>e===10||e===16,{message:"PMA invlido"}),numeration_type:rN(sT).default("correlativo")}),hm=Iu({c1:da().optional().nullable(),c2:da().optional().nullable(),c3:da().optional().nullable(),c4:da().optional().nullable(),c5:da().optional().nullable(),c6:da().optional().nullable(),c7:bu().optional().nullable(),c7_seconds:da().optional().nullable(),caudal:da().optional().nullable(),error:da().optional().nullable()}),lT=Iu({medidor:bu().optional(),estado:da().int().min(0).max(5).default(0),q3:hm.optional(),q2:hm.optional(),q1:hm.optional(),conformidad:bu().optional()});Iu({estado:da().int().min(0).optional(),rows:da().int().min(1).default(15),rowsData:sN(lT)});function iT(e){return e===16?25.6:e===10?16:NaN}const oT=/^[A-Za-z0-9]{10}$/,cT=e=>(e??"").trim().toUpperCase(),xn=e=>{const a=e.currentTarget;a.size=Math.max(1,a.value.length)},Wl=["medidor","estado","q3.c1","q3.c2","q3.c3","q3.c4","q3.c5","q3.c6","q3.c7","q2.c1","q2.c2","q2.c3","q2.c4","q2.c5","q2.c6","q2.c7","q1.c1","q1.c2","q1.c3","q1.c4","q1.c5","q1.c6","q1.c7"],Wm=e=>{e&&(e.focus(),(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&e.select())},Iy=(e,a)=>{if(a){if(e==="medidor"){a.focus();return}Wm(a)}},Kn=e=>{if(e===""||e===null||e===void 0)return null;const a=String(e).replace(",","."),s=Number(a);return Number.isNaN(s)?null:s};function uT(e,a){if(!e)return"";const s=e.match(/^(.*?)(\d+)$/);if(!s)return e;const i=s[1],c=s[2],d=parseInt(c,10)+a;return`${i}${d.toString().padStart(c.length,"0")}`}function $y(e,a,s){return e?s==="no correlativo"?e.slice(0,4):uT(e,a):""}function pm(e){if(!e)return 0;const a=String(e).trim(),s=a.split(/[:,\.]/).map(c=>parseFloat(c)).filter(c=>!isNaN(c));let i=0;if(s.length>=3){const c=s[0]||0,d=s[1]||0,f=s[2]||0;i=c*60+d+f/1e3}else if(s.length===2)i=s[0]*60+(s[1]||0);else if(s.length===1)i=s[0];else{const c=parseFloat(a.replace(",","."));if(!isNaN(c)){const d=Math.floor(c),f=(c-d)*100;i=d*60+f}}return i}function gm(e,a){if(!e||!a)return null;const s=a>0?a/3600:0;return s===0?null:e/s}function bm(e,a,s){return e===void 0||a===void 0||!s?null:(Number(a)-Number(e)-Number(s))/Number(s)*100}function dT(e,a,s,i){if(e&&e>=1)return"NO CONFORME";if(a==null||s==null||i==null)return"";const c=Math.abs(a),d=Math.abs(s),f=Math.abs(i),h=!(c>2.05||d>2.05||f>5.05),v=c<1.05||d<1.05||f<2.55,g=Math.sign(a),y=Math.sign(s),x=Math.sign(i),j=g>=0&&y>=0&&x>=0||g<=0&&y<=0&&x<=0,H=h&&v;return j?H?"CONFORME":"NO CONFORME":h?"CONFORME":"NO CONFORME"}const ei=({val:e,isErr:a,warnThreshold:s,failThreshold:i})=>{const c=g=>{const y=Number(g.toFixed(1));return Object.is(y,-0)?"0.0":y.toFixed(1)};if(!a)return l.jsx("td",{className:"vi-surface-2",children:e==null||isNaN(e)?l.jsx("span",{className:"text-muted",children:"-"}):l.jsx("span",{className:"vi-qe-value text-primary fw-semibold",children:e.toFixed(2)})});const d=Math.abs(e??0),f=s??i??0,h=i??s??0;let v="vi-e-ok";return e==null||isNaN(e)?v="":h>0&&d>h?v="vi-e-error":f>0&&d>f&&(v="vi-e-warn"),l.jsx("td",{className:"vi-surface-2",children:e==null||isNaN(e)?l.jsx("span",{className:"text-muted",children:"-"}):l.jsx("span",{className:`vi-qe-value fw-bold ${v}`,children:c(e)})})};function fT({show:e,title:a,initial:s,onClose:i,onSubmit:c,onCancelWithDraft:d,numerationType:f,duplicateMap:h,onClearDuplicate:v,readOnly:g,draftStorageKey:y,draftMeta:x,isOnline:j,showRetry:H}){const _={estado:s?.estado??0,rows:s?.rows??15,version:s?.version??null,draftCreatedAt:s?.draftCreatedAt??null,draftId:s?.draftId??null,rowsData:s?.rowsData??Array.from({length:15}).map(()=>({medidor:"",estado:0,q3:{},q2:{},q1:{}}))},A=g===!0,R=j!==!1,{register:F,control:z,handleSubmit:te,reset:M,setValue:D,getValues:K}=wu({defaultValues:_}),q=F("rows",{valueAsNumber:!0}),{fields:V,replace:fe,append:Re,remove:Ce}=U_({control:z,name:"rowsData"}),[ve,_e]=p.useState(0),ke=p.useRef(0),De=p.useRef(null),[U,Z]=p.useState(0),ae=0,he=5,me=()=>{if(U>=he){alert("Ya estas en el tamano maximo de fuente permitido para las filas (+5).");return}Z(W=>Math.min(W+1,he))},w=()=>{if(U<=ae){alert("Ya estas en el tamano minimo de fuente permitido para las filas.");return}Z(W=>Math.max(W-1,ae))},X=p.useRef(null),[ce,Y]=p.useState([]),ye=!!s?.version,Se=p.useRef("rows"),Le=p.useRef(null),Ze=p.useRef(null),pe=p.useRef(null),Be=p.useRef(new Map),Ge=["c1","c2","c3","c4","c5","c6","c7"];p.useEffect(()=>{s?.rowsData?.length&&V.forEach((W,se)=>{if(se===0)return;s.rowsData[se]?.medidor&&Be.current.set(W.id,!0)})},[s,V]);const Je=p.useCallback(W=>{const se=W<0?0:W;_e(se),requestAnimationFrame(()=>{const Te=document.querySelector(`input.vi-medidor-input[data-row="${se}"]`);Te&&(Te.focus(),Te.select())})},[]),ot=()=>(K("rowsData")??[]).slice(0,V.length);p.useEffect(()=>{ke.current=ve},[ve]);const ze=W=>{const se=W.target;if(!se)return;const Te=se.tagName;if(Te!=="INPUT"&&Te!=="SELECT"&&Te!=="TEXTAREA")return;const Ve=W.key;if(Ve==="Escape"){W.preventDefault(),Un();return}if(Ve==="ArrowUp"||Ve==="ArrowDown"||Ve==="ArrowLeft"||Ve==="ArrowRight"||Ve==="Enter"){const un=se.name;if(!un||!un.startsWith("rowsData."))return;const Ct=un.match(/^rowsData\.(\d+)\.(.+)$/);if(!Ct)return;const dt=parseInt(Ct[1],10),yt=Ct[2],Gt=W.currentTarget,hn=V.length-1,Pt=(Nn,an)=>{let kt=Nn+an;for(;kt>=0&&kt<=hn;){const Mt=`[name="rowsData.${kt}.${yt}"]`,dn=Gt.querySelector(Mt);if(dn&&!dn.disabled)return{index:kt,el:dn};kt+=an}return null};if(Ve==="ArrowUp"||Ve==="ArrowDown"){W.preventDefault();const an=Pt(dt,Ve==="ArrowUp"?-1:1);an&&Iy(yt,an.el);return}if(Ve==="ArrowLeft"||Ve==="ArrowRight"){W.preventDefault();const Nn=Wl.indexOf(yt);if(Nn===-1)return;const kt=Nn+(Ve==="ArrowRight"?1:-1);if(kt<0||kt>=Wl.length)return;const Mt=Wl[kt],dn=`[name="rowsData.${dt}.${Mt}"]`,jn=Gt.querySelector(dn);jn&&!jn.disabled&&Wm(jn);return}if(Ve==="Enter"){W.preventDefault();const Nn=Wl.indexOf(yt);if(Nn===-1)return;const an=Pt(dt,1);if(an){Iy(yt,an.el);return}const kt=Nn+1;if(kt<Wl.length){const Mt=Wl[kt];for(let dn=0;dn<=hn;dn++){const jn=`[name="rowsData.${dn}.${Mt}"]`,An=Gt.querySelector(jn);if(An&&!An.disabled){Wm(An);return}}}X.current&&X.current.focus();return}}if(Ve!=="Tab")return;const et=W.currentTarget,ct=Array.from(et.querySelectorAll("input, select, textarea")).filter(Bt=>!Bt.hasAttribute("disabled")),Ke=ct.indexOf(se);if(Ke===-1)return;if(Ve==="Tab"&&W.shiftKey){Ke>0&&(W.preventDefault(),ct[Ke-1].focus());return}const Lt=Ke+1;if(Lt<ct.length){W.preventDefault(),ct[Lt].focus();return}X.current&&(W.preventDefault(),X.current.focus())},Qe=(W,se)=>{fe(W),D("rows",W.length),_e(Te=>W.length===0?0:typeof se=="number"?Math.max(0,Math.min(se,W.length-1)):Math.min(Te,W.length-1))},ue=()=>({medidor:"",estado:0,q3:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:"",c7_seconds:null},q2:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:"",c7_seconds:null},q1:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:"",c7_seconds:null}}),Fe=W=>W==null?"":typeof W=="number"?W:typeof W=="string"?W.replace(",","."):W,we=W=>{if(!W)return{};const se={...W};return["c1","c2","c3","c4","c5","c6"].forEach(Te=>{se[Te]=Fe(se[Te])}),se},We=()=>{const W=s?.rowsData?.length??s?.rows??15,se=(s?.rowsData&&s.rowsData.length>0?s.rowsData:Array.from({length:W}).map(()=>({medidor:"",estado:0,q3:{},q2:{},q1:{}}))).map(Te=>({medidor:Te.medidor??"",estado:Te.estado??0,q3:we(Te.q3),q2:we(Te.q2),q1:we(Te.q1)}));return{rows:se.length,rowsData:se,version:s?.version??null,estado:s?.estado??0,draftCreatedAt:s?.draftCreatedAt??null,draftId:s?.draftId??null}},O=p.useCallback(()=>{const W=K(),se=W.rowsData??[];return{estado:W.estado??0,rows:Number(W.rows??se.length),version:W.version??s?.version??null,rowsData:se,draftCreatedAt:W.draftCreatedAt??s?.draftCreatedAt??null,draftId:W.draftId??s?.draftId??null}},[K,s?.version,s?.draftCreatedAt,s?.draftId]),T=W=>x?{version:1,ts:new Date().toISOString(),userId:x.userId,bankId:x.bankId,oiId:x.oiId,bancadaId:x.bancadaId??null,isNew:x.isNew,data:W}:null,S=()=>x?{version:1,ts:new Date().toISOString(),userId:x.userId,bankId:x.bankId,oiId:x.oiId,oiCode:x.oiCode??null,returnTo:x.returnTo??`/oi/${x.oiId}?mode=edit`,mode:"edit",modal:{type:"bancada",bancadaId:x.bancadaId??null,isNew:x.isNew}}:null,L=W=>W==null||W===""||typeof W=="number"&&Number.isNaN(W),$=W=>W?Number(W.estado??0)!==0||W.medidor&&W.medidor.toString().trim()!==""?!0:be(W):!1,J=W=>(W.rowsData??[]).some(Te=>$(Te)),be=W=>{const se=[W.q3,W.q2,W.q1];for(const Te of se)if(Te){for(const Ve of Ge)if(!L(Te[Ve]))return!0}return!1},Ee=W=>W?{...W,c4:null,c5:null}:{c4:null,c5:null},G=W=>{if(!W)return W;const se={...W};return L(se.c4)&&(se.c4=null),L(se.c5)&&(se.c5=null),se},Me=W=>{for(let se=0;se<W.length;se++){const Te=W[se],Ve=Number(Te.estado??0),et=Ve!==0;if(!$(Te))continue;if(!Te.medidor||Te.medidor.toString().trim()==="")return`La fila ${se+1} tiene datos pero el campo "# Medidor (G)" est vaco. Completa el valor o elimina la fila.`;const Ke=[{name:"Q3 (Nominal)",block:Te.q3},{name:"Q2 (Transicin)",block:Te.q2},{name:"Q1 (Mnimo)",block:Te.q1}],Ut=Ke.some(({block:Lt})=>Lt&&Ge.some(Bt=>!L(Lt[Bt])));if(Ve===0&&!Ut)return`La fila ${se+1} no tiene lecturas. Ingresa datos en Q3/Q2/Q1 o elimina la fila.`;if(!et)for(const{name:Lt,block:Bt}of Ke){if(!Bt||!Ge.some(dt=>!L(Bt[dt])))continue;if(Ge.some(dt=>L(Bt[dt])))return`La fila ${se+1} tiene datos incompletos en el bloque ${Lt}. Completa todos los campos o elimina la fila.`}}return null},$e=W=>W==null||W===""?null:String(W).replace(/\./g,","),nt=W=>{if(!W)return{};const se={...W};return["c1","c2","c3","c4","c5","c6","c7"].forEach(Te=>{se[Te]=$e(se[Te])}),se},zt=W=>{const se=[];let Te=null;const Ve=(ct,Ke,Ut)=>{se[ct]||(se[ct]={}),se[ct][Ke]=Ut,Te||(Te=`Fila ${ct+1}: ${Ut}`)},et={};return W.forEach(ct=>{const Ke=(ct.medidor??"").trim();Ke&&(et[Ke]=(et[Ke]??0)+1)}),W.forEach((ct,Ke)=>{const Ut=ct.q3||{},Lt=ct.q2||{},Bt=ct.q1||{},un=Ut.c4,Ct=Ut.c5,dt=Lt.c4,yt=Lt.c5,Gt=Bt.c4,hn=Bt.c5;un!=null&&Ct!=null&&!Number.isNaN(un)&&!Number.isNaN(Ct)&&Ct<un&&Ve(Ke,"q3_lf","En Q3 L.F debe ser mayor o igual que L.I."),dt!=null&&yt!=null&&!Number.isNaN(dt)&&!Number.isNaN(yt)&&yt<dt&&Ve(Ke,"q2_lf","En Q2 L.F debe ser mayor o igual que L.I."),Gt!=null&&hn!=null&&!Number.isNaN(Gt)&&!Number.isNaN(hn)&&hn<Gt&&Ve(Ke,"q1_lf","En Q1 L.F debe ser mayor o igual que L.I."),Ct!=null&&dt!=null&&!Number.isNaN(Ct)&&!Number.isNaN(dt)&&dt<Ct&&Ve(Ke,"q2_li","L.I de Q2 debe ser mayor o igual que L.F de Q3."),yt!=null&&Gt!=null&&!Number.isNaN(yt)&&!Number.isNaN(Gt)&&Gt<yt&&Ve(Ke,"q1_li","L.I de Q1 debe ser mayor o igual que L.F de Q2.");const Pt=(ct.medidor??"").trim();Pt&&et[Pt]>1&&Ve(Ke,"medidor_dup","Serie de medidor repetida."),Pt&&!oT.test(Pt)&&Ve(Ke,"medidor_format","La serie del medidor debe tener 10 caracteres alfanumricos.")}),{rowErrors:se,firstMessage:Te}},Ne=W=>{if(A)return;const se=(W.rowsData??[]).slice(0,V.length),Te=Me(se);if(Te){alert(Te);return}const{rowErrors:Ve,firstMessage:et}=zt(se);if(Y(Ve),et){alert(et);return}const Ke=se.filter($).map(Lt=>{const Bt=Number(Lt.estado??0),un=Bt>=1&&Bt<=4,Ct=Bt===5&&!be(Lt),dt=un||Ct,yt=G(Lt.q3),Gt=G(Lt.q2),hn=G(Lt.q1),Pt=Nn=>{if(dt){const an=Ee(Nn);return nt(an)}return nt(Nn)};return{...Lt,q3:Pt(yt),q2:Pt(Gt),q1:Pt(hn)}}),Ut={...W,rows:Ke.length,rowsData:Ke,version:W.version??s?.version??null};c(Ut)},Ie=co({control:z,name:"rowsData.0"}),Kt=co({control:z,name:"rowsData"}),Et=co({control:z,name:"rowsData.0.q3.c7"}),Xt=co({control:z,name:"rowsData.0.q2.c7"}),cn=co({control:z,name:"rowsData.0.q1.c7"});p.useEffect(()=>{V[0]&&(D("rowsData.0.q3.c7_seconds",pm(Et)),D("rowsData.0.q2.c7_seconds",pm(Xt)),D("rowsData.0.q1.c7_seconds",pm(cn)))},[Et,Xt,cn,D,V]),p.useEffect(()=>{const W=Kt??[],{rowErrors:se}=zt(W);Y(se)},[Kt]),p.useEffect(()=>{if(!Ie||V.length<=1)return;const W=Kt??[];V.forEach((se,Te)=>{if(Te===0)return;const Ve=se.id;(Be.current.get(Ve)??!1)||D(`rowsData.${Te}.medidor`,$y(Ie.medidor||"",Te,f));const ct=W[Te]?.estado;(ct==null||Number.isNaN(ct))&&D(`rowsData.${Te}.estado`,Ie.estado),D(`rowsData.${Te}.q3.c1`,Ie.q3?.c1??null),D(`rowsData.${Te}.q3.c2`,Ie.q3?.c2??null),D(`rowsData.${Te}.q3.c3`,Ie.q3?.c3??null),D(`rowsData.${Te}.q3.c6`,Ie.q3?.c6??null),D(`rowsData.${Te}.q3.c7`,Ie.q3?.c7??""),D(`rowsData.${Te}.q3.c7_seconds`,Ie.q3?.c7_seconds??null),D(`rowsData.${Te}.q2.c1`,Ie.q2?.c1??null),D(`rowsData.${Te}.q2.c2`,Ie.q2?.c2??null),D(`rowsData.${Te}.q2.c3`,Ie.q2?.c3??null),D(`rowsData.${Te}.q2.c6`,Ie.q2?.c6??null),D(`rowsData.${Te}.q2.c7`,Ie.q2?.c7??""),D(`rowsData.${Te}.q2.c7_seconds`,Ie.q2?.c7_seconds??null),D(`rowsData.${Te}.q1.c1`,Ie.q1?.c1??null),D(`rowsData.${Te}.q1.c2`,Ie.q1?.c2??null),D(`rowsData.${Te}.q1.c3`,Ie.q1?.c3??null),D(`rowsData.${Te}.q1.c6`,Ie.q1?.c6??null),D(`rowsData.${Te}.q1.c7`,Ie.q1?.c7??""),D(`rowsData.${Te}.q1.c7_seconds`,Ie.q1?.c7_seconds??null)})},[Ie,Kt,V,D,f]),p.useEffect(()=>{_e(W=>{const se=Math.max(V.length-1,0);return W>se?se:W})},[V.length]);const na=()=>{if(V.length>=50){if(D("rows",50),Je(0),!confirm("El maximo de filas es 50. Quieres fijar la lista en 50 filas?")){De.current&&(De.current.focus(),De.current.select());return}return}Re(ue()),D("rows",V.length+1),Je(V.length)},Zn=W=>{if(V.length<=1)return;const se=Math.max(0,Math.min(W,V.length-1));Ce(se),D("rows",Math.max(V.length-1,1)),Je(Math.max(0,se-(se===V.length-1?1:0)))},rt=()=>{V.length<=1||(Ce(V.length-1),D("rows",Math.max(V.length-1,1)),Je(Math.max(0,V.length-2)))},Mn=()=>{if(!confirm("Ests seguro de limpiar todos los datos de la bancada?"))return;const W=ot();if(!W.length)return;const se=W.map(()=>ue());Qe(se,0),Je(0)},En=()=>{let W=Number(K("rows"));if((!Number.isFinite(W)||W<1)&&(W=1),W>50){const Ve=ot();if(!confirm("El maximo de filas es 50. Quieres usar 50 filas?")){D("rows",Ve.length),De.current&&(De.current.focus(),De.current.select());return}W=50}const se=ot();if(W!==se.length&&!confirm(`La lista tendr ${W} filas. Quieres continuar?`)){D("rows",se.length),De.current&&(De.current.focus(),De.current.select());return}if(W===se.length){D("rows",W);return}if(W>se.length){const Ve=Math.min(W,50)-se.length;if(Ve>0){const et=Array.from({length:Ve},()=>ue()),ct=[...se,...et];Qe(ct,ve),Je(se.length)}else D("rows",se.length);return}const Te=se.slice(0,W);Qe(Te,Math.min(ve,W-1))},Xn=W=>{W.key==="Enter"&&(W.preventDefault(),En(),Je(0))},Un=()=>{const W=K(),se=document.activeElement;if(De.current&&se===De.current)Se.current="rows",Le.current="rows";else if(se&&se instanceof HTMLElement){const Te=se.getAttribute("name");Te&&Te.startsWith("rowsData.")?(Se.current="grid",Le.current=Te):(Se.current="grid",Le.current=null)}else Se.current="grid",Le.current=null;if(y){const Te=O();if(!J(Te))jr(y),pe.current=null;else{const Ve=T(Te);if(Ve){const et=JSON.stringify(Ve);bo(y,Ve,S()),pe.current=et}}}d&&d(W),i()};p.useEffect(()=>{if(!e)return;const W=se=>{if(se.key==="Escape"){se.preventDefault(),Un();return}if((se.key==="+"||se.key==="=")&&se.ctrlKey){se.preventDefault(),na();return}(se.key==="-"||se.key==="_")&&se.ctrlKey&&(se.preventDefault(),rt())};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[e,na,rt,Un]),p.useEffect(()=>{const W=We();M(W),Qe(W.rowsData,0),Be.current.clear(),requestAnimationFrame(()=>{if(ye)Je(0);else if(Le.current){const se=document.querySelector(`[name="${Le.current}"]`);if(se){se.focus(),"select"in se&&se.select?.();return}Je(ke.current||0)}else De.current&&(De.current.focus(),De.current.select())})},[s,M,fe,Je,ye]),p.useEffect(()=>{if(!e||!y)return;const W=O();if(!J(W)){jr(y),pe.current=null;return}const se=T(W);if(!se)return;const Te=JSON.stringify(se);if(Te!==pe.current)return Ze.current&&window.clearTimeout(Ze.current),Ze.current=window.setTimeout(()=>{bo(y,se,S()),pe.current=Te},400),()=>{Ze.current&&window.clearTimeout(Ze.current)}},[e,y,Kt,O]),p.useEffect(()=>{e&&requestAnimationFrame(()=>{if(ye)Je(0);else if(Le.current){const W=document.querySelector(`[name="${Le.current}"]`);if(W){W.focus(),"select"in W&&W.select?.();return}Je(ke.current||0)}else De.current&&(De.current.focus(),De.current.select())})},[e,Je,ye]);const Ln=ce.some(W=>W&&Object.values(W).some(Boolean));return e?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"modal d-block",tabIndex:-1,role:"dialog",onClick:W=>{W.target===W.currentTarget&&Un()},children:[l.jsx("style",{children:`        /* Ocultar flechas de inputs numricos para limpiar la vista */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
        input[type=number] {
          -moz-appearance: textfield;
        }

        /* Ancho minimo para columnas compactas (Temp, P.Ent, etc.) */
        .vi-min-width {
          min-width: 70px;
        }

        /* Estilo spreadsheet tipo Excel (theme-aware) */
        .vi-spreadsheet {
          background-color: var(--vi-grid-bg);
          color: var(--vi-grid-text);
          font-size: 0.75rem;
          table-layout: auto;
          width: max-content;
        }

        .vi-spreadsheet th,
        .vi-spreadsheet td {
          white-space: nowrap;
        }

        .vi-spreadsheet thead th {
          background-color: var(--vi-grid-head-bg);
          color: var(--vi-grid-head-text);
          vertical-align: middle;
          padding: 0.25rem 0.35rem;
        }

        .vi-spreadsheet td.vi-at-valor {
          color: var(--vi-grid-text) !important;
        }

                .vi-spreadsheet td.vi-row-index,
        .vi-spreadsheet th.vi-row-index {
          color: var(--vi-grid-row-index-text);
        }

        /* Columna ndice (#) fija al hacer scroll horizontal */
        .vi-spreadsheet th.vi-row-index {
          position: sticky;
          left: 0;
          z-index: 3;
          background-color: var(--vi-grid-row-index-bg); /* mismo fondo que otros headers */
        }

        .vi-spreadsheet td.vi-row-index {
          position: sticky;
          left: 0;
          z-index: 2;
          background-color: inherit;
        }

        /* Columna # Medidor (G) fija, justo despus del ndice de fila */
        .vi-spreadsheet th.vi-sticky-medidor,
        .vi-spreadsheet td.vi-sticky-medidor {
          position: sticky;
          left: 30px; /* coincide con width:"30px" de la columna # */
        }

        .vi-spreadsheet thead th.vi-sticky-medidor {
          z-index: 3;
          background-color: var(--vi-grid-head-bg);
        }

        .vi-spreadsheet tbody td.vi-sticky-medidor {
          z-index: 2;
          background-color: inherit;
        }


        .vi-spreadsheet tr.vi-base-row td.vi-row-index {
          background-color: var(--vi-grid-base-row-bg) !important;
          color: var(--vi-grid-row-index-text) !important;
          font-weight: 600;
        }

        .vi-spreadsheet td.vi-at-valor {
          transition: color 0.15s ease-in-out;
        }

        .vi-spreadsheet td.vi-at-valor:hover {
          color: var(--c-primary) !important;
        }

        .vi-spreadsheet tr.table-active td.vi-at-valor {
          color: var(--vi-grid-active-text) !important;
        }

        .vi-spreadsheet tbody td {
          padding: 0.15rem 0.25rem;
        }

        .vi-spreadsheet tr.table-active > td {
          background-color: var(--vi-grid-active-bg) !important;
          color: var(--vi-grid-active-text) !important;
        }

        .vi-spreadsheet tr.table-active input.form-control {
          background-color: var(--vi-grid-input-bg);
          color: var(--vi-grid-active-text);
          border-color: var(--vi-grid-input-active-border);
        }

        .vi-spreadsheet tr.vi-base-row.table-active > td {
          background-color: var(--vi-grid-active-bg) !important;
          color: var(--vi-grid-active-text) !important;
        }

        .vi-spreadsheet.table-hover tbody tr:not(.table-active):hover > td {
          background-color: inherit;
          color: inherit;
        }

        .vi-spreadsheet input.form-control {
          background-color: var(--vi-grid-input-bg);
          border-color: var(--vi-grid-input-border);
          color: var(--vi-grid-input-text);
          font-size: 0.75rem;
          padding: 0.05rem 0.25rem;
          height: 1.7rem;
        }

        .vi-spreadsheet input.form-control:disabled,
        .vi-spreadsheet input.form-control[readonly] {
          background-color: var(--vi-grid-disabled-bg);
          color: var(--vi-grid-disabled-text);
          opacity: 1;
        }

        /* Resaltado de fila BASE solo en columna ndice */
        .vi-spreadsheet tr.vi-base-row > td {
          background-color: transparent;
        }

        /* PUNTO E - colores de la columna de conformidad */
        .vi-spreadsheet td.vi-at-valor.vi-at-valor--fail {
          color: var(--vi-grid-at-fail-text) !important;
          background-color: var(--vi-grid-at-fail-bg);
        }
        .vi-spreadsheet td.vi-at-valor.vi-at-valor--ok {
          color: var(--vi-grid-at-ok-text) !important;
        }

        /* Colores para celdas de Error % (E%) segn rangos */
        .vi-spreadsheet .vi-e-ok {
          color: var(--vi-grid-e-ok); /* verde: dentro de tolerancia */
        }
        .vi-spreadsheet .vi-e-warn {
          color: var(--vi-grid-e-warn); /* naranja intenso: advertencia */
        }
        .vi-spreadsheet .vi-e-error {
          color: var(--vi-grid-e-error); /* rojo oscuro: error fuerte */
        }

        /* Resaltado suave de la celda enfocada (no agresivo) */
        .vi-spreadsheet input.form-control:focus,
        .vi-spreadsheet select.form-select:focus,
        .vi-spreadsheet .table-active input.form-control:focus,
        .vi-spreadsheet .table-active select.form-select:focus {
          background-color: var(--vi-grid-input-active-bg) !important; /* azul ms visible al enfocar */
          box-shadow: 0 0 0 0.18rem rgba(13, 110, 253, 0.3) !important;
        }

        /* FIX: mantener visible el resaltado rojo de celdas con error */
        .vi-spreadsheet input.vi-error-cell {
          border-color: var(--vi-grid-error-border) !important;
          background-color: var(--vi-grid-error-bg) !important;
          box-shadow: 0 0 0 0.15rem rgba(220, 53, 69, 0.25) !important;
        }

        /* -----------------------------
           Tamao de fuente del grid (filas) y ancho adaptable
           ----------------------------- */

        /* Variables base de fuente y ancho maximo de celda */
        .vi-spreadsheet {
          --vi-grid-font-size: 0.75rem;          /* tamano base de filas */
          --vi-grid-cell-max-width: 110px;       /* aprox. ancho actual maximo por columna */
          font-size: var(--vi-grid-font-size);
          table-layout: auto;
        }

        /* Escalones de tamano de fuente para las FILAS (no afecta titulos ni botones) */
        .vi-spreadsheet.vi-grid-font-0 { --vi-grid-font-size: 0.75rem; }
        .vi-spreadsheet.vi-grid-font-1 { --vi-grid-font-size: 0.8rem; }
        .vi-spreadsheet.vi-grid-font-2 { --vi-grid-font-size: 0.85rem; }
        .vi-spreadsheet.vi-grid-font-3 { --vi-grid-font-size: 0.9rem; }
        .vi-spreadsheet.vi-grid-font-4 { --vi-grid-font-size: 0.95rem; }
        .vi-spreadsheet.vi-grid-font-5 { --vi-grid-font-size: 1.0rem; }

        /* Encabezados y celdas (excepto ndice y medidor fijo):
           minimo igual al ttulo, pero pueden crecer hasta el ancho maximo actual */
        .vi-spreadsheet th:not(.vi-row-index):not(.vi-sticky-medidor),
        .vi-spreadsheet td:not(.vi-row-index):not(.vi-sticky-medidor) {
          white-space: nowrap;
          min-width: 64px;
          max-width: var(--vi-grid-cell-max-width);
        }

        /* Inputs y selects del grid: usan la fuente variable y se adaptan en alto.
           El ancho lo gobierna la celda (th/td), as pueden crecer con el contenido
           hasta el maximo definido arriba. */
        .vi-spreadsheet input.form-control {
          font-size: var(--vi-grid-font-size);
          height: calc(var(--vi-grid-font-size) * 2.3);
          width: 100%;
        }

        .vi-spreadsheet select.form-select {
          font-size: var(--vi-grid-font-size);
          width: 100%;
        }

        /* Valores de Q y E% siempre +2px respecto al resto de la fila */
        .vi-spreadsheet .vi-qe-value {
          font-size: calc(1em + 2px);
        }
        `}),l.jsx("div",{className:"modal-dialog modal-fluid",style:{maxWidth:"98vw",margin:"1vw"},children:l.jsx("div",{className:"modal-content",children:l.jsxs("form",{onSubmit:te(Ne),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{className:"modal-title",children:a}),l.jsx("button",{type:"button",className:"btn-close",onClick:Un,"aria-label":"Close"})]}),l.jsx("fieldset",{disabled:A,children:l.jsxs("div",{className:"modal-body p-2",children:[!R&&l.jsx("div",{className:"alert alert-warning py-1 mb-2",children:"Sin conexion. Los cambios se guardaran localmente hasta que vuelva la red."}),l.jsxs("div",{className:"row g-2 mb-2 align-items-end",children:[l.jsxs("div",{className:"col-auto",style:{maxWidth:"130px"},children:[l.jsx("label",{className:"form-label mb-1",children:"Filas"}),l.jsx("input",{type:"number",className:"form-control form-control-sm text-end",min:1,max:50,style:{maxWidth:"90px"},...q,ref:W=>{De.current=W,q.ref(W)},onBlur:En,onKeyDown:Xn})]}),l.jsxs("div",{className:"col-md-4 d-flex flex-wrap gap-2",children:[l.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:na,children:"+ Agregar Fila"}),l.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:rt,children:"- Quitar ltima fila"}),l.jsx("button",{type:"button",className:"btn btn-outline-auto btn-sm",onClick:Mn,children:"Limpiar Todo"})]}),l.jsxs("div",{className:"col-md-4 d-flex justify-content-end gap-2",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto btn-sm",onClick:me,children:"Aumentar tamao"}),l.jsx("button",{type:"button",className:"btn btn-outline-auto btn-sm",onClick:w,children:"Reducir tamao"})]}),l.jsxs("div",{className:"col-md-2 text-end text-muted small",children:["Fila activa: #",ve+1,". Desplaza el cursor o enfoca la fila para seleccionarla (Fila 1 se replica al resto)."]})]}),l.jsx("div",{className:"table-responsive border rounded",style:{maxHeight:"70vh",overflowY:"auto",overflowX:"auto"},children:l.jsxs("table",{className:`table table-bordered table-sm mb-0 align-middle text-center vi-spreadsheet vi-grid-font-${U}`,children:[l.jsxs("thead",{className:"vi-surface-2 sticky-top z-1",children:[l.jsxs("tr",{children:[l.jsx("th",{className:"vi-row-index",style:{width:"30px"},children:"#"}),l.jsx("th",{className:"vi-sticky-medidor",style:{width:"120px"},children:"# Medidor"}),l.jsx("th",{style:{width:"90px"},children:"Estado"}),l.jsx("th",{className:"table-primary border-start vi-border",colSpan:9,children:"Q3"}),l.jsx("th",{className:"table-primary border-start vi-border",colSpan:9,children:"Q2"}),l.jsx("th",{className:"table-primary border-start vi-border",colSpan:9,children:"Q1"}),l.jsx("th",{className:"bg-warning vi-text-contrast border-start vi-border vi-header-at",style:{width:"100px"},children:"Conformidad"}),l.jsx("th",{className:"vi-surface-2 vi-text vi-header-quitar",style:{width:"40px"},children:"Quitar"})]}),l.jsxs("tr",{style:{fontSize:"0.75rem"},children:[l.jsx("th",{className:"vi-row-index"}),l.jsx("th",{className:"vi-sticky-medidor"}),l.jsx("th",{}),l.jsx("th",{className:"vi-min-width",title:"J",children:"Temp"}),l.jsx("th",{className:"vi-min-width",title:"K",children:"P.Ent"}),l.jsx("th",{className:"vi-min-width",title:"L",children:"P.Sal"}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"M",children:"L.I."}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"N",children:"L.F."}),l.jsx("th",{className:"vi-min-width",title:"O",children:"Vol"}),l.jsx("th",{className:"vi-min-width",title:"P",children:"Tpo"}),l.jsx("th",{title:"T (Caudal)",className:"vi-surface-2 border-start text-primary fw-bold vi-min-width",children:"Q3"}),l.jsx("th",{title:"U (Error %)",className:"vi-surface-2 text-danger  fw-bold vi-min-width",children:"E%"}),l.jsx("th",{className:"vi-min-width border-start vi-border",title:"V",children:"Temp"}),l.jsx("th",{className:"vi-min-width",title:"W",children:"P.Ent"}),l.jsx("th",{className:"vi-min-width",title:"X",children:"P.Sal"}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"Y",children:"L.I."}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"Z",children:"L.F."}),l.jsx("th",{className:"vi-min-width",title:"AA",children:"Vol"}),l.jsx("th",{className:"vi-min-width",title:"AB",children:"Tpo"}),l.jsx("th",{title:"AF (Caudal)",className:"vi-surface-2 border-start text-primary fw-bold vi-min-width",children:"Q2"}),l.jsx("th",{title:"AG (Error %)",className:"vi-surface-2 text-danger  fw-bold vi-min-width",children:"E%"}),l.jsx("th",{className:"vi-min-width border-start vi-border",title:"AH",children:"Temp"}),l.jsx("th",{className:"vi-min-width",title:"AI",children:"P.Ent"}),l.jsx("th",{className:"vi-min-width",title:"AJ",children:"P.Sal"}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"AK",children:"L.I."}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"AL",children:"L.F."}),l.jsx("th",{className:"vi-min-width",title:"AM",children:"Vol"}),l.jsx("th",{className:"vi-min-width",title:"AN",children:"Tpo"}),l.jsx("th",{title:"AR (Caudal)",className:"vi-surface-2 border-start text-primary fw-bold vi-min-width",children:"Q1"}),l.jsx("th",{title:"AS (Error %)",className:"vi-surface-2 text-danger  fw-bold vi-min-width",children:"E%"}),l.jsx("th",{title:"AT (Conformidad)",className:"bg-warning vi-text-contrast vi-header-at",children:"Estado"}),l.jsx("th",{className:"vi-header-quitar"})]})]}),l.jsx("tbody",{onKeyDown:ze,children:V.map((W,se)=>{const Te=se===0,Ve=Kt?.[se]||{},et=ce[se]||{},ct=Number(Ve.estado??0),Ke=ct>=1&&ct<=4,Ut=Ve.q3?.c6,Lt=Ve.q3?.c7_seconds,Bt=Ve.q3?.c4,un=Ve.q3?.c5,Ct=gm(Ut,Lt),dt=bm(Bt,un,Ut),yt=Ve.q2?.c6,Gt=Ve.q2?.c7_seconds,hn=Ve.q2?.c4,Pt=Ve.q2?.c5,Nn=gm(yt,Gt),an=bm(hn,Pt,yt),kt=Ve.q1?.c6,Mt=Ve.q1?.c7_seconds,dn=Ve.q1?.c4,jn=Ve.q1?.c5,An=gm(kt,Mt),Jt=bm(dn,jn,kt),wt=dT(Ve.estado,dt,an,Jt),gs=[Te?"vi-base-row":"",ve===se?"table-active":""].filter(Boolean).join(" "),ha=F(`rowsData.${se}.medidor`),pn=cT(Ve.medidor??""),Gn=pn?h?.[pn]?.message:"",Bn=et.medidor_format||et.medidor_dup||Gn||"",Ia=!!Bn,$a=(wt||"").toUpperCase(),Fa=$a==="NO CONFORME"?"vi-at-valor--fail":$a==="CONFORME"?"vi-at-valor--ok":"";return l.jsxs("tr",{className:gs,onMouseEnter:()=>_e(se),onClick:()=>_e(se),onFocusCapture:()=>_e(se),children:[l.jsx("td",{className:"small vi-row-index",children:se+1}),l.jsx("td",{className:"vi-sticky-medidor",children:l.jsx("input",{"data-row":se,"data-row-id":W.id,...ha,size:1,style:{minWidth:"100%"},disabled:Ke,onInput:xn,className:["form-control form-control-sm p-1 text-center vi-medidor-input",Ia?"vi-error-cell":""].filter(Boolean).join(" "),title:Bn||"",onChange:qt=>{const aa=K(`rowsData.${se}.medidor`);if(ha.onChange(qt),v?.(aa),se===0)return;const Qt=qt.currentTarget.value.trim();if(!Qt){Be.current.delete(W.id);return}const gn=$y(Ie?.medidor??"",se,f);gn&&gn===Qt?Be.current.delete(W.id):Be.current.set(W.id,!0)}})}),l.jsx("td",{children:l.jsxs("select",{className:"form-select form-select-sm p-0 px-1",style:{fontSize:"0.75rem",height:"24px"},...F(`rowsData.${se}.estado`,{valueAsNumber:!0}),children:[l.jsx("option",{value:0,children:"0"}),l.jsx("option",{value:1,children:"1"}),l.jsx("option",{value:2,children:"2"}),l.jsx("option",{value:3,children:"3"}),l.jsx("option",{value:4,children:"4"}),l.jsx("option",{value:5,children:"5"})]})}),l.jsx("td",{className:"border-start vi-border",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Ke,...F(`rowsData.${se}.q3.c1`,{setValueAs:Kn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Ke,...F(`rowsData.${se}.q3.c2`,{setValueAs:Kn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Ke,...F(`rowsData.${se}.q3.c3`,{setValueAs:Kn})})}),l.jsx("td",{className:"vi-surface",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:xn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(et.q3_li?" vi-error-cell":""),title:et.q3_li||"",...F(`rowsData.${se}.q3.c4`,{setValueAs:Kn})})}),l.jsx("td",{className:"vi-surface",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:xn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(et.q3_lf?" vi-error-cell":""),title:et.q3_lf||"",...F(`rowsData.${se}.q3.c5`,{setValueAs:Kn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Ke,...F(`rowsData.${se}.q3.c6`,{setValueAs:Kn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Ke,...F(`rowsData.${se}.q3.c7`),placeholder:"m,ss,ms"})}),l.jsx(ei,{val:Ct}),l.jsx(ei,{val:dt,isErr:!0,warnThreshold:2,failThreshold:5}),l.jsx("td",{className:"border-start vi-border",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Ke,...F(`rowsData.${se}.q2.c1`,{setValueAs:Kn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Ke,...F(`rowsData.${se}.q2.c2`,{setValueAs:Kn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Ke,...F(`rowsData.${se}.q2.c3`,{setValueAs:Kn})})}),l.jsx("td",{className:"vi-surface",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:xn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(et.q2_li?" vi-error-cell":""),title:et.q2_li||"",...F(`rowsData.${se}.q2.c4`,{setValueAs:Kn})})}),l.jsx("td",{className:"vi-surface",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:xn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(et.q2_lf?" vi-error-cell":""),title:et.q2_lf||"",...F(`rowsData.${se}.q2.c5`,{setValueAs:Kn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Ke,...F(`rowsData.${se}.q2.c6`,{setValueAs:Kn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Ke,...F(`rowsData.${se}.q2.c7`),placeholder:"m,ss,ms"})}),l.jsx(ei,{val:Nn}),l.jsx(ei,{val:an,isErr:!0,warnThreshold:2,failThreshold:5}),l.jsx("td",{className:"border-start vi-border",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Ke,...F(`rowsData.${se}.q1.c1`,{setValueAs:Kn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Ke,...F(`rowsData.${se}.q1.c2`,{setValueAs:Kn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Ke,...F(`rowsData.${se}.q1.c3`,{setValueAs:Kn})})}),l.jsx("td",{className:"vi-surface",children:l.jsx("input",{type:"text",inputMode:"decimal",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:xn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(et.q1_li?" vi-error-cell":""),title:et.q1_li||"",...F(`rowsData.${se}.q1.c4`,{setValueAs:Kn})})}),l.jsx("td",{className:"vi-surface",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:xn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(et.q1_lf?" vi-error-cell":""),title:et.q1_lf||"",...F(`rowsData.${se}.q1.c5`,{setValueAs:Kn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Ke,...F(`rowsData.${se}.q1.c6`,{setValueAs:Kn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Ke,...F(`rowsData.${se}.q1.c7`),placeholder:"m,ss,ms"})}),l.jsx(ei,{val:An}),l.jsx(ei,{val:Jt,isErr:!0,warnThreshold:5,failThreshold:5}),l.jsx("td",{className:`vi-surface-2 border-start fw-bold small text-center vi-at-valor ${Fa}`,children:wt}),l.jsx("td",{className:"text-center align-middle vi-surface-2",children:l.jsx("button",{type:"button",className:"btn btn-danger btn-sm p-0",style:{width:"20px",height:"20px",lineHeight:"1"},onClick:qt=>{qt.stopPropagation(),Zn(se)},disabled:V.length<=1,title:"Eliminar esta fila",children:""})})]},W.id)})})]})})]})}),l.jsxs("div",{className:"modal-footer py-1",children:[l.jsx("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:Un,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",ref:X,disabled:Ln||A,children:H&&R?"Reintentar guardar":"Guardar Bancada"})]})]})})})]}),l.jsx("div",{className:"modal-backdrop show vi-backdrop"})]}):null}function $u({show:e,title:a="Contrasea para proteger Excel",confirmLabel:s="Generar Excel",helpText:i="Se usar para proteger estructura y escritura del libro. No habr contrasea de apertura.",onClose:c,onConfirm:d}){const[f,h]=p.useState(""),v=p.useRef(null),g=f.trim().length>0;if(p.useEffect(()=>{e&&(h(""),setTimeout(()=>v.current?.focus(),0))},[e]),p.useEffect(()=>{if(!e)return;const x=j=>{j.key==="Escape"&&c()};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,c]),!e)return null;const y=x=>{x.preventDefault(),g&&d(f.trim())};return l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"pwdModalTitle",onClick:x=>{x.target===x.currentTarget&&c()},children:l.jsx("div",{className:"modal-dialog",children:l.jsxs("form",{className:"modal-content",onSubmit:y,children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{id:"pwdModalTitle",className:"modal-title",children:a}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:c})]}),l.jsx("div",{className:"modal-body",children:l.jsxs("div",{className:"mb-3",children:[l.jsx(So,{label:"Contrasea",inputId:"pwd",value:f,onChange:x=>h(x.target.value),inputRef:v,minLength:1,required:!0}),l.jsx("div",{className:"form-text",children:i})]})}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:c,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!g,children:s})]})]})})})}async function mT(e,a){try{const{data:s}=await Ye.put(`/oi/${e}`,a);return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo actualizar la OI",c=new Error(i);throw c.status=s?.response?.status,c}}async function hT(e,a){try{const{data:s}=await Ye.patch(`/oi/${e}/code`,{code:a});return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo actualizar el codigo de la OI",c=new Error(i);throw c.status=s?.response?.status,c}}async function pT(e,a){try{const{data:s}=await Ye.patch(`/oi/${e}/restore-updated-at`,a);return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo restaurar la fecha de la OI",c=new Error(i);throw c.status=s?.response?.status,c}}async function gT(e){try{const{data:a}=await Ye.post("/oi",e);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo crear el OI";throw new Error(s)}}async function Fy(e,a){try{const{data:s}=await Ye.post(`/oi/${e}/bancadas`,a);return s}catch(s){const i=s?.response?.data?.detail;let c=s?.message??"No se puedo agregar la bancada";typeof i=="string"?c=i:i&&typeof i=="object"&&(c=i.message??i.detail??c);const d=s?.response?.data?.duplicates??(i&&typeof i=="object"?i.duplicates:void 0),f=new Error(c);throw f.status=s?.response?.status,Array.isArray(d)&&(f.duplicates=d),f}}async function bT(e,a){try{const{data:s}=await Ye.put(`/oi/bancadas/${e}`,a);return s}catch(s){const i=s?.response?.data?.detail;let c=s?.message??"No se pudo actualizar la bancada";typeof i=="string"?c=i:i&&typeof i=="object"&&(c=i.message??i.detail??c);const d=s?.response?.data?.duplicates??(i&&typeof i=="object"?i.duplicates:void 0),f=new Error(c);throw f.status=s?.response?.status,Array.isArray(d)&&(f.duplicates=d),f}}async function vT(e,a){try{const{data:s}=await Ye.patch(`/oi/bancadas/${e}/saved_at`,a);return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo actualizar la fecha de la bancada",c=new Error(i);throw c.status=s?.response?.status,c}}async function yT(e,a){try{const{data:s}=await Ye.put(`/oi/bancadas/${e}/restore`,a);return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo restaurar la bancada",c=new Error(i);throw c.status=s?.response?.status,c}}async function Hy(e){try{await Ye.delete(`/oi/bancadas/${e}`)}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo eliminar la bancada";throw new Error(s)}}async function oN(e,a){let s;try{s=await Ye.post(`/oi/${e}/excel`,{password:a},{responseType:"blob"})}catch(g){let y=g?.message??"No se pudo generar el Excel";const x=g?.response?.data;if(x instanceof Blob)try{const j=await x.text();try{const _=JSON.parse(j)?.detail;typeof _=="string"?y=_:Array.isArray(_)&&_.length>0?y=_.map(A=>String(A?.msg??"")).filter(Boolean).join(", "):j&&(y=j)}catch{j&&(y=j)}}catch{}else y=g?.response?.data?.detail??y;throw new Error(y)}const i=s.data,f=s.headers["content-disposition"]?.match(/filename="(.+?)"/i)?.[1]??`OI-${e}.xlsx`,h=URL.createObjectURL(i),v=document.createElement("a");v.href=h,v.download=f,document.body.appendChild(v),v.click(),URL.revokeObjectURL(h),v.remove()}async function xT(e){await Ye.delete(`/oi/${e}`)}async function NT(e){try{const{data:a}=await Ye.post(`/oi/${e}/lock`);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo bloquear la OI",i=new Error(s);throw i.status=a?.response?.status,i}}async function Kc(e,a){try{const s=a?{params:{reason:a}}:void 0,{data:i}=await Ye.delete(`/oi/${e}/lock`,s);return i}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo liberar la OI",c=new Error(i);throw c.status=s?.response?.status,c}}async function jT(e,a){try{const{data:s}=await Ye.patch(`/oi/${e}/saved_at`,a);return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo actualizar la fecha de guardado",c=new Error(i);throw c.status=s?.response?.status,c}}async function vm(e){try{const{data:a}=await Ye.get(`/oi/${e}/full`);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se puedo cargar el OI";throw new Error(s)}}async function ST(e){try{const{data:a}=await Ye.get("/oi",{params:{q:e.q||void 0,date_from:e.dateFrom||void 0,date_to:e.dateTo||void 0,limit:e.limit,offset:e.offset,responsable_tech_number:e.responsableTechNumber||void 0},headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo obtener el listado de OI";throw new Error(s)}}async function wT(e){let a;try{a=await Ye.get("/oi/export/csv",{params:{q:e.q||void 0,date_from:e.dateFrom||void 0,date_to:e.dateTo||void 0,responsable_tech_number:e.responsableTechNumber||void 0},responseType:"blob"})}catch(f){let h=f?.message??"No se pudo exportar el CSV";const v=f?.response?.data;if(v instanceof Blob)try{const y=await v.text();try{const j=JSON.parse(y)?.detail;typeof j=="string"?h=j:Array.isArray(j)&&j.length>0?h=j.map(H=>String(H?.msg??"")).filter(Boolean).join(", "):y&&(h=y)}catch{y&&(h=y)}}catch{}else h=f?.response?.data?.detail??h;const g=new Error(h);throw g.status=f?.response?.status,g}const s=a.data,d=a.headers["content-disposition"]?.match(/filename="(.+?)"/i)?.[1]??"oi_list.csv";return{blob:s,filename:d}}async function _T(){try{const{data:e}=await Ye.get("/oi/responsables");return e}catch(e){const a=e?.response?.data?.detail??e?.message??"No se pudo obtener responsables";throw new Error(a)}}async function ym(e){try{const{data:a}=await Ye.get(`/oi/${e}`);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo obtener el OI";throw new Error(s)}}const Lh="vi.currentOI";function vo(e){sessionStorage.setItem(Lh,JSON.stringify(e))}function Vy(){const e=sessionStorage.getItem(Lh);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function eh(){sessionStorage.removeItem(Lh)}const xm=e=>{if(e)return{c1:e.c1??null,c2:e.c2??null,c3:e.c3??null,c4:e.c4??null,c5:e.c5??null,c6:e.c6??null,c7:e.c7??"",c7_seconds:e.c7_seconds??null,caudal:e.caudal??null,error:e.error??null}},Nm=e=>{if(e)return{c1:e.c1??null,c2:e.c2??null,c3:e.c3??null,c4:e.c4??null,c5:e.c5??null,c6:e.c6??null,c7:e.c7??null,c7_seconds:e.c7_seconds??null,caudal:e.caudal??null,error:e.error??null}},ET=e=>({medidor:e.medidor??"",estado:e.estado??0,q3:xm(e.q3),q2:xm(e.q2),q1:xm(e.q1)}),AT=e=>({medidor:e.medidor??"",estado:e.estado??0,q3:Nm(e.q3),q2:Nm(e.q2),q1:Nm(e.q1)}),cN=e=>e.rows_data&&e.rows_data.length>0?e.rows_data:Array.from({length:e.rows}).map((a,s)=>({medidor:s===0?e.medidor??"":"",estado:e.estado,q3:s===0?e.q3??void 0:void 0,q2:s===0?e.q2??void 0:void 0,q1:s===0?e.q1??void 0:void 0})),CT=e=>e.reduce((a,s)=>a+(s.rows??0),0),OT=e=>JSON.parse(JSON.stringify(e)),Zy=e=>JSON.stringify({medidor:e.medidor??null,estado:e.estado??0,rows:e.rows??0,rows_data:e.rows_data??null,q1:e.q1??null,q2:e.q2??null,q3:e.q3??null}),Gy=e=>e.rows_data&&e.rows_data.length>0?e.rows_data:cN(e),RT=(e,a)=>e==="view"&&a?"view":"edit",Py=e=>{if(!e)return"";const s=/([zZ]|[+-]\d{2}:?\d{2})$/.test(e)?e:`${e}Z`,i=new Date(s);if(Number.isNaN(i.getTime()))return"";const c=d=>d.toString().padStart(2,"0");return`${i.getFullYear()}-${c(i.getMonth()+1)}-${c(i.getDate())}T${c(i.getHours())}:${c(i.getMinutes())}`},TT=e=>{if(!e)return"";const a=new Date(e);return Number.isNaN(a.getTime())?"":a.toISOString().replace("Z","")},uN=e=>(e??"").trim().toUpperCase(),DT=e=>{const a={};e.forEach(i=>{const c=uN(i.medidor);c&&(a[c]||(a[c]={items:[],ids:[]}),i.bancada_item!=null&&!a[c].items.includes(i.bancada_item)&&a[c].items.push(i.bancada_item),i.bancada_id!=null&&!a[c].ids.includes(i.bancada_id)&&a[c].ids.push(i.bancada_id))});const s={};return Object.entries(a).forEach(([i,c])=>{let d="Este medidor existe en otra bancada de esta misma OI.";c.items.length>0&&(d=`Este medidor existe en la bancada #${[...c.items].sort((h,v)=>h-v).join(", ")} de esta misma OI.`),s[i]={message:d,bancadaItem:c.items[0],bancadaId:c.ids[0]}}),s},zT="Tienes una OI abierta en edicion. Cierra la OI antes de salir. Deseas salir de todas formas?",kT=(e,a=!0)=>{const i=p.useContext(ss)?.navigator;p.useEffect(()=>{if(!a||!i||typeof i.block!="function")return;const c=i.block(d=>{const f={...d,retry(){c(),d.retry()}};e(f)});return c},[i,e,a])},MT=e=>{const a=Ye.defaults.baseURL??(typeof window<"u"?window.location.origin:"");return`${String(a).replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`},UT=()=>{const[e,a]=p.useState(typeof navigator<"u"?navigator.onLine:!0);return p.useEffect(()=>{const s=()=>a(!0),i=()=>a(!1);return window.addEventListener("online",s),window.addEventListener("offline",i),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",i)}},[]),e},Xc=e=>{if(e?.status??e?.response?.status)return!1;const s=e?.code??e?.name;return s==="ERR_NETWORK"||s==="ECONNABORTED"?!0:!e?.response};function Qy(){const{toast:e}=ml(),a=fl(),s=ma(),{oiId:i}=$S(),[c,d]=_x(),f=UT(),{data:h}=il({queryKey:["catalogs"],queryFn:Ch}),{register:v,handleSubmit:g,watch:y,formState:{errors:x},reset:j,getValues:H}=wu({resolver:GO(rT),defaultValues:{oi:`OI-0001-${new Date().getFullYear()}`,numeration_type:"correlativo",pma:16,q3:2.5,alcance:80}}),_=Hn(),A=_?.userId??null,R=_?.bancoId??jo(),F=ns(_?.role,_?.username)!=="technician",z=Vy(),te=i?Number(i):null,M=Number.isFinite(te)?te:null,D=M!=null||(z?.id??null)!=null,K=(c.get("mode")||"").toLowerCase(),q=RT(K,D),V=q==="view",fe=q==="edit",[Re,Ce]=p.useState(!1),[ve,_e]=p.useState(!1),[ke,De]=p.useState(null),[U,Z]=p.useState(null),[ae,he]=p.useState(!1),me=ve||V,[w,X]=p.useState(!1),[ce,Y]=p.useState(null),[ye,Se]=p.useState(null),[Le,Ze]=p.useState(null),[pe,Be]=p.useState(!1),[Ge,Je]=p.useState(""),[ot,ze]=p.useState(null),[Qe,ue]=p.useState("bancada"),[Fe,we]=p.useState(!1),[We,O]=p.useState(!1),[T,S]=p.useState(null),L=p.useRef([]),$=p.useRef(null),J=p.useRef(!1),be=p.useRef(!1),Ee=p.useRef(!1),G=p.useRef(null),Me=p.useRef(!1),$e=p.useRef(f),nt=p.useRef(!1),zt=p.useRef(!1),[Ne,Ie]=p.useState(null),[Kt,Et]=p.useState(null),[Xt,cn]=p.useState([]),[na,Zn]=p.useState(!1),[rt,Mn]=p.useState(null),[En,Xn]=p.useState(!1),[Un,Ln]=p.useState(null),[W,se]=p.useState(0),[Te,Ve]=p.useState({}),[et,ct]=p.useState({}),Ke=s.state?.returnTo,Ut=()=>typeof Ke=="string"&&Ke?Ke:"/oi/list",Lt=C=>{const P=new URLSearchParams(c);P.set("mode",C),d(P,{replace:!0})},Bt="new",un=15,Ct=C=>C?`bancada-${C.id}`:Bt,dt=C=>C==null?!1:typeof C=="string"?C.trim()!=="":typeof C=="number"?Number.isFinite(C):!0,yt=C=>C==="c7_seconds"||C==="caudal"||C==="error",Gt=C=>C?Object.entries(C).some(([P,xe])=>yt(P)?!1:dt(xe)):!1,hn=C=>!C||!Array.isArray(C.rowsData)?!1:C.rowsData.some(P=>{if(!P)return!1;if(Number(P.estado??0)!==0)return!0;const Ue=P.medidor;return typeof Ue=="string"&&Ue.trim()!==""?!0:Gt(P.q3)||Gt(P.q2)||Gt(P.q1)}),Pt=(C=un)=>Array.from({length:C}).map(()=>({medidor:"",estado:0,q3:{},q2:{},q1:{}})),Nn=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`draft-${Date.now()}`,an=C=>({draftId:Nn(),draftCreatedAt:new Date().toISOString(),estado:0,rows:un,rowsData:Pt(),version:null}),kt=C=>{const P=new URLSearchParams(s.search);P.set("mode","edit");const xe=s.pathname==="/oi"||s.pathname==="/oi/"?C?`/oi/${C}`:"/oi":s.pathname,Ue=P.toString();return Ue?`${xe}?${Ue}`:xe},Mt=(C,P)=>!C||!A||R==null?null:{version:1,ts:new Date().toISOString(),userId:A,bankId:R,oiId:C,oiCode:H("oi")??null,returnTo:kt(C),mode:"edit",modal:P},dn=()=>{if(na)return rt?{type:"bancada",bancadaId:rt.id}:{type:"bancada",isNew:!0}},jn=C=>om({userId:A,bankId:R,oiId:C,type:"bancada",isNew:!0}),An=C=>{const P=jn(C);if(!P)return null;const xe=cm(P);if(!xe||!A||R==null||!C||xe.userId!==A||xe.bankId!==R||xe.oiId!==C)return null;const Ue=xe?.data??null;return hn(Ue)?Ue:(jr(P),null)},Jt=(C,P)=>{const xe=jn(C);if(!xe)return;if(!P||!hn(P)){jr(xe);return}if(!A||R==null||!C)return;const Ue={version:1,ts:new Date().toISOString(),userId:A,bankId:R,oiId:C,isNew:!0,data:P},lt=Mt(C,{type:"bancada",isNew:!0});bo(xe,Ue,lt)},wt=C=>om({userId:A,bankId:R,oiId:C,type:"header"}),gs=C=>{if(!C)return null;const P=cm(C);return!P||!A||R==null||P.userId!==A||P.bankId!==R||Ne!=null&&P.oiId!==Ne?null:P?.data??null},ha=(C,P)=>{if(!C||!A||R==null)return;const xe=Ne??0,Ue={version:1,ts:new Date().toISOString(),userId:A,bankId:R,oiId:xe,data:P},lt=Mt(Ne,dn());bo(C,Ue,lt)},pn=C=>{C&&jr(C)},Gn=C=>{const P={};return C.q3!=null&&(P.q3=Number(C.q3)),C.alcance!=null&&(P.alcance=Number(C.alcance)),C.pma!=null&&(P.pma=Number(C.pma)),C.numeration_type&&(P.numeration_type=C.numeration_type),P},Bn=(C,P)=>om({userId:A,bankId:R,oiId:C,type:"bancada",bancadaId:P}),Ia=(C,P)=>{const xe=Bn(C,P);if(!xe)return null;const Ue=cm(xe);if(!Ue||!A||R==null||!C||!P||Ue.userId!==A||Ue.bankId!==R||Ue.oiId!==C)return null;const lt=Ue?.data??null;return hn(lt)?lt:(jr(xe),null)},$a=(C,P,xe)=>{const Ue=Bn(C,P);if(!Ue)return;if(!hn(xe)){jr(Ue);return}if(!A||R==null||!C||!P)return;const lt={version:1,ts:new Date().toISOString(),userId:A,bankId:R,oiId:C,bancadaId:P,data:xe},At=Mt(C,{type:"bancada",bancadaId:P});bo(Ue,lt,At)},Fa=(C,P)=>{const xe=Bn(C,P);xe&&jr(xe)},qt=wt(Ne);p.useEffect(()=>{h&&j(C=>({...C,q3:h.q3[0],alcance:h.alcance[0],pma:16}))},[h,j]),p.useEffect(()=>{const C=Vy(),P=M??C?.id??null;if(!P){Ie(null),cn([]),L.current=[],$.current=null,Ln(null),se(0),Et(null),Se(null),Ze(null),X(!1),_e(!1),De(null),Z(null),he(!1),Y(null);return}(async()=>{try{const xe=await vm(P);Ie(xe.id),vo({id:xe.id,code:xe.code}),cn(xe.bancadas??[]),L.current=OT(xe.bancadas??[]),$.current=xe.updated_at??null,Ln(xe.medidores_usuario??null),se(xe.medidores_total_code??0),Se(xe.saved_at??null),Ze(xe.created_at??null),Et(xe.updated_at??xe.created_at);const Ue={oi:xe.code,q3:xe.q3,alcance:xe.alcance,pma:xe.pma,numeration_type:xe.numeration_type??"correlativo"};j(Ue),X(!1),_e(xe.read_only_for_current_user??!1),De(xe.locked_by_full_name??null),Z(xe.locked_by_user_id??null),he((xe.locked_by_user_id??null)===A),Y(Ue)}catch{eh()}})()},[j,A,M]),p.useEffect(()=>{if(!Ne||et[Bt])return;const C=An(Ne);C&&(ct(P=>({...P,[Bt]:C})),e({kind:"info",message:"Se restauro un borrador local."}))},[Ne,et,e]),p.useEffect(()=>{if(!Ne||!A||!fe)return;let C=!1;return(async()=>{const P=xe=>{_e(xe?.read_only_for_current_user??!1),De(xe?.locked_by_full_name??null),Z(xe?.locked_by_user_id??null),he((xe?.locked_by_user_id??null)===A)};try{const xe=await NT(Ne);if(C)return;P(xe)}catch(xe){if(C)return;const Ue=xe?.status??xe?.response?.status;let lt=null;try{const it=await vm(Ne);if(C)return;lt=it.locked_by_full_name??null,P({read_only_for_current_user:!0,locked_by_full_name:lt,locked_by_user_id:it.locked_by_user_id??null})}catch{_e(!0),he(!1)}const At=lt?`La OI est? siendo editada por ${lt}. Se abre en modo lectura.`:xe?.message??"La OI est? siendo editada por otro usuario. Int?ntelo m?s tarde.";e({kind:Ue===423||Ue===409?"warning":"error",title:Ue===423||Ue===409?"OI bloqueada":"Error",message:At}),_e(!0),he(!1),K!=="view"&&Lt("view")}})(),()=>{C=!0}},[Ne,A,fe]),p.useEffect(()=>()=>{Ne&&ae&&Kc(Ne).catch(()=>{})},[Ne,ae]),p.useEffect(()=>{Ne&&(!ae||me||!fe||AE(Ne))},[ae,Ne,me,fe]),p.useEffect(()=>{be.current=!1,Ee.current=!1,O(!1),Me.current=!1,zt.current=!1},[Ne]),p.useEffect(()=>{if(!$e.current&&f){if(!!!Hn()?.token){e({kind:"warning",message:"Conexion restablecida, pero debes iniciar sesion para guardar."}),$e.current=f;return}(Ee.current||We)&&e({kind:"info",message:"Conexion restablecida. Puedes reintentar guardar."})}$e.current=f},[f,We,e]),p.useEffect(()=>{const C=()=>{e({kind:"warning",message:"Sesion expirada. Inicia sesion para guardar. Tu borrador esta guardado."})};return window.addEventListener("medileser:auth-expired",C),()=>window.removeEventListener("medileser:auth-expired",C)},[e]),p.useEffect(()=>{const C=TE();if(!C){S(null),nt.current=!1;return}const P=`${s.pathname}${s.search}`,xe=C.route===P,Ue=C.oiId==null||C.oiId===Ne;if(!xe&&!Ue){S(null),nt.current=!1;return}S(C),C.type==="save_bancada"&&O(!0),C.type==="save_oi"&&(Ee.current=!0),nt.current||(e({kind:"info",message:"Sesion restaurada. Reintenta guardar."}),nt.current=!0)},[s.pathname,s.search,Ne,e]);const aa=fe&&!me&&(w||!Ne);p.useEffect(()=>{if(!aa||Me.current)return;const C=gs(qt);if(!C)return;const P=H();j({...P,...C,numeration_type:C.numeration_type??P.numeration_type??"correlativo"}),Me.current=!0,e({kind:"info",message:"Se restauro un borrador local."})},[aa,qt,H,j,e]),p.useEffect(()=>{if(!aa)return;const C=y(P=>{G.current&&window.clearTimeout(G.current),G.current=window.setTimeout(()=>{ha(qt,Gn(P))},400)});return()=>{C.unsubscribe(),G.current&&window.clearTimeout(G.current)}},[y,aa,qt]);const Qt=p.useMemo(()=>Object.keys(et).length>0,[et]),gn=fe&&!me&&(ae||w||Qt);p.useEffect(()=>{if(!gn)return;const C=P=>{if(!J.current)return P.preventDefault(),P.returnValue="",""};return window.addEventListener("beforeunload",C),()=>window.removeEventListener("beforeunload",C)},[gn]),kT(C=>{if(!gn){C.retry();return}if(J.current){C.retry();return}if(C.location.pathname===s.pathname){C.retry();return}window.confirm(zT)&&C.retry()},gn),p.useEffect(()=>{if(!Ne||!ae||me||!fe)return;const C=()=>{if(J.current||be.current)return;be.current=!0;const xe=Hn()?.token,Ue=MT(`/oi/${Ne}/close`);fetch(Ue,{method:"POST",headers:xe?{Authorization:`Bearer ${xe}`}:void 0,keepalive:!0}).catch(()=>{})},P=()=>{C()};return window.addEventListener("pagehide",P),()=>window.removeEventListener("pagehide",P)},[Ne,ae,me,fe]);const Ar=y("pma"),bl=p.useMemo(()=>iT(Number(Ar)),[Ar]),Cr=y("numeration_type")??"correlativo",Or=async C=>{try{Ce(!0);const P=Hn();if(!P)throw new Error("Sesin no vlida");const xe=P.bancoId;if(xe==null)throw new Error("Debe seleccionar un banco para crear una OI.");const Ue={code:C.oi,q3:Number(C.q3),alcance:Number(C.alcance),pma:Number(C.pma),banco_id:xe,tech_number:P.techNumber,numeration_type:C.numeration_type??"correlativo"},lt=await gT(Ue);return Ie(lt.id),Et(lt.updated_at??lt.created_at),Ln(lt.medidores_usuario??0),se(lt.medidores_total_code??0),Se(lt.saved_at??null),Ze(lt.created_at??null),vo({id:lt.id,code:lt.code}),Y(C),Ee.current=!1,pn(wt(null)),pn(wt(lt.id)),Jl(),S(null),e({kind:"success",title:"OI creada",message:`${lt.code} (#${lt.id})`}),!0}catch(P){return Xc(P)?(Ee.current=!0,ha(qt,Gn(C)),e({kind:"warning",title:"Sin conexion",message:"Sin conexion. Cambios guardados localmente. Reintenta al reconectar."}),!1):go(P)?(Ee.current=!0,ha(qt,Gn(C)),!1):(e({kind:"error",title:"Error",message:P?.message??"Error creando OI"}),!1)}finally{Ce(!1)}},bs=async C=>{if(!Ne)return!1;if(me)return e({kind:"warning",title:"Solo lectura",message:"La OI est bloqueada por otro usuario."}),!1;try{if(Ce(!0),!Ne)throw new Error("No hay OI seleccionada para actualizar.");const P=C.oi?.trim(),xe=C.numeration_type??"correlativo",Ue=ce?.numeration_type??"correlativo",lt=!ce||Number(C.q3)!==Number(ce.q3)||Number(C.alcance)!==Number(ce.alcance)||Number(C.pma)!==Number(ce.pma)||xe!==Ue,At=F&&!!P&&P!==(ce?.oi??""),it=!At||lt,bn=xt=>{Et(xt.updated_at??xt.created_at),Se(xt.saved_at??null),Ze(xt.created_at??null),xt.code&&vo({id:xt.id,code:xt.code}),Z(xt.locked_by_user_id??null),De(xt.locked_by_full_name??null),_e(xt.read_only_for_current_user??!1),he((xt.locked_by_user_id??null)===A)};let ra=null;if(it){if(!Kt)throw new Error("No se pudo determinar la version actual de la OI. Recargue la pagina e intentelo de nuevo.");const xt={q3:Number(C.q3),alcance:Number(C.alcance),pma:Number(C.pma),numeration_type:xe,updated_at:Kt};ra=await mT(Ne,xt),bn(ra)}if(At&&P)try{const xt=await hT(Ne,P);ra=xt,bn(xt)}catch(xt){if(Xc(xt)||go(xt))throw xt;const In=xt?.status??xt?.response?.status;return e(In===409?{kind:"error",title:"Conflicto",message:"Ya existe una OI con ese codigo."}:In===403?{kind:"error",title:"No autorizado",message:"No autorizado."}:In===422||In===400?{kind:"error",title:"Formato",message:"Formato de OI invalido. Debe ser OI-####-YYYY."}:{kind:"error",title:"Error",message:xt?.message??"Error actualizando OI"}),!1}return ra?(Y({...C,oi:ra.code,numeration_type:xe}),X(!1),Ee.current=!1,pn(qt),Jl(),S(null),e({kind:"success",title:"OI actualizada",message:ra.code??C.oi}),!0):(X(!1),Ee.current=!1,pn(qt),Jl(),S(null),e({kind:"success",title:"OI actualizada",message:C.oi}),!0)}catch(P){if(Xc(P))return Ee.current=!0,ha(qt,Gn(C)),e({kind:"warning",title:"Sin conexion",message:"Sin conexion. Cambios guardados localmente. Reintenta al reconectar."}),!1;if(go(P))return Ee.current=!0,ha(qt,Gn(C)),!1;const xe=P?.status??P?.response?.status;return e(xe===409?{kind:"error",title:"Conflicto",message:"La OI fue modificada por otro usuario. Recargue la pgina y vuelva a intentar."}:{kind:"error",title:"Error",message:P?.message??"Error actualizando OI"}),!1}finally{Ce(!1)}},Rr=!!Ne&&w&&!me,Cn=()=>Ve({}),Tr=C=>{const P=uN(C);P&&Ve(xe=>{if(!xe[P])return xe;const Ue={...xe};return delete Ue[P],Ue})},is=()=>{if(me){e({kind:"warning",title:"Solo lectura",message:"No puede agregar bancadas mientras la OI est bloqueada."});return}if(!Ne)return;Cn(),O(!1);const C=An(Ne),P=C??an();ct(xe=>({...xe,[Bt]:P})),Jt(Ne,P),C&&e({kind:"info",message:"Se restauro un borrador local."}),Mn(null),Zn(!0)},Ha=C=>{if(me&&!V){e({kind:"warning",title:"Solo lectura",message:"No puede editar bancadas mientras la OI est? bloqueada."});return}Cn(),O(!1);const P=Ia(Ne,C.id);if(P){const xe=Ct(C);ct(Ue=>({...Ue,[xe]:P})),e({kind:"info",message:"Se restauro un borrador local."})}Mn(C),Zn(!0)};p.useEffect(()=>{if(!Ne||zt.current)return;const C=xE();if(C&&!(!A||R==null)&&!(C.userId!==A||C.bankId!==R)&&C.oiId===Ne){if(C.modal?.type==="bancada"){if(C.modal.isNew){zt.current=!0,um(),is();return}if(C.modal.bancadaId){const P=Xt.find(xe=>xe.id===C.modal?.bancadaId);if(!P)return;zt.current=!0,um(),Ha(P);return}}zt.current=!0,um()}},[A,R,Xt,Ne,is,Ha]);const Pn=p.useMemo(()=>{const C=Ct(rt),P=et[C];if(P){const lt=P.version??rt?.updated_at??rt?.created_at??null;return{...P,version:lt}}if(!rt)return;const Ue=cN(rt).map(ET);return{estado:rt.estado,rows:Ue.length||rt.rows,rowsData:Ue,version:rt.updated_at??rt.created_at??null}},[rt,et]),Dr=async C=>{if(Ne){if(me){e({kind:"warning",title:"Solo lectura",message:"No puede guardar bancadas mientras la OI est bloqueada."});return}Cn(),O(!1);try{Ce(!0);const P=C.draftCreatedAt??et[Bt]?.draftCreatedAt,xe={estado:Number(C.estado??0),rows:Number(C.rowsData.length),rows_data:C.rowsData.map(AT)};if(rt){const Ue=C.version??rt.updated_at??rt.created_at??null;if(!Ue)throw new Error("No se pudo determinar la versin actual de la bancada. Recargue y vuelva a intentar.");const lt={...xe,updated_at:Ue},At=await bT(rt.id,lt);cn(it=>it.map(bn=>bn.id===At.id?At:bn)),Et(At.updated_at??At.created_at??Kt),Ln(null),Fa(Ne,rt.id),ct(it=>{const bn=`bancada-${rt.id}`,{[bn]:ra,...xt}=it;return xt}),e({kind:"success",message:"Bancada actualizada"})}else{P&&(xe.draft_created_at=P);const Ue=await Fy(Ne,xe);cn(lt=>[...lt,Ue]),Et(Ue.updated_at??Ue.created_at??Kt),Ln(null),ct(lt=>{const{new:At,...it}=lt;return it}),Jt(Ne,null),e({kind:"success",message:"Bancada agregada"})}try{const Ue=await ym(Ne);Ln(Ue.medidores_usuario??null),se(Ue.medidores_total_code??W),Se(Ue.saved_at??null),Ze(Ue.created_at??null)}catch{}Z(_?.userId??U),De(_?.fullName??ke),he(A!==null),_e(!1),Zn(!1),Mn(null),Jl(),S(null),O(!1)}catch(P){if(Xc(P)){rt?$a(Ne,rt.id,C):Jt(Ne,C),O(!0),e({kind:"warning",title:"Sin conexion",message:"Sin conexion. La bancada se guardo localmente. Reintenta cuando vuelva la red."});return}if(go(P)){rt?$a(Ne,rt.id,C):Jt(Ne,C),O(!0);return}const xe=P?.status??P?.response?.status;if(xe===409)e({kind:"error",title:"Conflicto",message:"La bancada fue modificada por otro usuario. Recargue la pgina y vuelva a intentar."});else if(xe===400){const Ue=Array.isArray(P?.duplicates)?P.duplicates:Array.isArray(P?.response?.data?.duplicates)?P.response.data.duplicates:[];Ue.length>0&&Ve(DT(Ue)),e({kind:"warning",title:"Validacion",message:P?.message??"Error guardando bancada"})}else e({kind:"error",title:"Error",message:P?.message??"Error guardando bancada"})}finally{Ce(!1)}}},vl=async C=>{if(confirm(`Eliminar bancada #${C.item}?`)){if(me){e({kind:"warning",title:"Solo lectura",message:"No puede eliminar bancadas mientras la OI est bloqueada."});return}try{if(Ce(!0),!Ne)throw new Error("No hay OI cargada.");await Hy(C.id),cn(xe=>xe.filter(Ue=>Ue.id!==C.id)),Ln(null),ct(xe=>{const Ue=`bancada-${C.id}`,{[Ue]:lt,...At}=xe;return At}),Fa(Ne,C.id);const P=await ym(Ne);Et(P.updated_at??P.created_at??null),Se(P.saved_at??null),Ze(P.created_at??null),Z(P.locked_by_user_id??null),De(P.locked_by_full_name??null),_e(P.read_only_for_current_user??!1),he((P.locked_by_user_id??null)===A),Ln(P.medidores_usuario??null),se(P.medidores_total_code??W),e({kind:"success",message:`Bancada #${C.item} eliminada`})}catch(P){e({kind:"error",title:"Error",message:P?.message??"Error eliminando bancada"})}finally{Ce(!1)}}},vs=()=>{if(!Ne){e({kind:"warning",message:"Primero guarda el OI."});return}Xn(!0)},zr=async C=>{if(Ne)try{Ce(!0),await oN(Ne,C),e({kind:"success",message:"Excel generado"})}catch(P){e({kind:"error",title:"Error",message:P?.message??"Error generando Excel"})}finally{Ce(!1)}},pa=()=>{if(!Ne||!F)return;const C=ye??Le;ue("oi"),ze(null),Je(Py(C)),Be(!0)},yl=C=>{if(!F)return;ue("bancada"),ze(C);const P=C.saved_at??C.created_at??ye??Le;Je(Py(P)),Be(!0)},Ys=async()=>{if(!Ne||!F)return;const C=TT(Ge);if(!C){e({kind:"warning",title:"Fecha",message:"Ingrese una fecha valida."});return}if(!(Qe==="bancada"&&!ot))try{Ce(!0),Qe==="oi"?await jT(Ne,{saved_at:C,propagate_to_bancadas:!0}):ot&&await vT(ot.id,{saved_at:C});const P=await vm(Ne);if(cn(P.bancadas??[]),Ln(P.medidores_usuario??null),se(P.medidores_total_code??0),Se(P.saved_at??null),Ze(P.created_at??null),Et(P.updated_at??P.created_at),De(P.locked_by_full_name??null),Z(P.locked_by_user_id??null),_e(P.read_only_for_current_user??!1),he((P.locked_by_user_id??null)===A),!w){const xe={oi:P.code,q3:P.q3,alcance:P.alcance,pma:P.pma,numeration_type:P.numeration_type??"correlativo"};j(xe),Y(xe)}Be(!1),ze(null),Je(""),ue("bancada"),e({kind:"success",message:"Fecha guardada actualizada"})}catch(P){e({kind:"error",title:"Error",message:P?.message??"Error actualizando fecha"})}finally{Ce(!1)}},xi=C=>{Cn(),O(!1);const P=Ct(rt);let xe={...C};if(!rt){const Ue=et[Bt];xe.draftCreatedAt||(xe.draftCreatedAt=Ue?.draftCreatedAt??new Date().toISOString()),xe.draftId||(xe.draftId=Ue?.draftId??Nn())}ct(Ue=>({...Ue,[P]:xe})),rt?$a(Ne,rt.id,xe):Jt(Ne,xe),Zn(!1)},Ni=()=>{if(me){e({kind:"warning",title:"Solo lectura",message:"La OI est bloqueada por otro usuario."});return}const C=H();Y({...C,numeration_type:C.numeration_type??"correlativo"}),X(!0)},Ks=()=>{!Ne||fe||Lt("edit")},Ta=()=>{ce&&j(ce),X(!1),Ee.current=!1,pn(qt),Jl(),S(null)},ys=()=>{Ne&&(Jt(Ne,null),Object.keys(et).forEach(C=>{if(!C.startsWith("bancada-"))return;const P=Number(C.replace("bancada-",""));Number.isFinite(P)&&Fa(Ne,P)})),pn(wt(Ne)),pn(wt(null)),bE(),Ee.current=!1,O(!1),Jl(),S(null),eh(),_0(),Ie(null),cn([]),L.current=[],ct({}),X(!1),Y(null),Et(null),Se(null),Ze(null),_e(!1),De(null),Z(null),he(!1),Ln(null),se(0),Zn(!1),Mn(null),Xn(!1),Be(!1),we(!1),Je(""),ze(null),ue("bancada"),j({oi:`OI-0001-${new Date().getFullYear()}`,q3:h?.q3[0]??2.5,alcance:h?.alcance[0]??80,pma:16,numeration_type:"correlativo"})},kr=()=>{be.current=!0,J.current=!0,ys(),a(Ut())},xs=async()=>{if(!Ne)return!0;const C=L.current??[];if(C.length===0&&Xt.length===0)return!0;const P=new Map(C.map(Ue=>[Ue.id,Ue])),xe=new Map(Xt.map(Ue=>[Ue.id,Ue]));try{for(const At of Xt)P.has(At.id)||await Hy(At.id);for(const At of Xt){const it=P.get(At.id);if(!it||Zy(it)===Zy(At))continue;const bn=Gy(it),ra=bn.length||it.rows||1,xt=At.updated_at??At.created_at??it.updated_at??it.created_at;if(!xt)throw new Error("No se pudo determinar la version de la bancada para revertir cambios.");await yT(At.id,{medidor:it.medidor??null,estado:it.estado??0,rows:ra,rows_data:bn,current_updated_at:xt,restore_updated_at:it.updated_at??null,restore_saved_at:it.saved_at??null})}for(const At of C)if(!xe.has(At.id)){const it=Gy(At),bn=it.length||At.rows||1;await Fy(Ne,{estado:At.estado??0,rows:bn,rows_data:it})}const Ue=await ym(Ne),lt=Ue.updated_at??Ue.created_at;await pT(Ne,{current_updated_at:lt,restore_updated_at:$.current})}catch(Ue){return e({kind:"error",title:"Error",message:Ue?.message??"No se pudo descartar los cambios en bancadas."}),!1}return!0},Ns=()=>{Re||we(!0)},xl=async()=>{if(!Re){we(!1),Ce(!0);try{if(!await xs())return;Ne&&ae&&await Kc(Ne,"cancel")}catch{}finally{Ce(!1)}be.current=!0,J.current=!0,ys(),e({kind:"info",message:"Edicion cancelada"}),a(Ut())}},Mr=async()=>{if(Re)return;we(!1);let C=!0;if((w||!Ne)&&(C=!1,await g(async xe=>{C=Ne?await bs(xe):await Or(xe)})()),!!C){Ce(!0);try{Ne&&ae&&await Kc(Ne)}catch{}finally{Ce(!1)}be.current=!0,J.current=!0,ys(),e({kind:"info",message:"Cambios guardados"}),a(Ut())}},Ur=async()=>{if(!Re){Ce(!0);try{Ne&&ae&&await Kc(Ne)}catch{}finally{Ce(!1)}be.current=!0,J.current=!0,ys(),e({kind:"info",message:"OI cerrada"}),a(Ut())}},qn=p.useMemo(()=>CT(Xt),[Xt]),ga=Un??qn,Va=C=>{if(!C)return"-";const xe=/([zZ]|[+-]\d{2}:?\d{2})$/.test(C)?C:`${C}Z`,Ue=new Date(xe);return Number.isNaN(Ue.getTime())?C:new Intl.DateTimeFormat("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"America/Lima"}).format(Ue)},sa=rt?Bn(Ne,rt.id):jn(Ne),ba=A&&R!=null&&Ne?{userId:A,bankId:R,oiId:Ne,bancadaId:rt?.id??null,isNew:!rt,returnTo:kt(Ne),oiCode:H("oi")??null}:null;return l.jsxs("div",{className:"oi-page vi-oi-light",children:[l.jsx(vi,{show:Re}),!f&&l.jsx("div",{className:"alert alert-warning py-1 mt-2 mb-2",children:"Sin conexion. Los cambios se guardaran localmente hasta que vuelva la red."}),T&&l.jsx("div",{className:"alert alert-info py-1 mt-2 mb-2",children:"Sesion restaurada. Reintenta guardar."}),l.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[l.jsx("h1",{className:"h3",children:"Formulario OI"}),l.jsxs("div",{className:"d-flex gap-2",children:[Ne&&F&&l.jsx("button",{type:"button",className:"btn btn-outline-auto btn-sm",onClick:pa,disabled:Re,children:"Editar fecha guardado"}),Ne&&V&&l.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:Ks,disabled:Re,children:"Editar"})]})]}),me&&l.jsx("div",{className:"alert alert-warning mt-2",children:V?"Modo lectura. Use Editar para modificar.":ke?`Esta OI est siendo editada por ${ke}. Se abre en modo lectura.`:"Esta OI est en modo lectura. No se pueden realizar cambios."}),l.jsxs("form",{onSubmit:g(Rr?bs:Or),className:`row g-3 mt-1 ${Rr?"vi-form-editing":"vi-form-readonly"}`,children:[l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"oi",className:"form-label",children:"OI (OI-####-YYYY)"}),l.jsx("input",{id:"oi",className:`form-control ${Ne&&!(F&&w&&!me)?"vi-locked":""}`,...v("oi"),disabled:Ne?!(F&&w&&!me):!1}),x.oi&&l.jsx("div",{className:"text-danger small",children:x.oi.message}),F?null:l.jsx("div",{className:"form-text",children:"Solo administradores pueden cambiar el codigo de OI."})]}),l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"q3",className:"form-label",children:"Q3 (m/h)"}),l.jsx("select",{id:"q3",className:"form-select",...v("q3",{valueAsNumber:!0}),disabled:!!Ne&&!w||me,children:h?.q3.map(C=>l.jsx("option",{value:C,children:C},C))})]}),l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"alcance",className:"form-label",children:"Alcance Q3/Q1"}),l.jsx("select",{id:"alcance",className:"form-select",...v("alcance",{valueAsNumber:!0}),disabled:!!Ne&&!w||me,children:h?.alcance.map(C=>l.jsx("option",{value:C,children:C},C))})]}),l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"pma",className:"form-label",children:"PMA (bar)"}),l.jsx("select",{id:"pma",className:"form-select",...v("pma",{valueAsNumber:!0}),disabled:!!Ne&&!w||me,children:h?.pma.map(C=>l.jsx("option",{value:C,children:C},C))}),l.jsx("div",{className:"form-text",children:"Solo en formulario; calcula Presin (bar)."})]}),l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"presion",className:"form-label",children:"Presin (bar)"}),l.jsx("input",{id:"presion",className:"form-control",value:isNaN(bl)?"":bl,disabled:!0})]}),l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"numeration_type",className:"form-label",children:"Tipo de numeracin (# Medidor)"}),l.jsxs("select",{id:"numeration_type",className:"form-select",...v("numeration_type"),disabled:!!Ne&&!w||me,children:[l.jsx("option",{value:"correlativo",children:"Correlativo"}),l.jsx("option",{value:"no correlativo",children:"No Correlativo"})]}),l.jsx("div",{className:"form-text",children:"Define cmo se completa la columna # Medidor en el Grid."})]}),l.jsxs("div",{className:"col-12 d-flex align-items-center gap-2",children:[l.jsx("button",{className:"btn btn-primary",disabled:Re||!!Ne&&(!w||me),children:Ne?Rr?"Guardar cambios":"OI guardada":"Guardar OI"}),Ne&&!w&&fe&&l.jsx("button",{type:"button",className:"btn btn-outline-warning",onClick:Ni,disabled:Re||me,children:"Editar OI"}),Ne&&w&&fe&&l.jsx("button",{type:"button",className:"btn btn-outline-warning",onClick:Ta,disabled:Re,children:"Cancelar edicion"}),V&&l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:kr,disabled:Re,children:"Volver al listado"}),l.jsx("button",{type:"button",className:"btn btn-outline-success",onClick:vs,disabled:!Ne||Re||w,children:"Generar Excel"}),fe&&l.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:Ur,disabled:!Ne||w||Re,children:"Cerrar OI"}),fe&&l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:Ns,disabled:Re,children:"Cancelar"})]})]}),l.jsx("hr",{className:"my-4"}),l.jsxs("div",{className:"card vi-card-table mt-3",children:[l.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"h6 mb-0",children:"Bancadas"}),l.jsxs("small",{className:"text-muted",children:["Medidores (mi registro): ",ga," | Total OI: ",W]})]}),l.jsx("button",{className:"btn btn-primary",onClick:is,disabled:!Ne||Re||w||me,children:"Agregar Bancada"})]}),l.jsx("div",{className:"card-body p-0",children:l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-hover table-striped table-sm align-middle mb-0",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"vi-col-60",children:"Item"}),l.jsx("th",{children:"# Medidor"}),l.jsx("th",{children:"Medidores"}),l.jsx("th",{className:"vi-col-160",children:"Fecha creacin"}),l.jsx("th",{className:"vi-col-160",children:"Fecha guardado"}),l.jsx("th",{className:"vi-col-160",children:"ltima fecha mod."}),l.jsx("th",{className:"vi-col-160 text-end",children:"Acciones"})]})}),l.jsxs("tbody",{children:[Xt.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"text-muted text-center py-3",children:"Sin bancadas. Agrega la primera."})}),Xt.map(C=>{const P=C.rows_data?.[0]?.medidor||C.medidor||"",xe=C.rows_data?.[(C.rows_data?.length||0)-1]?.medidor||"",Ue=P&&xe&&P!==xe?`${P} ... ${xe}`:P;return l.jsxs("tr",{children:[l.jsx("td",{children:C.item}),l.jsx("td",{children:Ue}),l.jsx("td",{children:C.rows}),l.jsx("td",{children:Va(C.created_at)}),l.jsx("td",{children:Va(C.saved_at)}),l.jsx("td",{children:Va(C.updated_at??C.created_at)}),l.jsxs("td",{className:"text-end",children:[F?l.jsx("button",{className:"btn btn-sm btn-outline-auto me-2",onClick:()=>yl(C),disabled:Re||w||ve,"aria-label":`Editar fecha guardado bancada #${C.item}`,title:"Editar fecha guardado",children:"Editar fecha guardado"}):null,l.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>Ha(C),disabled:Re||w||!V&&me,"aria-label":`${V?"Ver":"Editar"} bancada #${C.item}`,title:V?"Ver":"Editar",children:V?"Ver":"Editar"}),l.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>vl(C),disabled:Re||w||me,"aria-label":`Eliminar bancada #${C.item}`,title:"Eliminar",children:""})]})]},C.id)})]})]})})})]}),na&&l.jsx(fT,{show:na,title:rt?`Editar bancada #${rt.item}`:"Nueva bancada",initial:Pn,onClose:()=>{Cn(),Zn(!1)},onSubmit:Dr,onCancelWithDraft:xi,numerationType:Cr,readOnly:me,duplicateMap:Te,onClearDuplicate:Tr,draftStorageKey:sa,draftMeta:ba,isOnline:f,showRetry:We}),Fe&&l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"cancelTitle",onClick:C=>{C.target===C.currentTarget&&we(!1)},children:l.jsx("div",{className:"modal-dialog",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{id:"cancelTitle",className:"modal-title",children:"Confirmar cancelacion"}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>we(!1)})]}),l.jsx("div",{className:"modal-body",children:l.jsx("p",{children:"Estas seguro de descartar cambios?"})}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:xl,disabled:Re,children:"Descartar cambios"}),l.jsx("button",{type:"button",className:"btn btn-primary",onClick:Mr,disabled:Re,children:"Guardar cambios y volver al listado"})]})]})})}),pe&&l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"savedAtTitle",onClick:C=>{C.target===C.currentTarget&&(Be(!1),ze(null),ue("bancada"))},children:l.jsx("div",{className:"modal-dialog",children:l.jsxs("form",{className:"modal-content",onSubmit:C=>{C.preventDefault(),Ys()},children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{id:"savedAtTitle",className:"modal-title",children:"Editar fecha guardado"}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>{Be(!1),ze(null),ue("bancada")}})]}),l.jsx("div",{className:"modal-body",children:l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{htmlFor:"savedAtInput",className:"form-label",children:"Fecha guardado"}),l.jsx("input",{id:"savedAtInput",type:"datetime-local",className:"form-control",value:Ge,onChange:C=>Je(C.target.value),required:!0}),l.jsx("div",{className:"form-text",children:Qe==="oi"?"Se aplicar a todas las bancadas de la OI.":"Se aplica a la bancada seleccionada."})]})}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:()=>{Be(!1),ze(null),ue("bancada")},children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Re||!Ge,children:"Guardar"})]})]})})}),l.jsx($u,{show:En,title:"Contrasea para proteger Excel",onClose:()=>Xn(!1),onConfirm:C=>{Xn(!1),zr(C)}})]})}function LT(e){return e==="/home"?null:e==="/oi"?"oi_formulario":e==="/oi/list"?"oi_listado":e==="/oi/tools/vima-to-lista"?"tools_vima_lista":e==="/oi/tools/actualizacion-base"?"tools_actualizacion_bases":e==="/oi/tools/formato-ac/history"?"tools_historial_ac":e==="/oi/tools/consolidacion/correlativo"?"tools_consol_correlativo":e==="/oi/tools/consolidacion/no-correlativo"?"tools_consol_no_correlativo":e==="/logistica/log01/history"?"logistica_history":e==="/logistica/log01/excel"?"logistica":e==="/logistica/log02/pdfs"?"logistica_pdfs":e.startsWith("/logistica/")?"logistica":e.startsWith("/oi/")?"oi_formulario":e==="/users"?"users_admin":e==="/admin/permisos"?"admin_permisos":null}function BT(){const e=Hn(),a=ma(),s=e?.token??null,[i,c]=p.useState(()=>!!s);if(p.useEffect(()=>{if(!s){c(!1);return}let j=!1;return c(!0),Ye.get("/auth/me").then(()=>{j||c(!1)}).catch(async H=>{if(j)return;if(H?.response?.status===401){await O0();return}c(!1)}),()=>{j=!0}},[s]),!s)return l.jsx(Sr,{to:"/login",replace:!0});if(i)return l.jsx(vi,{show:!0});const d=e,f=ns(d.role,d.username),h=Du(d),v=ci(f),g=jo(),y=a.pathname==="/oi"||a.pathname.startsWith("/oi/");if(v&&y&&!(g&&g>0)&&a.pathname!=="/home")return l.jsx(Sr,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Banco",message:"Debe seleccionar un banco para continuar."}}});if(a.pathname==="/admin/permisos"&&!h)return l.jsx(Sr,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Permisos",message:"Solo el superusuario puede acceder a este mdulo."}}});if(a.pathname==="/users"&&!(f==="admin"||f==="administrator"))return l.jsx(Sr,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Usuarios",message:"No tiene permiso para acceder a este mdulo."}}});if(!h){const j=LT(a.pathname),H=d.allowedModules;if(j&&Array.isArray(H)&&!H.includes(j))return l.jsx(Sr,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Permisos",message:"No tiene permiso para acceder a este mdulo."}}})}return l.jsx(vx,{})}const qT=({isActive:e})=>"vi-sidebar-link d-flex align-items-center"+(e?" active":""),IT=.9;function Bh(e,a){if(!(a||e<=0))return{paddingLeft:`calc(0.75rem + ${e*IT}rem)`}}function _a({to:e,icon:a,label:s,depth:i,collapsed:c}){return l.jsx("li",{className:"vi-sidebar-item",children:l.jsxs(Sx,{to:e,end:!0,className:qT,style:Bh(i,c),title:s,"aria-label":s,children:[l.jsx("i",{className:`ti ${a} vi-sidebar-icon`}),l.jsx("span",{className:"vi-sidebar-text vi-sidebar-label",children:s})]})})}function Yy({icon:e,label:a,depth:s,collapsed:i}){return l.jsx("li",{className:"vi-sidebar-item",children:l.jsxs("button",{type:"button",className:"vi-sidebar-link vi-sidebar-link--disabled d-flex align-items-center w-100 border-0 bg-transparent",style:Bh(s,i),title:a,"aria-label":a,"aria-disabled":"true",disabled:!0,children:[l.jsx("i",{className:`ti ${e} vi-sidebar-icon`}),l.jsx("span",{className:"vi-sidebar-text vi-sidebar-label",children:a})]})})}function el({groupKey:e,icon:a,label:s,depth:i,collapsed:c,open:d,active:f,onToggle:h,children:v}){const g=`sidebar-group-${e}`,y=d?"ti-angle-down":"ti-angle-right";return l.jsxs("li",{className:"vi-sidebar-item",children:[l.jsxs("button",{type:"button",className:"vi-sidebar-link d-flex align-items-center w-100 border-0 bg-transparent"+(f?" active":""),style:Bh(i,c),onClick:()=>{c||h(e)},"aria-expanded":!c&&d,"aria-controls":g,title:s,children:[l.jsx("i",{className:`ti ${a} vi-sidebar-icon`}),l.jsx("span",{className:"vi-sidebar-text vi-sidebar-label flex-grow-1",children:s}),l.jsx("span",{className:"vi-sidebar-text vi-sidebar-caret ms-auto",children:l.jsx("i",{className:`ti ${y}`})})]}),!c&&d&&l.jsx("ul",{id:g,className:"list-unstyled mb-0",children:v})]})}function $T({collapsed:e,onToggleSidebar:a}){const s=ma(),i=Hn(),c=!!i,d=ns(i?.role,i?.username),f=Du(i),h=d==="admin"||d==="administrator",v=i?.allowedModules,g=he=>f||!Array.isArray(v)||v.includes(he),y=c&&g("tools_vima_lista"),x=c&&g("tools_actualizacion_bases"),j=c&&g("tools_historial_ac"),H=c&&g("tools_consol_correlativo"),_=c&&g("tools_consol_no_correlativo"),A=c&&g("oi_formulario"),R=c&&g("oi_listado"),F=c&&h&&g("users_admin"),z=c&&g("future_ot"),te=c&&g("logistica"),M=c&&g("logistica_history"),D=c&&g("logistica_pdfs"),K=te||M||D,q=c&&g("future_smart"),V=H||_,fe=y||x||j,Re=A||R||z,Ce=fe||Re||V,ve=p.useMemo(()=>({oi:!0,oi_formato_ac:!0,oi_consolidacion:!0,oi_verificacion:!0,logistica:!0,usuarios:!1,administrar:!1}),[]),[_e,ke]=p.useState(()=>{const he=localStorage.getItem("medileser.sidebar.openGroups")??localStorage.getItem("vi.sidebar.openGroups");if(!he)return ve;try{const me=JSON.parse(he),w={...ve};return Object.keys(w).forEach(X=>{typeof me[X]=="boolean"&&(w[X]=me[X])}),w}catch{return ve}}),De=s.pathname;p.useEffect(()=>{localStorage.setItem("medileser.sidebar.openGroups",JSON.stringify(_e))},[_e]);const U=p.useMemo(()=>{const he=me=>!!xo({path:me,end:!0},De);return{vimaToLista:he("/oi/tools/vima-to-lista"),actualizacionBases:he("/oi/tools/actualizacion-base"),formatoAcHistory:he("/oi/tools/formato-ac/history"),consolidacionCorrelativo:he("/oi/tools/consolidacion/correlativo"),consolidacionNoCorrelativo:he("/oi/tools/consolidacion/no-correlativo"),registroOi:he("/oi"),listadoOi:he("/oi/list"),users:he("/users"),password:he("/password"),permisos:he("/admin/permisos"),log01Excel:he("/logistica/log01/excel"),log01History:he("/logistica/log01/history"),log02Pdfs:he("/logistica/log02/pdfs")}},[De]),Z=p.useMemo(()=>({oi_consolidacion:U.consolidacionCorrelativo||U.consolidacionNoCorrelativo,oi_formato_ac:U.vimaToLista||U.actualizacionBases||U.formatoAcHistory,oi_verificacion:U.registroOi||U.listadoOi,oi:U.vimaToLista||U.actualizacionBases||U.formatoAcHistory||U.consolidacionCorrelativo||U.consolidacionNoCorrelativo||U.registroOi||U.listadoOi,usuarios:U.users||U.password,logistica:U.log01Excel||U.log01History||U.log02Pdfs,administrar:U.permisos}),[U]);function ae(he){ke(me=>({...me,[he]:!me[he]}))}return l.jsxs("aside",{className:`vi-sidebar ${e?"vi-sidebar--collapsed":""}`,children:[l.jsxs("div",{className:"vi-sidebar__header",children:[l.jsxs("div",{className:"vi-sidebar__brand",children:[l.jsx("img",{className:"vi-brand-logo",src:"/medileser/loading.png",alt:"Medileser",draggable:!1}),l.jsx("span",{className:"vi-brand-text",children:"MEDILESER APP"})]}),a&&l.jsx("button",{type:"button",className:"vi-sidebar-toggle","aria-label":e?"Expandir men":"Contraer men",onClick:a,children:l.jsx("i",{className:`ti ${e?"ti-angle-right":"ti-angle-left"}`})})]}),l.jsxs("ul",{className:"vi-sidebar-menu list-unstyled mb-0",children:[!c&&l.jsx(_a,{to:"/login",icon:"ti-login",label:"Login",depth:0,collapsed:e}),Ce&&l.jsxs(el,{groupKey:"oi",icon:"ti-panel",label:"OI",depth:0,collapsed:e,open:_e.oi,active:Z.oi,onToggle:ae,children:[fe&&l.jsxs(el,{groupKey:"oi_formato_ac",icon:"ti-folder",label:"FORMATO A-C",depth:1,collapsed:e,open:_e.oi_formato_ac,active:Z.oi_formato_ac,onToggle:ae,children:[y&&l.jsx(_a,{to:"/oi/tools/vima-to-lista",icon:"ti-exchange-vertical",label:"VIMA  LISTA",depth:2,collapsed:e}),x&&l.jsx(_a,{to:"/oi/tools/actualizacion-base",icon:"ti-reload",label:"ACTUALIZACIN DE BASES",depth:2,collapsed:e}),j&&l.jsx(_a,{to:"/oi/tools/formato-ac/history",icon:"ti-view-list-alt",label:"HISTORIAL A-C",depth:2,collapsed:e})]}),V&&l.jsxs(el,{groupKey:"oi_consolidacion",icon:"ti-layers",label:"CONSOLIDACIN DE BASES ORIGINALES",depth:1,collapsed:e,open:_e.oi_consolidacion,active:Z.oi_consolidacion,onToggle:ae,children:[H&&l.jsx(_a,{to:"/oi/tools/consolidacion/correlativo",icon:"ti-list",label:"CORRELATIVO",depth:3,collapsed:e}),_&&l.jsx(_a,{to:"/oi/tools/consolidacion/no-correlativo",icon:"ti-layout-list-thumb",label:"NO CORRELATIVO",depth:3,collapsed:e})]}),Re&&l.jsxs(el,{groupKey:"oi_verificacion",icon:"ti-clipboard",label:"VERIFICACIN INICIAL",depth:1,collapsed:e,open:_e.oi_verificacion,active:Z.oi_verificacion,onToggle:ae,children:[z&&l.jsx(Yy,{icon:"ti-briefcase",label:"ORDEN DE TRABAJO (FUTURO)",depth:2,collapsed:e}),A&&l.jsx(_a,{to:"/oi",icon:"ti-layout-grid2",label:"REGISTRO OI",depth:2,collapsed:e}),R&&l.jsx(_a,{to:"/oi/list",icon:"ti-view-list-alt",label:"LISTADO OI",depth:2,collapsed:e})]})]}),K&&l.jsxs(el,{groupKey:"logistica",icon:"ti-package",label:"LOGSTICA",depth:0,collapsed:e,open:_e.logistica,active:Z.logistica,onToggle:ae,children:[te&&l.jsx(_a,{to:"/logistica/log01/excel",icon:"ti-files",label:"Consolidacion Excel",depth:1,collapsed:e}),M&&l.jsx(_a,{to:"/logistica/log01/history",icon:"ti-view-list-alt",label:"Historial de consolidaciones",depth:1,collapsed:e}),D&&l.jsx(_a,{to:"/logistica/log02/pdfs",icon:"ti-filter",label:"Filtrado de Cert.PDFs",depth:1,collapsed:e})]}),q&&l.jsx(Yy,{icon:"ti-bar-chart",label:"SMART (FUTURO)",depth:0,collapsed:e}),l.jsxs(el,{groupKey:"usuarios",icon:"ti-user",label:"USUARIOS",depth:0,collapsed:e,open:_e.usuarios,active:Z.usuarios,onToggle:ae,children:[F&&l.jsx(_a,{to:"/users",icon:"ti-user",label:"GESTIN DE USUARIOS",depth:1,collapsed:e}),c&&l.jsx(_a,{to:"/password",icon:"ti-key",label:"CAMBIAR CONTRASEA",depth:1,collapsed:e})]}),f&&l.jsx(el,{groupKey:"administrar",icon:"ti-settings",label:"ADMINISTRAR",depth:0,collapsed:e,open:_e.administrar,active:Z.administrar,onToggle:ae,children:l.jsx(_a,{to:"/admin/permisos",icon:"ti-lock",label:"PERMISOS",depth:1,collapsed:e})})]})]})}function FT({sidebarCollapsed:e,onToggleSidebar:a}){const s=Hn(),i=s?.username??s?.user??"",c=s?ci(s.role):!1,[d,f]=p.useState(()=>jo());p.useEffect(()=>LE(()=>f(jo())),[]);const h=d&&d>0?`Banco ${d}`:"Banco sin seleccionar",v=async()=>{try{await IE()}finally{location.assign("/login")}};return l.jsxs("header",{className:"navbar navbar-expand vi-surface border-bottom vi-border sticky-top vi-topbar px-3",children:[a&&l.jsx("button",{type:"button",className:"btn btn-link text-secondary me-2 vi-sidebar-toggle","aria-label":e?"Expandir men":"Contraer men",onClick:a,children:l.jsx("i",{className:`ti ${e?"ti-menu-alt":"ti-menu"}`})}),l.jsx("div",{className:"me-auto"}),l.jsxs("div",{className:"d-flex align-items-center gap-3",children:[l.jsx(L0,{}),s&&l.jsxs("span",{className:"text-muted small text-truncate",style:{maxWidth:"360px"},children:["Usuario: ",l.jsx("strong",{children:i||"?"}),c&&l.jsxs(l.Fragment,{children:["  ",h,s.techNumber?l.jsxs(l.Fragment,{children:["  ","Tcnico ",s.techNumber]}):null]})]}),s&&l.jsx("button",{className:"btn btn-sm btn-outline-auto",onClick:v,children:"Cerrar sesin"})]})]})}function HT(){const a=ma().pathname==="/home",[s,i]=p.useState(()=>{try{return(localStorage.getItem("medileser.sidebar.collapsed")??localStorage.getItem("vi.sidebar.collapsed"))==="true"}catch{return!1}}),c=()=>i(d=>!d);return p.useEffect(()=>{try{localStorage.setItem("medileser.sidebar.collapsed",String(s))}catch{}},[s]),l.jsxs("div",{className:`vi-layout ${s?"vi-layout--collapsed":""}`,children:[l.jsx($T,{collapsed:s,onToggleSidebar:c}),l.jsxs("div",{className:"vi-main",children:[l.jsx(FT,{sidebarCollapsed:s,onToggleSidebar:c}),l.jsx("main",{className:`vi-content${a?" vi-content--home":""}`,children:l.jsx(vx,{})})]})]})}function VT(){const{toast:e}=ml(),a=fl(),s=ma(),[,i]=_x(),[c,d]=p.useState(()=>new URLSearchParams(s.search).get("q")??""),[f,h]=p.useState(()=>(new URLSearchParams(s.search).get("q")??"").trim()),[v,g]=p.useState(()=>new URLSearchParams(s.search).get("dateFrom")??""),[y,x]=p.useState(()=>new URLSearchParams(s.search).get("dateTo")??""),[j,H]=p.useState(()=>{const G=new URLSearchParams(s.search).get("pageSize"),Me=G?Number(G):20;return Number.isFinite(Me)&&Me>0?Me:20}),[_,A]=p.useState(()=>{const G=new URLSearchParams(s.search).get("page"),Me=G?Number(G):1;return Number.isFinite(Me)&&Me>0?Math.floor(Me):1}),[R,F]=p.useState(()=>new URLSearchParams(s.search).get("responsableTech")??""),z=(_-1)*j,te=p.useRef(!1);p.useEffect(()=>{if(!te.current){te.current=!0;return}const G=setTimeout(()=>{h(c.trim()),A(1)},300);return()=>clearTimeout(G)},[c]),p.useEffect(()=>{const G=new URLSearchParams,Me=c.trim();Me&&G.set("q",Me),v&&G.set("dateFrom",v),y&&G.set("dateTo",y),R&&G.set("responsableTech",R),_!==1&&G.set("page",String(_)),j!==20&&G.set("pageSize",String(j));const $e=s.search.startsWith("?")?s.search.slice(1):s.search;G.toString()!==$e&&i(G,{replace:!0})},[v,y,s.search,_,j,R,c,i]);const{data:M,isLoading:D,isError:K,error:q,refetch:V,isFetching:fe}=il({queryKey:["oi","list",{search:f,dateFrom:v,dateTo:y,responsableTech:R,pageSize:j,offset:z}],queryFn:()=>ST({q:f||void 0,dateFrom:v||void 0,dateTo:y||void 0,responsableTechNumber:R?Number(R):void 0,limit:j,offset:z}),placeholderData:G=>G}),Re=Hn(),Ce=ns(Re?.role,Re?.username)!=="technician",{data:ve=[],isFetching:_e,isError:ke,error:De}=il({queryKey:["oi","responsables"],queryFn:_T,enabled:Ce,staleTime:6e4,retry:!1}),U=ke?De?.message??"No se pudo cargar responsables":"",Z=G=>{if(!G)return"-";const Me=G.endsWith("Z")?G:`${G}Z`,$e=new Date(Me),nt=zt=>zt.toString().padStart(2,"0");return`${nt($e.getDate())}/${nt($e.getMonth()+1)}/${$e.getFullYear()} ${nt($e.getHours())}:${nt($e.getMinutes())}`},he=M?.items??[],me=M?.summary??{medidores_resultado:0,oi_unicas:0,medidores_total_oi_unicas:0},w=M?.total??0,X=M?.limit??j,ce=X>0?Math.ceil(w/X):1,Y=10;let ye=1,Se=ce;if(ce>Y){const G=Math.floor(Y/2);ye=Math.max(1,_-G),Se=ye+Y-1,Se>ce&&(Se=ce,ye=Math.max(1,Se-Y+1))}const[Le,Ze]=p.useState(!1),[pe,Be]=p.useState(null),[Ge,Je]=p.useState(!1),[ot,ze]=p.useState(!1),Qe=D||fe||Ge||ot,ue=()=>`${s.pathname}${s.search}`,Fe=(G,Me)=>{try{vo({id:G,code:Me}),e({kind:"success",message:`OI ${Me} cargada`}),a(`/oi/${G}?mode=view`,{state:{returnTo:ue()}})}catch($e){e({kind:"error",title:"Error",message:$e?.message??"No se pudo abrir el OI"})}},we=(G,Me)=>{try{vo({id:G,code:Me}),e({kind:"success",message:`OI ${Me} cargada`}),a(`/oi/${G}?mode=edit`,{state:{returnTo:ue()}})}catch($e){e({kind:"error",title:"Error",message:$e?.message??"No se pudo abrir el OI"})}},We=async()=>{try{await Mo()}finally{eh(),a("/oi?mode=edit",{state:{returnTo:ue()}})}},O=async(G,Me)=>{if(confirm(`Ests seguro de ELIMINAR la ${Me}?
Esta accin borrar todas sus bancadas y no se puede deshacer.`))try{await xT(G),e({kind:"success",title:"Eliminado",message:`Se elimin ${Me} correctamente.`}),V()}catch($e){e({kind:"error",title:"Error",message:$e.message||"No se pudo eliminar la OI"})}},T=G=>{Be(G),Ze(!0)},S=async G=>{if(pe)try{Je(!0),await oN(pe,G),e({kind:"success",message:"Excel generado"})}catch(Me){e({kind:"error",title:"Error",message:Me?.message??"No se pudo generar el Excel"})}finally{Je(!1)}},L=async()=>{try{ze(!0);const{blob:G,filename:Me}=await wT({q:f||void 0,dateFrom:v||void 0,dateTo:y||void 0,responsableTechNumber:R?Number(R):void 0}),$e=URL.createObjectURL(G),nt=document.createElement("a");nt.href=$e,nt.download=Me,document.body.appendChild(nt),nt.click(),URL.revokeObjectURL($e),nt.remove()}catch(G){const Me=G?.status,$e=G?.message??"No se pudo exportar el CSV";e(Me===403?{kind:"error",title:"No autorizado",message:$e}:{kind:"error",title:"Error",message:$e})}finally{ze(!1)}},$=()=>{d(""),h(""),g(""),x(""),A(1),F("")},J=w===0?0:z+1,be=w===0?0:Math.min(z+he.length,w),Ee=w===0?"0 registros":`Mostrando ${J}-${be} de ${w} registros`;return l.jsxs("div",{children:[l.jsx(vi,{show:Qe}),l.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[l.jsxs("div",{className:"d-flex align-items-center gap-2",children:[l.jsx("button",{className:"btn btn-primary",onClick:We,disabled:Qe,title:"Nueva OI",children:"Nueva OI"}),l.jsx("h1",{className:"h3 mb-0",children:"Listado de OI"})]}),l.jsxs("div",{className:"d-flex gap-2",children:[Ce&&l.jsx("button",{className:"btn btn-outline-auto",onClick:L,disabled:Qe,children:ot?"Exportando...":"Exportar CSV"}),l.jsx("button",{className:"btn btn-outline-auto",onClick:$,disabled:Qe,children:"Limpiar filtros"}),l.jsx("button",{className:"btn btn-outline-auto",onClick:()=>V(),disabled:Qe,children:"Recargar"})]})]}),K&&l.jsx("div",{className:"alert alert-danger",children:q?.message??"Error cargando listado"}),l.jsxs("div",{className:"card vi-card-table",children:[l.jsxs("div",{className:"card-header d-flex flex-wrap align-items-center justify-content-between gap-2",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"h6 mb-0",children:"Registros"}),l.jsxs("small",{className:"text-muted",children:["Medidores (resultados): ",me.medidores_resultado," | OI unicas: ",me.oi_unicas," | Medidores (Total OI): ",me.medidores_total_oi_unicas]})]}),l.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[l.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Buscar OI o medidor...",value:c,onChange:G=>{d(G.target.value),A(1)},"aria-label":"Buscar por codigo de OI o medidor"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:v,onChange:G=>{g(G.target.value),A(1)},"aria-label":"Filtrar desde fecha"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:y,onChange:G=>{x(G.target.value),A(1)},"aria-label":"Filtrar hasta fecha"}),Ce&&l.jsxs("div",{className:"d-flex flex-column",children:[l.jsxs("select",{className:"form-select form-select-sm",value:R,onChange:G=>{F(G.target.value),A(1)},disabled:Qe||_e,"aria-label":"Filtrar por responsable",title:"Responsable",children:[l.jsx("option",{value:"",children:"Responsable: Todos"}),ve.map(G=>l.jsx("option",{value:String(G.tech_number),children:G.full_name},G.tech_number))]}),U?l.jsx("small",{className:"text-danger",children:U}):null]}),l.jsxs("div",{className:"d-flex align-items-center",children:[l.jsx("span",{className:"me-1 small",children:"Mostrar"}),l.jsxs("select",{className:"form-select form-select-sm",value:j,onChange:G=>{const Me=Number(G.target.value)||20;H(Me),A(1)},"aria-label":"Registros por pgina",children:[l.jsx("option",{value:10,children:"10"}),l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:50,children:"50"})]})]})]})]}),l.jsxs("div",{className:"card-body p-0",children:[l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-hover table-striped table-sm align-middle mb-0",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"ID"}),l.jsx("th",{children:"OI"}),l.jsx("th",{children:"Medidores"}),l.jsx("th",{children:"Q3"}),l.jsx("th",{children:"Alcance"}),l.jsx("th",{children:"PMA"}),l.jsx("th",{children:"Banco"}),l.jsx("th",{children:"Tcnico"}),l.jsx("th",{children:"Responsable"}),l.jsx("th",{children:"Creacin"}),l.jsx("th",{children:"Guardado"}),l.jsx("th",{children:"lt. mod."}),l.jsx("th",{className:"text-end",children:"Acciones"})]})}),l.jsxs("tbody",{children:[!Qe&&he.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:13,className:"text-center text-muted py-3",children:w>0?"No hay registros que coincidan con los filtros.":"Sin registros."})}),he.map(G=>l.jsxs("tr",{children:[l.jsx("td",{children:G.id}),l.jsx("td",{children:G.code}),l.jsx("td",{title:"Mi registro / Total OI",children:`${G.medidores_usuario??0} / ${G.medidores_total_code??0}`}),l.jsx("td",{children:G.q3}),l.jsx("td",{children:G.alcance}),l.jsx("td",{children:G.pma}),l.jsx("td",{children:G.banco_id}),l.jsx("td",{children:G.tech_number}),l.jsx("td",{children:G.creator_name}),l.jsx("td",{children:Z(G.created_at)}),l.jsx("td",{children:Z(G.saved_at)}),l.jsx("td",{children:Z(G.updated_at)}),l.jsxs("td",{className:"text-end",children:[l.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>Fe(G.id,G.code),disabled:Qe,title:"Ver OI","aria-label":`Ver OI ${G.code}`,children:"Ver"}),l.jsx("button",{className:"btn btn-sm btn-outline-warning me-2",onClick:()=>we(G.id,G.code),disabled:Qe,title:"Editar OI","aria-label":`Editar OI ${G.code}`,children:"Editar"}),l.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:()=>T(G.id),disabled:Qe,title:"Descargar Excel","aria-label":`Descargar Excel ${G.code}`,children:"Excel"}),Ce&&l.jsx("button",{className:"btn btn-sm btn-outline-danger ms-2",onClick:()=>O(G.id,G.code),disabled:Qe,title:"Eliminar OI (Solo Admin)",children:""})]})]},G.id))]})]})}),ce>1&&l.jsx("nav",{className:"px-3 py-2 d-flex justify-content-center",children:l.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[l.jsx("li",{className:`page-item ${_===1?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>A(G=>Math.max(1,G-1)),disabled:_===1,children:""})}),Array.from({length:Se-ye+1},(G,Me)=>{const $e=ye+Me;return l.jsx("li",{className:`page-item ${$e===_?"active":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>A($e),children:$e})},$e)}),l.jsx("li",{className:`page-item ${_===ce?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>A(G=>Math.min(ce,G+1)),disabled:_===ce,children:"Siguiente"})})]})})]})]}),l.jsx("div",{className:"px-3 py-2 d-flex justify-content-end",children:l.jsx("small",{className:"text-muted",children:Ee})}),l.jsx($u,{show:Le,title:"Contrasea para proteger Excel",onClose:()=>{Ze(!1),Be(null)},onConfirm:G=>{Ze(!1),S(G)}})]})}async function ZT(e){return(await Ye.get("/auth/users/paged",{params:{q:e.q||void 0,role:e.role||void 0,limit:e.limit,offset:e.offset}})).data}function GT(){const{toast:e}=ml(),a=Hn(),s=ns(a?.role,a?.username),i=s==="admin"||s==="administrator",c=Du(a),[d,f]=p.useState(!1),[h,v]=p.useState(null),[g,y]=p.useState(!1),[x,j]=p.useState(""),[H,_]=p.useState(""),[A,R]=p.useState(""),[F,z]=p.useState(20),[te,M]=p.useState(1),D=(te-1)*F,K=p.useRef(!1);p.useEffect(()=>{if(!K.current){K.current=!0;return}const we=setTimeout(()=>{_(x.trim()),M(1)},250);return()=>clearTimeout(we)},[x]);const{data:q,refetch:V,isLoading:fe,isFetching:Re,error:Ce}=il({queryKey:["users",{search:H,roleFilter:A,pageSize:F,offset:D}],queryFn:()=>ZT({q:H||void 0,role:A||void 0,limit:F,offset:D}),enabled:i,placeholderData:we=>we}),{register:ve,handleSubmit:_e,reset:ke}=wu(),De=()=>{v(null),ke({username:"",password:"",first_name:"",last_name:"",role:"technician",tech_number:0}),f(!0)},U=we=>{v(we),ke({username:we.username,password:"",first_name:we.first_name,last_name:we.last_name,role:ns(we.role,we.username),tech_number:we.tech_number}),f(!0)},Z=()=>{f(!1),v(null),ke()},ae=async we=>{try{y(!0),await Ye.post("/auth/users",{...we,tech_number:Number(we.tech_number)}),e({kind:"success",message:"Usuario creado correctamente"}),Z(),V()}catch(We){e({kind:"error",title:"Error",message:We.response?.data?.detail||"Error al crear"})}finally{y(!1)}},he=async we=>{if(!h)return;const We=String(we.password||"").trim();try{if(y(!0),c){const O={username:String(we.username||"").trim(),first_name:String(we.first_name||"").trim(),last_name:String(we.last_name||"").trim(),role:we.role,tech_number:Number(we.tech_number)};We&&(O.password=We),await Ye.put(`/auth/users/${h.id}`,O),e({kind:"success",message:"Usuario actualizado correctamente"})}else{if(!We){e({kind:"error",message:"Debe ingresar una nueva contrasea"});return}await Ye.put(`/auth/users/${h.id}/password`,{new_password:We}),e({kind:"success",message:`Contrasea de ${h.username} actualizada`})}Z(),V()}catch(O){const T=O?.response?.data?.detail||O?.message||"Error actualizando usuario";e({kind:"error",title:"Error",message:T})}finally{y(!1)}},me=async we=>{if(confirm(`Eliminar usuario? ${we.username}?
Esto solo es posible si no tiene registros.`))try{y(!0),await Ye.delete(`/auth/users/${we.id}`),e({kind:"success",message:"Usuario eliminado"}),V()}catch(We){e({kind:"error",title:"No se puede eliminar",message:We.response?.data?.detail||We.message})}finally{y(!1)}},w=p.useMemo(()=>q?.items??[],[q]),X=q?.total??0,ce=q?.limit??F,Y=ce>0?Math.ceil(X/ce):1,ye=10;let Se=1,Le=Y;if(Y>ye){const we=Math.floor(ye/2);Se=Math.max(1,te-we),Le=Se+ye-1,Le>Y&&(Le=Y,Se=Math.max(1,Le-ye+1))}const Ze=X===0?0:D+1,pe=X===0?0:Math.min(D+w.length,X),Be=X===0?"0 registros":`Mostrando ${Ze}-${pe} de ${X} registros`,Ge=fe||Re||g,Je=()=>{j(""),_(""),R(""),M(1),z(20)},ot=!!h,ze=ot&&!c,Qe=!ot||!c,ue=(h?.username??"").toLowerCase()==="admin",Fe=ot?c?"Dejar en blanco para mantener la actual.":"Ingrese una nueva contrasea.":void 0;return i?l.jsxs("div",{className:"container-fluid p-4 vi-oi-light",children:[l.jsx(vi,{show:Ge}),l.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[l.jsx("h2",{className:"h4 m-0",children:"Gestin de Usuarios"}),l.jsx("button",{className:"btn btn-primary",onClick:De,disabled:Ge,children:"+ Nuevo Usuario"})]}),l.jsxs("div",{className:"d-flex flex-wrap align-items-end gap-2 mb-3",children:[l.jsxs("div",{style:{minWidth:260},children:[l.jsx("label",{className:"form-label small mb-1",children:"Buscar"}),l.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Usuario o rol...",value:x,onChange:we=>{j(we.target.value),M(1)}})]}),l.jsxs("div",{style:{minWidth:220},children:[l.jsx("label",{className:"form-label small mb-1",children:"Rol"}),l.jsxs("select",{className:"form-select form-select-sm",value:A,onChange:we=>{R(we.target.value),M(1)},children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"admin",children:"admin"}),l.jsx("option",{value:"administrator",children:"administrator"}),l.jsx("option",{value:"technician",children:"technician"}),l.jsx("option",{value:"standard",children:"standard"}),l.jsx("option",{value:"user",children:"user (legacy)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"form-label small mb-1",children:"Mostrar"}),l.jsxs("select",{className:"form-select form-select-sm",value:F,onChange:we=>{const We=Number(we.target.value)||20;z(We),M(1)},children:[l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"})]})]}),l.jsxs("div",{className:"d-flex gap-2",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:Je,disabled:Ge,children:"Limpiar filtros"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>V(),disabled:Ge,children:"Recargar"})]})]}),Ce?l.jsx("div",{className:"alert alert-danger",role:"alert",children:"No se pudo cargar la lista de usuarios."}):null,l.jsx("div",{className:"card shadow-sm",children:l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-hover align-middle mb-0",children:[l.jsx("thead",{className:"vi-surface-2",children:l.jsxs("tr",{children:[l.jsx("th",{children:"Usuario"}),l.jsx("th",{children:"Nombre"}),l.jsx("th",{children:"Rol"}),l.jsx("th",{children:"N Tcnico"}),l.jsx("th",{className:"text-end",children:"Acciones"})]})}),l.jsxs("tbody",{children:[w.map(we=>l.jsxs("tr",{children:[l.jsx("td",{className:"fw-bold",children:we.username}),l.jsxs("td",{children:[we.first_name," ",we.last_name]}),l.jsx("td",{children:(()=>{const We=ns(we.role,we.username),O=we.username.toLowerCase()==="admin"?"Superusuario":We==="administrator"?"Administrador":We==="technician"?"Tcnico":"Estndar",T=we.username.toLowerCase()==="admin"?"bg-danger":We==="administrator"?"bg-warning vi-text-contrast":We==="technician"?"bg-info vi-text-contrast":"bg-secondary";return l.jsx("span",{className:`badge ${T}`,children:O})})()}),l.jsx("td",{children:we.tech_number}),l.jsxs("td",{className:"text-end",children:[l.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",title:"Actualizar usuario","aria-label":`Actualizar ${we.username}`,disabled:Ge||we.username==="admin"||!c&&ns(we.role,we.username)==="administrator",onClick:()=>U(we),children:l.jsx("i",{className:"ti ti-edit"})}),l.jsx("button",{className:"btn btn-sm btn-outline-danger",title:"Eliminar usuario","aria-label":`Eliminar ${we.username}`,disabled:Ge||we.username==="admin"||!c&&ns(we.role,we.username)==="administrator",onClick:()=>me(we),children:l.jsx("i",{className:"ti ti-trash"})})]})]},we.id)),w.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"text-center py-4",children:"No hay usuarios registrados"})})]})]})})}),Y>1&&l.jsx("nav",{className:"px-3 py-2 d-flex justify-content-center",children:l.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[l.jsx("li",{className:`page-item ${te===1?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>M(we=>Math.max(1,we-1)),disabled:te===1,children:"Anterior"})}),Array.from({length:Le-Se+1},(we,We)=>{const O=Se+We;return l.jsx("li",{className:`page-item ${O===te?"active":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>M(O),children:O})},O)}),l.jsx("li",{className:`page-item ${te===Y?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>M(we=>Math.min(Y,we+1)),disabled:te===Y,children:"Siguiente"})})]})}),l.jsx("div",{className:"px-3 py-2 d-flex justify-content-end",children:l.jsx("small",{className:"text-muted",children:Be})}),d&&l.jsx("div",{className:"modal d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:l.jsx("div",{className:"modal-dialog",children:l.jsxs("form",{className:"modal-content",onSubmit:_e(ot?he:ae),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{className:"modal-title",children:ot?"Actualizar Usuario":"Nuevo Usuario"}),l.jsx("button",{type:"button",className:"btn-close",onClick:Z})]}),l.jsxs("div",{className:"modal-body row g-3",children:[l.jsxs("div",{className:"col-6",children:[l.jsx("label",{className:"form-label",children:"Usuario"}),l.jsx("input",{className:"form-control",disabled:ze,...ve("username",{required:!0})})]}),l.jsx("div",{className:"col-6",children:l.jsx(So,{label:"Contrasea",...ve("password",{required:Qe}),autoComplete:"new-password",helpText:Fe})}),l.jsxs("div",{className:"col-6",children:[l.jsx("label",{className:"form-label",children:"Nombre"}),l.jsx("input",{className:"form-control",disabled:ze,...ve("first_name",{required:!0})})]}),l.jsxs("div",{className:"col-6",children:[l.jsx("label",{className:"form-label",children:"Apellido"}),l.jsx("input",{className:"form-control",disabled:ze,...ve("last_name",{required:!0})})]}),l.jsxs("div",{className:"col-6",children:[l.jsx("label",{className:"form-label",children:"Rol"}),l.jsxs("select",{className:"form-select",disabled:ze,...ve("role"),children:[ue?l.jsx("option",{value:"admin",children:"Superusuario"}):null,l.jsx("option",{value:"technician",children:"Tecnico"}),l.jsx("option",{value:"standard",children:"Estandar"}),c?l.jsx("option",{value:"administrator",children:"Administrador"}):null]})]}),l.jsxs("div",{className:"col-6",children:[l.jsx("label",{className:"form-label",children:"N Tecnico"}),l.jsx("input",{type:"number",className:"form-control",disabled:ze,...ve("tech_number",{required:!0})}),l.jsx("div",{className:"form-text small",children:"Use 0 si no aplica (admin/estandar)"})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Z,disabled:Ge,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Ge,children:ot?"Actualizar":"Guardar"})]})]})})})]}):l.jsx("div",{className:"p-4 text-danger",children:"Acceso no autorizado"})}function PT(){const{toast:e}=ml(),[a,s]=p.useState(""),[i,c]=p.useState(""),[d,f]=p.useState(!1),h=a.trim().length>0&&i.trim().length>0,v=async g=>{if(g.preventDefault(),!!h)try{f(!0),await BE(a.trim(),i.trim()),e({kind:"success",message:"Contrasea actualizada"}),s(""),c("")}catch(y){e({kind:"error",title:"Error",message:y?.message??"No se pudo cambiar la contrasea"})}finally{f(!1)}};return l.jsx("div",{className:"container py-4",children:l.jsx("div",{className:"row justify-content-center",children:l.jsx("div",{className:"col-md-6",children:l.jsxs("div",{className:"card shadow-sm",children:[l.jsx("div",{className:"card-header",children:l.jsx("h5",{className:"mb-0",children:"Cambiar mi contrasea"})}),l.jsxs("form",{onSubmit:v,children:[l.jsxs("div",{className:"card-body",children:[l.jsx("div",{className:"mb-3",children:l.jsx(So,{label:"Contrasea actual",inputId:"oldPwd",value:a,onChange:g=>s(g.target.value),required:!0,autoComplete:"current-password"})}),l.jsx("div",{className:"mb-3",children:l.jsx(So,{label:"Nueva contrasea",inputId:"newPwd",value:i,onChange:g=>c(g.target.value),required:!0,autoComplete:"new-password",helpText:"Usa una contrasea segura y que recuerdes."})})]}),l.jsxs("div",{className:"card-footer d-flex justify-content-end gap-2",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:()=>{s(""),c("")},disabled:d,children:"Limpiar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!h||d,children:"Guardar"})]})]})]})})})})}async function QT(e){return(await Ye.get("/admin/permisos/paged",{params:{q:e.q||void 0,role:e.role||void 0,limit:e.limit,offset:e.offset}})).data}async function YT(e,a){const{data:s}=await Ye.put(`/admin/permisos/${e}`,{allowedModules:a});return s}const th=[{id:"oi_formulario",label:"Registro OI",path:"/oi"},{id:"oi_listado",label:"Listado OI",path:"/oi/list"},{id:"tools_vima_lista",label:"VIMA  LISTA",path:"/oi/tools/vima-to-lista"},{id:"tools_actualizacion_bases",label:"Actualizacin de Bases",path:"/oi/tools/actualizacion-base"},{id:"tools_historial_ac",label:"Historial A-C",path:"/oi/tools/formato-ac/history"},{id:"tools_consol_correlativo",label:"Consolidacin (Correlativo)",path:"/oi/tools/consolidacion/correlativo"},{id:"tools_consol_no_correlativo",label:"Consolidacin (No Correlativo)",path:"/oi/tools/consolidacion/no-correlativo"},{id:"future_ot",label:"Orden de Trabajo (FUTURO)",path:"FUTURO"},{id:"logistica",label:"Logstica",path:"/logistica/log01/excel"},{id:"logistica_history",label:"Historial de consolidaciones",path:"/logistica/log01/history"},{id:"logistica_pdfs",label:"Filtrado de Cert.PDFs",path:"/logistica/log02/pdfs"},{id:"future_smart",label:"Smart (FUTURO)",path:"FUTURO"},{id:"users_admin",label:"Gestin de usuarios",path:"/users"},{id:"admin_permisos",label:"Permisos",path:"/admin/permisos"}],Ky=[{id:"oi",label:"OI",moduleIds:["oi_formulario","oi_listado","tools_vima_lista","tools_actualizacion_bases","tools_historial_ac","tools_consol_correlativo","tools_consol_no_correlativo","future_ot"]},{id:"logistica",label:"Logstica",moduleIds:["logistica","logistica_history","logistica_pdfs"]},{id:"smart",label:"Smart (FUTURO)",moduleIds:["future_smart"]},{id:"usuarios",label:"Usuarios",moduleIds:["users_admin"]},{id:"administrar",label:"Administrar",moduleIds:["admin_permisos"]}];function Xy(e){const a=new Set(th.map(c=>c.id)),s=new Set,i=[];for(const c of e){const d=c==="future_logistica"?"logistica":c;!a.has(d)||s.has(d)||(s.add(d),i.push(d))}return i}const Jy="admin_permisos:collapsed_groups";function KT(){const e=gh(),{toast:a}=ml(),[s,i]=p.useState(""),[c,d]=p.useState(""),[f,h]=p.useState(""),[v,g]=p.useState(20),[y,x]=p.useState(1),j=(y-1)*v,H=p.useRef(!1);p.useEffect(()=>{if(!H.current){H.current=!0;return}const Y=setTimeout(()=>{d(s.trim()),x(1)},250);return()=>clearTimeout(Y)},[s]);const{data:_,isLoading:A,error:R,refetch:F}=il({queryKey:["admin","permisos",{search:c,roleFilter:f,pageSize:v,offset:j}],queryFn:()=>QT({q:c||void 0,role:f||void 0,limit:v,offset:j}),placeholderData:Y=>Y}),[z,te]=p.useState(null),[M,D]=p.useState([]),K=(z?.username??"").toLowerCase()==="admin",[q,V]=p.useState(()=>{const Y=Object.fromEntries(Ky.map(ye=>[ye.id,!0]));try{const ye=localStorage.getItem(Jy);if(!ye)return Y;const Se=JSON.parse(ye);return!Se||typeof Se!="object"?Y:{...Y,...Se}}catch{return Y}}),fe=(Y,ye)=>{V(Se=>{const Le={...Se,[Y]:ye};try{localStorage.setItem(Jy,JSON.stringify(Le))}catch{}return Le})},Re=Y=>{te(Y),D(Xy(Y.allowedModules??[]))},Ce=()=>{te(null),D([])},ve=g_({mutationFn:async Y=>YT(Y.userId,Y.allowedModules),onSuccess:async()=>{await e.invalidateQueries({queryKey:["admin","permisos"]}),a({kind:"success",title:"Permisos",message:"Permisos actualizados."}),Ce()},onError:Y=>{const ye=Y?.response?.data?.detail??Y?.message??"No se pudieron actualizar los permisos.";a({kind:"error",title:"Permisos",message:String(ye)})}}),_e=p.useMemo(()=>_?.items??[],[_]),ke=_?.total??0,De=_?.limit??v,U=De>0?Math.ceil(ke/De):1,Z=ke===0?0:j+1,ae=ke===0?0:Math.min(j+_e.length,ke),he=ke===0?"0 registros":`Mostrando ${Z}-${ae} de ${ke} registros`,me=Y=>{D(ye=>{const Se=new Set(ye);return Se.has(Y)?Se.delete(Y):Se.add(Y),Array.from(Se)})},w=Y=>{D(ye=>{const Se=new Set(ye),Le=Y.moduleIds.filter(pe=>th.some(Be=>Be.id===pe));if(Le.length>0&&Le.every(pe=>Se.has(pe)))for(const pe of Le)Se.delete(pe);else for(const pe of Le)Se.add(pe);return Array.from(Se)})},X=()=>{z&&ve.mutate({userId:z.id,allowedModules:Xy(M)})},ce=()=>{i(""),d(""),h(""),x(1),g(20)};return l.jsxs("div",{className:"container-fluid",children:[l.jsx(vi,{show:ve.isPending,label:"Guardando permisos..."}),l.jsx("div",{className:"row",children:l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Administrar  Permisos"}),l.jsx("p",{className:"text-muted mB-20",children:"Define qu mdulos puede ver cada usuario (el acceso por URL tambin se bloquea)."}),l.jsxs("div",{className:"d-flex flex-wrap align-items-end gap-2 mb-3",children:[l.jsxs("div",{style:{minWidth:260},children:[l.jsx("label",{className:"form-label small mb-1",children:"Buscar"}),l.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Usuario, nombre o rol...",value:s,onChange:Y=>{i(Y.target.value),x(1)}})]}),l.jsxs("div",{style:{minWidth:220},children:[l.jsx("label",{className:"form-label small mb-1",children:"Rol"}),l.jsxs("select",{className:"form-select form-select-sm",value:f,onChange:Y=>{h(Y.target.value),x(1)},children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"admin",children:"admin"}),l.jsx("option",{value:"administrator",children:"administrator"}),l.jsx("option",{value:"technician",children:"technician"}),l.jsx("option",{value:"standard",children:"standard"}),l.jsx("option",{value:"user",children:"user (legacy)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"form-label small mb-1",children:"Mostrar"}),l.jsxs("select",{className:"form-select form-select-sm",value:v,onChange:Y=>{const ye=Number(Y.target.value)||20;g(ye),x(1)},children:[l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"})]})]}),l.jsxs("div",{className:"d-flex gap-2",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:ce,disabled:A||ve.isPending,children:"Limpiar filtros"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>F(),disabled:A||ve.isPending,children:"Recargar"})]})]}),A?l.jsx("div",{className:"text-muted",children:"Cargando usuarios..."}):R?l.jsx("div",{className:"alert alert-danger",role:"alert",children:"No se pudo cargar la lista de usuarios."}):l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm align-middle",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Usuario"}),l.jsx("th",{children:"Rol"}),l.jsx("th",{className:"text-end",children:"Acciones"})]})}),l.jsxs("tbody",{children:[_e.map(Y=>l.jsxs("tr",{children:[l.jsx("td",{children:Y.username}),l.jsx("td",{children:Y.role}),l.jsx("td",{className:"text-end",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>Re(Y),disabled:(Y.username??"").toLowerCase()==="admin",children:"Editar"})})]},Y.id)),_e.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"text-muted",children:"No hay usuarios."})}):null]})]})}),l.jsx("div",{className:"d-flex justify-content-end mt-2",children:l.jsx("small",{className:"text-muted",children:he})}),U>1&&l.jsx("nav",{className:"mt-2 d-flex justify-content-center",children:l.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[l.jsx("li",{className:`page-item ${y===1?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>x(Y=>Math.max(1,Y-1)),disabled:y===1,children:""})}),l.jsx("li",{className:"page-item disabled",children:l.jsxs("span",{className:"page-link",children:["Pgina ",y," / ",U]})}),l.jsx("li",{className:`page-item ${y===U?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>x(Y=>Math.min(U,Y+1)),disabled:y===U,children:"Siguiente"})})]})})]})})}),z&&l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"permsModalTitle",onClick:Y=>{Y.target===Y.currentTarget&&Ce()},children:l.jsx("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("h5",{id:"permsModalTitle",className:"modal-title",children:["Permisos de ",z.username]}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:Ce})]}),l.jsxs("div",{className:"modal-body",children:[K?l.jsxs("div",{className:"alert alert-info",role:"alert",children:["El superusuario ",l.jsx("b",{children:"admin"})," siempre tiene acceso total y no se puede limitar por permisos."]}):null,Ky.map(Y=>{const ye=Y.moduleIds.map(Be=>th.find(Ge=>Ge.id===Be)).filter(Boolean),Se=ye.filter(Be=>M.includes(Be.id)).length,Le=ye.length>0&&Se===ye.length,Ze=Se>0&&!Le,pe=!!q[Y.id];return l.jsxs("div",{className:"mb-3",children:[l.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[l.jsxs("div",{className:"form-check mb-0",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:`grp-${z.id}-${Y.id}`,checked:Le,ref:Be=>{Be&&(Be.indeterminate=Ze)},onChange:()=>w(Y),disabled:ve.isPending||K}),l.jsxs("label",{className:"form-check-label fw-semibold",htmlFor:`grp-${z.id}-${Y.id}`,children:[Y.label,l.jsxs("span",{className:"text-muted ms-2 small",children:["(",Se,"/",ye.length,")"]})]})]}),l.jsx("div",{className:"btn-group btn-group-sm",role:"group","aria-label":`Acciones ${Y.label}`,children:l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:()=>fe(Y.id,!pe),disabled:ve.isPending,children:pe?"Expandir":"Contraer"})})]}),!pe&&l.jsx("div",{className:"mt-2 ms-4 ps-3 border-start border-2 border-light",children:l.jsx("div",{className:"row",children:ye.map(Be=>l.jsx("div",{className:"col-md-6 mb-2",children:l.jsxs("div",{className:"form-check",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:`perm-${z.id}-${Be.id}`,checked:M.includes(Be.id),onChange:()=>me(Be.id),disabled:ve.isPending||K}),l.jsxs("label",{className:"form-check-label",htmlFor:`perm-${z.id}-${Be.id}`,children:[Be.label," ",l.jsxs("span",{className:"text-muted",children:["(",Be.path,")"]})]})]})},Be.id))})})]},Y.id)}),l.jsx("div",{className:"form-text mt-2",children:"Nota: Cambiar contrasea y Home siempre estn disponibles para todos."})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:Ce,disabled:ve.isPending,children:"Cancelar"}),l.jsx("button",{type:"button",className:"btn btn-primary",onClick:X,disabled:ve.isPending||K,children:"Guardar"})]})]})})})]})}function XT(e){const a=Ye.defaults.baseURL??window.location.origin;return`${String(a).replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`}async function JT(e,a){return Ye.post("/integrations/vima-to-lista/dry-run-upload",e,{signal:a})}async function WT(e,a){return Ye.post("/integrations/vima-to-lista/upload",e,{responseType:"blob",signal:a})}async function Wy(e,a,s){const i=XT(`/integrations/vima-to-lista/progress/${e}`),c=Hn()?.token,d=await fetch(i,{method:"GET",headers:c?{Authorization:`Bearer ${c}`}:void 0,signal:s});if(!d.ok||!d.body)throw new Error(`No se pudo abrir el stream de progreso (${d.status})`);const f=d.body.getReader(),h=new TextDecoder("utf-8");let v="";for(;;){const{value:g,done:y}=await f.read();if(y)break;v+=h.decode(g,{stream:!0});let x;for(;(x=v.indexOf(`
`))>=0;){const j=v.slice(0,x).trim();if(v=v.slice(x+1),!!j)try{a(JSON.parse(j))}catch{}}}}function dN(e){return`${e.name}::${e.size}::${e.lastModified}`}function e2(e){return e.normalize("NFKC").trim().replace(/\s+/g,"").toLowerCase()}function vu(e){return e2(e.name)}function t2(e){if(!e)return null;const a=e.split(",").map(s=>s.trim().toLowerCase()).filter(Boolean);return a.length===0?null:a}function qh(e,a){const s=t2(a);if(!s)return e;const i=s.filter(c=>c.startsWith("."));return i.length===0?e:e.filter(c=>i.some(d=>c.name.toLowerCase().endsWith(d)))}function n2(e,a){if(a.length===0)return{merged:e,added:[],duplicates:[]};const s=[...e],i=[],c=[],d=new Set(e.map(vu));for(const f of a){const h=vu(f);if(d.has(h)){c.push(f);continue}d.add(h),s.push(f),i.push(f)}return{merged:s,added:i,duplicates:c}}function Eo({label:e,accept:a,disabled:s=!1,file:i,onChange:c}){const d=p.useRef(null),f=p.useRef(0),[h,v]=p.useState(!1),g=()=>{s||d.current?.click()},y=()=>{s||(d.current&&(d.current.value=""),c(null))},x=R=>{c(R.target.files?.[0]??null),R.currentTarget.value=""},j=R=>{R.preventDefault(),R.stopPropagation(),!s&&(f.current+=1,v(!0))},H=R=>{R.preventDefault(),R.stopPropagation()},_=R=>{R.preventDefault(),R.stopPropagation(),!s&&(f.current=Math.max(0,f.current-1),f.current===0&&v(!1))},A=R=>{if(R.preventDefault(),R.stopPropagation(),f.current=0,v(!1),s)return;const F=R.dataTransfer?.files?Array.from(R.dataTransfer.files):[],te=qh(F,a)[0]??null;te&&(d.current&&(d.current.value=""),c(te))};return l.jsxs("div",{children:[l.jsx("label",{className:"form-label",children:e}),l.jsx("input",{ref:d,className:"d-none",type:"file",accept:a,onChange:x,disabled:s}),l.jsx("div",{className:`vi-file-drop-target${h?" is-dragover":""}`,onDragEnter:j,onDragOver:H,onDragLeave:_,onDrop:A,"aria-disabled":s?"true":"false",children:l.jsxs("div",{className:"input-group",children:[l.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:g,disabled:s,children:"Examinar"}),l.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:y,disabled:s||!i,children:"Eliminar"}),l.jsx("input",{className:"form-control",type:"text",readOnly:!0,value:i?i.name:"No se ha seleccionado ningn archivo."})]})})]})}const a2={status:"estado",progress:"progreso",complete:"completado",error:"error",file_retry:"reintentando"},s2={file:"archivo",file_done:"archivo procesado",file_error:"archivo con error",render:"generando",failed:"fallido",received:"recibido",loading:"cargando",upload:"subida",analysis:"anlisis",init:"iniciando",processing:"procesamiento",opening:"abriendo",reading:"leyendo",writing:"escribiendo",saving:"guardando",cancelled:"cancelado",canceled:"cancelado",copied:"copiado",skipped:"omitido",skipped_incremental:"omitido (incremental)",stopped_blank:"detenido (en blanco)",complete:"completado",done:"finalizado",error:"error"},r2=[[/\\bcomplete(d)?\\b/gi,"completado"],[/\\bstopped_blank\\b/gi,"detenido (en blanco)"],[/\\bskipped_incremental\\b/gi,"omitido (incremental)"],[/\\bskipped\\b/gi,"omitido"],[/\\bprocessing\\b/gi,"procesando"],[/\\bopening\\b/gi,"abriendo"],[/\\breading\\b/gi,"leyendo"],[/\\bwriting\\b/gi,"escribiendo"],[/\\bsaving\\b/gi,"guardando"],[/\\breceived\\b/gi,"recibido"],[/\\bloading\\b/gi,"cargando"],[/\\bupload(ing)?\\b/gi,"subiendo"],[/\\bdownload(ing)?\\b/gi,"descargando"],[/\\bmerge(s|d|ing)?\\b/gi,"consolidando"]];function fN(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function ui(e){if(!e)return"";const a=e.toLowerCase();return fN(a2[a]??e)}function dl(e){if(!e)return"";const a=e.trim().toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),s=e.trim().replace(/[_-]+/g," ");return fN(s2[a]??gl(s))}function gl(e){if(!e)return"";let a=e;for(const[s,i]of r2)a=a.replace(s,i);return a}function l2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function i2(e,a){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(s)}function o2(){const[e,a]=p.useState(null),[s,i]=p.useState(null),[c,d]=p.useState(""),[f,h]=p.useState(11),[v,g]=p.useState(11),[y,x]=p.useState(!0),[j,H]=p.useState(!0),[_,A]=p.useState(!0),[R,F]=p.useState(!0),[z,te]=p.useState(!1),[M,D]=p.useState(""),[K,q]=p.useState(null),[V,fe]=p.useState(null),[Re,Ce]=p.useState(null),[ve,_e]=p.useState([]),[ke,De]=p.useState(""),U=p.useRef(null),Z=p.useRef(null),[ae,he]=p.useState(!1),[me,w]=p.useState(!1),[X,ce]=p.useState("Ingresa la contrasea de apertura del archivo y vuelve a intentar."),Y=p.useMemo(()=>!!e&&!!s&&!K,[e,s,K]);function ye(ze){_e(ue=>[ze,...ue].slice(0,200));const Qe=typeof ze.percent=="number"?ze.percent:typeof ze.progress=="number"?ze.progress:null;Qe!=null&&Number.isFinite(Qe)&&Ce(Math.max(0,Math.min(100,Qe)))}function Se(){U.current?.abort(),U.current=null}function Le(){K&&Se()}function Ze(ze,Qe){if(!e||!s)throw new Error("Faltan archivos");const ue=new FormData;ue.append("vima_file",e),ue.append("lista_file",s);const Fe=(Qe??c).trim();return Fe&&ue.append("vima_password",Fe),ue.append("vima_start_row",String(f)),ue.append("lista_start_row",String(v)),ue.append("require_all_g_to_n",y?"true":"false"),ue.append("incremental",j?"true":"false"),ue.append("strict_incremental",_?"true":"false"),ue.append("replicate_merges",R?"true":"false"),ue.append("update_existing_periodo",z?"true":"false"),M.trim()&&ue.append("oi_pattern",M.trim()),ue.append("operation_id",ze),ue}function pe(){Z.current=null,w(!1)}function Be(ze,Qe){Z.current=ze,ce(Qe),w(!0)}function Ge(ze,Qe){if(!gt.isAxiosError(ze)){De(String(ze));return}const ue=ze;if(ue.code==="ERR_CANCELED")return;const Fe=ue.response?.headers?.["x-code"],we=ue.response?.data?.detail??ue.message;if(Fe==="PASSWORD_REQUIRED"){De(""),Be(Qe,"El archivo VIMA est protegido. Ingresa la contrasea de apertura para continuar.");return}if(Fe==="WRONG_PASSWORD"){De(""),Be(Qe,"Contrasea incorrecta. Intenta nuevamente.");return}De(String(we))}async function Je(ze){De(""),fe(null),_e([]),Ce(0);const Qe=crypto.randomUUID();U.current=new AbortController,Wy(Qe,ye,U.current.signal).catch(()=>{}),q("dry");try{const ue=Ze(Qe,ze?.passwordOverride),Fe=await JT(ue,U.current.signal);fe(Fe.data)}catch(ue){Ge(ue,"dry")}finally{Se(),q(null)}}async function ot(ze){De(""),_e([]),Ce(0);const Qe=crypto.randomUUID();U.current=new AbortController,Wy(Qe,ye,U.current.signal).catch(()=>{}),q("upload");try{const ue=Ze(Qe,ze?.passwordOverride),Fe=await WT(ue,U.current.signal),we=Fe.headers?.["content-disposition"],We=l2(we)??"LISTA_SALIDA.xlsx";i2(Fe.data,We)}catch(ue){Ge(ue,"upload")}finally{Se(),q(null)}}return l.jsxs("div",{className:"container-fluid",children:[l.jsxs("div",{className:"row gap-20",children:[l.jsx("div",{className:"col-md-7",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-20",children:"Integracin VIMA  LISTA"}),l.jsx("div",{className:"mB-15",children:l.jsx(Eo,{label:"Archivo VIMA (.xlsm)",accept:".xlsm,.xlsx",file:e,onChange:a,disabled:!!K})}),l.jsx("div",{className:"mB-15",children:l.jsx(Eo,{label:"Archivo LISTA (.xlsx)",accept:".xlsx,.xlsm",file:s,onChange:i,disabled:!!K})}),l.jsxs("div",{className:"mB-15",children:[l.jsx("label",{className:"form-label",children:"Contrasea VIMA (si aplica)"}),l.jsx("input",{className:"form-control",type:"password",value:c,onChange:ze=>d(ze.target.value),placeholder:"(opcional)"})]}),ae?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Fila inicio VIMA"}),l.jsx("input",{className:"form-control",type:"number",value:f,onChange:ze=>h(Number(ze.target.value))})]}),l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Fila inicio LISTA"}),l.jsx("input",{className:"form-control",type:"number",value:v,onChange:ze=>g(Number(ze.target.value))})]})]}),l.jsxs("div",{className:"mB-15",children:[l.jsx("label",{className:"form-label",children:"Patrn OI (regex, opcional)"}),l.jsx("input",{className:"form-control",value:M,onChange:ze=>D(ze.target.value),placeholder:"Ej: OI-(\\\\d{4})-(\\\\d+)"}),l.jsx("small",{className:"text-muted",children:"Nota: si pegas barras invertidas, el backend ya normaliza doble backslash."})]}),l.jsxs("div",{className:"row mT-10",children:[l.jsx("div",{className:"col-md-6 mB-10",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"requireAll",checked:y,onChange:ze=>x(ze.target.checked)}),l.jsx("label",{className:"form-check-label",htmlFor:"requireAll",children:"Requerir GN completos"})]})}),l.jsx("div",{className:"col-md-6 mB-10",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateMerges",checked:R,onChange:ze=>F(ze.target.checked)}),l.jsx("label",{className:"form-check-label",htmlFor:"replicateMerges",children:"Replicar merges"})]})}),l.jsx("div",{className:"col-md-6 mB-10",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"incremental",checked:j,onChange:ze=>H(ze.target.checked)}),l.jsx("label",{className:"form-check-label",htmlFor:"incremental",children:"Incremental"})]})}),l.jsx("div",{className:"col-md-6 mB-10",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"strictIncremental",checked:_,onChange:ze=>A(ze.target.checked),disabled:!j}),l.jsx("label",{className:"form-check-label",htmlFor:"strictIncremental",children:"Incremental estricto"})]})}),l.jsx("div",{className:"col-md-6 mB-10",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"updateExistingPeriodo",checked:z,onChange:ze=>te(ze.target.checked),disabled:!j}),l.jsx("label",{className:"form-check-label",htmlFor:"updateExistingPeriodo",children:"Actualizar periodo en OIs existentes"})]})})]})]}):null,ke&&l.jsx("div",{className:"alert alert-danger mT-15",role:"alert",children:ke}),l.jsx("div",{className:"d-flex justify-content-end mT-10",children:l.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>he(ze=>!ze),disabled:!!K,children:ae?"Menos Opciones":"Ms Opciones"})}),l.jsxs("div",{className:"d-flex gap-10 mT-20",children:[l.jsx("button",{className:"btn btn-primary",disabled:!Y,onClick:()=>void ot(),children:K==="upload"?"Procesando...":"Procesar y Descargar"}),l.jsx("button",{className:"btn btn-outline-danger",disabled:!K,onClick:Le,children:"Cancelar"}),l.jsx("button",{className:"btn btn-outline-primary",disabled:!Y,onClick:()=>void Je(),children:K==="dry"?"Analizando...":"Analizar"})]}),V&&l.jsxs("div",{className:"mT-20",children:[l.jsx("h5",{className:"c-grey-900",children:"Resumen"}),l.jsxs("ul",{className:"mB-0",children:[l.jsxs("li",{children:["Filas a copiar: ",l.jsx("b",{children:V.would_copy})]}),l.jsxs("li",{children:["Fila inicio escritura (LISTA): ",l.jsx("b",{children:V.start_write_row})]}),l.jsxs("li",{children:["ltimo OI en LISTA: ",l.jsx("b",{children:String(V.last_oi_in_lista??"-")})]}),l.jsxs("li",{children:["Primer OI a copiar: ",l.jsx("b",{children:String(V.first_oi_to_copy??"-")})]}),l.jsxs("li",{children:["ltimo OI a copiar: ",l.jsx("b",{children:String(V.last_oi_to_copy??"-")})]})]})]})]})}),l.jsx("div",{className:"col-md-5",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),K?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress mB-15",style:{height:12},children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${Re??0}%`},"aria-valuenow":Re??0,"aria-valuemin":0,"aria-valuemax":100})}),l.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:ve.length===0?l.jsx("div",{className:"text-muted",children:"Sin eventos an."}):l.jsx("ul",{className:"list-unstyled mB-0",children:ve.map((ze,Qe)=>l.jsxs("li",{className:"mB-10",children:[l.jsxs("div",{children:[l.jsx("b",{children:ui(ze.type)})," ",ze.stage?l.jsxs("span",{className:"text-muted",children:["[",dl(ze.stage),"]"]}):null,typeof ze.percent=="number"?l.jsxs("span",{className:"text-muted",children:["  ",ze.percent.toFixed(1),"%"]}):null]}),l.jsx("div",{className:"text-muted",children:gl(ze.message??ze.detail??"")}),ze.code?l.jsxs("div",{className:"text-muted",children:["Cdigo: ",ze.code]}):null]},Qe))})})]})})]}),l.jsx($u,{show:me,title:"Archivo protegido",confirmLabel:"Continuar",helpText:X,onClose:pe,onConfirm:ze=>{d(ze),w(!1);const Qe=Z.current;Z.current=null,Qe&&(Qe==="dry"?Je({passwordOverride:ze}):ot({passwordOverride:ze}))}})]})}function yu(e){const a=e,s=String(a?.name||""),i=String(a?.message||a||"");return s==="AbortError"||/aborted/i.test(i)||/abort/i.test(i)}function yi(e){const a=Ye.defaults.baseURL??window.location.origin;return`${String(a).replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`}async function Ih(e,a){if(!e.body)return;const s=e.body.getReader(),i=new TextDecoder("utf-8");let c="";try{for(;;){let f;try{f=await s.read()}catch(y){if(yu(y))return;throw y}const{value:h,done:v}=f;if(v)break;if(!h||h.length===0)continue;c+=i.decode(h,{stream:!0});let g;for(;(g=c.indexOf(`
`))>=0;){const y=c.slice(0,g).trim();if(c=c.slice(g+1),!!y)try{const x=JSON.parse(y);x&&x.progress!=null&&x.percent==null&&(x.percent=x.progress),x&&x.percent!=null&&x.progress==null&&(x.progress=x.percent),a(x)}catch{}}}const d=c.trim();if(d)try{const f=JSON.parse(d);f&&f.progress!=null&&f.percent==null&&(f.percent=f.progress),f&&f.percent!=null&&f.progress==null&&(f.progress=f.percent),a(f)}catch{}}catch(d){if(yu(d))return;throw d}}function _r(e,a,s){const i=new Error(e);return a!=null&&(i.status=a),s&&(i.code=s),i}async function $h(e,a,s){const i=yi(`/integrations/vima-to-lista/progress/${e}`),c=Hn()?.token,d=await fetch(i,{method:"GET",headers:{...c?{Authorization:`Bearer ${c}`}:{},Accept:"application/x-ndjson","Cache-Control":"no-cache"},signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw _r(`No se pudo abrir el stream (${d.status})`,d.status,f)}await Ih(d,a)}async function c2(e,a,s){const i=yi(`/logistica/log01/progress/${e}`),c=Hn()?.token,d=await fetch(i,{method:"GET",headers:{...c?{Authorization:`Bearer ${c}`}:{},Accept:"application/x-ndjson","Cache-Control":"no-cache"},signal:s});if(!d.ok){const y=d.headers.get("X-Code")??void 0;throw _r(`No se pudo abrir el stream (${d.status})`,d.status,y)}if(!(d.headers.get("Content-Type")??"").includes("application/x-ndjson"))throw _r("Stream no es NDJSON",d.status);if(!d.body)throw _r("Stream sin body",d.status);const h=d.body.getReader(),v=new TextDecoder("utf-8");let g="";try{for(;;){let x;try{x=await h.read()}catch(A){if(yu(A))return;throw A}const{value:j,done:H}=x;if(H)break;if(!j||j.length===0)continue;g+=v.decode(j,{stream:!0});let _;for(;(_=g.indexOf(`
`))>=0;){const A=g.slice(0,_).trim();if(g=g.slice(_+1),!!A)try{a(JSON.parse(A))}catch{}}}const y=g.trim();if(y)try{a(JSON.parse(y))}catch{}}catch(y){if(yu(y))return;throw y}}async function u2(e,a,s){const i=yi("/bases/actualizar/dry-run-upload"),c=Hn()?.token,d=await fetch(i,{method:"POST",headers:c?{Authorization:`Bearer ${c}`}:void 0,body:e,signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;let h=`Error (${d.status})`;try{const v=await d.json();v?.detail&&(h=String(v.detail))}catch{}throw _r(h,d.status,f)}await Ih(d,a)}async function d2(e,a){return Ye.post("/bases/actualizar/upload",e,{responseType:"blob",signal:a})}async function f2(e,a){return Ye.post("/logistica/log01/start",e,{signal:a})}async function m2(e,a,s){const i=yi(`/logistica/log01/poll/${e}?cursor=${encodeURIComponent(a)}`),c=Hn()?.token,d=await fetch(i,{method:"GET",headers:c?{Authorization:`Bearer ${c}`}:void 0,signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw _r(`No se pudo hacer poll (${d.status})`,d.status,f)}return await d.json()}async function h2(e,a){return Ye.get(`/logistica/log01/result/${encodeURIComponent(e)}`,{responseType:"blob",signal:a,validateStatus:s=>s===200})}async function p2(e){await Ye.post(`/logistica/log01/cancel/${encodeURIComponent(e)}`)}async function nh(e={}){const{limit:a=20,offset:s=0,include_deleted:i=!1,q:c,dateFrom:d,dateTo:f,source:h,status:v}=e,g={limit:a,offset:s,include_deleted:i};c&&c.trim()&&(g.q=c.trim()),d&&d.trim()&&(g.dateFrom=d.trim()),f&&f.trim()&&(g.dateTo=f.trim()),h&&h.trim()&&(g.source=h.trim()),v&&v.trim()&&(g.status=v.trim());const{data:y}=await Ye.get("/logistica/log01/history",{params:g});return y}async function g2(e){const{data:a}=await Ye.get(`/logistica/log01/history/${encodeURIComponent(String(e))}`);return a}async function b2(e,a,s){return Ye.get(`/logistica/log01/history/${encodeURIComponent(String(e))}/artifact/${encodeURIComponent(a)}`,{responseType:"blob",signal:s,validateStatus:i=>i===200})}async function v2(e,a){await Ye.delete(`/logistica/log01/history/${encodeURIComponent(String(e))}`,{data:void 0})}async function y2(){return(await Ye.get("/logistica/log02/explorador/roots")).data}async function x2(e){return(await Ye.get("/logistica/log02/explorador/listar",{params:{path:e}})).data}async function N2(e){return(await Ye.post("/logistica/log02/validar-rutas-unc",e)).data}async function j2(e,a){return(await Ye.post("/logistica/log02/copiar-conformes/start",e,{signal:a})).data}async function S2(e,a,s){const i=yi(`/logistica/log02/copiar-conformes/progress/${e}`),c=Hn()?.token,d=await fetch(i,{method:"GET",headers:{...c?{Authorization:`Bearer ${c}`}:{},Accept:"application/x-ndjson","Cache-Control":"no-cache"},signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw _r(`No se pudo abrir el stream (${d.status})`,d.status,f)}await Ih(d,a)}async function w2(e,a,s){const i=yi(`/logistica/log02/copiar-conformes/poll/${e}?cursor=${encodeURIComponent(a)}`),c=Hn()?.token,d=await fetch(i,{method:"GET",headers:c?{Authorization:`Bearer ${c}`}:void 0,signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw _r(`No se pudo hacer poll (${d.status})`,d.status,f)}return await d.json()}async function _2(e){return(await Ye.post(`/logistica/log02/copiar-conformes/cancel/${encodeURIComponent(e)}`)).data}async function E2(e,a){return(await Ye.get(`/logistica/log02/copiar-conformes/reporte/${encodeURIComponent(e)}`,{params:{format:a},responseType:"blob"})).data}async function A2(e={}){const{limit:a=20,offset:s=0,q:i,dateFrom:c,dateTo:d,origin:f}=e,h={limit:a,offset:s};i&&i.trim()&&(h.q=i.trim()),c&&c.trim()&&(h.dateFrom=c.trim()),d&&d.trim()&&(h.dateTo=d.trim()),f&&f.trim()&&(h.origin=f.trim());const{data:v}=await Ye.get("/oi/tools/formato-ac/history",{params:h});return v}async function C2(e,a){return Ye.get(`/oi/tools/formato-ac/history/${encodeURIComponent(String(e))}/artifact`,{responseType:"blob",signal:a,validateStatus:s=>s===200})}async function mN(){const{data:e}=await Ye.get("/merge/config/upload-limits");return e}async function hN(e,a,s){return Ye.post(`/merge/?mode=${encodeURIComponent(a)}`,e,{responseType:"blob",signal:s})}async function pN(e){await Ye.post(`/merge/cancel/${encodeURIComponent(e)}`)}async function O2(e){const{data:a}=await Ye.post("/tools/files/upload",e);return a}async function R2(e){const{data:a}=await Ye.post("/tools/excel/inspect",e);return a}async function T2(e){const{data:a}=await Ye.post("/tools/excel/update",e);return a}async function D2(e){const{data:a}=await Ye.post("/tools/excel/change-password",e);return a}async function z2(e){const{data:a}=await Ye.post("/tools/excel/validate",e);return a}function k2({show:e,disabled:a=!1,title:s,accept:i,files:c,onClose:d,onAddFiles:f,onRemoveFile:h,onRemoveAll:v}){const g=p.useRef(null),y=p.useRef(0),[x,j]=p.useState(!1),[H,_]=p.useState("");p.useEffect(()=>{if(!e)return;const q=V=>{V.key==="Escape"&&d()};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[e,d]),p.useEffect(()=>{e||j(!1)},[e]),p.useEffect(()=>{e&&_("")},[e]);const A=p.useCallback(q=>{const V=qh(q,i);if(V.length===0)return;const fe=new Set(c.map(vu)),Re=new Set(fe),Ce=[],ve=[];for(const _e of V){const ke=vu(_e);if(Re.has(ke)){ve.push(_e);continue}Re.add(ke),Ce.push(_e)}if(ve.length>0){const _e=Array.from(new Set(ve.map(De=>De.name))),ke=ve.length;if(_e.length===1){const De=ke===1?"Se omiti 1 archivo duplicado":`Se omitieron ${ke} archivos duplicados`;_(`${De}: "${_e[0]}".`)}else _(`Se omitieron ${ke} archivos duplicados: ${_e.join(", ")}.`)}Ce.length>0&&f(Ce)},[i,c,f]);if(p.useEffect(()=>{if(!e)return;const q=fe=>{fe.preventDefault(),fe.stopPropagation()},V=fe=>{if(fe.preventDefault(),fe.stopPropagation(),a)return;const Re=fe.dataTransfer?.files?Array.from(fe.dataTransfer.files):[];A(Re)};return window.addEventListener("dragover",q,!0),window.addEventListener("drop",V,!0),()=>{window.removeEventListener("dragover",q,!0),window.removeEventListener("drop",V,!0)}},[e,a,A]),!e)return null;const R=()=>{a||g.current?.click()},F=q=>{const V=q.target.files?Array.from(q.target.files):[];A(V),q.currentTarget.value=""},z=()=>{a||(g.current&&(g.current.value=""),v())},te=q=>{q.preventDefault(),q.stopPropagation(),!a&&(y.current+=1,j(!0))},M=q=>{q.preventDefault(),q.stopPropagation()},D=q=>{q.preventDefault(),q.stopPropagation(),!a&&(y.current=Math.max(0,y.current-1),y.current===0&&j(!1))},K=q=>{if(q.preventDefault(),q.stopPropagation(),y.current=0,j(!1),a)return;const V=q.dataTransfer?.files?Array.from(q.dataTransfer.files):[];A(V)};return l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"filePickerModalTitle",onClick:q=>{q.target===q.currentTarget&&d()},children:l.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{id:"filePickerModalTitle",className:"modal-title",children:s}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:d})]}),l.jsxs("div",{className:"modal-body",children:[l.jsx("input",{ref:g,className:"d-none",type:"file",accept:i,multiple:!0,onChange:F,disabled:a}),H?l.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between",role:"alert",children:[l.jsx("div",{children:H}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>_("")})]}):null,l.jsxs("div",{className:`vi-dropzone${x?" is-dragover":""}`,onDragEnter:te,onDragOver:M,onDragLeave:D,onDrop:K,"aria-disabled":a?"true":"false",children:[l.jsxs("div",{className:"text-muted",children:["Arrastra y suelta archivos aqu, o"," ",l.jsx("button",{type:"button",className:"btn btn-link p-0 align-baseline",onClick:R,disabled:a,children:"selecciona desde tu equipo"}),"."]}),i?l.jsxs("div",{className:"form-text",children:["Tipos permitidos: ",i]}):null]}),l.jsxs("div",{className:"d-flex align-items-center justify-content-between mT-15 mB-10",children:[l.jsx("div",{className:"text-muted",children:c.length===0?"No se han seleccionado archivos.":c.length===1?"1 archivo seleccionado":`${c.length} archivos seleccionados`}),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:R,disabled:a,children:"Agregar ms"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-danger",onClick:z,disabled:a||c.length===0,children:"Eliminar todos"})]})]}),c.length===0?null:l.jsx("div",{style:{maxHeight:320,overflow:"auto"},children:l.jsx("ul",{className:"list-group",children:c.map(q=>{const V=dN(q);return l.jsxs("li",{className:"list-group-item d-flex align-items-center justify-content-between gap-10",children:[l.jsx("div",{className:"text-truncate",style:{minWidth:0},children:q.name}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>h(V),disabled:a,children:"Eliminar"})]},V)})})})]}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:d,children:"Cerrar"})})]})})})}function M2(e){if(e.length===0)return"";const a=Array.from(new Set(e.map(i=>i.name))),s=e.length;return a.length===1?`${s===1?"Se omiti 1 archivo duplicado":`Se omitieron ${s} archivos duplicados`}: "${a[0]}".`:`Se omitieron ${s} archivos duplicados: ${a.join(", ")}.`}function Fu({label:e,title:a,accept:s,disabled:i=!1,fullDropArea:c=!1,files:d,setFiles:f}){const[h,v]=p.useState(!1),[g,y]=p.useState(!1),[x,j]=p.useState(""),H=p.useRef(0),_=p.useMemo(()=>d.length===0?"No se han seleccionado archivos.":d.length===1?"1 archivo seleccionado":`${d.length} archivos seleccionados`,[d.length]),A=d.length===0?"Agregar archivos":"Modificar/agregar archivos",R=K=>{const q=qh(K,s);q.length!==0&&f(V=>{const{merged:fe,duplicates:Re}=n2(V,q);return Re.length>0&&j(M2(Re)),fe})},F=K=>{K.preventDefault(),K.stopPropagation(),!i&&(H.current+=1,y(!0))},z=K=>{K.preventDefault(),K.stopPropagation()},te=K=>{K.preventDefault(),K.stopPropagation(),!i&&(H.current=Math.max(0,H.current-1),H.current===0&&y(!1))},M=K=>{if(K.preventDefault(),K.stopPropagation(),H.current=0,y(!1),i)return;const q=K.dataTransfer?.files?Array.from(K.dataTransfer.files):[];R(q)},D=l.jsxs(l.Fragment,{children:[l.jsx("label",{className:"form-label",children:e}),l.jsxs("div",{className:"input-group",children:[l.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>v(!0),disabled:i,children:A}),l.jsx("input",{className:"form-control",type:"text",readOnly:!0,value:_})]}),x?l.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between mT-10",role:"alert",children:[l.jsx("div",{children:x}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>j("")})]}):null]});return l.jsxs(l.Fragment,{children:[c?l.jsx("div",{className:`vi-file-drop-target${g?" is-dragover":""}`,onDragEnter:F,onDragOver:z,onDragLeave:te,onDrop:M,"aria-disabled":i?"true":"false",children:D}):l.jsxs("div",{children:[l.jsx("label",{className:"form-label",children:e}),l.jsx("div",{className:`vi-file-drop-target${g?" is-dragover":""}`,onDragEnter:F,onDragOver:z,onDragLeave:te,onDrop:M,"aria-disabled":i?"true":"false",children:l.jsxs("div",{className:"input-group",children:[l.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>v(!0),disabled:i,children:A}),l.jsx("input",{className:"form-control",type:"text",readOnly:!0,value:_})]})}),x?l.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between mT-10",role:"alert",children:[l.jsx("div",{children:x}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>j("")})]}):null]}),l.jsx(k2,{show:h,disabled:i,title:a,accept:s,files:d,onClose:()=>v(!1),onAddFiles:R,onRemoveFile:K=>f(q=>q.filter(V=>dN(V)!==K)),onRemoveAll:()=>f([])})]})}function U2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function L2(e,a){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(s)}async function B2(e){if(!gt.isAxiosError(e))return{detail:String(e)};const a=e,s=a.response?.headers?.["x-code"]??void 0,i=a.response?.data;if(i instanceof Blob)try{const d=await i.text(),f=JSON.parse(d);return{detail:String(f?.detail??d??a.message),code:s}}catch{return{detail:a.message,code:s}}const c=i?.detail??a.message;return{detail:String(c),code:s}}function q2(){const[e,a]=p.useState(null),[s,i]=p.useState([]),[c,d]=p.useState(""),[f,h]=p.useState(""),[v,g]=p.useState("^OI-(\\d+)-(\\d{4})$"),[y,x]=p.useState(9),[j,H]=p.useState("ERROR FINAL"),[_,A]=p.useState(!0),[R,F]=p.useState(!1),[z,te]=p.useState(!1),[M,D]=p.useState(null),[K,q]=p.useState(null),[V,fe]=p.useState([]),[Re,Ce]=p.useState(""),ve=p.useRef(null),_e=p.useRef(null),[ke,De]=p.useState(!1),[U,Z]=p.useState(!1),[ae,he]=p.useState("Ingresa la contrasea de apertura del archivo y vuelve a intentar."),me=p.useMemo(()=>!!e&&s.length>0&&!M,[e,s,M]);function w(pe){fe(Ge=>[pe,...Ge].slice(0,200));const Be=typeof pe.percent=="number"?pe.percent:typeof pe.progress=="number"?pe.progress:null;Be!=null&&Number.isFinite(Be)&&q(Math.max(0,Math.min(100,Be)))}function X(){ve.current?.abort(),ve.current=null}function ce(){M&&X()}function Y(pe,Be){if(!e)throw new Error("Falta el archivo Base");if(s.length===0)throw new Error("Faltan archivos OI");const Ge=new FormData;Ge.append("base_file",e);for(const ot of s)Ge.append("oi_files",ot);const Je=(Be??c).trim();return Je&&Ge.append("default_password",Je),f.trim()&&Ge.append("per_file_passwords_json",f.trim()),v.trim()&&Ge.append("oi_pattern",v.trim()),Ge.append("oi_start_row",String(y)),j.trim()&&Ge.append("base_sheet",j.trim()),pe&&Ge.append("operation_id",pe),Ge}function ye(){_e.current=null,Z(!1)}function Se(pe,Be){_e.current=pe,he(Be),Z(!0)}async function Le(pe){Ce(""),fe([]),q(0),ve.current=new AbortController,D("dry");try{const Be=Y(void 0,pe?.passwordOverride);await u2(Be,w,ve.current.signal)}catch(Be){if(Be?.name==="AbortError")return;const Ge=Be?.code,Je=String(Be?.message??Be);if(Ge==="PASSWORD_REQUIRED"){Ce(""),Se("dry","Algn archivo est protegido. Ingresa la contrasea de apertura para continuar.");return}else if(Ge==="WRONG_PASSWORD"){Ce(""),Se("dry","Contrasea incorrecta. Intenta nuevamente.");return}else Ce(Je)}finally{X(),D(null)}}async function Ze(pe){Ce(""),fe([]),q(0);const Be=crypto.randomUUID();ve.current=new AbortController,$h(Be,w,ve.current.signal).catch(()=>{}),D("upload");try{const Ge=Y(Be,pe?.passwordOverride);Ge.append("replicate_merges",_?"true":"false"),Ge.append("replicate_row_heights",R?"true":"false"),Ge.append("replicate_col_widths",z?"true":"false");const Je=await d2(Ge,ve.current.signal),ot=Je.headers["content-disposition"],ze=Je.headers["x-file-name"],Qe=U2(ot)??ze??"base_actualizada.xlsx";L2(Je.data,Qe)}catch(Ge){if(gt.isAxiosError(Ge)&&Ge.code==="ERR_CANCELED")return;const{detail:Je,code:ot}=await B2(Ge);if(ot==="PASSWORD_REQUIRED"){Ce(""),Se("upload","Algn archivo est protegido. Ingresa la contrasea de apertura para continuar.");return}else if(ot==="WRONG_PASSWORD"){Ce(""),Se("upload","Contrasea incorrecta. Intenta nuevamente.");return}else Ce(Je)}finally{X(),D(null)}}return l.jsxs("div",{className:"container-fluid",children:[l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-7",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Actualizacin de Bases"}),l.jsx("p",{className:"text-muted mB-20",children:"Integra mltiples OIs en una Base (hoja ERROR FINAL). Soporta dry-run (NDJSON) y ejecucin con descarga."}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-12 mB-15",children:l.jsx(Eo,{label:"Base (xlsx)",accept:".xlsx",file:e,onChange:a,disabled:!!M})}),l.jsx("div",{className:"col-12 mB-15",children:l.jsx(Fu,{label:"Archivos OI (xlsx/xlsm)",title:"Archivos OI",accept:".xlsx,.xlsm",files:s,setFiles:i,disabled:!!M})}),l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Contrasea por defecto (opcional)"}),l.jsx("input",{className:"form-control",type:"password",value:c,onChange:pe=>d(pe.target.value),disabled:!!M})]}),l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Hoja Base (opcional)"}),l.jsx("input",{className:"form-control",value:j,onChange:pe=>H(pe.target.value),disabled:!!M})]}),ke?l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Regex OI (opcional)"}),l.jsx("input",{className:"form-control",value:v,onChange:pe=>g(pe.target.value),disabled:!!M})]}):null,l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Fila inicio OI"}),l.jsx("input",{className:"form-control",type:"number",min:1,value:y,onChange:pe=>x(Number(pe.target.value||9)),disabled:!!M})]}),l.jsxs("div",{className:"col-12 mB-15",children:[l.jsx("label",{className:"form-label",children:"Contraseas por archivo (opcional)"}),l.jsx("textarea",{className:"form-control",rows:4,value:f,onChange:pe=>h(pe.target.value),disabled:!!M,placeholder:`Ej:
OI-0001-2025.xlsx: clave1
OI-0002-2025.xlsx: clave2

O JSON:
{"OI-0001-2025.xlsx":"clave1"}`})]}),ke?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"col-md-4 mB-15",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateMerges",checked:_,onChange:pe=>A(pe.target.checked),disabled:!!M}),l.jsx("label",{className:"form-check-label",htmlFor:"replicateMerges",children:"Replicar merges"})]})}),l.jsx("div",{className:"col-md-4 mB-15",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateRowHeights",checked:R,onChange:pe=>F(pe.target.checked),disabled:!!M}),l.jsx("label",{className:"form-check-label",htmlFor:"replicateRowHeights",children:"Replicar alto filas"})]})}),l.jsx("div",{className:"col-md-4 mB-15",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateColWidths",checked:z,onChange:pe=>te(pe.target.checked),disabled:!!M}),l.jsx("label",{className:"form-check-label",htmlFor:"replicateColWidths",children:"Replicar ancho cols"})]})})]}):null]}),Re&&l.jsx("div",{className:"alert alert-danger mT-10",role:"alert",children:Re}),l.jsx("div",{className:"d-flex justify-content-end mT-10",children:l.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>De(pe=>!pe),disabled:!!M,children:ke?"Menos Opciones":"Ms Opciones"})}),l.jsxs("div",{className:"d-flex gap-10 mT-15",children:[l.jsx("button",{className:"btn btn-primary",disabled:!me,onClick:()=>void Ze(),children:M==="upload"?"Procesando...":"Procesar y Descargar"}),l.jsx("button",{className:"btn btn-outline-danger",disabled:!M,onClick:ce,children:"Cancelar"}),l.jsx("button",{className:"btn btn-outline-primary",disabled:!me,onClick:()=>void Le(),children:M==="dry"?"Analizando...":"Analizar"})]})]})}),l.jsx("div",{className:"col-md-5",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),M?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress mB-15",style:{height:12},children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${K??0}%`},"aria-valuenow":K??0,"aria-valuemin":0,"aria-valuemax":100})}),l.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:V.length===0?l.jsx("div",{className:"text-muted",children:"Sin eventos an."}):l.jsx("ul",{className:"list-unstyled mB-0",children:V.map((pe,Be)=>l.jsxs("li",{className:"mB-10",children:[l.jsxs("div",{children:[l.jsx("b",{children:ui(pe.type)})," ",pe.stage?l.jsxs("span",{className:"text-muted",children:["[",dl(pe.stage),"]"]}):null,typeof pe.percent=="number"?l.jsxs("span",{className:"text-muted",children:["  ",pe.percent.toFixed(1),"%"]}):null]}),l.jsx("div",{className:"text-muted",children:gl(pe.message??pe.detail??"")}),pe.code?l.jsxs("div",{className:"text-muted",children:["Cdigo: ",pe.code]}):null]},Be))})})]})})]}),l.jsx($u,{show:U,title:"Archivo protegido",confirmLabel:"Continuar",helpText:ae,onClose:ye,onConfirm:pe=>{d(pe),Z(!1);const Be=_e.current;_e.current=null,Be&&(Be==="dry"?Le({passwordOverride:pe}):Ze({passwordOverride:pe}))}})]})}const I2="America/Lima";function $2(e){if(!e)return null;const a=/filename\*=UTF-8''([^;]+)|filename="([^"]+)"/i.exec(e),s=a?.[1]??a?.[2];if(!s)return null;try{return decodeURIComponent(s)}catch{return s}}function F2(e,a){const s=window.URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(s)}function H2(e){if(!e)return"N/D";const s=/[zZ]$/.test(e)||/[+-]\d{2}:\d{2}$/.test(e)||/[+-]\d{4}$/.test(e)?e:`${e}Z`,i=new Date(s);if(Number.isNaN(i.getTime()))return String(e);const d=new Intl.DateTimeFormat("es-PE",{timeZone:I2,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(i),f=h=>d.find(v=>v.type===h)?.value||"";return`${f("day")}/${f("month")}/${f("year")} ${f("hour")}:${f("minute")}`}function V2(e){const a=(e||"").toUpperCase();return a==="COMPLETADO"?"badge bg-success":a==="ERROR"?"badge bg-danger":"badge bg-secondary"}function Z2(e){const a=(e||"").toUpperCase();return a==="VIMA_LISTA"?"VIMA LISTA":a==="ACTUALIZACION_BASES"?"ACTUALIZACION BASES":e||"N/D"}function G2(){const[e,a]=p.useState([]),[s,i]=p.useState(0),[c,d]=p.useState(!1),[f,h]=p.useState(""),[v,g]=p.useState(0),[y,x]=p.useState(""),[j,H]=p.useState(""),[_,A]=p.useState(""),[R,F]=p.useState(""),[z,te]=p.useState(20),[M,D]=p.useState(1),[K,q]=p.useState(()=>({q:"",dateFrom:"",dateTo:"",origin:""})),V=p.useMemo(()=>(M-1)*z,[M,z]);p.useEffect(()=>{let Z=!1;return d(!0),h(""),A2({limit:z,offset:V,q:K.q||void 0,dateFrom:K.dateFrom||void 0,dateTo:K.dateTo||void 0,origin:K.origin||void 0}).then(ae=>{Z||(a(Array.isArray(ae?.items)?ae.items:[]),i(typeof ae?.total=="number"?ae.total:0))}).catch(ae=>{if(Z)return;const he=ae,me=he.response?.data?.detail||he.message||"No se pudo cargar historial.";h(me)}).finally(()=>{Z||d(!1)}),()=>{Z=!0}},[K,V,z,v]);const fe=()=>{q({q:y.trim(),dateFrom:j.trim(),dateTo:_.trim(),origin:R.trim()}),D(1)},Re=()=>{x(""),H(""),A(""),F(""),q({q:"",dateFrom:"",dateTo:"",origin:""}),D(1),g(Z=>Z+1)},Ce=()=>g(Z=>Z+1),ve=async Z=>{try{h("");const ae=await C2(Z),he=ae.headers["content-disposition"],me=ae.headers["x-file-name"],w=$2(he)??me??"formato_ac.xlsx";F2(ae.data,w)}catch(ae){const he=ae;if(gt.isCancel(he))return;const me=he.response?.data?.detail||he.message||"No se pudo descargar.";h(me)}},_e=s===0?0:V+1,ke=s===0?0:Math.min(V+e.length,s),De=M>1,U=V+e.length<s;return l.jsx("div",{className:"container-fluid",children:l.jsx("div",{className:"row",children:l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[l.jsx("div",{className:"d-flex flex-wrap align-items-center justify-content-between mB-10 gap-10",children:l.jsx("h4",{className:"c-grey-900 mB-0",children:"Historial A-C"})}),f?l.jsx("div",{className:"alert alert-danger",role:"alert",children:f}):null,l.jsxs("form",{className:"row g-2 align-items-end",onSubmit:Z=>{Z.preventDefault(),fe()},children:[l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{className:"form-label",children:"Buscar"}),l.jsx("input",{className:"form-control form-control-sm",value:y,onChange:Z=>x(Z.target.value),onKeyDown:Z=>{Z.key==="Enter"&&fe()},placeholder:"Operacion o usuario..."})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Fecha desde"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:j,onChange:Z=>H(Z.target.value)})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Fecha hasta"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:_,onChange:Z=>A(Z.target.value)})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Origen"}),l.jsxs("select",{className:"form-select form-select-sm",value:R,onChange:Z=>F(Z.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"VIMA_LISTA",children:"VIMA LISTA"}),l.jsx("option",{value:"ACTUALIZACION_BASES",children:"ACTUALIZACION BASES"})]})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Mostrar"}),l.jsxs("select",{className:"form-select form-select-sm",value:z,onChange:Z=>{const ae=Number(Z.target.value);te(Number.isFinite(ae)?ae:20),D(1)},children:[l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"})]})]}),l.jsxs("div",{className:"col-12 d-flex flex-wrap gap-10 mT-5",children:[l.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:c,children:"Buscar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:Re,children:"Limpiar filtros"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:Ce,children:"Recargar"})]})]}),l.jsxs("div",{className:"mT-15",children:[c?l.jsx("div",{className:"text-muted",children:"Cargando historial..."}):l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Operacion"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Fecha"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Usuario"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Origen"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Estado"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Acciones"})]})}),l.jsx("tbody",{children:e.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"text-muted small",children:"Sin registros."})}):e.map(Z=>{const ae=Z.created_by_full_name||Z.created_by_username||"N/D";return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:Z.operation_id}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:H2(Z.created_at)}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:ae}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:Z2(Z.origin)}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("span",{className:V2(Z.status),children:Z.status})}),l.jsx("td",{children:l.jsx("div",{className:"d-flex gap-1 flex-wrap justify-content-end",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-success",onClick:()=>void ve(Z.id),children:"Descargar"})})})]},Z.id)})})]})}),l.jsxs("div",{className:"d-flex align-items-center justify-content-between mT-10",children:[l.jsxs("div",{className:"small text-muted",children:["Mostrando ",_e,"-",ke," de ",s," registros"]}),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>D(Z=>Math.max(1,Z-1)),disabled:!De||c,children:"Anterior"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>D(Z=>Z+1),disabled:!U||c,children:"Siguiente"})]})]})]})]})})})})}function P2(){return l.jsx("div",{className:"container-fluid",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin de Bases Originales"}),l.jsx("p",{className:"text-muted mB-20",children:"Selecciona el modo de consolidacin. Cada modo genera un archivo consolidado para descarga."}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-6 mB-15",children:l.jsx("div",{className:"card h-100",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h5",{className:"card-title",children:"Correlativo"}),l.jsx("p",{className:"card-text text-muted",children:"Ordena por la columna G (correlativo) al consolidar."}),l.jsx(su,{className:"btn btn-primary",to:"/oi/tools/consolidacion/correlativo",children:"Abrir"})]})})}),l.jsx("div",{className:"col-md-6 mB-15",children:l.jsx("div",{className:"card h-100",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h5",{className:"card-title",children:"No correlativo"}),l.jsx("p",{className:"card-text text-muted",children:"Mantiene el orden original de los archivos al consolidar."}),l.jsx(su,{className:"btn btn-primary",to:"/oi/tools/consolidacion/no-correlativo",children:"Abrir"})]})})})]})]})})}function Q2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function Y2(e,a){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(s)}async function K2(e){if(!gt.isAxiosError(e))return String(e);const a=e,s=a.response?.data;if(s instanceof Blob)try{const i=await s.text(),c=JSON.parse(i);return String(c?.detail??i??a.message)}catch{return a.message}return String(s?.detail??a.message)}function X2(){const[e,a]=p.useState(null),[s,i]=p.useState(null),[c,d]=p.useState([]),[f,h]=p.useState(!1),[v,g]=p.useState(""),[y,x]=p.useState(null),[j,H]=p.useState([]),_=p.useRef(null),A=p.useRef(null),R=p.useMemo(()=>!!s&&c.length>0&&!f,[s,c,f]);p.useEffect(()=>{mN().then(a).catch(()=>a(null))},[]);function F(D){H(q=>[D,...q].slice(0,200));const K=typeof D.percent=="number"?D.percent:typeof D.progress=="number"?D.progress:null;K!=null&&Number.isFinite(K)&&x(Math.max(0,Math.min(100,K)))}function z(){_.current?.abort(),_.current=null}function te(){if(!f)return;const D=A.current;D&&pN(D).catch(()=>{}),F({type:"status",stage:"cancelled",message:"Cancelacin solicitada"}),z()}async function M(){if(g(""),H([]),x(0),!s){g("Selecciona el archivo maestro.");return}if(c.length===0){g("Selecciona al menos un archivo de tcnico.");return}const D=new FormData;D.append("master",s);for(const q of c)D.append("technicians",q);const K=crypto.randomUUID();A.current=K,D.append("operation_id",K),_.current=new AbortController,h(!0);try{const q=_.current?.signal;$h(K,F,q).catch(()=>{});const V=await hN(D,"correlativo",q),fe=V.headers["content-disposition"],Re=Q2(fe)??"consolidado_correlativo.xlsx";Y2(V.data,Re)}catch(q){if(gt.isAxiosError(q)&&q.code==="ERR_CANCELED"||gt.isAxiosError(q)&&(q.response?.headers?.["x-code"]??void 0)?.toUpperCase()==="CANCELLED")return;const V=await K2(q);F({type:"error",stage:"error",detail:V}),g(V)}finally{A.current=null,h(!1),z()}}return l.jsx("div",{className:"container-fluid",children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-7",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin  Correlativo"}),l.jsx("p",{className:"text-muted mB-20",children:"Genera un consolidado ordenando por correlativo (columna G)."}),e&&l.jsxs("div",{className:"alert alert-info",role:"alert",children:["Lmite por archivo: ",l.jsxs("b",{children:[e.max_file_mb,"MB"]}),"  Mx. archivos tcnico:"," ",l.jsx("b",{children:e.max_tech_files})]}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-12 mB-15",children:l.jsx(Eo,{label:"Archivo maestro (xlsx)",accept:".xlsx",file:s,onChange:i,disabled:f})}),l.jsx("div",{className:"col-12 mB-15",children:l.jsx(Fu,{label:"Archivos de tcnicos (xlsx)",title:"Archivos de tcnicos",accept:".xlsx",files:c,setFiles:d,disabled:f})})]}),v&&l.jsx("div",{className:"alert alert-danger mT-10",role:"alert",children:v}),l.jsxs("div",{className:"d-flex gap-10 mT-20",children:[l.jsx("button",{className:"btn btn-primary mT-10",disabled:!R,onClick:M,children:f?"Procesando...":"Procesar y Descargar"}),l.jsx("button",{className:"btn btn-outline-danger mT-10",disabled:!f,onClick:te,children:"Cancelar"})]})]})}),l.jsx("div",{className:"col-md-5",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),f?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress mB-15",style:{height:12},children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${y??0}%`},"aria-valuenow":y??0,"aria-valuemin":0,"aria-valuemax":100})}),l.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:j.length===0?l.jsx("div",{className:"text-muted",children:"Sin eventos an."}):l.jsx("ul",{className:"list-unstyled mB-0",children:j.map((D,K)=>l.jsxs("li",{className:"mB-10",children:[l.jsxs("div",{children:[l.jsx("b",{children:ui(D.type)})," ",D.stage?l.jsxs("span",{className:"text-muted",children:["[",dl(D.stage),"]"]}):null]}),l.jsx("div",{className:"text-muted",children:gl(D.message??D.detail??"")})]},K))})})]})})]})})}function J2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function W2(e,a){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(s)}async function eD(e){if(!gt.isAxiosError(e))return String(e);const a=e,s=a.response?.data;if(s instanceof Blob)try{const i=await s.text(),c=JSON.parse(i);return String(c?.detail??i??a.message)}catch{return a.message}return String(s?.detail??a.message)}function tD(){const[e,a]=p.useState(null),[s,i]=p.useState(null),[c,d]=p.useState([]),[f,h]=p.useState(!1),[v,g]=p.useState(""),[y,x]=p.useState(null),[j,H]=p.useState([]),_=p.useRef(null),A=p.useRef(null),R=p.useMemo(()=>!!s&&c.length>0&&!f,[s,c,f]);p.useEffect(()=>{mN().then(a).catch(()=>a(null))},[]);function F(D){H(q=>[D,...q].slice(0,200));const K=typeof D.percent=="number"?D.percent:typeof D.progress=="number"?D.progress:null;K!=null&&Number.isFinite(K)&&x(Math.max(0,Math.min(100,K)))}function z(){_.current?.abort(),_.current=null}function te(){if(!f)return;const D=A.current;D&&pN(D).catch(()=>{}),F({type:"status",stage:"cancelled",message:"Cancelacin solicitada"}),z()}async function M(){if(g(""),H([]),x(0),!s){g("Selecciona el archivo maestro.");return}if(c.length===0){g("Selecciona al menos un archivo de tcnico.");return}const D=new FormData;D.append("master",s);for(const q of c)D.append("technicians",q);const K=crypto.randomUUID();A.current=K,D.append("operation_id",K),_.current=new AbortController,h(!0);try{const q=_.current?.signal;$h(K,F,q).catch(()=>{});const V=await hN(D,"no-correlativo",q),fe=V.headers["content-disposition"],Re=J2(fe)??"consolidado_no_correlativo.xlsx";W2(V.data,Re)}catch(q){if(gt.isAxiosError(q)&&q.code==="ERR_CANCELED"||gt.isAxiosError(q)&&(q.response?.headers?.["x-code"]??void 0)?.toUpperCase()==="CANCELLED")return;const V=await eD(q);F({type:"error",stage:"error",detail:V}),g(V)}finally{A.current=null,h(!1),z()}}return l.jsx("div",{className:"container-fluid",children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-7",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin  No correlativo"}),l.jsx("p",{className:"text-muted mB-20",children:"Genera un consolidado sin ordenar por correlativo (respeta el orden original)."}),e&&l.jsxs("div",{className:"alert alert-info",role:"alert",children:["Lmite por archivo: ",l.jsxs("b",{children:[e.max_file_mb,"MB"]}),"  Mx. archivos tcnico:"," ",l.jsx("b",{children:e.max_tech_files})]}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-12 mB-15",children:l.jsx(Eo,{label:"Archivo maestro (xlsx)",accept:".xlsx",file:s,onChange:i,disabled:f})}),l.jsx("div",{className:"col-12 mB-15",children:l.jsx(Fu,{label:"Archivos de tcnicos (xlsx)",title:"Archivos de tcnicos",accept:".xlsx",files:c,setFiles:d,disabled:f})})]}),v&&l.jsx("div",{className:"alert alert-danger mT-10",role:"alert",children:v}),l.jsxs("div",{className:"d-flex gap-10 mT-20",children:[l.jsx("button",{className:"btn btn-primary mT-10",disabled:!R,onClick:M,children:f?"Procesando...":"Procesar y Descargar"}),l.jsx("button",{className:"btn btn-outline-danger mT-10",disabled:!f,onClick:te,children:"Cancelar"})]})]})}),l.jsx("div",{className:"col-md-5",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),f?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress mB-15",style:{height:12},children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${y??0}%`},"aria-valuenow":y??0,"aria-valuemin":0,"aria-valuemax":100})}),l.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:j.length===0?l.jsx("div",{className:"text-muted",children:"Sin eventos an."}):l.jsx("ul",{className:"list-unstyled mB-0",children:j.map((D,K)=>l.jsxs("li",{className:"mB-10",children:[l.jsxs("div",{children:[l.jsx("b",{children:ui(D.type)})," ",D.stage?l.jsxs("span",{className:"text-muted",children:["[",dl(D.stage),"]"]}):null]}),l.jsx("div",{className:"text-muted",children:gl(D.message??D.detail??"")})]},K))})})]})})]})})}async function mo(e){if(!gt.isAxiosError(e))return String(e);const a=e,s=a.response?.data;if(s instanceof Blob)try{const i=await s.text(),c=JSON.parse(i);return String(c?.detail??i??a.message)}catch{return a.message}return String(s?.detail??a.message)}function nD(){const[e,a]=p.useState(null),[s,i]=p.useState(""),[c,d]=p.useState(""),[f,h]=p.useState(""),[v,g]=p.useState("ERROR FINAL"),[y,x]=p.useState(""),[j,H]=p.useState("same_password"),[_,A]=p.useState(""),[R,F]=p.useState([{cell:"A1",value:""}]),[z,te]=p.useState(""),[M,D]=p.useState("no_password"),[K,q]=p.useState(""),[V,fe]=p.useState("ERROR FINAL"),[Re,Ce]=p.useState(1),[ve,_e]=p.useState(""),[ke,De]=p.useState(""),[U,Z]=p.useState(""),[ae,he]=p.useState(null),[me,w]=p.useState(""),[X,ce]=p.useState(null),[Y,ye]=p.useState([]),[Se,Le]=p.useState(null),Ze=p.useMemo(()=>c.trim().length>0,[c]);function pe(ue){ye(Fe=>[ue,...Fe].slice(0,200))}function Be(){w(""),ye([]),ce(0),Le(null)}async function Ge(){if(Be(),!e){w("Selecciona un archivo para subir.");return}he("upload");try{pe({type:"status",stage:"upload",message:"Subiendo archivo..."}),ce(30);const ue=new FormData;ue.append("file",e),s.trim()&&ue.append("suggested_name",s.trim());const Fe=await O2(ue);d(Fe.relative_path),Le(Fe),pe({type:"complete",stage:"upload",message:"Archivo subido."}),ce(100)}catch(ue){const Fe=await mo(ue);w(Fe),pe({type:"error",stage:"upload",detail:Fe})}finally{he(null)}}async function Je(){if(Be(),!Ze){w("Ingresa o sube un archivo para obtener file_path.");return}he("inspect");try{pe({type:"status",stage:"inspect",message:"Inspeccionando..."}),ce(50);const ue=await R2({file_path:c.trim(),open_password:f.trim()||null});Le(ue),pe({type:"complete",stage:"inspect",message:"Inspeccin completada."}),ce(100)}catch(ue){const Fe=await mo(ue);w(Fe),pe({type:"error",stage:"inspect",detail:Fe})}finally{he(null)}}async function ot(){if(Be(),!Ze){w("Ingresa o sube un archivo para obtener file_path.");return}if(!v.trim()){w("Ingresa el nombre de la hoja.");return}const ue=R.map(Fe=>({cell:Fe.cell.trim(),value:Fe.value})).filter(Fe=>Fe.cell);if(ue.length===0){w("Agrega al menos una edicin.");return}he("update");try{pe({type:"status",stage:"update",message:"Aplicando ediciones..."}),ce(50);const Fe=await T2({file_path:c.trim(),edits:ue.map(we=>({sheet:v.trim(),cell:we.cell,value:we.value})),open_password:y.trim()||null,save_mode:j,new_password:j==="new_password"&&_.trim()||null});Le(Fe),pe({type:"complete",stage:"update",message:"Actualizacin completada."}),ce(100)}catch(Fe){const we=await mo(Fe);w(we),pe({type:"error",stage:"update",detail:we})}finally{he(null)}}async function ze(){if(Be(),!Ze){w("Ingresa o sube un archivo para obtener file_path.");return}if(!z.trim()){w("Ingresa la contrasea de apertura (open_password).");return}if(M==="new_password"&&!K.trim()){w("Ingresa la nueva contrasea.");return}he("change-password");try{pe({type:"status",stage:"change-password",message:"Cambiando contrasea..."}),ce(50);const ue=await D2({file_path:c.trim(),open_password:z.trim(),mode:M,new_password:M==="new_password"?K.trim():null});Le(ue),pe({type:"complete",stage:"change-password",message:"Cambio de contrasea completado."}),ce(100)}catch(ue){const Fe=await mo(ue);w(Fe),pe({type:"error",stage:"change-password",detail:Fe})}finally{he(null)}}async function Qe(){if(Be(),!Ze){w("Ingresa o sube un archivo para obtener file_path.");return}let ue={};if(ke.trim())try{ue=JSON.parse(ke)}catch{w("type_rules debe ser JSON vlido.");return}const Fe=ve.split(",").map(we=>we.trim()).filter(Boolean);he("validate");try{pe({type:"status",stage:"validate",message:"Validando..."}),ce(50);const we=await z2({file_path:c.trim(),sheet:V.trim()||null,header_row:Re,required_columns:Fe,type_rules:ue,open_password:U.trim()||null});Le(we),pe({type:"complete",stage:"validate",message:"Validacin completada."}),ce(100)}catch(we){const We=await mo(we);w(We),pe({type:"error",stage:"validate",detail:We})}finally{he(null)}}return l.jsx("div",{className:"container-fluid",children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-7",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Herramientas Excel"}),l.jsx("p",{className:"text-muted mB-20",children:"Subir archivos, inspeccionar, editar celdas, cambiar contrasea y validar."}),l.jsx("div",{className:"card mB-15",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h6",{className:"card-title",children:"1) Subir archivo (recomendado)"}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-8 mB-10",children:l.jsx("input",{className:"form-control",type:"file",accept:".xlsx,.xlsm",disabled:!!ae,onChange:ue=>a(ue.target.files?.[0]??null)})}),l.jsx("div",{className:"col-md-4 mB-10",children:l.jsx("input",{className:"form-control",placeholder:"Nombre sugerido (opcional)",value:s,disabled:!!ae,onChange:ue=>i(ue.target.value)})})]}),l.jsx("button",{className:"btn btn-outline-primary",disabled:!!ae||!e,onClick:Ge,children:ae==="upload"?"Subiendo...":"Subir"})]})}),l.jsxs("div",{className:"mB-15",children:[l.jsx("label",{className:"form-label",children:"file_path"}),l.jsx("input",{className:"form-control",value:c,disabled:!!ae,onChange:ue=>d(ue.target.value),placeholder:"Ruta del archivo en el servidor (o la devuelta por Upload)"}),l.jsx("div",{className:"form-text",children:"Si subes el archivo, se llenar automticamente. Tambin puedes pegar una ruta local/red accesible por el servidor."})]}),l.jsx("div",{className:"card mB-15",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h6",{className:"card-title",children:"2) Inspect"}),l.jsxs("div",{className:"row align-items-end",children:[l.jsxs("div",{className:"col-md-8 mB-10",children:[l.jsx("label",{className:"form-label",children:"open_password (opcional)"}),l.jsx("input",{className:"form-control",type:"password",value:f,disabled:!!ae,onChange:ue=>h(ue.target.value)})]}),l.jsx("div",{className:"col-md-4 mB-10",children:l.jsx("button",{className:"btn btn-primary w-100",disabled:!!ae||!Ze,onClick:Je,children:ae==="inspect"?"Inspeccionando...":"Inspect"})})]})]})}),l.jsx("div",{className:"card mB-15",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h6",{className:"card-title",children:"3) Update (editar celdas)"}),l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"Hoja"}),l.jsx("input",{className:"form-control",value:v,disabled:!!ae,onChange:ue=>g(ue.target.value)})]}),l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"open_password (opcional)"}),l.jsx("input",{className:"form-control",type:"password",value:y,disabled:!!ae,onChange:ue=>x(ue.target.value)})]}),l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"save_mode"}),l.jsxs("select",{className:"form-select",value:j,disabled:!!ae,onChange:ue=>H(ue.target.value),children:[l.jsx("option",{value:"same_password",children:"same_password"}),l.jsx("option",{value:"no_password",children:"no_password"}),l.jsx("option",{value:"new_password",children:"new_password"})]})]}),l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"new_password"}),l.jsx("input",{className:"form-control",type:"password",value:_,disabled:!!ae||j!=="new_password",onChange:ue=>A(ue.target.value),placeholder:j==="new_password"?"Requerido":""})]})]}),l.jsxs("div",{className:"mT-10",children:[l.jsx("label",{className:"form-label",children:"Ediciones"}),R.map((ue,Fe)=>l.jsxs("div",{className:"row g-2 mB-10",children:[l.jsx("div",{className:"col-md-3",children:l.jsx("input",{className:"form-control",value:ue.cell,disabled:!!ae,onChange:we=>{const We=R.slice();We[Fe]={...We[Fe],cell:we.target.value},F(We)},placeholder:"Celda (A1)"})}),l.jsx("div",{className:"col-md-7",children:l.jsx("input",{className:"form-control",value:ue.value,disabled:!!ae,onChange:we=>{const We=R.slice();We[Fe]={...We[Fe],value:we.target.value},F(We)},placeholder:"Valor"})}),l.jsxs("div",{className:"col-md-2 d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto w-100",disabled:!!ae,onClick:()=>F(we=>[...we,{cell:"A1",value:""}]),children:"+"}),l.jsx("button",{type:"button",className:"btn btn-outline-danger w-100",disabled:!!ae||R.length===1,onClick:()=>F(we=>we.filter((We,O)=>O!==Fe)),children:""})]})]},Fe))]}),l.jsx("button",{className:"btn btn-primary",disabled:!!ae||!Ze,onClick:ot,children:ae==="update"?"Actualizando...":"Update"})]})}),l.jsx("div",{className:"card mB-15",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h6",{className:"card-title",children:"4) Change password"}),l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"open_password"}),l.jsx("input",{className:"form-control",type:"password",value:z,disabled:!!ae,onChange:ue=>te(ue.target.value)})]}),l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"mode"}),l.jsxs("select",{className:"form-select",value:M,disabled:!!ae,onChange:ue=>D(ue.target.value),children:[l.jsx("option",{value:"no_password",children:"no_password"}),l.jsx("option",{value:"new_password",children:"new_password"})]})]}),l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"new_password"}),l.jsx("input",{className:"form-control",type:"password",value:K,disabled:!!ae||M!=="new_password",onChange:ue=>q(ue.target.value),placeholder:M==="new_password"?"Requerido":""})]}),l.jsx("div",{className:"col-md-6 mB-10 d-flex align-items-end",children:l.jsx("button",{className:"btn btn-primary w-100",disabled:!!ae||!Ze,onClick:ze,children:ae==="change-password"?"Procesando...":"Change password"})})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h6",{className:"card-title",children:"5) Validate"}),l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"sheet (opcional)"}),l.jsx("input",{className:"form-control",value:V,disabled:!!ae,onChange:ue=>fe(ue.target.value)})]}),l.jsxs("div",{className:"col-md-3 mB-10",children:[l.jsx("label",{className:"form-label",children:"header_row"}),l.jsx("input",{className:"form-control",type:"number",min:1,value:Re,disabled:!!ae,onChange:ue=>Ce(Number(ue.target.value||1))})]}),l.jsxs("div",{className:"col-md-3 mB-10",children:[l.jsx("label",{className:"form-label",children:"open_password (opcional)"}),l.jsx("input",{className:"form-control",type:"password",value:U,disabled:!!ae,onChange:ue=>Z(ue.target.value)})]}),l.jsxs("div",{className:"col-12 mB-10",children:[l.jsx("label",{className:"form-label",children:"required_columns (coma separada)"}),l.jsx("input",{className:"form-control",value:ve,disabled:!!ae,onChange:ue=>_e(ue.target.value),placeholder:"ColA, ColB, ColC"})]}),l.jsxs("div",{className:"col-12 mB-10",children:[l.jsx("label",{className:"form-label",children:"type_rules (JSON, opcional)"}),l.jsx("textarea",{className:"form-control",rows:3,value:ke,disabled:!!ae,onChange:ue=>De(ue.target.value),placeholder:'{"ColA":"int","ColB":"float"}'})]})]}),l.jsx("button",{className:"btn btn-primary",disabled:!!ae||!Ze,onClick:Qe,children:ae==="validate"?"Validando...":"Validate"})]})}),me&&l.jsx("div",{className:"alert alert-danger mT-15",role:"alert",children:me})]})}),l.jsx("div",{className:"col-md-5",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),ae?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress mB-15",style:{height:12},children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${X??0}%`},"aria-valuenow":X??0,"aria-valuemin":0,"aria-valuemax":100})}),l.jsx("div",{style:{maxHeight:220,overflow:"auto"},children:Y.length===0?l.jsx("div",{className:"text-muted",children:"Sin eventos an."}):l.jsx("ul",{className:"list-unstyled mB-0",children:Y.map((ue,Fe)=>l.jsxs("li",{className:"mB-10",children:[l.jsxs("div",{children:[l.jsx("b",{children:ue.type})," ",ue.stage?l.jsxs("span",{className:"text-muted",children:["[",ue.stage,"]"]}):null]}),l.jsx("div",{className:"text-muted",children:ue.message??ue.detail??""})]},Fe))})}),l.jsx("hr",{className:"mY-15"}),l.jsx("h6",{className:"c-grey-900 mB-10",children:"Resultado"}),Se?l.jsx("pre",{className:"vi-surface-2 p-10",style:{maxHeight:360,overflow:"auto"},children:JSON.stringify(Se,null,2)}):l.jsx("div",{className:"text-muted",children:"Sin resultado an."})]})})]})})}function aD(){const e=ma(),a=fl(),{toast:s}=ml(),i=Hn(),c=ci(i?.role),d=jo(),f=c&&!(d&&d>0),{data:h,isLoading:v,error:g}=il({queryKey:["catalogs"],queryFn:Ch,enabled:f}),y=h?.bancos??[],[x,j]=p.useState(()=>d&&d>0?d:0),[H,_]=p.useState(!1),A=p.useMemo(()=>y.find(te=>te.id===x)?.name??null,[y,x]);p.useEffect(()=>{const z=e.state;z?.toast&&(s({kind:z.toast.kind??"info",title:z.toast.title,message:z.toast.message}),a(e.pathname,{replace:!0,state:{}}))},[e.pathname,e.state,a,s]),p.useEffect(()=>{f&&(x>0||y.length>0&&j(y[0].id))},[x,y,f]);const R=x>0&&!H,F=async()=>{if(R)try{_(!0);const z=await D0(x),te=Vm(z.userId,z.bancoId??x);if(te.target){a(te.target,{replace:!0});return}s({kind:"success",title:"Banco",message:A?`Banco seleccionado: ${A}`:"Banco seleccionado."})}catch(z){const te=z?.response?.data?.detail??z?.message??"No se pudo guardar el banco.";s({kind:"error",title:"Banco",message:String(te)})}finally{_(!1)}};return l.jsxs("div",{className:"vi-home",children:[l.jsx("div",{className:"vi-home__banner",style:{backgroundImage:'url("/medileser/banner.jpg")'},role:"img","aria-label":"Medileser"}),f&&l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:l.jsx("div",{className:"modal-dialog modal-dialog-centered",children:l.jsxs("div",{className:"modal-content",children:[l.jsx("div",{className:"modal-header",children:l.jsx("h5",{className:"modal-title",children:"Seleccionar banco"})}),l.jsxs("div",{className:"modal-body",children:[l.jsx("p",{className:"text-muted mb-3",children:"Seleccione el banco de trabajo para continuar."}),l.jsx("label",{className:"form-label",htmlFor:"bankId",children:"Banco"}),l.jsx("select",{id:"bankId",className:"form-select",value:x||"",onChange:z=>j(Number(z.target.value)),disabled:v||H,children:y.map(z=>l.jsx("option",{value:z.id,children:z.name},z.id))}),g?l.jsx("div",{className:"alert alert-danger mt-3 mb-0",role:"alert",children:"No se pudieron cargar los bancos."}):null]}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{type:"button",className:"btn btn-primary",disabled:!R,onClick:F,children:H?"Guardando...":"Continuar"})})]})})})]})}const ho=(...e)=>{};function sD(e){if(!e)return null;const a=/filename\*=UTF-8''([^;]+)|filename="([^"]+)"/i.exec(e),s=a?.[1]??a?.[2];if(!s)return null;try{return decodeURIComponent(s)}catch{return s}}function rD(e,a){const s=window.URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(s)}async function lD(e,a){let s=null,i=!1;const c=new Promise(d=>{s=window.setTimeout(()=>{i=!0,d()},a)});try{await Promise.race([e,c])}catch{return!1}finally{s!=null&&window.clearTimeout(s)}return!i}function iD(){const[e,a]=p.useState([]),[s,i]=p.useState(""),[c,d]=p.useState([]),[f,h]=p.useState(0),[v,g]=p.useState("Listo para procesar"),[y,x]=p.useState(!1),[j,H]=p.useState(""),[_,A]=p.useState(!1),[R,F]=p.useState(null),[z,te]=p.useState(null),[M,D]=p.useState(!1);function K(S){const L=S?.series_duplicates_eliminated??S?.detail?.series_duplicates_eliminated??S?.series_duplcates_eliminated;return typeof L=="number"?L:null}const q={MISSING_HEADERS:"Faltan cabeceras requeridas",FILE_INVALID:"Archivo invlido",INVALID_OI_FILENAME:"Nombre de archivo invlido",EMPTY_FILE:"Archivo vaco"};function V(S){const L=String(S??"").trim().toUpperCase();return L?q[L]??L:""}function fe(S){if(!S)return"";let L=gl(S);L=L.replace(/\bERROR\b/gi,"Error");for(const[$,J]of Object.entries(q))L=L.replace(new RegExp(`\\b${$}\\b`,"g"),J);return L}function Re(S,L){const $=V(S),J=fe(L);return J?$&&!J.toLowerCase().includes($.toLowerCase())?`${$}: ${J}`:J:$||"N/D"}function Ce(S,L,$){const J=String($??"").trim();if(J)return J;const be=Number(S);if(!Number.isFinite(be)||be<=0)return"N/D";const Ee=Number(L);return Number.isFinite(Ee)&&Ee>0?`OI-${String(be).padStart(4,"0")}-${String(Ee).padStart(4,"0")}`:`OI-${String(be).padStart(4,"0")}`}function ve(S){const L=S?.rows_total_read??S?.totals_input?.rows_read;return typeof L=="number"?L:null}const _e=p.useMemo(()=>(Array.isArray(z?.audit_by_oi)?z.audit_by_oi:[]).filter(L=>L?.status==="OK"&&String(L?.source??"").toUpperCase()==="BASES").slice().sort((L,$)=>{const J=Number(L?.oi_year),be=Number($?.oi_year),Ee=Number.isFinite(J)&&J>0,G=Number.isFinite(be)&&be>0;if(Ee&&G&&J!==be)return J-be;if(Ee&&!G)return-1;if(!Ee&&G)return 1;const Me=Number(L?.oi_num),$e=Number($?.oi_num),nt=Number.isFinite(Me),zt=Number.isFinite($e);if(nt&&zt&&Me!==$e)return Me-$e;if(nt&&!zt)return-1;if(!nt&&zt)return 1;const Ne=String(L?.oi_tag??L?.oi??L?.oi_num??"").toUpperCase(),Ie=String($?.oi_tag??$?.oi??$?.oi_num??"").toUpperCase();return Ne.localeCompare(Ie)}),[z]),ke=p.useMemo(()=>(Array.isArray(z?.files_rejected)?z.files_rejected:[]).slice().sort((L,$)=>{const J=String(L?.oi??L?.filename??"").toUpperCase(),be=String($?.oi??$?.filename??"").toUpperCase();return J.localeCompare(be)}),[z]),De=p.useMemo(()=>{const S=()=>({files_total:0,files_ok:0,files_error:0,rows_read:0,conformes:0,no_conformes:0,rows_ignored_invalid_estado:0}),L=z?.by_source;if(L&&typeof L=="object")return L;const $={BASES:S(),GASELAG:S()},J=Array.isArray(z?.audit_by_oi)?z.audit_by_oi:[];for(const Ee of J){if(Ee?.status!=="OK")continue;const Me=String(Ee?.source??"").toUpperCase()==="GASELAG"?"GASELAG":"BASES";$[Me].files_ok+=1,$[Me].rows_read+=Number(Ee?.rows_read??0)||0,$[Me].conformes+=Number(Ee?.conformes??0)||0,$[Me].no_conformes+=Number(Ee?.no_conformes??0)||0,$[Me].rows_ignored_invalid_estado+=Number(Ee?.rows_ignored_invalid_estado??0)||0}const be=Array.isArray(z?.files_rejected)?z.files_rejected:[];for(const Ee of be){const Me=String(Ee?.source??"").toUpperCase()==="GASELAG"?"GASELAG":"BASES";$[Me].files_error+=1}for(const Ee of["BASES","GASELAG"])$[Ee].files_total=$[Ee].files_ok+$[Ee].files_error;return $},[z]),U=p.useRef(null),Z=p.useRef(null),ae=p.useRef(null),he=p.useRef(!1),me=p.useRef(null),w=p.useRef(null),X=p.useRef(null),ce=p.useRef(!1),Y=p.useRef(!1),ye=p.useRef(-1),Se=p.useRef(-1),Le=p.useRef(!1);function Ze(){return me.current||(me.current=crypto.randomUUID()),me.current}function pe(S){const L=`${ui(S.type)}  ${dl(S.stage)}  ${fe(S.message??S.detail??"")}`;if(g(L),d($=>{const J=[S,...$];if(!Le.current&&S.stage==="cancelled"){Le.current=!0;const be=J.filter($e=>$e.stage==="file_done"||$e.stage==="file_error").length,Ee=J.filter($e=>$e.stage==="file_done").length,G=J.filter($e=>$e.stage==="file_error").length;return[{type:"status",stage:"cancelled",message:`Cancelacin aplicada. Archivos procesados hasta el momento: ${be} (OK: ${Ee}, Rechazados: ${G}). No se gener resultado final.`},...J]}return J}),S.type==="complete"){const $=S.result??null;te($)}typeof S.progress=="number"&&h(Math.round(S.progress)),typeof S.percent=="number"&&h(Math.round(S.percent)),!he.current&&(S.type==="complete"||S.stage==="cancelled"||S.stage==="failed")&&(he.current=!0,S.type==="complete"?(A(!0),F(me.current)):(A(!1),F(null),me.current=null),x(!1),ot("terminal_event"),ze())}function Be(S){return typeof S.cursor!="number"?!1:S.cursor<=Se.current?!0:(Se.current=S.cursor,S.cursor>ye.current&&(ye.current=S.cursor),!1)}function Ge(S){he.current||Be(S)||pe(S)}function Je(S,L){const $=new FormData;$.append("operation_id",S),$.append("source","AUTO"),s.trim()&&$.append("output_filename",s.trim());for(const J of L)$.append("files",J);return $}function ot(S){Z.current&&(ae.current=S,Z.current.abort(),Z.current=null)}function ze(S){Y.current&&(Y.current=!1,w.current!=null&&(window.clearTimeout(w.current),w.current=null),X.current?.abort(),X.current=null,ce.current=!1)}function Qe(S){Y.current&&(w.current!=null&&window.clearTimeout(w.current),w.current=window.setTimeout(()=>{ue()},S))}async function ue(){if(!Y.current||ce.current)return;const S=me.current;if(!S){ze();return}ce.current=!0;try{const L=await m2(S,ye.current,X.current?.signal);ho("[LOG01] poll cursor =",ye.current,"->",L.cursor_next),ye.current=L.cursor_next;for(const $ of L.events)Ge($);if(L.done&&L.events.length===0){ze("done");return}}catch(L){L?.name}finally{ce.current=!1,Y.current&&Qe(350)}}function Fe(S){Y.current||(Y.current=!0,X.current=new AbortController,Qe(0))}function we(){U.current?.abort(),U.current=null}async function We(){if(!y)return;const S=me.current;if(S)try{await p2(S)}catch(L){const $=L;gt.isCancel($)||H($.response?.data?.detail||$.message||"No se pudo cancelar la operacion")}we()}async function O(){H(""),d([]),te(null),h(0),g("Listo para procesar"),A(!1),F(null),ae.current=null,he.current=!1,Le.current=!1,ye.current=-1,Se.current=-1,ze();const S=[...e];if(!S.length){H("Debes seleccionar al menos 1 Excel.");return}me.current=null;const L=Ze();let $=null,J=null;const be=new Promise((Me,$e)=>{$=Me,J=$e});Z.current=new AbortController,U.current=new AbortController,c2(L,Me=>{if(Me.type==="hello"){$&&($(),$=null);return}Ge(Me)},Z.current.signal).then(()=>{he.current||Fe()}).catch(Me=>{Me?.name==="AbortError"?ho("[LOG01] progress stream aborted (reason) =",ae.current):(J&&(J(Me),J=null),Fe())}),x(!0);try{await lD(be,1800)?ho("[LOG01] hello received"):Fe("hello_timeout");const $e=Je(L,S);ho("[LOG01] operation_id(start) =",L),await f2($e,U.current.signal)}catch(Me){const $e=Me;if(gt.isCancel($e))return;const nt=$e.response?.data?.detail||$e.message||"Error inesperado";H(nt),x(!1),we(),ot("start_failed"),ze(),me.current=null}finally{we()}}async function T(){const S=R??me.current;if(!S){H("No hay resultado disponible.");return}try{H(""),ho("[LOG01] operation_id(result) =",S);const L=await h2(S),$=L.headers["content-disposition"],J=L.headers["x-file-name"],be=sD($)??J??"BD_CONSOLIDADO.xlsx";rD(L.data,be)}catch(L){const $=L;if(gt.isCancel($))return;const J=$.response?.data?.detail||$.message||"No se pudo descargar.";H(J)}}return l.jsx("div",{className:"container-fluid",children:l.jsx("div",{className:"row",children:l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin Excel"}),j&&l.jsx("div",{className:"alert alert-danger",role:"alert",children:j}),l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-12 mB-15",children:[l.jsx(Fu,{label:"Archivos Excel (Bases Comerciales / GASELAG) (xlsx)",title:"Archivos Excel",accept:".xlsx",files:e,setFiles:a,fullDropArea:!0,disabled:y}),l.jsx("div",{className:"small text-muted mT-5",children:"Nota: el sistema identifica el tipo de archivo por cabeceras/contenido (AUTO). No depende del nombre."})]}),l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label mB-0",children:"Nombre de salida (opcional)"}),l.jsx("input",{className:"form-control",value:s,onChange:S=>i(S.target.value),placeholder:"BD_<SERIE_INI>_AL_<SERIE_FIN>.xlsx",disabled:y})]}),l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label mB-0 invisible",children:"Acciones"}),l.jsxs("div",{className:"vi-log01-actions",children:[l.jsx("button",{className:"btn btn-primary btn-sm vi-log01-btn-primary",onClick:O,disabled:y,children:y?"Procesando...":"Consolidar"}),y?l.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>void We(),children:"Cancelar"}):null,!y&&_?l.jsx(l.Fragment,{children:l.jsx("button",{className:"btn btn-outline-success btn-sm",onClick:()=>void T(),children:"Descargar Excel"})}):null]})]})]}),l.jsxs("div",{className:"mT-10",children:[l.jsxs("h6",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),y?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress",children:l.jsxs("div",{className:"progress-bar",role:"progressbar",style:{width:`${f}%`},"aria-valuenow":f,"aria-valuemin":0,"aria-valuemax":100,children:[f,"%"]})}),l.jsx("div",{className:"mT-10 text-muted",children:v})]}),!y&&z?l.jsxs("div",{className:"mT-20",children:[l.jsx("h6",{className:"c-grey-900",children:"Reporte de auditora"}),l.jsx("div",{className:"bd p-10",children:l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6",children:[l.jsx("div",{className:"small text-muted",children:"Archivos"}),l.jsxs("div",{className:"small",children:["Total: ",l.jsx("strong",{children:z.files_total??"N/D"}),"  OK:"," ",l.jsx("strong",{children:z.files_ok??"N/D"}),"  Rechazados:"," ",l.jsx("strong",{children:z.files_error??"N/D"})]}),l.jsx("div",{className:"mT-10 small text-muted",children:"Totales por tipo (origen)"}),l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Tipo"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Archivos"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ledos"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ignorados"})]})}),l.jsx("tbody",{children:["BASES","GASELAG"].map(S=>{const L=De?.[S]??{},$=L?.files_total??Number(L?.files_ok??0)+Number(L?.files_error??0);return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:S})}),l.jsxs("td",{style:{whiteSpace:"nowrap"},children:[l.jsx("strong",{children:$??0})," ",l.jsxs("span",{className:"text-muted",children:["(OK: ",L?.files_ok??0,"  Rech: ",L?.files_error??0,")"]})]}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:L?.rows_read??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:L?.conformes??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:L?.no_conformes??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:L?.rows_ignored_invalid_estado??0})})]},S)})})]})}),l.jsx("div",{className:"mT-10 small text-muted",children:"No conformes por OI (origen)  BASES"}),_e.length>0?l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"OI"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ledos"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"})]})}),l.jsx("tbody",{children:_e.map((S,L)=>l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:Ce(S?.oi_num,S?.oi_year,S?.oi_tag??S?.oi)}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:S?.rows_read??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:S?.conformes??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:S?.no_conformes??0})})]},L))})]})}):l.jsx("div",{className:"small text-muted",children:"N/D"}),Number(De?.GASELAG?.rows_read??0)>0?l.jsxs("div",{className:"mT-10 small",children:[l.jsx("span",{className:"text-muted",children:"GASELAG (origen):"})," ","Ledos: ",l.jsx("strong",{children:De.GASELAG.rows_read??0}),"  Conformes:"," ",l.jsx("strong",{children:De.GASELAG.conformes??0}),"  No conformes:"," ",l.jsx("strong",{children:De.GASELAG.no_conformes??0}),"  Ignorados(estado):"," ",l.jsx("strong",{children:De.GASELAG.rows_ignored_invalid_estado??0})]}):null,l.jsxs("div",{className:"col-12 mT-10 p-0",children:[l.jsx("div",{className:"small text-muted",children:"Totales (origen)"}),l.jsxs("div",{className:"small",children:["Registros ledos:"," ",l.jsx("strong",{children:z.totals_input?.rows_read??"N/D"}),"  Conformes:"," ",l.jsx("strong",{children:z.totals_input?.conformes??"N/D"}),"  No conformes:"," ",l.jsx("strong",{children:z.totals_input?.no_conformes??"N/D"})]})]})]}),l.jsxs("div",{className:"col-md-6 mT-10 mT-md-0",children:[ke.length>0?l.jsxs("div",{className:"mT-15",children:[l.jsx("div",{className:"small text-muted",children:"Archivos rechazados"}),l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"OI / Archivo"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Motivo"})]})}),l.jsx("tbody",{children:ke.map((S,L)=>{const $=Re(S?.code,S?.detail),J=String(S?.source??"").toUpperCase();let be=S?.filename??"N/D";if(J==="BASES"){const Ee=Number(S?.oi_num),G=Ce(Ee,S?.oi_year,S?.oi_tag??S?.oi);G!=="N/D"&&(be=`${G} / ${be}`)}else J==="GASELAG"&&(be=`GASELAG / ${be}`);return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:be}),l.jsx("td",{children:$})]},L)})})]})})]}):null,l.jsx("div",{className:"small text-muted",children:"Resultado final (post-dedupe)"}),l.jsxs("div",{className:"small",children:["nicas (post-dedupe):"," ",l.jsx("strong",{children:z.series_total_dedup??"N/D"}),"  Conformes finales:"," ",l.jsx("strong",{children:z.series_conformes??"N/D"}),"  No conformes finales:"," ",l.jsx("strong",{children:z.series_no_conformes_final??"N/D"})]}),l.jsx("div",{className:"mT-10",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>D(S=>!S),children:M?"Ocultar detalle tcnico":"Ver detalle tcnico"})}),M?l.jsxs("div",{className:"mT-10",children:[l.jsx("div",{className:"small text-muted",children:"Detalle tcnico (soporte)"}),l.jsxs("div",{className:"small",children:["Registros ledos (total):"," ",l.jsx("strong",{children:ve(z)??"N/D"})," "," Duplicados eliminados:"," ",l.jsx("strong",{children:K(z)??"N/D"})," "," nicas = Ledos  Duplicados:"," ",l.jsx("strong",{children:(()=>{const S=ve(z),L=K(z);if(typeof S=="number"&&typeof L=="number")return S-L;const $=z.series_total_dedup;return typeof $=="number"?$:"N/D"})()})]})]}):null]})]})})]}):null,c.length>0&&l.jsxs("div",{className:"mT-20",children:[l.jsx("h6",{className:"c-grey-900",children:"Eventos"}),l.jsx("div",{className:"bd p-10",style:{maxHeight:240,overflow:"auto"},children:c.map((S,L)=>{const $=String(S.message??""),J=String(S.code??""),be=String(S.detail??""),Ee=fe($||be||""),G=Ee.toLowerCase(),Me=V(J),$e=fe(be),nt=[];Me&&!G.includes(Me.toLowerCase())&&nt.push(Me),$e&&!G.includes($e.toLowerCase())&&nt.push($e);const zt=nt.join("  ");return l.jsxs("div",{className:"small",children:[ui(S.type),"  ",Ee,zt?l.jsxs("span",{className:"text-muted",children:[" (",zt,")"]}):null]},L)})})]})]})})})})}const oD="America/Lima";function cD(e){if(!e)return null;const a=/filename\*=UTF-8''([^;]+)|filename="([^"]+)"/i.exec(e),s=a?.[1]??a?.[2];if(!s)return null;try{return decodeURIComponent(s)}catch{return s}}function uD(e,a){const s=window.URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(s)}function jm(e){if(!e)return"N/D";const s=/[zZ]$/.test(e)||/[+-]\d{2}:\d{2}$/.test(e)||/[+-]\d{4}$/.test(e)?e:`${e}Z`,i=new Date(s);if(Number.isNaN(i.getTime()))return String(e);const d=new Intl.DateTimeFormat("es-PE",{timeZone:oD,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(i),f=h=>d.find(v=>v.type===h)?.value||"";return`${f("day")}/${f("month")}/${f("year")} ${f("hour")}:${f("minute")}`}function ti(e,a){const s=e?.[a];return typeof s=="number"?String(s):"N/D"}function Jc(e,a){const s=e?.[a];return typeof s=="string"&&s.trim()?s.trim():"N/D"}function ex(e){const a=e?.series_duplicates_eliminated??e?.detail?.series_duplicates_eliminated??e?.series_duplcates_eliminated;return typeof a=="number"?a:null}const gN={MISSING_HEADERS:"Faltan cabeceras requeridas",FILE_INVALID:"Archivo invlido",INVALID_OI_FILENAME:"Nombre de archivo invlido",EMPTY_FILE:"Archivo vaco"};function dD(e){const a=String(e??"").trim().toUpperCase();return a?gN[a]??a:""}function fD(e){if(!e)return"";let a=gl(e);a=a.replace(/\bERROR\b/gi,"Error");for(const[s,i]of Object.entries(gN))a=a.replace(new RegExp(`\\b${s}\\b`,"g"),i);return a}function mD(e,a){const s=dD(e),i=fD(a);return i?s&&!i.toLowerCase().includes(s.toLowerCase())?`${s}: ${i}`:i:s||"N/D"}function tx(e,a,s){const i=String(s??"").trim();if(i)return i;const c=Number(e);if(!Number.isFinite(c)||c<=0)return"N/D";const d=Number(a);return Number.isFinite(d)&&d>0?`OI-${String(c).padStart(4,"0")}-${String(d).padStart(4,"0")}`:`OI-${String(c).padStart(4,"0")}`}function nx(e){const a=e?.rows_total_read??e?.totals_input?.rows_read;return typeof a=="number"?a:null}function ax(e){const a=(e||"").toUpperCase();return a==="COMPLETADO"?"badge bg-success":a==="ERROR"?"badge bg-danger":a==="CANCELADO"?"badge bg-warning vi-text-contrast":"badge bg-secondary"}function hD(e){try{return JSON.stringify(e??null,null,2)}catch{return String(e)}}function pD(){const e=fl(),a=Hn(),s=ns(a?.role,a?.username),i=Du(a),c=s==="admin"||s==="administrator",[d,f]=p.useState([]),[h,v]=p.useState(0),[g,y]=p.useState(!1),[x,j]=p.useState(""),[H,_]=p.useState(0),[A,R]=p.useState(""),[F,z]=p.useState(""),[te,M]=p.useState(""),[D,K]=p.useState(""),[q,V]=p.useState(""),[fe,Re]=p.useState(20),[Ce,ve]=p.useState(1),[_e,ke]=p.useState(!1),[De,U]=p.useState(!1),[Z,ae]=p.useState(""),[he,me]=p.useState(null),[w,X]=p.useState(!1),[ce,Y]=p.useState(()=>({q:"",dateFrom:"",dateTo:"",source:"",status:""})),ye=p.useMemo(()=>(Ce-1)*fe,[Ce,fe]),Se=he?.summary_json,Le=p.useMemo(()=>(Array.isArray(Se?.audit_by_oi)?Se.audit_by_oi:[]).filter(S=>S?.status==="OK"&&String(S?.source??"").toUpperCase()==="BASES").slice().sort((S,L)=>{const $=Number(S?.oi_year),J=Number(L?.oi_year),be=Number.isFinite($)&&$>0,Ee=Number.isFinite(J)&&J>0;if(be&&Ee&&$!==J)return $-J;if(be&&!Ee)return-1;if(!be&&Ee)return 1;const G=Number(S?.oi_num),Me=Number(L?.oi_num),$e=Number.isFinite(G),nt=Number.isFinite(Me);if($e&&nt&&G!==Me)return G-Me;if($e&&!nt)return-1;if(!$e&&nt)return 1;const zt=String(S?.oi_tag??S?.oi??S?.oi_num??"").toUpperCase(),Ne=String(L?.oi_tag??L?.oi??L?.oi_num??"").toUpperCase();return zt.localeCompare(Ne)}),[Se]),Ze=p.useMemo(()=>(Array.isArray(Se?.files_rejected)?Se.files_rejected:[]).slice().sort((S,L)=>{const $=String(S?.oi??S?.filename??"").toUpperCase(),J=String(L?.oi??L?.filename??"").toUpperCase();return $.localeCompare(J)}),[Se]),pe=p.useMemo(()=>{const T=()=>({files_total:0,files_ok:0,files_error:0,rows_read:0,conformes:0,no_conformes:0,rows_ignored_invalid_estado:0}),S=Se?.by_source;if(S&&typeof S=="object")return S;const L={BASES:T(),GASELAG:T()},$=Array.isArray(Se?.audit_by_oi)?Se.audit_by_oi:[];for(const be of $){if(be?.status!=="OK")continue;const G=String(be?.source??"").toUpperCase()==="GASELAG"?"GASELAG":"BASES";L[G].files_ok+=1,L[G].rows_read+=Number(be?.rows_read??0)||0,L[G].conformes+=Number(be?.conformes??0)||0,L[G].no_conformes+=Number(be?.no_conformes??0)||0,L[G].rows_ignored_invalid_estado+=Number(be?.rows_ignored_invalid_estado??0)||0}const J=Array.isArray(Se?.files_rejected)?Se.files_rejected:[];for(const be of J){const G=String(be?.source??"").toUpperCase()==="GASELAG"?"GASELAG":"BASES";L[G].files_error+=1}for(const be of["BASES","GASELAG"])L[be].files_total=L[be].files_ok+L[be].files_error;return L},[Se]);p.useEffect(()=>{let T=!1;return y(!0),j(""),nh({limit:fe,offset:ye,include_deleted:!1,q:ce.q||void 0,dateFrom:ce.dateFrom||void 0,dateTo:ce.dateTo||void 0,source:ce.source||void 0,status:ce.status||void 0}).then(S=>{T||(f(Array.isArray(S?.items)?S.items:[]),v(typeof S?.total=="number"?S.total:0))}).catch(S=>{if(T)return;const L=S,$=L.response?.data?.detail||L.message||"No se pudo cargar historial.";j($)}).finally(()=>{T||y(!1)}),()=>{T=!0}},[ce,ye,fe,H]);const Be=()=>{Y({q:A.trim(),dateFrom:F.trim(),dateTo:te.trim(),source:D.trim(),status:q.trim()}),ve(1)},Ge=()=>{R(""),z(""),M(""),K(""),V(""),Y({q:"",dateFrom:"",dateTo:"",source:"",status:""}),ve(1),_(T=>T+1)},Je=()=>_(T=>T+1),ot=async(T,S)=>{try{j("");const L=await b2(T,S),$=L.headers["content-disposition"],J=L.headers["x-file-name"],be=cD($)??J??`${S}.bin`;uD(L.data,be)}catch(L){const $=L;if(gt.isCancel($))return;const J=$.response?.data?.detail||$.message||"No se pudo descargar.";j(J)}},ze=async T=>{if(c&&window.confirm("Eliminar la corrida del historial?"))try{j(""),await v2(T),Je()}catch(S){const L=S;if(gt.isCancel(L))return;const $=L.response?.data?.detail||L.message||"No se pudo eliminar.";j($)}},Qe=async T=>{try{ke(!0),U(!0),ae(""),me(null),X(!1);const S=await g2(T);me(S)}catch(S){const L=S;if(gt.isCancel(L))return;const $=L.response?.data?.detail||L.message||"No se pudo cargar el reporte.";ae($)}finally{U(!1)}},ue=()=>{ke(!1)};p.useEffect(()=>{if(!_e)return;const T=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=T}},[_e]);const Fe=h===0?0:ye+1,we=h===0?0:Math.min(ye+d.length,h),We=Ce>1,O=ye+d.length<h;return l.jsxs("div",{className:"container-fluid",children:[_e?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:l.jsx("div",{className:"modal-dialog modal-xl modal-dialog-scrollable",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{className:"modal-title",children:"Reporte de auditora (LOG-01)"}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:ue})]}),l.jsx("div",{className:"modal-body",children:De?l.jsx("div",{className:"text-muted",children:"Cargando reporte..."}):Z?l.jsx("div",{className:"alert alert-danger mB-0",children:Z}):he?(()=>{const T=he.summary_json,S=Jc(T,"serie_ini"),L=Jc(T,"serie_fin"),$=ti(T,"series_total_dedup"),J=ti(T,"series_conformes"),be=ti(T,"series_no_conformes_final");return l.jsxs("div",{className:"d-flex flex-column gap-15",children:[l.jsxs("div",{className:"d-flex flex-wrap gap-10 align-items-center",children:[l.jsxs("span",{className:"badge bg-secondary",children:["Run ID: ",he.id]}),l.jsx("span",{className:ax(he.status),children:he.status}),l.jsxs("span",{className:"small text-muted",children:[jm(he.created_at),he.completed_at?`  ${jm(he.completed_at)}`:""]})]}),l.jsx("div",{className:"card",children:l.jsx("div",{className:"card-body",children:l.jsxs("div",{className:"d-flex flex-wrap gap-15",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-muted small",children:"Serie inicial"}),l.jsx("div",{children:l.jsx("strong",{children:S})})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-muted small",children:"Serie final"}),l.jsx("div",{children:l.jsx("strong",{children:L})})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-muted small",children:"nicas (post-dedupe)"}),l.jsx("div",{children:l.jsx("strong",{children:$})})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-muted small",children:"Conformes finales"}),l.jsx("div",{children:l.jsx("strong",{children:J})})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-muted small",children:"No conformes finales"}),l.jsx("div",{children:l.jsx("strong",{children:be})})]})]})})}),l.jsx("div",{className:"bd p-10",children:l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6",children:[l.jsx("div",{className:"small text-muted",children:"Archivos"}),l.jsxs("div",{className:"small",children:["Total: ",l.jsx("strong",{children:T?.files_total??"N/D"}),"  OK:"," ",l.jsx("strong",{children:T?.files_ok??"N/D"}),"  Rechazados:"," ",l.jsx("strong",{children:T?.files_error??"N/D"})]}),l.jsx("div",{className:"mT-10 small text-muted",children:"Totales por tipo (origen)"}),l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Tipo"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Archivos"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ledos"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ignorados"})]})}),l.jsx("tbody",{children:["BASES","GASELAG"].map(Ee=>{const G=pe?.[Ee]??{},Me=G?.files_total??Number(G?.files_ok??0)+Number(G?.files_error??0);return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:Ee})}),l.jsxs("td",{style:{whiteSpace:"nowrap"},children:[l.jsx("strong",{children:Me??0})," ",l.jsxs("span",{className:"text-muted",children:["(OK: ",G?.files_ok??0,"  Rech: ",G?.files_error??0,")"]})]}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:G?.rows_read??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:G?.conformes??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:G?.no_conformes??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:G?.rows_ignored_invalid_estado??0})})]},Ee)})})]})}),l.jsx("div",{className:"mT-10 small text-muted",children:"No conformes por OI (origen)  BASES"}),Le.length>0?l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"OI"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ledos"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"})]})}),l.jsx("tbody",{children:Le.map((Ee,G)=>l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:tx(Ee?.oi_num,Ee?.oi_year,Ee?.oi_tag??Ee?.oi)}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:Ee?.rows_read??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:Ee?.conformes??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:Ee?.no_conformes??0})})]},G))})]})}):l.jsx("div",{className:"small text-muted",children:"N/D"}),Number(pe?.GASELAG?.rows_read??0)>0?l.jsxs("div",{className:"mT-10 small",children:[l.jsx("span",{className:"text-muted",children:"GASELAG (origen):"})," ","Ledos: ",l.jsx("strong",{children:pe.GASELAG.rows_read??0}),"  Conformes:"," ",l.jsx("strong",{children:pe.GASELAG.conformes??0}),"  No conformes:"," ",l.jsx("strong",{children:pe.GASELAG.no_conformes??0}),"  Ignorados(estado):"," ",l.jsx("strong",{children:pe.GASELAG.rows_ignored_invalid_estado??0})]}):null,l.jsxs("div",{className:"col-12 mT-10 p-0",children:[l.jsx("div",{className:"small text-muted",children:"Totales (origen)"}),l.jsxs("div",{className:"small",children:["Registros ledos:"," ",l.jsx("strong",{children:T?.totals_input?.rows_read??"N/D"}),"  Conformes:"," ",l.jsx("strong",{children:T?.totals_input?.conformes??"N/D"}),"  No conformes:"," ",l.jsx("strong",{children:T?.totals_input?.no_conformes??"N/D"})]})]})]}),l.jsxs("div",{className:"col-md-6 mT-10 mT-md-0",children:[Ze.length>0?l.jsxs("div",{className:"mT-15",children:[l.jsx("div",{className:"small text-muted",children:"Archivos rechazados"}),l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"OI / Archivo"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Motivo"})]})}),l.jsx("tbody",{children:Ze.map((Ee,G)=>{const Me=mD(Ee?.code,Ee?.detail),$e=String(Ee?.source??"").toUpperCase();let nt=Ee?.filename??"N/D";if($e==="BASES"){const zt=Number(Ee?.oi_num),Ne=tx(zt,Ee?.oi_year,Ee?.oi_tag??Ee?.oi);Ne!=="N/D"&&(nt=`${Ne} / ${nt}`)}else $e==="GASELAG"&&(nt=`GASELAG / ${nt}`);return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:nt}),l.jsx("td",{children:Me})]},G)})})]})})]}):null,l.jsx("div",{className:"small text-muted",children:"Resultado final (post-dedupe)"}),l.jsxs("div",{className:"small",children:["nicas (post-dedupe):"," ",l.jsx("strong",{children:T?.series_total_dedup??"N/D"}),"  Conformes finales:"," ",l.jsx("strong",{children:T?.series_conformes??"N/D"}),"  No conformes finales:"," ",l.jsx("strong",{children:T?.series_no_conformes_final??"N/D"})]}),l.jsx("div",{className:"mT-10",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>X(Ee=>!Ee),children:w?"Ocultar detalle tcnico":"Ver detalle tcnico"})}),w?l.jsxs("div",{className:"mT-10",children:[l.jsx("div",{className:"small text-muted",children:"Detalle tcnico (soporte)"}),l.jsxs("div",{className:"small",children:["Registros ledos (total):"," ",l.jsx("strong",{children:nx(T)??"N/D"})," "," Duplicados eliminados:"," ",l.jsx("strong",{children:ex(T)??"N/D"})," "," nicas = Ledos  Duplicados:"," ",l.jsx("strong",{children:(()=>{const Ee=nx(T),G=ex(T);if(typeof Ee=="number"&&typeof G=="number")return Ee-G;const Me=T?.series_total_dedup;return typeof Me=="number"?Me:"N/D"})()})]})]}):null]})]})}),l.jsxs("details",{children:[l.jsx("summary",{className:"btn btn-sm btn-outline-auto",children:"Ver auditora completa (JSON)"}),l.jsx("pre",{className:"mT-10 small",style:{whiteSpace:"pre-wrap"},children:hD(he.summary_json)})]})]})})():l.jsx("div",{className:"text-muted",children:"Sin datos de reporte."})}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:ue,children:"Cerrar"})})]})})}),l.jsx("div",{className:"modal-backdrop fade show",onClick:ue})]}):null,l.jsx("div",{className:"row",children:l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[l.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between mB-10 gap-10",children:[l.jsx("h4",{className:"c-grey-900 mB-0",children:"Historial de consolidaciones LOG-01"}),l.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>e("/logistica/log01/excel"),children:"Nueva consolidacin"})]}),x?l.jsx("div",{className:"alert alert-danger",role:"alert",children:x}):null,l.jsxs("form",{className:"row g-2 align-items-end",onSubmit:T=>{T.preventDefault(),Be()},children:[l.jsxs("div",{className:"col-md-3",children:[l.jsx("label",{className:"form-label",children:"Buscar"}),l.jsx("input",{className:"form-control form-control-sm",value:A,onChange:T=>R(T.target.value),onKeyDown:T=>{T.key==="Enter"&&Be()},placeholder:"Usuario, serie inicial, serie final..."})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Fecha desde"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:F,onChange:T=>z(T.target.value)})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Fecha hasta"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:te,onChange:T=>M(T.target.value)})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Origen"}),l.jsxs("select",{className:"form-select form-select-sm",value:D,onChange:T=>K(T.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"AUTO",children:"AUTO"}),l.jsx("option",{value:"BASES",children:"BASES"}),l.jsx("option",{value:"GASELAG",children:"GASELAG"})]})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Estado"}),l.jsxs("select",{className:"form-select form-select-sm",value:q,onChange:T=>V(T.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"COMPLETADO",children:"COMPLETADO"}),l.jsx("option",{value:"CANCELADO",children:"CANCELADO"}),l.jsx("option",{value:"ERROR",children:"ERROR"})]})]}),l.jsxs("div",{className:"col-md-1",children:[l.jsx("label",{className:"form-label",children:"Mostrar"}),l.jsxs("select",{className:"form-select form-select-sm",value:fe,onChange:T=>{const S=Number(T.target.value);Re(Number.isFinite(S)?S:20),ve(1)},children:[l.jsx("option",{value:10,children:"10"}),l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"})]})]}),l.jsxs("div",{className:"col-12 d-flex flex-wrap gap-10 mT-5",children:[l.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:g,children:"Buscar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:Ge,children:"Limpiar filtros"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:Je,children:"Recargar"})]})]}),l.jsxs("div",{className:"mT-15",children:[g?l.jsx("div",{className:"text-muted",children:"Cargando historial..."}):l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Fecha"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Usuario"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Estado"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:" Serie inic"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:" Serie fin "}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"nicas"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Acciones"})]})}),l.jsx("tbody",{children:d.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"text-muted small",children:"Sin registros."})}):d.map(T=>{const S=T.summary_json,L=Jc(S,"serie_ini"),$=Jc(S,"serie_fin"),J=ti(S,"series_total_dedup"),be=ti(S,"series_conformes"),Ee=ti(S,"series_no_conformes_final"),G=T.created_by_full_name||T.created_by_username||"N/D";return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:jm(T.created_at)}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:G}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("span",{className:ax(T.status),children:T.status})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:L}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:$}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:J})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:be})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:Ee})}),l.jsx("td",{children:l.jsxs("div",{className:"d-flex gap-1 flex-wrap justify-content-end",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-success",onClick:()=>void ot(T.id,"excel"),children:"Excel"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void Qe(T.id),children:"Ver reporte"}),i?l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void ot(T.id,"no-conforme"),children:"No conforme"}):null,i?l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void ot(T.id,"manifiesto"),children:"Manifiesto"}):null,c?l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>void ze(T.id),children:"Eliminar"}):null]})})]},T.id)})})]})}),l.jsxs("div",{className:"d-flex align-items-center justify-content-between mT-10",children:[l.jsxs("div",{className:"small text-muted",children:["Mostrando ",Fe,"-",we," de ",h]}),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>ve(T=>Math.max(1,T-1)),disabled:!We||g,children:"Anterior"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>ve(T=>T+1),disabled:!O||g,children:"Siguiente"})]})]})]})]})})})]})}function ni(e){return e===!0?"badge bg-success":e===!1?"badge bg-danger":"badge bg-secondary"}function gD(e){const a=(e||"").toString().trim().toUpperCase();return a?a==="COMPLETADO"||a==="COMPLETED"?"badge bg-success":a==="ERROR"||a==="FALLIDO"||a==="FAILED"?"badge bg-danger":a==="PROCESANDO"||a==="RUNNING"||a==="EN_PROCESO"?"badge bg-warning text-dark":"badge bg-secondary":"badge bg-secondary"}const Sm=250,wm="medileser_log02_rutas_v1",ah="America/Lima",Nr=typeof window<"u"&&new URLSearchParams(window.location.search).get("debugProgress")==="1",bD="[log02-copy-progress]",sx=2e3,vD=500,yD=600,_m=3e3;function xr(...e){Nr&&console.log(bD,...e)}function rx(e){if(!e)return"N/D";const s=/[zZ]$/.test(e)||/[+-]\d{2}:\d{2}$/.test(e)||/[+-]\d{4}$/.test(e)?e:`${e}Z`,i=new Date(s);if(Number.isNaN(i.getTime()))return String(e);const d=new Intl.DateTimeFormat("es-PE",{timeZone:ah,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(i),f=h=>d.find(v=>v.type===h)?.value||"";return`${f("day")}/${f("month")}/${f("year")} ${f("hour")}:${f("minute")}`}function xD(e,a){const s=e?.[a];return typeof s=="number"?String(s):"N/D"}function lx(e,a){const s=e?.[a];return typeof s=="string"&&s.trim()?s.trim():"N/D"}function ix(e){const a=e,s=String(a?.name||""),i=String(a?.message||a||"");return s==="AbortError"||/aborted/i.test(i)||/abort/i.test(i)}function ND(e){const a=e;if(!a)return!1;const s=(a.tagName||"").toLowerCase();return!!(s==="input"||s==="textarea"||s==="select"||a.isContentEditable)}async function po(e){const a=(e||"").trim();if(a)try{await navigator.clipboard.writeText(a);return}catch{const s=document.createElement("textarea");s.value=a,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)}}function jD(){const[e,a]=p.useState([""]),[s,i]=p.useState(""),[c,d]=p.useState("consolidate"),[f,h]=p.useState(0),[v,g]=p.useState("0"),[y,x]=p.useState(!1),[j,H]=p.useState(0),[_,A]=p.useState("0"),[R,F]=p.useState(!1),[z,te]=p.useState(!1),[M,D]=p.useState(!1),[K,q]=p.useState(""),[V,fe]=p.useState(null),[Re,Ce]=p.useState(!1),[ve,_e]=p.useState(!1),[ke,De]=p.useState(!1),[U,Z]=p.useState(""),[ae,he]=p.useState([]),[me,w]=p.useState(null),[X,ce]=p.useState(!1),Y=p.useRef(0),ye=p.useRef(null),[Se,Le]=p.useState(""),[Ze,pe]=p.useState(""),[Be,Ge]=p.useState(""),[Je,ot]=p.useState(""),[ze,Qe]=p.useState("COMPLETADO"),[ue,Fe]=p.useState(!1),[we,We]=p.useState(""),[O,T]=p.useState(0),[S,L]=p.useState(""),[$,J]=p.useState(""),[be,Ee]=p.useState(0),[G,Me]=p.useState(""),[$e,nt]=p.useState([]),[zt,Ne]=p.useState([]),[Ie,Kt]=p.useState(null),Et=p.useRef(null),Xt=p.useRef(!1),cn=p.useRef(!1),na=p.useRef(null),Zn=p.useRef(null),rt=p.useRef(!1),Mn=p.useRef(!1),En=p.useRef(-1),Xn=p.useRef(-1),Un=p.useRef(""),Ln=p.useRef(null),W=p.useRef(!1),se=p.useRef(""),Te=p.useRef(0),Ve=p.useRef(!0),et=p.useRef(""),ct=p.useRef(!0),[Ke,Ut]=p.useState(!1),[Lt,Bt]=p.useState("origen"),[un,Ct]=p.useState(null),[dt,yt]=p.useState([]),[Gt,hn]=p.useState(""),[Pt,Nn]=p.useState(""),[an,kt]=p.useState([]),[Mt,dn]=p.useState(!1),[jn,An]=p.useState(""),[Jt,wt]=p.useState(""),[gs,ha]=p.useState(""),[pn,Gn]=p.useState(""),[Bn,Ia]=p.useState(1),[$a,Fa]=p.useState(!1),[qt,aa]=p.useState([]),Qt=p.useMemo(()=>{const E=gs.trim().toLocaleLowerCase();return E?an.filter(B=>(B.name||"").toLocaleLowerCase().includes(E)):an},[an,gs]);p.useEffect(()=>{if(!Ke)return;if(!Qt.length){Jt&&wt("");return}Jt&&Qt.some(B=>B.path===Jt)||wt(Qt[0].path)},[Ke,Qt,Jt]),p.useEffect(()=>{try{const E=localStorage.getItem(wm);if(!E)return;const B=JSON.parse(E),ie=Array.isArray(B.origenes)?B.origenes:[],de=typeof B?.destino=="string"?B.destino:"",qe=B?.output_mode==="keep_structure"?"keep_structure":"consolidate",Ot=typeof B?.group_size=="number"&&Number.isFinite(B.group_size)?B.group_size:0,Nt=typeof B?.merge_group_size=="number"&&Number.isFinite(B.merge_group_size)?B.merge_group_size:null,ca=typeof B?.generate_merged_pdfs=="boolean"?B.generate_merged_pdfs:!1;ie.length&&a(ie),de&&i(de),d(qe),h(Math.max(0,Math.trunc(Ot))),Nt!=null?(H(Math.max(0,Math.trunc(Nt))),ct.current=!1):H(Math.max(0,Math.trunc(Ot))),te(ca)}catch{}},[]),p.useEffect(()=>{try{const E={origenes:e,destino:s,output_mode:c,group_size:Math.max(0,Math.trunc(f||0)),merge_group_size:Math.max(0,Math.trunc(j||0)),generate_merged_pdfs:z};localStorage.setItem(wm,JSON.stringify(E))}catch{}},[e,s,c,f,j,z]),p.useEffect(()=>(Ve.current=!0,()=>{Ve.current=!1,et.current="",qn("unmount"),sa("unmount")}),[]),p.useEffect(()=>{if(!ve){ye.current!=null&&(window.clearTimeout(ye.current),ye.current=null),Y.current=0,ce(!1);return}if(ke){ye.current!=null&&(window.clearTimeout(ye.current),ye.current=null),Y.current=Date.now(),ce(!0);return}if(!X)return;const E=Date.now()-Y.current,B=Math.max(0,yD-E);return ye.current!=null&&window.clearTimeout(ye.current),ye.current=window.setTimeout(()=>{ye.current=null,Ve.current&&ce(!1)},B),()=>{ye.current!=null&&(window.clearTimeout(ye.current),ye.current=null)}},[ke,ve,X]);function gn(){a([""]),i(""),fe(null),q(""),Ce(!1),w(null),d("consolidate"),h(0),x(!1),H(0),A("0"),F(!1),te(!1),Kt(null),nt([]),Ne([]),J(""),L(""),T(0),Me(""),We(""),Ia(1),aa([]),Fa(!1),ct.current=!0;try{localStorage.removeItem(wm)}catch{}}function Ar(){a(E=>{const B=new Set,ie=[];for(const de of E){const qe=(de||"").trim();if(!qe)continue;const Ot=qe.toLowerCase();B.has(Ot)||(B.add(Ot),ie.push(qe))}return ie.length?ie:[""]})}function bl(){Ce(!0),Ct(null),zr("origen")}function Cr(E){Ce(!0),Ct(E),zr("origen")}function Or(){Ce(!0),Ct(null),zr("destino")}async function bs(E=5){Z(""),De(!0);try{const B=await nh({limit:E,offset:0,include_deleted:!1,status:"COMPLETADO"}),ie=Array.isArray(B?.items)?B.items:[];if(he(ie),me?.id&&ie.length){const de=ie.find(qe=>qe.id===me.id);de&&w(de)}}catch(B){const ie=B,de=ie.response?.data?.detail||ie.message||"No se pudo cargar las corridas.";Z(de),he([])}finally{De(!1)}}async function Rr(){Z(""),De(!0);try{const E=await nh({limit:20,offset:0,include_deleted:!1,q:Se.trim()||void 0,dateFrom:Ze.trim()||void 0,dateTo:Be.trim()||void 0,source:Je.trim()||void 0,status:ze.trim()||void 0}),B=Array.isArray(E?.items)?E.items:[];he(B)}catch(E){const B=E,ie=B.response?.data?.detail||B.message||"No se pudo cargar las corridas.";Z(ie),he([])}finally{De(!1)}}function Cn(){_e(!0),bs(5)}function Tr(E){w(E),_e(!1),Ia(B=>B<3?3:B)}const is=p.useMemo(()=>e.map(E=>(E??"").trim()),[e]),Ha=p.useMemo(()=>is.filter(E=>E),[is]),Pn=p.useMemo(()=>(s??"").trim(),[s]),Dr=p.useMemo(()=>Ha.length>0&&!!Pn,[Ha.length,Pn]);function vl(E,B){a(ie=>{const de=ie.slice();return de[E]=B,de})}function vs(E){a(B=>{if(B.length<=1)return[""];const ie=B.slice();return ie.splice(E,1),ie})}p.useEffect(()=>{if(!Ke)return;function E(ie){try{const de=document.querySelector(`[data-folder-idx="${ie}"]`);de&&(de.focus(),de.scrollIntoView({block:"nearest"}))}catch{}}const B=ie=>{if(ie.key==="Escape"){ie.preventDefault(),Ut(!1);return}if(!ND(ie.target)){if(ie.key==="ArrowDown"||ie.key==="ArrowUp"){if(!Qt.length)return;ie.preventDefault();const de=Qt.findIndex(ca=>ca.path===Jt),qe=de>=0?de:0,Ot=ie.key==="ArrowDown"?Math.min(Qt.length-1,qe+1):Math.max(0,qe-1),Nt=Qt[Ot];if(!Nt)return;wt(Nt.path),requestAnimationFrame(()=>E(Ot));return}if(ie.key==="Enter"){if(!Jt)return;const de=Qt.find(qe=>qe.path===Jt);if(!de)return;ie.preventDefault(),pa(de.path);return}}};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[Ke,Jt,Mt]);async function zr(E){Bt(E),An(""),Ut(!0),ha("");try{const ie=(await y2()).roots||[];yt(ie);const de=ie[0]||"";hn(de),Nn(de),Gn(de),de?await pa(de):(kt([]),An("No hay rutas raz configuradas para el explorador. Configure VI_LOG02_UNC_ROOTS en el servidor."))}catch(B){const ie=B,de=ie.response?.data?.detail||ie.message||"No se pudo cargar las rutas raz.";An(de),kt([])}}async function pa(E){if(An(""),!E){kt([]);return}try{dn(!0),wt("");const B=await x2(E);Nn(B.path),Gn(B.path);const ie=B.folders||[];kt(ie),wt(ie[0]?.path||"")}catch(B){const ie=B,de=ie.response?.data?.detail||ie.message||"No se pudo listar la carpeta.";An(de),kt([])}finally{dn(!1)}}function yl(E){const B=(E||"").replace(/[\\\/]+$/,""),ie=B.startsWith("\\\\"),de=B.split("\\").filter(Nt=>Nt.length>0);if(de.length===0)return[];const qe=[];if(ie){const Nt=de[0]||"",ca=de[1]||"";if(Nt){const ya=`\\\\${Nt}`;qe.push({label:`\\\\${Nt}`,path:ya})}if(Nt&&ca){let ya=`\\\\${Nt}\\${ca}`;qe.push({label:ca,path:ya});for(let cs=2;cs<de.length;cs++)ya=`${ya}\\${de[cs]}`,qe.push({label:de[cs],path:ya})}return qe}let Ot=de[0];qe.push({label:de[0],path:de[0]});for(let Nt=1;Nt<de.length;Nt++)Ot=`${Ot}\\${de[Nt]}`,qe.push({label:de[Nt],path:Ot});return qe}async function Ys(){const E=(pn||"").trim();E&&await pa(E)}async function xi(){const E=(Pt||"").trim();E&&await po(E)}function Ni(){const E=(Pt||"").replace(/[\\\/]+$/,""),B=E.lastIndexOf("\\");if(B<=0)return;const ie=E.slice(0,B);pa(ie)}function Ks(E){const B=(E??Pt??"").trim();B&&(Lt==="destino"?i(B):a(ie=>{const de=B.trim();if(!de)return ie;const qe=ie.slice();return un!==null&&un>=0&&un<qe.length?(qe[un]=de,qe):qe.map(Nt=>(Nt||"").trim().toLowerCase()).includes(de.toLowerCase())?qe:qe.length===1&&!(qe[0]||"").trim()?[de]:[...qe,de]}),Ct(null),Ut(!1))}function Ta(){const E=(Pt||"").trim();E&&Ks(E)}async function ys(){q(""),fe(null),Ce(!0);const E=Pn,B=Ha;if(!B.length){q("Debes ingresar al menos una ruta de origen.");return}if(!E){q("Debes ingresar una ruta de destino.");return}try{D(!0);const ie=await N2({rutas_origen:B,ruta_destino:E});fe(ie),ie.ok?Ia(de=>de<2?2:de):q("Validacin incompleta: revisa los detalles de permisos y existencia.")}catch(ie){const de=ie;if(gt.isCancel(de))return;const qe=de.response?.data?.detail||de.message||"No se pudo validar las rutas.";q(qe)}finally{D(!1)}}const kr=p.useMemo(()=>!!V?.ok&&!!me?.id&&!ue,[V?.ok,me?.id,ue]);p.useEffect(()=>{Ia(E=>ue||V?.ok&&me?.id&&E<3?3:V?.ok&&!me?.id&&E<2?2:E)},[V?.ok,me?.id,ue]);function xs(E){const B=E?.cursor;if(typeof B=="number"&&Number.isFinite(B))return B;if(typeof B=="string"){const ie=Number(B);if(Number.isFinite(ie))return ie}return null}function Ns(E){return E==null?!1:E<=Xn.current?!0:(Xn.current=E,E>En.current&&(En.current=E),!1)}function xl(E){const B=E?.progress??E?.percent,ie=typeof B=="number"?B:typeof B=="string"?Number(B):NaN;if(Number.isFinite(ie)){const de=Math.max(0,Math.min(100,ie));T(qe=>(Nr&&qe!==de&&xr("setCopyProgress",{prev:qe,next:de}),de))}}function Mr(E){const B={...E||{}},ie=String(B?.type||"");if(xl(B),ie==="file_retry"){Ee(Br=>Br+1);const de=String(B.oi||"").trim(),qe=String(B.file||B.filename||"").trim(),Ot=B.attempt??B.try??B.retry,Nt=B.max_attempts??B.maxAttempts??B.max,ca=B.wait_ms??B.delay_ms??B.sleep_ms??B.waitMs;let ya="";Ot!=null&&Nt!=null?ya=` (intento ${Ot}/${Nt})`:Ot!=null&&(ya=` (intento ${Ot})`);let cs="";typeof ca=="number"&&isFinite(ca)&&(cs=`  esperando ${Math.max(1,Math.ceil(ca/1e3))}s`);const Rs=de?`${de}: `:"";B.message||(B.message=`${Rs}Reintentando archivo${qe?` ${qe}`:""}${ya}${cs}`),E&&typeof E=="object"&&!E.message&&(E.message=B.message)}if(ie==="status"||ie==="progress"){const de=B?.stage?String(B.stage):"";if(de&&L(de),typeof B?.message=="string"&&B.message&&J(B.message),de){const qe=de.toLowerCase();(qe==="cancelado"||qe==="cancelled")&&(Xt.current=!0,et.current="",Fe(!1),qn("cancelled"),sa("cancelled"))}return}if(ie==="oi"){typeof B?.oi=="string"&&Me(B.oi);return}if(ie==="oi_warn"){const de=String(B?.oi||""),qe=String(B?.message||""),Ot=B?.code?String(B.code):void 0;de&&qe&&nt(Nt=>[...Nt,{oi:de,code:Ot,message:qe}]);return}if(ie==="oi_error"||ie==="file_error"){const de=B?.oi?String(B.oi):void 0,qe=B?.file?String(B.file):void 0,Ot=String(B?.message||"Error");Ne(Nt=>[...Nt,{oi:de,file:qe,message:Ot}]);return}if(ie==="error"){const de=String(B?.message||"Fallo en el proceso.");Ne(qe=>[...qe,{message:de}]),J(de),L("error"),Fe(!1),qn("error_event"),sa("error_event");return}if(ie==="complete"){cn.current=!0,typeof B?.message=="string"&&J(B.message),L("completado"),T(100),Kt(B?.audit??null),Fe(!1),qn("complete"),sa("complete");return}}function Ur(E,B="stream"){const ie=xs(E),de=String(E?.type||""),qe=E?.stage?String(E.stage):"";Nr&&xr("event",{source:B,type:de,stage:qe,progress:E?.progress,percent:E?.percent,cursor:ie});const Ot=Xn.current;if(Ns(ie)){Nr&&xr("skip_event",{source:B,cursor:ie,lastCursor:Ot});return}if(Mr(E),de==="hello"||de==="status"||de==="progress"||de==="ping"||de==="oi"||de==="oi_done"||de==="file_ok"||de==="file_skip"||de==="oi_warn"||de==="oi_error"||de==="file_retry"||de==="file_error"||de==="error"||de==="complete"){const ca=typeof E?.message=="string"?E.message:void 0,ya=typeof qe=="string"&&qe?Lr(qe):void 0,cs=typeof E?.oi=="string"?E.oi:void 0,Rs=E?.progress??E?.percent,Br=typeof Rs=="number"?Rs:typeof Rs=="string"?Number(Rs):NaN,Zu=Number.isFinite(Br)?Math.max(0,Math.min(100,Br)):void 0;aa(Gu=>{const Nl=[...Gu,{ts:Date.now(),source:B,type:de,stage:ya,message:ca,oi:cs,progress:Zu}];return Nl.length>Sm&&Nl.splice(0,Nl.length-Sm),Nl})}}function qn(E){if(Nr&&xr("stop_polling",{reason:E,operationId:Un.current}),!!Mn.current){Mn.current=!1,na.current!=null&&(window.clearTimeout(na.current),na.current=null);try{Zn.current?.abort()}catch{}Zn.current=null,rt.current=!1,Un.current=""}}function ga(){Ln.current!=null&&(window.clearTimeout(Ln.current),Ln.current=null)}function Va(E){Nr&&xr("stream_closed",{reason:E,operationId:se.current}),W.current=!1,se.current="",ga()}function sa(E){Nr&&xr("stop_stream",{reason:E,operationId:se.current}),Va(E);try{Et.current?.abort()}catch{}Et.current=null}function ba(E){W.current&&(ga(),Ln.current=window.setTimeout(()=>{if(!W.current)return;const B=Date.now()-Te.current;if(B>=sx){xr("stream_silent_fallback",{idleMs:B,operationId:E}),sa("stream_silent"),!cn.current&&!Xt.current&&Ue(E,"stream_silent");return}ba(E)},sx))}function C(E){Te.current=Date.now(),W.current&&ba(E)}function P(E){Mn.current&&(na.current!=null&&window.clearTimeout(na.current),na.current=window.setTimeout(()=>{xe()},E))}async function xe(){if(!Mn.current||rt.current)return;const E=Un.current;if(!E){qn("no_operation_id");return}if(et.current!==E){qn("operation_mismatch");return}rt.current=!0;try{const B=await w2(E,En.current,Zn.current?.signal);En.current=B.cursor_next;for(const ie of B.events||[])Ur(ie,"poll");if(B.done&&(!B.events||B.events.length===0)){qn("done");return}}catch(B){if(Xt.current||cn.current)return;if(B?.name!=="AbortError"){const de=B,qe=de.response?.data?.detail||de.message||"No se pudo leer el progreso.";Ne(Ot=>[...Ot,{message:qe}]),L("error"),J(qe),Fe(!1),qn("poll_error")}}finally{rt.current=!1,Mn.current&&P(vD)}}function Ue(E,B){et.current===E&&(Mn.current||(Mn.current=!0,Un.current=E,Zn.current=new AbortController,En.current=Math.max(En.current,Xn.current),Nr&&xr("start_polling",{operationId:E,reason:B}),P(0)))}async function lt(){if(q(""),!V?.ok){q("Debes validar rutas correctamente antes de iniciar el copiado.");return}if(!me?.id){q("Debes seleccionar una corrida de LOG-01 (Historial) para usar su manifiesto.");return}const E=Ha,B=Pn;if(!E.length||!B){q("Completa orgenes y destino antes de iniciar.");return}Xt.current=!1,cn.current=!1,Ne([]),nt([]),Kt(null),L("inicio"),J("Iniciando copiado..."),T(0),Ee(0),Me(""),We(""),aa([]),Fa(!1),sa("reset"),qn("reset"),et.current="",En.current=-1,Xn.current=-1,Fe(!0);try{const de=(await j2({run_id:me.id,rutas_origen:E,ruta_destino:B,output_mode:c,group_size:Math.max(0,Math.trunc(f||0)),merge_group_size:Math.max(0,Math.trunc(j||0)),generate_merged_pdfs:c==="consolidate"?z:!1})).operation_id;We(de),et.current=de;const qe=new AbortController;Et.current=qe,W.current=!0,se.current=de,Te.current=Date.now(),ba(de),S2(de,Nt=>{Ve.current&&et.current===de&&(C(de),Ur(Nt,"stream"))},qe.signal).then(()=>{et.current===de&&(Va("stream_closed"),!cn.current&&!Xt.current&&Ue(de,"stream_closed"))}).catch(Nt=>{if(et.current===de){if(ix(Nt)||Xt.current||cn.current){Va("stream_aborted");return}Va("stream_error"),Ue(de,"stream_error")}})}catch(ie){if(Xt.current||cn.current||ix(ie))return;const de=ie,qe=de.response?.data?.detail||de.message||"No se pudo iniciar/leer el progreso.";Ne(Ot=>[...Ot,{message:qe}]),L("error"),J(qe),sa("start_error"),qn("start_error"),Fe(!1)}}async function At(){if(we){Xt.current=!0,et.current="";try{await _2(we)}catch{}try{Et.current?.abort()}catch{}sa("user_cancel"),qn("user_cancel"),Fe(!1),L("cancelado"),J("Cancelado por el usuario.")}}const it=p.useMemo(()=>{if(!V)return null;const E=(V.origenes||[]).filter(de=>de.existe&&de.lectura).length,B=(V.origenes||[]).length,ie=!!(V.destino?.existe&&V.destino?.es_directorio&&V.destino?.lectura&&V.destino?.escritura);return{okOrigenes:E,totalOrigenes:B,okDestino:ie}},[V]);async function bn(){if(!V)return;const E=[];E.push("LOG-02 - Resultado de validacin"),E.push("");for(const de of V.origenes||[])E.push(`ORIGEN | ${de.ruta} | existe=${de.existe?"SI":"NO"} | lectura=${de.lectura?"SI":"NO"} | detalle=${de.detalle||""}`);const B=V.destino;E.push(`DESTINO | ${B?.ruta||""} | existe=${B?.existe?"SI":"NO"} | lectura=${B?.lectura?"SI":"NO"} | escritura=${B?.escritura?"SI":"NO"} | detalle=${B?.detalle||""}`);const ie=E.join(`
`);await po(ie)}async function ra(){const E=[];E.push("LOG-02 - Estado de copiado (PB-LOG-015)"),E.push(`operation_id: ${we||"N/D"}`),E.push(`progreso: ${Number.isFinite(O)?O.toFixed(0):"0"}%`),E.push(`estado: ${S||""}`),G&&E.push(`OI: ${G}`),$&&E.push(`mensaje: ${$}`),await po(E.join(`
`))}function xt(E){const B=String(E||""),ie=B.match(/(\d+)\s*\/\s*(\d+)\s*PDFs?/i),de=B.match(/(\d+)\s*\/\s*(\d+)\s*(?:OIs?|OI)/i)||B.match(/\b(\d+)\s*\/\s*(\d+)\b/),qe=ie?{done:Number(ie[1]),total:Number(ie[2])}:null,Ot=de?{done:Number(de[1]),total:Number(de[2])}:null;return{pdf:qe,oi:Ot}}const In=p.useMemo(()=>{const E=xt($||"");return{pdfDone:E.pdf?.done,pdfTotal:E.pdf?.total,oiDone:E.oi?.done,oiTotal:E.oi?.total}},[$]);function Lr(E){const B=(E||"").trim();return B?dl?dl(B):B:""}async function ji(){const E=[];E.push("LOG-02 - Detalle en vivo (ltimos eventos)"),E.push("");for(const ie of qt.slice(-80)){const qe=new Date(ie.ts).toLocaleString("es-PE",{timeZone:ah,hour12:!1});E.push(`${qe} | ${ie.source} | ${ie.type}${ie.stage?` | ${ie.stage}`:""}${ie.oi?` | oi=${ie.oi}`:""}${typeof ie.progress=="number"?` | ${Math.round(ie.progress)}%`:""}${ie.message?` | ${ie.message}`:""}`)}const B=E.join(`
`);try{await navigator.clipboard.writeText(B)}catch{try{const ie=document.createElement("textarea");ie.value=B,document.body.appendChild(ie),ie.select(),document.execCommand("copy"),document.body.removeChild(ie)}catch{}}}const Za=!!V?.ok,os=!!V?.ok&&!!me?.id,Os=c!=="consolidate",va=Math.max(0,Math.trunc(f||0)),Qn=Math.max(0,Math.trunc(j||0)),Hu=z&&Qn>0&&Qn>_m;p.useEffect(()=>{y||g(String(va))},[va,y]),p.useEffect(()=>{R||A(String(Qn))},[Qn,R]),p.useEffect(()=>{ct.current&&(R||Qn!==va&&H(va))},[va,R,Qn]),p.useEffect(()=>{Os&&y&&(x(!1),g(String(va)))},[Os,y,va]),p.useEffect(()=>{Os&&R&&(F(!1),A(String(Qn)))},[Os,R,Qn]);function js(E){E===2&&!Za||E===3&&!os||Ia(E)}const Vu=V?.ok?me?.id?"":"Falta seleccionar corrida":"Falta validar rutas",[Lo,Bo]=p.useState(!1),qo=async E=>{const B=we;if(B)try{Bo(!0);const ie=await E2(B,E),de=window.URL.createObjectURL(ie),qe=document.createElement("a");qe.href=de,qe.download=`LOG02_AUDITORIA_${B}.${E}`,document.body.appendChild(qe),qe.click(),qe.remove(),window.URL.revokeObjectURL(de)}finally{Bo(!1)}};return l.jsxs("div",{className:"container-fluid",children:[l.jsx("div",{className:"row",children:l.jsxs("div",{className:"col-12",children:[l.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Filtrado de certificados PDF (LOG-02)"}),l.jsxs("div",{className:"text-muted small",children:["Este mdulo se orienta a ",l.jsx("strong",{children:"copiar"})," y ",l.jsx("strong",{children:"filtrar"})," certificados PDF desde una",l.jsx("strong",{children:" carpeta compartida"})," (no ZIP).",l.jsx("br",{}),"Configura las rutas UNC y valida accesos antes de iniciar el filtrado."]}),K?l.jsx("div",{className:"alert alert-danger mT-15",role:"alert",children:K}):null,l.jsxs("div",{className:"vi-wizard-header mT-15",children:[l.jsxs("ul",{className:"nav nav-pills vi-stepper",role:"tablist","aria-label":"Flujo LOG-02",children:[l.jsx("li",{className:"nav-item",role:"presentation",children:l.jsxs("button",{type:"button",className:"nav-link "+(Bn===1?"active":""),onClick:()=>js(1),children:[l.jsx("span",{className:"vi-step-num",children:"1"})," Rutas"]})}),l.jsx("li",{className:"nav-item",role:"presentation",children:l.jsxs("button",{type:"button",className:"nav-link "+(Bn===2?"active":""),onClick:()=>js(2),disabled:!Za,title:Za?"":"Primero valida rutas",children:[l.jsx("span",{className:"vi-step-num",children:"2"})," Corrida LOG-01"]})}),l.jsx("li",{className:"nav-item",role:"presentation",children:l.jsxs("button",{type:"button",className:"nav-link "+(Bn===3?"active":""),onClick:()=>js(3),disabled:!os,title:os?"":"Falta validar rutas o elegir corrida",children:[l.jsx("span",{className:"vi-step-num",children:"3"})," Ejecucin"]})})]}),l.jsxs("div",{className:"small text-muted mT-5",children:["Flujo recomendado: ",l.jsx("strong",{children:"1) Validar rutas"}),"  ",l.jsx("strong",{children:"2) Elegir corrida"})," "," ",l.jsx("strong",{children:"3) Iniciar copiado"}),"."]})]}),l.jsxs("div",{className:"accordion vi-wizard mT-15",id:"log02Wizard",children:[l.jsxs("div",{className:"accordion-item",children:[l.jsx("h2",{className:"accordion-header",id:"log02Step1Head",children:l.jsx("button",{className:"accordion-button "+(Bn===1?"":"collapsed"),type:"button",onClick:()=>js(1),children:l.jsxs("span",{className:"d-inline-flex align-items-center gap-10",children:[l.jsx("span",{className:"vi-step-num",children:"1"}),l.jsx("span",{className:"vi-step-title",children:"Rutas UNC"}),V?.ok?l.jsx("span",{className:"badge bg-success",children:"OK"}):V?l.jsx("span",{className:"badge bg-danger",children:"Revisar"}):l.jsx("span",{className:"badge bg-secondary",children:"Pendiente"})]})})}),l.jsx("div",{id:"log02Step1",className:"accordion-collapse collapse "+(Bn===1?"show":""),"aria-labelledby":"log02Step1Head","data-bs-parent":"#log02Wizard",children:l.jsx("div",{className:"accordion-body",children:l.jsxs("div",{className:"row g-3",children:[l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"vi-card",children:[l.jsx("h6",{className:"c-grey-900 mB-10",children:"Rutas UNC"}),l.jsxs("div",{className:"row g-2",children:[l.jsxs("div",{className:"col-12",children:[l.jsx("label",{className:"form-label",children:"Rutas origen (UNC)  lectura"}),e.map((E,B)=>l.jsx("div",{className:"mB-10",children:l.jsxs("div",{className:"d-flex gap-10 align-items-center",children:[l.jsxs("div",{className:"flex-grow-1",children:[l.jsx("input",{className:"form-control form-control-sm"+(Re&&!is[B]?" is-invalid":""),value:E,onChange:ie=>vl(B,ie.target.value),placeholder:"\\\\SERVIDOR\\Compartido\\Certificados",disabled:M}),Re&&!is[B]?l.jsx("div",{className:"small text-danger mT-5",children:"Requerido"}):null]}),l.jsxs("div",{className:"btn-group",role:"group","aria-label":"Acciones origen",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void po((E||"").trim()),disabled:M||!(E||"").trim(),title:"Copiar ruta",style:{minWidth:84},children:"Copiar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>Cr(B),disabled:M,title:"Elegir carpeta",style:{minWidth:84},children:(E||"").trim()?"Editar":"Agregar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>vs(B),disabled:M,title:"Quitar ruta",style:{minWidth:52},children:""})]})]})},B)),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:bl,disabled:M,title:"Agregar origen",children:"Agregar origen"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:Ar,disabled:M,title:"Quitar duplicados (solo UI)",children:"Quitar duplicados"})]}),l.jsxs("div",{className:"small text-muted",children:["Nota: estas rutas deben ser accesibles ",l.jsx("strong",{children:"desde el servidor"})," donde corre el backend."]})]}),l.jsxs("div",{className:"col-12",children:[l.jsx("label",{className:"form-label",children:"Ruta destino (UNC)  lectura y escritura"}),l.jsxs("div",{className:"d-flex gap-10 mB-10",children:[l.jsxs("div",{className:"flex-grow-1",children:[l.jsx("input",{className:"form-control form-control-sm "+(Re&&!Pn?"is-invalid":""),value:s,onChange:E=>i(E.target.value),placeholder:"\\\\SERVIDOR\\Compartido\\Salida_LOG02",disabled:M}),Re&&!Pn?l.jsx("div",{className:"small text-danger mT-5",children:"Destino requerido."}):null]}),l.jsxs("div",{className:"btn-group",role:"group","aria-label":"Acciones destino",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void po(Pn),disabled:M||!Pn,title:"Copiar ruta",style:{minWidth:84},children:"Copiar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:Or,disabled:M,title:"Elegir carpeta",style:{minWidth:84},children:Pn?"Editar":"Agregar"})]})]}),l.jsxs("div",{className:"mT-5",children:[l.jsx("div",{className:"small text-muted mB-5",children:Dr?"Listo para validar.":"Completa orgenes y destino."}),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>void ys(),disabled:M||!Dr,children:M?"Validando...":"Validar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:gn,disabled:M,title:"Limpia orgenes y destino",children:"Limpiar rutas"})]})]})]})]})]})}),l.jsx("div",{className:"col-12",children:V?l.jsxs("div",{className:"vi-card",children:[l.jsx("h6",{className:"c-grey-900 mB-10",children:"Resultado de validacin"}),it?l.jsxs("div",{className:"d-flex flex-wrap gap-10 align-items-center mB-10",children:[l.jsxs("span",{className:"badge vi-surface-2 vi-text",children:["Orgenes OK: ",l.jsx("strong",{children:it.okOrigenes})," / ",it.totalOrigenes]}),l.jsxs("span",{className:it.okDestino?"badge bg-success":"badge bg-danger",children:["Destino: ",it.okDestino?"OK":"No OK"]}),V.ok?null:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void bn(),children:"Copiar detalle"})]}):null,l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Tipo"}),l.jsx("th",{children:"Ruta"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Existe"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Lectura"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Escritura"}),l.jsx("th",{children:"Detalle"})]})}),l.jsxs("tbody",{children:[V.origenes.map((E,B)=>l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:"Origen"})}),l.jsx("td",{style:{wordBreak:"break-all"},children:E.ruta||"N/D"}),l.jsx("td",{children:l.jsx("span",{className:ni(E.existe),children:E.existe?"S":"No"})}),l.jsx("td",{children:l.jsx("span",{className:ni(E.lectura),children:E.lectura?"S":"No"})}),l.jsx("td",{children:l.jsx("span",{className:ni(null),children:""})}),l.jsx("td",{children:E.detalle||""})]},`o-${B}`)),l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:"Destino"})}),l.jsx("td",{style:{wordBreak:"break-all"},children:V.destino.ruta||"N/D"}),l.jsx("td",{children:l.jsx("span",{className:ni(V.destino.existe),children:V.destino.existe?"S":"No"})}),l.jsx("td",{children:l.jsx("span",{className:ni(V.destino.lectura),children:V.destino.lectura?"S":"No"})}),l.jsx("td",{children:l.jsx("span",{className:ni(!!V.destino.escritura),children:V.destino.escritura?"S":"No"})}),l.jsx("td",{children:V.destino.detalle||""})]})]})]})}),V.ok?l.jsx("div",{className:"alert alert-success mT-15",role:"alert",children:"Rutas validadas correctamente. Puedes continuar con la siguiente fase."}):l.jsx("div",{className:"alert alert-warning mT-15",role:"alert",children:"Hay rutas con problemas. Corrige existencia/permisos y vuelve a validar."})]}):l.jsx("div",{className:"vi-callout small",children:"An no has validado las rutas. Ejecuta Validar para continuar al paso 2."})})]})})})]}),l.jsxs("div",{className:"accordion-item",children:[l.jsx("h2",{className:"accordion-header",id:"log02Step2Head",children:l.jsx("button",{className:"accordion-button "+(Bn===2?"":"collapsed"),type:"button",onClick:()=>js(2),disabled:!Za,children:l.jsxs("span",{className:"d-inline-flex align-items-center gap-10",children:[l.jsx("span",{className:"vi-step-num",children:"2"}),l.jsx("span",{className:"vi-step-title",children:"Corrida LOG-01"}),me?.id?l.jsx("span",{className:"badge bg-success",children:"Seleccionada"}):Za?l.jsx("span",{className:"badge bg-warning vi-text-contrast",children:"Pendiente"}):l.jsx("span",{className:"badge bg-secondary",children:"Bloqueado"})]})})}),l.jsx("div",{id:"log02Step2",className:"accordion-collapse collapse "+(Bn===2?"show":""),"aria-labelledby":"log02Step2Head","data-bs-parent":"#log02Wizard",children:l.jsx("div",{className:"accordion-body",children:Za?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between gap-10",children:[l.jsxs("div",{className:"vi-card flex-grow-1",children:[l.jsx("div",{className:"small text-muted",children:"Corrida seleccionada"}),me?.id?l.jsx("div",{className:"mT-5",children:l.jsxs("div",{className:"d-flex flex-wrap gap-10 align-items-center",children:[l.jsxs("span",{className:"badge vi-surface-2 vi-text",children:["#",me.id]}),me?.created_at?l.jsx("span",{className:"small text-muted",children:rx(me.created_at)}):null,me?.source?l.jsx("span",{className:"small text-muted",children:me.source}):null,me?.status?l.jsx("span",{className:"small text-muted",children:me.status}):null]})}):l.jsx("div",{className:"text-muted small mT-5",children:"An no se ha elegido una corrida."})]}),l.jsx("div",{className:"d-flex gap-10",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:Cn,disabled:ue,children:me?.id?"Cambiar corrida":"Elegir corrida"})})]}),me?.id?null:l.jsx("div",{className:"vi-callout mT-10 small",children:"Debes seleccionar una corrida de LOG-01 (historial) para usar su manifiesto y NO CONFORME."})]}):l.jsx("div",{className:"vi-callout small",children:"Valida rutas para habilitar este paso."})})})]}),l.jsxs("div",{className:"accordion-item",children:[l.jsx("h2",{className:"accordion-header",id:"log02Step3Head",children:l.jsx("button",{className:"accordion-button "+(Bn===3?"":"collapsed"),type:"button",onClick:()=>js(3),disabled:!os,children:l.jsxs("span",{className:"d-inline-flex align-items-center gap-10",children:[l.jsx("span",{className:"vi-step-num",children:"3"}),l.jsx("span",{className:"vi-step-title",children:"Ejecucin"}),ue?l.jsx("span",{className:"badge bg-primary",children:"En progreso"}):Ie?l.jsx("span",{className:"badge bg-success",children:"Completado"}):os?l.jsx("span",{className:"badge bg-secondary",children:"Listo"}):l.jsx("span",{className:"badge bg-secondary",children:"Bloqueado"})]})})}),l.jsx("div",{id:"log02Step3",className:"accordion-collapse collapse "+(Bn===3?"show":""),"aria-labelledby":"log02Step3Head","data-bs-parent":"#log02Wizard",children:l.jsx("div",{className:"accordion-body",children:os?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"vi-card mB-10",children:[l.jsx("h6",{className:"c-grey-900 mB-10",children:"Salida de copiado"}),l.jsxs("div",{className:"row g-2",children:[l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"form-check",children:[l.jsx("input",{className:"form-check-input",type:"radio",id:"log02-out-consolidate",name:"log02-output-mode",checked:c==="consolidate",disabled:ue,onChange:()=>d("consolidate")}),l.jsxs("label",{className:"form-check-label",htmlFor:"log02-out-consolidate",children:[l.jsx("strong",{children:"Consolidar en una sola carpeta"}),l.jsxs("span",{className:"text-muted small",children:[" ","(se crea <SERIE_INICIAL>_AL_<SERIE_FINAL>)"]})]})]})}),l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"form-check",children:[l.jsx("input",{className:"form-check-input",type:"radio",id:"log02-out-keep",name:"log02-output-mode",checked:c==="keep_structure",disabled:ue,onChange:()=>d("keep_structure")}),l.jsx("label",{className:"form-check-label",htmlFor:"log02-out-keep",children:l.jsx("strong",{children:"Mantener estructura de carpetas"})})]})}),l.jsxs("div",{className:"col-12 col-md-6",children:[l.jsx("label",{className:"form-label mT-10",children:"Agrupar en subcarpetas por N"}),l.jsx("input",{type:"number",min:0,step:1,className:"form-control form-control-sm",style:{maxWidth:360,width:"20%"},value:y?v:va,disabled:ue||Os,onChange:E=>{const B=E.target.value;if(g(B),B==="")return;const ie=Number(B),de=Number.isFinite(ie)?Math.max(0,Math.trunc(ie)):0;h(de)},onFocus:()=>{x(!0),g(va===0?"":String(va))},onBlur:()=>{x(!1);const E=(v||"").trim();if(!E){h(0),g("0");return}const B=Number(E),ie=Number.isFinite(B)?Math.max(0,Math.trunc(B)):0;h(ie),g(String(ie))},placeholder:"0"}),l.jsx("div",{className:"small text-muted",children:Os?"Disponible solo en modo Consolidar.":va===0?"N=0: no se crean subcarpetas.":`Se crean subcarpetas de ${va} PDFs (ltimo grupo puede ser menor).`})]}),c==="consolidate"?l.jsxs("div",{className:"col-12",children:[l.jsxs("div",{className:"form-check mT-10",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"log02-gen-merged-pdfs",checked:z,onChange:E=>te(E.target.checked),disabled:ue}),l.jsxs("label",{className:"form-check-label",htmlFor:"log02-gen-merged-pdfs",children:[l.jsx("strong",{children:"Generar PDFs consolidados (merge)"})," ",l.jsx("span",{className:"text-muted small",children:Qn>0?`(1 PDF cada ${Qn} PDFs, guardado en la carpeta principal)`:"(1 PDF global en la carpeta principal)"})]})]}),z?l.jsxs("div",{className:"mT-10",children:[l.jsx("div",{className:"row g-2",children:l.jsxs("div",{className:"col-12 col-md-6",children:[l.jsx("label",{className:"form-label",children:"Agrupar PDFs para consolidado por N"}),l.jsx("input",{type:"number",min:0,step:1,className:"form-control form-control-sm",style:{maxWidth:360,width:"20%"},value:R?_:Qn,onChange:E=>{ct.current=!1;const B=E.target.value;if(A(B),B==="")return;const ie=Number(B),de=Number.isFinite(ie)?Math.max(0,Math.trunc(ie)):0;H(de)},onFocus:()=>{F(!0),A(Qn===0?"":String(Qn))},onBlur:()=>{F(!1);const E=(_||"").trim();if(!E){H(0),A("0");return}const B=Number(E),ie=Number.isFinite(B)?Math.max(0,Math.trunc(B)):0;H(ie),A(String(ie))},placeholder:"0",disabled:ue}),l.jsx("div",{className:"small text-muted",children:Qn>0?`Se consolidarn ${Qn} PDFs por archivo (en la carpeta principal).`:"N=0: se genera 1 PDF global con todos los certificados."})]})}),Hu?l.jsxs("div",{className:"alert alert-warning small mT-10 mB-0",children:[l.jsxs("div",{className:"mB-5",children:[l.jsx("strong",{children:"Advertencia:"})," el mximo por PDF consolidado es"," ",l.jsx("strong",{children:_m})," PDFs."]}),l.jsxs("div",{children:["Has configurado ",l.jsx("strong",{children:Qn}),". El merge se omitir y vers una advertencia en el progreso. Ajusta N a ",_m," o menos."]})]}):null]}):null]}):null]})]}),l.jsxs("div",{className:"d-flex flex-wrap gap-10 mB-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>void lt(),disabled:!kr,title:Vu,children:ue?"Copiando...":"Iniciar copiado"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>void At(),disabled:!ue||!we,children:"Cancelar"})]}),l.jsxs("div",{className:"mT-10",children:[l.jsxs("h6",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),ue?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null,we?l.jsxs("span",{className:"badge vi-surface-2 vi-text",children:["op: ",l.jsx("strong",{children:we})]}):null,l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto ms-auto",onClick:()=>void ra(),disabled:!S&&!$&&!we,title:"Copiar estado del progreso",children:"Copiar estado"})]}),l.jsxs("div",{className:"d-flex flex-wrap gap-10 mB-5",children:[l.jsxs("span",{className:"badge vi-surface-2 vi-text",children:["PDFs: ",In.pdfDone??""," / ",In.pdfTotal??""]}),l.jsxs("span",{className:"badge vi-surface-2 vi-text",children:["OIs: ",In.oiDone??""," / ",In.oiTotal??""]}),$e.length?l.jsxs("span",{className:"badge bg-warning vi-text-contrast",children:["Advertencias: ",$e.length]}):null,be>0?l.jsxs("span",{className:"badge bg-warning vi-text-contrast",children:["Reintentando: ",be]}):null,zt.length?l.jsxs("span",{className:"badge bg-danger",children:["Errores: ",zt.length]}):null]}),l.jsxs("div",{className:"small text-muted",children:[l.jsx("strong",{children:S?Lr(S):ue?"En progreso":""}),$?l.jsxs("span",{children:["  ",$]}):null]}),l.jsxs("div",{className:"small text-muted",children:[G?`OI actual: ${G}`:"OI actual: ",In.pdfDone!=null&&In.pdfTotal!=null?l.jsxs("span",{children:["  ",In.pdfDone,"/",In.pdfTotal," PDFs"]}):null,In.oiDone!=null&&In.oiTotal!=null?l.jsxs("span",{children:["  ",In.oiDone,"/",In.oiTotal," OIs"]}):null]}),l.jsx("div",{className:"progress vi-progress",children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${Math.max(0,Math.min(100,O))}%`},"aria-valuenow":O,"aria-valuemin":0,"aria-valuemax":100,children:l.jsxs("span",{className:"vi-progress-label",children:[O.toFixed(0),"%"]})})})]}),l.jsx("div",{className:"accordion mT-10",id:"log02LiveLog",children:l.jsxs("div",{className:"accordion-item",children:[l.jsx("h2",{className:"accordion-header",id:"log02LiveLogHead",children:l.jsxs("button",{className:"accordion-button vi-acc-sm "+($a?"":"collapsed"),type:"button",onClick:()=>Fa(E=>!E),children:["Detalle en vivo ",qt.length?`(${qt.length})`:""]})}),l.jsx("div",{id:"log02LiveLogBody",className:"accordion-collapse collapse "+($a?"show":""),"aria-labelledby":"log02LiveLogHead",children:l.jsxs("div",{className:"accordion-body p-0",children:[l.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between gap-10 p-10",children:[l.jsxs("div",{className:"small text-muted",children:["ltimos eventos (mx ",Sm,")"]}),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void ji(),disabled:!qt.length,children:"Copiar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>aa([]),disabled:!qt.length,children:"Limpiar"})]})]}),l.jsx("div",{className:"vi-logbox",children:qt.length?qt.slice(-80).map((E,B)=>{const qe=`${new Date(E.ts).toLocaleString("es-PE",{timeZone:ah,hour12:!1})} | ${E.source} | ${E.type}${E.stage?` | ${E.stage}`:""}${E.oi?` | oi=${E.oi}`:""}${typeof E.progress=="number"?` | ${Math.round(E.progress)}%`:""}${E.message?` | ${E.message}`:""}`;return l.jsx("div",{className:`vi-logline ${String(E?.type||"").toLowerCase()==="file_retry"?"text-warning":""}`,children:qe},`le-${B}`)}):l.jsx("div",{className:"small text-muted",children:"Sin eventos an."})})]})})]})}),zt.length?l.jsxs("div",{className:"alert alert-danger mT-10",role:"alert",children:[l.jsx("strong",{children:"Se detectaron errores:"}),l.jsx("ul",{className:"mB-0 mT-5",children:zt.slice(-8).map((E,B)=>l.jsxs("li",{children:[E.oi?`[${E.oi}] `:"",E.file?`${E.file}: `:"",E.message]},`ce-${B}`))})]}):null,$e.length?l.jsxs("div",{className:"alert alert-warning mT-10",role:"alert",children:[l.jsx("strong",{children:"Advertencias:"}),l.jsx("ul",{className:"mB-0 mT-5",children:$e.slice(-8).map((E,B)=>l.jsxs("li",{children:["[",E.oi,"] ",E.code?`${E.code}: `:"",E.message]},`cw-${B}`))})]}):null,Ie?l.jsxs("div",{className:"mT-15",children:[l.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-10 mB-10",children:[l.jsx("h6",{className:"c-grey-900 mB-0",children:"Auditora de copiado"}),l.jsxs("div",{className:"d-flex gap-5",children:[l.jsx("button",{className:"btn btn-sm btn-outline-light",disabled:Lo||!we,onClick:()=>qo("csv"),children:"Descargar CSV"}),l.jsx("button",{className:"btn btn-sm btn-outline-light",disabled:Lo||!we,onClick:()=>qo("xlsx"),children:"Descargar Excel"})]})]}),l.jsxs("div",{className:"row g-2",children:[l.jsx("div",{className:"col-12 col-md-4",children:l.jsxs("div",{className:"alert alert-light mB-0",children:[l.jsxs("div",{children:[l.jsx("strong",{children:"Total OIs:"})," ",Ie?.total_ois??"N/D"]}),l.jsxs("div",{children:[l.jsx("strong",{children:"OIs OK:"})," ",Ie?.ois_ok??"N/D"]})]})}),l.jsx("div",{className:"col-12 col-md-8",children:l.jsx("div",{className:"alert alert-light mB-0",children:l.jsxs("div",{className:"d-flex flex-wrap gap-10",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"PDF detectados:"})," ",Ie?.archivos?.pdf_detectados??"N/D"]}),l.jsxs("span",{children:[l.jsx("strong",{children:"PDF copiados:"})," ",Ie?.archivos?.pdf_copiados??"N/D"]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Omitidos NO CONFORME:"})," ",Ie?.archivos?.pdf_omitidos_no_conforme??"N/D"]}),l.jsxs("span",{children:[l.jsx("strong",{children:"No PDF omitidos:"})," ",Ie?.archivos?.archivos_no_pdf_omitidos??"N/D"]})]})})})]}),Ie?.ois_faltantes?.length||Ie?.ois_duplicadas?.length||Ie?.destinos_duplicados?.length||Ie?.series_duplicadas?.length||Ie?.series_faltantes?.length?l.jsxs("div",{className:"mT-10",children:[Ie?.ois_faltantes?.length?l.jsxs("div",{className:"alert alert-warning",role:"alert",children:[l.jsx("strong",{children:"OIs sin carpeta:"}),l.jsx("ul",{className:"mB-0 mT-5",children:Ie.ois_faltantes.slice(0,10).map((E,B)=>l.jsxs("li",{children:[E?.oi,"  ",E?.detalle||""]},`of-${B}`))})]}):null,Ie?.ois_duplicadas?.length?l.jsxs("div",{className:"alert alert-warning",role:"alert",children:[l.jsx("strong",{children:"OIs con mltiples carpetas (duplicadas):"}),l.jsx("ul",{className:"mB-0 mT-5",children:Ie.ois_duplicadas.slice(0,10).map((E,B)=>l.jsxs("li",{children:[E?.oi,"  ",Array.isArray(E?.carpetas)?E.carpetas.join(" | "):""]},`od-${B}`))})]}):null,Ie?.destinos_duplicados?.length?l.jsxs("div",{className:"alert alert-warning",role:"alert",children:[l.jsx("strong",{children:"Destinos ya existentes:"}),l.jsx("ul",{className:"mB-0 mT-5",children:Ie.destinos_duplicados.slice(0,10).map((E,B)=>l.jsxs("li",{children:[E?.oi,"  ",E?.destino||""]},`dd-${B}`))})]}):null,Ie?.series_duplicadas?.length?l.jsxs("div",{className:"alert alert-warning",role:"alert",children:[l.jsx("strong",{children:"Series duplicadas (mismo nombre de PDF):"}),l.jsx("ul",{className:"mB-0 mT-5",children:Ie.series_duplicadas.slice(0,12).map((E,B)=>l.jsxs("li",{children:[l.jsx("strong",{children:E?.oi}),"  ",E?.serie," (",Array.isArray(E?.files)?E.files.length:0," archivo(s))"]},`sd-${B}`))}),Ie.series_duplicadas.length>12?l.jsxs("div",{className:"small text-muted mT-5",children:["Mostrando 12 de ",Ie.series_duplicadas.length,". Revisa el audit JSON para el detalle completo."]}):null]}):null,Ie?.series_faltantes?.length?l.jsxs("div",{className:"alert alert-warning",role:"alert",children:[l.jsx("strong",{children:"Series faltantes (conforme en manifiesto, sin PDF):"}),l.jsx("ul",{className:"mB-0 mT-5",children:Ie.series_faltantes.slice(0,12).map((E,B)=>l.jsxs("li",{children:[l.jsx("strong",{children:E?.oi}),"  ",E?.count," faltante(s)"]},`sf-${B}`))}),Ie.series_faltantes.length>12?l.jsxs("div",{className:"small text-muted mT-5",children:["Mostrando 12 de ",Ie.series_faltantes.length,". Revisa el audit JSON para el detalle completo."]}):null]}):null]}):null]}):null]}):l.jsx("div",{className:"vi-callout small",children:"Valida rutas y selecciona una corrida para habilitar la ejecucin."})})})]})]})]}),ue?l.jsx("div",{className:"vi-sticky-actions",children:l.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-10 vi-sticky-actions-row",children:[l.jsxs("div",{className:"small vi-sticky-progress",children:[l.jsx("strong",{children:S?Lr(S):"En progreso"}),G?l.jsxs("span",{children:["  OI: ",G]}):null,l.jsxs("span",{className:"text-muted",children:["  ",O.toFixed(0),"%"]})]}),l.jsxs("div",{className:"d-flex gap-10 vi-sticky-buttons",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>void At(),disabled:!we,children:"Cancelar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>Fa(!0),children:"Ver detalle"})]})]})}):null]})}),ve?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:l.jsx("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",role:"document",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{className:"modal-title",children:"Seleccionar corrida de LOG-01 (Historial)"}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>_e(!1)})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"vi-card mB-10",children:[l.jsx("div",{className:"d-flex align-items-center justify-content-between mB-10",children:l.jsx("div",{className:"small text-muted",children:"Filtros"})}),l.jsxs("div",{className:"text-muted small mB-10",children:["Por defecto se cargan las ",l.jsx("strong",{children:"ltimas 5 corridas completadas"}),". Puedes usar filtros si lo necesitas."]}),U?l.jsx("div",{className:"alert alert-danger",role:"alert",children:U}):null,l.jsxs("form",{className:"row g-2 align-items-end",onSubmit:E=>{E.preventDefault(),Rr()},children:[l.jsxs("div",{className:"col-12 col-md-4",children:[l.jsx("label",{className:"form-label",children:"Buscar"}),l.jsx("input",{className:"form-control form-control-sm",value:Se,onChange:E=>Le(E.target.value),placeholder:"Serie / OI / usuario..."})]}),l.jsxs("div",{className:"col-6 col-md-2",children:[l.jsx("label",{className:"form-label",children:"Desde"}),l.jsx("input",{className:"form-control form-control-sm",type:"date",value:Ze,onChange:E=>pe(E.target.value)})]}),l.jsxs("div",{className:"col-6 col-md-2",children:[l.jsx("label",{className:"form-label",children:"Hasta"}),l.jsx("input",{className:"form-control form-control-sm",type:"date",value:Be,onChange:E=>Ge(E.target.value)})]}),l.jsxs("div",{className:"col-6 col-md-2",children:[l.jsx("label",{className:"form-label",children:"Origen"}),l.jsx("input",{className:"form-control form-control-sm",value:Je,onChange:E=>ot(E.target.value),placeholder:"AUTO/BASES/..."})]}),l.jsxs("div",{className:"col-6 col-md-2",children:[l.jsx("label",{className:"form-label",children:"Estado"}),l.jsx("input",{className:"form-control form-control-sm",value:ze,onChange:E=>Qe(E.target.value),placeholder:"COMPLETADO"})]}),l.jsxs("div",{className:"col-12 d-flex align-items-center justify-content-between",children:[l.jsx("div",{className:"btn-group",role:"group","aria-label":"Acciones filtros",children:l.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:ke,children:ke?l.jsxs("span",{className:"d-flex align-items-center gap-10",children:[l.jsx("img",{src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Cargando",style:{width:18,height:18}}),"Buscando..."]}):"Aplicar filtros"})}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>{Le(""),pe(""),Ge(""),ot(""),Qe("COMPLETADO"),bs(5)},disabled:ke,children:ke?l.jsxs("span",{className:"d-flex align-items-center gap-10",children:[l.jsx("img",{src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Cargando",style:{width:18,height:18}}),"Cargando..."]}):"Ver ltimas 5 exitosas"})]})]})]}),l.jsxs("div",{className:"vi-card",children:[l.jsxs("div",{className:"d-flex align-items-center justify-content-between mB-10",children:[l.jsx("div",{className:"small text-muted",children:"Resultados"}),l.jsx("div",{className:"small text-muted",children:X?"Actualizando...":`${ae.length} corrida(s)`})]}),X?l.jsxs("div",{className:"d-flex align-items-center gap-10 text-muted small",children:[l.jsx("img",{src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Cargando",style:{width:28,height:28}}),l.jsx("span",{children:"Cargando corridas..."})]}):l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0 text-center",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{width:110},children:"ID"}),l.jsx("th",{children:"Creado"}),l.jsx("th",{style:{width:140},children:"Origen"}),l.jsx("th",{style:{width:140},children:"Serie inicial"}),l.jsx("th",{style:{width:140},children:"Serie final"}),l.jsx("th",{style:{width:110},children:"Conformes"}),l.jsx("th",{style:{width:150},children:"Estado"}),l.jsx("th",{style:{width:110},className:"text-end"})]})}),l.jsx("tbody",{children:ae.length?ae.map(E=>l.jsx("tr",{className:"small",children:(()=>{const B=E.summary_json,ie=lx(B,"serie_ini"),de=lx(B,"serie_fin"),qe=xD(B,"series_conformes");return l.jsxs(l.Fragment,{children:[l.jsx("td",{children:l.jsxs("span",{className:"badge bg-secondary font-monospace",children:["#",E.id]})}),l.jsx("td",{children:rx(E.created_at)}),l.jsx("td",{children:E.source||"N/D"}),l.jsx("td",{children:ie}),l.jsx("td",{children:de}),l.jsx("td",{children:l.jsx("strong",{children:qe})}),l.jsx("td",{children:l.jsx("span",{className:gD(E.status),children:E.status||"N/D"})}),l.jsx("td",{className:"text-end",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>Tr(E),children:"Usar"})})]})})()},E.id)):l.jsx("tr",{className:"small",children:l.jsx("td",{colSpan:8,className:"text-muted",children:"No se encontraron corridas con esos filtros."})})})]})})]})]}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>_e(!1),children:"Cerrar"})})]})})}),l.jsx("div",{className:"modal-backdrop fade show",onClick:()=>_e(!1)})]}):null,Ke?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:l.jsx("div",{className:"modal-dialog modal-lg",role:"document",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{className:"modal-title",children:Lt==="destino"?"Elegir carpeta de destino":"Elegir carpeta de origen"}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>Ut(!1)})]}),l.jsxs("div",{className:"modal-body",children:[jn?l.jsx("div",{className:"alert alert-danger",role:"alert",children:jn}):null,l.jsxs("div",{className:"row g-2",children:[l.jsxs("div",{className:"col-12 col-md-6",children:[l.jsx("label",{className:"form-label",children:"Raz"}),l.jsx("select",{className:"form-control form-control-sm",value:Gt,onChange:E=>{const B=E.target.value;hn(B),pa(B)},disabled:!dt.length,children:dt.length?dt.map(E=>l.jsx("option",{value:E,children:E},E)):l.jsx("option",{value:"",children:"Sin races"})})]}),l.jsxs("div",{className:"col-12 col-md-6",children:[l.jsx("label",{className:"form-label",children:"Carpeta actual"}),l.jsx("input",{className:"form-control form-control-sm",value:Pt,readOnly:!0})]})]}),l.jsxs("div",{className:"mT-10",children:[l.jsx("label",{className:"form-label mB-5",children:"Navegacin"}),l.jsxs("div",{className:"p-10 vi-surface-2 border vi-border rounded",children:[l.jsx("div",{className:"d-flex flex-wrap align-items-center gap-10",children:yl(Pt).map((E,B,ie)=>l.jsxs("span",{className:"small d-inline-flex align-items-center",children:[l.jsx("button",{type:"button",className:"btn btn-link p-0 align-baseline",onClick:()=>void pa(E.path),disabled:Mt,title:`Ir a: ${E.path}`,children:E.label}),B<ie.length-1?l.jsx("span",{className:"text-muted mX-5",children:"/"}):null]},`${E.path}-${B}`))}),l.jsx("div",{className:"small vi-text-muted mT-5",children:"Tip: Click en una seccin para saltar a esa carpeta."})]})]}),l.jsxs("div",{className:"row g-2 mT-10",children:[l.jsxs("div",{className:"col-12 col-md-8",children:[l.jsx("label",{className:"form-label",children:"Ir a ruta"}),l.jsxs("div",{className:"input-group input-group-sm",children:[l.jsx("input",{className:"form-control",value:pn,onChange:E=>Gn(E.target.value),onKeyDown:E=>{E.key==="Enter"&&(E.preventDefault(),Ys())},placeholder:"Pega una ruta (UNC o local) dentro de las races permitidas",disabled:Mt}),l.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>void Ys(),disabled:Mt||!pn.trim(),children:"Ir"})]})]}),l.jsxs("div",{className:"col-12 col-md-4",children:[l.jsx("label",{className:"form-label",children:"Acciones"}),l.jsx("div",{className:"d-flex align-items-end",style:{minHeight:31},children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void xi(),disabled:!Pt||Mt,title:"Copiar la ruta actual al portapapeles",children:"Copiar ruta"})})]})]}),l.jsxs("div",{className:"d-flex gap-10 mT-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:Ni,disabled:!Pt||Mt,children:"Subir nivel"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:Ta,disabled:!Pt||Mt,children:"Seleccionar carpeta"})]}),l.jsx("hr",{}),l.jsx("div",{className:"row g-2 mB-10",children:l.jsxs("div",{className:"col-12 col-md-8",children:[l.jsx("label",{className:"form-label",children:"Buscar subcarpeta"}),l.jsx("input",{className:"form-control form-control-sm",value:gs,onChange:E=>ha(E.target.value),placeholder:"Filtrar por nombre",disabled:Mt}),l.jsxs("div",{className:"form-text",children:["Mostrando ",Qt.length," de ",an.length]})]})}),Mt?l.jsx("div",{className:"text-muted small",children:"Cargando carpetas..."}):l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{children:"Subcarpetas"}),l.jsx("th",{style:{width:120}})]})}),l.jsx("tbody",{children:Qt.length?Qt.map((E,B)=>l.jsxs("tr",{className:"small"+(Jt===E.path?" table-active":""),role:"button",tabIndex:0,"data-folder-idx":B,title:"Click para seleccionar  Doble click para entrar",style:{cursor:Mt?"default":"pointer"},onClick:ie=>{Mt||(wt(E.path),ie.currentTarget.focus())},onDoubleClick:()=>{Mt||pa(E.path)},onKeyDown:ie=>{if(!Mt){if(ie.key==="Enter"){ie.preventDefault(),pa(E.path);return}if(ie.key===" "||ie.key==="Spacebar"){ie.preventDefault(),wt(E.path);return}}},children:[l.jsx("td",{style:{wordBreak:"break-all"},children:E.name}),l.jsx("td",{children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:ie=>{ie.stopPropagation(),pa(E.path)},disabled:Mt,children:"Entrar"})})]},E.path)):l.jsx("tr",{className:"small",children:l.jsx("td",{colSpan:2,className:"text-muted",children:"Sin resultados para el filtro, o sin subcarpetas/permisos para listar."})})})]})})]}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>Ut(!1),children:"Cerrar"})})]})})}),l.jsx("div",{className:"modal-backdrop fade show",onClick:()=>Ut(!1)})]}):null]})}function SD(){const e=Hn();return l.jsx(l.Fragment,{children:l.jsxs(nw,{children:[l.jsx(fn,{path:"/login",element:e?.token?l.jsx(Sr,{to:"/home",replace:!0}):l.jsx(PE,{})}),l.jsx(fn,{element:l.jsx(BT,{}),children:l.jsxs(fn,{element:l.jsx(HT,{}),children:[l.jsx(fn,{path:"/",element:l.jsx(Sr,{to:"/home",replace:!0})}),l.jsx(fn,{path:"/home",element:l.jsx(aD,{})}),l.jsx(fn,{path:"/oi",element:l.jsx(Qy,{})}),l.jsx(fn,{path:"/oi/:oiId",element:l.jsx(Qy,{})}),l.jsx(fn,{path:"/oi/list",element:l.jsx(VT,{})}),l.jsx(fn,{path:"/users",element:l.jsx(GT,{})}),l.jsx(fn,{path:"/password",element:l.jsx(PT,{})}),l.jsx(fn,{path:"/admin/permisos",element:l.jsx(KT,{})}),l.jsx(fn,{path:"/logistica/log01/excel",element:l.jsx(iD,{})}),l.jsx(fn,{path:"/logistica/log01/history",element:l.jsx(pD,{})}),l.jsx(fn,{path:"/logistica/log02/pdfs",element:l.jsx(jD,{})}),l.jsx(fn,{path:"/oi/tools/vima-to-lista",element:l.jsx(o2,{})}),l.jsx(fn,{path:"/oi/tools/actualizacion-base",element:l.jsx(q2,{})}),l.jsx(fn,{path:"/oi/tools/formato-ac/history",element:l.jsx(G2,{})}),l.jsx(fn,{path:"/oi/tools/consolidacion",element:l.jsx(P2,{})}),l.jsx(fn,{path:"/oi/tools/consolidacion/correlativo",element:l.jsx(X2,{})}),l.jsx(fn,{path:"/oi/tools/consolidacion/no-correlativo",element:l.jsx(tD,{})}),l.jsx(fn,{path:"/oi/tools/excel",element:l.jsx(nD,{})})]})}),l.jsx(fn,{path:"*",element:l.jsx(Sr,{to:e?.token?"/home":"/login",replace:!0})})]})})}const wD=new a_;VE();cS.createRoot(document.getElementById("root")).render(l.jsx(pt.StrictMode,{children:l.jsx(s_,{client:wD,children:l.jsx(Ew,{children:l.jsx(FE,{children:l.jsx(SD,{})})})})}));
