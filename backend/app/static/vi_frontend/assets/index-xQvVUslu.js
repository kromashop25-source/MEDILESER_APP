(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(c){if(c.ep)return;c.ep=!0;const d=s(c);fetch(c.href,d)}})();function Xy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Df={exports:{}},Wi={};var av;function Xj(){if(av)return Wi;av=1;var e=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function s(i,c,d){var f=null;if(d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),"key"in c){d={};for(var h in c)h!=="key"&&(d[h]=c[h])}else d=c;return c=d.ref,{$$typeof:e,type:i,key:f,ref:c!==void 0?c:null,props:d}}return Wi.Fragment=a,Wi.jsx=s,Wi.jsxs=s,Wi}var sv;function Jj(){return sv||(sv=1,Df.exports=Xj()),Df.exports}var l=Jj(),zf={exports:{}},ct={};var rv;function Wj(){if(rv)return ct;rv=1;var e=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),j=Symbol.iterator;function F(_){return _===null||typeof _!="object"?null:(_=j&&_[j]||_["@@iterator"],typeof _=="function"?_:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,T={};function q(_,K,ue){this.props=_,this.context=K,this.refs=T,this.updater=ue||E}q.prototype.isReactComponent={},q.prototype.setState=function(_,K){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,K,"setState")},q.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function A(){}A.prototype=q.prototype;function te(_,K,ue){this.props=_,this.context=K,this.refs=T,this.updater=ue||E}var U=te.prototype=new A;U.constructor=te,C(U,q.prototype),U.isPureReactComponent=!0;var D=Array.isArray;function P(){}var B={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function fe(_,K,ue){var Q=ue.ref;return{$$typeof:e,type:_,key:K,ref:Q!==void 0?Q:null,props:ue}}function De(_,K){return fe(_.type,K,_.props)}function _e(_){return typeof _=="object"&&_!==null&&_.$$typeof===e}function be(_){var K={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(ue){return K[ue]})}var we=/\/+/g;function Ce(_,K){return typeof _=="object"&&_!==null&&_.key!=null?be(""+_.key):K.toString(36)}function Ue(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(P,P):(_.status="pending",_.then(function(K){_.status==="pending"&&(_.status="fulfilled",_.value=K)},function(K){_.status==="pending"&&(_.status="rejected",_.reason=K)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function M(_,K,ue,Q,Ee){var Ne=typeof _;(Ne==="undefined"||Ne==="boolean")&&(_=null);var Be=!1;if(_===null)Be=!0;else switch(Ne){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(_.$$typeof){case e:case a:Be=!0;break;case y:return Be=_._init,M(Be(_._payload),K,ue,Q,Ee)}}if(Be)return Ee=Ee(_),Be=Q===""?"."+Ce(_,0):Q,D(Ee)?(ue="",Be!=null&&(ue=Be.replace(we,"$&/")+"/"),M(Ee,K,ue,"",function(Me){return Me})):Ee!=null&&(_e(Ee)&&(Ee=De(Ee,ue+(Ee.key==null||_&&_.key===Ee.key?"":(""+Ee.key).replace(we,"$&/")+"/")+Be)),K.push(Ee)),1;Be=0;var Ze=Q===""?".":Q+":";if(D(_))for(var he=0;he<_.length;he++)Q=_[he],Ne=Ze+Ce(Q,he),Be+=M(Q,K,ue,Ne,Ee);else if(he=F(_),typeof he=="function")for(_=he.call(_),he=0;!(Q=_.next()).done;)Q=Q.value,Ne=Ze+Ce(Q,he++),Be+=M(Q,K,ue,Ne,Ee);else if(Ne==="object"){if(typeof _.then=="function")return M(Ue(_),K,ue,Q,Ee);throw K=String(_),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Be}function V(_,K,ue){if(_==null)return _;var Q=[],Ee=0;return M(_,Q,"","",function(Ne){return K.call(ue,Ne,Ee++)}),Q}function ae(_){if(_._status===-1){var K=_._result;K=K(),K.then(function(ue){(_._status===0||_._status===-1)&&(_._status=1,_._result=ue)},function(ue){(_._status===0||_._status===-1)&&(_._status=2,_._result=ue)}),_._status===-1&&(_._status=0,_._result=K)}if(_._status===1)return _._result.default;throw _._result}var ce=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},Re={map:V,forEach:function(_,K,ue){V(_,function(){K.apply(this,arguments)},ue)},count:function(_){var K=0;return V(_,function(){K++}),K},toArray:function(_){return V(_,function(K){return K})||[]},only:function(_){if(!_e(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return ct.Activity=x,ct.Children=Re,ct.Component=q,ct.Fragment=s,ct.Profiler=c,ct.PureComponent=te,ct.StrictMode=i,ct.Suspense=v,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,ct.__COMPILER_RUNTIME={__proto__:null,c:function(_){return B.H.useMemoCache(_)}},ct.cache=function(_){return function(){return _.apply(null,arguments)}},ct.cacheSignal=function(){return null},ct.cloneElement=function(_,K,ue){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var Q=C({},_.props),Ee=_.key;if(K!=null)for(Ne in K.key!==void 0&&(Ee=""+K.key),K)!W.call(K,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&K.ref===void 0||(Q[Ne]=K[Ne]);var Ne=arguments.length-2;if(Ne===1)Q.children=ue;else if(1<Ne){for(var Be=Array(Ne),Ze=0;Ze<Ne;Ze++)Be[Ze]=arguments[Ze+2];Q.children=Be}return fe(_.type,Ee,Q)},ct.createContext=function(_){return _={$$typeof:f,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:d,_context:_},_},ct.createElement=function(_,K,ue){var Q,Ee={},Ne=null;if(K!=null)for(Q in K.key!==void 0&&(Ne=""+K.key),K)W.call(K,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(Ee[Q]=K[Q]);var Be=arguments.length-2;if(Be===1)Ee.children=ue;else if(1<Be){for(var Ze=Array(Be),he=0;he<Be;he++)Ze[he]=arguments[he+2];Ee.children=Ze}if(_&&_.defaultProps)for(Q in Be=_.defaultProps,Be)Ee[Q]===void 0&&(Ee[Q]=Be[Q]);return fe(_,Ne,Ee)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(_){return{$$typeof:h,render:_}},ct.isValidElement=_e,ct.lazy=function(_){return{$$typeof:y,_payload:{_status:-1,_result:_},_init:ae}},ct.memo=function(_,K){return{$$typeof:p,type:_,compare:K===void 0?null:K}},ct.startTransition=function(_){var K=B.T,ue={};B.T=ue;try{var Q=_(),Ee=B.S;Ee!==null&&Ee(ue,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(P,ce)}catch(Ne){ce(Ne)}finally{K!==null&&ue.types!==null&&(K.types=ue.types),B.T=K}},ct.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},ct.use=function(_){return B.H.use(_)},ct.useActionState=function(_,K,ue){return B.H.useActionState(_,K,ue)},ct.useCallback=function(_,K){return B.H.useCallback(_,K)},ct.useContext=function(_){return B.H.useContext(_)},ct.useDebugValue=function(){},ct.useDeferredValue=function(_,K){return B.H.useDeferredValue(_,K)},ct.useEffect=function(_,K){return B.H.useEffect(_,K)},ct.useEffectEvent=function(_){return B.H.useEffectEvent(_)},ct.useId=function(){return B.H.useId()},ct.useImperativeHandle=function(_,K,ue){return B.H.useImperativeHandle(_,K,ue)},ct.useInsertionEffect=function(_,K){return B.H.useInsertionEffect(_,K)},ct.useLayoutEffect=function(_,K){return B.H.useLayoutEffect(_,K)},ct.useMemo=function(_,K){return B.H.useMemo(_,K)},ct.useOptimistic=function(_,K){return B.H.useOptimistic(_,K)},ct.useReducer=function(_,K,ue){return B.H.useReducer(_,K,ue)},ct.useRef=function(_){return B.H.useRef(_)},ct.useState=function(_){return B.H.useState(_)},ct.useSyncExternalStore=function(_,K,ue){return B.H.useSyncExternalStore(_,K,ue)},ct.useTransition=function(){return B.H.useTransition()},ct.version="19.2.0",ct}var lv;function Pm(){return lv||(lv=1,zf.exports=Wj()),zf.exports}var g=Pm();const gt=Xy(g);var kf={exports:{}},eo={},Mf={exports:{}},Uf={};var iv;function eS(){return iv||(iv=1,(function(e){function a(M,V){var ae=M.length;M.push(V);e:for(;0<ae;){var ce=ae-1>>>1,Re=M[ce];if(0<c(Re,V))M[ce]=V,M[ae]=Re,ae=ce;else break e}}function s(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var V=M[0],ae=M.pop();if(ae!==V){M[0]=ae;e:for(var ce=0,Re=M.length,_=Re>>>1;ce<_;){var K=2*(ce+1)-1,ue=M[K],Q=K+1,Ee=M[Q];if(0>c(ue,ae))Q<Re&&0>c(Ee,ue)?(M[ce]=Ee,M[Q]=ae,ce=Q):(M[ce]=ue,M[K]=ae,ce=K);else if(Q<Re&&0>c(Ee,ae))M[ce]=Ee,M[Q]=ae,ce=Q;else break e}}return V}function c(M,V){var ae=M.sortIndex-V.sortIndex;return ae!==0?ae:M.id-V.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var f=Date,h=f.now();e.unstable_now=function(){return f.now()-h}}var v=[],p=[],y=1,x=null,j=3,F=!1,E=!1,C=!1,T=!1,q=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function U(M){for(var V=s(p);V!==null;){if(V.callback===null)i(p);else if(V.startTime<=M)i(p),V.sortIndex=V.expirationTime,a(v,V);else break;V=s(p)}}function D(M){if(C=!1,U(M),!E)if(s(v)!==null)E=!0,P||(P=!0,be());else{var V=s(p);V!==null&&Ue(D,V.startTime-M)}}var P=!1,B=-1,W=5,fe=-1;function De(){return T?!0:!(e.unstable_now()-fe<W)}function _e(){if(T=!1,P){var M=e.unstable_now();fe=M;var V=!0;try{e:{E=!1,C&&(C=!1,A(B),B=-1),F=!0;var ae=j;try{t:{for(U(M),x=s(v);x!==null&&!(x.expirationTime>M&&De());){var ce=x.callback;if(typeof ce=="function"){x.callback=null,j=x.priorityLevel;var Re=ce(x.expirationTime<=M);if(M=e.unstable_now(),typeof Re=="function"){x.callback=Re,U(M),V=!0;break t}x===s(v)&&i(v),U(M)}else i(v);x=s(v)}if(x!==null)V=!0;else{var _=s(p);_!==null&&Ue(D,_.startTime-M),V=!1}}break e}finally{x=null,j=ae,F=!1}V=void 0}}finally{V?be():P=!1}}}var be;if(typeof te=="function")be=function(){te(_e)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Ce=we.port2;we.port1.onmessage=_e,be=function(){Ce.postMessage(null)}}else be=function(){q(_e,0)};function Ue(M,V){B=q(function(){M(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return j},e.unstable_next=function(M){switch(j){case 1:case 2:case 3:var V=3;break;default:V=j}var ae=j;j=V;try{return M()}finally{j=ae}},e.unstable_requestPaint=function(){T=!0},e.unstable_runWithPriority=function(M,V){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ae=j;j=M;try{return V()}finally{j=ae}},e.unstable_scheduleCallback=function(M,V,ae){var ce=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ce+ae:ce):ae=ce,M){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=ae+Re,M={id:y++,callback:V,priorityLevel:M,startTime:ae,expirationTime:Re,sortIndex:-1},ae>ce?(M.sortIndex=ae,a(p,M),s(v)===null&&M===s(p)&&(C?(A(B),B=-1):C=!0,Ue(D,ae-ce))):(M.sortIndex=Re,a(v,M),E||F||(E=!0,P||(P=!0,be()))),M},e.unstable_shouldYield=De,e.unstable_wrapCallback=function(M){var V=j;return function(){var ae=j;j=V;try{return M.apply(this,arguments)}finally{j=ae}}}})(Uf)),Uf}var ov;function tS(){return ov||(ov=1,Mf.exports=eS()),Mf.exports}var Lf={exports:{}},ea={};var cv;function nS(){if(cv)return ea;cv=1;var e=Pm();function a(v){var p="https://react.dev/errors/"+v;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+v+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(v,p,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:x==null?null:""+x,children:v,containerInfo:p,implementation:y}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(v,p){if(v==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ea.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ea.createPortal=function(v,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return d(v,p,null,y)},ea.flushSync=function(v){var p=f.T,y=i.p;try{if(f.T=null,i.p=2,v)return v()}finally{f.T=p,i.p=y,i.d.f()}},ea.preconnect=function(v,p){typeof v=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(v,p))},ea.prefetchDNS=function(v){typeof v=="string"&&i.d.D(v)},ea.preinit=function(v,p){if(typeof v=="string"&&p&&typeof p.as=="string"){var y=p.as,x=h(y,p.crossOrigin),j=typeof p.integrity=="string"?p.integrity:void 0,F=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(v,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:j,fetchPriority:F}):y==="script"&&i.d.X(v,{crossOrigin:x,integrity:j,fetchPriority:F,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ea.preinitModule=function(v,p){if(typeof v=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);i.d.M(v,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(v)},ea.preload=function(v,p){if(typeof v=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,x=h(y,p.crossOrigin);i.d.L(v,y,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ea.preloadModule=function(v,p){if(typeof v=="string")if(p){var y=h(p.as,p.crossOrigin);i.d.m(v,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(v)},ea.requestFormReset=function(v){i.d.r(v)},ea.unstable_batchedUpdates=function(v,p){return v(p)},ea.useFormState=function(v,p,y){return f.H.useFormState(v,p,y)},ea.useFormStatus=function(){return f.H.useHostTransitionStatus()},ea.version="19.2.0",ea}var uv;function aS(){if(uv)return Lf.exports;uv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(a){console.error(a)}}return e(),Lf.exports=nS(),Lf.exports}var dv;function sS(){if(dv)return eo;dv=1;var e=tS(),a=Pm(),s=aS();function i(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function h(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function v(t){if(d(t)!==t)throw Error(i(188))}function p(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(i(188));return n!==t?null:t}for(var r=t,o=n;;){var u=r.return;if(u===null)break;var m=u.alternate;if(m===null){if(o=u.return,o!==null){r=o;continue}break}if(u.child===m.child){for(m=u.child;m;){if(m===r)return v(u),t;if(m===o)return v(u),n;m=m.sibling}throw Error(i(188))}if(r.return!==o.return)r=u,o=m;else{for(var b=!1,N=u.child;N;){if(N===r){b=!0,r=u,o=m;break}if(N===o){b=!0,o=u,r=m;break}N=N.sibling}if(!b){for(N=m.child;N;){if(N===r){b=!0,r=m,o=u;break}if(N===o){b=!0,o=m,r=u;break}N=N.sibling}if(!b)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?t:n}function y(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=y(t),n!==null)return n;t=t.sibling}return null}var x=Object.assign,j=Symbol.for("react.element"),F=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),te=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),fe=Symbol.for("react.activity"),De=Symbol.for("react.memo_cache_sentinel"),_e=Symbol.iterator;function be(t){return t===null||typeof t!="object"?null:(t=_e&&t[_e]||t["@@iterator"],typeof t=="function"?t:null)}var we=Symbol.for("react.client.reference");function Ce(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===we?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case q:return"Profiler";case T:return"StrictMode";case D:return"Suspense";case P:return"SuspenseList";case fe:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case E:return"Portal";case te:return t.displayName||"Context";case A:return(t._context.displayName||"Context")+".Consumer";case U:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case B:return n=t.displayName||null,n!==null?n:Ce(t.type)||"Memo";case W:n=t._payload,t=t._init;try{return Ce(t(n))}catch{}}return null}var Ue=Array.isArray,M=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},ce=[],Re=-1;function _(t){return{current:t}}function K(t){0>Re||(t.current=ce[Re],ce[Re]=null,Re--)}function ue(t,n){Re++,ce[Re]=t.current,t.current=n}var Q=_(null),Ee=_(null),Ne=_(null),Be=_(null);function Ze(t,n){switch(ue(Ne,n),ue(Ee,t),ue(Q,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Eb(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Eb(n),t=Ab(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}K(Q),ue(Q,t)}function he(){K(Q),K(Ee),K(Ne)}function Me(t){t.memoizedState!==null&&ue(Be,t);var n=Q.current,r=Ab(n,t.type);n!==r&&(ue(Ee,t),ue(Q,r))}function Fe(t){Ee.current===t&&(K(Q),K(Ee)),Be.current===t&&(K(Be),Yi._currentValue=ae)}var Qe,lt;function ze(t){if(Qe===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Qe=n&&n[1]||"",lt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+t+lt}var Ge=!1;function me(t,n){if(!t||Ge)return"";Ge=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(oe){var re=oe}Reflect.construct(t,[],Se)}else{try{Se.call()}catch(oe){re=oe}t.call(Se.prototype)}}else{try{throw Error()}catch(oe){re=oe}(Se=t())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(oe){if(oe&&re&&typeof oe.stack=="string")return[oe.stack,re.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),b=m[0],N=m[1];if(b&&N){var k=b.split(`
`),ne=N.split(`
`);for(u=o=0;o<k.length&&!k[o].includes("DetermineComponentFrameRoot");)o++;for(;u<ne.length&&!ne[u].includes("DetermineComponentFrameRoot");)u++;if(o===k.length||u===ne.length)for(o=k.length-1,u=ne.length-1;1<=o&&0<=u&&k[o]!==ne[u];)u--;for(;1<=o&&0<=u;o--,u--)if(k[o]!==ne[u]){if(o!==1||u!==1)do if(o--,u--,0>u||k[o]!==ne[u]){var pe=`
`+k[o].replace(" at new "," at ");return t.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",t.displayName)),pe}while(1<=o&&0<=u);break}}}finally{Ge=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?ze(r):""}function Ie(t,n){switch(t.tag){case 26:case 27:case 5:return ze(t.type);case 16:return ze("Lazy");case 13:return t.child!==n&&n!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return me(t.type,!1);case 11:return me(t.type.render,!1);case 1:return me(t.type,!0);case 31:return ze("Activity");default:return""}}function Ae(t){try{var n="",r=null;do n+=Ie(t,r),r=t,t=t.return;while(t);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Xe=Object.prototype.hasOwnProperty,R=e.unstable_scheduleCallback,z=e.unstable_cancelCallback,S=e.unstable_shouldYield,L=e.unstable_requestPaint,$=e.unstable_now,X=e.unstable_getCurrentPriorityLevel,le=e.unstable_ImmediatePriority,je=e.unstable_UserBlockingPriority,Z=e.unstable_NormalPriority,ke=e.unstable_LowPriority,qe=e.unstable_IdlePriority,We=e.log,Mt=e.unstable_setDisableYieldValue,ye=null,et=null;function Ut(t){if(typeof We=="function"&&Mt(t),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(ye,t)}catch{}}var _t=Math.clz32?Math.clz32:aa,pn=Math.log,An=Math.LN2;function aa(t){return t>>>=0,t===0?32:31-(pn(t)/An|0)|0}var In=256,it=262144,Xn=4194304;function dn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Vn(t,n,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var N=o&134217727;return N!==0?(o=N&~m,o!==0?u=dn(o):(b&=N,b!==0?u=dn(b):r||(r=N&~t,r!==0&&(u=dn(r))))):(N=o&~m,N!==0?u=dn(N):b!==0?u=dn(b):r||(r=o&~t,r!==0&&(u=dn(r)))),u===0?0:n!==0&&n!==u&&(n&m)===0&&(m=u&-u,r=n&-n,m>=r||m===32&&(r&4194048)!==0)?n:u}function Nn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Zn(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J(){var t=Xn;return Xn<<=1,(Xn&62914560)===0&&(Xn=4194304),t}function se(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function Te(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function He(t,n,r,o,u,m){var b=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var N=t.entanglements,k=t.expirationTimes,ne=t.hiddenUpdates;for(r=b&~r;0<r;){var pe=31-_t(r),Se=1<<pe;N[pe]=0,k[pe]=-1;var re=ne[pe];if(re!==null)for(ne[pe]=null,pe=0;pe<re.length;pe++){var oe=re[pe];oe!==null&&(oe.lane&=-536870913)}r&=~Se}o!==0&&rt(t,o,0),m!==0&&u===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~n))}function rt(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-_t(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|r&261930}function ht(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var o=31-_t(r),u=1<<o;u&n|t[o]&n&&(t[o]|=n),r&=~u}}function Je(t,n){var r=n&-n;return r=(r&42)!==0?1:Ct(r),(r&(t.suspendedLanes|n))!==0?0:r}function Ct(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Bt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ot(){var t=V.p;return t!==0?t:(t=window.event,t===void 0?32:Kb(t.type))}function an(t,n){var r=V.p;try{return V.p=t,n()}finally{V.p=r}}var ut=Math.random().toString(36).slice(2),dt="__reactFiber$"+ut,yt="__reactProps$"+ut,zt="__reactContainer$"+ut,qt="__reactEvents$"+ut,Jt="__reactListeners$"+ut,gn="__reactHandles$"+ut,bn="__reactResources$"+ut,Ht="__reactMarker$"+ut;function Mn(t){delete t[dt],delete t[yt],delete t[qt],delete t[Jt],delete t[gn]}function Lt(t){var n=t[dt];if(n)return n;for(var r=t.parentNode;r;){if(n=r[zt]||r[dt]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=kb(t);t!==null;){if(r=t[dt])return r;t=kb(t)}return n}t=r,r=t.parentNode}return null}function sn(t){if(t=t[dt]||t[zt]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function Gn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(i(33))}function jn(t){var n=t[bn];return n||(n=t[bn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Et(t){t[Ht]=!0}var Xa=new Set,rn={};function Cn(t,n){Jn(t,n),Jn(t+"Capture",n)}function Jn(t,n){for(rn[t]=n,t=0;t<n.length;t++)Xa.add(n[t])}var Ja=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vs={},Wa={};function ls(t){return Xe.call(Wa,t)?!0:Xe.call(Vs,t)?!1:Ja.test(t)?Wa[t]=!0:(Vs[t]=!0,!1)}function fn(t,n,r){if(ls(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function Sa(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function Wn(t,n,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+o)}}function Wt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function is(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function oa(t,n,r){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,m=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return u.call(this)},set:function(b){r=""+b,m.call(this,b)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(b){r=""+b},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Zs(t){if(!t._valueTracker){var n=is(t)?"checked":"value";t._valueTracker=oa(t,n,""+t[n])}}function wr(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return t&&(o=is(t)?t.checked?"true":"false":t.value),t=o,t!==r?(n.setValue(t),!0):!1}function vs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ys=/[\n"\\]/g;function Vt(t){return t.replace(ys,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function _r(t,n,r,o,u,m,b,N){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),n!=null?b==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Wt(n)):t.value!==""+Wt(n)&&(t.value=""+Wt(n)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),n!=null?Ns(t,b,Wt(n)):r!=null?Ns(t,b,Wt(r)):o!=null&&t.removeAttribute("value"),u==null&&m!=null&&(t.defaultChecked=!!m),u!=null&&(t.checked=u&&typeof u!="function"&&typeof u!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?t.name=""+Wt(N):t.removeAttribute("name")}function xs(t,n,r,o,u,m,b,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),n!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){Zs(t);return}r=r!=null?""+Wt(r):"",n=n!=null?""+Wt(n):r,N||n===t.value||(t.value=n),t.defaultValue=n}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=N?t.checked:!!o,t.defaultChecked=!!o,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),Zs(t)}function Ns(t,n,r){n==="number"&&vs(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function os(t,n,r,o){if(t=t.options,n){n={};for(var u=0;u<r.length;u++)n["$"+r[u]]=!0;for(r=0;r<t.length;r++)u=n.hasOwnProperty("$"+t[r].value),t[r].selected!==u&&(t[r].selected=u),u&&o&&(t[r].defaultSelected=!0)}else{for(r=""+Wt(r),n=null,u=0;u<t.length;u++){if(t[u].value===r){t[u].selected=!0,o&&(t[u].defaultSelected=!0);return}n!==null||t[u].disabled||(n=t[u])}n!==null&&(n.selected=!0)}}function il(t,n,r){if(n!=null&&(n=""+Wt(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+Wt(r):""}function ol(t,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(i(92));if(Ue(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=Wt(n),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o),Zs(t)}function cs(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var hi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cl(t,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,r):typeof r!="number"||r===0||hi.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function ul(t,n,r){if(n!=null&&typeof n!="object")throw Error(i(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var u in n)o=n[u],n.hasOwnProperty(u)&&r[u]!==o&&cl(t,u,o)}else for(var m in n)n.hasOwnProperty(m)&&cl(t,m,n[m])}function Er(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $n(t){return dl.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ca(){}var wa=null;function ua(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ka=null,us=null;function Ar(t){var n=sn(t);if(n&&(t=n.stateNode)){var r=t[yt]||null;e:switch(t=n.stateNode,n.type){case"input":if(_r(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Vt(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==t&&o.form===t.form){var u=o[yt]||null;if(!u)throw Error(i(90));_r(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===t.form&&wr(o)}break e;case"textarea":il(t,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&os(t,!!r.multiple,n,!1)}}}var Cr=!1;function Gs(t,n,r){if(Cr)return t(n,r);Cr=!0;try{var o=t(n);return o}finally{if(Cr=!1,(ka!==null||us!==null)&&(mc(),ka&&(n=ka,t=us,us=ka=null,Ar(n),t)))for(n=0;n<t.length;n++)Ar(t[n])}}function js(t,n){var r=t.stateNode;if(r===null)return null;var o=r[yt]||null;if(o===null)return null;r=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(i(231,n,typeof r));return r}var da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_a=!1;if(da)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){_a=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{_a=!1}var Ma=null,O=null,H=null;function ge(){if(H)return H;var t,n=O,r=n.length,o,u="value"in Ma?Ma.value:Ma.textContent,m=u.length;for(t=0;t<r&&n[t]===u[t];t++);var b=r-t;for(o=1;o<=b&&n[r-o]===u[m-o];o++);return H=u.slice(t,1<o?1-o:void 0)}function Le(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function at(){return!0}function vt(){return!1}function ot(t){function n(r,o,u,m,b){this._reactName=r,this._targetInst=u,this.type=o,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var N in t)t.hasOwnProperty(N)&&(r=t[N],this[N]=r?r(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?at:vt,this.isPropagationStopped=vt,this}return x(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=at)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=at)},persist:function(){},isPersistent:at}),n}var Rt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sn=ot(Rt),jt=x({},Rt,{view:0,detail:0}),ws=ot(jt),fl,ml,w,Y=x({},jt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==w&&(w&&t.type==="mousemove"?(fl=t.screenX-w.screenX,ml=t.screenY-w.screenY):ml=fl=0,w=t),fl)},movementY:function(t){return"movementY"in t?t.movementY:ml}}),de=ot(Y),ve=x({},Y,{dataTransfer:0}),Ve=ot(ve),Yt=x({},jt,{relatedTarget:0}),Zt=ot(Yt),_s=x({},Rt,{animationName:0,elapsedTime:0,pseudoElement:0}),ds=ot(_s),Ps=x({},Rt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hl=ot(Ps),Ro=x({},Rt,{data:0}),To=ot(Ro),Mu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iN(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=lN[t])?!!n[t]:!1}function Uu(){return iN}var oN=x({},jt,{key:function(t){if(t.key){var n=Mu[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Le(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?pl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uu,charCode:function(t){return t.type==="keypress"?Le(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Le(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cN=ot(oN),uN=x({},Y,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Th=ot(uN),dN=x({},jt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uu}),fN=ot(dN),mN=x({},Rt,{propertyName:0,elapsedTime:0,pseudoElement:0}),hN=ot(mN),pN=x({},Y,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gN=ot(pN),bN=x({},Rt,{newState:0,oldState:0}),vN=ot(bN),yN=[9,13,27,32],Lu=da&&"CompositionEvent"in window,gi=null;da&&"documentMode"in document&&(gi=document.documentMode);var xN=da&&"TextEvent"in window&&!gi,Dh=da&&(!Lu||gi&&8<gi&&11>=gi),zh=" ",kh=!1;function Mh(t,n){switch(t){case"keyup":return yN.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gl=!1;function NN(t,n){switch(t){case"compositionend":return Uh(n);case"keypress":return n.which!==32?null:(kh=!0,zh);case"textInput":return t=n.data,t===zh&&kh?null:t;default:return null}}function jN(t,n){if(gl)return t==="compositionend"||!Lu&&Mh(t,n)?(t=ge(),H=O=Ma=null,gl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Dh&&n.locale!=="ko"?null:n.data;default:return null}}var SN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!SN[t.type]:n==="textarea"}function Bh(t,n,r,o){ka?us?us.push(o):us=[o]:ka=o,n=xc(n,"onChange"),0<n.length&&(r=new Sn("onChange","change",null,r,o),t.push({event:r,listeners:n}))}var bi=null,vi=null;function wN(t){xb(t,0)}function Do(t){var n=Gn(t);if(wr(n))return t}function qh(t,n){if(t==="change")return n}var Ih=!1;if(da){var Bu;if(da){var qu="oninput"in document;if(!qu){var $h=document.createElement("div");$h.setAttribute("oninput","return;"),qu=typeof $h.oninput=="function"}Bu=qu}else Bu=!1;Ih=Bu&&(!document.documentMode||9<document.documentMode)}function Fh(){bi&&(bi.detachEvent("onpropertychange",Hh),vi=bi=null)}function Hh(t){if(t.propertyName==="value"&&Do(vi)){var n=[];Bh(n,vi,t,ua(t)),Gs(wN,n)}}function _N(t,n,r){t==="focusin"?(Fh(),bi=n,vi=r,bi.attachEvent("onpropertychange",Hh)):t==="focusout"&&Fh()}function EN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Do(vi)}function AN(t,n){if(t==="click")return Do(n)}function CN(t,n){if(t==="input"||t==="change")return Do(n)}function ON(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Ea=typeof Object.is=="function"?Object.is:ON;function yi(t,n){if(Ea(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var u=r[o];if(!Xe.call(n,u)||!Ea(t[u],n[u]))return!1}return!0}function Vh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zh(t,n){var r=Vh(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=n&&o>=n)return{node:r,offset:n-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vh(r)}}function Gh(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Gh(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Ph(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=vs(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=vs(t.document)}return n}function Iu(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var RN=da&&"documentMode"in document&&11>=document.documentMode,bl=null,$u=null,xi=null,Fu=!1;function Qh(t,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Fu||bl==null||bl!==vs(o)||(o=bl,"selectionStart"in o&&Iu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),xi&&yi(xi,o)||(xi=o,o=xc($u,"onSelect"),0<o.length&&(n=new Sn("onSelect","select",null,n,r),t.push({event:n,listeners:o}),n.target=bl)))}function Or(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var vl={animationend:Or("Animation","AnimationEnd"),animationiteration:Or("Animation","AnimationIteration"),animationstart:Or("Animation","AnimationStart"),transitionrun:Or("Transition","TransitionRun"),transitionstart:Or("Transition","TransitionStart"),transitioncancel:Or("Transition","TransitionCancel"),transitionend:Or("Transition","TransitionEnd")},Hu={},Yh={};da&&(Yh=document.createElement("div").style,"AnimationEvent"in window||(delete vl.animationend.animation,delete vl.animationiteration.animation,delete vl.animationstart.animation),"TransitionEvent"in window||delete vl.transitionend.transition);function Rr(t){if(Hu[t])return Hu[t];if(!vl[t])return t;var n=vl[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in Yh)return Hu[t]=n[r];return t}var Kh=Rr("animationend"),Xh=Rr("animationiteration"),Jh=Rr("animationstart"),TN=Rr("transitionrun"),DN=Rr("transitionstart"),zN=Rr("transitioncancel"),Wh=Rr("transitionend"),ep=new Map,Vu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vu.push("scrollEnd");function es(t,n){ep.set(t,n),Cn(n,[t])}var zo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ua=[],yl=0,Zu=0;function ko(){for(var t=yl,n=Zu=yl=0;n<t;){var r=Ua[n];Ua[n++]=null;var o=Ua[n];Ua[n++]=null;var u=Ua[n];Ua[n++]=null;var m=Ua[n];if(Ua[n++]=null,o!==null&&u!==null){var b=o.pending;b===null?u.next=u:(u.next=b.next,b.next=u),o.pending=u}m!==0&&tp(r,u,m)}}function Mo(t,n,r,o){Ua[yl++]=t,Ua[yl++]=n,Ua[yl++]=r,Ua[yl++]=o,Zu|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Gu(t,n,r,o){return Mo(t,n,r,o),Uo(t)}function Tr(t,n){return Mo(t,null,null,n),Uo(t)}function tp(t,n,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var u=!1,m=t.return;m!==null;)m.childLanes|=r,o=m.alternate,o!==null&&(o.childLanes|=r),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(u=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,u&&n!==null&&(u=31-_t(r),t=m.hiddenUpdates,o=t[u],o===null?t[u]=[n]:o.push(n),n.lane=r|536870912),m):null}function Uo(t){if(50<Fi)throw Fi=0,tf=null,Error(i(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var xl={};function kN(t,n,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Aa(t,n,r,o){return new kN(t,n,r,o)}function Pu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Es(t,n){var r=t.alternate;return r===null?(r=Aa(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function np(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Lo(t,n,r,o,u,m){var b=0;if(o=t,typeof t=="function")Pu(t)&&(b=1);else if(typeof t=="string")b=qj(t,r,Q.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case fe:return t=Aa(31,r,n,u),t.elementType=fe,t.lanes=m,t;case C:return Dr(r.children,u,m,n);case T:b=8,u|=24;break;case q:return t=Aa(12,r,n,u|2),t.elementType=q,t.lanes=m,t;case D:return t=Aa(13,r,n,u),t.elementType=D,t.lanes=m,t;case P:return t=Aa(19,r,n,u),t.elementType=P,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case te:b=10;break e;case A:b=9;break e;case U:b=11;break e;case B:b=14;break e;case W:b=16,o=null;break e}b=29,r=Error(i(130,t===null?"null":typeof t,"")),o=null}return n=Aa(b,r,n,u),n.elementType=t,n.type=o,n.lanes=m,n}function Dr(t,n,r,o){return t=Aa(7,t,o,n),t.lanes=r,t}function Qu(t,n,r){return t=Aa(6,t,null,n),t.lanes=r,t}function ap(t){var n=Aa(18,null,null,0);return n.stateNode=t,n}function Yu(t,n,r){return n=Aa(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var sp=new WeakMap;function La(t,n){if(typeof t=="object"&&t!==null){var r=sp.get(t);return r!==void 0?r:(n={value:t,source:n,stack:Ae(n)},sp.set(t,n),n)}return{value:t,source:n,stack:Ae(n)}}var Nl=[],jl=0,Bo=null,Ni=0,Ba=[],qa=0,Qs=null,fs=1,ms="";function As(t,n){Nl[jl++]=Ni,Nl[jl++]=Bo,Bo=t,Ni=n}function rp(t,n,r){Ba[qa++]=fs,Ba[qa++]=ms,Ba[qa++]=Qs,Qs=t;var o=fs;t=ms;var u=32-_t(o)-1;o&=~(1<<u),r+=1;var m=32-_t(n)+u;if(30<m){var b=u-u%5;m=(o&(1<<b)-1).toString(32),o>>=b,u-=b,fs=1<<32-_t(n)+u|r<<u|o,ms=m+t}else fs=1<<m|r<<u|o,ms=t}function Ku(t){t.return!==null&&(As(t,1),rp(t,1,0))}function Xu(t){for(;t===Bo;)Bo=Nl[--jl],Nl[jl]=null,Ni=Nl[--jl],Nl[jl]=null;for(;t===Qs;)Qs=Ba[--qa],Ba[qa]=null,ms=Ba[--qa],Ba[qa]=null,fs=Ba[--qa],Ba[qa]=null}function lp(t,n){Ba[qa++]=fs,Ba[qa++]=ms,Ba[qa++]=Qs,fs=n.id,ms=n.overflow,Qs=t}var Pn=null,en=null,At=!1,Ys=null,Ia=!1,Ju=Error(i(519));function Ks(t){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ji(La(n,t)),Ju}function ip(t){var n=t.stateNode,r=t.type,o=t.memoizedProps;switch(n[dt]=t,n[yt]=o,r){case"dialog":Nt("cancel",n),Nt("close",n);break;case"iframe":case"object":case"embed":Nt("load",n);break;case"video":case"audio":for(r=0;r<Vi.length;r++)Nt(Vi[r],n);break;case"source":Nt("error",n);break;case"img":case"image":case"link":Nt("error",n),Nt("load",n);break;case"details":Nt("toggle",n);break;case"input":Nt("invalid",n),xs(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Nt("invalid",n);break;case"textarea":Nt("invalid",n),ol(n,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||wb(n.textContent,r)?(o.popover!=null&&(Nt("beforetoggle",n),Nt("toggle",n)),o.onScroll!=null&&Nt("scroll",n),o.onScrollEnd!=null&&Nt("scrollend",n),o.onClick!=null&&(n.onclick=ca),n=!0):n=!1,n||Ks(t,!0)}function op(t){for(Pn=t.return;Pn;)switch(Pn.tag){case 5:case 31:case 13:Ia=!1;return;case 27:case 3:Ia=!0;return;default:Pn=Pn.return}}function Sl(t){if(t!==Pn)return!1;if(!At)return op(t),At=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||bf(t.type,t.memoizedProps)),r=!r),r&&en&&Ks(t),op(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));en=zb(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));en=zb(t)}else n===27?(n=en,ur(t.type)?(t=jf,jf=null,en=t):en=n):en=Pn?Fa(t.stateNode.nextSibling):null;return!0}function zr(){en=Pn=null,At=!1}function Wu(){var t=Ys;return t!==null&&(pa===null?pa=t:pa.push.apply(pa,t),Ys=null),t}function ji(t){Ys===null?Ys=[t]:Ys.push(t)}var ed=_(null),kr=null,Cs=null;function Xs(t,n,r){ue(ed,n._currentValue),n._currentValue=r}function Os(t){t._currentValue=ed.current,K(ed)}function td(t,n,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===r)break;t=t.return}}function nd(t,n,r,o){var u=t.child;for(u!==null&&(u.return=t);u!==null;){var m=u.dependencies;if(m!==null){var b=u.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=u;for(var k=0;k<n.length;k++)if(N.context===n[k]){m.lanes|=r,N=m.alternate,N!==null&&(N.lanes|=r),td(m.return,r,t),o||(b=null);break e}m=N.next}}else if(u.tag===18){if(b=u.return,b===null)throw Error(i(341));b.lanes|=r,m=b.alternate,m!==null&&(m.lanes|=r),td(b,r,t),b=null}else b=u.child;if(b!==null)b.return=u;else for(b=u;b!==null;){if(b===t){b=null;break}if(u=b.sibling,u!==null){u.return=b.return,b=u;break}b=b.return}u=b}}function wl(t,n,r,o){t=null;for(var u=n,m=!1;u!==null;){if(!m){if((u.flags&524288)!==0)m=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var b=u.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var N=u.type;Ea(u.pendingProps.value,b.value)||(t!==null?t.push(N):t=[N])}}else if(u===Be.current){if(b=u.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(t!==null?t.push(Yi):t=[Yi])}u=u.return}t!==null&&nd(n,t,r,o),n.flags|=262144}function qo(t){for(t=t.firstContext;t!==null;){if(!Ea(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Mr(t){kr=t,Cs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qn(t){return cp(kr,t)}function Io(t,n){return kr===null&&Mr(t),cp(t,n)}function cp(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Cs===null){if(t===null)throw Error(i(308));Cs=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Cs=Cs.next=n;return r}var MN=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},UN=e.unstable_scheduleCallback,LN=e.unstable_NormalPriority,On={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ad(){return{controller:new MN,data:new Map,refCount:0}}function Si(t){t.refCount--,t.refCount===0&&UN(LN,function(){t.controller.abort()})}var wi=null,sd=0,_l=0,El=null;function BN(t,n){if(wi===null){var r=wi=[];sd=0,_l=of(),El={status:"pending",value:void 0,then:function(o){r.push(o)}}}return sd++,n.then(up,up),n}function up(){if(--sd===0&&wi!==null){El!==null&&(El.status="fulfilled");var t=wi;wi=null,_l=0,El=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function qN(t,n){var r=[],o={status:"pending",value:null,reason:null,then:function(u){r.push(u)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var u=0;u<r.length;u++)(0,r[u])(n)},function(u){for(o.status="rejected",o.reason=u,u=0;u<r.length;u++)(0,r[u])(void 0)}),o}var dp=M.S;M.S=function(t,n){Qg=$(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&BN(t,n),dp!==null&&dp(t,n)};var Ur=_(null);function rd(){var t=Ur.current;return t!==null?t:Kt.pooledCache}function $o(t,n){n===null?ue(Ur,Ur.current):ue(Ur,n.pool)}function fp(){var t=rd();return t===null?null:{parent:On._currentValue,pool:t}}var Al=Error(i(460)),ld=Error(i(474)),Fo=Error(i(542)),Ho={then:function(){}};function mp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function hp(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(ca,ca),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,gp(t),t;default:if(typeof n.status=="string")n.then(ca,ca);else{if(t=Kt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=o}},function(o){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,gp(t),t}throw Br=n,Al}}function Lr(t){try{var n=t._init;return n(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Br=r,Al):r}}var Br=null;function pp(){if(Br===null)throw Error(i(459));var t=Br;return Br=null,t}function gp(t){if(t===Al||t===Fo)throw Error(i(483))}var Cl=null,_i=0;function Vo(t){var n=_i;return _i+=1,Cl===null&&(Cl=[]),hp(Cl,t,n)}function Ei(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Zo(t,n){throw n.$$typeof===j?Error(i(525)):(t=Object.prototype.toString.call(n),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function bp(t){function n(G,I){if(t){var ee=G.deletions;ee===null?(G.deletions=[I],G.flags|=16):ee.push(I)}}function r(G,I){if(!t)return null;for(;I!==null;)n(G,I),I=I.sibling;return null}function o(G){for(var I=new Map;G!==null;)G.key!==null?I.set(G.key,G):I.set(G.index,G),G=G.sibling;return I}function u(G,I){return G=Es(G,I),G.index=0,G.sibling=null,G}function m(G,I,ee){return G.index=ee,t?(ee=G.alternate,ee!==null?(ee=ee.index,ee<I?(G.flags|=67108866,I):ee):(G.flags|=67108866,I)):(G.flags|=1048576,I)}function b(G){return t&&G.alternate===null&&(G.flags|=67108866),G}function N(G,I,ee,xe){return I===null||I.tag!==6?(I=Qu(ee,G.mode,xe),I.return=G,I):(I=u(I,ee),I.return=G,I)}function k(G,I,ee,xe){var tt=ee.type;return tt===C?pe(G,I,ee.props.children,xe,ee.key):I!==null&&(I.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===W&&Lr(tt)===I.type)?(I=u(I,ee.props),Ei(I,ee),I.return=G,I):(I=Lo(ee.type,ee.key,ee.props,null,G.mode,xe),Ei(I,ee),I.return=G,I)}function ne(G,I,ee,xe){return I===null||I.tag!==4||I.stateNode.containerInfo!==ee.containerInfo||I.stateNode.implementation!==ee.implementation?(I=Yu(ee,G.mode,xe),I.return=G,I):(I=u(I,ee.children||[]),I.return=G,I)}function pe(G,I,ee,xe,tt){return I===null||I.tag!==7?(I=Dr(ee,G.mode,xe,tt),I.return=G,I):(I=u(I,ee),I.return=G,I)}function Se(G,I,ee){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=Qu(""+I,G.mode,ee),I.return=G,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case F:return ee=Lo(I.type,I.key,I.props,null,G.mode,ee),Ei(ee,I),ee.return=G,ee;case E:return I=Yu(I,G.mode,ee),I.return=G,I;case W:return I=Lr(I),Se(G,I,ee)}if(Ue(I)||be(I))return I=Dr(I,G.mode,ee,null),I.return=G,I;if(typeof I.then=="function")return Se(G,Vo(I),ee);if(I.$$typeof===te)return Se(G,Io(G,I),ee);Zo(G,I)}return null}function re(G,I,ee,xe){var tt=I!==null?I.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return tt!==null?null:N(G,I,""+ee,xe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case F:return ee.key===tt?k(G,I,ee,xe):null;case E:return ee.key===tt?ne(G,I,ee,xe):null;case W:return ee=Lr(ee),re(G,I,ee,xe)}if(Ue(ee)||be(ee))return tt!==null?null:pe(G,I,ee,xe,null);if(typeof ee.then=="function")return re(G,I,Vo(ee),xe);if(ee.$$typeof===te)return re(G,I,Io(G,ee),xe);Zo(G,ee)}return null}function oe(G,I,ee,xe,tt){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return G=G.get(ee)||null,N(I,G,""+xe,tt);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case F:return G=G.get(xe.key===null?ee:xe.key)||null,k(I,G,xe,tt);case E:return G=G.get(xe.key===null?ee:xe.key)||null,ne(I,G,xe,tt);case W:return xe=Lr(xe),oe(G,I,ee,xe,tt)}if(Ue(xe)||be(xe))return G=G.get(ee)||null,pe(I,G,xe,tt,null);if(typeof xe.then=="function")return oe(G,I,ee,Vo(xe),tt);if(xe.$$typeof===te)return oe(G,I,ee,Io(I,xe),tt);Zo(I,xe)}return null}function Pe(G,I,ee,xe){for(var tt=null,Tt=null,Ke=I,pt=I=0,wt=null;Ke!==null&&pt<ee.length;pt++){Ke.index>pt?(wt=Ke,Ke=null):wt=Ke.sibling;var Dt=re(G,Ke,ee[pt],xe);if(Dt===null){Ke===null&&(Ke=wt);break}t&&Ke&&Dt.alternate===null&&n(G,Ke),I=m(Dt,I,pt),Tt===null?tt=Dt:Tt.sibling=Dt,Tt=Dt,Ke=wt}if(pt===ee.length)return r(G,Ke),At&&As(G,pt),tt;if(Ke===null){for(;pt<ee.length;pt++)Ke=Se(G,ee[pt],xe),Ke!==null&&(I=m(Ke,I,pt),Tt===null?tt=Ke:Tt.sibling=Ke,Tt=Ke);return At&&As(G,pt),tt}for(Ke=o(Ke);pt<ee.length;pt++)wt=oe(Ke,G,pt,ee[pt],xe),wt!==null&&(t&&wt.alternate!==null&&Ke.delete(wt.key===null?pt:wt.key),I=m(wt,I,pt),Tt===null?tt=wt:Tt.sibling=wt,Tt=wt);return t&&Ke.forEach(function(pr){return n(G,pr)}),At&&As(G,pt),tt}function st(G,I,ee,xe){if(ee==null)throw Error(i(151));for(var tt=null,Tt=null,Ke=I,pt=I=0,wt=null,Dt=ee.next();Ke!==null&&!Dt.done;pt++,Dt=ee.next()){Ke.index>pt?(wt=Ke,Ke=null):wt=Ke.sibling;var pr=re(G,Ke,Dt.value,xe);if(pr===null){Ke===null&&(Ke=wt);break}t&&Ke&&pr.alternate===null&&n(G,Ke),I=m(pr,I,pt),Tt===null?tt=pr:Tt.sibling=pr,Tt=pr,Ke=wt}if(Dt.done)return r(G,Ke),At&&As(G,pt),tt;if(Ke===null){for(;!Dt.done;pt++,Dt=ee.next())Dt=Se(G,Dt.value,xe),Dt!==null&&(I=m(Dt,I,pt),Tt===null?tt=Dt:Tt.sibling=Dt,Tt=Dt);return At&&As(G,pt),tt}for(Ke=o(Ke);!Dt.done;pt++,Dt=ee.next())Dt=oe(Ke,G,pt,Dt.value,xe),Dt!==null&&(t&&Dt.alternate!==null&&Ke.delete(Dt.key===null?pt:Dt.key),I=m(Dt,I,pt),Tt===null?tt=Dt:Tt.sibling=Dt,Tt=Dt);return t&&Ke.forEach(function(Kj){return n(G,Kj)}),At&&As(G,pt),tt}function Qt(G,I,ee,xe){if(typeof ee=="object"&&ee!==null&&ee.type===C&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case F:e:{for(var tt=ee.key;I!==null;){if(I.key===tt){if(tt=ee.type,tt===C){if(I.tag===7){r(G,I.sibling),xe=u(I,ee.props.children),xe.return=G,G=xe;break e}}else if(I.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===W&&Lr(tt)===I.type){r(G,I.sibling),xe=u(I,ee.props),Ei(xe,ee),xe.return=G,G=xe;break e}r(G,I);break}else n(G,I);I=I.sibling}ee.type===C?(xe=Dr(ee.props.children,G.mode,xe,ee.key),xe.return=G,G=xe):(xe=Lo(ee.type,ee.key,ee.props,null,G.mode,xe),Ei(xe,ee),xe.return=G,G=xe)}return b(G);case E:e:{for(tt=ee.key;I!==null;){if(I.key===tt)if(I.tag===4&&I.stateNode.containerInfo===ee.containerInfo&&I.stateNode.implementation===ee.implementation){r(G,I.sibling),xe=u(I,ee.children||[]),xe.return=G,G=xe;break e}else{r(G,I);break}else n(G,I);I=I.sibling}xe=Yu(ee,G.mode,xe),xe.return=G,G=xe}return b(G);case W:return ee=Lr(ee),Qt(G,I,ee,xe)}if(Ue(ee))return Pe(G,I,ee,xe);if(be(ee)){if(tt=be(ee),typeof tt!="function")throw Error(i(150));return ee=tt.call(ee),st(G,I,ee,xe)}if(typeof ee.then=="function")return Qt(G,I,Vo(ee),xe);if(ee.$$typeof===te)return Qt(G,I,Io(G,ee),xe);Zo(G,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,I!==null&&I.tag===6?(r(G,I.sibling),xe=u(I,ee),xe.return=G,G=xe):(r(G,I),xe=Qu(ee,G.mode,xe),xe.return=G,G=xe),b(G)):r(G,I)}return function(G,I,ee,xe){try{_i=0;var tt=Qt(G,I,ee,xe);return Cl=null,tt}catch(Ke){if(Ke===Al||Ke===Fo)throw Ke;var Tt=Aa(29,Ke,null,G.mode);return Tt.lanes=xe,Tt.return=G,Tt}finally{}}}var qr=bp(!0),vp=bp(!1),Js=!1;function id(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function od(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ws(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function er(t,n,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(kt&2)!==0){var u=o.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),o.pending=n,n=Uo(t),tp(t,null,r),n}return Mo(t,o,n,r),Uo(t)}function Ai(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,ht(t,r)}}function cd(t,n){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var u=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?u=m=b:m=m.next=b,r=r.next}while(r!==null);m===null?u=m=n:m=m.next=n}else u=m=n;r={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var ud=!1;function Ci(){if(ud){var t=El;if(t!==null)throw t}}function Oi(t,n,r,o){ud=!1;var u=t.updateQueue;Js=!1;var m=u.firstBaseUpdate,b=u.lastBaseUpdate,N=u.shared.pending;if(N!==null){u.shared.pending=null;var k=N,ne=k.next;k.next=null,b===null?m=ne:b.next=ne,b=k;var pe=t.alternate;pe!==null&&(pe=pe.updateQueue,N=pe.lastBaseUpdate,N!==b&&(N===null?pe.firstBaseUpdate=ne:N.next=ne,pe.lastBaseUpdate=k))}if(m!==null){var Se=u.baseState;b=0,pe=ne=k=null,N=m;do{var re=N.lane&-536870913,oe=re!==N.lane;if(oe?(St&re)===re:(o&re)===re){re!==0&&re===_l&&(ud=!0),pe!==null&&(pe=pe.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Pe=t,st=N;re=n;var Qt=r;switch(st.tag){case 1:if(Pe=st.payload,typeof Pe=="function"){Se=Pe.call(Qt,Se,re);break e}Se=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=st.payload,re=typeof Pe=="function"?Pe.call(Qt,Se,re):Pe,re==null)break e;Se=x({},Se,re);break e;case 2:Js=!0}}re=N.callback,re!==null&&(t.flags|=64,oe&&(t.flags|=8192),oe=u.callbacks,oe===null?u.callbacks=[re]:oe.push(re))}else oe={lane:re,tag:N.tag,payload:N.payload,callback:N.callback,next:null},pe===null?(ne=pe=oe,k=Se):pe=pe.next=oe,b|=re;if(N=N.next,N===null){if(N=u.shared.pending,N===null)break;oe=N,N=oe.next,oe.next=null,u.lastBaseUpdate=oe,u.shared.pending=null}}while(!0);pe===null&&(k=Se),u.baseState=k,u.firstBaseUpdate=ne,u.lastBaseUpdate=pe,m===null&&(u.shared.lanes=0),rr|=b,t.lanes=b,t.memoizedState=Se}}function yp(t,n){if(typeof t!="function")throw Error(i(191,t));t.call(n)}function xp(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)yp(r[t],n)}var Ol=_(null),Go=_(0);function Np(t,n){t=Bs,ue(Go,t),ue(Ol,n),Bs=t|n.baseLanes}function dd(){ue(Go,Bs),ue(Ol,Ol.current)}function fd(){Bs=Go.current,K(Ol),K(Go)}var Ca=_(null),$a=null;function tr(t){var n=t.alternate;ue(wn,wn.current&1),ue(Ca,t),$a===null&&(n===null||Ol.current!==null||n.memoizedState!==null)&&($a=t)}function md(t){ue(wn,wn.current),ue(Ca,t),$a===null&&($a=t)}function jp(t){t.tag===22?(ue(wn,wn.current),ue(Ca,t),$a===null&&($a=t)):nr()}function nr(){ue(wn,wn.current),ue(Ca,Ca.current)}function Oa(t){K(Ca),$a===t&&($a=null),K(wn)}var wn=_(0);function Po(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||xf(r)||Nf(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Rs=0,ft=null,Gt=null,Rn=null,Qo=!1,Rl=!1,Ir=!1,Yo=0,Ri=0,Tl=null,IN=0;function vn(){throw Error(i(321))}function hd(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!Ea(t[r],n[r]))return!1;return!0}function pd(t,n,r,o,u,m){return Rs=m,ft=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,M.H=t===null||t.memoizedState===null?rg:Rd,Ir=!1,m=r(o,u),Ir=!1,Rl&&(m=wp(n,r,o,u)),Sp(t),m}function Sp(t){M.H=zi;var n=Gt!==null&&Gt.next!==null;if(Rs=0,Rn=Gt=ft=null,Qo=!1,Ri=0,Tl=null,n)throw Error(i(300));t===null||Tn||(t=t.dependencies,t!==null&&qo(t)&&(Tn=!0))}function wp(t,n,r,o){ft=t;var u=0;do{if(Rl&&(Tl=null),Ri=0,Rl=!1,25<=u)throw Error(i(301));if(u+=1,Rn=Gt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}M.H=lg,m=n(r,o)}while(Rl);return m}function $N(){var t=M.H,n=t.useState()[0];return n=typeof n.then=="function"?Ti(n):n,t=t.useState()[0],(Gt!==null?Gt.memoizedState:null)!==t&&(ft.flags|=1024),n}function gd(){var t=Yo!==0;return Yo=0,t}function bd(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function vd(t){if(Qo){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Qo=!1}Rs=0,Rn=Gt=ft=null,Rl=!1,Ri=Yo=0,Tl=null}function sa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?ft.memoizedState=Rn=t:Rn=Rn.next=t,Rn}function _n(){if(Gt===null){var t=ft.alternate;t=t!==null?t.memoizedState:null}else t=Gt.next;var n=Rn===null?ft.memoizedState:Rn.next;if(n!==null)Rn=n,Gt=t;else{if(t===null)throw ft.alternate===null?Error(i(467)):Error(i(310));Gt=t,t={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Rn===null?ft.memoizedState=Rn=t:Rn=Rn.next=t}return Rn}function Ko(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ti(t){var n=Ri;return Ri+=1,Tl===null&&(Tl=[]),t=hp(Tl,t,n),n=ft,(Rn===null?n.memoizedState:Rn.next)===null&&(n=n.alternate,M.H=n===null||n.memoizedState===null?rg:Rd),t}function Xo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ti(t);if(t.$$typeof===te)return Qn(t)}throw Error(i(438,String(t)))}function yd(t){var n=null,r=ft.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=ft.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Ko(),ft.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),o=0;o<t;o++)r[o]=De;return n.index++,r}function Ts(t,n){return typeof n=="function"?n(t):n}function Jo(t){var n=_n();return xd(n,Gt,t)}function xd(t,n,r){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=t.baseQueue,m=o.pending;if(m!==null){if(u!==null){var b=u.next;u.next=m.next,m.next=b}n.baseQueue=u=m,o.pending=null}if(m=t.baseState,u===null)t.memoizedState=m;else{n=u.next;var N=b=null,k=null,ne=n,pe=!1;do{var Se=ne.lane&-536870913;if(Se!==ne.lane?(St&Se)===Se:(Rs&Se)===Se){var re=ne.revertLane;if(re===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),Se===_l&&(pe=!0);else if((Rs&re)===re){ne=ne.next,re===_l&&(pe=!0);continue}else Se={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},k===null?(N=k=Se,b=m):k=k.next=Se,ft.lanes|=re,rr|=re;Se=ne.action,Ir&&r(m,Se),m=ne.hasEagerState?ne.eagerState:r(m,Se)}else re={lane:Se,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},k===null?(N=k=re,b=m):k=k.next=re,ft.lanes|=Se,rr|=Se;ne=ne.next}while(ne!==null&&ne!==n);if(k===null?b=m:k.next=N,!Ea(m,t.memoizedState)&&(Tn=!0,pe&&(r=El,r!==null)))throw r;t.memoizedState=m,t.baseState=b,t.baseQueue=k,o.lastRenderedState=m}return u===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Nd(t){var n=_n(),r=n.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=t;var o=r.dispatch,u=r.pending,m=n.memoizedState;if(u!==null){r.pending=null;var b=u=u.next;do m=t(m,b.action),b=b.next;while(b!==u);Ea(m,n.memoizedState)||(Tn=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),r.lastRenderedState=m}return[m,o]}function _p(t,n,r){var o=ft,u=_n(),m=At;if(m){if(r===void 0)throw Error(i(407));r=r()}else r=n();var b=!Ea((Gt||u).memoizedState,r);if(b&&(u.memoizedState=r,Tn=!0),u=u.queue,wd(Cp.bind(null,o,u,t),[t]),u.getSnapshot!==n||b||Rn!==null&&Rn.memoizedState.tag&1){if(o.flags|=2048,Dl(9,{destroy:void 0},Ap.bind(null,o,u,r,n),null),Kt===null)throw Error(i(349));m||(Rs&127)!==0||Ep(o,n,r)}return r}function Ep(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=ft.updateQueue,n===null?(n=Ko(),ft.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function Ap(t,n,r,o){n.value=r,n.getSnapshot=o,Op(n)&&Rp(t)}function Cp(t,n,r){return r(function(){Op(n)&&Rp(t)})}function Op(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!Ea(t,r)}catch{return!0}}function Rp(t){var n=Tr(t,2);n!==null&&ga(n,t,2)}function jd(t){var n=sa();if(typeof t=="function"){var r=t;if(t=r(),Ir){Ut(!0);try{r()}finally{Ut(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:t},n}function Tp(t,n,r,o){return t.baseState=r,xd(t,Gt,typeof o=="function"?o:Ts)}function FN(t,n,r,o,u){if(tc(t))throw Error(i(485));if(t=n.action,t!==null){var m={payload:u,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};M.T!==null?r(!0):m.isTransition=!1,o(m),r=n.pending,r===null?(m.next=n.pending=m,Dp(n,m)):(m.next=r.next,n.pending=r.next=m)}}function Dp(t,n){var r=n.action,o=n.payload,u=t.state;if(n.isTransition){var m=M.T,b={};M.T=b;try{var N=r(u,o),k=M.S;k!==null&&k(b,N),zp(t,n,N)}catch(ne){Sd(t,n,ne)}finally{m!==null&&b.types!==null&&(m.types=b.types),M.T=m}}else try{m=r(u,o),zp(t,n,m)}catch(ne){Sd(t,n,ne)}}function zp(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){kp(t,n,o)},function(o){return Sd(t,n,o)}):kp(t,n,r)}function kp(t,n,r){n.status="fulfilled",n.value=r,Mp(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,Dp(t,r)))}function Sd(t,n,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,Mp(n),n=n.next;while(n!==o)}t.action=null}function Mp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Up(t,n){return n}function Lp(t,n){if(At){var r=Kt.formState;if(r!==null){e:{var o=ft;if(At){if(en){t:{for(var u=en,m=Ia;u.nodeType!==8;){if(!m){u=null;break t}if(u=Fa(u.nextSibling),u===null){u=null;break t}}m=u.data,u=m==="F!"||m==="F"?u:null}if(u){en=Fa(u.nextSibling),o=u.data==="F!";break e}}Ks(o)}o=!1}o&&(n=r[0])}}return r=sa(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Up,lastRenderedState:n},r.queue=o,r=ng.bind(null,ft,o),o.dispatch=r,o=jd(!1),m=Od.bind(null,ft,!1,o.queue),o=sa(),u={state:n,dispatch:null,action:t,pending:null},o.queue=u,r=FN.bind(null,ft,u,m,r),u.dispatch=r,o.memoizedState=t,[n,r,!1]}function Bp(t){var n=_n();return qp(n,Gt,t)}function qp(t,n,r){if(n=xd(t,n,Up)[0],t=Jo(Ts)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Ti(n)}catch(b){throw b===Al?Fo:b}else o=n;n=_n();var u=n.queue,m=u.dispatch;return r!==n.memoizedState&&(ft.flags|=2048,Dl(9,{destroy:void 0},HN.bind(null,u,r),null)),[o,m,t]}function HN(t,n){t.action=n}function Ip(t){var n=_n(),r=Gt;if(r!==null)return qp(n,r,t);_n(),n=n.memoizedState,r=_n();var o=r.queue.dispatch;return r.memoizedState=t,[n,o,!1]}function Dl(t,n,r,o){return t={tag:t,create:r,deps:o,inst:n,next:null},n=ft.updateQueue,n===null&&(n=Ko(),ft.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,n.lastEffect=t),t}function $p(){return _n().memoizedState}function Wo(t,n,r,o){var u=sa();ft.flags|=t,u.memoizedState=Dl(1|n,{destroy:void 0},r,o===void 0?null:o)}function ec(t,n,r,o){var u=_n();o=o===void 0?null:o;var m=u.memoizedState.inst;Gt!==null&&o!==null&&hd(o,Gt.memoizedState.deps)?u.memoizedState=Dl(n,m,r,o):(ft.flags|=t,u.memoizedState=Dl(1|n,m,r,o))}function Fp(t,n){Wo(8390656,8,t,n)}function wd(t,n){ec(2048,8,t,n)}function VN(t){ft.flags|=4;var n=ft.updateQueue;if(n===null)n=Ko(),ft.updateQueue=n,n.events=[t];else{var r=n.events;r===null?n.events=[t]:r.push(t)}}function Hp(t){var n=_n().memoizedState;return VN({ref:n,nextImpl:t}),function(){if((kt&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function Vp(t,n){return ec(4,2,t,n)}function Zp(t,n){return ec(4,4,t,n)}function Gp(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Pp(t,n,r){r=r!=null?r.concat([t]):null,ec(4,4,Gp.bind(null,n,t),r)}function _d(){}function Qp(t,n){var r=_n();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&hd(n,o[1])?o[0]:(r.memoizedState=[t,n],t)}function Yp(t,n){var r=_n();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&hd(n,o[1]))return o[0];if(o=t(),Ir){Ut(!0);try{t()}finally{Ut(!1)}}return r.memoizedState=[o,n],o}function Ed(t,n,r){return r===void 0||(Rs&1073741824)!==0&&(St&261930)===0?t.memoizedState=n:(t.memoizedState=r,t=Kg(),ft.lanes|=t,rr|=t,r)}function Kp(t,n,r,o){return Ea(r,n)?r:Ol.current!==null?(t=Ed(t,r,o),Ea(t,n)||(Tn=!0),t):(Rs&42)===0||(Rs&1073741824)!==0&&(St&261930)===0?(Tn=!0,t.memoizedState=r):(t=Kg(),ft.lanes|=t,rr|=t,n)}function Xp(t,n,r,o,u){var m=V.p;V.p=m!==0&&8>m?m:8;var b=M.T,N={};M.T=N,Od(t,!1,n,r);try{var k=u(),ne=M.S;if(ne!==null&&ne(N,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var pe=qN(k,o);Di(t,n,pe,Da(t))}else Di(t,n,o,Da(t))}catch(Se){Di(t,n,{then:function(){},status:"rejected",reason:Se},Da())}finally{V.p=m,b!==null&&N.types!==null&&(b.types=N.types),M.T=b}}function ZN(){}function Ad(t,n,r,o){if(t.tag!==5)throw Error(i(476));var u=Jp(t).queue;Xp(t,u,n,ae,r===null?ZN:function(){return Wp(t),r(o)})}function Jp(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:ae},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Wp(t){var n=Jp(t);n.next===null&&(n=t.alternate.memoizedState),Di(t,n.next.queue,{},Da())}function Cd(){return Qn(Yi)}function eg(){return _n().memoizedState}function tg(){return _n().memoizedState}function GN(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=Da();t=Ws(r);var o=er(n,t,r);o!==null&&(ga(o,n,r),Ai(o,n,r)),n={cache:ad()},t.payload=n;return}n=n.return}}function PN(t,n,r){var o=Da();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},tc(t)?ag(n,r):(r=Gu(t,n,r,o),r!==null&&(ga(r,t,o),sg(r,n,o)))}function ng(t,n,r){var o=Da();Di(t,n,r,o)}function Di(t,n,r,o){var u={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(tc(t))ag(n,u);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var b=n.lastRenderedState,N=m(b,r);if(u.hasEagerState=!0,u.eagerState=N,Ea(N,b))return Mo(t,n,u,0),Kt===null&&ko(),!1}catch{}finally{}if(r=Gu(t,n,u,o),r!==null)return ga(r,t,o),sg(r,n,o),!0}return!1}function Od(t,n,r,o){if(o={lane:2,revertLane:of(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},tc(t)){if(n)throw Error(i(479))}else n=Gu(t,r,o,2),n!==null&&ga(n,t,2)}function tc(t){var n=t.alternate;return t===ft||n!==null&&n===ft}function ag(t,n){Rl=Qo=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function sg(t,n,r){if((r&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,ht(t,r)}}var zi={readContext:Qn,use:Xo,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn};zi.useEffectEvent=vn;var rg={readContext:Qn,use:Xo,useCallback:function(t,n){return sa().memoizedState=[t,n===void 0?null:n],t},useContext:Qn,useEffect:Fp,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,Wo(4194308,4,Gp.bind(null,n,t),r)},useLayoutEffect:function(t,n){return Wo(4194308,4,t,n)},useInsertionEffect:function(t,n){Wo(4,2,t,n)},useMemo:function(t,n){var r=sa();n=n===void 0?null:n;var o=t();if(Ir){Ut(!0);try{t()}finally{Ut(!1)}}return r.memoizedState=[o,n],o},useReducer:function(t,n,r){var o=sa();if(r!==void 0){var u=r(n);if(Ir){Ut(!0);try{r(n)}finally{Ut(!1)}}}else u=n;return o.memoizedState=o.baseState=u,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:u},o.queue=t,t=t.dispatch=PN.bind(null,ft,t),[o.memoizedState,t]},useRef:function(t){var n=sa();return t={current:t},n.memoizedState=t},useState:function(t){t=jd(t);var n=t.queue,r=ng.bind(null,ft,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:_d,useDeferredValue:function(t,n){var r=sa();return Ed(r,t,n)},useTransition:function(){var t=jd(!1);return t=Xp.bind(null,ft,t.queue,!0,!1),sa().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var o=ft,u=sa();if(At){if(r===void 0)throw Error(i(407));r=r()}else{if(r=n(),Kt===null)throw Error(i(349));(St&127)!==0||Ep(o,n,r)}u.memoizedState=r;var m={value:r,getSnapshot:n};return u.queue=m,Fp(Cp.bind(null,o,m,t),[t]),o.flags|=2048,Dl(9,{destroy:void 0},Ap.bind(null,o,m,r,n),null),r},useId:function(){var t=sa(),n=Kt.identifierPrefix;if(At){var r=ms,o=fs;r=(o&~(1<<32-_t(o)-1)).toString(32)+r,n="_"+n+"R_"+r,r=Yo++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=IN++,n="_"+n+"r_"+r.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Cd,useFormState:Lp,useActionState:Lp,useOptimistic:function(t){var n=sa();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Od.bind(null,ft,!0,r),r.dispatch=n,[t,n]},useMemoCache:yd,useCacheRefresh:function(){return sa().memoizedState=GN.bind(null,ft)},useEffectEvent:function(t){var n=sa(),r={impl:t};return n.memoizedState=r,function(){if((kt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},Rd={readContext:Qn,use:Xo,useCallback:Qp,useContext:Qn,useEffect:wd,useImperativeHandle:Pp,useInsertionEffect:Vp,useLayoutEffect:Zp,useMemo:Yp,useReducer:Jo,useRef:$p,useState:function(){return Jo(Ts)},useDebugValue:_d,useDeferredValue:function(t,n){var r=_n();return Kp(r,Gt.memoizedState,t,n)},useTransition:function(){var t=Jo(Ts)[0],n=_n().memoizedState;return[typeof t=="boolean"?t:Ti(t),n]},useSyncExternalStore:_p,useId:eg,useHostTransitionStatus:Cd,useFormState:Bp,useActionState:Bp,useOptimistic:function(t,n){var r=_n();return Tp(r,Gt,t,n)},useMemoCache:yd,useCacheRefresh:tg};Rd.useEffectEvent=Hp;var lg={readContext:Qn,use:Xo,useCallback:Qp,useContext:Qn,useEffect:wd,useImperativeHandle:Pp,useInsertionEffect:Vp,useLayoutEffect:Zp,useMemo:Yp,useReducer:Nd,useRef:$p,useState:function(){return Nd(Ts)},useDebugValue:_d,useDeferredValue:function(t,n){var r=_n();return Gt===null?Ed(r,t,n):Kp(r,Gt.memoizedState,t,n)},useTransition:function(){var t=Nd(Ts)[0],n=_n().memoizedState;return[typeof t=="boolean"?t:Ti(t),n]},useSyncExternalStore:_p,useId:eg,useHostTransitionStatus:Cd,useFormState:Ip,useActionState:Ip,useOptimistic:function(t,n){var r=_n();return Gt!==null?Tp(r,Gt,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:yd,useCacheRefresh:tg};lg.useEffectEvent=Hp;function Td(t,n,r,o){n=t.memoizedState,r=r(o,n),r=r==null?n:x({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Dd={enqueueSetState:function(t,n,r){t=t._reactInternals;var o=Da(),u=Ws(o);u.payload=n,r!=null&&(u.callback=r),n=er(t,u,o),n!==null&&(ga(n,t,o),Ai(n,t,o))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var o=Da(),u=Ws(o);u.tag=1,u.payload=n,r!=null&&(u.callback=r),n=er(t,u,o),n!==null&&(ga(n,t,o),Ai(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=Da(),o=Ws(r);o.tag=2,n!=null&&(o.callback=n),n=er(t,o,r),n!==null&&(ga(n,t,r),Ai(n,t,r))}};function ig(t,n,r,o,u,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,b):n.prototype&&n.prototype.isPureReactComponent?!yi(r,o)||!yi(u,m):!0}function og(t,n,r,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==t&&Dd.enqueueReplaceState(n,n.state,null)}function $r(t,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(t=t.defaultProps){r===n&&(r=x({},r));for(var u in t)r[u]===void 0&&(r[u]=t[u])}return r}function cg(t){zo(t)}function ug(t){console.error(t)}function dg(t){zo(t)}function nc(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function fg(t,n,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function zd(t,n,r){return r=Ws(r),r.tag=3,r.payload={element:null},r.callback=function(){nc(t,n)},r}function mg(t){return t=Ws(t),t.tag=3,t}function hg(t,n,r,o){var u=r.type.getDerivedStateFromError;if(typeof u=="function"){var m=o.value;t.payload=function(){return u(m)},t.callback=function(){fg(n,r,o)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){fg(n,r,o),typeof u!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var N=o.stack;this.componentDidCatch(o.value,{componentStack:N!==null?N:""})})}function QN(t,n,r,o,u){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&wl(n,r,u,!0),r=Ca.current,r!==null){switch(r.tag){case 31:case 13:return $a===null?hc():r.alternate===null&&yn===0&&(yn=3),r.flags&=-257,r.flags|=65536,r.lanes=u,o===Ho?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),sf(t,o,u)),!1;case 22:return r.flags|=65536,o===Ho?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),sf(t,o,u)),!1}throw Error(i(435,r.tag))}return sf(t,o,u),hc(),!1}if(At)return n=Ca.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,o!==Ju&&(t=Error(i(422),{cause:o}),ji(La(t,r)))):(o!==Ju&&(n=Error(i(423),{cause:o}),ji(La(n,r))),t=t.current.alternate,t.flags|=65536,u&=-u,t.lanes|=u,o=La(o,r),u=zd(t.stateNode,o,u),cd(t,u),yn!==4&&(yn=2)),!1;var m=Error(i(520),{cause:o});if(m=La(m,r),$i===null?$i=[m]:$i.push(m),yn!==4&&(yn=2),n===null)return!0;o=La(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=u&-u,r.lanes|=t,t=zd(r.stateNode,o,t),cd(r,t),!1;case 1:if(n=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(lr===null||!lr.has(m))))return r.flags|=65536,u&=-u,r.lanes|=u,u=mg(u),hg(u,t,r,o),cd(r,u),!1}r=r.return}while(r!==null);return!1}var kd=Error(i(461)),Tn=!1;function Yn(t,n,r,o){n.child=t===null?vp(n,null,r,o):qr(n,t.child,r,o)}function pg(t,n,r,o,u){r=r.render;var m=n.ref;if("ref"in o){var b={};for(var N in o)N!=="ref"&&(b[N]=o[N])}else b=o;return Mr(n),o=pd(t,n,r,b,m,u),N=gd(),t!==null&&!Tn?(bd(t,n,u),Ds(t,n,u)):(At&&N&&Ku(n),n.flags|=1,Yn(t,n,o,u),n.child)}function gg(t,n,r,o,u){if(t===null){var m=r.type;return typeof m=="function"&&!Pu(m)&&m.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=m,bg(t,n,m,o,u)):(t=Lo(r.type,null,o,n,n.mode,u),t.ref=n.ref,t.return=n,n.child=t)}if(m=t.child,!Fd(t,u)){var b=m.memoizedProps;if(r=r.compare,r=r!==null?r:yi,r(b,o)&&t.ref===n.ref)return Ds(t,n,u)}return n.flags|=1,t=Es(m,o),t.ref=n.ref,t.return=n,n.child=t}function bg(t,n,r,o,u){if(t!==null){var m=t.memoizedProps;if(yi(m,o)&&t.ref===n.ref)if(Tn=!1,n.pendingProps=o=m,Fd(t,u))(t.flags&131072)!==0&&(Tn=!0);else return n.lanes=t.lanes,Ds(t,n,u)}return Md(t,n,r,o,u)}function vg(t,n,r,o){var u=o.children,m=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,t!==null){for(o=n.child=t.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~m}else o=0,n.child=null;return yg(t,n,m,r,o)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&$o(n,m!==null?m.cachePool:null),m!==null?Np(n,m):dd(),jp(n);else return o=n.lanes=536870912,yg(t,n,m!==null?m.baseLanes|r:r,r,o)}else m!==null?($o(n,m.cachePool),Np(n,m),nr(),n.memoizedState=null):(t!==null&&$o(n,null),dd(),nr());return Yn(t,n,u,r),n.child}function ki(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function yg(t,n,r,o,u){var m=rd();return m=m===null?null:{parent:On._currentValue,pool:m},n.memoizedState={baseLanes:r,cachePool:m},t!==null&&$o(n,null),dd(),jp(n),t!==null&&wl(t,n,o,!0),n.childLanes=u,null}function ac(t,n){return n=rc({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function xg(t,n,r){return qr(n,t.child,null,r),t=ac(n,n.pendingProps),t.flags|=2,Oa(n),n.memoizedState=null,t}function YN(t,n,r){var o=n.pendingProps,u=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(At){if(o.mode==="hidden")return t=ac(n,o),n.lanes=536870912,ki(null,t);if(md(n),(t=en)?(t=Db(t,Ia),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Qs!==null?{id:fs,overflow:ms}:null,retryLane:536870912,hydrationErrors:null},r=ap(t),r.return=n,n.child=r,Pn=n,en=null)):t=null,t===null)throw Ks(n);return n.lanes=536870912,null}return ac(n,o)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if(md(n),u)if(n.flags&256)n.flags&=-257,n=xg(t,n,r);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(i(558));else if(Tn||wl(t,n,r,!1),u=(r&t.childLanes)!==0,Tn||u){if(o=Kt,o!==null&&(b=Je(o,r),b!==0&&b!==m.retryLane))throw m.retryLane=b,Tr(t,b),ga(o,t,b),kd;hc(),n=xg(t,n,r)}else t=m.treeContext,en=Fa(b.nextSibling),Pn=n,At=!0,Ys=null,Ia=!1,t!==null&&lp(n,t),n=ac(n,o),n.flags|=4096;return n}return t=Es(t.child,{mode:o.mode,children:o.children}),t.ref=n.ref,n.child=t,t.return=n,t}function sc(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function Md(t,n,r,o,u){return Mr(n),r=pd(t,n,r,o,void 0,u),o=gd(),t!==null&&!Tn?(bd(t,n,u),Ds(t,n,u)):(At&&o&&Ku(n),n.flags|=1,Yn(t,n,r,u),n.child)}function Ng(t,n,r,o,u,m){return Mr(n),n.updateQueue=null,r=wp(n,o,r,u),Sp(t),o=gd(),t!==null&&!Tn?(bd(t,n,m),Ds(t,n,m)):(At&&o&&Ku(n),n.flags|=1,Yn(t,n,r,m),n.child)}function jg(t,n,r,o,u){if(Mr(n),n.stateNode===null){var m=xl,b=r.contextType;typeof b=="object"&&b!==null&&(m=Qn(b)),m=new r(o,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Dd,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=o,m.state=n.memoizedState,m.refs={},id(n),b=r.contextType,m.context=typeof b=="object"&&b!==null?Qn(b):xl,m.state=n.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(Td(n,r,b,o),m.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&Dd.enqueueReplaceState(m,m.state,null),Oi(n,o,m,u),Ci(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){m=n.stateNode;var N=n.memoizedProps,k=$r(r,N);m.props=k;var ne=m.context,pe=r.contextType;b=xl,typeof pe=="object"&&pe!==null&&(b=Qn(pe));var Se=r.getDerivedStateFromProps;pe=typeof Se=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=n.pendingProps!==N,pe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||ne!==b)&&og(n,m,o,b),Js=!1;var re=n.memoizedState;m.state=re,Oi(n,o,m,u),Ci(),ne=n.memoizedState,N||re!==ne||Js?(typeof Se=="function"&&(Td(n,r,Se,o),ne=n.memoizedState),(k=Js||ig(n,r,k,o,re,ne,b))?(pe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=ne),m.props=o,m.state=ne,m.context=b,o=k):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{m=n.stateNode,od(t,n),b=n.memoizedProps,pe=$r(r,b),m.props=pe,Se=n.pendingProps,re=m.context,ne=r.contextType,k=xl,typeof ne=="object"&&ne!==null&&(k=Qn(ne)),N=r.getDerivedStateFromProps,(ne=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==Se||re!==k)&&og(n,m,o,k),Js=!1,re=n.memoizedState,m.state=re,Oi(n,o,m,u),Ci();var oe=n.memoizedState;b!==Se||re!==oe||Js||t!==null&&t.dependencies!==null&&qo(t.dependencies)?(typeof N=="function"&&(Td(n,r,N,o),oe=n.memoizedState),(pe=Js||ig(n,r,pe,o,re,oe,k)||t!==null&&t.dependencies!==null&&qo(t.dependencies))?(ne||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,oe,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,oe,k)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&re===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&re===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=oe),m.props=o,m.state=oe,m.context=k,o=pe):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&re===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&re===t.memoizedState||(n.flags|=1024),o=!1)}return m=o,sc(t,n),o=(n.flags&128)!==0,m||o?(m=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,t!==null&&o?(n.child=qr(n,t.child,null,u),n.child=qr(n,null,r,u)):Yn(t,n,r,u),n.memoizedState=m.state,t=n.child):t=Ds(t,n,u),t}function Sg(t,n,r,o){return zr(),n.flags|=256,Yn(t,n,r,o),n.child}var Ud={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ld(t){return{baseLanes:t,cachePool:fp()}}function Bd(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=Ta),t}function wg(t,n,r){var o=n.pendingProps,u=!1,m=(n.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(wn.current&2)!==0),b&&(u=!0,n.flags&=-129),b=(n.flags&32)!==0,n.flags&=-33,t===null){if(At){if(u?tr(n):nr(),(t=en)?(t=Db(t,Ia),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Qs!==null?{id:fs,overflow:ms}:null,retryLane:536870912,hydrationErrors:null},r=ap(t),r.return=n,n.child=r,Pn=n,en=null)):t=null,t===null)throw Ks(n);return Nf(t)?n.lanes=32:n.lanes=536870912,null}var N=o.children;return o=o.fallback,u?(nr(),u=n.mode,N=rc({mode:"hidden",children:N},u),o=Dr(o,u,r,null),N.return=n,o.return=n,N.sibling=o,n.child=N,o=n.child,o.memoizedState=Ld(r),o.childLanes=Bd(t,b,r),n.memoizedState=Ud,ki(null,o)):(tr(n),qd(n,N))}var k=t.memoizedState;if(k!==null&&(N=k.dehydrated,N!==null)){if(m)n.flags&256?(tr(n),n.flags&=-257,n=Id(t,n,r)):n.memoizedState!==null?(nr(),n.child=t.child,n.flags|=128,n=null):(nr(),N=o.fallback,u=n.mode,o=rc({mode:"visible",children:o.children},u),N=Dr(N,u,r,null),N.flags|=2,o.return=n,N.return=n,o.sibling=N,n.child=o,qr(n,t.child,null,r),o=n.child,o.memoizedState=Ld(r),o.childLanes=Bd(t,b,r),n.memoizedState=Ud,n=ki(null,o));else if(tr(n),Nf(N)){if(b=N.nextSibling&&N.nextSibling.dataset,b)var ne=b.dgst;b=ne,o=Error(i(419)),o.stack="",o.digest=b,ji({value:o,source:null,stack:null}),n=Id(t,n,r)}else if(Tn||wl(t,n,r,!1),b=(r&t.childLanes)!==0,Tn||b){if(b=Kt,b!==null&&(o=Je(b,r),o!==0&&o!==k.retryLane))throw k.retryLane=o,Tr(t,o),ga(b,t,o),kd;xf(N)||hc(),n=Id(t,n,r)}else xf(N)?(n.flags|=192,n.child=t.child,n=null):(t=k.treeContext,en=Fa(N.nextSibling),Pn=n,At=!0,Ys=null,Ia=!1,t!==null&&lp(n,t),n=qd(n,o.children),n.flags|=4096);return n}return u?(nr(),N=o.fallback,u=n.mode,k=t.child,ne=k.sibling,o=Es(k,{mode:"hidden",children:o.children}),o.subtreeFlags=k.subtreeFlags&65011712,ne!==null?N=Es(ne,N):(N=Dr(N,u,r,null),N.flags|=2),N.return=n,o.return=n,o.sibling=N,n.child=o,ki(null,o),o=n.child,N=t.child.memoizedState,N===null?N=Ld(r):(u=N.cachePool,u!==null?(k=On._currentValue,u=u.parent!==k?{parent:k,pool:k}:u):u=fp(),N={baseLanes:N.baseLanes|r,cachePool:u}),o.memoizedState=N,o.childLanes=Bd(t,b,r),n.memoizedState=Ud,ki(t.child,o)):(tr(n),r=t.child,t=r.sibling,r=Es(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,t!==null&&(b=n.deletions,b===null?(n.deletions=[t],n.flags|=16):b.push(t)),n.child=r,n.memoizedState=null,r)}function qd(t,n){return n=rc({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function rc(t,n){return t=Aa(22,t,null,n),t.lanes=0,t}function Id(t,n,r){return qr(n,t.child,null,r),t=qd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function _g(t,n,r){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),td(t.return,n,r)}function $d(t,n,r,o,u,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:u,treeForkCount:m}:(b.isBackwards=n,b.rendering=null,b.renderingStartTime=0,b.last=o,b.tail=r,b.tailMode=u,b.treeForkCount=m)}function Eg(t,n,r){var o=n.pendingProps,u=o.revealOrder,m=o.tail;o=o.children;var b=wn.current,N=(b&2)!==0;if(N?(b=b&1|2,n.flags|=128):b&=1,ue(wn,b),Yn(t,n,o,r),o=At?Ni:0,!N&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_g(t,r,n);else if(t.tag===19)_g(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(u){case"forwards":for(r=n.child,u=null;r!==null;)t=r.alternate,t!==null&&Po(t)===null&&(u=r),r=r.sibling;r=u,r===null?(u=n.child,n.child=null):(u=r.sibling,r.sibling=null),$d(n,!1,u,r,m,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,u=n.child,n.child=null;u!==null;){if(t=u.alternate,t!==null&&Po(t)===null){n.child=u;break}t=u.sibling,u.sibling=r,r=u,u=t}$d(n,!0,r,null,m,o);break;case"together":$d(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Ds(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),rr|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(wl(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(i(153));if(n.child!==null){for(t=n.child,r=Es(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=Es(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Fd(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&qo(t)))}function KN(t,n,r){switch(n.tag){case 3:Ze(n,n.stateNode.containerInfo),Xs(n,On,t.memoizedState.cache),zr();break;case 27:case 5:Me(n);break;case 4:Ze(n,n.stateNode.containerInfo);break;case 10:Xs(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,md(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(tr(n),n.flags|=128,null):(r&n.child.childLanes)!==0?wg(t,n,r):(tr(n),t=Ds(t,n,r),t!==null?t.sibling:null);tr(n);break;case 19:var u=(t.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(wl(t,n,r,!1),o=(r&n.childLanes)!==0),u){if(o)return Eg(t,n,r);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),ue(wn,wn.current),o)break;return null;case 22:return n.lanes=0,vg(t,n,r,n.pendingProps);case 24:Xs(n,On,t.memoizedState.cache)}return Ds(t,n,r)}function Ag(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)Tn=!0;else{if(!Fd(t,r)&&(n.flags&128)===0)return Tn=!1,KN(t,n,r);Tn=(t.flags&131072)!==0}else Tn=!1,At&&(n.flags&1048576)!==0&&rp(n,Ni,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(t=Lr(n.elementType),n.type=t,typeof t=="function")Pu(t)?(o=$r(t,o),n.tag=1,n=jg(null,n,t,o,r)):(n.tag=0,n=Md(null,n,t,o,r));else{if(t!=null){var u=t.$$typeof;if(u===U){n.tag=11,n=pg(null,n,t,o,r);break e}else if(u===B){n.tag=14,n=gg(null,n,t,o,r);break e}}throw n=Ce(t)||t,Error(i(306,n,""))}}return n;case 0:return Md(t,n,n.type,n.pendingProps,r);case 1:return o=n.type,u=$r(o,n.pendingProps),jg(t,n,o,u,r);case 3:e:{if(Ze(n,n.stateNode.containerInfo),t===null)throw Error(i(387));o=n.pendingProps;var m=n.memoizedState;u=m.element,od(t,n),Oi(n,o,null,r);var b=n.memoizedState;if(o=b.cache,Xs(n,On,o),o!==m.cache&&nd(n,[On],r,!0),Ci(),o=b.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:b.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=Sg(t,n,o,r);break e}else if(o!==u){u=La(Error(i(424)),n),ji(u),n=Sg(t,n,o,r);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(en=Fa(t.firstChild),Pn=n,At=!0,Ys=null,Ia=!0,r=vp(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(zr(),o===u){n=Ds(t,n,r);break e}Yn(t,n,o,r)}n=n.child}return n;case 26:return sc(t,n),t===null?(r=Bb(n.type,null,n.pendingProps,null))?n.memoizedState=r:At||(r=n.type,t=n.pendingProps,o=Nc(Ne.current).createElement(r),o[dt]=n,o[yt]=t,Kn(o,r,t),Et(o),n.stateNode=o):n.memoizedState=Bb(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Me(n),t===null&&At&&(o=n.stateNode=Mb(n.type,n.pendingProps,Ne.current),Pn=n,Ia=!0,u=en,ur(n.type)?(jf=u,en=Fa(o.firstChild)):en=u),Yn(t,n,n.pendingProps.children,r),sc(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&At&&((u=o=en)&&(o=Ej(o,n.type,n.pendingProps,Ia),o!==null?(n.stateNode=o,Pn=n,en=Fa(o.firstChild),Ia=!1,u=!0):u=!1),u||Ks(n)),Me(n),u=n.type,m=n.pendingProps,b=t!==null?t.memoizedProps:null,o=m.children,bf(u,m)?o=null:b!==null&&bf(u,b)&&(n.flags|=32),n.memoizedState!==null&&(u=pd(t,n,$N,null,null,r),Yi._currentValue=u),sc(t,n),Yn(t,n,o,r),n.child;case 6:return t===null&&At&&((t=r=en)&&(r=Aj(r,n.pendingProps,Ia),r!==null?(n.stateNode=r,Pn=n,en=null,t=!0):t=!1),t||Ks(n)),null;case 13:return wg(t,n,r);case 4:return Ze(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=qr(n,null,o,r):Yn(t,n,o,r),n.child;case 11:return pg(t,n,n.type,n.pendingProps,r);case 7:return Yn(t,n,n.pendingProps,r),n.child;case 8:return Yn(t,n,n.pendingProps.children,r),n.child;case 12:return Yn(t,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,Xs(n,n.type,o.value),Yn(t,n,o.children,r),n.child;case 9:return u=n.type._context,o=n.pendingProps.children,Mr(n),u=Qn(u),o=o(u),n.flags|=1,Yn(t,n,o,r),n.child;case 14:return gg(t,n,n.type,n.pendingProps,r);case 15:return bg(t,n,n.type,n.pendingProps,r);case 19:return Eg(t,n,r);case 31:return YN(t,n,r);case 22:return vg(t,n,r,n.pendingProps);case 24:return Mr(n),o=Qn(On),t===null?(u=rd(),u===null&&(u=Kt,m=ad(),u.pooledCache=m,m.refCount++,m!==null&&(u.pooledCacheLanes|=r),u=m),n.memoizedState={parent:o,cache:u},id(n),Xs(n,On,u)):((t.lanes&r)!==0&&(od(t,n),Oi(n,null,null,r),Ci()),u=t.memoizedState,m=n.memoizedState,u.parent!==o?(u={parent:o,cache:o},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),Xs(n,On,o)):(o=m.cache,Xs(n,On,o),o!==u.cache&&nd(n,[On],r,!0))),Yn(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function zs(t){t.flags|=4}function Hd(t,n,r,o,u){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(u&335544128)===u)if(t.stateNode.complete)t.flags|=8192;else if(eb())t.flags|=8192;else throw Br=Ho,ld}else t.flags&=-16777217}function Cg(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Hb(n))if(eb())t.flags|=8192;else throw Br=Ho,ld}function lc(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?J():536870912,t.lanes|=n,Ul|=n)}function Mi(t,n){if(!At)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function tn(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(n)for(var u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=o,t.childLanes=r,n}function XN(t,n,r){var o=n.pendingProps;switch(Xu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(n),null;case 1:return tn(n),null;case 3:return r=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Os(On),he(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sl(n)?zs(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Wu())),tn(n),null;case 26:var u=n.type,m=n.memoizedState;return t===null?(zs(n),m!==null?(tn(n),Cg(n,m)):(tn(n),Hd(n,u,null,o,r))):m?m!==t.memoizedState?(zs(n),tn(n),Cg(n,m)):(tn(n),n.flags&=-16777217):(t=t.memoizedProps,t!==o&&zs(n),tn(n),Hd(n,u,t,o,r)),null;case 27:if(Fe(n),r=Ne.current,u=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&zs(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return tn(n),null}t=Q.current,Sl(n)?ip(n):(t=Mb(u,o,r),n.stateNode=t,zs(n))}return tn(n),null;case 5:if(Fe(n),u=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&zs(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return tn(n),null}if(m=Q.current,Sl(n))ip(n);else{var b=Nc(Ne.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?b.createElement("select",{is:o.is}):b.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?b.createElement(u,{is:o.is}):b.createElement(u)}}m[dt]=n,m[yt]=o;e:for(b=n.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===n)break e;for(;b.sibling===null;){if(b.return===null||b.return===n)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}n.stateNode=m;e:switch(Kn(m,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&zs(n)}}return tn(n),Hd(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,r),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&zs(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(i(166));if(t=Ne.current,Sl(n)){if(t=n.stateNode,r=n.memoizedProps,o=null,u=Pn,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}t[dt]=n,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||wb(t.nodeValue,r)),t||Ks(n,!0)}else t=Nc(t).createTextNode(o),t[dt]=n,n.stateNode=t}return tn(n),null;case 31:if(r=n.memoizedState,t===null||t.memoizedState!==null){if(o=Sl(n),r!==null){if(t===null){if(!o)throw Error(i(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[dt]=n}else zr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;tn(n),t=!1}else r=Wu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return n.flags&256?(Oa(n),n):(Oa(n),null);if((n.flags&128)!==0)throw Error(i(558))}return tn(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(u=Sl(n),o!==null&&o.dehydrated!==null){if(t===null){if(!u)throw Error(i(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));u[dt]=n}else zr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;tn(n),u=!1}else u=Wu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(Oa(n),n):(Oa(n),null)}return Oa(n),(n.flags&128)!==0?(n.lanes=r,n):(r=o!==null,t=t!==null&&t.memoizedState!==null,r&&(o=n.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==u&&(o.flags|=2048)),r!==t&&r&&(n.child.flags|=8192),lc(n,n.updateQueue),tn(n),null);case 4:return he(),t===null&&ff(n.stateNode.containerInfo),tn(n),null;case 10:return Os(n.type),tn(n),null;case 19:if(K(wn),o=n.memoizedState,o===null)return tn(n),null;if(u=(n.flags&128)!==0,m=o.rendering,m===null)if(u)Mi(o,!1);else{if(yn!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(m=Po(t),m!==null){for(n.flags|=128,Mi(o,!1),t=m.updateQueue,n.updateQueue=t,lc(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)np(r,t),r=r.sibling;return ue(wn,wn.current&1|2),At&&As(n,o.treeForkCount),n.child}t=t.sibling}o.tail!==null&&$()>dc&&(n.flags|=128,u=!0,Mi(o,!1),n.lanes=4194304)}else{if(!u)if(t=Po(m),t!==null){if(n.flags|=128,u=!0,t=t.updateQueue,n.updateQueue=t,lc(n,t),Mi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!At)return tn(n),null}else 2*$()-o.renderingStartTime>dc&&r!==536870912&&(n.flags|=128,u=!0,Mi(o,!1),n.lanes=4194304);o.isBackwards?(m.sibling=n.child,n.child=m):(t=o.last,t!==null?t.sibling=m:n.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$(),t.sibling=null,r=wn.current,ue(wn,u?r&1|2:r&1),At&&As(n,o.treeForkCount),t):(tn(n),null);case 22:case 23:return Oa(n),fd(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(tn(n),n.subtreeFlags&6&&(n.flags|=8192)):tn(n),r=n.updateQueue,r!==null&&lc(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),t!==null&&K(Ur),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Os(On),tn(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function JN(t,n){switch(Xu(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Os(On),he(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Fe(n),null;case 31:if(n.memoizedState!==null){if(Oa(n),n.alternate===null)throw Error(i(340));zr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Oa(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(i(340));zr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return K(wn),null;case 4:return he(),null;case 10:return Os(n.type),null;case 22:case 23:return Oa(n),fd(),t!==null&&K(Ur),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Os(On),null;case 25:return null;default:return null}}function Og(t,n){switch(Xu(n),n.tag){case 3:Os(On),he();break;case 26:case 27:case 5:Fe(n);break;case 4:he();break;case 31:n.memoizedState!==null&&Oa(n);break;case 13:Oa(n);break;case 19:K(wn);break;case 10:Os(n.type);break;case 22:case 23:Oa(n),fd(),t!==null&&K(Ur);break;case 24:Os(On)}}function Ui(t,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var u=o.next;r=u;do{if((r.tag&t)===t){o=void 0;var m=r.create,b=r.inst;o=m(),b.destroy=o}r=r.next}while(r!==u)}}catch(N){$t(n,n.return,N)}}function ar(t,n,r){try{var o=n.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&t)===t){var b=o.inst,N=b.destroy;if(N!==void 0){b.destroy=void 0,u=n;var k=r,ne=N;try{ne()}catch(pe){$t(u,k,pe)}}}o=o.next}while(o!==m)}}catch(pe){$t(n,n.return,pe)}}function Rg(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{xp(n,r)}catch(o){$t(t,t.return,o)}}}function Tg(t,n,r){r.props=$r(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){$t(t,n,o)}}function Li(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(u){$t(t,n,u)}}function hs(t,n){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(u){$t(t,n,u)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(u){$t(t,n,u)}else r.current=null}function Dg(t){var n=t.type,r=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(u){$t(t,t.return,u)}}function Vd(t,n,r){try{var o=t.stateNode;xj(o,t.type,r,n),o[yt]=n}catch(u){$t(t,t.return,u)}}function zg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ur(t.type)||t.tag===4}function Zd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ur(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gd(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=ca));else if(o!==4&&(o===27&&ur(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(Gd(t,n,r),t=t.sibling;t!==null;)Gd(t,n,r),t=t.sibling}function ic(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(o!==4&&(o===27&&ur(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(ic(t,n,r),t=t.sibling;t!==null;)ic(t,n,r),t=t.sibling}function kg(t){var n=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);Kn(n,o,r),n[dt]=t,n[yt]=r}catch(m){$t(t,t.return,m)}}var ks=!1,Dn=!1,Pd=!1,Mg=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function WN(t,n){if(t=t.containerInfo,pf=Cc,t=Ph(t),Iu(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var u=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var b=0,N=-1,k=-1,ne=0,pe=0,Se=t,re=null;t:for(;;){for(var oe;Se!==r||u!==0&&Se.nodeType!==3||(N=b+u),Se!==m||o!==0&&Se.nodeType!==3||(k=b+o),Se.nodeType===3&&(b+=Se.nodeValue.length),(oe=Se.firstChild)!==null;)re=Se,Se=oe;for(;;){if(Se===t)break t;if(re===r&&++ne===u&&(N=b),re===m&&++pe===o&&(k=b),(oe=Se.nextSibling)!==null)break;Se=re,re=Se.parentNode}Se=oe}r=N===-1||k===-1?null:{start:N,end:k}}else r=null}r=r||{start:0,end:0}}else r=null;for(gf={focusedElem:t,selectionRange:r},Cc=!1,Fn=n;Fn!==null;)if(n=Fn,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Fn=t;else for(;Fn!==null;){switch(n=Fn,m=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)u=t[r],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,r=n,u=m.memoizedProps,m=m.memoizedState,o=r.stateNode;try{var Pe=$r(r.type,u);t=o.getSnapshotBeforeUpdate(Pe,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(st){$t(r,r.return,st)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)yf(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":yf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=n.sibling,t!==null){t.return=n.return,Fn=t;break}Fn=n.return}}function Ug(t,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Us(t,r),o&4&&Ui(5,r);break;case 1:if(Us(t,r),o&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(b){$t(r,r.return,b)}else{var u=$r(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(u,n,t.__reactInternalSnapshotBeforeUpdate)}catch(b){$t(r,r.return,b)}}o&64&&Rg(r),o&512&&Li(r,r.return);break;case 3:if(Us(t,r),o&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{xp(t,n)}catch(b){$t(r,r.return,b)}}break;case 27:n===null&&o&4&&kg(r);case 26:case 5:Us(t,r),n===null&&o&4&&Dg(r),o&512&&Li(r,r.return);break;case 12:Us(t,r);break;case 31:Us(t,r),o&4&&qg(t,r);break;case 13:Us(t,r),o&4&&Ig(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=oj.bind(null,r),Cj(t,r))));break;case 22:if(o=r.memoizedState!==null||ks,!o){n=n!==null&&n.memoizedState!==null||Dn,u=ks;var m=Dn;ks=o,(Dn=n)&&!m?Ls(t,r,(r.subtreeFlags&8772)!==0):Us(t,r),ks=u,Dn=m}break;case 30:break;default:Us(t,r)}}function Lg(t){var n=t.alternate;n!==null&&(t.alternate=null,Lg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Mn(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ln=null,fa=!1;function Ms(t,n,r){for(r=r.child;r!==null;)Bg(t,n,r),r=r.sibling}function Bg(t,n,r){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(ye,r)}catch{}switch(r.tag){case 26:Dn||hs(r,n),Ms(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Dn||hs(r,n);var o=ln,u=fa;ur(r.type)&&(ln=r.stateNode,fa=!1),Ms(t,n,r),Gi(r.stateNode),ln=o,fa=u;break;case 5:Dn||hs(r,n);case 6:if(o=ln,u=fa,ln=null,Ms(t,n,r),ln=o,fa=u,ln!==null)if(fa)try{(ln.nodeType===9?ln.body:ln.nodeName==="HTML"?ln.ownerDocument.body:ln).removeChild(r.stateNode)}catch(m){$t(r,n,m)}else try{ln.removeChild(r.stateNode)}catch(m){$t(r,n,m)}break;case 18:ln!==null&&(fa?(t=ln,Rb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Vl(t)):Rb(ln,r.stateNode));break;case 4:o=ln,u=fa,ln=r.stateNode.containerInfo,fa=!0,Ms(t,n,r),ln=o,fa=u;break;case 0:case 11:case 14:case 15:ar(2,r,n),Dn||ar(4,r,n),Ms(t,n,r);break;case 1:Dn||(hs(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&Tg(r,n,o)),Ms(t,n,r);break;case 21:Ms(t,n,r);break;case 22:Dn=(o=Dn)||r.memoizedState!==null,Ms(t,n,r),Dn=o;break;default:Ms(t,n,r)}}function qg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Vl(t)}catch(r){$t(n,n.return,r)}}}function Ig(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Vl(t)}catch(r){$t(n,n.return,r)}}function ej(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Mg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Mg),n;default:throw Error(i(435,t.tag))}}function oc(t,n){var r=ej(t);n.forEach(function(o){if(!r.has(o)){r.add(o);var u=cj.bind(null,t,o);o.then(u,u)}})}function ma(t,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var u=r[o],m=t,b=n,N=b;e:for(;N!==null;){switch(N.tag){case 27:if(ur(N.type)){ln=N.stateNode,fa=!1;break e}break;case 5:ln=N.stateNode,fa=!1;break e;case 3:case 4:ln=N.stateNode.containerInfo,fa=!0;break e}N=N.return}if(ln===null)throw Error(i(160));Bg(m,b,u),ln=null,fa=!1,m=u.alternate,m!==null&&(m.return=null),u.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)$g(n,t),n=n.sibling}var ts=null;function $g(t,n){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ma(n,t),ha(t),o&4&&(ar(3,t,t.return),Ui(3,t),ar(5,t,t.return));break;case 1:ma(n,t),ha(t),o&512&&(Dn||r===null||hs(r,r.return)),o&64&&ks&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var u=ts;if(ma(n,t),ha(t),o&512&&(Dn||r===null||hs(r,r.return)),o&4){var m=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){e:{o=t.type,r=t.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":m=u.getElementsByTagName("title")[0],(!m||m[Ht]||m[dt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=u.createElement(o),u.head.insertBefore(m,u.querySelector("head > title"))),Kn(m,o,r),m[dt]=t,Et(m),o=m;break e;case"link":var b=$b("link","href",u).get(o+(r.href||""));if(b){for(var N=0;N<b.length;N++)if(m=b[N],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(N,1);break t}}m=u.createElement(o),Kn(m,o,r),u.head.appendChild(m);break;case"meta":if(b=$b("meta","content",u).get(o+(r.content||""))){for(N=0;N<b.length;N++)if(m=b[N],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(N,1);break t}}m=u.createElement(o),Kn(m,o,r),u.head.appendChild(m);break;default:throw Error(i(468,o))}m[dt]=t,Et(m),o=m}t.stateNode=o}else Fb(u,t.type,t.stateNode);else t.stateNode=Ib(u,o,t.memoizedProps);else m!==o?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,o===null?Fb(u,t.type,t.stateNode):Ib(u,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Vd(t,t.memoizedProps,r.memoizedProps)}break;case 27:ma(n,t),ha(t),o&512&&(Dn||r===null||hs(r,r.return)),r!==null&&o&4&&Vd(t,t.memoizedProps,r.memoizedProps);break;case 5:if(ma(n,t),ha(t),o&512&&(Dn||r===null||hs(r,r.return)),t.flags&32){u=t.stateNode;try{cs(u,"")}catch(Pe){$t(t,t.return,Pe)}}o&4&&t.stateNode!=null&&(u=t.memoizedProps,Vd(t,u,r!==null?r.memoizedProps:u)),o&1024&&(Pd=!0);break;case 6:if(ma(n,t),ha(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(Pe){$t(t,t.return,Pe)}}break;case 3:if(wc=null,u=ts,ts=jc(n.containerInfo),ma(n,t),ts=u,ha(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Vl(n.containerInfo)}catch(Pe){$t(t,t.return,Pe)}Pd&&(Pd=!1,Fg(t));break;case 4:o=ts,ts=jc(t.stateNode.containerInfo),ma(n,t),ha(t),ts=o;break;case 12:ma(n,t),ha(t);break;case 31:ma(n,t),ha(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,oc(t,o)));break;case 13:ma(n,t),ha(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(uc=$()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,oc(t,o)));break;case 22:u=t.memoizedState!==null;var k=r!==null&&r.memoizedState!==null,ne=ks,pe=Dn;if(ks=ne||u,Dn=pe||k,ma(n,t),Dn=pe,ks=ne,ha(t),o&8192)e:for(n=t.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(r===null||k||ks||Dn||Fr(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){k=r=n;try{if(m=k.stateNode,u)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{N=k.stateNode;var Se=k.memoizedProps.style,re=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;N.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(Pe){$t(k,k.return,Pe)}}}else if(n.tag===6){if(r===null){k=n;try{k.stateNode.nodeValue=u?"":k.memoizedProps}catch(Pe){$t(k,k.return,Pe)}}}else if(n.tag===18){if(r===null){k=n;try{var oe=k.stateNode;u?Tb(oe,!0):Tb(k.stateNode,!1)}catch(Pe){$t(k,k.return,Pe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,oc(t,r))));break;case 19:ma(n,t),ha(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,oc(t,o)));break;case 30:break;case 21:break;default:ma(n,t),ha(t)}}function ha(t){var n=t.flags;if(n&2){try{for(var r,o=t.return;o!==null;){if(zg(o)){r=o;break}o=o.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var u=r.stateNode,m=Zd(t);ic(t,m,u);break;case 5:var b=r.stateNode;r.flags&32&&(cs(b,""),r.flags&=-33);var N=Zd(t);ic(t,N,b);break;case 3:case 4:var k=r.stateNode.containerInfo,ne=Zd(t);Gd(t,ne,k);break;default:throw Error(i(161))}}catch(pe){$t(t,t.return,pe)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Fg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Fg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Us(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Ug(t,n.alternate,n),n=n.sibling}function Fr(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:ar(4,n,n.return),Fr(n);break;case 1:hs(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&Tg(n,n.return,r),Fr(n);break;case 27:Gi(n.stateNode);case 26:case 5:hs(n,n.return),Fr(n);break;case 22:n.memoizedState===null&&Fr(n);break;case 30:Fr(n);break;default:Fr(n)}t=t.sibling}}function Ls(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,u=t,m=n,b=m.flags;switch(m.tag){case 0:case 11:case 15:Ls(u,m,r),Ui(4,m);break;case 1:if(Ls(u,m,r),o=m,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(ne){$t(o,o.return,ne)}if(o=m,u=o.updateQueue,u!==null){var N=o.stateNode;try{var k=u.shared.hiddenCallbacks;if(k!==null)for(u.shared.hiddenCallbacks=null,u=0;u<k.length;u++)yp(k[u],N)}catch(ne){$t(o,o.return,ne)}}r&&b&64&&Rg(m),Li(m,m.return);break;case 27:kg(m);case 26:case 5:Ls(u,m,r),r&&o===null&&b&4&&Dg(m),Li(m,m.return);break;case 12:Ls(u,m,r);break;case 31:Ls(u,m,r),r&&b&4&&qg(u,m);break;case 13:Ls(u,m,r),r&&b&4&&Ig(u,m);break;case 22:m.memoizedState===null&&Ls(u,m,r),Li(m,m.return);break;case 30:break;default:Ls(u,m,r)}n=n.sibling}}function Qd(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Si(r))}function Yd(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Si(t))}function ns(t,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Hg(t,n,r,o),n=n.sibling}function Hg(t,n,r,o){var u=n.flags;switch(n.tag){case 0:case 11:case 15:ns(t,n,r,o),u&2048&&Ui(9,n);break;case 1:ns(t,n,r,o);break;case 3:ns(t,n,r,o),u&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Si(t)));break;case 12:if(u&2048){ns(t,n,r,o),t=n.stateNode;try{var m=n.memoizedProps,b=m.id,N=m.onPostCommit;typeof N=="function"&&N(b,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){$t(n,n.return,k)}}else ns(t,n,r,o);break;case 31:ns(t,n,r,o);break;case 13:ns(t,n,r,o);break;case 23:break;case 22:m=n.stateNode,b=n.alternate,n.memoizedState!==null?m._visibility&2?ns(t,n,r,o):Bi(t,n):m._visibility&2?ns(t,n,r,o):(m._visibility|=2,zl(t,n,r,o,(n.subtreeFlags&10256)!==0||!1)),u&2048&&Qd(b,n);break;case 24:ns(t,n,r,o),u&2048&&Yd(n.alternate,n);break;default:ns(t,n,r,o)}}function zl(t,n,r,o,u){for(u=u&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=t,b=n,N=r,k=o,ne=b.flags;switch(b.tag){case 0:case 11:case 15:zl(m,b,N,k,u),Ui(8,b);break;case 23:break;case 22:var pe=b.stateNode;b.memoizedState!==null?pe._visibility&2?zl(m,b,N,k,u):Bi(m,b):(pe._visibility|=2,zl(m,b,N,k,u)),u&&ne&2048&&Qd(b.alternate,b);break;case 24:zl(m,b,N,k,u),u&&ne&2048&&Yd(b.alternate,b);break;default:zl(m,b,N,k,u)}n=n.sibling}}function Bi(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,o=n,u=o.flags;switch(o.tag){case 22:Bi(r,o),u&2048&&Qd(o.alternate,o);break;case 24:Bi(r,o),u&2048&&Yd(o.alternate,o);break;default:Bi(r,o)}n=n.sibling}}var qi=8192;function kl(t,n,r){if(t.subtreeFlags&qi)for(t=t.child;t!==null;)Vg(t,n,r),t=t.sibling}function Vg(t,n,r){switch(t.tag){case 26:kl(t,n,r),t.flags&qi&&t.memoizedState!==null&&Ij(r,ts,t.memoizedState,t.memoizedProps);break;case 5:kl(t,n,r);break;case 3:case 4:var o=ts;ts=jc(t.stateNode.containerInfo),kl(t,n,r),ts=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=qi,qi=16777216,kl(t,n,r),qi=o):kl(t,n,r));break;default:kl(t,n,r)}}function Zg(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Ii(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];Fn=o,Pg(o,t)}Zg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Gg(t),t=t.sibling}function Gg(t){switch(t.tag){case 0:case 11:case 15:Ii(t),t.flags&2048&&ar(9,t,t.return);break;case 3:Ii(t);break;case 12:Ii(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,cc(t)):Ii(t);break;default:Ii(t)}}function cc(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];Fn=o,Pg(o,t)}Zg(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:ar(8,n,n.return),cc(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,cc(n));break;default:cc(n)}t=t.sibling}}function Pg(t,n){for(;Fn!==null;){var r=Fn;switch(r.tag){case 0:case 11:case 15:ar(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Si(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,Fn=o;else e:for(r=t;Fn!==null;){o=Fn;var u=o.sibling,m=o.return;if(Lg(o),o===r){Fn=null;break e}if(u!==null){u.return=m,Fn=u;break e}Fn=m}}}var tj={getCacheForType:function(t){var n=Qn(On),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r},cacheSignal:function(){return Qn(On).controller.signal}},nj=typeof WeakMap=="function"?WeakMap:Map,kt=0,Kt=null,xt=null,St=0,It=0,Ra=null,sr=!1,Ml=!1,Kd=!1,Bs=0,yn=0,rr=0,Hr=0,Xd=0,Ta=0,Ul=0,$i=null,pa=null,Jd=!1,uc=0,Qg=0,dc=1/0,fc=null,lr=null,Un=0,ir=null,Ll=null,qs=0,Wd=0,ef=null,Yg=null,Fi=0,tf=null;function Da(){return(kt&2)!==0&&St!==0?St&-St:M.T!==null?of():Ot()}function Kg(){if(Ta===0)if((St&536870912)===0||At){var t=it;it<<=1,(it&3932160)===0&&(it=262144),Ta=t}else Ta=536870912;return t=Ca.current,t!==null&&(t.flags|=32),Ta}function ga(t,n,r){(t===Kt&&(It===2||It===9)||t.cancelPendingCommit!==null)&&(Bl(t,0),or(t,St,Ta,!1)),Te(t,r),((kt&2)===0||t!==Kt)&&(t===Kt&&((kt&2)===0&&(Hr|=r),yn===4&&or(t,St,Ta,!1)),ps(t))}function Xg(t,n,r){if((kt&6)!==0)throw Error(i(327));var o=!r&&(n&127)===0&&(n&t.expiredLanes)===0||Nn(t,n),u=o?rj(t,n):af(t,n,!0),m=o;do{if(u===0){Ml&&!o&&or(t,n,0,!1);break}else{if(r=t.current.alternate,m&&!aj(r)){u=af(t,n,!1),m=!1;continue}if(u===2){if(m=n,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){n=b;e:{var N=t;u=$i;var k=N.current.memoizedState.isDehydrated;if(k&&(Bl(N,b).flags|=256),b=af(N,b,!1),b!==2){if(Kd&&!k){N.errorRecoveryDisabledLanes|=m,Hr|=m,u=4;break e}m=pa,pa=u,m!==null&&(pa===null?pa=m:pa.push.apply(pa,m))}u=b}if(m=!1,u!==2)continue}}if(u===1){Bl(t,0),or(t,n,0,!0);break}e:{switch(o=t,m=u,m){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:or(o,n,Ta,!sr);break e;case 2:pa=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(u=uc+300-$(),10<u)){if(or(o,n,Ta,!sr),Vn(o,0,!0)!==0)break e;qs=n,o.timeoutHandle=Cb(Jg.bind(null,o,r,pa,fc,Jd,n,Ta,Hr,Ul,sr,m,"Throttled",-0,0),u);break e}Jg(o,r,pa,fc,Jd,n,Ta,Hr,Ul,sr,m,null,-0,0)}}break}while(!0);ps(t)}function Jg(t,n,r,o,u,m,b,N,k,ne,pe,Se,re,oe){if(t.timeoutHandle=-1,Se=n.subtreeFlags,Se&8192||(Se&16785408)===16785408){Se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ca},Vg(n,m,Se);var Pe=(m&62914560)===m?uc-$():(m&4194048)===m?Qg-$():0;if(Pe=$j(Se,Pe),Pe!==null){qs=m,t.cancelPendingCommit=Pe(lb.bind(null,t,n,m,r,o,u,b,N,k,pe,Se,null,re,oe)),or(t,m,b,!ne);return}}lb(t,n,m,r,o,u,b,N,k)}function aj(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var u=r[o],m=u.getSnapshot;u=u.value;try{if(!Ea(m(),u))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function or(t,n,r,o){n&=~Xd,n&=~Hr,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var u=n;0<u;){var m=31-_t(u),b=1<<m;o[m]=-1,u&=~b}r!==0&&rt(t,r,n)}function mc(){return(kt&6)===0?(Hi(0),!1):!0}function nf(){if(xt!==null){if(It===0)var t=xt.return;else t=xt,Cs=kr=null,vd(t),Cl=null,_i=0,t=xt;for(;t!==null;)Og(t.alternate,t),t=t.return;xt=null}}function Bl(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,Sj(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),qs=0,nf(),Kt=t,xt=r=Es(t.current,null),St=n,It=0,Ra=null,sr=!1,Ml=Nn(t,n),Kd=!1,Ul=Ta=Xd=Hr=rr=yn=0,pa=$i=null,Jd=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var u=31-_t(o),m=1<<u;n|=t[u],o&=~m}return Bs=n,ko(),r}function Wg(t,n){ft=null,M.H=zi,n===Al||n===Fo?(n=pp(),It=3):n===ld?(n=pp(),It=4):It=n===kd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ra=n,xt===null&&(yn=1,nc(t,La(n,t.current)))}function eb(){var t=Ca.current;return t===null?!0:(St&4194048)===St?$a===null:(St&62914560)===St||(St&536870912)!==0?t===$a:!1}function tb(){var t=M.H;return M.H=zi,t===null?zi:t}function nb(){var t=M.A;return M.A=tj,t}function hc(){yn=4,sr||(St&4194048)!==St&&Ca.current!==null||(Ml=!0),(rr&134217727)===0&&(Hr&134217727)===0||Kt===null||or(Kt,St,Ta,!1)}function af(t,n,r){var o=kt;kt|=2;var u=tb(),m=nb();(Kt!==t||St!==n)&&(fc=null,Bl(t,n)),n=!1;var b=yn;e:do try{if(It!==0&&xt!==null){var N=xt,k=Ra;switch(It){case 8:nf(),b=6;break e;case 3:case 2:case 9:case 6:Ca.current===null&&(n=!0);var ne=It;if(It=0,Ra=null,ql(t,N,k,ne),r&&Ml){b=0;break e}break;default:ne=It,It=0,Ra=null,ql(t,N,k,ne)}}sj(),b=yn;break}catch(pe){Wg(t,pe)}while(!0);return n&&t.shellSuspendCounter++,Cs=kr=null,kt=o,M.H=u,M.A=m,xt===null&&(Kt=null,St=0,ko()),b}function sj(){for(;xt!==null;)ab(xt)}function rj(t,n){var r=kt;kt|=2;var o=tb(),u=nb();Kt!==t||St!==n?(fc=null,dc=$()+500,Bl(t,n)):Ml=Nn(t,n);e:do try{if(It!==0&&xt!==null){n=xt;var m=Ra;t:switch(It){case 1:It=0,Ra=null,ql(t,n,m,1);break;case 2:case 9:if(mp(m)){It=0,Ra=null,sb(n);break}n=function(){It!==2&&It!==9||Kt!==t||(It=7),ps(t)},m.then(n,n);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:mp(m)?(It=0,Ra=null,sb(n)):(It=0,Ra=null,ql(t,n,m,7));break;case 5:var b=null;switch(xt.tag){case 26:b=xt.memoizedState;case 5:case 27:var N=xt;if(b?Hb(b):N.stateNode.complete){It=0,Ra=null;var k=N.sibling;if(k!==null)xt=k;else{var ne=N.return;ne!==null?(xt=ne,pc(ne)):xt=null}break t}}It=0,Ra=null,ql(t,n,m,5);break;case 6:It=0,Ra=null,ql(t,n,m,6);break;case 8:nf(),yn=6;break e;default:throw Error(i(462))}}lj();break}catch(pe){Wg(t,pe)}while(!0);return Cs=kr=null,M.H=o,M.A=u,kt=r,xt!==null?0:(Kt=null,St=0,ko(),yn)}function lj(){for(;xt!==null&&!S();)ab(xt)}function ab(t){var n=Ag(t.alternate,t,Bs);t.memoizedProps=t.pendingProps,n===null?pc(t):xt=n}function sb(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=Ng(r,n,n.pendingProps,n.type,void 0,St);break;case 11:n=Ng(r,n,n.pendingProps,n.type.render,n.ref,St);break;case 5:vd(n);default:Og(r,n),n=xt=np(n,Bs),n=Ag(r,n,Bs)}t.memoizedProps=t.pendingProps,n===null?pc(t):xt=n}function ql(t,n,r,o){Cs=kr=null,vd(n),Cl=null,_i=0;var u=n.return;try{if(QN(t,u,n,r,St)){yn=1,nc(t,La(r,t.current)),xt=null;return}}catch(m){if(u!==null)throw xt=u,m;yn=1,nc(t,La(r,t.current)),xt=null;return}n.flags&32768?(At||o===1?t=!0:Ml||(St&536870912)!==0?t=!1:(sr=t=!0,(o===2||o===9||o===3||o===6)&&(o=Ca.current,o!==null&&o.tag===13&&(o.flags|=16384))),rb(n,t)):pc(n)}function pc(t){var n=t;do{if((n.flags&32768)!==0){rb(n,sr);return}t=n.return;var r=XN(n.alternate,n,Bs);if(r!==null){xt=r;return}if(n=n.sibling,n!==null){xt=n;return}xt=n=t}while(n!==null);yn===0&&(yn=5)}function rb(t,n){do{var r=JN(t.alternate,t);if(r!==null){r.flags&=32767,xt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){xt=t;return}xt=t=r}while(t!==null);yn=6,xt=null}function lb(t,n,r,o,u,m,b,N,k){t.cancelPendingCommit=null;do gc();while(Un!==0);if((kt&6)!==0)throw Error(i(327));if(n!==null){if(n===t.current)throw Error(i(177));if(m=n.lanes|n.childLanes,m|=Zu,He(t,r,m,b,N,k),t===Kt&&(xt=Kt=null,St=0),Ll=n,ir=t,qs=r,Wd=m,ef=u,Yg=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,uj(Z,function(){return db(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=M.T,M.T=null,u=V.p,V.p=2,b=kt,kt|=4;try{WN(t,n,r)}finally{kt=b,V.p=u,M.T=o}}Un=1,ib(),ob(),cb()}}function ib(){if(Un===1){Un=0;var t=ir,n=Ll,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=M.T,M.T=null;var o=V.p;V.p=2;var u=kt;kt|=4;try{$g(n,t);var m=gf,b=Ph(t.containerInfo),N=m.focusedElem,k=m.selectionRange;if(b!==N&&N&&N.ownerDocument&&Gh(N.ownerDocument.documentElement,N)){if(k!==null&&Iu(N)){var ne=k.start,pe=k.end;if(pe===void 0&&(pe=ne),"selectionStart"in N)N.selectionStart=ne,N.selectionEnd=Math.min(pe,N.value.length);else{var Se=N.ownerDocument||document,re=Se&&Se.defaultView||window;if(re.getSelection){var oe=re.getSelection(),Pe=N.textContent.length,st=Math.min(k.start,Pe),Qt=k.end===void 0?st:Math.min(k.end,Pe);!oe.extend&&st>Qt&&(b=Qt,Qt=st,st=b);var G=Zh(N,st),I=Zh(N,Qt);if(G&&I&&(oe.rangeCount!==1||oe.anchorNode!==G.node||oe.anchorOffset!==G.offset||oe.focusNode!==I.node||oe.focusOffset!==I.offset)){var ee=Se.createRange();ee.setStart(G.node,G.offset),oe.removeAllRanges(),st>Qt?(oe.addRange(ee),oe.extend(I.node,I.offset)):(ee.setEnd(I.node,I.offset),oe.addRange(ee))}}}}for(Se=[],oe=N;oe=oe.parentNode;)oe.nodeType===1&&Se.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<Se.length;N++){var xe=Se[N];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}Cc=!!pf,gf=pf=null}finally{kt=u,V.p=o,M.T=r}}t.current=n,Un=2}}function ob(){if(Un===2){Un=0;var t=ir,n=Ll,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=M.T,M.T=null;var o=V.p;V.p=2;var u=kt;kt|=4;try{Ug(t,n.alternate,n)}finally{kt=u,V.p=o,M.T=r}}Un=3}}function cb(){if(Un===4||Un===3){Un=0,L();var t=ir,n=Ll,r=qs,o=Yg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Un=5:(Un=0,Ll=ir=null,ub(t,t.pendingLanes));var u=t.pendingLanes;if(u===0&&(lr=null),Bt(r),n=n.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(ye,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=M.T,u=V.p,V.p=2,M.T=null;try{for(var m=t.onRecoverableError,b=0;b<o.length;b++){var N=o[b];m(N.value,{componentStack:N.stack})}}finally{M.T=n,V.p=u}}(qs&3)!==0&&gc(),ps(t),u=t.pendingLanes,(r&261930)!==0&&(u&42)!==0?t===tf?Fi++:(Fi=0,tf=t):Fi=0,Hi(0)}}function ub(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Si(n)))}function gc(){return ib(),ob(),cb(),db()}function db(){if(Un!==5)return!1;var t=ir,n=Wd;Wd=0;var r=Bt(qs),o=M.T,u=V.p;try{V.p=32>r?32:r,M.T=null,r=ef,ef=null;var m=ir,b=qs;if(Un=0,Ll=ir=null,qs=0,(kt&6)!==0)throw Error(i(331));var N=kt;if(kt|=4,Gg(m.current),Hg(m,m.current,b,r),kt=N,Hi(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(ye,m)}catch{}return!0}finally{V.p=u,M.T=o,ub(t,n)}}function fb(t,n,r){n=La(r,n),n=zd(t.stateNode,n,2),t=er(t,n,2),t!==null&&(Te(t,2),ps(t))}function $t(t,n,r){if(t.tag===3)fb(t,t,r);else for(;n!==null;){if(n.tag===3){fb(n,t,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(lr===null||!lr.has(o))){t=La(r,t),r=mg(2),o=er(n,r,2),o!==null&&(hg(r,o,n,t),Te(o,2),ps(o));break}}n=n.return}}function sf(t,n,r){var o=t.pingCache;if(o===null){o=t.pingCache=new nj;var u=new Set;o.set(n,u)}else u=o.get(n),u===void 0&&(u=new Set,o.set(n,u));u.has(r)||(Kd=!0,u.add(r),t=ij.bind(null,t,n,r),n.then(t,t))}function ij(t,n,r){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Kt===t&&(St&r)===r&&(yn===4||yn===3&&(St&62914560)===St&&300>$()-uc?(kt&2)===0&&Bl(t,0):Xd|=r,Ul===St&&(Ul=0)),ps(t)}function mb(t,n){n===0&&(n=J()),t=Tr(t,n),t!==null&&(Te(t,n),ps(t))}function oj(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),mb(t,r)}function cj(t,n){var r=0;switch(t.tag){case 31:case 13:var o=t.stateNode,u=t.memoizedState;u!==null&&(r=u.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(n),mb(t,r)}function uj(t,n){return R(t,n)}var bc=null,Il=null,rf=!1,vc=!1,lf=!1,cr=0;function ps(t){t!==Il&&t.next===null&&(Il===null?bc=Il=t:Il=Il.next=t),vc=!0,rf||(rf=!0,fj())}function Hi(t,n){if(!lf&&vc){lf=!0;do for(var r=!1,o=bc;o!==null;){if(t!==0){var u=o.pendingLanes;if(u===0)var m=0;else{var b=o.suspendedLanes,N=o.pingedLanes;m=(1<<31-_t(42|t)+1)-1,m&=u&~(b&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,bb(o,m))}else m=St,m=Vn(o,o===Kt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||Nn(o,m)||(r=!0,bb(o,m));o=o.next}while(r);lf=!1}}function dj(){hb()}function hb(){vc=rf=!1;var t=0;cr!==0&&jj()&&(t=cr);for(var n=$(),r=null,o=bc;o!==null;){var u=o.next,m=pb(o,n);m===0?(o.next=null,r===null?bc=u:r.next=u,u===null&&(Il=r)):(r=o,(t!==0||(m&3)!==0)&&(vc=!0)),o=u}Un!==0&&Un!==5||Hi(t),cr!==0&&(cr=0)}function pb(t,n){for(var r=t.suspendedLanes,o=t.pingedLanes,u=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-_t(m),N=1<<b,k=u[b];k===-1?((N&r)===0||(N&o)!==0)&&(u[b]=Zn(N,n)):k<=n&&(t.expiredLanes|=N),m&=~N}if(n=Kt,r=St,r=Vn(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===n&&(It===2||It===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&z(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Nn(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(o!==null&&z(o),Bt(r)){case 2:case 8:r=je;break;case 32:r=Z;break;case 268435456:r=qe;break;default:r=Z}return o=gb.bind(null,t),r=R(r,o),t.callbackPriority=n,t.callbackNode=r,n}return o!==null&&o!==null&&z(o),t.callbackPriority=2,t.callbackNode=null,2}function gb(t,n){if(Un!==0&&Un!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(gc()&&t.callbackNode!==r)return null;var o=St;return o=Vn(t,t===Kt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Xg(t,o,n),pb(t,$()),t.callbackNode!=null&&t.callbackNode===r?gb.bind(null,t):null)}function bb(t,n){if(gc())return null;Xg(t,n,!0)}function fj(){wj(function(){(kt&6)!==0?R(le,dj):hb()})}function of(){if(cr===0){var t=_l;t===0&&(t=In,In<<=1,(In&261888)===0&&(In=256)),cr=t}return cr}function vb(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:$n(""+t)}function yb(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function mj(t,n,r,o,u){if(n==="submit"&&r&&r.stateNode===u){var m=vb((u[yt]||null).action),b=o.submitter;b&&(n=(n=b[yt]||null)?vb(n.formAction):b.getAttribute("formAction"),n!==null&&(m=n,b=null));var N=new Sn("action","action",null,o,u);t.push({event:N,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(cr!==0){var k=b?yb(u,b):new FormData(u);Ad(r,{pending:!0,data:k,method:u.method,action:m},null,k)}}else typeof m=="function"&&(N.preventDefault(),k=b?yb(u,b):new FormData(u),Ad(r,{pending:!0,data:k,method:u.method,action:m},m,k))},currentTarget:u}]})}}for(var cf=0;cf<Vu.length;cf++){var uf=Vu[cf],hj=uf.toLowerCase(),pj=uf[0].toUpperCase()+uf.slice(1);es(hj,"on"+pj)}es(Kh,"onAnimationEnd"),es(Xh,"onAnimationIteration"),es(Jh,"onAnimationStart"),es("dblclick","onDoubleClick"),es("focusin","onFocus"),es("focusout","onBlur"),es(TN,"onTransitionRun"),es(DN,"onTransitionStart"),es(zN,"onTransitionCancel"),es(Wh,"onTransitionEnd"),Jn("onMouseEnter",["mouseout","mouseover"]),Jn("onMouseLeave",["mouseout","mouseover"]),Jn("onPointerEnter",["pointerout","pointerover"]),Jn("onPointerLeave",["pointerout","pointerover"]),Cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vi));function xb(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],u=o.event;o=o.listeners;e:{var m=void 0;if(n)for(var b=o.length-1;0<=b;b--){var N=o[b],k=N.instance,ne=N.currentTarget;if(N=N.listener,k!==m&&u.isPropagationStopped())break e;m=N,u.currentTarget=ne;try{m(u)}catch(pe){zo(pe)}u.currentTarget=null,m=k}else for(b=0;b<o.length;b++){if(N=o[b],k=N.instance,ne=N.currentTarget,N=N.listener,k!==m&&u.isPropagationStopped())break e;m=N,u.currentTarget=ne;try{m(u)}catch(pe){zo(pe)}u.currentTarget=null,m=k}}}}function Nt(t,n){var r=n[qt];r===void 0&&(r=n[qt]=new Set);var o=t+"__bubble";r.has(o)||(Nb(n,t,2,!1),r.add(o))}function df(t,n,r){var o=0;n&&(o|=4),Nb(r,t,o,n)}var yc="_reactListening"+Math.random().toString(36).slice(2);function ff(t){if(!t[yc]){t[yc]=!0,Xa.forEach(function(r){r!=="selectionchange"&&(gj.has(r)||df(r,!1,t),df(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[yc]||(n[yc]=!0,df("selectionchange",!1,n))}}function Nb(t,n,r,o){switch(Kb(n)){case 2:var u=Vj;break;case 8:u=Zj;break;default:u=Af}r=u.bind(null,n,r,t),u=void 0,!_a||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),o?u!==void 0?t.addEventListener(n,r,{capture:!0,passive:u}):t.addEventListener(n,r,!0):u!==void 0?t.addEventListener(n,r,{passive:u}):t.addEventListener(n,r,!1)}function mf(t,n,r,o,u){var m=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var b=o.tag;if(b===3||b===4){var N=o.stateNode.containerInfo;if(N===u)break;if(b===4)for(b=o.return;b!==null;){var k=b.tag;if((k===3||k===4)&&b.stateNode.containerInfo===u)return;b=b.return}for(;N!==null;){if(b=Lt(N),b===null)return;if(k=b.tag,k===5||k===6||k===26||k===27){o=m=b;continue e}N=N.parentNode}}o=o.return}Gs(function(){var ne=m,pe=ua(r),Se=[];e:{var re=ep.get(t);if(re!==void 0){var oe=Sn,Pe=t;switch(t){case"keypress":if(Le(r)===0)break e;case"keydown":case"keyup":oe=cN;break;case"focusin":Pe="focus",oe=Zt;break;case"focusout":Pe="blur",oe=Zt;break;case"beforeblur":case"afterblur":oe=Zt;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=de;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Ve;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=fN;break;case Kh:case Xh:case Jh:oe=ds;break;case Wh:oe=hN;break;case"scroll":case"scrollend":oe=ws;break;case"wheel":oe=gN;break;case"copy":case"cut":case"paste":oe=hl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Th;break;case"toggle":case"beforetoggle":oe=vN}var st=(n&4)!==0,Qt=!st&&(t==="scroll"||t==="scrollend"),G=st?re!==null?re+"Capture":null:re;st=[];for(var I=ne,ee;I!==null;){var xe=I;if(ee=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||ee===null||G===null||(xe=js(I,G),xe!=null&&st.push(Zi(I,xe,ee))),Qt)break;I=I.return}0<st.length&&(re=new oe(re,Pe,null,r,pe),Se.push({event:re,listeners:st}))}}if((n&7)===0){e:{if(re=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",re&&r!==wa&&(Pe=r.relatedTarget||r.fromElement)&&(Lt(Pe)||Pe[zt]))break e;if((oe||re)&&(re=pe.window===pe?pe:(re=pe.ownerDocument)?re.defaultView||re.parentWindow:window,oe?(Pe=r.relatedTarget||r.toElement,oe=ne,Pe=Pe?Lt(Pe):null,Pe!==null&&(Qt=d(Pe),st=Pe.tag,Pe!==Qt||st!==5&&st!==27&&st!==6)&&(Pe=null)):(oe=null,Pe=ne),oe!==Pe)){if(st=de,xe="onMouseLeave",G="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(st=Th,xe="onPointerLeave",G="onPointerEnter",I="pointer"),Qt=oe==null?re:Gn(oe),ee=Pe==null?re:Gn(Pe),re=new st(xe,I+"leave",oe,r,pe),re.target=Qt,re.relatedTarget=ee,xe=null,Lt(pe)===ne&&(st=new st(G,I+"enter",Pe,r,pe),st.target=ee,st.relatedTarget=Qt,xe=st),Qt=xe,oe&&Pe)t:{for(st=bj,G=oe,I=Pe,ee=0,xe=G;xe;xe=st(xe))ee++;xe=0;for(var tt=I;tt;tt=st(tt))xe++;for(;0<ee-xe;)G=st(G),ee--;for(;0<xe-ee;)I=st(I),xe--;for(;ee--;){if(G===I||I!==null&&G===I.alternate){st=G;break t}G=st(G),I=st(I)}st=null}else st=null;oe!==null&&jb(Se,re,oe,st,!1),Pe!==null&&Qt!==null&&jb(Se,Qt,Pe,st,!0)}}e:{if(re=ne?Gn(ne):window,oe=re.nodeName&&re.nodeName.toLowerCase(),oe==="select"||oe==="input"&&re.type==="file")var Tt=qh;else if(Lh(re))if(Ih)Tt=CN;else{Tt=EN;var Ke=_N}else oe=re.nodeName,!oe||oe.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ne&&Er(ne.elementType)&&(Tt=qh):Tt=AN;if(Tt&&(Tt=Tt(t,ne))){Bh(Se,Tt,r,pe);break e}Ke&&Ke(t,re,ne),t==="focusout"&&ne&&re.type==="number"&&ne.memoizedProps.value!=null&&Ns(re,"number",re.value)}switch(Ke=ne?Gn(ne):window,t){case"focusin":(Lh(Ke)||Ke.contentEditable==="true")&&(bl=Ke,$u=ne,xi=null);break;case"focusout":xi=$u=bl=null;break;case"mousedown":Fu=!0;break;case"contextmenu":case"mouseup":case"dragend":Fu=!1,Qh(Se,r,pe);break;case"selectionchange":if(RN)break;case"keydown":case"keyup":Qh(Se,r,pe)}var pt;if(Lu)e:{switch(t){case"compositionstart":var wt="onCompositionStart";break e;case"compositionend":wt="onCompositionEnd";break e;case"compositionupdate":wt="onCompositionUpdate";break e}wt=void 0}else gl?Mh(t,r)&&(wt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(wt="onCompositionStart");wt&&(Dh&&r.locale!=="ko"&&(gl||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&gl&&(pt=ge()):(Ma=pe,O="value"in Ma?Ma.value:Ma.textContent,gl=!0)),Ke=xc(ne,wt),0<Ke.length&&(wt=new To(wt,t,null,r,pe),Se.push({event:wt,listeners:Ke}),pt?wt.data=pt:(pt=Uh(r),pt!==null&&(wt.data=pt)))),(pt=xN?NN(t,r):jN(t,r))&&(wt=xc(ne,"onBeforeInput"),0<wt.length&&(Ke=new To("onBeforeInput","beforeinput",null,r,pe),Se.push({event:Ke,listeners:wt}),Ke.data=pt)),mj(Se,t,ne,r,pe)}xb(Se,n)})}function Zi(t,n,r){return{instance:t,listener:n,currentTarget:r}}function xc(t,n){for(var r=n+"Capture",o=[];t!==null;){var u=t,m=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||m===null||(u=js(t,r),u!=null&&o.unshift(Zi(t,u,m)),u=js(t,n),u!=null&&o.push(Zi(t,u,m))),t.tag===3)return o;t=t.return}return[]}function bj(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function jb(t,n,r,o,u){for(var m=n._reactName,b=[];r!==null&&r!==o;){var N=r,k=N.alternate,ne=N.stateNode;if(N=N.tag,k!==null&&k===o)break;N!==5&&N!==26&&N!==27||ne===null||(k=ne,u?(ne=js(r,m),ne!=null&&b.unshift(Zi(r,ne,k))):u||(ne=js(r,m),ne!=null&&b.push(Zi(r,ne,k)))),r=r.return}b.length!==0&&t.push({event:n,listeners:b})}var vj=/\r\n?/g,yj=/\u0000|\uFFFD/g;function Sb(t){return(typeof t=="string"?t:""+t).replace(vj,`
`).replace(yj,"")}function wb(t,n){return n=Sb(n),Sb(t)===n}function Pt(t,n,r,o,u,m){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||cs(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&cs(t,""+o);break;case"className":Sa(t,"class",o);break;case"tabIndex":Sa(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Sa(t,r,o);break;case"style":ul(t,o,m);break;case"data":if(n!=="object"){Sa(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=$n(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(n!=="input"&&Pt(t,n,"name",u.name,u,null),Pt(t,n,"formEncType",u.formEncType,u,null),Pt(t,n,"formMethod",u.formMethod,u,null),Pt(t,n,"formTarget",u.formTarget,u,null)):(Pt(t,n,"encType",u.encType,u,null),Pt(t,n,"method",u.method,u,null),Pt(t,n,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=$n(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=ca);break;case"onScroll":o!=null&&Nt("scroll",t);break;case"onScrollEnd":o!=null&&Nt("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(u.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=$n(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":Nt("beforetoggle",t),Nt("toggle",t),fn(t,"popover",o);break;case"xlinkActuate":Wn(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Wn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Wn(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Wn(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Wn(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Wn(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Wn(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Wn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Wn(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":fn(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=pi.get(r)||r,fn(t,r,o))}}function hf(t,n,r,o,u,m){switch(r){case"style":ul(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(u.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"children":typeof o=="string"?cs(t,o):(typeof o=="number"||typeof o=="bigint")&&cs(t,""+o);break;case"onScroll":o!=null&&Nt("scroll",t);break;case"onScrollEnd":o!=null&&Nt("scrollend",t);break;case"onClick":o!=null&&(t.onclick=ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rn.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(u=r.endsWith("Capture"),n=r.slice(2,u?r.length-7:void 0),m=t[yt]||null,m=m!=null?m[r]:null,typeof m=="function"&&t.removeEventListener(n,m,u),typeof o=="function")){typeof m!="function"&&m!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,o,u);break e}r in t?t[r]=o:o===!0?t.setAttribute(r,""):fn(t,r,o)}}}function Kn(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",t),Nt("load",t);var o=!1,u=!1,m;for(m in r)if(r.hasOwnProperty(m)){var b=r[m];if(b!=null)switch(m){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Pt(t,n,m,b,r,null)}}u&&Pt(t,n,"srcSet",r.srcSet,r,null),o&&Pt(t,n,"src",r.src,r,null);return;case"input":Nt("invalid",t);var N=m=b=u=null,k=null,ne=null;for(o in r)if(r.hasOwnProperty(o)){var pe=r[o];if(pe!=null)switch(o){case"name":u=pe;break;case"type":b=pe;break;case"checked":k=pe;break;case"defaultChecked":ne=pe;break;case"value":m=pe;break;case"defaultValue":N=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(i(137,n));break;default:Pt(t,n,o,pe,r,null)}}xs(t,m,N,k,ne,b,u,!1);return;case"select":Nt("invalid",t),o=b=m=null;for(u in r)if(r.hasOwnProperty(u)&&(N=r[u],N!=null))switch(u){case"value":m=N;break;case"defaultValue":b=N;break;case"multiple":o=N;default:Pt(t,n,u,N,r,null)}n=m,r=b,t.multiple=!!o,n!=null?os(t,!!o,n,!1):r!=null&&os(t,!!o,r,!0);return;case"textarea":Nt("invalid",t),m=u=o=null;for(b in r)if(r.hasOwnProperty(b)&&(N=r[b],N!=null))switch(b){case"value":o=N;break;case"defaultValue":u=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:Pt(t,n,b,N,r,null)}ol(t,o,u,m);return;case"option":for(k in r)if(r.hasOwnProperty(k)&&(o=r[k],o!=null))switch(k){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Pt(t,n,k,o,r,null)}return;case"dialog":Nt("beforetoggle",t),Nt("toggle",t),Nt("cancel",t),Nt("close",t);break;case"iframe":case"object":Nt("load",t);break;case"video":case"audio":for(o=0;o<Vi.length;o++)Nt(Vi[o],t);break;case"image":Nt("error",t),Nt("load",t);break;case"details":Nt("toggle",t);break;case"embed":case"source":case"link":Nt("error",t),Nt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in r)if(r.hasOwnProperty(ne)&&(o=r[ne],o!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Pt(t,n,ne,o,r,null)}return;default:if(Er(n)){for(pe in r)r.hasOwnProperty(pe)&&(o=r[pe],o!==void 0&&hf(t,n,pe,o,r,void 0));return}}for(N in r)r.hasOwnProperty(N)&&(o=r[N],o!=null&&Pt(t,n,N,o,r,null))}function xj(t,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,m=null,b=null,N=null,k=null,ne=null,pe=null;for(oe in r){var Se=r[oe];if(r.hasOwnProperty(oe)&&Se!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":k=Se;default:o.hasOwnProperty(oe)||Pt(t,n,oe,null,o,Se)}}for(var re in o){var oe=o[re];if(Se=r[re],o.hasOwnProperty(re)&&(oe!=null||Se!=null))switch(re){case"type":m=oe;break;case"name":u=oe;break;case"checked":ne=oe;break;case"defaultChecked":pe=oe;break;case"value":b=oe;break;case"defaultValue":N=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,n));break;default:oe!==Se&&Pt(t,n,re,oe,o,Se)}}_r(t,b,N,k,ne,pe,m,u);return;case"select":oe=b=N=re=null;for(m in r)if(k=r[m],r.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":oe=k;default:o.hasOwnProperty(m)||Pt(t,n,m,null,o,k)}for(u in o)if(m=o[u],k=r[u],o.hasOwnProperty(u)&&(m!=null||k!=null))switch(u){case"value":re=m;break;case"defaultValue":N=m;break;case"multiple":b=m;default:m!==k&&Pt(t,n,u,m,o,k)}n=N,r=b,o=oe,re!=null?os(t,!!r,re,!1):!!o!=!!r&&(n!=null?os(t,!!r,n,!0):os(t,!!r,r?[]:"",!1));return;case"textarea":oe=re=null;for(N in r)if(u=r[N],r.hasOwnProperty(N)&&u!=null&&!o.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Pt(t,n,N,null,o,u)}for(b in o)if(u=o[b],m=r[b],o.hasOwnProperty(b)&&(u!=null||m!=null))switch(b){case"value":re=u;break;case"defaultValue":oe=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(i(91));break;default:u!==m&&Pt(t,n,b,u,o,m)}il(t,re,oe);return;case"option":for(var Pe in r)if(re=r[Pe],r.hasOwnProperty(Pe)&&re!=null&&!o.hasOwnProperty(Pe))switch(Pe){case"selected":t.selected=!1;break;default:Pt(t,n,Pe,null,o,re)}for(k in o)if(re=o[k],oe=r[k],o.hasOwnProperty(k)&&re!==oe&&(re!=null||oe!=null))switch(k){case"selected":t.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:Pt(t,n,k,re,o,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in r)re=r[st],r.hasOwnProperty(st)&&re!=null&&!o.hasOwnProperty(st)&&Pt(t,n,st,null,o,re);for(ne in o)if(re=o[ne],oe=r[ne],o.hasOwnProperty(ne)&&re!==oe&&(re!=null||oe!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,n));break;default:Pt(t,n,ne,re,o,oe)}return;default:if(Er(n)){for(var Qt in r)re=r[Qt],r.hasOwnProperty(Qt)&&re!==void 0&&!o.hasOwnProperty(Qt)&&hf(t,n,Qt,void 0,o,re);for(pe in o)re=o[pe],oe=r[pe],!o.hasOwnProperty(pe)||re===oe||re===void 0&&oe===void 0||hf(t,n,pe,re,o,oe);return}}for(var G in r)re=r[G],r.hasOwnProperty(G)&&re!=null&&!o.hasOwnProperty(G)&&Pt(t,n,G,null,o,re);for(Se in o)re=o[Se],oe=r[Se],!o.hasOwnProperty(Se)||re===oe||re==null&&oe==null||Pt(t,n,Se,re,o,oe)}function _b(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Nj(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var u=r[o],m=u.transferSize,b=u.initiatorType,N=u.duration;if(m&&N&&_b(b)){for(b=0,N=u.responseEnd,o+=1;o<r.length;o++){var k=r[o],ne=k.startTime;if(ne>N)break;var pe=k.transferSize,Se=k.initiatorType;pe&&_b(Se)&&(k=k.responseEnd,b+=pe*(k<N?1:(N-ne)/(k-ne)))}if(--o,n+=8*(m+b)/(u.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var pf=null,gf=null;function Nc(t){return t.nodeType===9?t:t.ownerDocument}function Eb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ab(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function bf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var vf=null;function jj(){var t=window.event;return t&&t.type==="popstate"?t===vf?!1:(vf=t,!0):(vf=null,!1)}var Cb=typeof setTimeout=="function"?setTimeout:void 0,Sj=typeof clearTimeout=="function"?clearTimeout:void 0,Ob=typeof Promise=="function"?Promise:void 0,wj=typeof queueMicrotask=="function"?queueMicrotask:typeof Ob<"u"?function(t){return Ob.resolve(null).then(t).catch(_j)}:Cb;function _j(t){setTimeout(function(){throw t})}function ur(t){return t==="head"}function Rb(t,n){var r=n,o=0;do{var u=r.nextSibling;if(t.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"||r==="/&"){if(o===0){t.removeChild(u),Vl(n);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Gi(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Gi(r);for(var m=r.firstChild;m;){var b=m.nextSibling,N=m.nodeName;m[Ht]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=b}}else r==="body"&&Gi(t.ownerDocument.body);r=u}while(r);Vl(n)}function Tb(t,n){var r=t;t=0;do{var o=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=o}while(r)}function yf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":yf(r),Mn(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function Ej(t,n,r,o){for(;t.nodeType===1;){var u=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ht])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==u.rel||t.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||t.getAttribute("title")!==(u.title==null?null:u.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(u.src==null?null:u.src)||t.getAttribute("type")!==(u.type==null?null:u.type)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var m=u.name==null?null:""+u.name;if(u.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Fa(t.nextSibling),t===null)break}return null}function Aj(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Fa(t.nextSibling),t===null))return null;return t}function Db(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Fa(t.nextSibling),t===null))return null;return t}function xf(t){return t.data==="$?"||t.data==="$~"}function Nf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Cj(t,n){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||r.readyState!=="loading")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Fa(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var jf=null;function zb(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(n===0)return Fa(t.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}t=t.nextSibling}return null}function kb(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return t;n--}else r!=="/$"&&r!=="/&"||n++}t=t.previousSibling}return null}function Mb(t,n,r){switch(n=Nc(r),t){case"html":if(t=n.documentElement,!t)throw Error(i(452));return t;case"head":if(t=n.head,!t)throw Error(i(453));return t;case"body":if(t=n.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Gi(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Mn(t)}var Ha=new Map,Ub=new Set;function jc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Is=V.d;V.d={f:Oj,r:Rj,D:Tj,C:Dj,L:zj,m:kj,X:Uj,S:Mj,M:Lj};function Oj(){var t=Is.f(),n=mc();return t||n}function Rj(t){var n=sn(t);n!==null&&n.tag===5&&n.type==="form"?Wp(n):Is.r(t)}var $l=typeof document>"u"?null:document;function Lb(t,n,r){var o=$l;if(o&&typeof n=="string"&&n){var u=Vt(n);u='link[rel="'+t+'"][href="'+u+'"]',typeof r=="string"&&(u+='[crossorigin="'+r+'"]'),Ub.has(u)||(Ub.add(u),t={rel:t,crossOrigin:r,href:n},o.querySelector(u)===null&&(n=o.createElement("link"),Kn(n,"link",t),Et(n),o.head.appendChild(n)))}}function Tj(t){Is.D(t),Lb("dns-prefetch",t,null)}function Dj(t,n){Is.C(t,n),Lb("preconnect",t,n)}function zj(t,n,r){Is.L(t,n,r);var o=$l;if(o&&t&&n){var u='link[rel="preload"][as="'+Vt(n)+'"]';n==="image"&&r&&r.imageSrcSet?(u+='[imagesrcset="'+Vt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(u+='[imagesizes="'+Vt(r.imageSizes)+'"]')):u+='[href="'+Vt(t)+'"]';var m=u;switch(n){case"style":m=Fl(t);break;case"script":m=Hl(t)}Ha.has(m)||(t=x({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),Ha.set(m,t),o.querySelector(u)!==null||n==="style"&&o.querySelector(Pi(m))||n==="script"&&o.querySelector(Qi(m))||(n=o.createElement("link"),Kn(n,"link",t),Et(n),o.head.appendChild(n)))}}function kj(t,n){Is.m(t,n);var r=$l;if(r&&t){var o=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+Vt(o)+'"][href="'+Vt(t)+'"]',m=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Hl(t)}if(!Ha.has(m)&&(t=x({rel:"modulepreload",href:t},n),Ha.set(m,t),r.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Qi(m)))return}o=r.createElement("link"),Kn(o,"link",t),Et(o),r.head.appendChild(o)}}}function Mj(t,n,r){Is.S(t,n,r);var o=$l;if(o&&t){var u=jn(o).hoistableStyles,m=Fl(t);n=n||"default";var b=u.get(m);if(!b){var N={loading:0,preload:null};if(b=o.querySelector(Pi(m)))N.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":n},r),(r=Ha.get(m))&&Sf(t,r);var k=b=o.createElement("link");Et(k),Kn(k,"link",t),k._p=new Promise(function(ne,pe){k.onload=ne,k.onerror=pe}),k.addEventListener("load",function(){N.loading|=1}),k.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Sc(b,n,o)}b={type:"stylesheet",instance:b,count:1,state:N},u.set(m,b)}}}function Uj(t,n){Is.X(t,n);var r=$l;if(r&&t){var o=jn(r).hoistableScripts,u=Hl(t),m=o.get(u);m||(m=r.querySelector(Qi(u)),m||(t=x({src:t,async:!0},n),(n=Ha.get(u))&&wf(t,n),m=r.createElement("script"),Et(m),Kn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(u,m))}}function Lj(t,n){Is.M(t,n);var r=$l;if(r&&t){var o=jn(r).hoistableScripts,u=Hl(t),m=o.get(u);m||(m=r.querySelector(Qi(u)),m||(t=x({src:t,async:!0,type:"module"},n),(n=Ha.get(u))&&wf(t,n),m=r.createElement("script"),Et(m),Kn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(u,m))}}function Bb(t,n,r,o){var u=(u=Ne.current)?jc(u):null;if(!u)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Fl(r.href),r=jn(u).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Fl(r.href);var m=jn(u).hoistableStyles,b=m.get(t);if(b||(u=u.ownerDocument||u,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=u.querySelector(Pi(t)))&&!m._p&&(b.instance=m,b.state.loading=5),Ha.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Ha.set(t,r),m||Bj(u,t,r,b.state))),n&&o===null)throw Error(i(528,""));return b}if(n&&o!==null)throw Error(i(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Hl(r),r=jn(u).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Fl(t){return'href="'+Vt(t)+'"'}function Pi(t){return'link[rel="stylesheet"]['+t+"]"}function qb(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function Bj(t,n,r,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Kn(n,"link",r),Et(n),t.head.appendChild(n))}function Hl(t){return'[src="'+Vt(t)+'"]'}function Qi(t){return"script[async]"+t}function Ib(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+Vt(r.href)+'"]');if(o)return n.instance=o,Et(o),o;var u=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Et(o),Kn(o,"style",u),Sc(o,r.precedence,t),n.instance=o;case"stylesheet":u=Fl(r.href);var m=t.querySelector(Pi(u));if(m)return n.state.loading|=4,n.instance=m,Et(m),m;o=qb(r),(u=Ha.get(u))&&Sf(o,u),m=(t.ownerDocument||t).createElement("link"),Et(m);var b=m;return b._p=new Promise(function(N,k){b.onload=N,b.onerror=k}),Kn(m,"link",o),n.state.loading|=4,Sc(m,r.precedence,t),n.instance=m;case"script":return m=Hl(r.src),(u=t.querySelector(Qi(m)))?(n.instance=u,Et(u),u):(o=r,(u=Ha.get(m))&&(o=x({},r),wf(o,u)),t=t.ownerDocument||t,u=t.createElement("script"),Et(u),Kn(u,"link",o),t.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Sc(o,r.precedence,t));return n.instance}function Sc(t,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,m=u,b=0;b<o.length;b++){var N=o[b];if(N.dataset.precedence===n)m=N;else if(m!==u)break}m?m.parentNode.insertBefore(t,m.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function Sf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function wf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var wc=null;function $b(t,n,r){if(wc===null){var o=new Map,u=wc=new Map;u.set(r,o)}else u=wc,o=u.get(r),o||(o=new Map,u.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),u=0;u<r.length;u++){var m=r[u];if(!(m[Ht]||m[dt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(n)||"";b=t+b;var N=o.get(b);N?N.push(m):o.set(b,[m])}}return o}function Fb(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function qj(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Hb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Ij(t,n,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var u=Fl(o.href),m=n.querySelector(Pi(u));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=_c.bind(t),n.then(t,t)),r.state.loading|=4,r.instance=m,Et(m);return}m=n.ownerDocument||n,o=qb(o),(u=Ha.get(u))&&Sf(o,u),m=m.createElement("link"),Et(m);var b=m;b._p=new Promise(function(N,k){b.onload=N,b.onerror=k}),Kn(m,"link",o),r.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=_c.bind(t),n.addEventListener("load",r),n.addEventListener("error",r))}}var _f=0;function $j(t,n){return t.stylesheets&&t.count===0&&Ac(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var o=setTimeout(function(){if(t.stylesheets&&Ac(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+n);0<t.imgBytes&&_f===0&&(_f=62500*Nj());var u=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ac(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>_f?50:800)+n);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function _c(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ac(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ec=null;function Ac(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ec=new Map,n.forEach(Fj,t),Ec=null,_c.call(t))}function Fj(t,n){if(!(n.state.loading&4)){var r=Ec.get(t);if(r)var o=r.get(null);else{r=new Map,Ec.set(t,r);for(var u=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<u.length;m++){var b=u[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),o=b)}o&&r.set(null,o)}u=n.instance,b=u.getAttribute("data-precedence"),m=r.get(b)||o,m===o&&r.set(null,u),r.set(b,u),this.count++,o=_c.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),m?m.parentNode.insertBefore(u,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(u,t.firstChild)),n.state.loading|=4}}var Yi={$$typeof:te,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function Hj(t,n,r,o,u,m,b,N,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=se(0),this.hiddenUpdates=se(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Vb(t,n,r,o,u,m,b,N,k,ne,pe,Se){return t=new Hj(t,n,r,b,k,ne,pe,Se,N),n=1,m===!0&&(n|=24),m=Aa(3,null,null,n),t.current=m,m.stateNode=t,n=ad(),n.refCount++,t.pooledCache=n,n.refCount++,m.memoizedState={element:o,isDehydrated:r,cache:n},id(m),t}function Zb(t){return t?(t=xl,t):xl}function Gb(t,n,r,o,u,m){u=Zb(u),o.context===null?o.context=u:o.pendingContext=u,o=Ws(n),o.payload={element:r},m=m===void 0?null:m,m!==null&&(o.callback=m),r=er(t,o,n),r!==null&&(ga(r,t,n),Ai(r,t,n))}function Pb(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function Ef(t,n){Pb(t,n),(t=t.alternate)&&Pb(t,n)}function Qb(t){if(t.tag===13||t.tag===31){var n=Tr(t,67108864);n!==null&&ga(n,t,67108864),Ef(t,67108864)}}function Yb(t){if(t.tag===13||t.tag===31){var n=Da();n=Ct(n);var r=Tr(t,n);r!==null&&ga(r,t,n),Ef(t,n)}}var Cc=!0;function Vj(t,n,r,o){var u=M.T;M.T=null;var m=V.p;try{V.p=2,Af(t,n,r,o)}finally{V.p=m,M.T=u}}function Zj(t,n,r,o){var u=M.T;M.T=null;var m=V.p;try{V.p=8,Af(t,n,r,o)}finally{V.p=m,M.T=u}}function Af(t,n,r,o){if(Cc){var u=Cf(o);if(u===null)mf(t,n,o,Oc,r),Xb(t,o);else if(Pj(u,t,n,r,o))o.stopPropagation();else if(Xb(t,o),n&4&&-1<Gj.indexOf(t)){for(;u!==null;){var m=sn(u);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=dn(m.pendingLanes);if(b!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;b;){var k=1<<31-_t(b);N.entanglements[1]|=k,b&=~k}ps(m),(kt&6)===0&&(dc=$()+500,Hi(0))}}break;case 31:case 13:N=Tr(m,2),N!==null&&ga(N,m,2),mc(),Ef(m,2)}if(m=Cf(o),m===null&&mf(t,n,o,Oc,r),m===u)break;u=m}u!==null&&o.stopPropagation()}else mf(t,n,o,null,r)}}function Cf(t){return t=ua(t),Of(t)}var Oc=null;function Of(t){if(Oc=null,t=Lt(t),t!==null){var n=d(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=f(n),t!==null)return t;t=null}else if(r===31){if(t=h(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Oc=t,null}function Kb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(X()){case le:return 2;case je:return 8;case Z:case ke:return 32;case qe:return 268435456;default:return 32}default:return 32}}var Rf=!1,dr=null,fr=null,mr=null,Ki=new Map,Xi=new Map,hr=[],Gj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xb(t,n){switch(t){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Ki.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xi.delete(n.pointerId)}}function Ji(t,n,r,o,u,m){return t===null||t.nativeEvent!==m?(t={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:m,targetContainers:[u]},n!==null&&(n=sn(n),n!==null&&Qb(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),t)}function Pj(t,n,r,o,u){switch(n){case"focusin":return dr=Ji(dr,t,n,r,o,u),!0;case"dragenter":return fr=Ji(fr,t,n,r,o,u),!0;case"mouseover":return mr=Ji(mr,t,n,r,o,u),!0;case"pointerover":var m=u.pointerId;return Ki.set(m,Ji(Ki.get(m)||null,t,n,r,o,u)),!0;case"gotpointercapture":return m=u.pointerId,Xi.set(m,Ji(Xi.get(m)||null,t,n,r,o,u)),!0}return!1}function Jb(t){var n=Lt(t.target);if(n!==null){var r=d(n);if(r!==null){if(n=r.tag,n===13){if(n=f(r),n!==null){t.blockedOn=n,an(t.priority,function(){Yb(r)});return}}else if(n===31){if(n=h(r),n!==null){t.blockedOn=n,an(t.priority,function(){Yb(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rc(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=Cf(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);wa=o,r.target.dispatchEvent(o),wa=null}else return n=sn(r),n!==null&&Qb(n),t.blockedOn=r,!1;n.shift()}return!0}function Wb(t,n,r){Rc(t)&&r.delete(n)}function Qj(){Rf=!1,dr!==null&&Rc(dr)&&(dr=null),fr!==null&&Rc(fr)&&(fr=null),mr!==null&&Rc(mr)&&(mr=null),Ki.forEach(Wb),Xi.forEach(Wb)}function Tc(t,n){t.blockedOn===n&&(t.blockedOn=null,Rf||(Rf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Qj)))}var Dc=null;function ev(t){Dc!==t&&(Dc=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Dc===t&&(Dc=null);for(var n=0;n<t.length;n+=3){var r=t[n],o=t[n+1],u=t[n+2];if(typeof o!="function"){if(Of(o||r)===null)continue;break}var m=sn(r);m!==null&&(t.splice(n,3),n-=3,Ad(m,{pending:!0,data:u,method:r.method,action:o},o,u))}}))}function Vl(t){function n(k){return Tc(k,t)}dr!==null&&Tc(dr,t),fr!==null&&Tc(fr,t),mr!==null&&Tc(mr,t),Ki.forEach(n),Xi.forEach(n);for(var r=0;r<hr.length;r++){var o=hr[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<hr.length&&(r=hr[0],r.blockedOn===null);)Jb(r),r.blockedOn===null&&hr.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var u=r[o],m=r[o+1],b=u[yt]||null;if(typeof m=="function")b||ev(r);else if(b){var N=null;if(m&&m.hasAttribute("formAction")){if(u=m,b=m[yt]||null)N=b.formAction;else if(Of(u)!==null)continue}else N=b.action;typeof N=="function"?r[o+1]=N:(r.splice(o,3),o-=3),ev(r)}}}function tv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return u=b})},focusReset:"manual",scroll:"manual"})}function n(){u!==null&&(u(),u=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),u!==null&&(u(),u=null)}}}function Tf(t){this._internalRoot=t}zc.prototype.render=Tf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(i(409));var r=n.current,o=Da();Gb(r,o,t,n,null,null)},zc.prototype.unmount=Tf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Gb(t.current,2,null,t,null,null),mc(),n[zt]=null}};function zc(t){this._internalRoot=t}zc.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ot();t={blockedOn:null,target:t,priority:n};for(var r=0;r<hr.length&&n!==0&&n<hr[r].priority;r++);hr.splice(r,0,t),r===0&&Jb(t)}};var nv=a.version;if(nv!=="19.2.0")throw Error(i(527,nv,"19.2.0"));V.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=p(n),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var Yj={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kc.isDisabled&&kc.supportsFiber)try{ye=kc.inject(Yj),et=kc}catch{}}return eo.createRoot=function(t,n){if(!c(t))throw Error(i(299));var r=!1,o="",u=cg,m=ug,b=dg;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError)),n=Vb(t,1,!1,null,null,r,o,null,u,m,b,tv),t[zt]=n.current,ff(t),new Tf(n)},eo.hydrateRoot=function(t,n,r){if(!c(t))throw Error(i(299));var o=!1,u="",m=cg,b=ug,N=dg,k=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(N=r.onRecoverableError),r.formState!==void 0&&(k=r.formState)),n=Vb(t,1,!0,n,r??null,o,u,k,m,b,N,tv),n.context=Zb(null),r=n.current,o=Da(),o=Ct(o),u=Ws(o),u.callback=null,er(r,u,o),r=o,n.current.lanes=r,Te(n,r),ps(n),t[zt]=n.current,ff(t),new zc(n)},eo.version="19.2.0",eo}var fv;function rS(){if(fv)return kf.exports;fv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(a){console.error(a)}}return e(),kf.exports=sS(),kf.exports}var lS=rS();const iS=Xy(lS);var mv="popstate";function oS(e={}){function a(i,c){let{pathname:d,search:f,hash:h}=i.location;return pm("",{pathname:d,search:f,hash:h},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(i,c){return typeof c=="string"?c:fo(c)}return uS(a,s,null,e)}function cn(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function Pa(e,a){if(!e){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function cS(){return Math.random().toString(36).substring(2,10)}function hv(e,a){return{usr:e.state,key:e.key,idx:a}}function pm(e,a,s=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof a=="string"?ri(a):a,state:s,key:a&&a.key||i||cS()}}function fo({pathname:e="/",search:a="",hash:s=""}){return a&&a!=="?"&&(e+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ri(e){let a={};if(e){let s=e.indexOf("#");s>=0&&(a.hash=e.substring(s),e=e.substring(0,s));let i=e.indexOf("?");i>=0&&(a.search=e.substring(i),e=e.substring(0,i)),e&&(a.pathname=e)}return a}function uS(e,a,s,i={}){let{window:c=document.defaultView,v5Compat:d=!1}=i,f=c.history,h="POP",v=null,p=y();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function y(){return(f.state||{idx:null}).idx}function x(){h="POP";let T=y(),q=T==null?null:T-p;p=T,v&&v({action:h,location:C.location,delta:q})}function j(T,q){h="PUSH";let A=pm(C.location,T,q);p=y()+1;let te=hv(A,p),U=C.createHref(A);try{f.pushState(te,"",U)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;c.location.assign(U)}d&&v&&v({action:h,location:C.location,delta:1})}function F(T,q){h="REPLACE";let A=pm(C.location,T,q);p=y();let te=hv(A,p),U=C.createHref(A);f.replaceState(te,"",U),d&&v&&v({action:h,location:C.location,delta:0})}function E(T){return dS(T)}let C={get action(){return h},get location(){return e(c,f)},listen(T){if(v)throw new Error("A history only accepts one active listener");return c.addEventListener(mv,x),v=T,()=>{c.removeEventListener(mv,x),v=null}},createHref(T){return a(c,T)},createURL:E,encodeLocation(T){let q=E(T);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:j,replace:F,go(T){return f.go(T)}};return C}function dS(e,a=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),cn(s,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:fo(e);return i=i.replace(/ $/,"%20"),!a&&i.startsWith("//")&&(i=s+i),new URL(i,s)}function Jy(e,a,s="/"){return fS(e,a,s,!1)}function fS(e,a,s,i){let c=typeof a=="string"?ri(a):a,d=Hs(c.pathname||"/",s);if(d==null)return null;let f=Wy(e);mS(f);let h=null;for(let v=0;h==null&&v<f.length;++v){let p=wS(d);h=jS(f[v],p,i)}return h}function Wy(e,a=[],s=[],i="",c=!1){let d=(f,h,v=c,p)=>{let y={relativePath:p===void 0?f.path||"":p,caseSensitive:f.caseSensitive===!0,childrenIndex:h,route:f};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&v)return;cn(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let x=Fs([i,y.relativePath]),j=s.concat(y);f.children&&f.children.length>0&&(cn(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Wy(f.children,a,j,x,v)),!(f.path==null&&!f.index)&&a.push({path:x,score:xS(x,f.index),routesMeta:j})};return e.forEach((f,h)=>{if(f.path===""||!f.path?.includes("?"))d(f,h);else for(let v of ex(f.path))d(f,h,!0,v)}),a}function ex(e){let a=e.split("/");if(a.length===0)return[];let[s,...i]=a,c=s.endsWith("?"),d=s.replace(/\?$/,"");if(i.length===0)return c?[d,""]:[d];let f=ex(i.join("/")),h=[];return h.push(...f.map(v=>v===""?d:[d,v].join("/"))),c&&h.push(...f),h.map(v=>e.startsWith("/")&&v===""?"/":v)}function mS(e){e.sort((a,s)=>a.score!==s.score?s.score-a.score:NS(a.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}var hS=/^:[\w-]+$/,pS=3,gS=2,bS=1,vS=10,yS=-2,pv=e=>e==="*";function xS(e,a){let s=e.split("/"),i=s.length;return s.some(pv)&&(i+=yS),a&&(i+=gS),s.filter(c=>!pv(c)).reduce((c,d)=>c+(hS.test(d)?pS:d===""?bS:vS),i)}function NS(e,a){return e.length===a.length&&e.slice(0,-1).every((i,c)=>i===a[c])?e[e.length-1]-a[a.length-1]:0}function jS(e,a,s=!1){let{routesMeta:i}=e,c={},d="/",f=[];for(let h=0;h<i.length;++h){let v=i[h],p=h===i.length-1,y=d==="/"?a:a.slice(d.length)||"/",x=mo({path:v.relativePath,caseSensitive:v.caseSensitive,end:p},y),j=v.route;if(!x&&p&&s&&!i[i.length-1].route.index&&(x=mo({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},y)),!x)return null;Object.assign(c,x.params),f.push({params:c,pathname:Fs([d,x.pathname]),pathnameBase:CS(Fs([d,x.pathnameBase])),route:j}),x.pathnameBase!=="/"&&(d=Fs([d,x.pathnameBase]))}return f}function mo(e,a){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,i]=SS(e.path,e.caseSensitive,e.end),c=a.match(s);if(!c)return null;let d=c[0],f=d.replace(/(.)\/+$/,"$1"),h=c.slice(1);return{params:i.reduce((p,{paramName:y,isOptional:x},j)=>{if(y==="*"){let E=h[j]||"";f=d.slice(0,d.length-E.length).replace(/(.)\/+$/,"$1")}const F=h[j];return x&&!F?p[y]=void 0:p[y]=(F||"").replace(/%2F/g,"/"),p},{}),pathname:d,pathnameBase:f,pattern:e}}function SS(e,a=!1,s=!0){Pa(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,h,v)=>(i.push({paramName:h,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),i]}function wS(e){try{return e.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Pa(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),e}}function Hs(e,a){if(a==="/")return e;if(!e.toLowerCase().startsWith(a.toLowerCase()))return null;let s=a.endsWith("/")?a.length-1:a.length,i=e.charAt(s);return i&&i!=="/"?null:e.slice(s)||"/"}function _S(e,a="/"){let{pathname:s,search:i="",hash:c=""}=typeof e=="string"?ri(e):e;return{pathname:s?s.startsWith("/")?s:ES(s,a):a,search:OS(i),hash:RS(c)}}function ES(e,a){let s=a.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function Bf(e,a,s,i){return`Cannot include a '${e}' character in a manually specified \`to.${a}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function AS(e){return e.filter((a,s)=>s===0||a.route.path&&a.route.path.length>0)}function Qm(e){let a=AS(e);return a.map((s,i)=>i===a.length-1?s.pathname:s.pathnameBase)}function Ym(e,a,s,i=!1){let c;typeof e=="string"?c=ri(e):(c={...e},cn(!c.pathname||!c.pathname.includes("?"),Bf("?","pathname","search",c)),cn(!c.pathname||!c.pathname.includes("#"),Bf("#","pathname","hash",c)),cn(!c.search||!c.search.includes("#"),Bf("#","search","hash",c)));let d=e===""||c.pathname==="",f=d?"/":c.pathname,h;if(f==null)h=s;else{let x=a.length-1;if(!i&&f.startsWith("..")){let j=f.split("/");for(;j[0]==="..";)j.shift(),x-=1;c.pathname=j.join("/")}h=x>=0?a[x]:"/"}let v=_S(c,h),p=f&&f!=="/"&&f.endsWith("/"),y=(d||f===".")&&s.endsWith("/");return!v.pathname.endsWith("/")&&(p||y)&&(v.pathname+="/"),v}var Fs=e=>e.join("/").replace(/\/\/+/g,"/"),CS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),OS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,RS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function TS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var tx=["POST","PUT","PATCH","DELETE"];new Set(tx);var DS=["GET",...tx];new Set(DS);var li=g.createContext(null);li.displayName="DataRouter";var fu=g.createContext(null);fu.displayName="DataRouterState";g.createContext(!1);var nx=g.createContext({isTransitioning:!1});nx.displayName="ViewTransition";var zS=g.createContext(new Map);zS.displayName="Fetchers";var kS=g.createContext(null);kS.displayName="Await";var Qa=g.createContext(null);Qa.displayName="Navigation";var xo=g.createContext(null);xo.displayName="Location";var Ya=g.createContext({outlet:null,matches:[],isDataRoute:!1});Ya.displayName="Route";var Km=g.createContext(null);Km.displayName="RouteError";function MS(e,{relative:a}={}){cn(ii(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:i}=g.useContext(Qa),{hash:c,pathname:d,search:f}=No(e,{relative:a}),h=d;return s!=="/"&&(h=d==="/"?s:Fs([s,d])),i.createHref({pathname:h,search:f,hash:c})}function ii(){return g.useContext(xo)!=null}function ia(){return cn(ii(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(xo).location}var ax="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sx(e){g.useContext(Qa).static||g.useLayoutEffect(e)}function nl(){let{isDataRoute:e}=g.useContext(Ya);return e?XS():US()}function US(){cn(ii(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(li),{basename:a,navigator:s}=g.useContext(Qa),{matches:i}=g.useContext(Ya),{pathname:c}=ia(),d=JSON.stringify(Qm(i)),f=g.useRef(!1);return sx(()=>{f.current=!0}),g.useCallback((v,p={})=>{if(Pa(f.current,ax),!f.current)return;if(typeof v=="number"){s.go(v);return}let y=Ym(v,JSON.parse(d),c,p.relative==="path");e==null&&a!=="/"&&(y.pathname=y.pathname==="/"?a:Fs([a,y.pathname])),(p.replace?s.replace:s.push)(y,p.state,p)},[a,s,d,c,e])}var LS=g.createContext(null);function BS(e){let a=g.useContext(Ya).outlet;return g.useMemo(()=>a&&g.createElement(LS.Provider,{value:e},a),[a,e])}function qS(){let{matches:e}=g.useContext(Ya),a=e[e.length-1];return a?a.params:{}}function No(e,{relative:a}={}){let{matches:s}=g.useContext(Ya),{pathname:i}=ia(),c=JSON.stringify(Qm(s));return g.useMemo(()=>Ym(e,JSON.parse(c),i,a==="path"),[e,c,i,a])}function IS(e,a){return rx(e,a)}function rx(e,a,s,i,c){cn(ii(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=g.useContext(Qa),{matches:f}=g.useContext(Ya),h=f[f.length-1],v=h?h.params:{},p=h?h.pathname:"/",y=h?h.pathnameBase:"/",x=h&&h.route;{let A=x&&x.path||"";lx(p,!x||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let j=ia(),F;if(a){let A=typeof a=="string"?ri(a):a;cn(y==="/"||A.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${A.pathname}" was given in the \`location\` prop.`),F=A}else F=j;let E=F.pathname||"/",C=E;if(y!=="/"){let A=y.replace(/^\//,"").split("/");C="/"+E.replace(/^\//,"").split("/").slice(A.length).join("/")}let T=Jy(e,{pathname:C});Pa(x||T!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),Pa(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=ZS(T&&T.map(A=>Object.assign({},A,{params:Object.assign({},v,A.params),pathname:Fs([y,d.encodeLocation?d.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?y:Fs([y,d.encodeLocation?d.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),f,s,i,c);return a&&q?g.createElement(xo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},q):q}function $S(){let e=KS(),a=TS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:i},d={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",e),f=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:d},"ErrorBoundary")," or"," ",g.createElement("code",{style:d},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},a),s?g.createElement("pre",{style:c},s):null,f)}var FS=g.createElement($S,null),HS=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,a){return a.location!==e.location||a.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:a.error,location:a.location,revalidation:e.revalidation||a.revalidation}}componentDidCatch(e,a){this.props.unstable_onError?this.props.unstable_onError(e,a):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?g.createElement(Ya.Provider,{value:this.props.routeContext},g.createElement(Km.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function VS({routeContext:e,match:a,children:s}){let i=g.useContext(li);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),g.createElement(Ya.Provider,{value:e},s)}function ZS(e,a=[],s=null,i=null,c=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(a.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let d=e,f=s?.errors;if(f!=null){let p=d.findIndex(y=>y.route.id&&f?.[y.route.id]!==void 0);cn(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),d=d.slice(0,Math.min(d.length,p+1))}let h=!1,v=-1;if(s)for(let p=0;p<d.length;p++){let y=d[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(v=p),y.route.id){let{loaderData:x,errors:j}=s,F=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!j||j[y.route.id]===void 0);if(y.route.lazy||F){h=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((p,y,x)=>{let j,F=!1,E=null,C=null;s&&(j=f&&y.route.id?f[y.route.id]:void 0,E=y.route.errorElement||FS,h&&(v<0&&x===0?(lx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),F=!0,C=null):v===x&&(F=!0,C=y.route.hydrateFallbackElement||null)));let T=a.concat(d.slice(0,x+1)),q=()=>{let A;return j?A=E:F?A=C:y.route.Component?A=g.createElement(y.route.Component,null):y.route.element?A=y.route.element:A=p,g.createElement(VS,{match:y,routeContext:{outlet:p,matches:T,isDataRoute:s!=null},children:A})};return s&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?g.createElement(HS,{location:s.location,revalidation:s.revalidation,component:E,error:j,children:q(),routeContext:{outlet:null,matches:T,isDataRoute:!0},unstable_onError:i}):q()},null)}function Xm(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GS(e){let a=g.useContext(li);return cn(a,Xm(e)),a}function PS(e){let a=g.useContext(fu);return cn(a,Xm(e)),a}function QS(e){let a=g.useContext(Ya);return cn(a,Xm(e)),a}function Jm(e){let a=QS(e),s=a.matches[a.matches.length-1];return cn(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function YS(){return Jm("useRouteId")}function KS(){let e=g.useContext(Km),a=PS("useRouteError"),s=Jm("useRouteError");return e!==void 0?e:a.errors?.[s]}function XS(){let{router:e}=GS("useNavigate"),a=Jm("useNavigate"),s=g.useRef(!1);return sx(()=>{s.current=!0}),g.useCallback(async(c,d={})=>{Pa(s.current,ax),s.current&&(typeof c=="number"?e.navigate(c):await e.navigate(c,{fromRouteId:a,...d}))},[e,a])}var gv={};function lx(e,a,s){!a&&!gv[e]&&(gv[e]=!0,Pa(!1,s))}g.memo(JS);function JS({routes:e,future:a,state:s,unstable_onError:i}){return rx(e,void 0,s,i,a)}function xr({to:e,replace:a,state:s,relative:i}){cn(ii(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=g.useContext(Qa);Pa(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=g.useContext(Ya),{pathname:f}=ia(),h=nl(),v=Ym(e,Qm(d),f,i==="path"),p=JSON.stringify(v);return g.useEffect(()=>{h(JSON.parse(p),{replace:a,state:s,relative:i})},[h,p,i,a,s]),null}function ix(e){return BS(e.context)}function mn(e){cn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function WS({basename:e="/",children:a=null,location:s,navigationType:i="POP",navigator:c,static:d=!1}){cn(!ii(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),h=g.useMemo(()=>({basename:f,navigator:c,static:d,future:{}}),[f,c,d]);typeof s=="string"&&(s=ri(s));let{pathname:v="/",search:p="",hash:y="",state:x=null,key:j="default"}=s,F=g.useMemo(()=>{let E=Hs(v,f);return E==null?null:{location:{pathname:E,search:p,hash:y,state:x,key:j},navigationType:i}},[f,v,p,y,x,j,i]);return Pa(F!=null,`<Router basename="${f}"> is not able to match the URL "${v}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:g.createElement(Qa.Provider,{value:h},g.createElement(xo.Provider,{children:a,value:F}))}function ew({children:e,location:a}){return IS(gm(e),a)}function gm(e,a=[]){let s=[];return g.Children.forEach(e,(i,c)=>{if(!g.isValidElement(i))return;let d=[...a,c];if(i.type===g.Fragment){s.push.apply(s,gm(i.props.children,d));return}cn(i.type===mn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),cn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||d.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=gm(i.props.children,d)),s.push(f)}),s}var Zc="get",Gc="application/x-www-form-urlencoded";function mu(e){return e!=null&&typeof e.tagName=="string"}function tw(e){return mu(e)&&e.tagName.toLowerCase()==="button"}function nw(e){return mu(e)&&e.tagName.toLowerCase()==="form"}function aw(e){return mu(e)&&e.tagName.toLowerCase()==="input"}function sw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function rw(e,a){return e.button===0&&(!a||a==="_self")&&!sw(e)}function bm(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((a,s)=>{let i=e[s];return a.concat(Array.isArray(i)?i.map(c=>[s,c]):[[s,i]])},[]))}function lw(e,a){let s=bm(e);return a&&a.forEach((i,c)=>{s.has(c)||a.getAll(c).forEach(d=>{s.append(c,d)})}),s}var Mc=null;function iw(){if(Mc===null)try{new FormData(document.createElement("form"),0),Mc=!1}catch{Mc=!0}return Mc}var ow=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qf(e){return e!=null&&!ow.has(e)?(Pa(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gc}"`),null):e}function cw(e,a){let s,i,c,d,f;if(nw(e)){let h=e.getAttribute("action");i=h?Hs(h,a):null,s=e.getAttribute("method")||Zc,c=qf(e.getAttribute("enctype"))||Gc,d=new FormData(e)}else if(tw(e)||aw(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=e.getAttribute("formaction")||h.getAttribute("action");if(i=v?Hs(v,a):null,s=e.getAttribute("formmethod")||h.getAttribute("method")||Zc,c=qf(e.getAttribute("formenctype"))||qf(h.getAttribute("enctype"))||Gc,d=new FormData(h,e),!iw()){let{name:p,type:y,value:x}=e;if(y==="image"){let j=p?`${p}.`:"";d.append(`${j}x`,"0"),d.append(`${j}y`,"0")}else p&&d.append(p,x)}}else{if(mu(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Zc,i=null,c=Gc,f=e}return d&&c==="text/plain"&&(f=d,d=void 0),{action:i,method:s.toLowerCase(),encType:c,formData:d,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wm(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function uw(e,a,s){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${s}`:a&&Hs(i.pathname,a)==="/"?i.pathname=`${a.replace(/\/$/,"")}/_root.${s}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${s}`,i}async function dw(e,a){if(e.id in a)return a[e.id];try{let s=await import(e.module);return a[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function mw(e,a,s){let i=await Promise.all(e.map(async c=>{let d=a.routes[c.route.id];if(d){let f=await dw(d,s);return f.links?f.links():[]}return[]}));return bw(i.flat(1).filter(fw).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function bv(e,a,s,i,c,d){let f=(v,p)=>s[p]?v.route.id!==s[p].route.id:!0,h=(v,p)=>s[p].pathname!==v.pathname||s[p].route.path?.endsWith("*")&&s[p].params["*"]!==v.params["*"];return d==="assets"?a.filter((v,p)=>f(v,p)||h(v,p)):d==="data"?a.filter((v,p)=>{let y=i.routes[v.route.id];if(!y||!y.hasLoader)return!1;if(f(v,p)||h(v,p))return!0;if(v.route.shouldRevalidate){let x=v.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function hw(e,a,{includeHydrateFallback:s}={}){return pw(e.map(i=>{let c=a.routes[i.route.id];if(!c)return[];let d=[c.module];return c.clientActionModule&&(d=d.concat(c.clientActionModule)),c.clientLoaderModule&&(d=d.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(d=d.concat(c.hydrateFallbackModule)),c.imports&&(d=d.concat(c.imports)),d}).flat(1))}function pw(e){return[...new Set(e)]}function gw(e){let a={},s=Object.keys(e).sort();for(let i of s)a[i]=e[i];return a}function bw(e,a){let s=new Set;return new Set(a),e.reduce((i,c)=>{let d=JSON.stringify(gw(c));return s.has(d)||(s.add(d),i.push({key:d,link:c})),i},[])}function ox(){let e=g.useContext(li);return Wm(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function vw(){let e=g.useContext(fu);return Wm(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var eh=g.createContext(void 0);eh.displayName="FrameworkContext";function cx(){let e=g.useContext(eh);return Wm(e,"You must render this element inside a <HydratedRouter> element"),e}function yw(e,a){let s=g.useContext(eh),[i,c]=g.useState(!1),[d,f]=g.useState(!1),{onFocus:h,onBlur:v,onMouseEnter:p,onMouseLeave:y,onTouchStart:x}=a,j=g.useRef(null);g.useEffect(()=>{if(e==="render"&&f(!0),e==="viewport"){let C=q=>{q.forEach(A=>{f(A.isIntersecting)})},T=new IntersectionObserver(C,{threshold:.5});return j.current&&T.observe(j.current),()=>{T.disconnect()}}},[e]),g.useEffect(()=>{if(i){let C=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(C)}}},[i]);let F=()=>{c(!0)},E=()=>{c(!1),f(!1)};return s?e!=="intent"?[d,j,{}]:[d,j,{onFocus:to(h,F),onBlur:to(v,E),onMouseEnter:to(p,F),onMouseLeave:to(y,E),onTouchStart:to(x,F)}]:[!1,j,{}]}function to(e,a){return s=>{e&&e(s),s.defaultPrevented||a(s)}}function xw({page:e,...a}){let{router:s}=ox(),i=g.useMemo(()=>Jy(s.routes,e,s.basename),[s.routes,e,s.basename]);return i?g.createElement(jw,{page:e,matches:i,...a}):null}function Nw(e){let{manifest:a,routeModules:s}=cx(),[i,c]=g.useState([]);return g.useEffect(()=>{let d=!1;return mw(e,a,s).then(f=>{d||c(f)}),()=>{d=!0}},[e,a,s]),i}function jw({page:e,matches:a,...s}){let i=ia(),{manifest:c,routeModules:d}=cx(),{basename:f}=ox(),{loaderData:h,matches:v}=vw(),p=g.useMemo(()=>bv(e,a,v,c,i,"data"),[e,a,v,c,i]),y=g.useMemo(()=>bv(e,a,v,c,i,"assets"),[e,a,v,c,i]),x=g.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let E=new Set,C=!1;if(a.forEach(q=>{let A=c.routes[q.route.id];!A||!A.hasLoader||(!p.some(te=>te.route.id===q.route.id)&&q.route.id in h&&d[q.route.id]?.shouldRevalidate||A.hasClientLoader?C=!0:E.add(q.route.id))}),E.size===0)return[];let T=uw(e,f,"data");return C&&E.size>0&&T.searchParams.set("_routes",a.filter(q=>E.has(q.route.id)).map(q=>q.route.id).join(",")),[T.pathname+T.search]},[f,h,i,c,p,a,e,d]),j=g.useMemo(()=>hw(y,c),[y,c]),F=Nw(y);return g.createElement(g.Fragment,null,x.map(E=>g.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...s})),j.map(E=>g.createElement("link",{key:E,rel:"modulepreload",href:E,...s})),F.map(({key:E,link:C})=>g.createElement("link",{key:E,nonce:s.nonce,...C})))}function Sw(...e){return a=>{e.forEach(s=>{typeof s=="function"?s(a):s!=null&&(s.current=a)})}}var ux=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ux&&(window.__reactRouterVersion="7.9.5")}catch{}function ww({basename:e,children:a,window:s}){let i=g.useRef();i.current==null&&(i.current=oS({window:s,v5Compat:!0}));let c=i.current,[d,f]=g.useState({action:c.action,location:c.location}),h=g.useCallback(v=>{g.startTransition(()=>f(v))},[f]);return g.useLayoutEffect(()=>c.listen(h),[c,h]),g.createElement(WS,{basename:e,children:a,location:d.location,navigationType:d.action,navigator:c})}var dx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kc=g.forwardRef(function({onClick:a,discover:s="render",prefetch:i="none",relative:c,reloadDocument:d,replace:f,state:h,target:v,to:p,preventScrollReset:y,viewTransition:x,...j},F){let{basename:E}=g.useContext(Qa),C=typeof p=="string"&&dx.test(p),T,q=!1;if(typeof p=="string"&&C&&(T=p,ux))try{let fe=new URL(window.location.href),De=p.startsWith("//")?new URL(fe.protocol+p):new URL(p),_e=Hs(De.pathname,E);De.origin===fe.origin&&_e!=null?p=_e+De.search+De.hash:q=!0}catch{Pa(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=MS(p,{relative:c}),[te,U,D]=yw(i,j),P=Aw(p,{replace:f,state:h,target:v,preventScrollReset:y,relative:c,viewTransition:x});function B(fe){a&&a(fe),fe.defaultPrevented||P(fe)}let W=g.createElement("a",{...j,...D,href:T||A,onClick:q||d?a:B,ref:Sw(F,U),target:v,"data-discover":!C&&s==="render"?"true":void 0});return te&&!C?g.createElement(g.Fragment,null,W,g.createElement(xw,{page:A})):W});Kc.displayName="Link";var fx=g.forwardRef(function({"aria-current":a="page",caseSensitive:s=!1,className:i="",end:c=!1,style:d,to:f,viewTransition:h,children:v,...p},y){let x=No(f,{relative:p.relative}),j=ia(),F=g.useContext(fu),{navigator:E,basename:C}=g.useContext(Qa),T=F!=null&&Dw(x)&&h===!0,q=E.encodeLocation?E.encodeLocation(x).pathname:x.pathname,A=j.pathname,te=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;s||(A=A.toLowerCase(),te=te?te.toLowerCase():null,q=q.toLowerCase()),te&&C&&(te=Hs(te,C)||te);const U=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let D=A===q||!c&&A.startsWith(q)&&A.charAt(U)==="/",P=te!=null&&(te===q||!c&&te.startsWith(q)&&te.charAt(q.length)==="/"),B={isActive:D,isPending:P,isTransitioning:T},W=D?a:void 0,fe;typeof i=="function"?fe=i(B):fe=[i,D?"active":null,P?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let De=typeof d=="function"?d(B):d;return g.createElement(Kc,{...p,"aria-current":W,className:fe,ref:y,style:De,to:f,viewTransition:h},typeof v=="function"?v(B):v)});fx.displayName="NavLink";var _w=g.forwardRef(({discover:e="render",fetcherKey:a,navigate:s,reloadDocument:i,replace:c,state:d,method:f=Zc,action:h,onSubmit:v,relative:p,preventScrollReset:y,viewTransition:x,...j},F)=>{let E=Rw(),C=Tw(h,{relative:p}),T=f.toLowerCase()==="get"?"get":"post",q=typeof h=="string"&&dx.test(h),A=te=>{if(v&&v(te),te.defaultPrevented)return;te.preventDefault();let U=te.nativeEvent.submitter,D=U?.getAttribute("formmethod")||f;E(U||te.currentTarget,{fetcherKey:a,method:D,navigate:s,replace:c,state:d,relative:p,preventScrollReset:y,viewTransition:x})};return g.createElement("form",{ref:F,method:T,action:C,onSubmit:i?v:A,...j,"data-discover":!q&&e==="render"?"true":void 0})});_w.displayName="Form";function Ew(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mx(e){let a=g.useContext(li);return cn(a,Ew(e)),a}function Aw(e,{target:a,replace:s,state:i,preventScrollReset:c,relative:d,viewTransition:f}={}){let h=nl(),v=ia(),p=No(e,{relative:d});return g.useCallback(y=>{if(rw(y,a)){y.preventDefault();let x=s!==void 0?s:fo(v)===fo(p);h(e,{replace:x,state:i,preventScrollReset:c,relative:d,viewTransition:f})}},[v,h,p,s,i,a,e,c,d,f])}function hx(e){Pa(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=g.useRef(bm(e)),s=g.useRef(!1),i=ia(),c=g.useMemo(()=>lw(i.search,s.current?null:a.current),[i.search]),d=nl(),f=g.useCallback((h,v)=>{const p=bm(typeof h=="function"?h(new URLSearchParams(c)):h);s.current=!0,d("?"+p,v)},[d,c]);return[c,f]}var Cw=0,Ow=()=>`__${String(++Cw)}__`;function Rw(){let{router:e}=mx("useSubmit"),{basename:a}=g.useContext(Qa),s=YS();return g.useCallback(async(i,c={})=>{let{action:d,method:f,encType:h,formData:v,body:p}=cw(i,a);if(c.navigate===!1){let y=c.fetcherKey||Ow();await e.fetch(y,s,c.action||d,{preventScrollReset:c.preventScrollReset,formData:v,body:p,formMethod:c.method||f,formEncType:c.encType||h,flushSync:c.flushSync})}else await e.navigate(c.action||d,{preventScrollReset:c.preventScrollReset,formData:v,body:p,formMethod:c.method||f,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:s,flushSync:c.flushSync,viewTransition:c.viewTransition})},[e,a,s])}function Tw(e,{relative:a}={}){let{basename:s}=g.useContext(Qa),i=g.useContext(Ya);cn(i,"useFormAction must be used inside a RouteContext");let[c]=i.matches.slice(-1),d={...No(e||".",{relative:a})},f=ia();if(e==null){d.search=f.search;let h=new URLSearchParams(d.search),v=h.getAll("index");if(v.some(y=>y==="")){h.delete("index"),v.filter(x=>x).forEach(x=>h.append("index",x));let y=h.toString();d.search=y?`?${y}`:""}}return(!e||e===".")&&c.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(d.pathname=d.pathname==="/"?s:Fs([s,d.pathname])),fo(d)}function Dw(e,{relative:a}={}){let s=g.useContext(nx);cn(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=mx("useViewTransitionState"),c=No(e,{relative:a});if(!s.isTransitioning)return!1;let d=Hs(s.currentLocation.pathname,i)||s.currentLocation.pathname,f=Hs(s.nextLocation.pathname,i)||s.nextLocation.pathname;return mo(c.pathname,f)!=null||mo(c.pathname,d)!=null}var oi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},zw={setTimeout:(e,a)=>setTimeout(e,a),clearTimeout:e=>clearTimeout(e),setInterval:(e,a)=>setInterval(e,a),clearInterval:e=>clearInterval(e)},kw=class{#e=zw;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,a){return this.#e.setTimeout(e,a)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,a){return this.#e.setInterval(e,a)}clearInterval(e){this.#e.clearInterval(e)}},Zr=new kw;function Mw(e){setTimeout(e,0)}var Yr=typeof window>"u"||"Deno"in globalThis;function la(){}function Uw(e,a){return typeof e=="function"?e(a):e}function vm(e){return typeof e=="number"&&e>=0&&e!==1/0}function px(e,a){return Math.max(e+(a||0)-Date.now(),0)}function Nr(e,a){return typeof e=="function"?e(a):e}function Va(e,a){return typeof e=="function"?e(a):e}function vv(e,a){const{type:s="all",exact:i,fetchStatus:c,predicate:d,queryKey:f,stale:h}=e;if(f){if(i){if(a.queryHash!==th(f,a.options))return!1}else if(!ho(a.queryKey,f))return!1}if(s!=="all"){const v=a.isActive();if(s==="active"&&!v||s==="inactive"&&v)return!1}return!(typeof h=="boolean"&&a.isStale()!==h||c&&c!==a.state.fetchStatus||d&&!d(a))}function yv(e,a){const{exact:s,status:i,predicate:c,mutationKey:d}=e;if(d){if(!a.options.mutationKey)return!1;if(s){if(Kr(a.options.mutationKey)!==Kr(d))return!1}else if(!ho(a.options.mutationKey,d))return!1}return!(i&&a.state.status!==i||c&&!c(a))}function th(e,a){return(a?.queryKeyHashFn||Kr)(e)}function Kr(e){return JSON.stringify(e,(a,s)=>ym(s)?Object.keys(s).sort().reduce((i,c)=>(i[c]=s[c],i),{}):s)}function ho(e,a){return e===a?!0:typeof e!=typeof a?!1:e&&a&&typeof e=="object"&&typeof a=="object"?Object.keys(a).every(s=>ho(e[s],a[s])):!1}var Lw=Object.prototype.hasOwnProperty;function gx(e,a){if(e===a)return e;const s=xv(e)&&xv(a);if(!s&&!(ym(e)&&ym(a)))return a;const c=(s?e:Object.keys(e)).length,d=s?a:Object.keys(a),f=d.length,h=s?new Array(f):{};let v=0;for(let p=0;p<f;p++){const y=s?p:d[p],x=e[y],j=a[y];if(x===j){h[y]=x,(s?p<c:Lw.call(e,y))&&v++;continue}if(x===null||j===null||typeof x!="object"||typeof j!="object"){h[y]=j;continue}const F=gx(x,j);h[y]=F,F===x&&v++}return c===f&&v===c?e:h}function Xc(e,a){if(!a||Object.keys(e).length!==Object.keys(a).length)return!1;for(const s in e)if(e[s]!==a[s])return!1;return!0}function xv(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ym(e){if(!Nv(e))return!1;const a=e.constructor;if(a===void 0)return!0;const s=a.prototype;return!(!Nv(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Nv(e){return Object.prototype.toString.call(e)==="[object Object]"}function Bw(e){return new Promise(a=>{Zr.setTimeout(a,e)})}function xm(e,a,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,a):s.structuralSharing!==!1?gx(e,a):a}function qw(e,a,s=0){const i=[...e,a];return s&&i.length>s?i.slice(1):i}function Iw(e,a,s=0){const i=[a,...e];return s&&i.length>s?i.slice(0,-1):i}var nh=Symbol();function bx(e,a){return!e.queryFn&&a?.initialPromise?()=>a.initialPromise:!e.queryFn||e.queryFn===nh?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function vx(e,a){return typeof e=="function"?e(...a):!!e}var $w=class extends oi{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Yr&&window.addEventListener){const a=()=>e();return window.addEventListener("visibilitychange",a,!1),()=>{window.removeEventListener("visibilitychange",a)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(a=>{a(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},ah=new $w;function Nm(){let e,a;const s=new Promise((c,d)=>{e=c,a=d});s.status="pending",s.catch(()=>{});function i(c){Object.assign(s,c),delete s.resolve,delete s.reject}return s.resolve=c=>{i({status:"fulfilled",value:c}),e(c)},s.reject=c=>{i({status:"rejected",reason:c}),a(c)},s}var Fw=Mw;function Hw(){let e=[],a=0,s=h=>{h()},i=h=>{h()},c=Fw;const d=h=>{a?e.push(h):c(()=>{s(h)})},f=()=>{const h=e;e=[],h.length&&c(()=>{i(()=>{h.forEach(v=>{s(v)})})})};return{batch:h=>{let v;a++;try{v=h()}finally{a--,a||f()}return v},batchCalls:h=>(...v)=>{d(()=>{h(...v)})},schedule:d,setNotifyFunction:h=>{s=h},setBatchNotifyFunction:h=>{i=h},setScheduler:h=>{c=h}}}var Ln=Hw(),Vw=class extends oi{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Yr&&window.addEventListener){const a=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",a,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#e}},Jc=new Vw;function Zw(e){return Math.min(1e3*2**e,3e4)}function yx(e){return(e??"online")==="online"?Jc.isOnline():!0}var jm=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function xx(e){let a=!1,s=0,i;const c=Nm(),d=()=>c.status!=="pending",f=C=>{if(!d()){const T=new jm(C);j(T),e.onCancel?.(T)}},h=()=>{a=!0},v=()=>{a=!1},p=()=>ah.isFocused()&&(e.networkMode==="always"||Jc.isOnline())&&e.canRun(),y=()=>yx(e.networkMode)&&e.canRun(),x=C=>{d()||(i?.(),c.resolve(C))},j=C=>{d()||(i?.(),c.reject(C))},F=()=>new Promise(C=>{i=T=>{(d()||p())&&C(T)},e.onPause?.()}).then(()=>{i=void 0,d()||e.onContinue?.()}),E=()=>{if(d())return;let C;const T=s===0?e.initialPromise:void 0;try{C=T??e.fn()}catch(q){C=Promise.reject(q)}Promise.resolve(C).then(x).catch(q=>{if(d())return;const A=e.retry??(Yr?0:3),te=e.retryDelay??Zw,U=typeof te=="function"?te(s,q):te,D=A===!0||typeof A=="number"&&s<A||typeof A=="function"&&A(s,q);if(a||!D){j(q);return}s++,e.onFail?.(s,q),Bw(U).then(()=>p()?void 0:F()).then(()=>{a?j(q):E()})})};return{promise:c,status:()=>c.status,cancel:f,continue:()=>(i?.(),c),cancelRetry:h,continueRetry:v,canStart:y,start:()=>(y()?E():F().then(E),c)}}var Nx=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),vm(this.gcTime)&&(this.#e=Zr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Yr?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Zr.clearTimeout(this.#e),this.#e=void 0)}},Gw=class extends Nx{#e;#t;#n;#s;#a;#l;#i;constructor(e){super(),this.#i=!1,this.#l=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Sv(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(e){if(this.options={...this.#l,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const a=Sv(this.options);a.data!==void 0&&(this.setState(jv(a.data,a.dataUpdatedAt)),this.#e=a)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,a){const s=xm(this.state.data,e,this.options);return this.#r({data:s,type:"success",dataUpdatedAt:a?.updatedAt,manual:a?.manual}),s}setState(e,a){this.#r({type:"setState",state:e,setStateOptions:a})}cancel(e){const a=this.#a?.promise;return this.#a?.cancel(e),a?a.then(la).catch(la):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Va(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===nh||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Nr(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!px(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(a=>a.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(a=>a.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(a=>a!==e),this.observers.length||(this.#a&&(this.#i?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}async fetch(e,a){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&a?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(v=>v.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(this.#i=!0,s.signal)})},c=()=>{const h=bx(this.options,a),p=(()=>{const y={client:this.#s,queryKey:this.queryKey,meta:this.meta};return i(y),y})();return this.#i=!1,this.options.persister?this.options.persister(h,p,this):h(p)},f=(()=>{const h={fetchOptions:a,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:c};return i(h),h})();this.options.behavior?.onFetch(f,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==f.fetchOptions?.meta)&&this.#r({type:"fetch",meta:f.fetchOptions?.meta}),this.#a=xx({initialPromise:a?.initialPromise,fn:f.fetchFn,onCancel:h=>{h instanceof jm&&h.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(h,v)=>{this.#r({type:"failed",failureCount:h,error:v})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0});try{const h=await this.#a.start();if(h===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(h),this.#n.config.onSuccess?.(h,this),this.#n.config.onSettled?.(h,this.state.error,this),h}catch(h){if(h instanceof jm){if(h.silent)return this.#a.promise;if(h.revert){if(this.state.data===void 0)throw h;return this.state.data}}throw this.#r({type:"error",error:h}),this.#n.config.onError?.(h,this),this.#n.config.onSettled?.(this.state.data,h,this),h}finally{this.scheduleGc()}}#r(e){const a=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...jx(s.data,this.options),fetchMeta:e.meta??null};case"success":const i={...s,...jv(e.data,e.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?i:void 0,i;case"error":const c=e.error;return{...s,error:c,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=a(this.state),Ln.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function jx(e,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:yx(a.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function jv(e,a){return{data:e,dataUpdatedAt:a??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Sv(e){const a=typeof e.initialData=="function"?e.initialData():e.initialData,s=a!==void 0,i=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:s?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Pw=class extends oi{constructor(e,a){super(),this.options=a,this.#e=e,this.#r=null,this.#i=Nm(),this.bindMethods(),this.setOptions(a)}#e;#t=void 0;#n=void 0;#s=void 0;#a;#l;#i;#r;#p;#f;#m;#c;#u;#o;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),wv(this.#t,this.options)?this.#d():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Sm(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Sm(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#N(),this.#t.removeObserver(this)}setOptions(e){const a=this.options,s=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Va(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),a._defaulted&&!Xc(this.options,a)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&_v(this.#t,s,this.options,a)&&this.#d(),this.updateResult(),i&&(this.#t!==s||Va(this.options.enabled,this.#t)!==Va(a.enabled,this.#t)||Nr(this.options.staleTime,this.#t)!==Nr(a.staleTime,this.#t))&&this.#g();const c=this.#b();i&&(this.#t!==s||Va(this.options.enabled,this.#t)!==Va(a.enabled,this.#t)||c!==this.#o)&&this.#v(c)}getOptimisticResult(e){const a=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(a,e);return Yw(this,s)&&(this.#s=s,this.#l=this.options,this.#a=this.#t.state),s}getCurrentResult(){return this.#s}trackResult(e,a){return new Proxy(e,{get:(s,i)=>(this.trackProp(i),a?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,i))})}trackProp(e){this.#h.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const a=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,a);return s.fetch().then(()=>this.createResult(s,a))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(e){this.#j();let a=this.#t.fetch(this.options,e);return e?.throwOnError||(a=a.catch(la)),a}#g(){this.#x();const e=Nr(this.options.staleTime,this.#t);if(Yr||this.#s.isStale||!vm(e))return;const s=px(this.#s.dataUpdatedAt,e)+1;this.#c=Zr.setTimeout(()=>{this.#s.isStale||this.updateResult()},s)}#b(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#N(),this.#o=e,!(Yr||Va(this.options.enabled,this.#t)===!1||!vm(this.#o)||this.#o===0)&&(this.#u=Zr.setInterval(()=>{(this.options.refetchIntervalInBackground||ah.isFocused())&&this.#d()},this.#o))}#y(){this.#g(),this.#v(this.#b())}#x(){this.#c&&(Zr.clearTimeout(this.#c),this.#c=void 0)}#N(){this.#u&&(Zr.clearInterval(this.#u),this.#u=void 0)}createResult(e,a){const s=this.#t,i=this.options,c=this.#s,d=this.#a,f=this.#l,v=e!==s?e.state:this.#n,{state:p}=e;let y={...p},x=!1,j;if(a._optimisticResults){const W=this.hasListeners(),fe=!W&&wv(e,a),De=W&&_v(e,s,a,i);(fe||De)&&(y={...y,...jx(p.data,e.options)}),a._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:F,errorUpdatedAt:E,status:C}=y;j=y.data;let T=!1;if(a.placeholderData!==void 0&&j===void 0&&C==="pending"){let W;c?.isPlaceholderData&&a.placeholderData===f?.placeholderData?(W=c.data,T=!0):W=typeof a.placeholderData=="function"?a.placeholderData(this.#m?.state.data,this.#m):a.placeholderData,W!==void 0&&(C="success",j=xm(c?.data,W,a),x=!0)}if(a.select&&j!==void 0&&!T)if(c&&j===d?.data&&a.select===this.#p)j=this.#f;else try{this.#p=a.select,j=a.select(j),j=xm(c?.data,j,a),this.#f=j,this.#r=null}catch(W){this.#r=W}this.#r&&(F=this.#r,j=this.#f,E=Date.now(),C="error");const q=y.fetchStatus==="fetching",A=C==="pending",te=C==="error",U=A&&q,D=j!==void 0,B={status:C,fetchStatus:y.fetchStatus,isPending:A,isSuccess:C==="success",isError:te,isInitialLoading:U,isLoading:U,data:j,dataUpdatedAt:y.dataUpdatedAt,error:F,errorUpdatedAt:E,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>v.dataUpdateCount||y.errorUpdateCount>v.errorUpdateCount,isFetching:q,isRefetching:q&&!A,isLoadingError:te&&!D,isPaused:y.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:te&&D,isStale:sh(e,a),refetch:this.refetch,promise:this.#i,isEnabled:Va(a.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const W=_e=>{B.status==="error"?_e.reject(B.error):B.data!==void 0&&_e.resolve(B.data)},fe=()=>{const _e=this.#i=B.promise=Nm();W(_e)},De=this.#i;switch(De.status){case"pending":e.queryHash===s.queryHash&&W(De);break;case"fulfilled":(B.status==="error"||B.data!==De.value)&&fe();break;case"rejected":(B.status!=="error"||B.error!==De.reason)&&fe();break}}return B}updateResult(){const e=this.#s,a=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#l=this.options,this.#a.data!==void 0&&(this.#m=this.#t),Xc(a,e))return;this.#s=a;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,c=typeof i=="function"?i():i;if(c==="all"||!c&&!this.#h.size)return!0;const d=new Set(c??this.#h);return this.options.throwOnError&&d.add("error"),Object.keys(this.#s).some(f=>{const h=f;return this.#s[h]!==e[h]&&d.has(h)})};this.#S({listeners:s()})}#j(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const a=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(a?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#S(e){Ln.batch(()=>{e.listeners&&this.listeners.forEach(a=>{a(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Qw(e,a){return Va(a.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&a.retryOnMount===!1)}function wv(e,a){return Qw(e,a)||e.state.data!==void 0&&Sm(e,a,a.refetchOnMount)}function Sm(e,a,s){if(Va(a.enabled,e)!==!1&&Nr(a.staleTime,e)!=="static"){const i=typeof s=="function"?s(e):s;return i==="always"||i!==!1&&sh(e,a)}return!1}function _v(e,a,s,i){return(e!==a||Va(i.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&sh(e,s)}function sh(e,a){return Va(a.enabled,e)!==!1&&e.isStaleByTime(Nr(a.staleTime,e))}function Yw(e,a){return!Xc(e.getCurrentResult(),a)}function Ev(e){return{onFetch:(a,s)=>{const i=a.options,c=a.fetchOptions?.meta?.fetchMore?.direction,d=a.state.data?.pages||[],f=a.state.data?.pageParams||[];let h={pages:[],pageParams:[]},v=0;const p=async()=>{let y=!1;const x=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(a.signal.aborted?y=!0:a.signal.addEventListener("abort",()=>{y=!0}),a.signal)})},j=bx(a.options,a.fetchOptions),F=async(E,C,T)=>{if(y)return Promise.reject();if(C==null&&E.pages.length)return Promise.resolve(E);const A=(()=>{const P={client:a.client,queryKey:a.queryKey,pageParam:C,direction:T?"backward":"forward",meta:a.options.meta};return x(P),P})(),te=await j(A),{maxPages:U}=a.options,D=T?Iw:qw;return{pages:D(E.pages,te,U),pageParams:D(E.pageParams,C,U)}};if(c&&d.length){const E=c==="backward",C=E?Kw:Av,T={pages:d,pageParams:f},q=C(i,T);h=await F(T,q,E)}else{const E=e??d.length;do{const C=v===0?f[0]??i.initialPageParam:Av(i,h);if(v>0&&C==null)break;h=await F(h,C),v++}while(v<E)}return h};a.options.persister?a.fetchFn=()=>a.options.persister?.(p,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},s):a.fetchFn=p}}}function Av(e,{pages:a,pageParams:s}){const i=a.length-1;return a.length>0?e.getNextPageParam(a[i],a,s[i],s):void 0}function Kw(e,{pages:a,pageParams:s}){return a.length>0?e.getPreviousPageParam?.(a[0],a,s[0],s):void 0}var Xw=class extends Nx{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||Sx(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(a=>a!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const a=()=>{this.#a({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=xx({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(d,f)=>{this.#a({type:"failed",failureCount:d,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:a,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",c=!this.#s.canStart();try{if(i)a();else{this.#a({type:"pending",variables:e,isPaused:c}),await this.#n.config.onMutate?.(e,this,s);const f=await this.options.onMutate?.(e,s);f!==this.state.context&&this.#a({type:"pending",context:f,variables:e,isPaused:c})}const d=await this.#s.start();return await this.#n.config.onSuccess?.(d,e,this.state.context,this,s),await this.options.onSuccess?.(d,e,this.state.context,s),await this.#n.config.onSettled?.(d,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(d,null,e,this.state.context,s),this.#a({type:"success",data:d}),d}catch(d){try{throw await this.#n.config.onError?.(d,e,this.state.context,this,s),await this.options.onError?.(d,e,this.state.context,s),await this.#n.config.onSettled?.(void 0,d,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,d,e,this.state.context,s),d}finally{this.#a({type:"error",error:d})}}finally{this.#n.runNext(this)}}#a(e){const a=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=a(this.state),Ln.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function Sx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Jw=class extends oi{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,a,s){const i=new Xw({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(a),state:s});return this.add(i),i}add(e){this.#e.add(e);const a=Uc(e);if(typeof a=="string"){const s=this.#t.get(a);s?s.push(e):this.#t.set(a,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const a=Uc(e);if(typeof a=="string"){const s=this.#t.get(a);if(s)if(s.length>1){const i=s.indexOf(e);i!==-1&&s.splice(i,1)}else s[0]===e&&this.#t.delete(a)}}this.notify({type:"removed",mutation:e})}canRun(e){const a=Uc(e);if(typeof a=="string"){const i=this.#t.get(a)?.find(c=>c.state.status==="pending");return!i||i===e}else return!0}runNext(e){const a=Uc(e);return typeof a=="string"?this.#t.get(a)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ln.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const a={exact:!0,...e};return this.getAll().find(s=>yv(a,s))}findAll(e={}){return this.getAll().filter(a=>yv(e,a))}notify(e){Ln.batch(()=>{this.listeners.forEach(a=>{a(e)})})}resumePausedMutations(){const e=this.getAll().filter(a=>a.state.isPaused);return Ln.batch(()=>Promise.all(e.map(a=>a.continue().catch(la))))}};function Uc(e){return e.options.scope?.id}var Ww=class extends oi{#e;#t=void 0;#n;#s;constructor(a,s){super(),this.#e=a,this.setOptions(s),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){const s=this.options;this.options=this.#e.defaultMutationOptions(a),Xc(this.options,s)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),s?.mutationKey&&this.options.mutationKey&&Kr(s.mutationKey)!==Kr(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(a){this.#a(),this.#l(a)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#a(),this.#l()}mutate(a,s){return this.#s=s,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(a)}#a(){const a=this.#n?.state??Sx();this.#t={...a,isPending:a.status==="pending",isSuccess:a.status==="success",isError:a.status==="error",isIdle:a.status==="idle",mutate:this.mutate,reset:this.reset}}#l(a){Ln.batch(()=>{if(this.#s&&this.hasListeners()){const s=this.#t.variables,i=this.#t.context,c={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};a?.type==="success"?(this.#s.onSuccess?.(a.data,s,i,c),this.#s.onSettled?.(a.data,null,s,i,c)):a?.type==="error"&&(this.#s.onError?.(a.error,s,i,c),this.#s.onSettled?.(void 0,a.error,s,i,c))}this.listeners.forEach(s=>{s(this.#t)})})}},e_=class extends oi{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,a,s){const i=a.queryKey,c=a.queryHash??th(i,a);let d=this.get(c);return d||(d=new Gw({client:e,queryKey:i,queryHash:c,options:e.defaultQueryOptions(a),state:s,defaultOptions:e.getQueryDefaults(i)}),this.add(d)),d}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const a=this.#e.get(e.queryHash);a&&(e.destroy(),a===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ln.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const a={exact:!0,...e};return this.getAll().find(s=>vv(a,s))}findAll(e={}){const a=this.getAll();return Object.keys(e).length>0?a.filter(s=>vv(e,s)):a}notify(e){Ln.batch(()=>{this.listeners.forEach(a=>{a(e)})})}onFocus(){Ln.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ln.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},t_=class{#e;#t;#n;#s;#a;#l;#i;#r;constructor(e={}){this.#e=e.queryCache||new e_,this.#t=e.mutationCache||new Jw,this.#n=e.defaultOptions||{},this.#s=new Map,this.#a=new Map,this.#l=0}mount(){this.#l++,this.#l===1&&(this.#i=ah.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#r=Jc.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#l--,this.#l===0&&(this.#i?.(),this.#i=void 0,this.#r?.(),this.#r=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const a=this.defaultQueryOptions({queryKey:e});return this.#e.get(a.queryHash)?.state.data}ensureQueryData(e){const a=this.defaultQueryOptions(e),s=this.#e.build(this,a),i=s.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(Nr(a.staleTime,s))&&this.prefetchQuery(a),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:a,state:s})=>{const i=s.data;return[a,i]})}setQueryData(e,a,s){const i=this.defaultQueryOptions({queryKey:e}),d=this.#e.get(i.queryHash)?.state.data,f=Uw(a,d);if(f!==void 0)return this.#e.build(this,i).setData(f,{...s,manual:!0})}setQueriesData(e,a,s){return Ln.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,a,s)]))}getQueryState(e){const a=this.defaultQueryOptions({queryKey:e});return this.#e.get(a.queryHash)?.state}removeQueries(e){const a=this.#e;Ln.batch(()=>{a.findAll(e).forEach(s=>{a.remove(s)})})}resetQueries(e,a){const s=this.#e;return Ln.batch(()=>(s.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},a)))}cancelQueries(e,a={}){const s={revert:!0,...a},i=Ln.batch(()=>this.#e.findAll(e).map(c=>c.cancel(s)));return Promise.all(i).then(la).catch(la)}invalidateQueries(e,a={}){return Ln.batch(()=>(this.#e.findAll(e).forEach(s=>{s.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},a)))}refetchQueries(e,a={}){const s={...a,cancelRefetch:a.cancelRefetch??!0},i=Ln.batch(()=>this.#e.findAll(e).filter(c=>!c.isDisabled()&&!c.isStatic()).map(c=>{let d=c.fetch(void 0,s);return s.throwOnError||(d=d.catch(la)),c.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(i).then(la)}fetchQuery(e){const a=this.defaultQueryOptions(e);a.retry===void 0&&(a.retry=!1);const s=this.#e.build(this,a);return s.isStaleByTime(Nr(a.staleTime,s))?s.fetch(a):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(la).catch(la)}fetchInfiniteQuery(e){return e.behavior=Ev(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(la).catch(la)}ensureInfiniteQueryData(e){return e.behavior=Ev(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Jc.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,a){this.#s.set(Kr(e),{queryKey:e,defaultOptions:a})}getQueryDefaults(e){const a=[...this.#s.values()],s={};return a.forEach(i=>{ho(e,i.queryKey)&&Object.assign(s,i.defaultOptions)}),s}setMutationDefaults(e,a){this.#a.set(Kr(e),{mutationKey:e,defaultOptions:a})}getMutationDefaults(e){const a=[...this.#a.values()],s={};return a.forEach(i=>{ho(e,i.mutationKey)&&Object.assign(s,i.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const a={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return a.queryHash||(a.queryHash=th(a.queryKey,a)),a.refetchOnReconnect===void 0&&(a.refetchOnReconnect=a.networkMode!=="always"),a.throwOnError===void 0&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===nh&&(a.enabled=!1),a}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},wx=g.createContext(void 0),rh=e=>{const a=g.useContext(wx);if(!a)throw new Error("No QueryClient set, use QueryClientProvider to set one");return a},n_=({client:e,children:a})=>(g.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),l.jsx(wx.Provider,{value:e,children:a})),_x=g.createContext(!1),a_=()=>g.useContext(_x);_x.Provider;function s_(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var r_=g.createContext(s_()),l_=()=>g.useContext(r_),i_=(e,a)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(a.isReset()||(e.retryOnMount=!1))},o_=e=>{g.useEffect(()=>{e.clearReset()},[e])},c_=({result:e,errorResetBoundary:a,throwOnError:s,query:i,suspense:c})=>e.isError&&!a.isReset()&&!e.isFetching&&i&&(c&&e.data===void 0||vx(s,[e.error,i])),u_=e=>{if(e.suspense){const s=c=>c==="static"?c:Math.max(c??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...c)=>s(i(...c)):s(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},d_=(e,a)=>e.isLoading&&e.isFetching&&!a,f_=(e,a)=>e?.suspense&&a.isPending,Cv=(e,a,s)=>a.fetchOptimistic(e).catch(()=>{s.clearReset()});function m_(e,a,s){const i=a_(),c=l_(),d=rh(),f=d.defaultQueryOptions(e);d.getDefaultOptions().queries?._experimental_beforeQuery?.(f),f._optimisticResults=i?"isRestoring":"optimistic",u_(f),i_(f,c),o_(c);const h=!d.getQueryCache().get(f.queryHash),[v]=g.useState(()=>new a(d,f)),p=v.getOptimisticResult(f),y=!i&&e.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(x=>{const j=y?v.subscribe(Ln.batchCalls(x)):la;return v.updateResult(),j},[v,y]),()=>v.getCurrentResult(),()=>v.getCurrentResult()),g.useEffect(()=>{v.setOptions(f)},[f,v]),f_(f,p))throw Cv(f,v,c);if(c_({result:p,errorResetBoundary:c,throwOnError:f.throwOnError,query:d.getQueryCache().get(f.queryHash),suspense:f.suspense}))throw p.error;return d.getDefaultOptions().queries?._experimental_afterQuery?.(f,p),f.experimental_prefetchInRender&&!Yr&&d_(p,i)&&(h?Cv(f,v,c):d.getQueryCache().get(f.queryHash)?.promise)?.catch(la).finally(()=>{v.updateResult()}),f.notifyOnChangeProps?p:v.trackResult(p)}function Xr(e,a){return m_(e,Pw)}function h_(e,a){const s=rh(),[i]=g.useState(()=>new Ww(s,e));g.useEffect(()=>{i.setOptions(e)},[i,e]);const c=g.useSyncExternalStore(g.useCallback(f=>i.subscribe(Ln.batchCalls(f)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),d=g.useCallback((f,h)=>{i.mutate(f,h).catch(la)},[i]);if(c.error&&vx(i.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:d,mutateAsync:c.mutate}}var jo=e=>e.type==="checkbox",Gr=e=>e instanceof Date,va=e=>e==null;const Ex=e=>typeof e=="object";var zn=e=>!va(e)&&!Array.isArray(e)&&Ex(e)&&!Gr(e),p_=e=>zn(e)&&e.target?jo(e.target)?e.target.checked:e.target.value:e,g_=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,b_=(e,a)=>e.has(g_(a)),v_=e=>{const a=e.constructor&&e.constructor.prototype;return zn(a)&&a.hasOwnProperty("isPrototypeOf")},lh=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function on(e){let a;const s=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)a=new Date(e);else if(!(lh&&(e instanceof Blob||i))&&(s||zn(e)))if(a=s?[]:Object.create(Object.getPrototypeOf(e)),!s&&!v_(e))a=e;else for(const c in e)e.hasOwnProperty(c)&&(a[c]=on(e[c]));else return e;return a}var hu=e=>/^\w*$/.test(e),nn=e=>e===void 0,pu=e=>Array.isArray(e)?e.filter(Boolean):[],ih=e=>pu(e.replace(/["|']|\]/g,"").split(/\.|\[/)),$e=(e,a,s)=>{if(!a||!zn(e))return s;const i=(hu(a)?[a]:ih(a)).reduce((c,d)=>va(c)?c:c[d],e);return nn(i)||i===e?nn(e[a])?s:e[a]:i},bs=e=>typeof e=="boolean",Ft=(e,a,s)=>{let i=-1;const c=hu(a)?[a]:ih(a),d=c.length,f=d-1;for(;++i<d;){const h=c[i];let v=s;if(i!==f){const p=e[h];v=zn(p)||Array.isArray(p)?p:isNaN(+c[i+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;e[h]=v,e=e[h]}};const Ov={BLUR:"blur",FOCUS_OUT:"focusout"},Za={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},$s={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ax=gt.createContext(null);Ax.displayName="HookFormContext";const Cx=()=>gt.useContext(Ax);var y_=(e,a,s,i=!0)=>{const c={defaultValues:a._defaultValues};for(const d in e)Object.defineProperty(c,d,{get:()=>{const f=d;return a._proxyFormState[f]!==Za.all&&(a._proxyFormState[f]=!i||Za.all),e[f]}});return c};const oh=typeof window<"u"?gt.useLayoutEffect:gt.useEffect;var za=e=>typeof e=="string",wm=(e,a,s,i,c)=>za(e)?(i&&a.watch.add(e),$e(s,e,c)):Array.isArray(e)?e.map(d=>(i&&a.watch.add(d),$e(s,d))):(i&&(a.watchAll=!0),s),_m=e=>va(e)||!Ex(e);function as(e,a,s=new WeakSet){if(_m(e)||_m(a))return e===a;if(Gr(e)&&Gr(a))return e.getTime()===a.getTime();const i=Object.keys(e),c=Object.keys(a);if(i.length!==c.length)return!1;if(s.has(e)||s.has(a))return!0;s.add(e),s.add(a);for(const d of i){const f=e[d];if(!c.includes(d))return!1;if(d!=="ref"){const h=a[d];if(Gr(f)&&Gr(h)||zn(f)&&zn(h)||Array.isArray(f)&&Array.isArray(h)?!as(f,h,s):f!==h)return!1}}return!0}function no(e){const a=Cx(),{control:s=a.control,name:i,defaultValue:c,disabled:d,exact:f,compute:h}=e||{},v=gt.useRef(c),p=gt.useRef(h),y=gt.useRef(void 0),x=gt.useRef(s),j=gt.useRef(i);p.current=h;const[F,E]=gt.useState(()=>{const U=s._getWatch(i,v.current);return p.current?p.current(U):U}),C=gt.useCallback(U=>{const D=wm(i,s._names,U||s._formValues,!1,v.current);return p.current?p.current(D):D},[s._formValues,s._names,i]),T=gt.useCallback(U=>{if(!d){const D=wm(i,s._names,U||s._formValues,!1,v.current);if(p.current){const P=p.current(D);as(P,y.current)||(E(P),y.current=P)}else E(D)}},[s._formValues,s._names,d,i]);oh(()=>((x.current!==s||!as(j.current,i))&&(x.current=s,j.current=i,T()),s._subscribe({name:i,formState:{values:!0},exact:f,callback:U=>{T(U.values)}})),[s,f,i,T]),gt.useEffect(()=>s._removeUnmounted());const q=x.current!==s,A=j.current,te=gt.useMemo(()=>{if(d)return null;const U=!q&&!as(A,i);return q||U?C():null},[d,q,i,A,C]);return te!==null?te:F}var ch=(e,a,s,i,c)=>a?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[i]:c||!0}}:{},ya=e=>Array.isArray(e)?e:[e],Rv=()=>{let e=[];return{get observers(){return e},next:c=>{for(const d of e)d.next&&d.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(d=>d!==c)}}),unsubscribe:()=>{e=[]}}};function Ox(e,a){const s={};for(const i in e)if(e.hasOwnProperty(i)){const c=e[i],d=a[i];if(c&&zn(c)&&d){const f=Ox(c,d);zn(f)&&(s[i]=f)}else e[i]&&(s[i]=d)}return s}var ta=e=>zn(e)&&!Object.keys(e).length,uh=e=>e.type==="file",ss=e=>typeof e=="function",Wc=e=>{if(!lh)return!1;const a=e?e.ownerDocument:0;return e instanceof(a&&a.defaultView?a.defaultView.HTMLElement:HTMLElement)},Rx=e=>e.type==="select-multiple",dh=e=>e.type==="radio",x_=e=>dh(e)||jo(e),If=e=>Wc(e)&&e.isConnected;function N_(e,a){const s=a.slice(0,-1).length;let i=0;for(;i<s;)e=nn(e)?i++:e[a[i++]];return e}function j_(e){for(const a in e)if(e.hasOwnProperty(a)&&!nn(e[a]))return!1;return!0}function En(e,a){const s=Array.isArray(a)?a:hu(a)?[a]:ih(a),i=s.length===1?e:N_(e,s),c=s.length-1,d=s[c];return i&&delete i[d],c!==0&&(zn(i)&&ta(i)||Array.isArray(i)&&j_(i))&&En(e,s.slice(0,-1)),e}var S_=e=>{for(const a in e)if(ss(e[a]))return!0;return!1};function Tx(e){return Array.isArray(e)||zn(e)&&!S_(e)}function Em(e,a={}){for(const s in e)Tx(e[s])?(a[s]=Array.isArray(e[s])?[]:{},Em(e[s],a[s])):nn(e[s])||(a[s]=!0);return a}function Xl(e,a,s){s||(s=Em(a));for(const i in e)Tx(e[i])?nn(a)||_m(s[i])?s[i]=Em(e[i],Array.isArray(e[i])?[]:{}):Xl(e[i],va(a)?{}:a[i],s[i]):s[i]=!as(e[i],a[i]);return s}const Tv={value:!1,isValid:!1},Dv={value:!0,isValid:!0};var Dx=e=>{if(Array.isArray(e)){if(e.length>1){const a=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:a,isValid:!!a.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!nn(e[0].attributes.value)?nn(e[0].value)||e[0].value===""?Dv:{value:e[0].value,isValid:!0}:Dv:Tv}return Tv},zx=(e,{valueAsNumber:a,valueAsDate:s,setValueAs:i})=>nn(e)?e:a?e===""?NaN:e&&+e:s&&za(e)?new Date(e):i?i(e):e;const zv={isValid:!1,value:null};var kx=e=>Array.isArray(e)?e.reduce((a,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:a,zv):zv;function kv(e){const a=e.ref;return uh(a)?a.files:dh(a)?kx(e.refs).value:Rx(a)?[...a.selectedOptions].map(({value:s})=>s):jo(a)?Dx(e.refs).value:zx(nn(a.value)?e.ref.value:a.value,e)}var w_=(e,a,s,i)=>{const c={};for(const d of e){const f=$e(a,d);f&&Ft(c,d,f._f)}return{criteriaMode:s,names:[...e],fields:c,shouldUseNativeValidation:i}},eu=e=>e instanceof RegExp,ao=e=>nn(e)?e:eu(e)?e.source:zn(e)?eu(e.value)?e.value.source:e.value:e,Jl=e=>({isOnSubmit:!e||e===Za.onSubmit,isOnBlur:e===Za.onBlur,isOnChange:e===Za.onChange,isOnAll:e===Za.all,isOnTouch:e===Za.onTouched});const Mv="AsyncFunction";var __=e=>!!e&&!!e.validate&&!!(ss(e.validate)&&e.validate.constructor.name===Mv||zn(e.validate)&&Object.values(e.validate).find(a=>a.constructor.name===Mv)),E_=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Am=(e,a,s)=>!s&&(a.watchAll||a.watch.has(e)||[...a.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ei=(e,a,s,i)=>{for(const c of s||Object.keys(e)){const d=$e(e,c);if(d){const{_f:f,...h}=d;if(f){if(f.refs&&f.refs[0]&&a(f.refs[0],c)&&!i)return!0;if(f.ref&&a(f.ref,f.name)&&!i)return!0;if(ei(h,a))break}else if(zn(h)&&ei(h,a))break}}};function Uv(e,a,s){const i=$e(e,s);if(i||hu(s))return{error:i,name:s};const c=s.split(".");for(;c.length;){const d=c.join("."),f=$e(a,d),h=$e(e,d);if(f&&!Array.isArray(f)&&s!==d)return{name:s};if(h&&h.type)return{name:d,error:h};if(h&&h.root&&h.root.type)return{name:`${d}.root`,error:h.root};c.pop()}return{name:s}}var A_=(e,a,s,i)=>{s(e);const{name:c,...d}=e;return ta(d)||Object.keys(d).length>=Object.keys(a).length||Object.keys(d).find(f=>a[f]===(!i||Za.all))},C_=(e,a,s)=>!e||!a||e===a||ya(e).some(i=>i&&(s?i===a:i.startsWith(a)||a.startsWith(i))),O_=(e,a,s,i,c)=>c.isOnAll?!1:!s&&c.isOnTouch?!(a||e):(s?i.isOnBlur:c.isOnBlur)?!e:(s?i.isOnChange:c.isOnChange)?e:!0,R_=(e,a)=>!pu($e(e,a)).length&&En(e,a),Mx=(e,a,s)=>{const i=ya($e(e,s));return Ft(i,"root",a[s]),Ft(e,s,i),e};function Lv(e,a,s="validate"){if(za(e)||Array.isArray(e)&&e.every(za)||bs(e)&&!e)return{type:s,message:za(e)?e:"",ref:a}}var Zl=e=>zn(e)&&!eu(e)?e:{value:e,message:""},Cm=async(e,a,s,i,c,d)=>{const{ref:f,refs:h,required:v,maxLength:p,minLength:y,min:x,max:j,pattern:F,validate:E,name:C,valueAsNumber:T,mount:q}=e._f,A=$e(s,C);if(!q||a.has(C))return{};const te=h?h[0]:f,U=be=>{c&&te.reportValidity&&(te.setCustomValidity(bs(be)?"":be||""),te.reportValidity())},D={},P=dh(f),B=jo(f),W=P||B,fe=(T||uh(f))&&nn(f.value)&&nn(A)||Wc(f)&&f.value===""||A===""||Array.isArray(A)&&!A.length,De=ch.bind(null,C,i,D),_e=(be,we,Ce,Ue=$s.maxLength,M=$s.minLength)=>{const V=be?we:Ce;D[C]={type:be?Ue:M,message:V,ref:f,...De(be?Ue:M,V)}};if(d?!Array.isArray(A)||!A.length:v&&(!W&&(fe||va(A))||bs(A)&&!A||B&&!Dx(h).isValid||P&&!kx(h).isValid)){const{value:be,message:we}=za(v)?{value:!!v,message:v}:Zl(v);if(be&&(D[C]={type:$s.required,message:we,ref:te,...De($s.required,we)},!i))return U(we),D}if(!fe&&(!va(x)||!va(j))){let be,we;const Ce=Zl(j),Ue=Zl(x);if(!va(A)&&!isNaN(A)){const M=f.valueAsNumber||A&&+A;va(Ce.value)||(be=M>Ce.value),va(Ue.value)||(we=M<Ue.value)}else{const M=f.valueAsDate||new Date(A),V=Re=>new Date(new Date().toDateString()+" "+Re),ae=f.type=="time",ce=f.type=="week";za(Ce.value)&&A&&(be=ae?V(A)>V(Ce.value):ce?A>Ce.value:M>new Date(Ce.value)),za(Ue.value)&&A&&(we=ae?V(A)<V(Ue.value):ce?A<Ue.value:M<new Date(Ue.value))}if((be||we)&&(_e(!!be,Ce.message,Ue.message,$s.max,$s.min),!i))return U(D[C].message),D}if((p||y)&&!fe&&(za(A)||d&&Array.isArray(A))){const be=Zl(p),we=Zl(y),Ce=!va(be.value)&&A.length>+be.value,Ue=!va(we.value)&&A.length<+we.value;if((Ce||Ue)&&(_e(Ce,be.message,we.message),!i))return U(D[C].message),D}if(F&&!fe&&za(A)){const{value:be,message:we}=Zl(F);if(eu(be)&&!A.match(be)&&(D[C]={type:$s.pattern,message:we,ref:f,...De($s.pattern,we)},!i))return U(we),D}if(E){if(ss(E)){const be=await E(A,s),we=Lv(be,te);if(we&&(D[C]={...we,...De($s.validate,we.message)},!i))return U(we.message),D}else if(zn(E)){let be={};for(const we in E){if(!ta(be)&&!i)break;const Ce=Lv(await E[we](A,s),te,we);Ce&&(be={...Ce,...De(we,Ce.message)},U(Ce.message),i&&(D[C]=be))}if(!ta(be)&&(D[C]={ref:te,...be},!i))return D}}return U(!0),D};const T_={mode:Za.onSubmit,reValidateMode:Za.onChange,shouldFocusError:!0};function D_(e={}){let a={...T_,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:ss(a.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1},i={},c=zn(a.defaultValues)||zn(a.values)?on(a.defaultValues||a.values)||{}:{},d=a.shouldUnregister?{}:on(c),f={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},v,p=0;const y={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let x={...y};const j={array:Rv(),state:Rv()},F=a.criteriaMode===Za.all,E=R=>z=>{clearTimeout(p),p=setTimeout(R,z)},C=async R=>{if(!a.disabled&&(y.isValid||x.isValid||R)){const z=a.resolver?ta((await B()).errors):await fe(i,!0);z!==s.isValid&&j.state.next({isValid:z})}},T=(R,z)=>{!a.disabled&&(y.isValidating||y.validatingFields||x.isValidating||x.validatingFields)&&((R||Array.from(h.mount)).forEach(S=>{S&&(z?Ft(s.validatingFields,S,z):En(s.validatingFields,S))}),j.state.next({validatingFields:s.validatingFields,isValidating:!ta(s.validatingFields)}))},q=(R,z=[],S,L,$=!0,X=!0)=>{if(L&&S&&!a.disabled){if(f.action=!0,X&&Array.isArray($e(i,R))){const le=S($e(i,R),L.argA,L.argB);$&&Ft(i,R,le)}if(X&&Array.isArray($e(s.errors,R))){const le=S($e(s.errors,R),L.argA,L.argB);$&&Ft(s.errors,R,le),R_(s.errors,R)}if((y.touchedFields||x.touchedFields)&&X&&Array.isArray($e(s.touchedFields,R))){const le=S($e(s.touchedFields,R),L.argA,L.argB);$&&Ft(s.touchedFields,R,le)}(y.dirtyFields||x.dirtyFields)&&(s.dirtyFields=Xl(c,d)),j.state.next({name:R,isDirty:_e(R,z),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Ft(d,R,z)},A=(R,z)=>{Ft(s.errors,R,z),j.state.next({errors:s.errors})},te=R=>{s.errors=R,j.state.next({errors:s.errors,isValid:!1})},U=(R,z,S,L)=>{const $=$e(i,R);if($){const X=$e(d,R,nn(S)?$e(c,R):S);nn(X)||L&&L.defaultChecked||z?Ft(d,R,z?X:kv($._f)):Ce(R,X),f.mount&&C()}},D=(R,z,S,L,$)=>{let X=!1,le=!1;const je={name:R};if(!a.disabled){if(!S||L){(y.isDirty||x.isDirty)&&(le=s.isDirty,s.isDirty=je.isDirty=_e(),X=le!==je.isDirty);const Z=as($e(c,R),z);le=!!$e(s.dirtyFields,R),Z?En(s.dirtyFields,R):Ft(s.dirtyFields,R,!0),je.dirtyFields=s.dirtyFields,X=X||(y.dirtyFields||x.dirtyFields)&&le!==!Z}if(S){const Z=$e(s.touchedFields,R);Z||(Ft(s.touchedFields,R,S),je.touchedFields=s.touchedFields,X=X||(y.touchedFields||x.touchedFields)&&Z!==S)}X&&$&&j.state.next(je)}return X?je:{}},P=(R,z,S,L)=>{const $=$e(s.errors,R),X=(y.isValid||x.isValid)&&bs(z)&&s.isValid!==z;if(a.delayError&&S?(v=E(()=>A(R,S)),v(a.delayError)):(clearTimeout(p),v=null,S?Ft(s.errors,R,S):En(s.errors,R)),(S?!as($,S):$)||!ta(L)||X){const le={...L,...X&&bs(z)?{isValid:z}:{},errors:s.errors,name:R};s={...s,...le},j.state.next(le)}},B=async R=>{T(R,!0);const z=await a.resolver(d,a.context,w_(R||h.mount,i,a.criteriaMode,a.shouldUseNativeValidation));return T(R),z},W=async R=>{const{errors:z}=await B(R);if(R)for(const S of R){const L=$e(z,S);L?Ft(s.errors,S,L):En(s.errors,S)}else s.errors=z;return z},fe=async(R,z,S={valid:!0})=>{for(const L in R){const $=R[L];if($){const{_f:X,...le}=$;if(X){const je=h.array.has(X.name),Z=$._f&&__($._f);Z&&y.validatingFields&&T([X.name],!0);const ke=await Cm($,h.disabled,d,F,a.shouldUseNativeValidation&&!z,je);if(Z&&y.validatingFields&&T([X.name]),ke[X.name]&&(S.valid=!1,z))break;!z&&($e(ke,X.name)?je?Mx(s.errors,ke,X.name):Ft(s.errors,X.name,ke[X.name]):En(s.errors,X.name))}!ta(le)&&await fe(le,z,S)}}return S.valid},De=()=>{for(const R of h.unMount){const z=$e(i,R);z&&(z._f.refs?z._f.refs.every(S=>!If(S)):!If(z._f.ref))&&Be(R)}h.unMount=new Set},_e=(R,z)=>!a.disabled&&(R&&z&&Ft(d,R,z),!as(Re(),c)),be=(R,z,S)=>wm(R,h,{...f.mount?d:nn(z)?c:za(R)?{[R]:z}:z},S,z),we=R=>pu($e(f.mount?d:c,R,a.shouldUnregister?$e(c,R,[]):[])),Ce=(R,z,S={})=>{const L=$e(i,R);let $=z;if(L){const X=L._f;X&&(!X.disabled&&Ft(d,R,zx(z,X)),$=Wc(X.ref)&&va(z)?"":z,Rx(X.ref)?[...X.ref.options].forEach(le=>le.selected=$.includes(le.value)):X.refs?jo(X.ref)?X.refs.forEach(le=>{(!le.defaultChecked||!le.disabled)&&(Array.isArray($)?le.checked=!!$.find(je=>je===le.value):le.checked=$===le.value||!!$)}):X.refs.forEach(le=>le.checked=le.value===$):uh(X.ref)?X.ref.value="":(X.ref.value=$,X.ref.type||j.state.next({name:R,values:on(d)})))}(S.shouldDirty||S.shouldTouch)&&D(R,$,S.shouldTouch,S.shouldDirty,!0),S.shouldValidate&&ce(R)},Ue=(R,z,S)=>{for(const L in z){if(!z.hasOwnProperty(L))return;const $=z[L],X=R+"."+L,le=$e(i,X);(h.array.has(R)||zn($)||le&&!le._f)&&!Gr($)?Ue(X,$,S):Ce(X,$,S)}},M=(R,z,S={})=>{const L=$e(i,R),$=h.array.has(R),X=on(z);Ft(d,R,X),$?(j.array.next({name:R,values:on(d)}),(y.isDirty||y.dirtyFields||x.isDirty||x.dirtyFields)&&S.shouldDirty&&j.state.next({name:R,dirtyFields:Xl(c,d),isDirty:_e(R,X)})):L&&!L._f&&!va(X)?Ue(R,X,S):Ce(R,X,S),Am(R,h)&&j.state.next({...s,name:R}),j.state.next({name:f.mount?R:void 0,values:on(d)})},V=async R=>{f.mount=!0;const z=R.target;let S=z.name,L=!0;const $=$e(i,S),X=Z=>{L=Number.isNaN(Z)||Gr(Z)&&isNaN(Z.getTime())||as(Z,$e(d,S,Z))},le=Jl(a.mode),je=Jl(a.reValidateMode);if($){let Z,ke;const qe=z.type?kv($._f):p_(R),We=R.type===Ov.BLUR||R.type===Ov.FOCUS_OUT,Mt=!E_($._f)&&!a.resolver&&!$e(s.errors,S)&&!$._f.deps||O_(We,$e(s.touchedFields,S),s.isSubmitted,je,le),ye=Am(S,h,We);Ft(d,S,qe),We?(!z||!z.readOnly)&&($._f.onBlur&&$._f.onBlur(R),v&&v(0)):$._f.onChange&&$._f.onChange(R);const et=D(S,qe,We),Ut=!ta(et)||ye;if(!We&&j.state.next({name:S,type:R.type,values:on(d)}),Mt)return(y.isValid||x.isValid)&&(a.mode==="onBlur"?We&&C():We||C()),Ut&&j.state.next({name:S,...ye?{}:et});if(!We&&ye&&j.state.next({...s}),a.resolver){const{errors:_t}=await B([S]);if(X(qe),L){const pn=Uv(s.errors,i,S),An=Uv(_t,i,pn.name||S);Z=An.error,S=An.name,ke=ta(_t)}}else T([S],!0),Z=(await Cm($,h.disabled,d,F,a.shouldUseNativeValidation))[S],T([S]),X(qe),L&&(Z?ke=!1:(y.isValid||x.isValid)&&(ke=await fe(i,!0)));L&&($._f.deps&&(!Array.isArray($._f.deps)||$._f.deps.length>0)&&ce($._f.deps),P(S,ke,Z,et))}},ae=(R,z)=>{if($e(s.errors,z)&&R.focus)return R.focus(),1},ce=async(R,z={})=>{let S,L;const $=ya(R);if(a.resolver){const X=await W(nn(R)?R:$);S=ta(X),L=R?!$.some(le=>$e(X,le)):S}else R?(L=(await Promise.all($.map(async X=>{const le=$e(i,X);return await fe(le&&le._f?{[X]:le}:le)}))).every(Boolean),!(!L&&!s.isValid)&&C()):L=S=await fe(i);return j.state.next({...!za(R)||(y.isValid||x.isValid)&&S!==s.isValid?{}:{name:R},...a.resolver||!R?{isValid:S}:{},errors:s.errors}),z.shouldFocus&&!L&&ei(i,ae,R?$:h.mount),L},Re=(R,z)=>{let S={...f.mount?d:c};return z&&(S=Ox(z.dirtyFields?s.dirtyFields:s.touchedFields,S)),nn(R)?S:za(R)?$e(S,R):R.map(L=>$e(S,L))},_=(R,z)=>({invalid:!!$e((z||s).errors,R),isDirty:!!$e((z||s).dirtyFields,R),error:$e((z||s).errors,R),isValidating:!!$e(s.validatingFields,R),isTouched:!!$e((z||s).touchedFields,R)}),K=R=>{R&&ya(R).forEach(z=>En(s.errors,z)),j.state.next({errors:R?s.errors:{}})},ue=(R,z,S)=>{const L=($e(i,R,{_f:{}})._f||{}).ref,$=$e(s.errors,R)||{},{ref:X,message:le,type:je,...Z}=$;Ft(s.errors,R,{...Z,...z,ref:L}),j.state.next({name:R,errors:s.errors,isValid:!1}),S&&S.shouldFocus&&L&&L.focus&&L.focus()},Q=(R,z)=>ss(R)?j.state.subscribe({next:S=>"values"in S&&R(be(void 0,z),S)}):be(R,z,!0),Ee=R=>j.state.subscribe({next:z=>{C_(R.name,z.name,R.exact)&&A_(z,R.formState||y,Ie,R.reRenderRoot)&&R.callback({values:{...d},...s,...z,defaultValues:c})}}).unsubscribe,Ne=R=>(f.mount=!0,x={...x,...R.formState},Ee({...R,formState:x})),Be=(R,z={})=>{for(const S of R?ya(R):h.mount)h.mount.delete(S),h.array.delete(S),z.keepValue||(En(i,S),En(d,S)),!z.keepError&&En(s.errors,S),!z.keepDirty&&En(s.dirtyFields,S),!z.keepTouched&&En(s.touchedFields,S),!z.keepIsValidating&&En(s.validatingFields,S),!a.shouldUnregister&&!z.keepDefaultValue&&En(c,S);j.state.next({values:on(d)}),j.state.next({...s,...z.keepDirty?{isDirty:_e()}:{}}),!z.keepIsValid&&C()},Ze=({disabled:R,name:z})=>{(bs(R)&&f.mount||R||h.disabled.has(z))&&(R?h.disabled.add(z):h.disabled.delete(z))},he=(R,z={})=>{let S=$e(i,R);const L=bs(z.disabled)||bs(a.disabled);return Ft(i,R,{...S||{},_f:{...S&&S._f?S._f:{ref:{name:R}},name:R,mount:!0,...z}}),h.mount.add(R),S?Ze({disabled:bs(z.disabled)?z.disabled:a.disabled,name:R}):U(R,!0,z.value),{...L?{disabled:z.disabled||a.disabled}:{},...a.progressive?{required:!!z.required,min:ao(z.min),max:ao(z.max),minLength:ao(z.minLength),maxLength:ao(z.maxLength),pattern:ao(z.pattern)}:{},name:R,onChange:V,onBlur:V,ref:$=>{if($){he(R,z),S=$e(i,R);const X=nn($.value)&&$.querySelectorAll&&$.querySelectorAll("input,select,textarea")[0]||$,le=x_(X),je=S._f.refs||[];if(le?je.find(Z=>Z===X):X===S._f.ref)return;Ft(i,R,{_f:{...S._f,...le?{refs:[...je.filter(If),X,...Array.isArray($e(c,R))?[{}]:[]],ref:{type:X.type,name:R}}:{ref:X}}}),U(R,!1,void 0,X)}else S=$e(i,R,{}),S._f&&(S._f.mount=!1),(a.shouldUnregister||z.shouldUnregister)&&!(b_(h.array,R)&&f.action)&&h.unMount.add(R)}}},Me=()=>a.shouldFocusError&&ei(i,ae,h.mount),Fe=R=>{bs(R)&&(j.state.next({disabled:R}),ei(i,(z,S)=>{const L=$e(i,S);L&&(z.disabled=L._f.disabled||R,Array.isArray(L._f.refs)&&L._f.refs.forEach($=>{$.disabled=L._f.disabled||R}))},0,!1))},Qe=(R,z)=>async S=>{let L;S&&(S.preventDefault&&S.preventDefault(),S.persist&&S.persist());let $=on(d);if(j.state.next({isSubmitting:!0}),a.resolver){const{errors:X,values:le}=await B();s.errors=X,$=on(le)}else await fe(i);if(h.disabled.size)for(const X of h.disabled)En($,X);if(En(s.errors,"root"),ta(s.errors)){j.state.next({errors:{}});try{await R($,S)}catch(X){L=X}}else z&&await z({...s.errors},S),Me(),setTimeout(Me);if(j.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ta(s.errors)&&!L,submitCount:s.submitCount+1,errors:s.errors}),L)throw L},lt=(R,z={})=>{$e(i,R)&&(nn(z.defaultValue)?M(R,on($e(c,R))):(M(R,z.defaultValue),Ft(c,R,on(z.defaultValue))),z.keepTouched||En(s.touchedFields,R),z.keepDirty||(En(s.dirtyFields,R),s.isDirty=z.defaultValue?_e(R,on($e(c,R))):_e()),z.keepError||(En(s.errors,R),y.isValid&&C()),j.state.next({...s}))},ze=(R,z={})=>{const S=R?on(R):c,L=on(S),$=ta(R),X=$?c:L;if(z.keepDefaultValues||(c=S),!z.keepValues){if(z.keepDirtyValues){const le=new Set([...h.mount,...Object.keys(Xl(c,d))]);for(const je of Array.from(le))$e(s.dirtyFields,je)?Ft(X,je,$e(d,je)):M(je,$e(X,je))}else{if(lh&&nn(R))for(const le of h.mount){const je=$e(i,le);if(je&&je._f){const Z=Array.isArray(je._f.refs)?je._f.refs[0]:je._f.ref;if(Wc(Z)){const ke=Z.closest("form");if(ke){ke.reset();break}}}}if(z.keepFieldsRef)for(const le of h.mount)M(le,$e(X,le));else i={}}d=a.shouldUnregister?z.keepDefaultValues?on(c):{}:on(X),j.array.next({values:{...X}}),j.state.next({values:{...X}})}h={mount:z.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!y.isValid||!!z.keepIsValid||!!z.keepDirtyValues||!a.shouldUnregister&&!ta(X),f.watch=!!a.shouldUnregister,j.state.next({submitCount:z.keepSubmitCount?s.submitCount:0,isDirty:$?!1:z.keepDirty?s.isDirty:!!(z.keepDefaultValues&&!as(R,c)),isSubmitted:z.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:$?{}:z.keepDirtyValues?z.keepDefaultValues&&d?Xl(c,d):s.dirtyFields:z.keepDefaultValues&&R?Xl(c,R):z.keepDirty?s.dirtyFields:{},touchedFields:z.keepTouched?s.touchedFields:{},errors:z.keepErrors?s.errors:{},isSubmitSuccessful:z.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:c})},Ge=(R,z)=>ze(ss(R)?R(d):R,z),me=(R,z={})=>{const S=$e(i,R),L=S&&S._f;if(L){const $=L.refs?L.refs[0]:L.ref;$.focus&&($.focus(),z.shouldSelect&&ss($.select)&&$.select())}},Ie=R=>{s={...s,...R}},Xe={control:{register:he,unregister:Be,getFieldState:_,handleSubmit:Qe,setError:ue,_subscribe:Ee,_runSchema:B,_focusError:Me,_getWatch:be,_getDirty:_e,_setValid:C,_setFieldArray:q,_setDisabledField:Ze,_setErrors:te,_getFieldArray:we,_reset:ze,_resetDefaultValues:()=>ss(a.defaultValues)&&a.defaultValues().then(R=>{Ge(R,a.resetOptions),j.state.next({isLoading:!1})}),_removeUnmounted:De,_disableForm:Fe,_subjects:j,_proxyFormState:y,get _fields(){return i},get _formValues(){return d},get _state(){return f},set _state(R){f=R},get _defaultValues(){return c},get _names(){return h},set _names(R){h=R},get _formState(){return s},get _options(){return a},set _options(R){a={...a,...R}}},subscribe:Ne,trigger:ce,register:he,handleSubmit:Qe,watch:Q,setValue:M,getValues:Re,reset:Ge,resetField:lt,clearErrors:K,unregister:Be,setError:ue,setFocus:me,getFieldState:_};return{...Xe,formControl:Xe}}var gr=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const s=(Math.random()*16+e)%16|0;return(a=="x"?s:s&3|8).toString(16)})},$f=(e,a,s={})=>s.shouldFocus||nn(s.shouldFocus)?s.focusName||`${e}.${nn(s.focusIndex)?a:s.focusIndex}.`:"",Ff=(e,a)=>[...e,...ya(a)],Hf=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Vf(e,a,s){return[...e.slice(0,a),...ya(s),...e.slice(a)]}var Zf=(e,a,s)=>Array.isArray(e)?(nn(e[s])&&(e[s]=void 0),e.splice(s,0,e.splice(a,1)[0]),e):[],Gf=(e,a)=>[...ya(a),...ya(e)];function z_(e,a){let s=0;const i=[...e];for(const c of a)i.splice(c-s,1),s++;return pu(i).length?i:[]}var Pf=(e,a)=>nn(a)?[]:z_(e,ya(a).sort((s,i)=>s-i)),Qf=(e,a,s)=>{[e[a],e[s]]=[e[s],e[a]]},Bv=(e,a,s)=>(e[a]=s,e);function k_(e){const a=Cx(),{control:s=a.control,name:i,keyName:c="id",shouldUnregister:d,rules:f}=e,[h,v]=gt.useState(s._getFieldArray(i)),p=gt.useRef(s._getFieldArray(i).map(gr)),y=gt.useRef(!1);s._names.array.add(i),gt.useMemo(()=>f&&h.length>=0&&s.register(i,f),[s,i,h.length,f]),oh(()=>s._subjects.array.subscribe({next:({values:U,name:D})=>{if(D===i||!D){const P=$e(U,i);Array.isArray(P)&&(v(P),p.current=P.map(gr))}}}).unsubscribe,[s,i]);const x=gt.useCallback(U=>{y.current=!0,s._setFieldArray(i,U)},[s,i]),j=(U,D)=>{const P=ya(on(U)),B=Ff(s._getFieldArray(i),P);s._names.focus=$f(i,B.length-1,D),p.current=Ff(p.current,P.map(gr)),x(B),v(B),s._setFieldArray(i,B,Ff,{argA:Hf(U)})},F=(U,D)=>{const P=ya(on(U)),B=Gf(s._getFieldArray(i),P);s._names.focus=$f(i,0,D),p.current=Gf(p.current,P.map(gr)),x(B),v(B),s._setFieldArray(i,B,Gf,{argA:Hf(U)})},E=U=>{const D=Pf(s._getFieldArray(i),U);p.current=Pf(p.current,U),x(D),v(D),!Array.isArray($e(s._fields,i))&&Ft(s._fields,i,void 0),s._setFieldArray(i,D,Pf,{argA:U})},C=(U,D,P)=>{const B=ya(on(D)),W=Vf(s._getFieldArray(i),U,B);s._names.focus=$f(i,U,P),p.current=Vf(p.current,U,B.map(gr)),x(W),v(W),s._setFieldArray(i,W,Vf,{argA:U,argB:Hf(D)})},T=(U,D)=>{const P=s._getFieldArray(i);Qf(P,U,D),Qf(p.current,U,D),x(P),v(P),s._setFieldArray(i,P,Qf,{argA:U,argB:D},!1)},q=(U,D)=>{const P=s._getFieldArray(i);Zf(P,U,D),Zf(p.current,U,D),x(P),v(P),s._setFieldArray(i,P,Zf,{argA:U,argB:D},!1)},A=(U,D)=>{const P=on(D),B=Bv(s._getFieldArray(i),U,P);p.current=[...B].map((W,fe)=>!W||fe===U?gr():p.current[fe]),x(B),v([...B]),s._setFieldArray(i,B,Bv,{argA:U,argB:P},!0,!1)},te=U=>{const D=ya(on(U));p.current=D.map(gr),x([...D]),v([...D]),s._setFieldArray(i,[...D],P=>P,{},!0,!1)};return gt.useEffect(()=>{if(s._state.action=!1,Am(i,s._names)&&s._subjects.state.next({...s._formState}),y.current&&(!Jl(s._options.mode).isOnSubmit||s._formState.isSubmitted)&&!Jl(s._options.reValidateMode).isOnSubmit)if(s._options.resolver)s._runSchema([i]).then(U=>{const D=$e(U.errors,i),P=$e(s._formState.errors,i);(P?!D&&P.type||D&&(P.type!==D.type||P.message!==D.message):D&&D.type)&&(D?Ft(s._formState.errors,i,D):En(s._formState.errors,i),s._subjects.state.next({errors:s._formState.errors}))});else{const U=$e(s._fields,i);U&&U._f&&!(Jl(s._options.reValidateMode).isOnSubmit&&Jl(s._options.mode).isOnSubmit)&&Cm(U,s._names.disabled,s._formValues,s._options.criteriaMode===Za.all,s._options.shouldUseNativeValidation,!0).then(D=>!ta(D)&&s._subjects.state.next({errors:Mx(s._formState.errors,D,i)}))}s._subjects.state.next({name:i,values:on(s._formValues)}),s._names.focus&&ei(s._fields,(U,D)=>{if(s._names.focus&&D.startsWith(s._names.focus)&&U.focus)return U.focus(),1}),s._names.focus="",s._setValid(),y.current=!1},[h,i,s]),gt.useEffect(()=>(!$e(s._formValues,i)&&s._setFieldArray(i),()=>{const U=(D,P)=>{const B=$e(s._fields,D);B&&B._f&&(B._f.mount=P)};s._options.shouldUnregister||d?s.unregister(i):U(i,!1)}),[i,s,c,d]),{swap:gt.useCallback(T,[x,i,s]),move:gt.useCallback(q,[x,i,s]),prepend:gt.useCallback(F,[x,i,s]),append:gt.useCallback(j,[x,i,s]),remove:gt.useCallback(E,[x,i,s]),insert:gt.useCallback(C,[x,i,s]),update:gt.useCallback(A,[x,i,s]),replace:gt.useCallback(te,[x,i,s]),fields:gt.useMemo(()=>h.map((U,D)=>({...U,[c]:p.current[D]||gr()})),[h,c])}}function gu(e={}){const a=gt.useRef(void 0),s=gt.useRef(void 0),[i,c]=gt.useState({isDirty:!1,isValidating:!1,isLoading:ss(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ss(e.defaultValues)?void 0:e.defaultValues});if(!a.current)if(e.formControl)a.current={...e.formControl,formState:i},e.defaultValues&&!ss(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:f,...h}=D_(e);a.current={...h,formState:i}}const d=a.current.control;return d._options=e,oh(()=>{const f=d._subscribe({formState:d._proxyFormState,callback:()=>c({...d._formState}),reRenderRoot:!0});return c(h=>({...h,isReady:!0})),d._formState.isReady=!0,f},[d]),gt.useEffect(()=>d._disableForm(e.disabled),[d,e.disabled]),gt.useEffect(()=>{e.mode&&(d._options.mode=e.mode),e.reValidateMode&&(d._options.reValidateMode=e.reValidateMode)},[d,e.mode,e.reValidateMode]),gt.useEffect(()=>{e.errors&&(d._setErrors(e.errors),d._focusError())},[d,e.errors]),gt.useEffect(()=>{e.shouldUnregister&&d._subjects.state.next({values:d._getWatch()})},[d,e.shouldUnregister]),gt.useEffect(()=>{if(d._proxyFormState.isDirty){const f=d._getDirty();f!==i.isDirty&&d._subjects.state.next({isDirty:f})}},[d,i.isDirty]),gt.useEffect(()=>{e.values&&!as(e.values,s.current)?(d._reset(e.values,{keepFieldsRef:!0,...d._options.resetOptions}),s.current=e.values,c(f=>({...f}))):d._resetDefaultValues()},[d,e.values]),gt.useEffect(()=>{d._state.mount||(d._setValid(),d._state.mount=!0),d._state.watch&&(d._state.watch=!1,d._subjects.state.next({...d._formState})),d._removeUnmounted()}),a.current.formState=y_(i,d),a.current}function Ux(e,a){return function(){return e.apply(a,arguments)}}const{toString:M_}=Object.prototype,{getPrototypeOf:fh}=Object,{iterator:bu,toStringTag:Lx}=Symbol,vu=(e=>a=>{const s=M_.call(a);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),rs=e=>(e=e.toLowerCase(),a=>vu(a)===e),yu=e=>a=>typeof a===e,{isArray:ci}=Array,ni=yu("undefined");function So(e){return e!==null&&!ni(e)&&e.constructor!==null&&!ni(e.constructor)&&xa(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Bx=rs("ArrayBuffer");function U_(e){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(e):a=e&&e.buffer&&Bx(e.buffer),a}const L_=yu("string"),xa=yu("function"),qx=yu("number"),wo=e=>e!==null&&typeof e=="object",B_=e=>e===!0||e===!1,Pc=e=>{if(vu(e)!=="object")return!1;const a=fh(e);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Lx in e)&&!(bu in e)},q_=e=>{if(!wo(e)||So(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},I_=rs("Date"),$_=rs("File"),F_=rs("Blob"),H_=rs("FileList"),V_=e=>wo(e)&&xa(e.pipe),Z_=e=>{let a;return e&&(typeof FormData=="function"&&e instanceof FormData||xa(e.append)&&((a=vu(e))==="formdata"||a==="object"&&xa(e.toString)&&e.toString()==="[object FormData]"))},G_=rs("URLSearchParams"),[P_,Q_,Y_,K_]=["ReadableStream","Request","Response","Headers"].map(rs),X_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _o(e,a,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let i,c;if(typeof e!="object"&&(e=[e]),ci(e))for(i=0,c=e.length;i<c;i++)a.call(null,e[i],i,e);else{if(So(e))return;const d=s?Object.getOwnPropertyNames(e):Object.keys(e),f=d.length;let h;for(i=0;i<f;i++)h=d[i],a.call(null,e[h],h,e)}}function Ix(e,a){if(So(e))return null;a=a.toLowerCase();const s=Object.keys(e);let i=s.length,c;for(;i-- >0;)if(c=s[i],a===c.toLowerCase())return c;return null}const Pr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$x=e=>!ni(e)&&e!==Pr;function Om(){const{caseless:e,skipUndefined:a}=$x(this)&&this||{},s={},i=(c,d)=>{const f=e&&Ix(s,d)||d;Pc(s[f])&&Pc(c)?s[f]=Om(s[f],c):Pc(c)?s[f]=Om({},c):ci(c)?s[f]=c.slice():(!a||!ni(c))&&(s[f]=c)};for(let c=0,d=arguments.length;c<d;c++)arguments[c]&&_o(arguments[c],i);return s}const J_=(e,a,s,{allOwnKeys:i}={})=>(_o(a,(c,d)=>{s&&xa(c)?e[d]=Ux(c,s):e[d]=c},{allOwnKeys:i}),e),W_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),e1=(e,a,s,i)=>{e.prototype=Object.create(a.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:a.prototype}),s&&Object.assign(e.prototype,s)},t1=(e,a,s,i)=>{let c,d,f;const h={};if(a=a||{},e==null)return a;do{for(c=Object.getOwnPropertyNames(e),d=c.length;d-- >0;)f=c[d],(!i||i(f,e,a))&&!h[f]&&(a[f]=e[f],h[f]=!0);e=s!==!1&&fh(e)}while(e&&(!s||s(e,a))&&e!==Object.prototype);return a},n1=(e,a,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=a.length;const i=e.indexOf(a,s);return i!==-1&&i===s},a1=e=>{if(!e)return null;if(ci(e))return e;let a=e.length;if(!qx(a))return null;const s=new Array(a);for(;a-- >0;)s[a]=e[a];return s},s1=(e=>a=>e&&a instanceof e)(typeof Uint8Array<"u"&&fh(Uint8Array)),r1=(e,a)=>{const i=(e&&e[bu]).call(e);let c;for(;(c=i.next())&&!c.done;){const d=c.value;a.call(e,d[0],d[1])}},l1=(e,a)=>{let s;const i=[];for(;(s=e.exec(a))!==null;)i.push(s);return i},i1=rs("HTMLFormElement"),o1=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,i,c){return i.toUpperCase()+c}),qv=(({hasOwnProperty:e})=>(a,s)=>e.call(a,s))(Object.prototype),c1=rs("RegExp"),Fx=(e,a)=>{const s=Object.getOwnPropertyDescriptors(e),i={};_o(s,(c,d)=>{let f;(f=a(c,d,e))!==!1&&(i[d]=f||c)}),Object.defineProperties(e,i)},u1=e=>{Fx(e,(a,s)=>{if(xa(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const i=e[s];if(xa(i)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},d1=(e,a)=>{const s={},i=c=>{c.forEach(d=>{s[d]=!0})};return ci(e)?i(e):i(String(e).split(a)),s},f1=()=>{},m1=(e,a)=>e!=null&&Number.isFinite(e=+e)?e:a;function h1(e){return!!(e&&xa(e.append)&&e[Lx]==="FormData"&&e[bu])}const p1=e=>{const a=new Array(10),s=(i,c)=>{if(wo(i)){if(a.indexOf(i)>=0)return;if(So(i))return i;if(!("toJSON"in i)){a[c]=i;const d=ci(i)?[]:{};return _o(i,(f,h)=>{const v=s(f,c+1);!ni(v)&&(d[h]=v)}),a[c]=void 0,d}}return i};return s(e,0)},g1=rs("AsyncFunction"),b1=e=>e&&(wo(e)||xa(e))&&xa(e.then)&&xa(e.catch),Hx=((e,a)=>e?setImmediate:a?((s,i)=>(Pr.addEventListener("message",({source:c,data:d})=>{c===Pr&&d===s&&i.length&&i.shift()()},!1),c=>{i.push(c),Pr.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",xa(Pr.postMessage)),v1=typeof queueMicrotask<"u"?queueMicrotask.bind(Pr):typeof process<"u"&&process.nextTick||Hx,y1=e=>e!=null&&xa(e[bu]),ie={isArray:ci,isArrayBuffer:Bx,isBuffer:So,isFormData:Z_,isArrayBufferView:U_,isString:L_,isNumber:qx,isBoolean:B_,isObject:wo,isPlainObject:Pc,isEmptyObject:q_,isReadableStream:P_,isRequest:Q_,isResponse:Y_,isHeaders:K_,isUndefined:ni,isDate:I_,isFile:$_,isBlob:F_,isRegExp:c1,isFunction:xa,isStream:V_,isURLSearchParams:G_,isTypedArray:s1,isFileList:H_,forEach:_o,merge:Om,extend:J_,trim:X_,stripBOM:W_,inherits:e1,toFlatObject:t1,kindOf:vu,kindOfTest:rs,endsWith:n1,toArray:a1,forEachEntry:r1,matchAll:l1,isHTMLForm:i1,hasOwnProperty:qv,hasOwnProp:qv,reduceDescriptors:Fx,freezeMethods:u1,toObjectSet:d1,toCamelCase:o1,noop:f1,toFiniteNumber:m1,findKey:Ix,global:Pr,isContextDefined:$x,isSpecCompliantForm:h1,toJSONObject:p1,isAsyncFn:g1,isThenable:b1,setImmediate:Hx,asap:v1,isIterable:y1};function mt(e,a,s,i,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",a&&(this.code=a),s&&(this.config=s),i&&(this.request=i),c&&(this.response=c,this.status=c.status?c.status:null)}ie.inherits(mt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ie.toJSONObject(this.config),code:this.code,status:this.status}}});const Vx=mt.prototype,Zx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Zx[e]={value:e}});Object.defineProperties(mt,Zx);Object.defineProperty(Vx,"isAxiosError",{value:!0});mt.from=(e,a,s,i,c,d)=>{const f=Object.create(Vx);ie.toFlatObject(e,f,function(y){return y!==Error.prototype},p=>p!=="isAxiosError");const h=e&&e.message?e.message:"Error",v=a==null&&e?e.code:a;return mt.call(f,h,v,s,i,c),e&&f.cause==null&&Object.defineProperty(f,"cause",{value:e,configurable:!0}),f.name=e&&e.name||"Error",d&&Object.assign(f,d),f};const x1=null;function Rm(e){return ie.isPlainObject(e)||ie.isArray(e)}function Gx(e){return ie.endsWith(e,"[]")?e.slice(0,-2):e}function Iv(e,a,s){return e?e.concat(a).map(function(c,d){return c=Gx(c),!s&&d?"["+c+"]":c}).join(s?".":""):a}function N1(e){return ie.isArray(e)&&!e.some(Rm)}const j1=ie.toFlatObject(ie,{},null,function(a){return/^is[A-Z]/.test(a)});function xu(e,a,s){if(!ie.isObject(e))throw new TypeError("target must be an object");a=a||new FormData,s=ie.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,T){return!ie.isUndefined(T[C])});const i=s.metaTokens,c=s.visitor||y,d=s.dots,f=s.indexes,v=(s.Blob||typeof Blob<"u"&&Blob)&&ie.isSpecCompliantForm(a);if(!ie.isFunction(c))throw new TypeError("visitor must be a function");function p(E){if(E===null)return"";if(ie.isDate(E))return E.toISOString();if(ie.isBoolean(E))return E.toString();if(!v&&ie.isBlob(E))throw new mt("Blob is not supported. Use a Buffer instead.");return ie.isArrayBuffer(E)||ie.isTypedArray(E)?v&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function y(E,C,T){let q=E;if(E&&!T&&typeof E=="object"){if(ie.endsWith(C,"{}"))C=i?C:C.slice(0,-2),E=JSON.stringify(E);else if(ie.isArray(E)&&N1(E)||(ie.isFileList(E)||ie.endsWith(C,"[]"))&&(q=ie.toArray(E)))return C=Gx(C),q.forEach(function(te,U){!(ie.isUndefined(te)||te===null)&&a.append(f===!0?Iv([C],U,d):f===null?C:C+"[]",p(te))}),!1}return Rm(E)?!0:(a.append(Iv(T,C,d),p(E)),!1)}const x=[],j=Object.assign(j1,{defaultVisitor:y,convertValue:p,isVisitable:Rm});function F(E,C){if(!ie.isUndefined(E)){if(x.indexOf(E)!==-1)throw Error("Circular reference detected in "+C.join("."));x.push(E),ie.forEach(E,function(q,A){(!(ie.isUndefined(q)||q===null)&&c.call(a,q,ie.isString(A)?A.trim():A,C,j))===!0&&F(q,C?C.concat(A):[A])}),x.pop()}}if(!ie.isObject(e))throw new TypeError("data must be an object");return F(e),a}function $v(e){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return a[i]})}function mh(e,a){this._pairs=[],e&&xu(e,this,a)}const Px=mh.prototype;Px.append=function(a,s){this._pairs.push([a,s])};Px.toString=function(a){const s=a?function(i){return a.call(this,i,$v)}:$v;return this._pairs.map(function(c){return s(c[0])+"="+s(c[1])},"").join("&")};function S1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Qx(e,a,s){if(!a)return e;const i=s&&s.encode||S1;ie.isFunction(s)&&(s={serialize:s});const c=s&&s.serialize;let d;if(c?d=c(a,s):d=ie.isURLSearchParams(a)?a.toString():new mh(a,s).toString(i),d){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class Fv{constructor(){this.handlers=[]}use(a,s,i){return this.handlers.push({fulfilled:a,rejected:s,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){ie.forEach(this.handlers,function(i){i!==null&&a(i)})}}const Yx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},w1=typeof URLSearchParams<"u"?URLSearchParams:mh,_1=typeof FormData<"u"?FormData:null,E1=typeof Blob<"u"?Blob:null,A1={isBrowser:!0,classes:{URLSearchParams:w1,FormData:_1,Blob:E1},protocols:["http","https","file","blob","url","data"]},hh=typeof window<"u"&&typeof document<"u",Tm=typeof navigator=="object"&&navigator||void 0,C1=hh&&(!Tm||["ReactNative","NativeScript","NS"].indexOf(Tm.product)<0),O1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",R1=hh&&window.location.href||"http://localhost",T1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hh,hasStandardBrowserEnv:C1,hasStandardBrowserWebWorkerEnv:O1,navigator:Tm,origin:R1},Symbol.toStringTag,{value:"Module"})),na={...T1,...A1};function D1(e,a){return xu(e,new na.classes.URLSearchParams,{visitor:function(s,i,c,d){return na.isNode&&ie.isBuffer(s)?(this.append(i,s.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...a})}function z1(e){return ie.matchAll(/\w+|\[(\w*)]/g,e).map(a=>a[0]==="[]"?"":a[1]||a[0])}function k1(e){const a={},s=Object.keys(e);let i;const c=s.length;let d;for(i=0;i<c;i++)d=s[i],a[d]=e[d];return a}function Kx(e){function a(s,i,c,d){let f=s[d++];if(f==="__proto__")return!0;const h=Number.isFinite(+f),v=d>=s.length;return f=!f&&ie.isArray(c)?c.length:f,v?(ie.hasOwnProp(c,f)?c[f]=[c[f],i]:c[f]=i,!h):((!c[f]||!ie.isObject(c[f]))&&(c[f]=[]),a(s,i,c[f],d)&&ie.isArray(c[f])&&(c[f]=k1(c[f])),!h)}if(ie.isFormData(e)&&ie.isFunction(e.entries)){const s={};return ie.forEachEntry(e,(i,c)=>{a(z1(i),c,s,0)}),s}return null}function M1(e,a,s){if(ie.isString(e))try{return(a||JSON.parse)(e),ie.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(s||JSON.stringify)(e)}const Eo={transitional:Yx,adapter:["xhr","http","fetch"],transformRequest:[function(a,s){const i=s.getContentType()||"",c=i.indexOf("application/json")>-1,d=ie.isObject(a);if(d&&ie.isHTMLForm(a)&&(a=new FormData(a)),ie.isFormData(a))return c?JSON.stringify(Kx(a)):a;if(ie.isArrayBuffer(a)||ie.isBuffer(a)||ie.isStream(a)||ie.isFile(a)||ie.isBlob(a)||ie.isReadableStream(a))return a;if(ie.isArrayBufferView(a))return a.buffer;if(ie.isURLSearchParams(a))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let h;if(d){if(i.indexOf("application/x-www-form-urlencoded")>-1)return D1(a,this.formSerializer).toString();if((h=ie.isFileList(a))||i.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return xu(h?{"files[]":a}:a,v&&new v,this.formSerializer)}}return d||c?(s.setContentType("application/json",!1),M1(a)):a}],transformResponse:[function(a){const s=this.transitional||Eo.transitional,i=s&&s.forcedJSONParsing,c=this.responseType==="json";if(ie.isResponse(a)||ie.isReadableStream(a))return a;if(a&&ie.isString(a)&&(i&&!this.responseType||c)){const f=!(s&&s.silentJSONParsing)&&c;try{return JSON.parse(a,this.parseReviver)}catch(h){if(f)throw h.name==="SyntaxError"?mt.from(h,mt.ERR_BAD_RESPONSE,this,null,this.response):h}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:na.classes.FormData,Blob:na.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ie.forEach(["delete","get","head","post","put","patch"],e=>{Eo.headers[e]={}});const U1=ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),L1=e=>{const a={};let s,i,c;return e&&e.split(`
`).forEach(function(f){c=f.indexOf(":"),s=f.substring(0,c).trim().toLowerCase(),i=f.substring(c+1).trim(),!(!s||a[s]&&U1[s])&&(s==="set-cookie"?a[s]?a[s].push(i):a[s]=[i]:a[s]=a[s]?a[s]+", "+i:i)}),a},Hv=Symbol("internals");function so(e){return e&&String(e).trim().toLowerCase()}function Qc(e){return e===!1||e==null?e:ie.isArray(e)?e.map(Qc):String(e)}function B1(e){const a=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=s.exec(e);)a[i[1]]=i[2];return a}const q1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Yf(e,a,s,i,c){if(ie.isFunction(i))return i.call(this,a,s);if(c&&(a=s),!!ie.isString(a)){if(ie.isString(i))return a.indexOf(i)!==-1;if(ie.isRegExp(i))return i.test(a)}}function I1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,s,i)=>s.toUpperCase()+i)}function $1(e,a){const s=ie.toCamelCase(" "+a);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+s,{value:function(c,d,f){return this[i].call(this,a,c,d,f)},configurable:!0})})}let Na=class{constructor(a){a&&this.set(a)}set(a,s,i){const c=this;function d(h,v,p){const y=so(v);if(!y)throw new Error("header name must be a non-empty string");const x=ie.findKey(c,y);(!x||c[x]===void 0||p===!0||p===void 0&&c[x]!==!1)&&(c[x||v]=Qc(h))}const f=(h,v)=>ie.forEach(h,(p,y)=>d(p,y,v));if(ie.isPlainObject(a)||a instanceof this.constructor)f(a,s);else if(ie.isString(a)&&(a=a.trim())&&!q1(a))f(L1(a),s);else if(ie.isObject(a)&&ie.isIterable(a)){let h={},v,p;for(const y of a){if(!ie.isArray(y))throw TypeError("Object iterator must return a key-value pair");h[p=y[0]]=(v=h[p])?ie.isArray(v)?[...v,y[1]]:[v,y[1]]:y[1]}f(h,s)}else a!=null&&d(s,a,i);return this}get(a,s){if(a=so(a),a){const i=ie.findKey(this,a);if(i){const c=this[i];if(!s)return c;if(s===!0)return B1(c);if(ie.isFunction(s))return s.call(this,c,i);if(ie.isRegExp(s))return s.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,s){if(a=so(a),a){const i=ie.findKey(this,a);return!!(i&&this[i]!==void 0&&(!s||Yf(this,this[i],i,s)))}return!1}delete(a,s){const i=this;let c=!1;function d(f){if(f=so(f),f){const h=ie.findKey(i,f);h&&(!s||Yf(i,i[h],h,s))&&(delete i[h],c=!0)}}return ie.isArray(a)?a.forEach(d):d(a),c}clear(a){const s=Object.keys(this);let i=s.length,c=!1;for(;i--;){const d=s[i];(!a||Yf(this,this[d],d,a,!0))&&(delete this[d],c=!0)}return c}normalize(a){const s=this,i={};return ie.forEach(this,(c,d)=>{const f=ie.findKey(i,d);if(f){s[f]=Qc(c),delete s[d];return}const h=a?I1(d):String(d).trim();h!==d&&delete s[d],s[h]=Qc(c),i[h]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const s=Object.create(null);return ie.forEach(this,(i,c)=>{i!=null&&i!==!1&&(s[c]=a&&ie.isArray(i)?i.join(", "):i)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,s])=>a+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...s){const i=new this(a);return s.forEach(c=>i.set(c)),i}static accessor(a){const i=(this[Hv]=this[Hv]={accessors:{}}).accessors,c=this.prototype;function d(f){const h=so(f);i[h]||($1(c,f),i[h]=!0)}return ie.isArray(a)?a.forEach(d):d(a),this}};Na.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ie.reduceDescriptors(Na.prototype,({value:e},a)=>{let s=a[0].toUpperCase()+a.slice(1);return{get:()=>e,set(i){this[s]=i}}});ie.freezeMethods(Na);function Kf(e,a){const s=this||Eo,i=a||s,c=Na.from(i.headers);let d=i.data;return ie.forEach(e,function(h){d=h.call(s,d,c.normalize(),a?a.status:void 0)}),c.normalize(),d}function Xx(e){return!!(e&&e.__CANCEL__)}function ui(e,a,s){mt.call(this,e??"canceled",mt.ERR_CANCELED,a,s),this.name="CanceledError"}ie.inherits(ui,mt,{__CANCEL__:!0});function Jx(e,a,s){const i=s.config.validateStatus;!s.status||!i||i(s.status)?e(s):a(new mt("Request failed with status code "+s.status,[mt.ERR_BAD_REQUEST,mt.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function F1(e){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return a&&a[1]||""}function H1(e,a){e=e||10;const s=new Array(e),i=new Array(e);let c=0,d=0,f;return a=a!==void 0?a:1e3,function(v){const p=Date.now(),y=i[d];f||(f=p),s[c]=v,i[c]=p;let x=d,j=0;for(;x!==c;)j+=s[x++],x=x%e;if(c=(c+1)%e,c===d&&(d=(d+1)%e),p-f<a)return;const F=y&&p-y;return F?Math.round(j*1e3/F):void 0}}function V1(e,a){let s=0,i=1e3/a,c,d;const f=(p,y=Date.now())=>{s=y,c=null,d&&(clearTimeout(d),d=null),e(...p)};return[(...p)=>{const y=Date.now(),x=y-s;x>=i?f(p,y):(c=p,d||(d=setTimeout(()=>{d=null,f(c)},i-x)))},()=>c&&f(c)]}const tu=(e,a,s=3)=>{let i=0;const c=H1(50,250);return V1(d=>{const f=d.loaded,h=d.lengthComputable?d.total:void 0,v=f-i,p=c(v),y=f<=h;i=f;const x={loaded:f,total:h,progress:h?f/h:void 0,bytes:v,rate:p||void 0,estimated:p&&h&&y?(h-f)/p:void 0,event:d,lengthComputable:h!=null,[a?"download":"upload"]:!0};e(x)},s)},Vv=(e,a)=>{const s=e!=null;return[i=>a[0]({lengthComputable:s,total:e,loaded:i}),a[1]]},Zv=e=>(...a)=>ie.asap(()=>e(...a)),Z1=na.hasStandardBrowserEnv?((e,a)=>s=>(s=new URL(s,na.origin),e.protocol===s.protocol&&e.host===s.host&&(a||e.port===s.port)))(new URL(na.origin),na.navigator&&/(msie|trident)/i.test(na.navigator.userAgent)):()=>!0,G1=na.hasStandardBrowserEnv?{write(e,a,s,i,c,d,f){if(typeof document>"u")return;const h=[`${e}=${encodeURIComponent(a)}`];ie.isNumber(s)&&h.push(`expires=${new Date(s).toUTCString()}`),ie.isString(i)&&h.push(`path=${i}`),ie.isString(c)&&h.push(`domain=${c}`),d===!0&&h.push("secure"),ie.isString(f)&&h.push(`SameSite=${f}`),document.cookie=h.join("; ")},read(e){if(typeof document>"u")return null;const a=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return a?decodeURIComponent(a[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function P1(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Q1(e,a){return a?e.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):e}function Wx(e,a,s){let i=!P1(a);return e&&(i||s==!1)?Q1(e,a):a}const Gv=e=>e instanceof Na?{...e}:e;function Jr(e,a){a=a||{};const s={};function i(p,y,x,j){return ie.isPlainObject(p)&&ie.isPlainObject(y)?ie.merge.call({caseless:j},p,y):ie.isPlainObject(y)?ie.merge({},y):ie.isArray(y)?y.slice():y}function c(p,y,x,j){if(ie.isUndefined(y)){if(!ie.isUndefined(p))return i(void 0,p,x,j)}else return i(p,y,x,j)}function d(p,y){if(!ie.isUndefined(y))return i(void 0,y)}function f(p,y){if(ie.isUndefined(y)){if(!ie.isUndefined(p))return i(void 0,p)}else return i(void 0,y)}function h(p,y,x){if(x in a)return i(p,y);if(x in e)return i(void 0,p)}const v={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:h,headers:(p,y,x)=>c(Gv(p),Gv(y),x,!0)};return ie.forEach(Object.keys({...e,...a}),function(y){const x=v[y]||c,j=x(e[y],a[y],y);ie.isUndefined(j)&&x!==h||(s[y]=j)}),s}const e0=e=>{const a=Jr({},e);let{data:s,withXSRFToken:i,xsrfHeaderName:c,xsrfCookieName:d,headers:f,auth:h}=a;if(a.headers=f=Na.from(f),a.url=Qx(Wx(a.baseURL,a.url,a.allowAbsoluteUrls),e.params,e.paramsSerializer),h&&f.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),ie.isFormData(s)){if(na.hasStandardBrowserEnv||na.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(ie.isFunction(s.getHeaders)){const v=s.getHeaders(),p=["content-type","content-length"];Object.entries(v).forEach(([y,x])=>{p.includes(y.toLowerCase())&&f.set(y,x)})}}if(na.hasStandardBrowserEnv&&(i&&ie.isFunction(i)&&(i=i(a)),i||i!==!1&&Z1(a.url))){const v=c&&d&&G1.read(d);v&&f.set(c,v)}return a},Y1=typeof XMLHttpRequest<"u",K1=Y1&&function(e){return new Promise(function(s,i){const c=e0(e);let d=c.data;const f=Na.from(c.headers).normalize();let{responseType:h,onUploadProgress:v,onDownloadProgress:p}=c,y,x,j,F,E;function C(){F&&F(),E&&E(),c.cancelToken&&c.cancelToken.unsubscribe(y),c.signal&&c.signal.removeEventListener("abort",y)}let T=new XMLHttpRequest;T.open(c.method.toUpperCase(),c.url,!0),T.timeout=c.timeout;function q(){if(!T)return;const te=Na.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),D={data:!h||h==="text"||h==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:te,config:e,request:T};Jx(function(B){s(B),C()},function(B){i(B),C()},D),T=null}"onloadend"in T?T.onloadend=q:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(q)},T.onabort=function(){T&&(i(new mt("Request aborted",mt.ECONNABORTED,e,T)),T=null)},T.onerror=function(U){const D=U&&U.message?U.message:"Network Error",P=new mt(D,mt.ERR_NETWORK,e,T);P.event=U||null,i(P),T=null},T.ontimeout=function(){let U=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const D=c.transitional||Yx;c.timeoutErrorMessage&&(U=c.timeoutErrorMessage),i(new mt(U,D.clarifyTimeoutError?mt.ETIMEDOUT:mt.ECONNABORTED,e,T)),T=null},d===void 0&&f.setContentType(null),"setRequestHeader"in T&&ie.forEach(f.toJSON(),function(U,D){T.setRequestHeader(D,U)}),ie.isUndefined(c.withCredentials)||(T.withCredentials=!!c.withCredentials),h&&h!=="json"&&(T.responseType=c.responseType),p&&([j,E]=tu(p,!0),T.addEventListener("progress",j)),v&&T.upload&&([x,F]=tu(v),T.upload.addEventListener("progress",x),T.upload.addEventListener("loadend",F)),(c.cancelToken||c.signal)&&(y=te=>{T&&(i(!te||te.type?new ui(null,e,T):te),T.abort(),T=null)},c.cancelToken&&c.cancelToken.subscribe(y),c.signal&&(c.signal.aborted?y():c.signal.addEventListener("abort",y)));const A=F1(c.url);if(A&&na.protocols.indexOf(A)===-1){i(new mt("Unsupported protocol "+A+":",mt.ERR_BAD_REQUEST,e));return}T.send(d||null)})},X1=(e,a)=>{const{length:s}=e=e?e.filter(Boolean):[];if(a||s){let i=new AbortController,c;const d=function(p){if(!c){c=!0,h();const y=p instanceof Error?p:this.reason;i.abort(y instanceof mt?y:new ui(y instanceof Error?y.message:y))}};let f=a&&setTimeout(()=>{f=null,d(new mt(`timeout ${a} of ms exceeded`,mt.ETIMEDOUT))},a);const h=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(d):p.removeEventListener("abort",d)}),e=null)};e.forEach(p=>p.addEventListener("abort",d));const{signal:v}=i;return v.unsubscribe=()=>ie.asap(h),v}},J1=function*(e,a){let s=e.byteLength;if(s<a){yield e;return}let i=0,c;for(;i<s;)c=i+a,yield e.slice(i,c),i=c},W1=async function*(e,a){for await(const s of eE(e))yield*J1(s,a)},eE=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const a=e.getReader();try{for(;;){const{done:s,value:i}=await a.read();if(s)break;yield i}}finally{await a.cancel()}},Pv=(e,a,s,i)=>{const c=W1(e,a);let d=0,f,h=v=>{f||(f=!0,i&&i(v))};return new ReadableStream({async pull(v){try{const{done:p,value:y}=await c.next();if(p){h(),v.close();return}let x=y.byteLength;if(s){let j=d+=x;s(j)}v.enqueue(new Uint8Array(y))}catch(p){throw h(p),p}},cancel(v){return h(v),c.return()}},{highWaterMark:2})},Qv=64*1024,{isFunction:Lc}=ie,tE=(({Request:e,Response:a})=>({Request:e,Response:a}))(ie.global),{ReadableStream:Yv,TextEncoder:Kv}=ie.global,Xv=(e,...a)=>{try{return!!e(...a)}catch{return!1}},nE=e=>{e=ie.merge.call({skipUndefined:!0},tE,e);const{fetch:a,Request:s,Response:i}=e,c=a?Lc(a):typeof fetch=="function",d=Lc(s),f=Lc(i);if(!c)return!1;const h=c&&Lc(Yv),v=c&&(typeof Kv=="function"?(E=>C=>E.encode(C))(new Kv):async E=>new Uint8Array(await new s(E).arrayBuffer())),p=d&&h&&Xv(()=>{let E=!1;const C=new s(na.origin,{body:new Yv,method:"POST",get duplex(){return E=!0,"half"}}).headers.has("Content-Type");return E&&!C}),y=f&&h&&Xv(()=>ie.isReadableStream(new i("").body)),x={stream:y&&(E=>E.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(E=>{!x[E]&&(x[E]=(C,T)=>{let q=C&&C[E];if(q)return q.call(C);throw new mt(`Response type '${E}' is not supported`,mt.ERR_NOT_SUPPORT,T)})});const j=async E=>{if(E==null)return 0;if(ie.isBlob(E))return E.size;if(ie.isSpecCompliantForm(E))return(await new s(na.origin,{method:"POST",body:E}).arrayBuffer()).byteLength;if(ie.isArrayBufferView(E)||ie.isArrayBuffer(E))return E.byteLength;if(ie.isURLSearchParams(E)&&(E=E+""),ie.isString(E))return(await v(E)).byteLength},F=async(E,C)=>{const T=ie.toFiniteNumber(E.getContentLength());return T??j(C)};return async E=>{let{url:C,method:T,data:q,signal:A,cancelToken:te,timeout:U,onDownloadProgress:D,onUploadProgress:P,responseType:B,headers:W,withCredentials:fe="same-origin",fetchOptions:De}=e0(E),_e=a||fetch;B=B?(B+"").toLowerCase():"text";let be=X1([A,te&&te.toAbortSignal()],U),we=null;const Ce=be&&be.unsubscribe&&(()=>{be.unsubscribe()});let Ue;try{if(P&&p&&T!=="get"&&T!=="head"&&(Ue=await F(W,q))!==0){let _=new s(C,{method:"POST",body:q,duplex:"half"}),K;if(ie.isFormData(q)&&(K=_.headers.get("content-type"))&&W.setContentType(K),_.body){const[ue,Q]=Vv(Ue,tu(Zv(P)));q=Pv(_.body,Qv,ue,Q)}}ie.isString(fe)||(fe=fe?"include":"omit");const M=d&&"credentials"in s.prototype,V={...De,signal:be,method:T.toUpperCase(),headers:W.normalize().toJSON(),body:q,duplex:"half",credentials:M?fe:void 0};we=d&&new s(C,V);let ae=await(d?_e(we,De):_e(C,V));const ce=y&&(B==="stream"||B==="response");if(y&&(D||ce&&Ce)){const _={};["status","statusText","headers"].forEach(Ee=>{_[Ee]=ae[Ee]});const K=ie.toFiniteNumber(ae.headers.get("content-length")),[ue,Q]=D&&Vv(K,tu(Zv(D),!0))||[];ae=new i(Pv(ae.body,Qv,ue,()=>{Q&&Q(),Ce&&Ce()}),_)}B=B||"text";let Re=await x[ie.findKey(x,B)||"text"](ae,E);return!ce&&Ce&&Ce(),await new Promise((_,K)=>{Jx(_,K,{data:Re,headers:Na.from(ae.headers),status:ae.status,statusText:ae.statusText,config:E,request:we})})}catch(M){throw Ce&&Ce(),M&&M.name==="TypeError"&&/Load failed|fetch/i.test(M.message)?Object.assign(new mt("Network Error",mt.ERR_NETWORK,E,we),{cause:M.cause||M}):mt.from(M,M&&M.code,E,we)}}},aE=new Map,t0=e=>{let a=e&&e.env||{};const{fetch:s,Request:i,Response:c}=a,d=[i,c,s];let f=d.length,h=f,v,p,y=aE;for(;h--;)v=d[h],p=y.get(v),p===void 0&&y.set(v,p=h?new Map:nE(a)),y=p;return p};t0();const ph={http:x1,xhr:K1,fetch:{get:t0}};ie.forEach(ph,(e,a)=>{if(e){try{Object.defineProperty(e,"name",{value:a})}catch{}Object.defineProperty(e,"adapterName",{value:a})}});const Jv=e=>`- ${e}`,sE=e=>ie.isFunction(e)||e===null||e===!1;function rE(e,a){e=ie.isArray(e)?e:[e];const{length:s}=e;let i,c;const d={};for(let f=0;f<s;f++){i=e[f];let h;if(c=i,!sE(i)&&(c=ph[(h=String(i)).toLowerCase()],c===void 0))throw new mt(`Unknown adapter '${h}'`);if(c&&(ie.isFunction(c)||(c=c.get(a))))break;d[h||"#"+f]=c}if(!c){const f=Object.entries(d).map(([v,p])=>`adapter ${v} `+(p===!1?"is not supported by the environment":"is not available in the build"));let h=s?f.length>1?`since :
`+f.map(Jv).join(`
`):" "+Jv(f[0]):"as no adapter specified";throw new mt("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return c}const n0={getAdapter:rE,adapters:ph};function Xf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ui(null,e)}function Wv(e){return Xf(e),e.headers=Na.from(e.headers),e.data=Kf.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),n0.getAdapter(e.adapter||Eo.adapter,e)(e).then(function(i){return Xf(e),i.data=Kf.call(e,e.transformResponse,i),i.headers=Na.from(i.headers),i},function(i){return Xx(i)||(Xf(e),i&&i.response&&(i.response.data=Kf.call(e,e.transformResponse,i.response),i.response.headers=Na.from(i.response.headers))),Promise.reject(i)})}const a0="1.13.2",Nu={};["object","boolean","number","function","string","symbol"].forEach((e,a)=>{Nu[e]=function(i){return typeof i===e||"a"+(a<1?"n ":" ")+e}});const ey={};Nu.transitional=function(a,s,i){function c(d,f){return"[Axios v"+a0+"] Transitional option '"+d+"'"+f+(i?". "+i:"")}return(d,f,h)=>{if(a===!1)throw new mt(c(f," has been removed"+(s?" in "+s:"")),mt.ERR_DEPRECATED);return s&&!ey[f]&&(ey[f]=!0,console.warn(c(f," has been deprecated since v"+s+" and will be removed in the near future"))),a?a(d,f,h):!0}};Nu.spelling=function(a){return(s,i)=>(console.warn(`${i} is likely a misspelling of ${a}`),!0)};function lE(e,a,s){if(typeof e!="object")throw new mt("options must be an object",mt.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let c=i.length;for(;c-- >0;){const d=i[c],f=a[d];if(f){const h=e[d],v=h===void 0||f(h,d,e);if(v!==!0)throw new mt("option "+d+" must be "+v,mt.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new mt("Unknown option "+d,mt.ERR_BAD_OPTION)}}const Yc={assertOptions:lE,validators:Nu},gs=Yc.validators;let Qr=class{constructor(a){this.defaults=a||{},this.interceptors={request:new Fv,response:new Fv}}async request(a,s){try{return await this._request(a,s)}catch(i){if(i instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const d=c.stack?c.stack.replace(/^.+\n/,""):"";try{i.stack?d&&!String(i.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+d):i.stack=d}catch{}}throw i}}_request(a,s){typeof a=="string"?(s=s||{},s.url=a):s=a||{},s=Jr(this.defaults,s);const{transitional:i,paramsSerializer:c,headers:d}=s;i!==void 0&&Yc.assertOptions(i,{silentJSONParsing:gs.transitional(gs.boolean),forcedJSONParsing:gs.transitional(gs.boolean),clarifyTimeoutError:gs.transitional(gs.boolean)},!1),c!=null&&(ie.isFunction(c)?s.paramsSerializer={serialize:c}:Yc.assertOptions(c,{encode:gs.function,serialize:gs.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Yc.assertOptions(s,{baseUrl:gs.spelling("baseURL"),withXsrfToken:gs.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let f=d&&ie.merge(d.common,d[s.method]);d&&ie.forEach(["delete","get","head","post","put","patch","common"],E=>{delete d[E]}),s.headers=Na.concat(f,d);const h=[];let v=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(s)===!1||(v=v&&C.synchronous,h.unshift(C.fulfilled,C.rejected))});const p=[];this.interceptors.response.forEach(function(C){p.push(C.fulfilled,C.rejected)});let y,x=0,j;if(!v){const E=[Wv.bind(this),void 0];for(E.unshift(...h),E.push(...p),j=E.length,y=Promise.resolve(s);x<j;)y=y.then(E[x++],E[x++]);return y}j=h.length;let F=s;for(;x<j;){const E=h[x++],C=h[x++];try{F=E(F)}catch(T){C.call(this,T);break}}try{y=Wv.call(this,F)}catch(E){return Promise.reject(E)}for(x=0,j=p.length;x<j;)y=y.then(p[x++],p[x++]);return y}getUri(a){a=Jr(this.defaults,a);const s=Wx(a.baseURL,a.url,a.allowAbsoluteUrls);return Qx(s,a.params,a.paramsSerializer)}};ie.forEach(["delete","get","head","options"],function(a){Qr.prototype[a]=function(s,i){return this.request(Jr(i||{},{method:a,url:s,data:(i||{}).data}))}});ie.forEach(["post","put","patch"],function(a){function s(i){return function(d,f,h){return this.request(Jr(h||{},{method:a,headers:i?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}Qr.prototype[a]=s(),Qr.prototype[a+"Form"]=s(!0)});let iE=class s0{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(d){s=d});const i=this;this.promise.then(c=>{if(!i._listeners)return;let d=i._listeners.length;for(;d-- >0;)i._listeners[d](c);i._listeners=null}),this.promise.then=c=>{let d;const f=new Promise(h=>{i.subscribe(h),d=h}).then(c);return f.cancel=function(){i.unsubscribe(d)},f},a(function(d,f,h){i.reason||(i.reason=new ui(d,f,h),s(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const s=this._listeners.indexOf(a);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const a=new AbortController,s=i=>{a.abort(i)};return this.subscribe(s),a.signal.unsubscribe=()=>this.unsubscribe(s),a.signal}static source(){let a;return{token:new s0(function(c){a=c}),cancel:a}}};function oE(e){return function(s){return e.apply(null,s)}}function cE(e){return ie.isObject(e)&&e.isAxiosError===!0}const Dm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Dm).forEach(([e,a])=>{Dm[a]=e});function r0(e){const a=new Qr(e),s=Ux(Qr.prototype.request,a);return ie.extend(s,Qr.prototype,a,{allOwnKeys:!0}),ie.extend(s,a,null,{allOwnKeys:!0}),s.create=function(c){return r0(Jr(e,c))},s}const bt=r0(Eo);bt.Axios=Qr;bt.CanceledError=ui;bt.CancelToken=iE;bt.isCancel=Xx;bt.VERSION=a0;bt.toFormData=xu;bt.AxiosError=mt;bt.Cancel=bt.CanceledError;bt.all=function(a){return Promise.all(a)};bt.spread=oE;bt.isAxiosError=cE;bt.mergeConfig=Jr;bt.AxiosHeaders=Na;bt.formToJSON=e=>Kx(ie.isHTMLForm(e)?new FormData(e):e);bt.getAdapter=n0.getAdapter;bt.HttpStatusCode=Dm;bt.default=bt;const{Axios:_D,AxiosError:ED,CanceledError:AD,isCancel:CD,CancelToken:OD,VERSION:RD,all:TD,Cancel:DD,isAxiosError:zD,spread:kD,toFormData:MD,AxiosHeaders:UD,HttpStatusCode:LD,formToJSON:BD,getAdapter:qD,mergeConfig:ID}=bt,uE="medileser:draft:v1",nu="medileser:recovery:v1",au="medileser:recovery:intent",dE="vi.auth",fE="vi_auth",mE="medileser.selectedBank",hE=1440*60*1e3,gh=e=>{if(!e)return!1;const a=Date.parse(e);return Number.isNaN(a)?!1:Date.now()-a>hE},Jf=e=>{const{userId:a,bankId:s,oiId:i,type:c,bancadaId:d,isNew:f}=e;if(!a||s==null)return null;const h=i!=null?String(i):"new",v=`${uE}:u${a}:b${s}:oi:${h}`;if(c==="header")return`${v}:header`;const p=f?"new":d;return p==null?null:`${v}:bancada:${p}`},co=(e,a,s)=>{try{localStorage.setItem(e,JSON.stringify(a))}catch{}s&&l0(s)},Wf=e=>{try{const a=localStorage.getItem(e);if(!a)return null;const s=JSON.parse(a);return!s||typeof s!="object"?null:gh(s.ts)?(localStorage.removeItem(e),null):s}catch{return null}},yr=e=>{try{localStorage.removeItem(e)}catch{}},l0=e=>{try{localStorage.setItem(nu,JSON.stringify(e))}catch{}},i0=()=>{try{const e=localStorage.getItem(nu);if(!e)return null;const a=JSON.parse(e);return!a||typeof a!="object"?null:gh(a.ts)?(localStorage.removeItem(nu),null):a}catch{return null}},pE=()=>{try{localStorage.removeItem(nu)}catch{}},gE=e=>{const a=e.userId??null,s=e.bankId??null,i=e.oiId??null;if(!a||s==null||!i)return;const c=i0(),d={version:1,ts:new Date().toISOString(),userId:a,bankId:s,oiId:i,oiCode:e.oiCode??c?.oiCode??null,returnTo:e.returnTo??c?.returnTo??`/oi/${i}?mode=edit`,mode:"edit",modal:e.modal??c?.modal};l0(d)},bE=e=>{const a={version:1,ts:new Date().toISOString(),userId:e.userId,bankId:e.bankId,oiId:e.oiId,modal:e.modal,returnTo:e.returnTo};try{sessionStorage.setItem(au,JSON.stringify(a))}catch{}},vE=()=>{try{const e=sessionStorage.getItem(au);if(!e)return null;const a=JSON.parse(e);return!a||typeof a!="object"?null:gh(a.ts)?(sessionStorage.removeItem(au),null):a}catch{return null}},em=()=>{try{sessionStorage.removeItem(au)}catch{}},yE=()=>{try{const e=localStorage.getItem(dE)??localStorage.getItem(fE);if(!e)return{userId:null,bankId:null};const a=JSON.parse(e),s=Number(a.userId??a.id),i=a.bancoId!=null?Number(a.bancoId):null;return{userId:Number.isFinite(s)?s:null,bankId:i!=null&&Number.isFinite(i)?i:null}}catch{}return{userId:null,bankId:null}},xE=()=>{try{const e=localStorage.getItem(mE);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}},zm=(e,a)=>{const s=i0();if(!s)return{target:null};if(!e||s.userId!==e)return{target:"/home",reason:"user"};if(a==null||s.bankId!==a)return{target:"/home",reason:"bank"};const i=s.returnTo||`/oi/${s.oiId}?mode=edit`,c=i==="/oi"||i==="/oi/"?`/oi/${s.oiId}?mode=edit`:i;return bE(s),{target:c,recovery:s}},ty="http://127.0.0.1:8000",di="openOiId",ju="vi.currentOI",o0="vi.auth",c0="vi_auth",NE="medileser.selectedBank",jE="medileser:selectedBank",km="medileser.pendingToast",Ao="medileser.pendingAction",SE="medileser:auth-expired",Mm="medileser.sessionUserId",Um="medileser.sessionBankId",u0=()=>typeof window<"u"?window.location.port==="5173"?ty:window.location.origin:ty,Ye=bt.create({baseURL:u0()}),d0=bt.create({baseURL:u0()}),f0=e=>{try{const a=localStorage.getItem(o0)??localStorage.getItem(c0);if(a){const{token:s}=JSON.parse(a);s&&(e.headers&&typeof e.headers.set=="function"?e.headers.set("Authorization",`Bearer ${s}`):e.headers={...e.headers||{},Authorization:`Bearer ${s}`})}}catch{}return e};Ye.interceptors.request.use(f0);d0.interceptors.request.use(f0);function wE(){try{const e=sessionStorage.getItem(di);if(!e)return null;const a=Number(e);return Number.isFinite(a)&&a>0?a:null}catch{return null}}const m0=()=>{try{const e=sessionStorage.getItem(ju);if(!e)return null;const a=JSON.parse(e),s=Number(a?.id);return Number.isFinite(s)&&s>0?s:null}catch{return null}};function _E(e){try{sessionStorage.setItem(di,String(e))}catch{}}function h0(){try{sessionStorage.removeItem(di)}catch{}}async function Co(){const e=wE();if(e)try{await d0.post(`/oi/${e}/close`)}catch{}finally{h0()}}function EE(e){try{sessionStorage.setItem(km,e)}catch{}}function AE(){try{const e=sessionStorage.getItem(km);return e?(sessionStorage.removeItem(km),e):null}catch{return null}}function CE(e){try{sessionStorage.setItem(Ao,JSON.stringify(e))}catch{}}function OE(){try{const e=sessionStorage.getItem(Ao);return e?JSON.parse(e):null}catch{return null}}function Gl(){try{sessionStorage.removeItem(Ao)}catch{}}function p0(){try{const e=sessionStorage.getItem(Mm);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}}function ny(e){try{e==null?sessionStorage.removeItem(Mm):sessionStorage.setItem(Mm,String(e))}catch{}}function g0(){try{const e=sessionStorage.getItem(Um);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}}function su(e){try{e==null?sessionStorage.removeItem(Um):sessionStorage.setItem(Um,String(e))}catch{}}function b0(e){const a=p0();if(e==null)return!1;if(a===null||a===e)return ny(e),!1;try{const s=[];for(let i=0;i<sessionStorage.length;i+=1){const c=sessionStorage.key(i);c&&(c.startsWith("oi:")||c===di||c===ju||c===Ao)&&s.push(c)}s.forEach(i=>sessionStorage.removeItem(i))}catch{}return ny(e),su(null),!0}function RE(e){const a=g0();if(e==null)return!1;if(a===null||a===e)return su(e),!1;try{const s=[];for(let i=0;i<sessionStorage.length;i+=1){const c=sessionStorage.key(i);c&&(c.startsWith("oi:")||c===di||c===ju||c===Ao)&&s.push(c)}s.forEach(i=>sessionStorage.removeItem(i))}catch{}return su(e),!0}function TE(){try{localStorage.removeItem(o0),localStorage.removeItem(c0),localStorage.removeItem(NE)}catch{}finally{try{window.dispatchEvent(new Event(jE))}catch{}}try{sessionStorage.removeItem(ju),sessionStorage.removeItem(di)}catch{}}let ay=!1;async function v0(e){if(!ay){ay=!0;try{await Co()}finally{TE();const a=e?.pending?"Sesion expirada. Inicia sesion para guardar. Tu borrador esta guardado.":"Sesion invalida o expirada";if(EE(a),typeof window<"u"&&window.location.pathname!=="/login"){const s=e?.returnTo,i=s?`?returnTo=${encodeURIComponent(s)}${e?.pending?"&pending=1":""}`:"";window.location.replace(`/login${i}`)}}}}const oo=e=>{const a=e?.response?.status,s=String(e?.response?.headers?.["x-code"]??"").toUpperCase();if(s==="PASSWORD_REQUIRED"||s==="WRONG_PASSWORD")return!1;if(a===401)return!0;const i=e?.response?.data?.detail;return!!(typeof i=="string"&&/token requerido/i.test(i))},tm=(e,a)=>{const s=a.match(e);if(!s)return null;const i=Number(s[1]);return Number.isFinite(i)?i:null},DE=e=>{if(typeof window>"u")return null;const a=String(e?.config?.method??"").toUpperCase(),s=String(e?.config?.url??""),i=`${window.location.pathname}${window.location.search}`;return a==="PUT"&&/\/oi\/\d+$/.test(s)?{type:"save_oi",route:i,oiId:tm(/\/oi\/(\d+)$/,s),ts:new Date().toISOString()}:a==="POST"&&s==="/oi"?{type:"save_oi",route:i,oiId:null,ts:new Date().toISOString()}:a==="POST"&&/\/oi\/\d+\/bancadas$/.test(s)?{type:"save_bancada",route:i,oiId:tm(/\/oi\/(\d+)\/bancadas$/,s),ts:new Date().toISOString()}:a==="PUT"&&/\/oi\/bancadas\/\d+$/.test(s)?{type:"save_bancada",route:i,bancadaId:tm(/\/oi\/bancadas\/(\d+)$/,s),ts:new Date().toISOString()}:null},zE=e=>{if(typeof window>"u")return;const{pathname:a,search:s,hash:i}=window.location,c=new URLSearchParams(s);(a==="/oi"||a.startsWith("/oi/"))&&c.set("mode","edit");const f=c.toString(),h=p=>`${p}${f?`?${f}`:""}${i??""}`;let v=h(a);if(a==="/oi"||a==="/oi/"){const p=e?.oiId??m0();p&&(v=h(`/oi/${p}`))}return v},kE=(e,a,s,i,c)=>{try{window.dispatchEvent(new CustomEvent(SE,{detail:{status:a,detail:e,url:s,method:i,pending:c}}))}catch{}};Ye.interceptors.response.use(e=>e,async e=>{const a=e?.response?.status,s=String(e?.config?.url??""),i=e?.response?.data?.detail,c=String(e?.config?.method??"").toUpperCase();if(!s.includes("/auth/login")&&oo(e)){const f=DE(e);f&&CE(f),kE(i,a,s,c,f);const h=zE(f),v=yE(),p=v.bankId??xE(),y=f?.oiId??m0();if(v.userId&&p!=null&&y){const x=f?.type==="save_bancada"?{type:"bancada",bancadaId:f.bancadaId??null,isNew:f.bancadaId==null}:void 0;gE({userId:v.userId,bankId:p,oiId:y,returnTo:h,modal:x})}await v0({returnTo:h,pending:!!f})}return Promise.reject(e)});const bh=async()=>{const{data:e}=await Ye.get("/catalogs");return e},Su="medileser.selectedBank",ru="medileser:selectedBank";function Ga(e,a){if((a??"").toLowerCase()==="admin")return"admin";const i=(e??"").toLowerCase();return i==="admin"||i==="administrator"||i==="administrador"?"administrator":i==="technician"||i==="user"||i==="tecnico"||i==="tcnico"?"technician":"standard"}function ai(e){return Ga(e)==="technician"}function wu(e){return(e?.username??e?.user??"").toLowerCase()==="admin"}function po(){try{const e=localStorage.getItem(Su);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}}function y0(e){try{localStorage.setItem(Su,String(e))}finally{window.dispatchEvent(new Event(ru))}}function x0(){try{localStorage.removeItem(Su)}finally{window.dispatchEvent(new Event(ru))}}function ME(e){const a=()=>e(),s=i=>{i.key===Su&&e()};return window.addEventListener(ru,a),window.addEventListener("storage",s),()=>{window.removeEventListener(ru,a),window.removeEventListener("storage",s)}}async function UE(e,a){try{await Ye.put("/auth/password",{old_password:e,new_password:a})}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo actualizar la contrasea";throw new Error(i)}}async function LE(e){try{await Co();const{data:a}=await Ye.post("/auth/login",e);return localStorage.setItem("vi.auth",JSON.stringify(a)),b0(a.userId??null),!ai(a.role)&&a.bancoId!=null&&su(a.bancoId),ai(a.role)?x0():y0(0),a}catch(a){const s=a?.response?.status,i=a?.response?.data?.detail,c=s===401?"Credenciales invlidas":i??a?.message??"Error de autenticacin";throw new Error(c)}}function Bn(){const e=localStorage.getItem("vi.auth")??localStorage.getItem("vi_auth");if(!e)return null;try{const a=JSON.parse(e),s=a.username??a.user??"",i=[a.firstName,a.lastName].filter(Boolean).join(" ")||void 0,c={user:a.user??a.username??"",userId:a.userId??a.id??0,username:s,firstName:a.firstName??"",lastName:a.lastName??"",fullName:a.fullName??i??s,bancoId:a.bancoId??null,token:a.token,techNumber:a.techNumber,role:Ga(a.role,s),allowedModules:Array.isArray(a.allowedModules)?a.allowedModules.map(d=>d==="future_logistica"?"logistica":d):void 0};return c.username&&c.token?c:null}catch{return null}}async function N0(e){await Co();const{data:a}=await Ye.put("/auth/banco",{bancoId:e});return localStorage.setItem("vi.auth",JSON.stringify(a)),b0(a.userId??null),RE(e),y0(e),a}function j0(){localStorage.removeItem("vi.auth"),localStorage.removeItem("vi_auth"),x0();try{sessionStorage.removeItem("vi.currentOI"),sessionStorage.removeItem("openOiId")}catch{}}async function BE(){await Co(),j0()}function go({label:e,inputId:a,className:s="",inputRef:i,helpText:c,...d}){const[f,h]=g.useState(!1),v=a||d.name||void 0,{ref:p,...y}=d,x=i??p;return l.jsxs("div",{className:s,children:[e&&l.jsx("label",{className:"form-label",htmlFor:v,children:e}),l.jsxs("div",{className:"input-group",children:[l.jsx("input",{...y,id:v,type:f?"text":"password",className:"form-control",ref:x}),l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:()=>h(j=>!j),tabIndex:-1,"aria-label":f?"Ocultar contrasea":"Mostrar contrasea",children:l.jsx("i",{className:`ti ${f?"ti-eye-off":"ti-eye"}`})})]}),c&&l.jsx("div",{className:"form-text",children:c})]})}function fi({show:e=!0,label:a="Cargando..."}){return e?l.jsxs("div",{className:"vi-spinner-overlay",role:"status","aria-live":"polite","aria-label":a,children:[l.jsx("img",{className:"vi-spinner-logo",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"","aria-hidden":"true"}),l.jsx("span",{className:"visually-hidden",children:a})]}):null}const S0=g.createContext(null);function qE(e){return e==="success"?"success":e==="error"?"danger":e==="warning"?"warning":"secondary"}function IE({children:e}){const[a,s]=g.useState([]),i=g.useCallback(d=>{const f=Date.now()+Math.random(),{kind:h="info",duration:v=3500,...p}=d,y={id:f,kind:h,duration:v,...p};s(x=>[...x,y]),window.setTimeout(()=>{s(x=>x.filter(j=>j.id!==f))},v)},[]),c=d=>s(f=>f.filter(h=>h.id!==d));return l.jsxs(S0.Provider,{value:{push:i},children:[e,l.jsx("div",{className:"vi-toast-container position-fixed top-0 end-0 p-3",children:a.map(d=>l.jsx("div",{className:`toast show align-items-center text-bg-${qE(d.kind)} border-0 mb-2`,role:"alert",children:l.jsxs("div",{className:"d-flex",children:[l.jsxs("div",{className:"toast-body",children:[d.title&&l.jsx("strong",{className:"me-2",children:d.title}),d.message]}),l.jsx("button",{className:"btn-close btn-close-white me-2 m-auto","aria-label":"Close",onClick:()=>c(d.id)})]})},d.id))})]})}function al(){const e=g.useContext(S0);if(!e)throw new Error("useToast must be used inside <ToastProvider>");return{toast:e.push}}const vh="medileser.theme",yh="adminator-theme",Lm=new Set;function sy(e){return e==="light"||e==="dark"}function $E(){try{const e=localStorage.getItem(vh);if(sy(e))return e;const a=localStorage.getItem(yh);return sy(a)?a:null}catch{return null}}function w0(){return $E()??"light"}function _0(e){if(typeof document>"u")return;const a=document.documentElement;a.setAttribute("data-theme",e),a.setAttribute("data-bs-theme",e),a.style.colorScheme=e}function FE(){const e=w0();try{localStorage.setItem(vh,e)}catch{}try{localStorage.setItem(yh,e)}catch{}return _0(e),e}function HE(e){try{localStorage.setItem(vh,e)}catch{}try{localStorage.setItem(yh,e)}catch{}_0(e),typeof window<"u"&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("adminator:themeChanged",{detail:{theme:e}})),Lm.forEach(a=>a(e))}function VE(e){return Lm.add(e),()=>{Lm.delete(e)}}function E0({className:e}){const a=g.useId(),[s,i]=g.useState(()=>w0());g.useEffect(()=>VE(i),[]);const c=s==="dark";return l.jsx("div",{className:`theme-toggle d-flex ai-c ${e??""}`.trim(),children:l.jsxs("div",{className:"form-check form-switch d-flex ai-c",style:{margin:0,padding:0},children:[l.jsxs("label",{className:"form-check-label me-2 text-nowrap c-grey-700",htmlFor:a,style:{fontSize:"12px",marginRight:"8px"},children:[l.jsx("i",{className:"ti-sun",style:{marginRight:"4px"}}),l.jsx("span",{className:"theme-label",children:"Claro"})]}),l.jsx("input",{className:"form-check-input",type:"checkbox",id:a,checked:c,onChange:d=>HE(d.target.checked?"dark":"light"),"aria-label":"Cambiar tema",style:{margin:0}}),l.jsxs("label",{className:"form-check-label ms-2 text-nowrap c-grey-700",htmlFor:a,style:{fontSize:"12px",marginLeft:"8px"},children:[l.jsx("span",{className:"theme-label",children:"Oscuro"}),l.jsx("i",{className:"ti-moon",style:{marginLeft:"4px"}})]})]})})}function ZE(){const{register:e,handleSubmit:a}=gu({defaultValues:{username:"",password:""}}),{toast:s}=al(),i=new URLSearchParams(window.location.search),c=i.get("returnTo")??"",d=c.startsWith("/")?c:"/home",f=i.get("pending")==="1",[h,v]=g.useState(!1),p=g.useRef(d),[y,x]=g.useState(!1),[j,F]=g.useState(0),[E,C]=g.useState(!1),{data:T,isLoading:q,error:A,refetch:te}=Xr({queryKey:["catalogs"],queryFn:bh,enabled:y}),U=T?.bancos??[];g.useEffect(()=>{const fe=AE();fe&&s({kind:"error",message:fe})},[s]),g.useEffect(()=>{y&&(j>0||U.length>0&&F(U[0].id))},[j,U,y]);const D=async fe=>{try{v(!0);const De=p0(),_e=await LE(fe),be=De!=null&&_e.userId&&De!==_e.userId,we=zm(_e.userId,_e.bancoId??0);if(we.target?p.current=we.target:f||be?p.current="/home":p.current=d,ai(_e.role)){x(!0),s({kind:"info",title:"Banco",message:"Seleccione el banco para continuar."});return}window.location.replace(p.current)}catch(De){const _e=De?.message??De?.response?.data?.detail??(typeof De=="string"?De:"Error de autenticacin");s({kind:"error",title:"Login",message:String(_e)})}finally{v(!1)}},P=j>0&&!E&&!q,B=async()=>{if(P)try{C(!0);const fe=g0(),De=fe!=null&&fe!==j,_e=await N0(j),be=zm(_e.userId,_e.bancoId??j);be.target?p.current=be.target:(f||De)&&(p.current="/home"),window.location.replace(p.current)}catch(fe){const De=fe?.response?.data?.detail??fe?.message??"No se pudo guardar el banco.";s({kind:"error",title:"Banco",message:String(De)})}finally{C(!1)}},W=()=>{j0(),x(!1),F(0)};return l.jsxs("div",{className:"vi-login",children:[l.jsx(fi,{show:h||E,label:E?"Guardando banco...":"Validando credenciales..."}),l.jsx("div",{className:"vi-login__theme",children:l.jsx(E0,{})}),l.jsxs("div",{className:"vi-login__split",children:[l.jsx("section",{className:"vi-login__left",children:l.jsx("div",{className:"text-center text-md-start",children:l.jsx("h1",{className:"vi-title display-6 mb-0",children:"ACCESO AL SISTEMA MEDILESER APP"})})}),l.jsx("section",{className:"vi-login__right",children:l.jsx("div",{className:"card shadow-sm vi-login__card",children:l.jsxs("div",{className:"card-body p-4 p-md-5",children:[l.jsx("h2",{className:"h4 text-center mb-4",children:"Bienvenido"}),l.jsxs("form",{onSubmit:a(D),className:"row g-3",children:[l.jsxs("div",{className:"col-md-6",children:[l.jsx("label",{htmlFor:"username",className:"form-label",children:"Usuario"}),l.jsx("input",{id:"username",className:"form-control",autoFocus:!0,autoComplete:"username",...e("username",{required:!0})})]}),l.jsx("div",{className:"col-md-6",children:l.jsx(go,{label:"Contrasea",inputId:"password",autoComplete:"current-password",...e("password",{required:!0})})}),l.jsx("div",{className:"col-12 d-grid",children:l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h||y,"aria-busy":h?"true":"false",children:h?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Ingresando..."]}):"Ingresar"})})]})]})})})]}),y&&l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:l.jsx("div",{className:"modal-dialog modal-dialog-centered",children:l.jsxs("div",{className:"modal-content",children:[l.jsx("div",{className:"modal-header",children:l.jsx("h5",{className:"modal-title",children:"Seleccionar banco"})}),l.jsxs("div",{className:"modal-body",children:[l.jsx("p",{className:"text-muted mb-3",children:"Seleccione el banco de trabajo para continuar."}),l.jsx("label",{className:"form-label",htmlFor:"bankId",children:"Banco"}),l.jsx("select",{id:"bankId",className:"form-select",value:j||"",onChange:fe=>F(Number(fe.target.value)),disabled:q||E,children:U.map(fe=>l.jsx("option",{value:fe.id,children:fe.name},fe.id))}),A?l.jsxs("div",{className:"alert alert-danger mt-3 mb-0",role:"alert",children:["No se pudieron cargar los bancos.",l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger ms-2",onClick:()=>te(),children:"Reintentar"})]}):null]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:W,disabled:E,children:"Cancelar"}),l.jsx("button",{type:"button",className:"btn btn-primary",disabled:!P,onClick:B,children:E?"Guardando...":"Continuar"})]})]})})})]})}const ry=(e,a,s)=>{if(e&&"reportValidity"in e){const i=$e(s,a);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},Bm=(e,a)=>{for(const s in a.fields){const i=a.fields[s];i&&i.ref&&"reportValidity"in i.ref?ry(i.ref,s,e):i&&i.refs&&i.refs.forEach(c=>ry(c,s,e))}},ly=(e,a)=>{a.shouldUseNativeValidation&&Bm(e,a);const s={};for(const i in e){const c=$e(a.fields,i),d=Object.assign(e[i]||{},{ref:c&&c.ref});if(GE(a.names||Object.keys(e),i)){const f=Object.assign({},$e(s,i));Ft(f,"root",d),Ft(s,i,f)}else Ft(s,i,d)}return s},GE=(e,a)=>{const s=iy(a);return e.some(i=>iy(i).match(`^${s}\\.\\d+`))};function iy(e){return e.replace(/\]|\[/g,"")}function Oe(e,a,s){function i(h,v){var p;Object.defineProperty(h,"_zod",{value:h._zod??{},enumerable:!1}),(p=h._zod).traits??(p.traits=new Set),h._zod.traits.add(e),a(h,v);for(const y in f.prototype)y in h||Object.defineProperty(h,y,{value:f.prototype[y].bind(h)});h._zod.constr=f,h._zod.def=v}const c=s?.Parent??Object;class d extends c{}Object.defineProperty(d,"name",{value:e});function f(h){var v;const p=s?.Parent?new d:this;i(p,h),(v=p._zod).deferred??(v.deferred=[]);for(const y of p._zod.deferred)y();return p}return Object.defineProperty(f,"init",{value:i}),Object.defineProperty(f,Symbol.hasInstance,{value:h=>s?.Parent&&h instanceof s.Parent?!0:h?._zod?.traits?.has(e)}),Object.defineProperty(f,"name",{value:e}),f}class ti extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class A0 extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}const C0={};function Wr(e){return C0}function PE(e){const a=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,c])=>a.indexOf(+i)===-1).map(([i,c])=>c)}function qm(e,a){return typeof a=="bigint"?a.toString():a}function xh(e){return{get value(){{const a=e();return Object.defineProperty(this,"value",{value:a}),a}}}}function Nh(e){return e==null}function jh(e){const a=e.startsWith("^")?1:0,s=e.endsWith("$")?e.length-1:e.length;return e.slice(a,s)}function QE(e,a){const s=(e.toString().split(".")[1]||"").length,i=a.toString();let c=(i.split(".")[1]||"").length;if(c===0&&/\d?e-\d?/.test(i)){const v=i.match(/\d?e-(\d?)/);v?.[1]&&(c=Number.parseInt(v[1]))}const d=s>c?s:c,f=Number.parseInt(e.toFixed(d).replace(".","")),h=Number.parseInt(a.toFixed(d).replace(".",""));return f%h/10**d}const oy=Symbol("evaluating");function Xt(e,a,s){let i;Object.defineProperty(e,a,{get(){if(i!==oy)return i===void 0&&(i=oy,i=s()),i},set(c){Object.defineProperty(e,a,{value:c})},configurable:!0})}function sl(e,a,s){Object.defineProperty(e,a,{value:s,writable:!0,enumerable:!0,configurable:!0})}function rl(...e){const a={};for(const s of e){const i=Object.getOwnPropertyDescriptors(s);Object.assign(a,i)}return Object.defineProperties({},a)}function cy(e){return JSON.stringify(e)}const O0="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function lu(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const YE=xh(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function bo(e){if(lu(e)===!1)return!1;const a=e.constructor;if(a===void 0)return!0;const s=a.prototype;return!(lu(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}function R0(e){return bo(e)?{...e}:Array.isArray(e)?[...e]:e}const KE=new Set(["string","number","symbol"]);function _u(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Sr(e,a,s){const i=new e._zod.constr(a??e._zod.def);return(!a||s?.parent)&&(i._zod.parent=e),i}function nt(e){const a=e;if(!a)return{};if(typeof a=="string")return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");a.error=a.message}return delete a.message,typeof a.error=="string"?{...a,error:()=>a.error}:a}function XE(e){return Object.keys(e).filter(a=>e[a]._zod.optin==="optional"&&e[a]._zod.optout==="optional")}const JE={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function WE(e,a){const s=e._zod.def,i=rl(e._zod.def,{get shape(){const c={};for(const d in a){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);a[d]&&(c[d]=s.shape[d])}return sl(this,"shape",c),c},checks:[]});return Sr(e,i)}function eA(e,a){const s=e._zod.def,i=rl(e._zod.def,{get shape(){const c={...e._zod.def.shape};for(const d in a){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);a[d]&&delete c[d]}return sl(this,"shape",c),c},checks:[]});return Sr(e,i)}function tA(e,a){if(!bo(a))throw new Error("Invalid input to extend: expected a plain object");const s=e._zod.def.checks;if(s&&s.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const c=rl(e._zod.def,{get shape(){const d={...e._zod.def.shape,...a};return sl(this,"shape",d),d},checks:[]});return Sr(e,c)}function nA(e,a){if(!bo(a))throw new Error("Invalid input to safeExtend: expected a plain object");const s={...e._zod.def,get shape(){const i={...e._zod.def.shape,...a};return sl(this,"shape",i),i},checks:e._zod.def.checks};return Sr(e,s)}function aA(e,a){const s=rl(e._zod.def,{get shape(){const i={...e._zod.def.shape,...a._zod.def.shape};return sl(this,"shape",i),i},get catchall(){return a._zod.def.catchall},checks:[]});return Sr(e,s)}function sA(e,a,s){const i=rl(a._zod.def,{get shape(){const c=a._zod.def.shape,d={...c};if(s)for(const f in s){if(!(f in c))throw new Error(`Unrecognized key: "${f}"`);s[f]&&(d[f]=e?new e({type:"optional",innerType:c[f]}):c[f])}else for(const f in c)d[f]=e?new e({type:"optional",innerType:c[f]}):c[f];return sl(this,"shape",d),d},checks:[]});return Sr(a,i)}function rA(e,a,s){const i=rl(a._zod.def,{get shape(){const c=a._zod.def.shape,d={...c};if(s)for(const f in s){if(!(f in d))throw new Error(`Unrecognized key: "${f}"`);s[f]&&(d[f]=new e({type:"nonoptional",innerType:c[f]}))}else for(const f in c)d[f]=new e({type:"nonoptional",innerType:c[f]});return sl(this,"shape",d),d},checks:[]});return Sr(a,i)}function Wl(e,a=0){if(e.aborted===!0)return!0;for(let s=a;s<e.issues.length;s++)if(e.issues[s]?.continue!==!0)return!0;return!1}function T0(e,a){return a.map(s=>{var i;return(i=s).path??(i.path=[]),s.path.unshift(e),s})}function Bc(e){return typeof e=="string"?e:e?.message}function el(e,a,s){const i={...e,path:e.path??[]};if(!e.message){const c=Bc(e.inst?._zod.def?.error?.(e))??Bc(a?.error?.(e))??Bc(s.customError?.(e))??Bc(s.localeError?.(e))??"Invalid input";i.message=c}return delete i.inst,delete i.continue,a?.reportInput||delete i.input,i}function Sh(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function vo(...e){const[a,s,i]=e;return typeof a=="string"?{message:a,code:"custom",input:s,inst:i}:{...a}}const D0=(e,a)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:a,enumerable:!1}),e.message=JSON.stringify(a,qm,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},wh=Oe("$ZodError",D0),Eu=Oe("$ZodError",D0,{Parent:Error});function lA(e,a=s=>s.message){const s={},i=[];for(const c of e.issues)c.path.length>0?(s[c.path[0]]=s[c.path[0]]||[],s[c.path[0]].push(a(c))):i.push(a(c));return{formErrors:i,fieldErrors:s}}function iA(e,a=s=>s.message){const s={_errors:[]},i=c=>{for(const d of c.issues)if(d.code==="invalid_union"&&d.errors.length)d.errors.map(f=>i({issues:f}));else if(d.code==="invalid_key")i({issues:d.issues});else if(d.code==="invalid_element")i({issues:d.issues});else if(d.path.length===0)s._errors.push(a(d));else{let f=s,h=0;for(;h<d.path.length;){const v=d.path[h];h===d.path.length-1?(f[v]=f[v]||{_errors:[]},f[v]._errors.push(a(d))):f[v]=f[v]||{_errors:[]},f=f[v],h++}}};return i(e),s}const Au=e=>(a,s,i,c)=>{const d=i?Object.assign(i,{async:!1}):{async:!1},f=a._zod.run({value:s,issues:[]},d);if(f instanceof Promise)throw new ti;if(f.issues.length){const h=new(c?.Err??e)(f.issues.map(v=>el(v,d,Wr())));throw O0(h,c?.callee),h}return f.value},oA=Au(Eu),Cu=e=>async(a,s,i,c)=>{const d=i?Object.assign(i,{async:!0}):{async:!0};let f=a._zod.run({value:s,issues:[]},d);if(f instanceof Promise&&(f=await f),f.issues.length){const h=new(c?.Err??e)(f.issues.map(v=>el(v,d,Wr())));throw O0(h,c?.callee),h}return f.value},cA=Cu(Eu),Ou=e=>(a,s,i)=>{const c=i?{...i,async:!1}:{async:!1},d=a._zod.run({value:s,issues:[]},c);if(d instanceof Promise)throw new ti;return d.issues.length?{success:!1,error:new(e??wh)(d.issues.map(f=>el(f,c,Wr())))}:{success:!0,data:d.value}},uA=Ou(Eu),Ru=e=>async(a,s,i)=>{const c=i?Object.assign(i,{async:!0}):{async:!0};let d=a._zod.run({value:s,issues:[]},c);return d instanceof Promise&&(d=await d),d.issues.length?{success:!1,error:new e(d.issues.map(f=>el(f,c,Wr())))}:{success:!0,data:d.value}},dA=Ru(Eu),fA=e=>(a,s,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Au(e)(a,s,c)},mA=e=>(a,s,i)=>Au(e)(a,s,i),hA=e=>async(a,s,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Cu(e)(a,s,c)},pA=e=>async(a,s,i)=>Cu(e)(a,s,i),gA=e=>(a,s,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Ou(e)(a,s,c)},bA=e=>(a,s,i)=>Ou(e)(a,s,i),vA=e=>async(a,s,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Ru(e)(a,s,c)},yA=e=>async(a,s,i)=>Ru(e)(a,s,i),xA=/^[cC][^\s-]{8,}$/,NA=/^[0-9a-z]+$/,jA=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,SA=/^[0-9a-vA-V]{20}$/,wA=/^[A-Za-z0-9]{27}$/,_A=/^[a-zA-Z0-9_-]{21}$/,EA=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,AA=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,uy=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,CA=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,OA="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function RA(){return new RegExp(OA,"u")}const TA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,DA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,zA=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,kA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,MA=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,z0=/^[A-Za-z0-9_-]*$/,UA=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,LA=/^\+(?:[0-9]){6,14}[0-9]$/,k0="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",BA=new RegExp(`^${k0}$`);function M0(e){const a="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${a}`:e.precision===0?`${a}:[0-5]\\d`:`${a}:[0-5]\\d\\.\\d{${e.precision}}`:`${a}(?::[0-5]\\d(?:\\.\\d+)?)?`}function qA(e){return new RegExp(`^${M0(e)}$`)}function IA(e){const a=M0({precision:e.precision}),s=["Z"];e.local&&s.push(""),e.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${a}(?:${s.join("|")})`;return new RegExp(`^${k0}T(?:${i})$`)}const $A=e=>{const a=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${a}$`)},FA=/^-?\d+$/,HA=/^-?\d+(?:\.\d+)?/,VA=/^[^A-Z]*$/,ZA=/^[^a-z]*$/,ja=Oe("$ZodCheck",(e,a)=>{var s;e._zod??(e._zod={}),e._zod.def=a,(s=e._zod).onattach??(s.onattach=[])}),U0={number:"number",bigint:"bigint",object:"date"},L0=Oe("$ZodCheckLessThan",(e,a)=>{ja.init(e,a);const s=U0[typeof a.value];e._zod.onattach.push(i=>{const c=i._zod.bag,d=(a.inclusive?c.maximum:c.exclusiveMaximum)??Number.POSITIVE_INFINITY;a.value<d&&(a.inclusive?c.maximum=a.value:c.exclusiveMaximum=a.value)}),e._zod.check=i=>{(a.inclusive?i.value<=a.value:i.value<a.value)||i.issues.push({origin:s,code:"too_big",maximum:a.value,input:i.value,inclusive:a.inclusive,inst:e,continue:!a.abort})}}),B0=Oe("$ZodCheckGreaterThan",(e,a)=>{ja.init(e,a);const s=U0[typeof a.value];e._zod.onattach.push(i=>{const c=i._zod.bag,d=(a.inclusive?c.minimum:c.exclusiveMinimum)??Number.NEGATIVE_INFINITY;a.value>d&&(a.inclusive?c.minimum=a.value:c.exclusiveMinimum=a.value)}),e._zod.check=i=>{(a.inclusive?i.value>=a.value:i.value>a.value)||i.issues.push({origin:s,code:"too_small",minimum:a.value,input:i.value,inclusive:a.inclusive,inst:e,continue:!a.abort})}}),GA=Oe("$ZodCheckMultipleOf",(e,a)=>{ja.init(e,a),e._zod.onattach.push(s=>{var i;(i=s._zod.bag).multipleOf??(i.multipleOf=a.value)}),e._zod.check=s=>{if(typeof s.value!=typeof a.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof s.value=="bigint"?s.value%a.value===BigInt(0):QE(s.value,a.value)===0)||s.issues.push({origin:typeof s.value,code:"not_multiple_of",divisor:a.value,input:s.value,inst:e,continue:!a.abort})}}),PA=Oe("$ZodCheckNumberFormat",(e,a)=>{ja.init(e,a),a.format=a.format||"float64";const s=a.format?.includes("int"),i=s?"int":"number",[c,d]=JE[a.format];e._zod.onattach.push(f=>{const h=f._zod.bag;h.format=a.format,h.minimum=c,h.maximum=d,s&&(h.pattern=FA)}),e._zod.check=f=>{const h=f.value;if(s){if(!Number.isInteger(h)){f.issues.push({expected:i,format:a.format,code:"invalid_type",continue:!1,input:h,inst:e});return}if(!Number.isSafeInteger(h)){h>0?f.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,continue:!a.abort}):f.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,continue:!a.abort});return}}h<c&&f.issues.push({origin:"number",input:h,code:"too_small",minimum:c,inclusive:!0,inst:e,continue:!a.abort}),h>d&&f.issues.push({origin:"number",input:h,code:"too_big",maximum:d,inst:e})}}),QA=Oe("$ZodCheckMaxLength",(e,a)=>{var s;ja.init(e,a),(s=e._zod.def).when??(s.when=i=>{const c=i.value;return!Nh(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag.maximum??Number.POSITIVE_INFINITY;a.maximum<c&&(i._zod.bag.maximum=a.maximum)}),e._zod.check=i=>{const c=i.value;if(c.length<=a.maximum)return;const f=Sh(c);i.issues.push({origin:f,code:"too_big",maximum:a.maximum,inclusive:!0,input:c,inst:e,continue:!a.abort})}}),YA=Oe("$ZodCheckMinLength",(e,a)=>{var s;ja.init(e,a),(s=e._zod.def).when??(s.when=i=>{const c=i.value;return!Nh(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;a.minimum>c&&(i._zod.bag.minimum=a.minimum)}),e._zod.check=i=>{const c=i.value;if(c.length>=a.minimum)return;const f=Sh(c);i.issues.push({origin:f,code:"too_small",minimum:a.minimum,inclusive:!0,input:c,inst:e,continue:!a.abort})}}),KA=Oe("$ZodCheckLengthEquals",(e,a)=>{var s;ja.init(e,a),(s=e._zod.def).when??(s.when=i=>{const c=i.value;return!Nh(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag;c.minimum=a.length,c.maximum=a.length,c.length=a.length}),e._zod.check=i=>{const c=i.value,d=c.length;if(d===a.length)return;const f=Sh(c),h=d>a.length;i.issues.push({origin:f,...h?{code:"too_big",maximum:a.length}:{code:"too_small",minimum:a.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!a.abort})}}),Tu=Oe("$ZodCheckStringFormat",(e,a)=>{var s,i;ja.init(e,a),e._zod.onattach.push(c=>{const d=c._zod.bag;d.format=a.format,a.pattern&&(d.patterns??(d.patterns=new Set),d.patterns.add(a.pattern))}),a.pattern?(s=e._zod).check??(s.check=c=>{a.pattern.lastIndex=0,!a.pattern.test(c.value)&&c.issues.push({origin:"string",code:"invalid_format",format:a.format,input:c.value,...a.pattern?{pattern:a.pattern.toString()}:{},inst:e,continue:!a.abort})}):(i=e._zod).check??(i.check=()=>{})}),XA=Oe("$ZodCheckRegex",(e,a)=>{Tu.init(e,a),e._zod.check=s=>{a.pattern.lastIndex=0,!a.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:a.pattern.toString(),inst:e,continue:!a.abort})}}),JA=Oe("$ZodCheckLowerCase",(e,a)=>{a.pattern??(a.pattern=VA),Tu.init(e,a)}),WA=Oe("$ZodCheckUpperCase",(e,a)=>{a.pattern??(a.pattern=ZA),Tu.init(e,a)}),eC=Oe("$ZodCheckIncludes",(e,a)=>{ja.init(e,a);const s=_u(a.includes),i=new RegExp(typeof a.position=="number"?`^.{${a.position}}${s}`:s);a.pattern=i,e._zod.onattach.push(c=>{const d=c._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(i)}),e._zod.check=c=>{c.value.includes(a.includes,a.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:a.includes,input:c.value,inst:e,continue:!a.abort})}}),tC=Oe("$ZodCheckStartsWith",(e,a)=>{ja.init(e,a);const s=new RegExp(`^${_u(a.prefix)}.*`);a.pattern??(a.pattern=s),e._zod.onattach.push(i=>{const c=i._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(s)}),e._zod.check=i=>{i.value.startsWith(a.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:a.prefix,input:i.value,inst:e,continue:!a.abort})}}),nC=Oe("$ZodCheckEndsWith",(e,a)=>{ja.init(e,a);const s=new RegExp(`.*${_u(a.suffix)}$`);a.pattern??(a.pattern=s),e._zod.onattach.push(i=>{const c=i._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(s)}),e._zod.check=i=>{i.value.endsWith(a.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:a.suffix,input:i.value,inst:e,continue:!a.abort})}}),aC=Oe("$ZodCheckOverwrite",(e,a)=>{ja.init(e,a),e._zod.check=s=>{s.value=a.tx(s.value)}});class sC{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if(typeof a=="function"){a(this,{execution:"sync"}),a(this,{execution:"async"});return}const i=a.split(`
`).filter(f=>f),c=Math.min(...i.map(f=>f.length-f.trimStart().length)),d=i.map(f=>f.slice(c)).map(f=>" ".repeat(this.indent*2)+f);for(const f of d)this.content.push(f)}compile(){const a=Function,s=this?.args,c=[...(this?.content??[""]).map(d=>`  ${d}`)];return new a(...s,c.join(`
`))}}const rC={major:4,minor:1,patch:12},kn=Oe("$ZodType",(e,a)=>{var s;e??(e={}),e._zod.def=a,e._zod.bag=e._zod.bag||{},e._zod.version=rC;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const c of i)for(const d of c._zod.onattach)d(e);if(i.length===0)(s=e._zod).deferred??(s.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const c=(f,h,v)=>{let p=Wl(f),y;for(const x of h){if(x._zod.def.when){if(!x._zod.def.when(f))continue}else if(p)continue;const j=f.issues.length,F=x._zod.check(f);if(F instanceof Promise&&v?.async===!1)throw new ti;if(y||F instanceof Promise)y=(y??Promise.resolve()).then(async()=>{await F,f.issues.length!==j&&(p||(p=Wl(f,j)))});else{if(f.issues.length===j)continue;p||(p=Wl(f,j))}}return y?y.then(()=>f):f},d=(f,h,v)=>{if(Wl(f))return f.aborted=!0,f;const p=c(h,i,v);if(p instanceof Promise){if(v.async===!1)throw new ti;return p.then(y=>e._zod.parse(y,v))}return e._zod.parse(p,v)};e._zod.run=(f,h)=>{if(h.skipChecks)return e._zod.parse(f,h);if(h.direction==="backward"){const p=e._zod.parse({value:f.value,issues:[]},{...h,skipChecks:!0});return p instanceof Promise?p.then(y=>d(y,f,h)):d(p,f,h)}const v=e._zod.parse(f,h);if(v instanceof Promise){if(h.async===!1)throw new ti;return v.then(p=>c(p,i,h))}return c(v,i,h)}}e["~standard"]={validate:c=>{try{const d=uA(e,c);return d.success?{value:d.data}:{issues:d.error?.issues}}catch{return dA(e,c).then(f=>f.success?{value:f.data}:{issues:f.error?.issues})}},vendor:"zod",version:1}}),_h=Oe("$ZodString",(e,a)=>{kn.init(e,a),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??$A(e._zod.bag),e._zod.parse=(s,i)=>{if(a.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),un=Oe("$ZodStringFormat",(e,a)=>{Tu.init(e,a),_h.init(e,a)}),lC=Oe("$ZodGUID",(e,a)=>{a.pattern??(a.pattern=AA),un.init(e,a)}),iC=Oe("$ZodUUID",(e,a)=>{if(a.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[a.version];if(i===void 0)throw new Error(`Invalid UUID version: "${a.version}"`);a.pattern??(a.pattern=uy(i))}else a.pattern??(a.pattern=uy());un.init(e,a)}),oC=Oe("$ZodEmail",(e,a)=>{a.pattern??(a.pattern=CA),un.init(e,a)}),cC=Oe("$ZodURL",(e,a)=>{un.init(e,a),e._zod.check=s=>{try{const i=s.value.trim(),c=new URL(i);a.hostname&&(a.hostname.lastIndex=0,a.hostname.test(c.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:UA.source,input:s.value,inst:e,continue:!a.abort})),a.protocol&&(a.protocol.lastIndex=0,a.protocol.test(c.protocol.endsWith(":")?c.protocol.slice(0,-1):c.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:a.protocol.source,input:s.value,inst:e,continue:!a.abort})),a.normalize?s.value=c.href:s.value=i;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:e,continue:!a.abort})}}}),uC=Oe("$ZodEmoji",(e,a)=>{a.pattern??(a.pattern=RA()),un.init(e,a)}),dC=Oe("$ZodNanoID",(e,a)=>{a.pattern??(a.pattern=_A),un.init(e,a)}),fC=Oe("$ZodCUID",(e,a)=>{a.pattern??(a.pattern=xA),un.init(e,a)}),mC=Oe("$ZodCUID2",(e,a)=>{a.pattern??(a.pattern=NA),un.init(e,a)}),hC=Oe("$ZodULID",(e,a)=>{a.pattern??(a.pattern=jA),un.init(e,a)}),pC=Oe("$ZodXID",(e,a)=>{a.pattern??(a.pattern=SA),un.init(e,a)}),gC=Oe("$ZodKSUID",(e,a)=>{a.pattern??(a.pattern=wA),un.init(e,a)}),bC=Oe("$ZodISODateTime",(e,a)=>{a.pattern??(a.pattern=IA(a)),un.init(e,a)}),vC=Oe("$ZodISODate",(e,a)=>{a.pattern??(a.pattern=BA),un.init(e,a)}),yC=Oe("$ZodISOTime",(e,a)=>{a.pattern??(a.pattern=qA(a)),un.init(e,a)}),xC=Oe("$ZodISODuration",(e,a)=>{a.pattern??(a.pattern=EA),un.init(e,a)}),NC=Oe("$ZodIPv4",(e,a)=>{a.pattern??(a.pattern=TA),un.init(e,a),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format="ipv4"})}),jC=Oe("$ZodIPv6",(e,a)=>{a.pattern??(a.pattern=DA),un.init(e,a),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format="ipv6"}),e._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:e,continue:!a.abort})}}}),SC=Oe("$ZodCIDRv4",(e,a)=>{a.pattern??(a.pattern=zA),un.init(e,a)}),wC=Oe("$ZodCIDRv6",(e,a)=>{a.pattern??(a.pattern=kA),un.init(e,a),e._zod.check=s=>{const i=s.value.split("/");try{if(i.length!==2)throw new Error;const[c,d]=i;if(!d)throw new Error;const f=Number(d);if(`${f}`!==d)throw new Error;if(f<0||f>128)throw new Error;new URL(`http://[${c}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:e,continue:!a.abort})}}});function q0(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const _C=Oe("$ZodBase64",(e,a)=>{a.pattern??(a.pattern=MA),un.init(e,a),e._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64"}),e._zod.check=s=>{q0(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:e,continue:!a.abort})}});function EC(e){if(!z0.test(e))return!1;const a=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),s=a.padEnd(Math.ceil(a.length/4)*4,"=");return q0(s)}const AC=Oe("$ZodBase64URL",(e,a)=>{a.pattern??(a.pattern=z0),un.init(e,a),e._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64url"}),e._zod.check=s=>{EC(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:e,continue:!a.abort})}}),CC=Oe("$ZodE164",(e,a)=>{a.pattern??(a.pattern=LA),un.init(e,a)});function OC(e,a=null){try{const s=e.split(".");if(s.length!==3)return!1;const[i]=s;if(!i)return!1;const c=JSON.parse(atob(i));return!("typ"in c&&c?.typ!=="JWT"||!c.alg||a&&(!("alg"in c)||c.alg!==a))}catch{return!1}}const RC=Oe("$ZodJWT",(e,a)=>{un.init(e,a),e._zod.check=s=>{OC(s.value,a.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:e,continue:!a.abort})}}),I0=Oe("$ZodNumber",(e,a)=>{kn.init(e,a),e._zod.pattern=e._zod.bag.pattern??HA,e._zod.parse=(s,i)=>{if(a.coerce)try{s.value=Number(s.value)}catch{}const c=s.value;if(typeof c=="number"&&!Number.isNaN(c)&&Number.isFinite(c))return s;const d=typeof c=="number"?Number.isNaN(c)?"NaN":Number.isFinite(c)?void 0:"Infinity":void 0;return s.issues.push({expected:"number",code:"invalid_type",input:c,inst:e,...d?{received:d}:{}}),s}}),TC=Oe("$ZodNumber",(e,a)=>{PA.init(e,a),I0.init(e,a)}),DC=Oe("$ZodUnknown",(e,a)=>{kn.init(e,a),e._zod.parse=s=>s}),zC=Oe("$ZodNever",(e,a)=>{kn.init(e,a),e._zod.parse=(s,i)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:e}),s)});function dy(e,a,s){e.issues.length&&a.issues.push(...T0(s,e.issues)),a.value[s]=e.value}const kC=Oe("$ZodArray",(e,a)=>{kn.init(e,a),e._zod.parse=(s,i)=>{const c=s.value;if(!Array.isArray(c))return s.issues.push({expected:"array",code:"invalid_type",input:c,inst:e}),s;s.value=Array(c.length);const d=[];for(let f=0;f<c.length;f++){const h=c[f],v=a.element._zod.run({value:h,issues:[]},i);v instanceof Promise?d.push(v.then(p=>dy(p,s,f))):dy(v,s,f)}return d.length?Promise.all(d).then(()=>s):s}});function iu(e,a,s,i){e.issues.length&&a.issues.push(...T0(s,e.issues)),e.value===void 0?s in i&&(a.value[s]=void 0):a.value[s]=e.value}function $0(e){const a=Object.keys(e.shape);for(const i of a)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const s=XE(e.shape);return{...e,keys:a,keySet:new Set(a),numKeys:a.length,optionalKeys:new Set(s)}}function F0(e,a,s,i,c,d){const f=[],h=c.keySet,v=c.catchall._zod,p=v.def.type;for(const y of Object.keys(a)){if(h.has(y))continue;if(p==="never"){f.push(y);continue}const x=v.run({value:a[y],issues:[]},i);x instanceof Promise?e.push(x.then(j=>iu(j,s,y,a))):iu(x,s,y,a)}return f.length&&s.issues.push({code:"unrecognized_keys",keys:f,input:a,inst:d}),e.length?Promise.all(e).then(()=>s):s}const MC=Oe("$ZodObject",(e,a)=>{if(kn.init(e,a),!Object.getOwnPropertyDescriptor(a,"shape")?.get){const h=a.shape;Object.defineProperty(a,"shape",{get:()=>{const v={...h};return Object.defineProperty(a,"shape",{value:v}),v}})}const i=xh(()=>$0(a));Xt(e._zod,"propValues",()=>{const h=a.shape,v={};for(const p in h){const y=h[p]._zod;if(y.values){v[p]??(v[p]=new Set);for(const x of y.values)v[p].add(x)}}return v});const c=lu,d=a.catchall;let f;e._zod.parse=(h,v)=>{f??(f=i.value);const p=h.value;if(!c(p))return h.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),h;h.value={};const y=[],x=f.shape;for(const j of f.keys){const E=x[j]._zod.run({value:p[j],issues:[]},v);E instanceof Promise?y.push(E.then(C=>iu(C,h,j,p))):iu(E,h,j,p)}return d?F0(y,p,h,v,i.value,e):y.length?Promise.all(y).then(()=>h):h}}),UC=Oe("$ZodObjectJIT",(e,a)=>{MC.init(e,a);const s=e._zod.parse,i=xh(()=>$0(a)),c=j=>{const F=new sC(["shape","payload","ctx"]),E=i.value,C=te=>{const U=cy(te);return`shape[${U}]._zod.run({ value: input[${U}], issues: [] }, ctx)`};F.write("const input = payload.value;");const T=Object.create(null);let q=0;for(const te of E.keys)T[te]=`key_${q++}`;F.write("const newResult = {};");for(const te of E.keys){const U=T[te],D=cy(te);F.write(`const ${U} = ${C(te)};`),F.write(`
        if (${U}.issues.length) {
          payload.issues = payload.issues.concat(${U}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${D}, ...iss.path] : [${D}]
          })));
        }
        
        
        if (${U}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${U}.value;
        }
        
      `)}F.write("payload.value = newResult;"),F.write("return payload;");const A=F.compile();return(te,U)=>A(j,te,U)};let d;const f=lu,h=!C0.jitless,p=h&&YE.value,y=a.catchall;let x;e._zod.parse=(j,F)=>{x??(x=i.value);const E=j.value;return f(E)?h&&p&&F?.async===!1&&F.jitless!==!0?(d||(d=c(a.shape)),j=d(j,F),y?F0([],E,j,F,x,e):j):s(j,F):(j.issues.push({expected:"object",code:"invalid_type",input:E,inst:e}),j)}});function fy(e,a,s,i){for(const d of e)if(d.issues.length===0)return a.value=d.value,a;const c=e.filter(d=>!Wl(d));return c.length===1?(a.value=c[0].value,c[0]):(a.issues.push({code:"invalid_union",input:a.value,inst:s,errors:e.map(d=>d.issues.map(f=>el(f,i,Wr())))}),a)}const LC=Oe("$ZodUnion",(e,a)=>{kn.init(e,a),Xt(e._zod,"optin",()=>a.options.some(c=>c._zod.optin==="optional")?"optional":void 0),Xt(e._zod,"optout",()=>a.options.some(c=>c._zod.optout==="optional")?"optional":void 0),Xt(e._zod,"values",()=>{if(a.options.every(c=>c._zod.values))return new Set(a.options.flatMap(c=>Array.from(c._zod.values)))}),Xt(e._zod,"pattern",()=>{if(a.options.every(c=>c._zod.pattern)){const c=a.options.map(d=>d._zod.pattern);return new RegExp(`^(${c.map(d=>jh(d.source)).join("|")})$`)}});const s=a.options.length===1,i=a.options[0]._zod.run;e._zod.parse=(c,d)=>{if(s)return i(c,d);let f=!1;const h=[];for(const v of a.options){const p=v._zod.run({value:c.value,issues:[]},d);if(p instanceof Promise)h.push(p),f=!0;else{if(p.issues.length===0)return p;h.push(p)}}return f?Promise.all(h).then(v=>fy(v,c,e,d)):fy(h,c,e,d)}}),BC=Oe("$ZodIntersection",(e,a)=>{kn.init(e,a),e._zod.parse=(s,i)=>{const c=s.value,d=a.left._zod.run({value:c,issues:[]},i),f=a.right._zod.run({value:c,issues:[]},i);return d instanceof Promise||f instanceof Promise?Promise.all([d,f]).then(([v,p])=>my(s,v,p)):my(s,d,f)}});function Im(e,a){if(e===a)return{valid:!0,data:e};if(e instanceof Date&&a instanceof Date&&+e==+a)return{valid:!0,data:e};if(bo(e)&&bo(a)){const s=Object.keys(a),i=Object.keys(e).filter(d=>s.indexOf(d)!==-1),c={...e,...a};for(const d of i){const f=Im(e[d],a[d]);if(!f.valid)return{valid:!1,mergeErrorPath:[d,...f.mergeErrorPath]};c[d]=f.data}return{valid:!0,data:c}}if(Array.isArray(e)&&Array.isArray(a)){if(e.length!==a.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let i=0;i<e.length;i++){const c=e[i],d=a[i],f=Im(c,d);if(!f.valid)return{valid:!1,mergeErrorPath:[i,...f.mergeErrorPath]};s.push(f.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function my(e,a,s){if(a.issues.length&&e.issues.push(...a.issues),s.issues.length&&e.issues.push(...s.issues),Wl(e))return e;const i=Im(a.value,s.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const qC=Oe("$ZodEnum",(e,a)=>{kn.init(e,a);const s=PE(a.entries),i=new Set(s);e._zod.values=i,e._zod.pattern=new RegExp(`^(${s.filter(c=>KE.has(typeof c)).map(c=>typeof c=="string"?_u(c):c.toString()).join("|")})$`),e._zod.parse=(c,d)=>{const f=c.value;return i.has(f)||c.issues.push({code:"invalid_value",values:s,input:f,inst:e}),c}}),IC=Oe("$ZodTransform",(e,a)=>{kn.init(e,a),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new A0(e.constructor.name);const c=a.transform(s.value,s);if(i.async)return(c instanceof Promise?c:Promise.resolve(c)).then(f=>(s.value=f,s));if(c instanceof Promise)throw new ti;return s.value=c,s}});function hy(e,a){return e.issues.length&&a===void 0?{issues:[],value:void 0}:e}const $C=Oe("$ZodOptional",(e,a)=>{kn.init(e,a),e._zod.optin="optional",e._zod.optout="optional",Xt(e._zod,"values",()=>a.innerType._zod.values?new Set([...a.innerType._zod.values,void 0]):void 0),Xt(e._zod,"pattern",()=>{const s=a.innerType._zod.pattern;return s?new RegExp(`^(${jh(s.source)})?$`):void 0}),e._zod.parse=(s,i)=>{if(a.innerType._zod.optin==="optional"){const c=a.innerType._zod.run(s,i);return c instanceof Promise?c.then(d=>hy(d,s.value)):hy(c,s.value)}return s.value===void 0?s:a.innerType._zod.run(s,i)}}),FC=Oe("$ZodNullable",(e,a)=>{kn.init(e,a),Xt(e._zod,"optin",()=>a.innerType._zod.optin),Xt(e._zod,"optout",()=>a.innerType._zod.optout),Xt(e._zod,"pattern",()=>{const s=a.innerType._zod.pattern;return s?new RegExp(`^(${jh(s.source)}|null)$`):void 0}),Xt(e._zod,"values",()=>a.innerType._zod.values?new Set([...a.innerType._zod.values,null]):void 0),e._zod.parse=(s,i)=>s.value===null?s:a.innerType._zod.run(s,i)}),HC=Oe("$ZodDefault",(e,a)=>{kn.init(e,a),e._zod.optin="optional",Xt(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return a.innerType._zod.run(s,i);if(s.value===void 0)return s.value=a.defaultValue,s;const c=a.innerType._zod.run(s,i);return c instanceof Promise?c.then(d=>py(d,a)):py(c,a)}});function py(e,a){return e.value===void 0&&(e.value=a.defaultValue),e}const VC=Oe("$ZodPrefault",(e,a)=>{kn.init(e,a),e._zod.optin="optional",Xt(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(s,i)=>(i.direction==="backward"||s.value===void 0&&(s.value=a.defaultValue),a.innerType._zod.run(s,i))}),ZC=Oe("$ZodNonOptional",(e,a)=>{kn.init(e,a),Xt(e._zod,"values",()=>{const s=a.innerType._zod.values;return s?new Set([...s].filter(i=>i!==void 0)):void 0}),e._zod.parse=(s,i)=>{const c=a.innerType._zod.run(s,i);return c instanceof Promise?c.then(d=>gy(d,e)):gy(c,e)}});function gy(e,a){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:a}),e}const GC=Oe("$ZodCatch",(e,a)=>{kn.init(e,a),Xt(e._zod,"optin",()=>a.innerType._zod.optin),Xt(e._zod,"optout",()=>a.innerType._zod.optout),Xt(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return a.innerType._zod.run(s,i);const c=a.innerType._zod.run(s,i);return c instanceof Promise?c.then(d=>(s.value=d.value,d.issues.length&&(s.value=a.catchValue({...s,error:{issues:d.issues.map(f=>el(f,i,Wr()))},input:s.value}),s.issues=[]),s)):(s.value=c.value,c.issues.length&&(s.value=a.catchValue({...s,error:{issues:c.issues.map(d=>el(d,i,Wr()))},input:s.value}),s.issues=[]),s)}}),PC=Oe("$ZodPipe",(e,a)=>{kn.init(e,a),Xt(e._zod,"values",()=>a.in._zod.values),Xt(e._zod,"optin",()=>a.in._zod.optin),Xt(e._zod,"optout",()=>a.out._zod.optout),Xt(e._zod,"propValues",()=>a.in._zod.propValues),e._zod.parse=(s,i)=>{if(i.direction==="backward"){const d=a.out._zod.run(s,i);return d instanceof Promise?d.then(f=>qc(f,a.in,i)):qc(d,a.in,i)}const c=a.in._zod.run(s,i);return c instanceof Promise?c.then(d=>qc(d,a.out,i)):qc(c,a.out,i)}});function qc(e,a,s){return e.issues.length?(e.aborted=!0,e):a._zod.run({value:e.value,issues:e.issues},s)}const QC=Oe("$ZodReadonly",(e,a)=>{kn.init(e,a),Xt(e._zod,"propValues",()=>a.innerType._zod.propValues),Xt(e._zod,"values",()=>a.innerType._zod.values),Xt(e._zod,"optin",()=>a.innerType._zod.optin),Xt(e._zod,"optout",()=>a.innerType._zod.optout),e._zod.parse=(s,i)=>{if(i.direction==="backward")return a.innerType._zod.run(s,i);const c=a.innerType._zod.run(s,i);return c instanceof Promise?c.then(by):by(c)}});function by(e){return e.value=Object.freeze(e.value),e}const YC=Oe("$ZodCustom",(e,a)=>{ja.init(e,a),kn.init(e,a),e._zod.parse=(s,i)=>s,e._zod.check=s=>{const i=s.value,c=a.fn(i);if(c instanceof Promise)return c.then(d=>vy(d,s,i,e));vy(c,s,i,e)}});function vy(e,a,s,i){if(!e){const c={code:"custom",input:s,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(c.params=i._zod.def.params),a.issues.push(vo(c))}}class KC{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...s){const i=s[0];if(this._map.set(a,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,a)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){const s=this._map.get(a);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(a),this}get(a){const s=a._zod.parent;if(s){const i={...this.get(s)??{}};delete i.id;const c={...i,...this._map.get(a)};return Object.keys(c).length?c:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}function XC(){return new KC}const Ic=XC();function JC(e,a){return new e({type:"string",...nt(a)})}function WC(e,a){return new e({type:"string",format:"email",check:"string_format",abort:!1,...nt(a)})}function yy(e,a){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...nt(a)})}function eO(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...nt(a)})}function tO(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...nt(a)})}function nO(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...nt(a)})}function aO(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...nt(a)})}function sO(e,a){return new e({type:"string",format:"url",check:"string_format",abort:!1,...nt(a)})}function rO(e,a){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...nt(a)})}function lO(e,a){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...nt(a)})}function iO(e,a){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...nt(a)})}function oO(e,a){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...nt(a)})}function cO(e,a){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...nt(a)})}function uO(e,a){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...nt(a)})}function dO(e,a){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...nt(a)})}function fO(e,a){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...nt(a)})}function mO(e,a){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...nt(a)})}function hO(e,a){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...nt(a)})}function pO(e,a){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...nt(a)})}function gO(e,a){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...nt(a)})}function bO(e,a){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...nt(a)})}function vO(e,a){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...nt(a)})}function yO(e,a){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...nt(a)})}function xO(e,a){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...nt(a)})}function NO(e,a){return new e({type:"string",format:"date",check:"string_format",...nt(a)})}function jO(e,a){return new e({type:"string",format:"time",check:"string_format",precision:null,...nt(a)})}function SO(e,a){return new e({type:"string",format:"duration",check:"string_format",...nt(a)})}function wO(e,a){return new e({type:"number",checks:[],...nt(a)})}function _O(e,a){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...nt(a)})}function EO(e){return new e({type:"unknown"})}function AO(e,a){return new e({type:"never",...nt(a)})}function xy(e,a){return new L0({check:"less_than",...nt(a),value:e,inclusive:!1})}function nm(e,a){return new L0({check:"less_than",...nt(a),value:e,inclusive:!0})}function Ny(e,a){return new B0({check:"greater_than",...nt(a),value:e,inclusive:!1})}function am(e,a){return new B0({check:"greater_than",...nt(a),value:e,inclusive:!0})}function jy(e,a){return new GA({check:"multiple_of",...nt(a),value:e})}function H0(e,a){return new QA({check:"max_length",...nt(a),maximum:e})}function ou(e,a){return new YA({check:"min_length",...nt(a),minimum:e})}function V0(e,a){return new KA({check:"length_equals",...nt(a),length:e})}function CO(e,a){return new XA({check:"string_format",format:"regex",...nt(a),pattern:e})}function OO(e){return new JA({check:"string_format",format:"lowercase",...nt(e)})}function RO(e){return new WA({check:"string_format",format:"uppercase",...nt(e)})}function TO(e,a){return new eC({check:"string_format",format:"includes",...nt(a),includes:e})}function DO(e,a){return new tC({check:"string_format",format:"starts_with",...nt(a),prefix:e})}function zO(e,a){return new nC({check:"string_format",format:"ends_with",...nt(a),suffix:e})}function Oo(e){return new aC({check:"overwrite",tx:e})}function kO(e){return Oo(a=>a.normalize(e))}function MO(){return Oo(e=>e.trim())}function UO(){return Oo(e=>e.toLowerCase())}function LO(){return Oo(e=>e.toUpperCase())}function BO(e,a,s){return new e({type:"array",element:a,...nt(s)})}function qO(e,a,s){return new e({type:"custom",check:"custom",fn:a,...nt(s)})}function IO(e){const a=$O(s=>(s.addIssue=i=>{if(typeof i=="string")s.issues.push(vo(i,s.value,a._zod.def));else{const c=i;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=s.value),c.inst??(c.inst=a),c.continue??(c.continue=!a._zod.def.abort),s.issues.push(vo(c))}},e(s.value,s)));return a}function $O(e,a){const s=new ja({check:"custom",...nt(a)});return s._zod.check=e,s}function Sy(e,a){try{var s=e()}catch(i){return a(i)}return s&&s.then?s.then(void 0,a):s}function FO(e,a){for(var s={};e.length;){var i=e[0],c=i.code,d=i.message,f=i.path.join(".");if(!s[f])if("unionErrors"in i){var h=i.unionErrors[0].errors[0];s[f]={message:h.message,type:h.code}}else s[f]={message:d,type:c};if("unionErrors"in i&&i.unionErrors.forEach(function(y){return y.errors.forEach(function(x){return e.push(x)})}),a){var v=s[f].types,p=v&&v[i.code];s[f]=ch(f,a,s,c,p?[].concat(p,i.message):i.message)}e.shift()}return s}function HO(e,a){for(var s={};e.length;){var i=e[0],c=i.code,d=i.message,f=i.path.join(".");if(!s[f])if(i.code==="invalid_union"&&i.errors.length>0){var h=i.errors[0][0];s[f]={message:h.message,type:h.code}}else s[f]={message:d,type:c};if(i.code==="invalid_union"&&i.errors.forEach(function(y){return y.forEach(function(x){return e.push(x)})}),a){var v=s[f].types,p=v&&v[i.code];s[f]=ch(f,a,s,c,p?[].concat(p,i.message):i.message)}e.shift()}return s}function VO(e,a,s){if(s===void 0&&(s={}),(function(i){return"_def"in i&&typeof i._def=="object"&&"typeName"in i._def})(e))return function(i,c,d){try{return Promise.resolve(Sy(function(){return Promise.resolve(e[s.mode==="sync"?"parse":"parseAsync"](i,a)).then(function(f){return d.shouldUseNativeValidation&&Bm({},d),{errors:{},values:s.raw?Object.assign({},i):f}})},function(f){if((function(h){return Array.isArray(h?.issues)})(f))return{values:{},errors:ly(FO(f.errors,!d.shouldUseNativeValidation&&d.criteriaMode==="all"),d)};throw f}))}catch(f){return Promise.reject(f)}};if((function(i){return"_zod"in i&&typeof i._zod=="object"})(e))return function(i,c,d){try{return Promise.resolve(Sy(function(){return Promise.resolve((s.mode==="sync"?oA:cA)(e,i,a)).then(function(f){return d.shouldUseNativeValidation&&Bm({},d),{errors:{},values:s.raw?Object.assign({},i):f}})},function(f){if((function(h){return h instanceof wh})(f))return{values:{},errors:ly(HO(f.issues,!d.shouldUseNativeValidation&&d.criteriaMode==="all"),d)};throw f}))}catch(f){return Promise.reject(f)}};throw new Error("Invalid input: not a Zod schema")}const ZO=Oe("ZodISODateTime",(e,a)=>{bC.init(e,a),hn.init(e,a)});function GO(e){return xO(ZO,e)}const PO=Oe("ZodISODate",(e,a)=>{vC.init(e,a),hn.init(e,a)});function QO(e){return NO(PO,e)}const YO=Oe("ZodISOTime",(e,a)=>{yC.init(e,a),hn.init(e,a)});function KO(e){return jO(YO,e)}const XO=Oe("ZodISODuration",(e,a)=>{xC.init(e,a),hn.init(e,a)});function JO(e){return SO(XO,e)}const WO=(e,a)=>{wh.init(e,a),e.name="ZodError",Object.defineProperties(e,{format:{value:s=>iA(e,s)},flatten:{value:s=>lA(e,s)},addIssue:{value:s=>{e.issues.push(s),e.message=JSON.stringify(e.issues,qm,2)}},addIssues:{value:s=>{e.issues.push(...s),e.message=JSON.stringify(e.issues,qm,2)}},isEmpty:{get(){return e.issues.length===0}}})},Ka=Oe("ZodError",WO,{Parent:Error}),eR=Au(Ka),tR=Cu(Ka),nR=Ou(Ka),aR=Ru(Ka),sR=fA(Ka),rR=mA(Ka),lR=hA(Ka),iR=pA(Ka),oR=gA(Ka),cR=bA(Ka),uR=vA(Ka),dR=yA(Ka),qn=Oe("ZodType",(e,a)=>(kn.init(e,a),e.def=a,e.type=a.type,Object.defineProperty(e,"_def",{value:a}),e.check=(...s)=>e.clone(rl(a,{checks:[...a.checks??[],...s.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),e.clone=(s,i)=>Sr(e,s,i),e.brand=()=>e,e.register=((s,i)=>(s.add(e,i),e)),e.parse=(s,i)=>eR(e,s,i,{callee:e.parse}),e.safeParse=(s,i)=>nR(e,s,i),e.parseAsync=async(s,i)=>tR(e,s,i,{callee:e.parseAsync}),e.safeParseAsync=async(s,i)=>aR(e,s,i),e.spa=e.safeParseAsync,e.encode=(s,i)=>sR(e,s,i),e.decode=(s,i)=>rR(e,s,i),e.encodeAsync=async(s,i)=>lR(e,s,i),e.decodeAsync=async(s,i)=>iR(e,s,i),e.safeEncode=(s,i)=>oR(e,s,i),e.safeDecode=(s,i)=>cR(e,s,i),e.safeEncodeAsync=async(s,i)=>uR(e,s,i),e.safeDecodeAsync=async(s,i)=>dR(e,s,i),e.refine=(s,i)=>e.check(eT(s,i)),e.superRefine=s=>e.check(tT(s)),e.overwrite=s=>e.check(Oo(s)),e.optional=()=>Ay(e),e.nullable=()=>Cy(e),e.nullish=()=>Ay(Cy(e)),e.nonoptional=s=>PR(e,s),e.array=()=>P0(e),e.or=s=>LR([e,s]),e.and=s=>qR(e,s),e.transform=s=>Oy(e,$R(s)),e.default=s=>VR(e,s),e.prefault=s=>GR(e,s),e.catch=s=>YR(e,s),e.pipe=s=>Oy(e,s),e.readonly=()=>JR(e),e.describe=s=>{const i=e.clone();return Ic.add(i,{description:s}),i},Object.defineProperty(e,"description",{get(){return Ic.get(e)?.description},configurable:!0}),e.meta=(...s)=>{if(s.length===0)return Ic.get(e);const i=e.clone();return Ic.add(i,s[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Z0=Oe("_ZodString",(e,a)=>{_h.init(e,a),qn.init(e,a);const s=e._zod.bag;e.format=s.format??null,e.minLength=s.minimum??null,e.maxLength=s.maximum??null,e.regex=(...i)=>e.check(CO(...i)),e.includes=(...i)=>e.check(TO(...i)),e.startsWith=(...i)=>e.check(DO(...i)),e.endsWith=(...i)=>e.check(zO(...i)),e.min=(...i)=>e.check(ou(...i)),e.max=(...i)=>e.check(H0(...i)),e.length=(...i)=>e.check(V0(...i)),e.nonempty=(...i)=>e.check(ou(1,...i)),e.lowercase=i=>e.check(OO(i)),e.uppercase=i=>e.check(RO(i)),e.trim=()=>e.check(MO()),e.normalize=(...i)=>e.check(kO(...i)),e.toLowerCase=()=>e.check(UO()),e.toUpperCase=()=>e.check(LO())}),fR=Oe("ZodString",(e,a)=>{_h.init(e,a),Z0.init(e,a),e.email=s=>e.check(WC(mR,s)),e.url=s=>e.check(sO(hR,s)),e.jwt=s=>e.check(yO(OR,s)),e.emoji=s=>e.check(rO(pR,s)),e.guid=s=>e.check(yy(wy,s)),e.uuid=s=>e.check(eO($c,s)),e.uuidv4=s=>e.check(tO($c,s)),e.uuidv6=s=>e.check(nO($c,s)),e.uuidv7=s=>e.check(aO($c,s)),e.nanoid=s=>e.check(lO(gR,s)),e.guid=s=>e.check(yy(wy,s)),e.cuid=s=>e.check(iO(bR,s)),e.cuid2=s=>e.check(oO(vR,s)),e.ulid=s=>e.check(cO(yR,s)),e.base64=s=>e.check(gO(ER,s)),e.base64url=s=>e.check(bO(AR,s)),e.xid=s=>e.check(uO(xR,s)),e.ksuid=s=>e.check(dO(NR,s)),e.ipv4=s=>e.check(fO(jR,s)),e.ipv6=s=>e.check(mO(SR,s)),e.cidrv4=s=>e.check(hO(wR,s)),e.cidrv6=s=>e.check(pO(_R,s)),e.e164=s=>e.check(vO(CR,s)),e.datetime=s=>e.check(GO(s)),e.date=s=>e.check(QO(s)),e.time=s=>e.check(KO(s)),e.duration=s=>e.check(JO(s))});function cu(e){return JC(fR,e)}const hn=Oe("ZodStringFormat",(e,a)=>{un.init(e,a),Z0.init(e,a)}),mR=Oe("ZodEmail",(e,a)=>{oC.init(e,a),hn.init(e,a)}),wy=Oe("ZodGUID",(e,a)=>{lC.init(e,a),hn.init(e,a)}),$c=Oe("ZodUUID",(e,a)=>{iC.init(e,a),hn.init(e,a)}),hR=Oe("ZodURL",(e,a)=>{cC.init(e,a),hn.init(e,a)}),pR=Oe("ZodEmoji",(e,a)=>{uC.init(e,a),hn.init(e,a)}),gR=Oe("ZodNanoID",(e,a)=>{dC.init(e,a),hn.init(e,a)}),bR=Oe("ZodCUID",(e,a)=>{fC.init(e,a),hn.init(e,a)}),vR=Oe("ZodCUID2",(e,a)=>{mC.init(e,a),hn.init(e,a)}),yR=Oe("ZodULID",(e,a)=>{hC.init(e,a),hn.init(e,a)}),xR=Oe("ZodXID",(e,a)=>{pC.init(e,a),hn.init(e,a)}),NR=Oe("ZodKSUID",(e,a)=>{gC.init(e,a),hn.init(e,a)}),jR=Oe("ZodIPv4",(e,a)=>{NC.init(e,a),hn.init(e,a)}),SR=Oe("ZodIPv6",(e,a)=>{jC.init(e,a),hn.init(e,a)}),wR=Oe("ZodCIDRv4",(e,a)=>{SC.init(e,a),hn.init(e,a)}),_R=Oe("ZodCIDRv6",(e,a)=>{wC.init(e,a),hn.init(e,a)}),ER=Oe("ZodBase64",(e,a)=>{_C.init(e,a),hn.init(e,a)}),AR=Oe("ZodBase64URL",(e,a)=>{AC.init(e,a),hn.init(e,a)}),CR=Oe("ZodE164",(e,a)=>{CC.init(e,a),hn.init(e,a)}),OR=Oe("ZodJWT",(e,a)=>{RC.init(e,a),hn.init(e,a)}),G0=Oe("ZodNumber",(e,a)=>{I0.init(e,a),qn.init(e,a),e.gt=(i,c)=>e.check(Ny(i,c)),e.gte=(i,c)=>e.check(am(i,c)),e.min=(i,c)=>e.check(am(i,c)),e.lt=(i,c)=>e.check(xy(i,c)),e.lte=(i,c)=>e.check(nm(i,c)),e.max=(i,c)=>e.check(nm(i,c)),e.int=i=>e.check(_y(i)),e.safe=i=>e.check(_y(i)),e.positive=i=>e.check(Ny(0,i)),e.nonnegative=i=>e.check(am(0,i)),e.negative=i=>e.check(xy(0,i)),e.nonpositive=i=>e.check(nm(0,i)),e.multipleOf=(i,c)=>e.check(jy(i,c)),e.step=(i,c)=>e.check(jy(i,c)),e.finite=()=>e;const s=e._zod.bag;e.minValue=Math.max(s.minimum??Number.NEGATIVE_INFINITY,s.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(s.maximum??Number.POSITIVE_INFINITY,s.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(s.format??"").includes("int")||Number.isSafeInteger(s.multipleOf??.5),e.isFinite=!0,e.format=s.format??null});function ra(e){return wO(G0,e)}const RR=Oe("ZodNumberFormat",(e,a)=>{TC.init(e,a),G0.init(e,a)});function _y(e){return _O(RR,e)}const TR=Oe("ZodUnknown",(e,a)=>{DC.init(e,a),qn.init(e,a)});function Ey(){return EO(TR)}const DR=Oe("ZodNever",(e,a)=>{zC.init(e,a),qn.init(e,a)});function zR(e){return AO(DR,e)}const kR=Oe("ZodArray",(e,a)=>{kC.init(e,a),qn.init(e,a),e.element=a.element,e.min=(s,i)=>e.check(ou(s,i)),e.nonempty=s=>e.check(ou(1,s)),e.max=(s,i)=>e.check(H0(s,i)),e.length=(s,i)=>e.check(V0(s,i)),e.unwrap=()=>e.element});function P0(e,a){return BO(kR,e,a)}const MR=Oe("ZodObject",(e,a)=>{UC.init(e,a),qn.init(e,a),Xt(e,"shape",()=>a.shape),e.keyof=()=>Q0(Object.keys(e._zod.def.shape)),e.catchall=s=>e.clone({...e._zod.def,catchall:s}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Ey()}),e.loose=()=>e.clone({...e._zod.def,catchall:Ey()}),e.strict=()=>e.clone({...e._zod.def,catchall:zR()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=s=>tA(e,s),e.safeExtend=s=>nA(e,s),e.merge=s=>aA(e,s),e.pick=s=>WE(e,s),e.omit=s=>eA(e,s),e.partial=(...s)=>sA(Y0,e,s[0]),e.required=(...s)=>rA(K0,e,s[0])});function Du(e,a){const s={type:"object",shape:e??{},...nt(a)};return new MR(s)}const UR=Oe("ZodUnion",(e,a)=>{LC.init(e,a),qn.init(e,a),e.options=a.options});function LR(e,a){return new UR({type:"union",options:e,...nt(a)})}const BR=Oe("ZodIntersection",(e,a)=>{BC.init(e,a),qn.init(e,a)});function qR(e,a){return new BR({type:"intersection",left:e,right:a})}const $m=Oe("ZodEnum",(e,a)=>{qC.init(e,a),qn.init(e,a),e.enum=a.entries,e.options=Object.values(a.entries);const s=new Set(Object.keys(a.entries));e.extract=(i,c)=>{const d={};for(const f of i)if(s.has(f))d[f]=a.entries[f];else throw new Error(`Key ${f} not found in enum`);return new $m({...a,checks:[],...nt(c),entries:d})},e.exclude=(i,c)=>{const d={...a.entries};for(const f of i)if(s.has(f))delete d[f];else throw new Error(`Key ${f} not found in enum`);return new $m({...a,checks:[],...nt(c),entries:d})}});function Q0(e,a){const s=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new $m({type:"enum",entries:s,...nt(a)})}const IR=Oe("ZodTransform",(e,a)=>{IC.init(e,a),qn.init(e,a),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new A0(e.constructor.name);s.addIssue=d=>{if(typeof d=="string")s.issues.push(vo(d,s.value,a));else{const f=d;f.fatal&&(f.continue=!1),f.code??(f.code="custom"),f.input??(f.input=s.value),f.inst??(f.inst=e),s.issues.push(vo(f))}};const c=a.transform(s.value,s);return c instanceof Promise?c.then(d=>(s.value=d,s)):(s.value=c,s)}});function $R(e){return new IR({type:"transform",transform:e})}const Y0=Oe("ZodOptional",(e,a)=>{$C.init(e,a),qn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function Ay(e){return new Y0({type:"optional",innerType:e})}const FR=Oe("ZodNullable",(e,a)=>{FC.init(e,a),qn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function Cy(e){return new FR({type:"nullable",innerType:e})}const HR=Oe("ZodDefault",(e,a)=>{HC.init(e,a),qn.init(e,a),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function VR(e,a){return new HR({type:"default",innerType:e,get defaultValue(){return typeof a=="function"?a():R0(a)}})}const ZR=Oe("ZodPrefault",(e,a)=>{VC.init(e,a),qn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function GR(e,a){return new ZR({type:"prefault",innerType:e,get defaultValue(){return typeof a=="function"?a():R0(a)}})}const K0=Oe("ZodNonOptional",(e,a)=>{ZC.init(e,a),qn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function PR(e,a){return new K0({type:"nonoptional",innerType:e,...nt(a)})}const QR=Oe("ZodCatch",(e,a)=>{GC.init(e,a),qn.init(e,a),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function YR(e,a){return new QR({type:"catch",innerType:e,catchValue:typeof a=="function"?a:()=>a})}const KR=Oe("ZodPipe",(e,a)=>{PC.init(e,a),qn.init(e,a),e.in=a.in,e.out=a.out});function Oy(e,a){return new KR({type:"pipe",in:e,out:a})}const XR=Oe("ZodReadonly",(e,a)=>{QC.init(e,a),qn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function JR(e){return new XR({type:"readonly",innerType:e})}const WR=Oe("ZodCustom",(e,a)=>{YC.init(e,a),qn.init(e,a)});function eT(e,a={}){return qO(WR,e,a)}function tT(e){return IO(e)}const nT=["correlativo","no correlativo"],aT=Du({oi:cu().regex(/^OI-\d{4}-\d{4}$/,"Formato OI-####-YYYY"),q3:ra(),alcance:ra(),pma:ra().refine(e=>e===10||e===16,{message:"PMA invlido"}),numeration_type:Q0(nT).default("correlativo")}),sm=Du({c1:ra().optional().nullable(),c2:ra().optional().nullable(),c3:ra().optional().nullable(),c4:ra().optional().nullable(),c5:ra().optional().nullable(),c6:ra().optional().nullable(),c7:cu().optional().nullable(),c7_seconds:ra().optional().nullable(),caudal:ra().optional().nullable(),error:ra().optional().nullable()}),sT=Du({medidor:cu().optional(),estado:ra().int().min(0).max(5).default(0),q3:sm.optional(),q2:sm.optional(),q1:sm.optional(),conformidad:cu().optional()});Du({estado:ra().int().min(0).optional(),rows:ra().int().min(1).default(15),rowsData:P0(sT)});function rT(e){return e===16?25.6:e===10?16:NaN}const lT=/^[A-Za-z0-9]{10}$/,iT=e=>(e??"").trim().toUpperCase(),xn=e=>{const a=e.currentTarget;a.size=Math.max(1,a.value.length)},Pl=["medidor","estado","q3.c1","q3.c2","q3.c3","q3.c4","q3.c5","q3.c6","q3.c7","q2.c1","q2.c2","q2.c3","q2.c4","q2.c5","q2.c6","q2.c7","q1.c1","q1.c2","q1.c3","q1.c4","q1.c5","q1.c6","q1.c7"],Fm=e=>{e&&(e.focus(),(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&e.select())},Ry=(e,a)=>{if(a){if(e==="medidor"){a.focus();return}Fm(a)}},Hn=e=>{if(e===""||e===null||e===void 0)return null;const a=String(e).replace(",","."),s=Number(a);return Number.isNaN(s)?null:s};function oT(e,a){if(!e)return"";const s=e.match(/^(.*?)(\d+)$/);if(!s)return e;const i=s[1],c=s[2],d=parseInt(c,10)+a;return`${i}${d.toString().padStart(c.length,"0")}`}function Ty(e,a,s){return e?s==="no correlativo"?e.slice(0,4):oT(e,a):""}function rm(e){if(!e)return 0;const a=String(e).trim(),s=a.split(/[:,\.]/).map(c=>parseFloat(c)).filter(c=>!isNaN(c));let i=0;if(s.length>=3){const c=s[0]||0,d=s[1]||0,f=s[2]||0;i=c*60+d+f/1e3}else if(s.length===2)i=s[0]*60+(s[1]||0);else if(s.length===1)i=s[0];else{const c=parseFloat(a.replace(",","."));if(!isNaN(c)){const d=Math.floor(c),f=(c-d)*100;i=d*60+f}}return i}function lm(e,a){if(!e||!a)return null;const s=a>0?a/3600:0;return s===0?null:e/s}function im(e,a,s){return e===void 0||a===void 0||!s?null:(Number(a)-Number(e)-Number(s))/Number(s)*100}function cT(e,a,s,i){if(e&&e>=1)return"NO CONFORME";if(a==null||s==null||i==null)return"";const c=Math.abs(a),d=Math.abs(s),f=Math.abs(i),h=!(c>2.05||d>2.05||f>5.05),v=c<1.05||d<1.05||f<2.55,p=Math.sign(a),y=Math.sign(s),x=Math.sign(i),j=p>=0&&y>=0&&x>=0||p<=0&&y<=0&&x<=0,F=h&&v;return j?F?"CONFORME":"NO CONFORME":h?"CONFORME":"NO CONFORME"}const Ql=({val:e,isErr:a,warnThreshold:s,failThreshold:i})=>{const c=p=>{const y=Number(p.toFixed(1));return Object.is(y,-0)?"0.0":y.toFixed(1)};if(!a)return l.jsx("td",{className:"vi-surface-2",children:e==null||isNaN(e)?l.jsx("span",{className:"text-muted",children:"-"}):l.jsx("span",{className:"vi-qe-value text-primary fw-semibold",children:e.toFixed(2)})});const d=Math.abs(e??0),f=s??i??0,h=i??s??0;let v="vi-e-ok";return e==null||isNaN(e)?v="":h>0&&d>h?v="vi-e-error":f>0&&d>f&&(v="vi-e-warn"),l.jsx("td",{className:"vi-surface-2",children:e==null||isNaN(e)?l.jsx("span",{className:"text-muted",children:"-"}):l.jsx("span",{className:`vi-qe-value fw-bold ${v}`,children:c(e)})})};function uT({show:e,title:a,initial:s,onClose:i,onSubmit:c,onCancelWithDraft:d,numerationType:f,duplicateMap:h,onClearDuplicate:v,readOnly:p,draftStorageKey:y,draftMeta:x,isOnline:j,showRetry:F}){const E={estado:s?.estado??0,rows:s?.rows??15,version:s?.version??null,draftCreatedAt:s?.draftCreatedAt??null,draftId:s?.draftId??null,rowsData:s?.rowsData??Array.from({length:15}).map(()=>({medidor:"",estado:0,q3:{},q2:{},q1:{}}))},C=p===!0,T=j!==!1,{register:q,control:A,handleSubmit:te,reset:U,setValue:D,getValues:P}=gu({defaultValues:E}),B=q("rows",{valueAsNumber:!0}),{fields:W,replace:fe,append:De,remove:_e}=k_({control:A,name:"rowsData"}),[be,we]=g.useState(0),Ce=g.useRef(0),Ue=g.useRef(null),[M,V]=g.useState(0),ae=0,ce=5,Re=()=>{if(M>=ce){alert("Ya estas en el tamano maximo de fuente permitido para las filas (+5).");return}V(J=>Math.min(J+1,ce))},_=()=>{if(M<=ae){alert("Ya estas en el tamano minimo de fuente permitido para las filas.");return}V(J=>Math.max(J-1,ae))},K=g.useRef(null),[ue,Q]=g.useState([]),Ee=!!s?.version,Ne=g.useRef("rows"),Be=g.useRef(null),Ze=g.useRef(null),he=g.useRef(null),Me=g.useRef(new Map),Fe=["c1","c2","c3","c4","c5","c6","c7"];g.useEffect(()=>{s?.rowsData?.length&&W.forEach((J,se)=>{if(se===0)return;s.rowsData[se]?.medidor&&Me.current.set(J.id,!0)})},[s,W]);const Qe=g.useCallback(J=>{const se=J<0?0:J;we(se),requestAnimationFrame(()=>{const Te=document.querySelector(`input.vi-medidor-input[data-row="${se}"]`);Te&&(Te.focus(),Te.select())})},[]),lt=()=>(P("rowsData")??[]).slice(0,W.length);g.useEffect(()=>{Ce.current=be},[be]);const ze=J=>{const se=J.target;if(!se)return;const Te=se.tagName;if(Te!=="INPUT"&&Te!=="SELECT"&&Te!=="TEXTAREA")return;const He=J.key;if(He==="Escape"){J.preventDefault(),Nn();return}if(He==="ArrowUp"||He==="ArrowDown"||He==="ArrowLeft"||He==="ArrowRight"||He==="Enter"){const an=se.name;if(!an||!an.startsWith("rowsData."))return;const ut=an.match(/^rowsData\.(\d+)\.(.+)$/);if(!ut)return;const dt=parseInt(ut[1],10),yt=ut[2],zt=J.currentTarget,qt=W.length-1,Jt=(gn,bn)=>{let Ht=gn+bn;for(;Ht>=0&&Ht<=qt;){const Mn=`[name="rowsData.${Ht}.${yt}"]`,Lt=zt.querySelector(Mn);if(Lt&&!Lt.disabled)return{index:Ht,el:Lt};Ht+=bn}return null};if(He==="ArrowUp"||He==="ArrowDown"){J.preventDefault();const bn=Jt(dt,He==="ArrowUp"?-1:1);bn&&Ry(yt,bn.el);return}if(He==="ArrowLeft"||He==="ArrowRight"){J.preventDefault();const gn=Pl.indexOf(yt);if(gn===-1)return;const Ht=gn+(He==="ArrowRight"?1:-1);if(Ht<0||Ht>=Pl.length)return;const Mn=Pl[Ht],Lt=`[name="rowsData.${dt}.${Mn}"]`,sn=zt.querySelector(Lt);sn&&!sn.disabled&&Fm(sn);return}if(He==="Enter"){J.preventDefault();const gn=Pl.indexOf(yt);if(gn===-1)return;const bn=Jt(dt,1);if(bn){Ry(yt,bn.el);return}const Ht=gn+1;if(Ht<Pl.length){const Mn=Pl[Ht];for(let Lt=0;Lt<=qt;Lt++){const sn=`[name="rowsData.${Lt}.${Mn}"]`,Gn=zt.querySelector(sn);if(Gn&&!Gn.disabled){Fm(Gn);return}}}K.current&&K.current.focus();return}}if(He!=="Tab")return;const rt=J.currentTarget,ht=Array.from(rt.querySelectorAll("input, select, textarea")).filter(Ot=>!Ot.hasAttribute("disabled")),Je=ht.indexOf(se);if(Je===-1)return;if(He==="Tab"&&J.shiftKey){Je>0&&(J.preventDefault(),ht[Je-1].focus());return}const Bt=Je+1;if(Bt<ht.length){J.preventDefault(),ht[Bt].focus();return}K.current&&(J.preventDefault(),K.current.focus())},Ge=(J,se)=>{fe(J),D("rows",J.length),we(Te=>J.length===0?0:typeof se=="number"?Math.max(0,Math.min(se,J.length-1)):Math.min(Te,J.length-1))},me=()=>({medidor:"",estado:0,q3:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:"",c7_seconds:null},q2:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:"",c7_seconds:null},q1:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:"",c7_seconds:null}}),Ie=J=>J==null?"":typeof J=="number"?J:typeof J=="string"?J.replace(",","."):J,Ae=J=>{if(!J)return{};const se={...J};return["c1","c2","c3","c4","c5","c6"].forEach(Te=>{se[Te]=Ie(se[Te])}),se},Xe=()=>{const J=s?.rowsData?.length??s?.rows??15,se=(s?.rowsData&&s.rowsData.length>0?s.rowsData:Array.from({length:J}).map(()=>({medidor:"",estado:0,q3:{},q2:{},q1:{}}))).map(Te=>({medidor:Te.medidor??"",estado:Te.estado??0,q3:Ae(Te.q3),q2:Ae(Te.q2),q1:Ae(Te.q1)}));return{rows:se.length,rowsData:se,version:s?.version??null,estado:s?.estado??0,draftCreatedAt:s?.draftCreatedAt??null,draftId:s?.draftId??null}},R=g.useCallback(()=>{const J=P(),se=J.rowsData??[];return{estado:J.estado??0,rows:Number(J.rows??se.length),version:J.version??s?.version??null,rowsData:se,draftCreatedAt:J.draftCreatedAt??s?.draftCreatedAt??null,draftId:J.draftId??s?.draftId??null}},[P,s?.version,s?.draftCreatedAt,s?.draftId]),z=J=>x?{version:1,ts:new Date().toISOString(),userId:x.userId,bankId:x.bankId,oiId:x.oiId,bancadaId:x.bancadaId??null,isNew:x.isNew,data:J}:null,S=()=>x?{version:1,ts:new Date().toISOString(),userId:x.userId,bankId:x.bankId,oiId:x.oiId,oiCode:x.oiCode??null,returnTo:x.returnTo??`/oi/${x.oiId}?mode=edit`,mode:"edit",modal:{type:"bancada",bancadaId:x.bancadaId??null,isNew:x.isNew}}:null,L=J=>J==null||J===""||typeof J=="number"&&Number.isNaN(J),$=J=>J?Number(J.estado??0)!==0||J.medidor&&J.medidor.toString().trim()!==""?!0:le(J):!1,X=J=>(J.rowsData??[]).some(Te=>$(Te)),le=J=>{const se=[J.q3,J.q2,J.q1];for(const Te of se)if(Te){for(const He of Fe)if(!L(Te[He]))return!0}return!1},je=J=>J?{...J,c4:null,c5:null}:{c4:null,c5:null},Z=J=>{if(!J)return J;const se={...J};return L(se.c4)&&(se.c4=null),L(se.c5)&&(se.c5=null),se},ke=J=>{for(let se=0;se<J.length;se++){const Te=J[se],He=Number(Te.estado??0),rt=He!==0;if(!$(Te))continue;if(!Te.medidor||Te.medidor.toString().trim()==="")return`La fila ${se+1} tiene datos pero el campo "# Medidor (G)" est vaco. Completa el valor o elimina la fila.`;const Je=[{name:"Q3 (Nominal)",block:Te.q3},{name:"Q2 (Transicin)",block:Te.q2},{name:"Q1 (Mnimo)",block:Te.q1}],Ct=Je.some(({block:Bt})=>Bt&&Fe.some(Ot=>!L(Bt[Ot])));if(He===0&&!Ct)return`La fila ${se+1} no tiene lecturas. Ingresa datos en Q3/Q2/Q1 o elimina la fila.`;if(!rt)for(const{name:Bt,block:Ot}of Je){if(!Ot||!Fe.some(dt=>!L(Ot[dt])))continue;if(Fe.some(dt=>L(Ot[dt])))return`La fila ${se+1} tiene datos incompletos en el bloque ${Bt}. Completa todos los campos o elimina la fila.`}}return null},qe=J=>J==null||J===""?null:String(J).replace(/\./g,","),We=J=>{if(!J)return{};const se={...J};return["c1","c2","c3","c4","c5","c6","c7"].forEach(Te=>{se[Te]=qe(se[Te])}),se},Mt=J=>{const se=[];let Te=null;const He=(ht,Je,Ct)=>{se[ht]||(se[ht]={}),se[ht][Je]=Ct,Te||(Te=`Fila ${ht+1}: ${Ct}`)},rt={};return J.forEach(ht=>{const Je=(ht.medidor??"").trim();Je&&(rt[Je]=(rt[Je]??0)+1)}),J.forEach((ht,Je)=>{const Ct=ht.q3||{},Bt=ht.q2||{},Ot=ht.q1||{},an=Ct.c4,ut=Ct.c5,dt=Bt.c4,yt=Bt.c5,zt=Ot.c4,qt=Ot.c5;an!=null&&ut!=null&&!Number.isNaN(an)&&!Number.isNaN(ut)&&ut<an&&He(Je,"q3_lf","En Q3 L.F debe ser mayor o igual que L.I."),dt!=null&&yt!=null&&!Number.isNaN(dt)&&!Number.isNaN(yt)&&yt<dt&&He(Je,"q2_lf","En Q2 L.F debe ser mayor o igual que L.I."),zt!=null&&qt!=null&&!Number.isNaN(zt)&&!Number.isNaN(qt)&&qt<zt&&He(Je,"q1_lf","En Q1 L.F debe ser mayor o igual que L.I."),ut!=null&&dt!=null&&!Number.isNaN(ut)&&!Number.isNaN(dt)&&dt<ut&&He(Je,"q2_li","L.I de Q2 debe ser mayor o igual que L.F de Q3."),yt!=null&&zt!=null&&!Number.isNaN(yt)&&!Number.isNaN(zt)&&zt<yt&&He(Je,"q1_li","L.I de Q1 debe ser mayor o igual que L.F de Q2.");const Jt=(ht.medidor??"").trim();Jt&&rt[Jt]>1&&He(Je,"medidor_dup","Serie de medidor repetida."),Jt&&!lT.test(Jt)&&He(Je,"medidor_format","La serie del medidor debe tener 10 caracteres alfanumricos.")}),{rowErrors:se,firstMessage:Te}},ye=J=>{if(C)return;const se=(J.rowsData??[]).slice(0,W.length),Te=ke(se);if(Te){alert(Te);return}const{rowErrors:He,firstMessage:rt}=Mt(se);if(Q(He),rt){alert(rt);return}const Je=se.filter($).map(Bt=>{const Ot=Number(Bt.estado??0),an=Ot>=1&&Ot<=4,ut=Ot===5&&!le(Bt),dt=an||ut,yt=Z(Bt.q3),zt=Z(Bt.q2),qt=Z(Bt.q1),Jt=gn=>{if(dt){const bn=je(gn);return We(bn)}return We(gn)};return{...Bt,q3:Jt(yt),q2:Jt(zt),q1:Jt(qt)}}),Ct={...J,rows:Je.length,rowsData:Je,version:J.version??s?.version??null};c(Ct)},et=no({control:A,name:"rowsData.0"}),Ut=no({control:A,name:"rowsData"}),_t=no({control:A,name:"rowsData.0.q3.c7"}),pn=no({control:A,name:"rowsData.0.q2.c7"}),An=no({control:A,name:"rowsData.0.q1.c7"});g.useEffect(()=>{W[0]&&(D("rowsData.0.q3.c7_seconds",rm(_t)),D("rowsData.0.q2.c7_seconds",rm(pn)),D("rowsData.0.q1.c7_seconds",rm(An)))},[_t,pn,An,D,W]),g.useEffect(()=>{const J=Ut??[],{rowErrors:se}=Mt(J);Q(se)},[Ut]),g.useEffect(()=>{if(!et||W.length<=1)return;const J=Ut??[];W.forEach((se,Te)=>{if(Te===0)return;const He=se.id;(Me.current.get(He)??!1)||D(`rowsData.${Te}.medidor`,Ty(et.medidor||"",Te,f));const ht=J[Te]?.estado;(ht==null||Number.isNaN(ht))&&D(`rowsData.${Te}.estado`,et.estado),D(`rowsData.${Te}.q3.c1`,et.q3?.c1??null),D(`rowsData.${Te}.q3.c2`,et.q3?.c2??null),D(`rowsData.${Te}.q3.c3`,et.q3?.c3??null),D(`rowsData.${Te}.q3.c6`,et.q3?.c6??null),D(`rowsData.${Te}.q3.c7`,et.q3?.c7??""),D(`rowsData.${Te}.q3.c7_seconds`,et.q3?.c7_seconds??null),D(`rowsData.${Te}.q2.c1`,et.q2?.c1??null),D(`rowsData.${Te}.q2.c2`,et.q2?.c2??null),D(`rowsData.${Te}.q2.c3`,et.q2?.c3??null),D(`rowsData.${Te}.q2.c6`,et.q2?.c6??null),D(`rowsData.${Te}.q2.c7`,et.q2?.c7??""),D(`rowsData.${Te}.q2.c7_seconds`,et.q2?.c7_seconds??null),D(`rowsData.${Te}.q1.c1`,et.q1?.c1??null),D(`rowsData.${Te}.q1.c2`,et.q1?.c2??null),D(`rowsData.${Te}.q1.c3`,et.q1?.c3??null),D(`rowsData.${Te}.q1.c6`,et.q1?.c6??null),D(`rowsData.${Te}.q1.c7`,et.q1?.c7??""),D(`rowsData.${Te}.q1.c7_seconds`,et.q1?.c7_seconds??null)})},[et,Ut,W,D,f]),g.useEffect(()=>{we(J=>{const se=Math.max(W.length-1,0);return J>se?se:J})},[W.length]);const aa=()=>{if(W.length>=50){if(D("rows",50),Qe(0),!confirm("El maximo de filas es 50. Quieres fijar la lista en 50 filas?")){Ue.current&&(Ue.current.focus(),Ue.current.select());return}return}De(me()),D("rows",W.length+1),Qe(W.length)},In=J=>{if(W.length<=1)return;const se=Math.max(0,Math.min(J,W.length-1));_e(se),D("rows",Math.max(W.length-1,1)),Qe(Math.max(0,se-(se===W.length-1?1:0)))},it=()=>{W.length<=1||(_e(W.length-1),D("rows",Math.max(W.length-1,1)),Qe(Math.max(0,W.length-2)))},Xn=()=>{if(!confirm("Ests seguro de limpiar todos los datos de la bancada?"))return;const J=lt();if(!J.length)return;const se=J.map(()=>me());Ge(se,0),Qe(0)},dn=()=>{let J=Number(P("rows"));if((!Number.isFinite(J)||J<1)&&(J=1),J>50){const He=lt();if(!confirm("El maximo de filas es 50. Quieres usar 50 filas?")){D("rows",He.length),Ue.current&&(Ue.current.focus(),Ue.current.select());return}J=50}const se=lt();if(J!==se.length&&!confirm(`La lista tendr ${J} filas. Quieres continuar?`)){D("rows",se.length),Ue.current&&(Ue.current.focus(),Ue.current.select());return}if(J===se.length){D("rows",J);return}if(J>se.length){const He=Math.min(J,50)-se.length;if(He>0){const rt=Array.from({length:He},()=>me()),ht=[...se,...rt];Ge(ht,be),Qe(se.length)}else D("rows",se.length);return}const Te=se.slice(0,J);Ge(Te,Math.min(be,J-1))},Vn=J=>{J.key==="Enter"&&(J.preventDefault(),dn(),Qe(0))},Nn=()=>{const J=P(),se=document.activeElement;if(Ue.current&&se===Ue.current)Ne.current="rows",Be.current="rows";else if(se&&se instanceof HTMLElement){const Te=se.getAttribute("name");Te&&Te.startsWith("rowsData.")?(Ne.current="grid",Be.current=Te):(Ne.current="grid",Be.current=null)}else Ne.current="grid",Be.current=null;if(y){const Te=R();if(!X(Te))yr(y),he.current=null;else{const He=z(Te);if(He){const rt=JSON.stringify(He);co(y,He,S()),he.current=rt}}}d&&d(J),i()};g.useEffect(()=>{if(!e)return;const J=se=>{if(se.key==="Escape"){se.preventDefault(),Nn();return}if((se.key==="+"||se.key==="=")&&se.ctrlKey){se.preventDefault(),aa();return}(se.key==="-"||se.key==="_")&&se.ctrlKey&&(se.preventDefault(),it())};return window.addEventListener("keydown",J),()=>window.removeEventListener("keydown",J)},[e,aa,it,Nn]),g.useEffect(()=>{const J=Xe();U(J),Ge(J.rowsData,0),Me.current.clear(),requestAnimationFrame(()=>{if(Ee)Qe(0);else if(Be.current){const se=document.querySelector(`[name="${Be.current}"]`);if(se){se.focus(),"select"in se&&se.select?.();return}Qe(Ce.current||0)}else Ue.current&&(Ue.current.focus(),Ue.current.select())})},[s,U,fe,Qe,Ee]),g.useEffect(()=>{if(!e||!y)return;const J=R();if(!X(J)){yr(y),he.current=null;return}const se=z(J);if(!se)return;const Te=JSON.stringify(se);if(Te!==he.current)return Ze.current&&window.clearTimeout(Ze.current),Ze.current=window.setTimeout(()=>{co(y,se,S()),he.current=Te},400),()=>{Ze.current&&window.clearTimeout(Ze.current)}},[e,y,Ut,R]),g.useEffect(()=>{e&&requestAnimationFrame(()=>{if(Ee)Qe(0);else if(Be.current){const J=document.querySelector(`[name="${Be.current}"]`);if(J){J.focus(),"select"in J&&J.select?.();return}Qe(Ce.current||0)}else Ue.current&&(Ue.current.focus(),Ue.current.select())})},[e,Qe,Ee]);const Zn=ue.some(J=>J&&Object.values(J).some(Boolean));return e?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"modal d-block",tabIndex:-1,role:"dialog",onClick:J=>{J.target===J.currentTarget&&Nn()},children:[l.jsx("style",{children:`        /* Ocultar flechas de inputs numricos para limpiar la vista */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
        input[type=number] {
          -moz-appearance: textfield;
        }

        /* Ancho minimo para columnas compactas (Temp, P.Ent, etc.) */
        .vi-min-width {
          min-width: 70px;
        }

        /* Estilo spreadsheet tipo Excel (theme-aware) */
        .vi-spreadsheet {
          background-color: var(--vi-grid-bg);
          color: var(--vi-grid-text);
          font-size: 0.75rem;
          table-layout: auto;
          width: max-content;
        }

        .vi-spreadsheet th,
        .vi-spreadsheet td {
          white-space: nowrap;
        }

        .vi-spreadsheet thead th {
          background-color: var(--vi-grid-head-bg);
          color: var(--vi-grid-head-text);
          vertical-align: middle;
          padding: 0.25rem 0.35rem;
        }

        .vi-spreadsheet td.vi-at-valor {
          color: var(--vi-grid-text) !important;
        }

                .vi-spreadsheet td.vi-row-index,
        .vi-spreadsheet th.vi-row-index {
          color: var(--vi-grid-row-index-text);
        }

        /* Columna ndice (#) fija al hacer scroll horizontal */
        .vi-spreadsheet th.vi-row-index {
          position: sticky;
          left: 0;
          z-index: 3;
          background-color: var(--vi-grid-row-index-bg); /* mismo fondo que otros headers */
        }

        .vi-spreadsheet td.vi-row-index {
          position: sticky;
          left: 0;
          z-index: 2;
          background-color: inherit;
        }

        /* Columna # Medidor (G) fija, justo despus del ndice de fila */
        .vi-spreadsheet th.vi-sticky-medidor,
        .vi-spreadsheet td.vi-sticky-medidor {
          position: sticky;
          left: 30px; /* coincide con width:"30px" de la columna # */
        }

        .vi-spreadsheet thead th.vi-sticky-medidor {
          z-index: 3;
          background-color: var(--vi-grid-head-bg);
        }

        .vi-spreadsheet tbody td.vi-sticky-medidor {
          z-index: 2;
          background-color: inherit;
        }


        .vi-spreadsheet tr.vi-base-row td.vi-row-index {
          background-color: var(--vi-grid-base-row-bg) !important;
          color: var(--vi-grid-row-index-text) !important;
          font-weight: 600;
        }

        .vi-spreadsheet td.vi-at-valor {
          transition: color 0.15s ease-in-out;
        }

        .vi-spreadsheet td.vi-at-valor:hover {
          color: var(--c-primary) !important;
        }

        .vi-spreadsheet tr.table-active td.vi-at-valor {
          color: var(--vi-grid-active-text) !important;
        }

        .vi-spreadsheet tbody td {
          padding: 0.15rem 0.25rem;
        }

        .vi-spreadsheet tr.table-active > td {
          background-color: var(--vi-grid-active-bg) !important;
          color: var(--vi-grid-active-text) !important;
        }

        .vi-spreadsheet tr.table-active input.form-control {
          background-color: var(--vi-grid-input-bg);
          color: var(--vi-grid-active-text);
          border-color: var(--vi-grid-input-active-border);
        }

        .vi-spreadsheet tr.vi-base-row.table-active > td {
          background-color: var(--vi-grid-active-bg) !important;
          color: var(--vi-grid-active-text) !important;
        }

        .vi-spreadsheet.table-hover tbody tr:not(.table-active):hover > td {
          background-color: inherit;
          color: inherit;
        }

        .vi-spreadsheet input.form-control {
          background-color: var(--vi-grid-input-bg);
          border-color: var(--vi-grid-input-border);
          color: var(--vi-grid-input-text);
          font-size: 0.75rem;
          padding: 0.05rem 0.25rem;
          height: 1.7rem;
        }

        .vi-spreadsheet input.form-control:disabled,
        .vi-spreadsheet input.form-control[readonly] {
          background-color: var(--vi-grid-disabled-bg);
          color: var(--vi-grid-disabled-text);
          opacity: 1;
        }

        /* Resaltado de fila BASE solo en columna ndice */
        .vi-spreadsheet tr.vi-base-row > td {
          background-color: transparent;
        }

        /* PUNTO E - colores de la columna de conformidad */
        .vi-spreadsheet td.vi-at-valor.vi-at-valor--fail {
          color: var(--vi-grid-at-fail-text) !important;
          background-color: var(--vi-grid-at-fail-bg);
        }
        .vi-spreadsheet td.vi-at-valor.vi-at-valor--ok {
          color: var(--vi-grid-at-ok-text) !important;
        }

        /* Colores para celdas de Error % (E%) segn rangos */
        .vi-spreadsheet .vi-e-ok {
          color: var(--vi-grid-e-ok); /* verde: dentro de tolerancia */
        }
        .vi-spreadsheet .vi-e-warn {
          color: var(--vi-grid-e-warn); /* naranja intenso: advertencia */
        }
        .vi-spreadsheet .vi-e-error {
          color: var(--vi-grid-e-error); /* rojo oscuro: error fuerte */
        }

        /* Resaltado suave de la celda enfocada (no agresivo) */
        .vi-spreadsheet input.form-control:focus,
        .vi-spreadsheet select.form-select:focus,
        .vi-spreadsheet .table-active input.form-control:focus,
        .vi-spreadsheet .table-active select.form-select:focus {
          background-color: var(--vi-grid-input-active-bg) !important; /* azul ms visible al enfocar */
          box-shadow: 0 0 0 0.18rem rgba(13, 110, 253, 0.3) !important;
        }

        /* FIX: mantener visible el resaltado rojo de celdas con error */
        .vi-spreadsheet input.vi-error-cell {
          border-color: var(--vi-grid-error-border) !important;
          background-color: var(--vi-grid-error-bg) !important;
          box-shadow: 0 0 0 0.15rem rgba(220, 53, 69, 0.25) !important;
        }

        /* -----------------------------
           Tamao de fuente del grid (filas) y ancho adaptable
           ----------------------------- */

        /* Variables base de fuente y ancho maximo de celda */
        .vi-spreadsheet {
          --vi-grid-font-size: 0.75rem;          /* tamano base de filas */
          --vi-grid-cell-max-width: 110px;       /* aprox. ancho actual maximo por columna */
          font-size: var(--vi-grid-font-size);
          table-layout: auto;
        }

        /* Escalones de tamano de fuente para las FILAS (no afecta titulos ni botones) */
        .vi-spreadsheet.vi-grid-font-0 { --vi-grid-font-size: 0.75rem; }
        .vi-spreadsheet.vi-grid-font-1 { --vi-grid-font-size: 0.8rem; }
        .vi-spreadsheet.vi-grid-font-2 { --vi-grid-font-size: 0.85rem; }
        .vi-spreadsheet.vi-grid-font-3 { --vi-grid-font-size: 0.9rem; }
        .vi-spreadsheet.vi-grid-font-4 { --vi-grid-font-size: 0.95rem; }
        .vi-spreadsheet.vi-grid-font-5 { --vi-grid-font-size: 1.0rem; }

        /* Encabezados y celdas (excepto ndice y medidor fijo):
           minimo igual al ttulo, pero pueden crecer hasta el ancho maximo actual */
        .vi-spreadsheet th:not(.vi-row-index):not(.vi-sticky-medidor),
        .vi-spreadsheet td:not(.vi-row-index):not(.vi-sticky-medidor) {
          white-space: nowrap;
          min-width: 64px;
          max-width: var(--vi-grid-cell-max-width);
        }

        /* Inputs y selects del grid: usan la fuente variable y se adaptan en alto.
           El ancho lo gobierna la celda (th/td), as pueden crecer con el contenido
           hasta el maximo definido arriba. */
        .vi-spreadsheet input.form-control {
          font-size: var(--vi-grid-font-size);
          height: calc(var(--vi-grid-font-size) * 2.3);
          width: 100%;
        }

        .vi-spreadsheet select.form-select {
          font-size: var(--vi-grid-font-size);
          width: 100%;
        }

        /* Valores de Q y E% siempre +2px respecto al resto de la fila */
        .vi-spreadsheet .vi-qe-value {
          font-size: calc(1em + 2px);
        }
        `}),l.jsx("div",{className:"modal-dialog modal-fluid",style:{maxWidth:"98vw",margin:"1vw"},children:l.jsx("div",{className:"modal-content",children:l.jsxs("form",{onSubmit:te(ye),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{className:"modal-title",children:a}),l.jsx("button",{type:"button",className:"btn-close",onClick:Nn,"aria-label":"Close"})]}),l.jsx("fieldset",{disabled:C,children:l.jsxs("div",{className:"modal-body p-2",children:[!T&&l.jsx("div",{className:"alert alert-warning py-1 mb-2",children:"Sin conexion. Los cambios se guardaran localmente hasta que vuelva la red."}),l.jsxs("div",{className:"row g-2 mb-2 align-items-end",children:[l.jsxs("div",{className:"col-auto",style:{maxWidth:"130px"},children:[l.jsx("label",{className:"form-label mb-1",children:"Filas"}),l.jsx("input",{type:"number",className:"form-control form-control-sm text-end",min:1,max:50,style:{maxWidth:"90px"},...B,ref:J=>{Ue.current=J,B.ref(J)},onBlur:dn,onKeyDown:Vn})]}),l.jsxs("div",{className:"col-md-4 d-flex flex-wrap gap-2",children:[l.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:aa,children:"+ Agregar Fila"}),l.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:it,children:"- Quitar ltima fila"}),l.jsx("button",{type:"button",className:"btn btn-outline-auto btn-sm",onClick:Xn,children:"Limpiar Todo"})]}),l.jsxs("div",{className:"col-md-4 d-flex justify-content-end gap-2",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto btn-sm",onClick:Re,children:"Aumentar tamao"}),l.jsx("button",{type:"button",className:"btn btn-outline-auto btn-sm",onClick:_,children:"Reducir tamao"})]}),l.jsxs("div",{className:"col-md-2 text-end text-muted small",children:["Fila activa: #",be+1,". Desplaza el cursor o enfoca la fila para seleccionarla (Fila 1 se replica al resto)."]})]}),l.jsx("div",{className:"table-responsive border rounded",style:{maxHeight:"70vh",overflowY:"auto",overflowX:"auto"},children:l.jsxs("table",{className:`table table-bordered table-sm mb-0 align-middle text-center vi-spreadsheet vi-grid-font-${M}`,children:[l.jsxs("thead",{className:"vi-surface-2 sticky-top z-1",children:[l.jsxs("tr",{children:[l.jsx("th",{className:"vi-row-index",style:{width:"30px"},children:"#"}),l.jsx("th",{className:"vi-sticky-medidor",style:{width:"120px"},children:"# Medidor"}),l.jsx("th",{style:{width:"90px"},children:"Estado"}),l.jsx("th",{className:"table-primary border-start vi-border",colSpan:9,children:"Q3"}),l.jsx("th",{className:"table-primary border-start vi-border",colSpan:9,children:"Q2"}),l.jsx("th",{className:"table-primary border-start vi-border",colSpan:9,children:"Q1"}),l.jsx("th",{className:"bg-warning vi-text-contrast border-start vi-border vi-header-at",style:{width:"100px"},children:"Conformidad"}),l.jsx("th",{className:"vi-surface-2 vi-text vi-header-quitar",style:{width:"40px"},children:"Quitar"})]}),l.jsxs("tr",{style:{fontSize:"0.75rem"},children:[l.jsx("th",{className:"vi-row-index"}),l.jsx("th",{className:"vi-sticky-medidor"}),l.jsx("th",{}),l.jsx("th",{className:"vi-min-width",title:"J",children:"Temp"}),l.jsx("th",{className:"vi-min-width",title:"K",children:"P.Ent"}),l.jsx("th",{className:"vi-min-width",title:"L",children:"P.Sal"}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"M",children:"L.I."}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"N",children:"L.F."}),l.jsx("th",{className:"vi-min-width",title:"O",children:"Vol"}),l.jsx("th",{className:"vi-min-width",title:"P",children:"Tpo"}),l.jsx("th",{title:"T (Caudal)",className:"vi-surface-2 border-start text-primary fw-bold vi-min-width",children:"Q3"}),l.jsx("th",{title:"U (Error %)",className:"vi-surface-2 text-danger  fw-bold vi-min-width",children:"E%"}),l.jsx("th",{className:"vi-min-width border-start vi-border",title:"V",children:"Temp"}),l.jsx("th",{className:"vi-min-width",title:"W",children:"P.Ent"}),l.jsx("th",{className:"vi-min-width",title:"X",children:"P.Sal"}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"Y",children:"L.I."}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"Z",children:"L.F."}),l.jsx("th",{className:"vi-min-width",title:"AA",children:"Vol"}),l.jsx("th",{className:"vi-min-width",title:"AB",children:"Tpo"}),l.jsx("th",{title:"AF (Caudal)",className:"vi-surface-2 border-start text-primary fw-bold vi-min-width",children:"Q2"}),l.jsx("th",{title:"AG (Error %)",className:"vi-surface-2 text-danger  fw-bold vi-min-width",children:"E%"}),l.jsx("th",{className:"vi-min-width border-start vi-border",title:"AH",children:"Temp"}),l.jsx("th",{className:"vi-min-width",title:"AI",children:"P.Ent"}),l.jsx("th",{className:"vi-min-width",title:"AJ",children:"P.Sal"}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"AK",children:"L.I."}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"AL",children:"L.F."}),l.jsx("th",{className:"vi-min-width",title:"AM",children:"Vol"}),l.jsx("th",{className:"vi-min-width",title:"AN",children:"Tpo"}),l.jsx("th",{title:"AR (Caudal)",className:"vi-surface-2 border-start text-primary fw-bold vi-min-width",children:"Q1"}),l.jsx("th",{title:"AS (Error %)",className:"vi-surface-2 text-danger  fw-bold vi-min-width",children:"E%"}),l.jsx("th",{title:"AT (Conformidad)",className:"bg-warning vi-text-contrast vi-header-at",children:"Estado"}),l.jsx("th",{className:"vi-header-quitar"})]})]}),l.jsx("tbody",{onKeyDown:ze,children:W.map((J,se)=>{const Te=se===0,He=Ut?.[se]||{},rt=ue[se]||{},ht=Number(He.estado??0),Je=ht>=1&&ht<=4,Ct=He.q3?.c6,Bt=He.q3?.c7_seconds,Ot=He.q3?.c4,an=He.q3?.c5,ut=lm(Ct,Bt),dt=im(Ot,an,Ct),yt=He.q2?.c6,zt=He.q2?.c7_seconds,qt=He.q2?.c4,Jt=He.q2?.c5,gn=lm(yt,zt),bn=im(qt,Jt,yt),Ht=He.q1?.c6,Mn=He.q1?.c7_seconds,Lt=He.q1?.c4,sn=He.q1?.c5,Gn=lm(Ht,Mn),jn=im(Lt,sn,Ht),Et=cT(He.estado,dt,bn,jn),Xa=[Te?"vi-base-row":"",be===se?"table-active":""].filter(Boolean).join(" "),rn=q(`rowsData.${se}.medidor`),Cn=iT(He.medidor??""),Jn=Cn?h?.[Cn]?.message:"",Ja=rt.medidor_format||rt.medidor_dup||Jn||"",Vs=!!Ja,Wa=(Et||"").toUpperCase(),ls=Wa==="NO CONFORME"?"vi-at-valor--fail":Wa==="CONFORME"?"vi-at-valor--ok":"";return l.jsxs("tr",{className:Xa,onMouseEnter:()=>we(se),onClick:()=>we(se),onFocusCapture:()=>we(se),children:[l.jsx("td",{className:"small vi-row-index",children:se+1}),l.jsx("td",{className:"vi-sticky-medidor",children:l.jsx("input",{"data-row":se,"data-row-id":J.id,...rn,size:1,style:{minWidth:"100%"},disabled:Je,onInput:xn,className:["form-control form-control-sm p-1 text-center vi-medidor-input",Vs?"vi-error-cell":""].filter(Boolean).join(" "),title:Ja||"",onChange:fn=>{const Sa=P(`rowsData.${se}.medidor`);if(rn.onChange(fn),v?.(Sa),se===0)return;const Wn=fn.currentTarget.value.trim();if(!Wn){Me.current.delete(J.id);return}const Wt=Ty(et?.medidor??"",se,f);Wt&&Wt===Wn?Me.current.delete(J.id):Me.current.set(J.id,!0)}})}),l.jsx("td",{children:l.jsxs("select",{className:"form-select form-select-sm p-0 px-1",style:{fontSize:"0.75rem",height:"24px"},...q(`rowsData.${se}.estado`,{valueAsNumber:!0}),children:[l.jsx("option",{value:0,children:"0"}),l.jsx("option",{value:1,children:"1"}),l.jsx("option",{value:2,children:"2"}),l.jsx("option",{value:3,children:"3"}),l.jsx("option",{value:4,children:"4"}),l.jsx("option",{value:5,children:"5"})]})}),l.jsx("td",{className:"border-start vi-border",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Je,...q(`rowsData.${se}.q3.c1`,{setValueAs:Hn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Je,...q(`rowsData.${se}.q3.c2`,{setValueAs:Hn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Je,...q(`rowsData.${se}.q3.c3`,{setValueAs:Hn})})}),l.jsx("td",{className:"vi-surface",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Je,onInput:xn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(rt.q3_li?" vi-error-cell":""),title:rt.q3_li||"",...q(`rowsData.${se}.q3.c4`,{setValueAs:Hn})})}),l.jsx("td",{className:"vi-surface",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Je,onInput:xn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(rt.q3_lf?" vi-error-cell":""),title:rt.q3_lf||"",...q(`rowsData.${se}.q3.c5`,{setValueAs:Hn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Je,...q(`rowsData.${se}.q3.c6`,{setValueAs:Hn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Je,...q(`rowsData.${se}.q3.c7`),placeholder:"m,ss,ms"})}),l.jsx(Ql,{val:ut}),l.jsx(Ql,{val:dt,isErr:!0,warnThreshold:2,failThreshold:5}),l.jsx("td",{className:"border-start vi-border",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Je,...q(`rowsData.${se}.q2.c1`,{setValueAs:Hn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Je,...q(`rowsData.${se}.q2.c2`,{setValueAs:Hn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Je,...q(`rowsData.${se}.q2.c3`,{setValueAs:Hn})})}),l.jsx("td",{className:"vi-surface",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Je,onInput:xn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(rt.q2_li?" vi-error-cell":""),title:rt.q2_li||"",...q(`rowsData.${se}.q2.c4`,{setValueAs:Hn})})}),l.jsx("td",{className:"vi-surface",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Je,onInput:xn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(rt.q2_lf?" vi-error-cell":""),title:rt.q2_lf||"",...q(`rowsData.${se}.q2.c5`,{setValueAs:Hn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Je,...q(`rowsData.${se}.q2.c6`,{setValueAs:Hn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Je,...q(`rowsData.${se}.q2.c7`),placeholder:"m,ss,ms"})}),l.jsx(Ql,{val:gn}),l.jsx(Ql,{val:bn,isErr:!0,warnThreshold:2,failThreshold:5}),l.jsx("td",{className:"border-start vi-border",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Je,...q(`rowsData.${se}.q1.c1`,{setValueAs:Hn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Je,...q(`rowsData.${se}.q1.c2`,{setValueAs:Hn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Je,...q(`rowsData.${se}.q1.c3`,{setValueAs:Hn})})}),l.jsx("td",{className:"vi-surface",children:l.jsx("input",{type:"text",inputMode:"decimal",size:1,style:{minWidth:"100%"},disabled:Je,onInput:xn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(rt.q1_li?" vi-error-cell":""),title:rt.q1_li||"",...q(`rowsData.${se}.q1.c4`,{setValueAs:Hn})})}),l.jsx("td",{className:"vi-surface",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Je,onInput:xn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(rt.q1_lf?" vi-error-cell":""),title:rt.q1_lf||"",...q(`rowsData.${se}.q1.c5`,{setValueAs:Hn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Je,...q(`rowsData.${se}.q1.c6`,{setValueAs:Hn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:xn,disabled:!Te||Je,...q(`rowsData.${se}.q1.c7`),placeholder:"m,ss,ms"})}),l.jsx(Ql,{val:Gn}),l.jsx(Ql,{val:jn,isErr:!0,warnThreshold:5,failThreshold:5}),l.jsx("td",{className:`vi-surface-2 border-start fw-bold small text-center vi-at-valor ${ls}`,children:Et}),l.jsx("td",{className:"text-center align-middle vi-surface-2",children:l.jsx("button",{type:"button",className:"btn btn-danger btn-sm p-0",style:{width:"20px",height:"20px",lineHeight:"1"},onClick:fn=>{fn.stopPropagation(),In(se)},disabled:W.length<=1,title:"Eliminar esta fila",children:""})})]},J.id)})})]})})]})}),l.jsxs("div",{className:"modal-footer py-1",children:[l.jsx("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:Nn,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",ref:K,disabled:Zn||C,children:F&&T?"Reintentar guardar":"Guardar Bancada"})]})]})})})]}),l.jsx("div",{className:"modal-backdrop show vi-backdrop"})]}):null}function zu({show:e,title:a="Contrasea para proteger Excel",confirmLabel:s="Generar Excel",helpText:i="Se usar para proteger estructura y escritura del libro. No habr contrasea de apertura.",onClose:c,onConfirm:d}){const[f,h]=g.useState(""),v=g.useRef(null),p=f.trim().length>0;if(g.useEffect(()=>{e&&(h(""),setTimeout(()=>v.current?.focus(),0))},[e]),g.useEffect(()=>{if(!e)return;const x=j=>{j.key==="Escape"&&c()};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,c]),!e)return null;const y=x=>{x.preventDefault(),p&&d(f.trim())};return l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"pwdModalTitle",onClick:x=>{x.target===x.currentTarget&&c()},children:l.jsx("div",{className:"modal-dialog",children:l.jsxs("form",{className:"modal-content",onSubmit:y,children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{id:"pwdModalTitle",className:"modal-title",children:a}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:c})]}),l.jsx("div",{className:"modal-body",children:l.jsxs("div",{className:"mb-3",children:[l.jsx(go,{label:"Contrasea",inputId:"pwd",value:f,onChange:x=>h(x.target.value),inputRef:v,minLength:1,required:!0}),l.jsx("div",{className:"form-text",children:i})]})}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:c,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!p,children:s})]})]})})})}async function dT(e,a){try{const{data:s}=await Ye.put(`/oi/${e}`,a);return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo actualizar la OI",c=new Error(i);throw c.status=s?.response?.status,c}}async function fT(e,a){try{const{data:s}=await Ye.patch(`/oi/${e}/code`,{code:a});return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo actualizar el codigo de la OI",c=new Error(i);throw c.status=s?.response?.status,c}}async function mT(e,a){try{const{data:s}=await Ye.patch(`/oi/${e}/restore-updated-at`,a);return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo restaurar la fecha de la OI",c=new Error(i);throw c.status=s?.response?.status,c}}async function hT(e){try{const{data:a}=await Ye.post("/oi",e);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo crear el OI";throw new Error(s)}}async function Dy(e,a){try{const{data:s}=await Ye.post(`/oi/${e}/bancadas`,a);return s}catch(s){const i=s?.response?.data?.detail;let c=s?.message??"No se puedo agregar la bancada";typeof i=="string"?c=i:i&&typeof i=="object"&&(c=i.message??i.detail??c);const d=s?.response?.data?.duplicates??(i&&typeof i=="object"?i.duplicates:void 0),f=new Error(c);throw f.status=s?.response?.status,Array.isArray(d)&&(f.duplicates=d),f}}async function pT(e,a){try{const{data:s}=await Ye.put(`/oi/bancadas/${e}`,a);return s}catch(s){const i=s?.response?.data?.detail;let c=s?.message??"No se pudo actualizar la bancada";typeof i=="string"?c=i:i&&typeof i=="object"&&(c=i.message??i.detail??c);const d=s?.response?.data?.duplicates??(i&&typeof i=="object"?i.duplicates:void 0),f=new Error(c);throw f.status=s?.response?.status,Array.isArray(d)&&(f.duplicates=d),f}}async function gT(e,a){try{const{data:s}=await Ye.patch(`/oi/bancadas/${e}/saved_at`,a);return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo actualizar la fecha de la bancada",c=new Error(i);throw c.status=s?.response?.status,c}}async function bT(e,a){try{const{data:s}=await Ye.put(`/oi/bancadas/${e}/restore`,a);return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo restaurar la bancada",c=new Error(i);throw c.status=s?.response?.status,c}}async function zy(e){try{await Ye.delete(`/oi/bancadas/${e}`)}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo eliminar la bancada";throw new Error(s)}}async function X0(e,a){let s;try{s=await Ye.post(`/oi/${e}/excel`,{password:a},{responseType:"blob"})}catch(p){let y=p?.message??"No se pudo generar el Excel";const x=p?.response?.data;if(x instanceof Blob)try{const j=await x.text();try{const E=JSON.parse(j)?.detail;typeof E=="string"?y=E:Array.isArray(E)&&E.length>0?y=E.map(C=>String(C?.msg??"")).filter(Boolean).join(", "):j&&(y=j)}catch{j&&(y=j)}}catch{}else y=p?.response?.data?.detail??y;throw new Error(y)}const i=s.data,f=s.headers["content-disposition"]?.match(/filename="(.+?)"/i)?.[1]??`OI-${e}.xlsx`,h=URL.createObjectURL(i),v=document.createElement("a");v.href=h,v.download=f,document.body.appendChild(v),v.click(),URL.revokeObjectURL(h),v.remove()}async function vT(e){await Ye.delete(`/oi/${e}`)}async function yT(e){try{const{data:a}=await Ye.post(`/oi/${e}/lock`);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo bloquear la OI",i=new Error(s);throw i.status=a?.response?.status,i}}async function Fc(e,a){try{const s=a?{params:{reason:a}}:void 0,{data:i}=await Ye.delete(`/oi/${e}/lock`,s);return i}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo liberar la OI",c=new Error(i);throw c.status=s?.response?.status,c}}async function xT(e,a){try{const{data:s}=await Ye.patch(`/oi/${e}/saved_at`,a);return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo actualizar la fecha de guardado",c=new Error(i);throw c.status=s?.response?.status,c}}async function om(e){try{const{data:a}=await Ye.get(`/oi/${e}/full`);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se puedo cargar el OI";throw new Error(s)}}async function NT(e){try{const{data:a}=await Ye.get("/oi",{params:{q:e.q||void 0,date_from:e.dateFrom||void 0,date_to:e.dateTo||void 0,limit:e.limit,offset:e.offset,responsable_tech_number:e.responsableTechNumber||void 0},headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo obtener el listado de OI";throw new Error(s)}}async function jT(e){let a;try{a=await Ye.get("/oi/export/csv",{params:{q:e.q||void 0,date_from:e.dateFrom||void 0,date_to:e.dateTo||void 0,responsable_tech_number:e.responsableTechNumber||void 0},responseType:"blob"})}catch(f){let h=f?.message??"No se pudo exportar el CSV";const v=f?.response?.data;if(v instanceof Blob)try{const y=await v.text();try{const j=JSON.parse(y)?.detail;typeof j=="string"?h=j:Array.isArray(j)&&j.length>0?h=j.map(F=>String(F?.msg??"")).filter(Boolean).join(", "):y&&(h=y)}catch{y&&(h=y)}}catch{}else h=f?.response?.data?.detail??h;const p=new Error(h);throw p.status=f?.response?.status,p}const s=a.data,d=a.headers["content-disposition"]?.match(/filename="(.+?)"/i)?.[1]??"oi_list.csv";return{blob:s,filename:d}}async function ST(){try{const{data:e}=await Ye.get("/oi/responsables");return e}catch(e){const a=e?.response?.data?.detail??e?.message??"No se pudo obtener responsables";throw new Error(a)}}async function cm(e){try{const{data:a}=await Ye.get(`/oi/${e}`);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo obtener el OI";throw new Error(s)}}const Eh="vi.currentOI";function uo(e){sessionStorage.setItem(Eh,JSON.stringify(e))}function ky(){const e=sessionStorage.getItem(Eh);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function Hm(){sessionStorage.removeItem(Eh)}const um=e=>{if(e)return{c1:e.c1??null,c2:e.c2??null,c3:e.c3??null,c4:e.c4??null,c5:e.c5??null,c6:e.c6??null,c7:e.c7??"",c7_seconds:e.c7_seconds??null,caudal:e.caudal??null,error:e.error??null}},dm=e=>{if(e)return{c1:e.c1??null,c2:e.c2??null,c3:e.c3??null,c4:e.c4??null,c5:e.c5??null,c6:e.c6??null,c7:e.c7??null,c7_seconds:e.c7_seconds??null,caudal:e.caudal??null,error:e.error??null}},wT=e=>({medidor:e.medidor??"",estado:e.estado??0,q3:um(e.q3),q2:um(e.q2),q1:um(e.q1)}),_T=e=>({medidor:e.medidor??"",estado:e.estado??0,q3:dm(e.q3),q2:dm(e.q2),q1:dm(e.q1)}),J0=e=>e.rows_data&&e.rows_data.length>0?e.rows_data:Array.from({length:e.rows}).map((a,s)=>({medidor:s===0?e.medidor??"":"",estado:e.estado,q3:s===0?e.q3??void 0:void 0,q2:s===0?e.q2??void 0:void 0,q1:s===0?e.q1??void 0:void 0})),ET=e=>e.reduce((a,s)=>a+(s.rows??0),0),AT=e=>JSON.parse(JSON.stringify(e)),My=e=>JSON.stringify({medidor:e.medidor??null,estado:e.estado??0,rows:e.rows??0,rows_data:e.rows_data??null,q1:e.q1??null,q2:e.q2??null,q3:e.q3??null}),Uy=e=>e.rows_data&&e.rows_data.length>0?e.rows_data:J0(e),CT=(e,a)=>e==="view"&&a?"view":"edit",Ly=e=>{if(!e)return"";const s=/([zZ]|[+-]\d{2}:?\d{2})$/.test(e)?e:`${e}Z`,i=new Date(s);if(Number.isNaN(i.getTime()))return"";const c=d=>d.toString().padStart(2,"0");return`${i.getFullYear()}-${c(i.getMonth()+1)}-${c(i.getDate())}T${c(i.getHours())}:${c(i.getMinutes())}`},OT=e=>{if(!e)return"";const a=new Date(e);return Number.isNaN(a.getTime())?"":a.toISOString().replace("Z","")},W0=e=>(e??"").trim().toUpperCase(),RT=e=>{const a={};e.forEach(i=>{const c=W0(i.medidor);c&&(a[c]||(a[c]={items:[],ids:[]}),i.bancada_item!=null&&!a[c].items.includes(i.bancada_item)&&a[c].items.push(i.bancada_item),i.bancada_id!=null&&!a[c].ids.includes(i.bancada_id)&&a[c].ids.push(i.bancada_id))});const s={};return Object.entries(a).forEach(([i,c])=>{let d="Este medidor existe en otra bancada de esta misma OI.";c.items.length>0&&(d=`Este medidor existe en la bancada #${[...c.items].sort((h,v)=>h-v).join(", ")} de esta misma OI.`),s[i]={message:d,bancadaItem:c.items[0],bancadaId:c.ids[0]}}),s},TT="Tienes una OI abierta en edicion. Cierra la OI antes de salir. Deseas salir de todas formas?",DT=(e,a=!0)=>{const i=g.useContext(Qa)?.navigator;g.useEffect(()=>{if(!a||!i||typeof i.block!="function")return;const c=i.block(d=>{const f={...d,retry(){c(),d.retry()}};e(f)});return c},[i,e,a])},zT=e=>{const a=Ye.defaults.baseURL??(typeof window<"u"?window.location.origin:"");return`${String(a).replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`},kT=()=>{const[e,a]=g.useState(typeof navigator<"u"?navigator.onLine:!0);return g.useEffect(()=>{const s=()=>a(!0),i=()=>a(!1);return window.addEventListener("online",s),window.addEventListener("offline",i),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",i)}},[]),e},Hc=e=>{if(e?.status??e?.response?.status)return!1;const s=e?.code??e?.name;return s==="ERR_NETWORK"||s==="ECONNABORTED"?!0:!e?.response};function By(){const{toast:e}=al(),a=nl(),s=ia(),{oiId:i}=qS(),[c,d]=hx(),f=kT(),{data:h}=Xr({queryKey:["catalogs"],queryFn:bh}),{register:v,handleSubmit:p,watch:y,formState:{errors:x},reset:j,getValues:F}=gu({resolver:VO(aT),defaultValues:{oi:`OI-0001-${new Date().getFullYear()}`,numeration_type:"correlativo",pma:16,q3:2.5,alcance:80}}),E=Bn(),C=E?.userId??null,T=E?.bancoId??po(),q=Ga(E?.role,E?.username)!=="technician",A=ky(),te=i?Number(i):null,U=Number.isFinite(te)?te:null,D=U!=null||(A?.id??null)!=null,P=(c.get("mode")||"").toLowerCase(),B=CT(P,D),W=B==="view",fe=B==="edit",[De,_e]=g.useState(!1),[be,we]=g.useState(!1),[Ce,Ue]=g.useState(null),[M,V]=g.useState(null),[ae,ce]=g.useState(!1),Re=be||W,[_,K]=g.useState(!1),[ue,Q]=g.useState(null),[Ee,Ne]=g.useState(null),[Be,Ze]=g.useState(null),[he,Me]=g.useState(!1),[Fe,Qe]=g.useState(""),[lt,ze]=g.useState(null),[Ge,me]=g.useState("bancada"),[Ie,Ae]=g.useState(!1),[Xe,R]=g.useState(!1),[z,S]=g.useState(null),L=g.useRef([]),$=g.useRef(null),X=g.useRef(!1),le=g.useRef(!1),je=g.useRef(!1),Z=g.useRef(null),ke=g.useRef(!1),qe=g.useRef(f),We=g.useRef(!1),Mt=g.useRef(!1),[ye,et]=g.useState(null),[Ut,_t]=g.useState(null),[pn,An]=g.useState([]),[aa,In]=g.useState(!1),[it,Xn]=g.useState(null),[dn,Vn]=g.useState(!1),[Nn,Zn]=g.useState(null),[J,se]=g.useState(0),[Te,He]=g.useState({}),[rt,ht]=g.useState({}),Je=s.state?.returnTo,Ct=()=>typeof Je=="string"&&Je?Je:"/oi/list",Bt=O=>{const H=new URLSearchParams(c);H.set("mode",O),d(H,{replace:!0})},Ot="new",an=15,ut=O=>O?`bancada-${O.id}`:Ot,dt=O=>O==null?!1:typeof O=="string"?O.trim()!=="":typeof O=="number"?Number.isFinite(O):!0,yt=O=>O==="c7_seconds"||O==="caudal"||O==="error",zt=O=>O?Object.entries(O).some(([H,ge])=>yt(H)?!1:dt(ge)):!1,qt=O=>!O||!Array.isArray(O.rowsData)?!1:O.rowsData.some(H=>{if(!H)return!1;if(Number(H.estado??0)!==0)return!0;const Le=H.medidor;return typeof Le=="string"&&Le.trim()!==""?!0:zt(H.q3)||zt(H.q2)||zt(H.q1)}),Jt=(O=an)=>Array.from({length:O}).map(()=>({medidor:"",estado:0,q3:{},q2:{},q1:{}})),gn=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`draft-${Date.now()}`,bn=O=>({draftId:gn(),draftCreatedAt:new Date().toISOString(),estado:0,rows:an,rowsData:Jt(),version:null}),Ht=O=>{const H=new URLSearchParams(s.search);H.set("mode","edit");const ge=s.pathname==="/oi"||s.pathname==="/oi/"?O?`/oi/${O}`:"/oi":s.pathname,Le=H.toString();return Le?`${ge}?${Le}`:ge},Mn=(O,H)=>!O||!C||T==null?null:{version:1,ts:new Date().toISOString(),userId:C,bankId:T,oiId:O,oiCode:F("oi")??null,returnTo:Ht(O),mode:"edit",modal:H},Lt=()=>{if(aa)return it?{type:"bancada",bancadaId:it.id}:{type:"bancada",isNew:!0}},sn=O=>Jf({userId:C,bankId:T,oiId:O,type:"bancada",isNew:!0}),Gn=O=>{const H=sn(O);if(!H)return null;const ge=Wf(H);if(!ge||!C||T==null||!O||ge.userId!==C||ge.bankId!==T||ge.oiId!==O)return null;const Le=ge?.data??null;return qt(Le)?Le:(yr(H),null)},jn=(O,H)=>{const ge=sn(O);if(!ge)return;if(!H||!qt(H)){yr(ge);return}if(!C||T==null||!O)return;const Le={version:1,ts:new Date().toISOString(),userId:C,bankId:T,oiId:O,isNew:!0,data:H},at=Mn(O,{type:"bancada",isNew:!0});co(ge,Le,at)},Et=O=>Jf({userId:C,bankId:T,oiId:O,type:"header"}),Xa=O=>{if(!O)return null;const H=Wf(O);return!H||!C||T==null||H.userId!==C||H.bankId!==T||ye!=null&&H.oiId!==ye?null:H?.data??null},rn=(O,H)=>{if(!O||!C||T==null)return;const ge=ye??0,Le={version:1,ts:new Date().toISOString(),userId:C,bankId:T,oiId:ge,data:H},at=Mn(ye,Lt());co(O,Le,at)},Cn=O=>{O&&yr(O)},Jn=O=>{const H={};return O.q3!=null&&(H.q3=Number(O.q3)),O.alcance!=null&&(H.alcance=Number(O.alcance)),O.pma!=null&&(H.pma=Number(O.pma)),O.numeration_type&&(H.numeration_type=O.numeration_type),H},Ja=(O,H)=>Jf({userId:C,bankId:T,oiId:O,type:"bancada",bancadaId:H}),Vs=(O,H)=>{const ge=Ja(O,H);if(!ge)return null;const Le=Wf(ge);if(!Le||!C||T==null||!O||!H||Le.userId!==C||Le.bankId!==T||Le.oiId!==O)return null;const at=Le?.data??null;return qt(at)?at:(yr(ge),null)},Wa=(O,H,ge)=>{const Le=Ja(O,H);if(!Le)return;if(!qt(ge)){yr(Le);return}if(!C||T==null||!O||!H)return;const at={version:1,ts:new Date().toISOString(),userId:C,bankId:T,oiId:O,bancadaId:H,data:ge},vt=Mn(O,{type:"bancada",bancadaId:H});co(Le,at,vt)},ls=(O,H)=>{const ge=Ja(O,H);ge&&yr(ge)},fn=Et(ye);g.useEffect(()=>{h&&j(O=>({...O,q3:h.q3[0],alcance:h.alcance[0],pma:16}))},[h,j]),g.useEffect(()=>{const O=ky(),H=U??O?.id??null;if(!H){et(null),An([]),L.current=[],$.current=null,Zn(null),se(0),_t(null),Ne(null),Ze(null),K(!1),we(!1),Ue(null),V(null),ce(!1),Q(null);return}(async()=>{try{const ge=await om(H);et(ge.id),uo({id:ge.id,code:ge.code}),An(ge.bancadas??[]),L.current=AT(ge.bancadas??[]),$.current=ge.updated_at??null,Zn(ge.medidores_usuario??null),se(ge.medidores_total_code??0),Ne(ge.saved_at??null),Ze(ge.created_at??null),_t(ge.updated_at??ge.created_at);const Le={oi:ge.code,q3:ge.q3,alcance:ge.alcance,pma:ge.pma,numeration_type:ge.numeration_type??"correlativo"};j(Le),K(!1),we(ge.read_only_for_current_user??!1),Ue(ge.locked_by_full_name??null),V(ge.locked_by_user_id??null),ce((ge.locked_by_user_id??null)===C),Q(Le)}catch{Hm()}})()},[j,C,U]),g.useEffect(()=>{if(!ye||rt[Ot])return;const O=Gn(ye);O&&(ht(H=>({...H,[Ot]:O})),e({kind:"info",message:"Se restauro un borrador local."}))},[ye,rt,e]),g.useEffect(()=>{if(!ye||!C||!fe)return;let O=!1;return(async()=>{const H=ge=>{we(ge?.read_only_for_current_user??!1),Ue(ge?.locked_by_full_name??null),V(ge?.locked_by_user_id??null),ce((ge?.locked_by_user_id??null)===C)};try{const ge=await yT(ye);if(O)return;H(ge)}catch(ge){if(O)return;const Le=ge?.status??ge?.response?.status;let at=null;try{const ot=await om(ye);if(O)return;at=ot.locked_by_full_name??null,H({read_only_for_current_user:!0,locked_by_full_name:at,locked_by_user_id:ot.locked_by_user_id??null})}catch{we(!0),ce(!1)}const vt=at?`La OI est? siendo editada por ${at}. Se abre en modo lectura.`:ge?.message??"La OI est? siendo editada por otro usuario. Int?ntelo m?s tarde.";e({kind:Le===423||Le===409?"warning":"error",title:Le===423||Le===409?"OI bloqueada":"Error",message:vt}),we(!0),ce(!1),P!=="view"&&Bt("view")}})(),()=>{O=!0}},[ye,C,fe]),g.useEffect(()=>()=>{ye&&ae&&Fc(ye).catch(()=>{})},[ye,ae]),g.useEffect(()=>{ye&&(!ae||Re||!fe||_E(ye))},[ae,ye,Re,fe]),g.useEffect(()=>{le.current=!1,je.current=!1,R(!1),ke.current=!1,Mt.current=!1},[ye]),g.useEffect(()=>{if(!qe.current&&f){if(!!!Bn()?.token){e({kind:"warning",message:"Conexion restablecida, pero debes iniciar sesion para guardar."}),qe.current=f;return}(je.current||Xe)&&e({kind:"info",message:"Conexion restablecida. Puedes reintentar guardar."})}qe.current=f},[f,Xe,e]),g.useEffect(()=>{const O=()=>{e({kind:"warning",message:"Sesion expirada. Inicia sesion para guardar. Tu borrador esta guardado."})};return window.addEventListener("medileser:auth-expired",O),()=>window.removeEventListener("medileser:auth-expired",O)},[e]),g.useEffect(()=>{const O=OE();if(!O){S(null),We.current=!1;return}const H=`${s.pathname}${s.search}`,ge=O.route===H,Le=O.oiId==null||O.oiId===ye;if(!ge&&!Le){S(null),We.current=!1;return}S(O),O.type==="save_bancada"&&R(!0),O.type==="save_oi"&&(je.current=!0),We.current||(e({kind:"info",message:"Sesion restaurada. Reintenta guardar."}),We.current=!0)},[s.pathname,s.search,ye,e]);const Sa=fe&&!Re&&(_||!ye);g.useEffect(()=>{if(!Sa||ke.current)return;const O=Xa(fn);if(!O)return;const H=F();j({...H,...O,numeration_type:O.numeration_type??H.numeration_type??"correlativo"}),ke.current=!0,e({kind:"info",message:"Se restauro un borrador local."})},[Sa,fn,F,j,e]),g.useEffect(()=>{if(!Sa)return;const O=y(H=>{Z.current&&window.clearTimeout(Z.current),Z.current=window.setTimeout(()=>{rn(fn,Jn(H))},400)});return()=>{O.unsubscribe(),Z.current&&window.clearTimeout(Z.current)}},[y,Sa,fn]);const Wn=g.useMemo(()=>Object.keys(rt).length>0,[rt]),Wt=fe&&!Re&&(ae||_||Wn);g.useEffect(()=>{if(!Wt)return;const O=H=>{if(!X.current)return H.preventDefault(),H.returnValue="",""};return window.addEventListener("beforeunload",O),()=>window.removeEventListener("beforeunload",O)},[Wt]),DT(O=>{if(!Wt){O.retry();return}if(X.current){O.retry();return}if(O.location.pathname===s.pathname){O.retry();return}window.confirm(TT)&&O.retry()},Wt),g.useEffect(()=>{if(!ye||!ae||Re||!fe)return;const O=()=>{if(X.current||le.current)return;le.current=!0;const ge=Bn()?.token,Le=zT(`/oi/${ye}/close`);fetch(Le,{method:"POST",headers:ge?{Authorization:`Bearer ${ge}`}:void 0,keepalive:!0}).catch(()=>{})},H=()=>{O()};return window.addEventListener("pagehide",H),()=>window.removeEventListener("pagehide",H)},[ye,ae,Re,fe]);const is=y("pma"),oa=g.useMemo(()=>rT(Number(is)),[is]),Zs=y("numeration_type")??"correlativo",wr=async O=>{try{_e(!0);const H=Bn();if(!H)throw new Error("Sesin no vlida");const ge=H.bancoId;if(ge==null)throw new Error("Debe seleccionar un banco para crear una OI.");const Le={code:O.oi,q3:Number(O.q3),alcance:Number(O.alcance),pma:Number(O.pma),banco_id:ge,tech_number:H.techNumber,numeration_type:O.numeration_type??"correlativo"},at=await hT(Le);return et(at.id),_t(at.updated_at??at.created_at),Zn(at.medidores_usuario??0),se(at.medidores_total_code??0),Ne(at.saved_at??null),Ze(at.created_at??null),uo({id:at.id,code:at.code}),Q(O),je.current=!1,Cn(Et(null)),Cn(Et(at.id)),Gl(),S(null),e({kind:"success",title:"OI creada",message:`${at.code} (#${at.id})`}),!0}catch(H){return Hc(H)?(je.current=!0,rn(fn,Jn(O)),e({kind:"warning",title:"Sin conexion",message:"Sin conexion. Cambios guardados localmente. Reintenta al reconectar."}),!1):oo(H)?(je.current=!0,rn(fn,Jn(O)),!1):(e({kind:"error",title:"Error",message:H?.message??"Error creando OI"}),!1)}finally{_e(!1)}},vs=async O=>{if(!ye)return!1;if(Re)return e({kind:"warning",title:"Solo lectura",message:"La OI est bloqueada por otro usuario."}),!1;try{if(_e(!0),!ye)throw new Error("No hay OI seleccionada para actualizar.");const H=O.oi?.trim(),ge=O.numeration_type??"correlativo",Le=ue?.numeration_type??"correlativo",at=!ue||Number(O.q3)!==Number(ue.q3)||Number(O.alcance)!==Number(ue.alcance)||Number(O.pma)!==Number(ue.pma)||ge!==Le,vt=q&&!!H&&H!==(ue?.oi??""),ot=!vt||at,Rt=jt=>{_t(jt.updated_at??jt.created_at),Ne(jt.saved_at??null),Ze(jt.created_at??null),jt.code&&uo({id:jt.id,code:jt.code}),V(jt.locked_by_user_id??null),Ue(jt.locked_by_full_name??null),we(jt.read_only_for_current_user??!1),ce((jt.locked_by_user_id??null)===C)};let Sn=null;if(ot){if(!Ut)throw new Error("No se pudo determinar la version actual de la OI. Recargue la pagina e intentelo de nuevo.");const jt={q3:Number(O.q3),alcance:Number(O.alcance),pma:Number(O.pma),numeration_type:ge,updated_at:Ut};Sn=await dT(ye,jt),Rt(Sn)}if(vt&&H)try{const jt=await fT(ye,H);Sn=jt,Rt(jt)}catch(jt){if(Hc(jt)||oo(jt))throw jt;const ws=jt?.status??jt?.response?.status;return e(ws===409?{kind:"error",title:"Conflicto",message:"Ya existe una OI con ese codigo."}:ws===403?{kind:"error",title:"No autorizado",message:"No autorizado."}:ws===422||ws===400?{kind:"error",title:"Formato",message:"Formato de OI invalido. Debe ser OI-####-YYYY."}:{kind:"error",title:"Error",message:jt?.message??"Error actualizando OI"}),!1}return Sn?(Q({...O,oi:Sn.code,numeration_type:ge}),K(!1),je.current=!1,Cn(fn),Gl(),S(null),e({kind:"success",title:"OI actualizada",message:Sn.code??O.oi}),!0):(K(!1),je.current=!1,Cn(fn),Gl(),S(null),e({kind:"success",title:"OI actualizada",message:O.oi}),!0)}catch(H){if(Hc(H))return je.current=!0,rn(fn,Jn(O)),e({kind:"warning",title:"Sin conexion",message:"Sin conexion. Cambios guardados localmente. Reintenta al reconectar."}),!1;if(oo(H))return je.current=!0,rn(fn,Jn(O)),!1;const ge=H?.status??H?.response?.status;return e(ge===409?{kind:"error",title:"Conflicto",message:"La OI fue modificada por otro usuario. Recargue la pgina y vuelva a intentar."}:{kind:"error",title:"Error",message:H?.message??"Error actualizando OI"}),!1}finally{_e(!1)}},ys=!!ye&&_&&!Re,Vt=()=>He({}),_r=O=>{const H=W0(O);H&&He(ge=>{if(!ge[H])return ge;const Le={...ge};return delete Le[H],Le})},xs=()=>{if(Re){e({kind:"warning",title:"Solo lectura",message:"No puede agregar bancadas mientras la OI est bloqueada."});return}if(!ye)return;Vt(),R(!1);const O=Gn(ye),H=O??bn();ht(ge=>({...ge,[Ot]:H})),jn(ye,H),O&&e({kind:"info",message:"Se restauro un borrador local."}),Xn(null),In(!0)},Ns=O=>{if(Re&&!W){e({kind:"warning",title:"Solo lectura",message:"No puede editar bancadas mientras la OI est? bloqueada."});return}Vt(),R(!1);const H=Vs(ye,O.id);if(H){const ge=ut(O);ht(Le=>({...Le,[ge]:H})),e({kind:"info",message:"Se restauro un borrador local."})}Xn(O),In(!0)};g.useEffect(()=>{if(!ye||Mt.current)return;const O=vE();if(O&&!(!C||T==null)&&!(O.userId!==C||O.bankId!==T)&&O.oiId===ye){if(O.modal?.type==="bancada"){if(O.modal.isNew){Mt.current=!0,em(),xs();return}if(O.modal.bancadaId){const H=pn.find(ge=>ge.id===O.modal?.bancadaId);if(!H)return;Mt.current=!0,em(),Ns(H);return}}Mt.current=!0,em()}},[C,T,pn,ye,xs,Ns]);const os=g.useMemo(()=>{const O=ut(it),H=rt[O];if(H){const at=H.version??it?.updated_at??it?.created_at??null;return{...H,version:at}}if(!it)return;const Le=J0(it).map(wT);return{estado:it.estado,rows:Le.length||it.rows,rowsData:Le,version:it.updated_at??it.created_at??null}},[it,rt]),il=async O=>{if(ye){if(Re){e({kind:"warning",title:"Solo lectura",message:"No puede guardar bancadas mientras la OI est bloqueada."});return}Vt(),R(!1);try{_e(!0);const H=O.draftCreatedAt??rt[Ot]?.draftCreatedAt,ge={estado:Number(O.estado??0),rows:Number(O.rowsData.length),rows_data:O.rowsData.map(_T)};if(it){const Le=O.version??it.updated_at??it.created_at??null;if(!Le)throw new Error("No se pudo determinar la versin actual de la bancada. Recargue y vuelva a intentar.");const at={...ge,updated_at:Le},vt=await pT(it.id,at);An(ot=>ot.map(Rt=>Rt.id===vt.id?vt:Rt)),_t(vt.updated_at??vt.created_at??Ut),Zn(null),ls(ye,it.id),ht(ot=>{const Rt=`bancada-${it.id}`,{[Rt]:Sn,...jt}=ot;return jt}),e({kind:"success",message:"Bancada actualizada"})}else{H&&(ge.draft_created_at=H);const Le=await Dy(ye,ge);An(at=>[...at,Le]),_t(Le.updated_at??Le.created_at??Ut),Zn(null),ht(at=>{const{new:vt,...ot}=at;return ot}),jn(ye,null),e({kind:"success",message:"Bancada agregada"})}try{const Le=await cm(ye);Zn(Le.medidores_usuario??null),se(Le.medidores_total_code??J),Ne(Le.saved_at??null),Ze(Le.created_at??null)}catch{}V(E?.userId??M),Ue(E?.fullName??Ce),ce(C!==null),we(!1),In(!1),Xn(null),Gl(),S(null),R(!1)}catch(H){if(Hc(H)){it?Wa(ye,it.id,O):jn(ye,O),R(!0),e({kind:"warning",title:"Sin conexion",message:"Sin conexion. La bancada se guardo localmente. Reintenta cuando vuelva la red."});return}if(oo(H)){it?Wa(ye,it.id,O):jn(ye,O),R(!0);return}const ge=H?.status??H?.response?.status;if(ge===409)e({kind:"error",title:"Conflicto",message:"La bancada fue modificada por otro usuario. Recargue la pgina y vuelva a intentar."});else if(ge===400){const Le=Array.isArray(H?.duplicates)?H.duplicates:Array.isArray(H?.response?.data?.duplicates)?H.response.data.duplicates:[];Le.length>0&&He(RT(Le)),e({kind:"warning",title:"Validacion",message:H?.message??"Error guardando bancada"})}else e({kind:"error",title:"Error",message:H?.message??"Error guardando bancada"})}finally{_e(!1)}}},ol=async O=>{if(confirm(`Eliminar bancada #${O.item}?`)){if(Re){e({kind:"warning",title:"Solo lectura",message:"No puede eliminar bancadas mientras la OI est bloqueada."});return}try{if(_e(!0),!ye)throw new Error("No hay OI cargada.");await zy(O.id),An(ge=>ge.filter(Le=>Le.id!==O.id)),Zn(null),ht(ge=>{const Le=`bancada-${O.id}`,{[Le]:at,...vt}=ge;return vt}),ls(ye,O.id);const H=await cm(ye);_t(H.updated_at??H.created_at??null),Ne(H.saved_at??null),Ze(H.created_at??null),V(H.locked_by_user_id??null),Ue(H.locked_by_full_name??null),we(H.read_only_for_current_user??!1),ce((H.locked_by_user_id??null)===C),Zn(H.medidores_usuario??null),se(H.medidores_total_code??J),e({kind:"success",message:`Bancada #${O.item} eliminada`})}catch(H){e({kind:"error",title:"Error",message:H?.message??"Error eliminando bancada"})}finally{_e(!1)}}},cs=()=>{if(!ye){e({kind:"warning",message:"Primero guarda el OI."});return}Vn(!0)},hi=async O=>{if(ye)try{_e(!0),await X0(ye,O),e({kind:"success",message:"Excel generado"})}catch(H){e({kind:"error",title:"Error",message:H?.message??"Error generando Excel"})}finally{_e(!1)}},cl=()=>{if(!ye||!q)return;const O=Ee??Be;me("oi"),ze(null),Qe(Ly(O)),Me(!0)},ul=O=>{if(!q)return;me("bancada"),ze(O);const H=O.saved_at??O.created_at??Ee??Be;Qe(Ly(H)),Me(!0)},Er=async()=>{if(!ye||!q)return;const O=OT(Fe);if(!O){e({kind:"warning",title:"Fecha",message:"Ingrese una fecha valida."});return}if(!(Ge==="bancada"&&!lt))try{_e(!0),Ge==="oi"?await xT(ye,{saved_at:O,propagate_to_bancadas:!0}):lt&&await gT(lt.id,{saved_at:O});const H=await om(ye);if(An(H.bancadas??[]),Zn(H.medidores_usuario??null),se(H.medidores_total_code??0),Ne(H.saved_at??null),Ze(H.created_at??null),_t(H.updated_at??H.created_at),Ue(H.locked_by_full_name??null),V(H.locked_by_user_id??null),we(H.read_only_for_current_user??!1),ce((H.locked_by_user_id??null)===C),!_){const ge={oi:H.code,q3:H.q3,alcance:H.alcance,pma:H.pma,numeration_type:H.numeration_type??"correlativo"};j(ge),Q(ge)}Me(!1),ze(null),Qe(""),me("bancada"),e({kind:"success",message:"Fecha guardada actualizada"})}catch(H){e({kind:"error",title:"Error",message:H?.message??"Error actualizando fecha"})}finally{_e(!1)}},pi=O=>{Vt(),R(!1);const H=ut(it);let ge={...O};if(!it){const Le=rt[Ot];ge.draftCreatedAt||(ge.draftCreatedAt=Le?.draftCreatedAt??new Date().toISOString()),ge.draftId||(ge.draftId=Le?.draftId??gn())}ht(Le=>({...Le,[H]:ge})),it?Wa(ye,it.id,ge):jn(ye,ge),In(!1)},dl=()=>{if(Re){e({kind:"warning",title:"Solo lectura",message:"La OI est bloqueada por otro usuario."});return}const O=F();Q({...O,numeration_type:O.numeration_type??"correlativo"}),K(!0)},$n=()=>{!ye||fe||Bt("edit")},ca=()=>{ue&&j(ue),K(!1),je.current=!1,Cn(fn),Gl(),S(null)},wa=()=>{ye&&(jn(ye,null),Object.keys(rt).forEach(O=>{if(!O.startsWith("bancada-"))return;const H=Number(O.replace("bancada-",""));Number.isFinite(H)&&ls(ye,H)})),Cn(Et(ye)),Cn(Et(null)),pE(),je.current=!1,R(!1),Gl(),S(null),Hm(),h0(),et(null),An([]),L.current=[],ht({}),K(!1),Q(null),_t(null),Ne(null),Ze(null),we(!1),Ue(null),V(null),ce(!1),Zn(null),se(0),In(!1),Xn(null),Vn(!1),Me(!1),Ae(!1),Qe(""),ze(null),me("bancada"),j({oi:`OI-0001-${new Date().getFullYear()}`,q3:h?.q3[0]??2.5,alcance:h?.alcance[0]??80,pma:16,numeration_type:"correlativo"})},ua=()=>{le.current=!0,X.current=!0,wa(),a(Ct())},ka=async()=>{if(!ye)return!0;const O=L.current??[];if(O.length===0&&pn.length===0)return!0;const H=new Map(O.map(Le=>[Le.id,Le])),ge=new Map(pn.map(Le=>[Le.id,Le]));try{for(const vt of pn)H.has(vt.id)||await zy(vt.id);for(const vt of pn){const ot=H.get(vt.id);if(!ot||My(ot)===My(vt))continue;const Rt=Uy(ot),Sn=Rt.length||ot.rows||1,jt=vt.updated_at??vt.created_at??ot.updated_at??ot.created_at;if(!jt)throw new Error("No se pudo determinar la version de la bancada para revertir cambios.");await bT(vt.id,{medidor:ot.medidor??null,estado:ot.estado??0,rows:Sn,rows_data:Rt,current_updated_at:jt,restore_updated_at:ot.updated_at??null,restore_saved_at:ot.saved_at??null})}for(const vt of O)if(!ge.has(vt.id)){const ot=Uy(vt),Rt=ot.length||vt.rows||1;await Dy(ye,{estado:vt.estado??0,rows:Rt,rows_data:ot})}const Le=await cm(ye),at=Le.updated_at??Le.created_at;await mT(ye,{current_updated_at:at,restore_updated_at:$.current})}catch(Le){return e({kind:"error",title:"Error",message:Le?.message??"No se pudo descartar los cambios en bancadas."}),!1}return!0},us=()=>{De||Ae(!0)},Ar=async()=>{if(!De){Ae(!1),_e(!0);try{if(!await ka())return;ye&&ae&&await Fc(ye,"cancel")}catch{}finally{_e(!1)}le.current=!0,X.current=!0,wa(),e({kind:"info",message:"Edicion cancelada"}),a(Ct())}},Cr=async()=>{if(De)return;Ae(!1);let O=!0;if((_||!ye)&&(O=!1,await p(async ge=>{O=ye?await vs(ge):await wr(ge)})()),!!O){_e(!0);try{ye&&ae&&await Fc(ye)}catch{}finally{_e(!1)}le.current=!0,X.current=!0,wa(),e({kind:"info",message:"Cambios guardados"}),a(Ct())}},Gs=async()=>{if(!De){_e(!0);try{ye&&ae&&await Fc(ye)}catch{}finally{_e(!1)}le.current=!0,X.current=!0,wa(),e({kind:"info",message:"OI cerrada"}),a(Ct())}},js=g.useMemo(()=>ET(pn),[pn]),da=Nn??js,_a=O=>{if(!O)return"-";const ge=/([zZ]|[+-]\d{2}:?\d{2})$/.test(O)?O:`${O}Z`,Le=new Date(ge);return Number.isNaN(Le.getTime())?O:new Intl.DateTimeFormat("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"America/Lima"}).format(Le)},Ss=it?Ja(ye,it.id):sn(ye),Ma=C&&T!=null&&ye?{userId:C,bankId:T,oiId:ye,bancadaId:it?.id??null,isNew:!it,returnTo:Ht(ye),oiCode:F("oi")??null}:null;return l.jsxs("div",{className:"oi-page vi-oi-light",children:[l.jsx(fi,{show:De}),!f&&l.jsx("div",{className:"alert alert-warning py-1 mt-2 mb-2",children:"Sin conexion. Los cambios se guardaran localmente hasta que vuelva la red."}),z&&l.jsx("div",{className:"alert alert-info py-1 mt-2 mb-2",children:"Sesion restaurada. Reintenta guardar."}),l.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[l.jsx("h1",{className:"h3",children:"Formulario OI"}),l.jsxs("div",{className:"d-flex gap-2",children:[ye&&q&&l.jsx("button",{type:"button",className:"btn btn-outline-auto btn-sm",onClick:cl,disabled:De,children:"Editar fecha guardado"}),ye&&W&&l.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:$n,disabled:De,children:"Editar"})]})]}),Re&&l.jsx("div",{className:"alert alert-warning mt-2",children:W?"Modo lectura. Use Editar para modificar.":Ce?`Esta OI est siendo editada por ${Ce}. Se abre en modo lectura.`:"Esta OI est en modo lectura. No se pueden realizar cambios."}),l.jsxs("form",{onSubmit:p(ys?vs:wr),className:`row g-3 mt-1 ${ys?"vi-form-editing":"vi-form-readonly"}`,children:[l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"oi",className:"form-label",children:"OI (OI-####-YYYY)"}),l.jsx("input",{id:"oi",className:`form-control ${ye&&!(q&&_&&!Re)?"vi-locked":""}`,...v("oi"),disabled:ye?!(q&&_&&!Re):!1}),x.oi&&l.jsx("div",{className:"text-danger small",children:x.oi.message}),q?null:l.jsx("div",{className:"form-text",children:"Solo administradores pueden cambiar el codigo de OI."})]}),l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"q3",className:"form-label",children:"Q3 (m/h)"}),l.jsx("select",{id:"q3",className:"form-select",...v("q3",{valueAsNumber:!0}),disabled:!!ye&&!_||Re,children:h?.q3.map(O=>l.jsx("option",{value:O,children:O},O))})]}),l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"alcance",className:"form-label",children:"Alcance Q3/Q1"}),l.jsx("select",{id:"alcance",className:"form-select",...v("alcance",{valueAsNumber:!0}),disabled:!!ye&&!_||Re,children:h?.alcance.map(O=>l.jsx("option",{value:O,children:O},O))})]}),l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"pma",className:"form-label",children:"PMA (bar)"}),l.jsx("select",{id:"pma",className:"form-select",...v("pma",{valueAsNumber:!0}),disabled:!!ye&&!_||Re,children:h?.pma.map(O=>l.jsx("option",{value:O,children:O},O))}),l.jsx("div",{className:"form-text",children:"Solo en formulario; calcula Presin (bar)."})]}),l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"presion",className:"form-label",children:"Presin (bar)"}),l.jsx("input",{id:"presion",className:"form-control",value:isNaN(oa)?"":oa,disabled:!0})]}),l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"numeration_type",className:"form-label",children:"Tipo de numeracin (# Medidor)"}),l.jsxs("select",{id:"numeration_type",className:"form-select",...v("numeration_type"),disabled:!!ye&&!_||Re,children:[l.jsx("option",{value:"correlativo",children:"Correlativo"}),l.jsx("option",{value:"no correlativo",children:"No Correlativo"})]}),l.jsx("div",{className:"form-text",children:"Define cmo se completa la columna # Medidor en el Grid."})]}),l.jsxs("div",{className:"col-12 d-flex align-items-center gap-2",children:[l.jsx("button",{className:"btn btn-primary",disabled:De||!!ye&&(!_||Re),children:ye?ys?"Guardar cambios":"OI guardada":"Guardar OI"}),ye&&!_&&fe&&l.jsx("button",{type:"button",className:"btn btn-outline-warning",onClick:dl,disabled:De||Re,children:"Editar OI"}),ye&&_&&fe&&l.jsx("button",{type:"button",className:"btn btn-outline-warning",onClick:ca,disabled:De,children:"Cancelar edicion"}),W&&l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:ua,disabled:De,children:"Volver al listado"}),l.jsx("button",{type:"button",className:"btn btn-outline-success",onClick:cs,disabled:!ye||De||_,children:"Generar Excel"}),fe&&l.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:Gs,disabled:!ye||_||De,children:"Cerrar OI"}),fe&&l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:us,disabled:De,children:"Cancelar"})]})]}),l.jsx("hr",{className:"my-4"}),l.jsxs("div",{className:"card vi-card-table mt-3",children:[l.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"h6 mb-0",children:"Bancadas"}),l.jsxs("small",{className:"text-muted",children:["Medidores (mi registro): ",da," | Total OI: ",J]})]}),l.jsx("button",{className:"btn btn-primary",onClick:xs,disabled:!ye||De||_||Re,children:"Agregar Bancada"})]}),l.jsx("div",{className:"card-body p-0",children:l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-hover table-striped table-sm align-middle mb-0",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"vi-col-60",children:"Item"}),l.jsx("th",{children:"# Medidor"}),l.jsx("th",{children:"Medidores"}),l.jsx("th",{className:"vi-col-160",children:"Fecha creacin"}),l.jsx("th",{className:"vi-col-160",children:"Fecha guardado"}),l.jsx("th",{className:"vi-col-160",children:"ltima fecha mod."}),l.jsx("th",{className:"vi-col-160 text-end",children:"Acciones"})]})}),l.jsxs("tbody",{children:[pn.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"text-muted text-center py-3",children:"Sin bancadas. Agrega la primera."})}),pn.map(O=>{const H=O.rows_data?.[0]?.medidor||O.medidor||"",ge=O.rows_data?.[(O.rows_data?.length||0)-1]?.medidor||"",Le=H&&ge&&H!==ge?`${H} ... ${ge}`:H;return l.jsxs("tr",{children:[l.jsx("td",{children:O.item}),l.jsx("td",{children:Le}),l.jsx("td",{children:O.rows}),l.jsx("td",{children:_a(O.created_at)}),l.jsx("td",{children:_a(O.saved_at)}),l.jsx("td",{children:_a(O.updated_at??O.created_at)}),l.jsxs("td",{className:"text-end",children:[q?l.jsx("button",{className:"btn btn-sm btn-outline-auto me-2",onClick:()=>ul(O),disabled:De||_||be,"aria-label":`Editar fecha guardado bancada #${O.item}`,title:"Editar fecha guardado",children:"Editar fecha guardado"}):null,l.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>Ns(O),disabled:De||_||!W&&Re,"aria-label":`${W?"Ver":"Editar"} bancada #${O.item}`,title:W?"Ver":"Editar",children:W?"Ver":"Editar"}),l.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>ol(O),disabled:De||_||Re,"aria-label":`Eliminar bancada #${O.item}`,title:"Eliminar",children:""})]})]},O.id)})]})]})})})]}),aa&&l.jsx(uT,{show:aa,title:it?`Editar bancada #${it.item}`:"Nueva bancada",initial:os,onClose:()=>{Vt(),In(!1)},onSubmit:il,onCancelWithDraft:pi,numerationType:Zs,readOnly:Re,duplicateMap:Te,onClearDuplicate:_r,draftStorageKey:Ss,draftMeta:Ma,isOnline:f,showRetry:Xe}),Ie&&l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"cancelTitle",onClick:O=>{O.target===O.currentTarget&&Ae(!1)},children:l.jsx("div",{className:"modal-dialog",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{id:"cancelTitle",className:"modal-title",children:"Confirmar cancelacion"}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>Ae(!1)})]}),l.jsx("div",{className:"modal-body",children:l.jsx("p",{children:"Estas seguro de descartar cambios?"})}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:Ar,disabled:De,children:"Descartar cambios"}),l.jsx("button",{type:"button",className:"btn btn-primary",onClick:Cr,disabled:De,children:"Guardar cambios y volver al listado"})]})]})})}),he&&l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"savedAtTitle",onClick:O=>{O.target===O.currentTarget&&(Me(!1),ze(null),me("bancada"))},children:l.jsx("div",{className:"modal-dialog",children:l.jsxs("form",{className:"modal-content",onSubmit:O=>{O.preventDefault(),Er()},children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{id:"savedAtTitle",className:"modal-title",children:"Editar fecha guardado"}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>{Me(!1),ze(null),me("bancada")}})]}),l.jsx("div",{className:"modal-body",children:l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{htmlFor:"savedAtInput",className:"form-label",children:"Fecha guardado"}),l.jsx("input",{id:"savedAtInput",type:"datetime-local",className:"form-control",value:Fe,onChange:O=>Qe(O.target.value),required:!0}),l.jsx("div",{className:"form-text",children:Ge==="oi"?"Se aplicar a todas las bancadas de la OI.":"Se aplica a la bancada seleccionada."})]})}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:()=>{Me(!1),ze(null),me("bancada")},children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:De||!Fe,children:"Guardar"})]})]})})}),l.jsx(zu,{show:dn,title:"Contrasea para proteger Excel",onClose:()=>Vn(!1),onConfirm:O=>{Vn(!1),hi(O)}})]})}function MT(e){return e==="/home"?null:e==="/oi"?"oi_formulario":e==="/oi/list"?"oi_listado":e==="/oi/tools/vima-to-lista"?"tools_vima_lista":e==="/oi/tools/actualizacion-base"?"tools_actualizacion_bases":e==="/oi/tools/formato-ac/history"?"tools_historial_ac":e==="/oi/tools/consolidacion/correlativo"?"tools_consol_correlativo":e==="/oi/tools/consolidacion/no-correlativo"?"tools_consol_no_correlativo":e==="/logistica/log01/history"?"logistica_history":e==="/logistica/log01/excel"?"logistica":e==="/logistica/log02/pdfs"?"logistica_pdfs":e.startsWith("/logistica/")?"logistica":e.startsWith("/oi/")?"oi_formulario":e==="/users"?"users_admin":e==="/admin/permisos"?"admin_permisos":null}function UT(){const e=Bn(),a=ia(),s=e?.token??null,[i,c]=g.useState(()=>!!s);if(g.useEffect(()=>{if(!s){c(!1);return}let j=!1;return c(!0),Ye.get("/auth/me").then(()=>{j||c(!1)}).catch(async F=>{if(j)return;if(F?.response?.status===401){await v0();return}c(!1)}),()=>{j=!0}},[s]),!s)return l.jsx(xr,{to:"/login",replace:!0});if(i)return l.jsx(fi,{show:!0});const d=e,f=Ga(d.role,d.username),h=wu(d),v=ai(f),p=po(),y=a.pathname==="/oi"||a.pathname.startsWith("/oi/");if(v&&y&&!(p&&p>0)&&a.pathname!=="/home")return l.jsx(xr,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Banco",message:"Debe seleccionar un banco para continuar."}}});if(a.pathname==="/admin/permisos"&&!h)return l.jsx(xr,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Permisos",message:"Solo el superusuario puede acceder a este mdulo."}}});if(a.pathname==="/users"&&!(f==="admin"||f==="administrator"))return l.jsx(xr,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Usuarios",message:"No tiene permiso para acceder a este mdulo."}}});if(!h){const j=MT(a.pathname),F=d.allowedModules;if(j&&Array.isArray(F)&&!F.includes(j))return l.jsx(xr,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Permisos",message:"No tiene permiso para acceder a este mdulo."}}})}return l.jsx(ix,{})}const LT=({isActive:e})=>"vi-sidebar-link d-flex align-items-center"+(e?" active":""),BT=.9;function Ah(e,a){if(!(a||e<=0))return{paddingLeft:`calc(0.75rem + ${e*BT}rem)`}}function ba({to:e,icon:a,label:s,depth:i,collapsed:c}){return l.jsx("li",{className:"vi-sidebar-item",children:l.jsxs(fx,{to:e,end:!0,className:LT,style:Ah(i,c),title:s,"aria-label":s,children:[l.jsx("i",{className:`ti ${a} vi-sidebar-icon`}),l.jsx("span",{className:"vi-sidebar-text vi-sidebar-label",children:s})]})})}function qy({icon:e,label:a,depth:s,collapsed:i}){return l.jsx("li",{className:"vi-sidebar-item",children:l.jsxs("button",{type:"button",className:"vi-sidebar-link vi-sidebar-link--disabled d-flex align-items-center w-100 border-0 bg-transparent",style:Ah(s,i),title:a,"aria-label":a,"aria-disabled":"true",disabled:!0,children:[l.jsx("i",{className:`ti ${e} vi-sidebar-icon`}),l.jsx("span",{className:"vi-sidebar-text vi-sidebar-label",children:a})]})})}function Vr({groupKey:e,icon:a,label:s,depth:i,collapsed:c,open:d,active:f,onToggle:h,children:v}){const p=`sidebar-group-${e}`,y=d?"ti-angle-down":"ti-angle-right";return l.jsxs("li",{className:"vi-sidebar-item",children:[l.jsxs("button",{type:"button",className:"vi-sidebar-link d-flex align-items-center w-100 border-0 bg-transparent"+(f?" active":""),style:Ah(i,c),onClick:()=>{c||h(e)},"aria-expanded":!c&&d,"aria-controls":p,title:s,children:[l.jsx("i",{className:`ti ${a} vi-sidebar-icon`}),l.jsx("span",{className:"vi-sidebar-text vi-sidebar-label flex-grow-1",children:s}),l.jsx("span",{className:"vi-sidebar-text vi-sidebar-caret ms-auto",children:l.jsx("i",{className:`ti ${y}`})})]}),!c&&d&&l.jsx("ul",{id:p,className:"list-unstyled mb-0",children:v})]})}function qT({collapsed:e,onToggleSidebar:a}){const s=ia(),i=Bn(),c=!!i,d=Ga(i?.role,i?.username),f=wu(i),h=d==="admin"||d==="administrator",v=i?.allowedModules,p=ce=>f||!Array.isArray(v)||v.includes(ce),y=c&&p("tools_vima_lista"),x=c&&p("tools_actualizacion_bases"),j=c&&p("tools_historial_ac"),F=c&&p("tools_consol_correlativo"),E=c&&p("tools_consol_no_correlativo"),C=c&&p("oi_formulario"),T=c&&p("oi_listado"),q=c&&h&&p("users_admin"),A=c&&p("future_ot"),te=c&&p("logistica"),U=c&&p("logistica_history"),D=c&&p("logistica_pdfs"),P=te||U||D,B=c&&p("future_smart"),W=F||E,fe=y||x||j,De=C||T||A,_e=fe||De||W,be=g.useMemo(()=>({oi:!0,oi_formato_ac:!0,oi_consolidacion:!0,oi_verificacion:!0,logistica:!0,usuarios:!1,administrar:!1}),[]),[we,Ce]=g.useState(()=>{const ce=localStorage.getItem("medileser.sidebar.openGroups")??localStorage.getItem("vi.sidebar.openGroups");if(!ce)return be;try{const Re=JSON.parse(ce),_={...be};return Object.keys(_).forEach(K=>{typeof Re[K]=="boolean"&&(_[K]=Re[K])}),_}catch{return be}}),Ue=s.pathname;g.useEffect(()=>{localStorage.setItem("medileser.sidebar.openGroups",JSON.stringify(we))},[we]);const M=g.useMemo(()=>{const ce=Re=>!!mo({path:Re,end:!0},Ue);return{vimaToLista:ce("/oi/tools/vima-to-lista"),actualizacionBases:ce("/oi/tools/actualizacion-base"),formatoAcHistory:ce("/oi/tools/formato-ac/history"),consolidacionCorrelativo:ce("/oi/tools/consolidacion/correlativo"),consolidacionNoCorrelativo:ce("/oi/tools/consolidacion/no-correlativo"),registroOi:ce("/oi"),listadoOi:ce("/oi/list"),users:ce("/users"),password:ce("/password"),permisos:ce("/admin/permisos"),log01Excel:ce("/logistica/log01/excel"),log01History:ce("/logistica/log01/history"),log02Pdfs:ce("/logistica/log02/pdfs")}},[Ue]),V=g.useMemo(()=>({oi_consolidacion:M.consolidacionCorrelativo||M.consolidacionNoCorrelativo,oi_formato_ac:M.vimaToLista||M.actualizacionBases||M.formatoAcHistory,oi_verificacion:M.registroOi||M.listadoOi,oi:M.vimaToLista||M.actualizacionBases||M.formatoAcHistory||M.consolidacionCorrelativo||M.consolidacionNoCorrelativo||M.registroOi||M.listadoOi,usuarios:M.users||M.password,logistica:M.log01Excel||M.log01History||M.log02Pdfs,administrar:M.permisos}),[M]);function ae(ce){Ce(Re=>({...Re,[ce]:!Re[ce]}))}return l.jsxs("aside",{className:`vi-sidebar ${e?"vi-sidebar--collapsed":""}`,children:[l.jsxs("div",{className:"vi-sidebar__header",children:[l.jsxs("div",{className:"vi-sidebar__brand",children:[l.jsx("img",{className:"vi-brand-logo",src:"/medileser/loading.png",alt:"Medileser",draggable:!1}),l.jsx("span",{className:"vi-brand-text",children:"MEDILESER APP"})]}),a&&l.jsx("button",{type:"button",className:"vi-sidebar-toggle","aria-label":e?"Expandir men":"Contraer men",onClick:a,children:l.jsx("i",{className:`ti ${e?"ti-angle-right":"ti-angle-left"}`})})]}),l.jsxs("ul",{className:"vi-sidebar-menu list-unstyled mb-0",children:[!c&&l.jsx(ba,{to:"/login",icon:"ti-login",label:"Login",depth:0,collapsed:e}),_e&&l.jsxs(Vr,{groupKey:"oi",icon:"ti-panel",label:"OI",depth:0,collapsed:e,open:we.oi,active:V.oi,onToggle:ae,children:[fe&&l.jsxs(Vr,{groupKey:"oi_formato_ac",icon:"ti-folder",label:"FORMATO A-C",depth:1,collapsed:e,open:we.oi_formato_ac,active:V.oi_formato_ac,onToggle:ae,children:[y&&l.jsx(ba,{to:"/oi/tools/vima-to-lista",icon:"ti-exchange-vertical",label:"VIMA  LISTA",depth:2,collapsed:e}),x&&l.jsx(ba,{to:"/oi/tools/actualizacion-base",icon:"ti-reload",label:"ACTUALIZACIN DE BASES",depth:2,collapsed:e}),j&&l.jsx(ba,{to:"/oi/tools/formato-ac/history",icon:"ti-view-list-alt",label:"HISTORIAL A-C",depth:2,collapsed:e})]}),W&&l.jsxs(Vr,{groupKey:"oi_consolidacion",icon:"ti-layers",label:"CONSOLIDACIN DE BASES ORIGINALES",depth:1,collapsed:e,open:we.oi_consolidacion,active:V.oi_consolidacion,onToggle:ae,children:[F&&l.jsx(ba,{to:"/oi/tools/consolidacion/correlativo",icon:"ti-list",label:"CORRELATIVO",depth:3,collapsed:e}),E&&l.jsx(ba,{to:"/oi/tools/consolidacion/no-correlativo",icon:"ti-layout-list-thumb",label:"NO CORRELATIVO",depth:3,collapsed:e})]}),De&&l.jsxs(Vr,{groupKey:"oi_verificacion",icon:"ti-clipboard",label:"VERIFICACIN INICIAL",depth:1,collapsed:e,open:we.oi_verificacion,active:V.oi_verificacion,onToggle:ae,children:[A&&l.jsx(qy,{icon:"ti-briefcase",label:"ORDEN DE TRABAJO (FUTURO)",depth:2,collapsed:e}),C&&l.jsx(ba,{to:"/oi",icon:"ti-layout-grid2",label:"REGISTRO OI",depth:2,collapsed:e}),T&&l.jsx(ba,{to:"/oi/list",icon:"ti-view-list-alt",label:"LISTADO OI",depth:2,collapsed:e})]})]}),P&&l.jsxs(Vr,{groupKey:"logistica",icon:"ti-package",label:"LOGSTICA",depth:0,collapsed:e,open:we.logistica,active:V.logistica,onToggle:ae,children:[te&&l.jsx(ba,{to:"/logistica/log01/excel",icon:"ti-files",label:"Consolidacion Excel",depth:1,collapsed:e}),U&&l.jsx(ba,{to:"/logistica/log01/history",icon:"ti-view-list-alt",label:"Historial de consolidaciones",depth:1,collapsed:e}),D&&l.jsx(ba,{to:"/logistica/log02/pdfs",icon:"ti-filter",label:"Filtrado de Cert.PDFs",depth:1,collapsed:e})]}),B&&l.jsx(qy,{icon:"ti-bar-chart",label:"SMART (FUTURO)",depth:0,collapsed:e}),l.jsxs(Vr,{groupKey:"usuarios",icon:"ti-user",label:"USUARIOS",depth:0,collapsed:e,open:we.usuarios,active:V.usuarios,onToggle:ae,children:[q&&l.jsx(ba,{to:"/users",icon:"ti-user",label:"GESTIN DE USUARIOS",depth:1,collapsed:e}),c&&l.jsx(ba,{to:"/password",icon:"ti-key",label:"CAMBIAR CONTRASEA",depth:1,collapsed:e})]}),f&&l.jsx(Vr,{groupKey:"administrar",icon:"ti-settings",label:"ADMINISTRAR",depth:0,collapsed:e,open:we.administrar,active:V.administrar,onToggle:ae,children:l.jsx(ba,{to:"/admin/permisos",icon:"ti-lock",label:"PERMISOS",depth:1,collapsed:e})})]})]})}function IT({sidebarCollapsed:e,onToggleSidebar:a}){const s=Bn(),i=s?.username??s?.user??"",c=s?ai(s.role):!1,[d,f]=g.useState(()=>po());g.useEffect(()=>ME(()=>f(po())),[]);const h=d&&d>0?`Banco ${d}`:"Banco sin seleccionar",v=async()=>{try{await BE()}finally{location.assign("/login")}};return l.jsxs("header",{className:"navbar navbar-expand vi-surface border-bottom vi-border sticky-top vi-topbar px-3",children:[a&&l.jsx("button",{type:"button",className:"btn btn-link text-secondary me-2 vi-sidebar-toggle","aria-label":e?"Expandir men":"Contraer men",onClick:a,children:l.jsx("i",{className:`ti ${e?"ti-menu-alt":"ti-menu"}`})}),l.jsx("div",{className:"me-auto"}),l.jsxs("div",{className:"d-flex align-items-center gap-3",children:[l.jsx(E0,{}),s&&l.jsxs("span",{className:"text-muted small text-truncate",style:{maxWidth:"360px"},children:["Usuario: ",l.jsx("strong",{children:i||"?"}),c&&l.jsxs(l.Fragment,{children:["  ",h,s.techNumber?l.jsxs(l.Fragment,{children:["  ","Tcnico ",s.techNumber]}):null]})]}),s&&l.jsx("button",{className:"btn btn-sm btn-outline-auto",onClick:v,children:"Cerrar sesin"})]})]})}function $T(){const a=ia().pathname==="/home",[s,i]=g.useState(()=>{try{return(localStorage.getItem("medileser.sidebar.collapsed")??localStorage.getItem("vi.sidebar.collapsed"))==="true"}catch{return!1}}),c=()=>i(d=>!d);return g.useEffect(()=>{try{localStorage.setItem("medileser.sidebar.collapsed",String(s))}catch{}},[s]),l.jsxs("div",{className:`vi-layout ${s?"vi-layout--collapsed":""}`,children:[l.jsx(qT,{collapsed:s,onToggleSidebar:c}),l.jsxs("div",{className:"vi-main",children:[l.jsx(IT,{sidebarCollapsed:s,onToggleSidebar:c}),l.jsx("main",{className:`vi-content${a?" vi-content--home":""}`,children:l.jsx(ix,{})})]})]})}function FT(){const{toast:e}=al(),a=nl(),s=ia(),[,i]=hx(),[c,d]=g.useState(()=>new URLSearchParams(s.search).get("q")??""),[f,h]=g.useState(()=>(new URLSearchParams(s.search).get("q")??"").trim()),[v,p]=g.useState(()=>new URLSearchParams(s.search).get("dateFrom")??""),[y,x]=g.useState(()=>new URLSearchParams(s.search).get("dateTo")??""),[j,F]=g.useState(()=>{const Z=new URLSearchParams(s.search).get("pageSize"),ke=Z?Number(Z):20;return Number.isFinite(ke)&&ke>0?ke:20}),[E,C]=g.useState(()=>{const Z=new URLSearchParams(s.search).get("page"),ke=Z?Number(Z):1;return Number.isFinite(ke)&&ke>0?Math.floor(ke):1}),[T,q]=g.useState(()=>new URLSearchParams(s.search).get("responsableTech")??""),A=(E-1)*j,te=g.useRef(!1);g.useEffect(()=>{if(!te.current){te.current=!0;return}const Z=setTimeout(()=>{h(c.trim()),C(1)},300);return()=>clearTimeout(Z)},[c]),g.useEffect(()=>{const Z=new URLSearchParams,ke=c.trim();ke&&Z.set("q",ke),v&&Z.set("dateFrom",v),y&&Z.set("dateTo",y),T&&Z.set("responsableTech",T),E!==1&&Z.set("page",String(E)),j!==20&&Z.set("pageSize",String(j));const qe=s.search.startsWith("?")?s.search.slice(1):s.search;Z.toString()!==qe&&i(Z,{replace:!0})},[v,y,s.search,E,j,T,c,i]);const{data:U,isLoading:D,isError:P,error:B,refetch:W,isFetching:fe}=Xr({queryKey:["oi","list",{search:f,dateFrom:v,dateTo:y,responsableTech:T,pageSize:j,offset:A}],queryFn:()=>NT({q:f||void 0,dateFrom:v||void 0,dateTo:y||void 0,responsableTechNumber:T?Number(T):void 0,limit:j,offset:A}),placeholderData:Z=>Z}),De=Bn(),_e=Ga(De?.role,De?.username)!=="technician",{data:be=[],isFetching:we,isError:Ce,error:Ue}=Xr({queryKey:["oi","responsables"],queryFn:ST,enabled:_e,staleTime:6e4,retry:!1}),M=Ce?Ue?.message??"No se pudo cargar responsables":"",V=Z=>{if(!Z)return"-";const ke=Z.endsWith("Z")?Z:`${Z}Z`,qe=new Date(ke),We=Mt=>Mt.toString().padStart(2,"0");return`${We(qe.getDate())}/${We(qe.getMonth()+1)}/${qe.getFullYear()} ${We(qe.getHours())}:${We(qe.getMinutes())}`},ce=U?.items??[],Re=U?.summary??{medidores_resultado:0,oi_unicas:0,medidores_total_oi_unicas:0},_=U?.total??0,K=U?.limit??j,ue=K>0?Math.ceil(_/K):1,Q=10;let Ee=1,Ne=ue;if(ue>Q){const Z=Math.floor(Q/2);Ee=Math.max(1,E-Z),Ne=Ee+Q-1,Ne>ue&&(Ne=ue,Ee=Math.max(1,Ne-Q+1))}const[Be,Ze]=g.useState(!1),[he,Me]=g.useState(null),[Fe,Qe]=g.useState(!1),[lt,ze]=g.useState(!1),Ge=D||fe||Fe||lt,me=()=>`${s.pathname}${s.search}`,Ie=(Z,ke)=>{try{uo({id:Z,code:ke}),e({kind:"success",message:`OI ${ke} cargada`}),a(`/oi/${Z}?mode=view`,{state:{returnTo:me()}})}catch(qe){e({kind:"error",title:"Error",message:qe?.message??"No se pudo abrir el OI"})}},Ae=(Z,ke)=>{try{uo({id:Z,code:ke}),e({kind:"success",message:`OI ${ke} cargada`}),a(`/oi/${Z}?mode=edit`,{state:{returnTo:me()}})}catch(qe){e({kind:"error",title:"Error",message:qe?.message??"No se pudo abrir el OI"})}},Xe=async()=>{try{await Co()}finally{Hm(),a("/oi?mode=edit",{state:{returnTo:me()}})}},R=async(Z,ke)=>{if(confirm(`Ests seguro de ELIMINAR la ${ke}?
Esta accin borrar todas sus bancadas y no se puede deshacer.`))try{await vT(Z),e({kind:"success",title:"Eliminado",message:`Se elimin ${ke} correctamente.`}),W()}catch(qe){e({kind:"error",title:"Error",message:qe.message||"No se pudo eliminar la OI"})}},z=Z=>{Me(Z),Ze(!0)},S=async Z=>{if(he)try{Qe(!0),await X0(he,Z),e({kind:"success",message:"Excel generado"})}catch(ke){e({kind:"error",title:"Error",message:ke?.message??"No se pudo generar el Excel"})}finally{Qe(!1)}},L=async()=>{try{ze(!0);const{blob:Z,filename:ke}=await jT({q:f||void 0,dateFrom:v||void 0,dateTo:y||void 0,responsableTechNumber:T?Number(T):void 0}),qe=URL.createObjectURL(Z),We=document.createElement("a");We.href=qe,We.download=ke,document.body.appendChild(We),We.click(),URL.revokeObjectURL(qe),We.remove()}catch(Z){const ke=Z?.status,qe=Z?.message??"No se pudo exportar el CSV";e(ke===403?{kind:"error",title:"No autorizado",message:qe}:{kind:"error",title:"Error",message:qe})}finally{ze(!1)}},$=()=>{d(""),h(""),p(""),x(""),C(1),q("")},X=_===0?0:A+1,le=_===0?0:Math.min(A+ce.length,_),je=_===0?"0 registros":`Mostrando ${X}-${le} de ${_} registros`;return l.jsxs("div",{children:[l.jsx(fi,{show:Ge}),l.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[l.jsxs("div",{className:"d-flex align-items-center gap-2",children:[l.jsx("button",{className:"btn btn-primary",onClick:Xe,disabled:Ge,title:"Nueva OI",children:"Nueva OI"}),l.jsx("h1",{className:"h3 mb-0",children:"Listado de OI"})]}),l.jsxs("div",{className:"d-flex gap-2",children:[_e&&l.jsx("button",{className:"btn btn-outline-auto",onClick:L,disabled:Ge,children:lt?"Exportando...":"Exportar CSV"}),l.jsx("button",{className:"btn btn-outline-auto",onClick:$,disabled:Ge,children:"Limpiar filtros"}),l.jsx("button",{className:"btn btn-outline-auto",onClick:()=>W(),disabled:Ge,children:"Recargar"})]})]}),P&&l.jsx("div",{className:"alert alert-danger",children:B?.message??"Error cargando listado"}),l.jsxs("div",{className:"card vi-card-table",children:[l.jsxs("div",{className:"card-header d-flex flex-wrap align-items-center justify-content-between gap-2",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"h6 mb-0",children:"Registros"}),l.jsxs("small",{className:"text-muted",children:["Medidores (resultados): ",Re.medidores_resultado," | OI unicas: ",Re.oi_unicas," | Medidores (Total OI): ",Re.medidores_total_oi_unicas]})]}),l.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[l.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Buscar OI o medidor...",value:c,onChange:Z=>{d(Z.target.value),C(1)},"aria-label":"Buscar por codigo de OI o medidor"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:v,onChange:Z=>{p(Z.target.value),C(1)},"aria-label":"Filtrar desde fecha"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:y,onChange:Z=>{x(Z.target.value),C(1)},"aria-label":"Filtrar hasta fecha"}),_e&&l.jsxs("div",{className:"d-flex flex-column",children:[l.jsxs("select",{className:"form-select form-select-sm",value:T,onChange:Z=>{q(Z.target.value),C(1)},disabled:Ge||we,"aria-label":"Filtrar por responsable",title:"Responsable",children:[l.jsx("option",{value:"",children:"Responsable: Todos"}),be.map(Z=>l.jsx("option",{value:String(Z.tech_number),children:Z.full_name},Z.tech_number))]}),M?l.jsx("small",{className:"text-danger",children:M}):null]}),l.jsxs("div",{className:"d-flex align-items-center",children:[l.jsx("span",{className:"me-1 small",children:"Mostrar"}),l.jsxs("select",{className:"form-select form-select-sm",value:j,onChange:Z=>{const ke=Number(Z.target.value)||20;F(ke),C(1)},"aria-label":"Registros por pgina",children:[l.jsx("option",{value:10,children:"10"}),l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:50,children:"50"})]})]})]})]}),l.jsxs("div",{className:"card-body p-0",children:[l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-hover table-striped table-sm align-middle mb-0",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"ID"}),l.jsx("th",{children:"OI"}),l.jsx("th",{children:"Medidores"}),l.jsx("th",{children:"Q3"}),l.jsx("th",{children:"Alcance"}),l.jsx("th",{children:"PMA"}),l.jsx("th",{children:"Banco"}),l.jsx("th",{children:"Tcnico"}),l.jsx("th",{children:"Responsable"}),l.jsx("th",{children:"Creacin"}),l.jsx("th",{children:"Guardado"}),l.jsx("th",{children:"lt. mod."}),l.jsx("th",{className:"text-end",children:"Acciones"})]})}),l.jsxs("tbody",{children:[!Ge&&ce.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:13,className:"text-center text-muted py-3",children:_>0?"No hay registros que coincidan con los filtros.":"Sin registros."})}),ce.map(Z=>l.jsxs("tr",{children:[l.jsx("td",{children:Z.id}),l.jsx("td",{children:Z.code}),l.jsx("td",{title:"Mi registro / Total OI",children:`${Z.medidores_usuario??0} / ${Z.medidores_total_code??0}`}),l.jsx("td",{children:Z.q3}),l.jsx("td",{children:Z.alcance}),l.jsx("td",{children:Z.pma}),l.jsx("td",{children:Z.banco_id}),l.jsx("td",{children:Z.tech_number}),l.jsx("td",{children:Z.creator_name}),l.jsx("td",{children:V(Z.created_at)}),l.jsx("td",{children:V(Z.saved_at)}),l.jsx("td",{children:V(Z.updated_at)}),l.jsxs("td",{className:"text-end",children:[l.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>Ie(Z.id,Z.code),disabled:Ge,title:"Ver OI","aria-label":`Ver OI ${Z.code}`,children:"Ver"}),l.jsx("button",{className:"btn btn-sm btn-outline-warning me-2",onClick:()=>Ae(Z.id,Z.code),disabled:Ge,title:"Editar OI","aria-label":`Editar OI ${Z.code}`,children:"Editar"}),l.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:()=>z(Z.id),disabled:Ge,title:"Descargar Excel","aria-label":`Descargar Excel ${Z.code}`,children:"Excel"}),_e&&l.jsx("button",{className:"btn btn-sm btn-outline-danger ms-2",onClick:()=>R(Z.id,Z.code),disabled:Ge,title:"Eliminar OI (Solo Admin)",children:""})]})]},Z.id))]})]})}),ue>1&&l.jsx("nav",{className:"px-3 py-2 d-flex justify-content-center",children:l.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[l.jsx("li",{className:`page-item ${E===1?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>C(Z=>Math.max(1,Z-1)),disabled:E===1,children:""})}),Array.from({length:Ne-Ee+1},(Z,ke)=>{const qe=Ee+ke;return l.jsx("li",{className:`page-item ${qe===E?"active":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>C(qe),children:qe})},qe)}),l.jsx("li",{className:`page-item ${E===ue?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>C(Z=>Math.min(ue,Z+1)),disabled:E===ue,children:"Siguiente"})})]})})]})]}),l.jsx("div",{className:"px-3 py-2 d-flex justify-content-end",children:l.jsx("small",{className:"text-muted",children:je})}),l.jsx(zu,{show:Be,title:"Contrasea para proteger Excel",onClose:()=>{Ze(!1),Me(null)},onConfirm:Z=>{Ze(!1),S(Z)}})]})}async function HT(e){return(await Ye.get("/auth/users/paged",{params:{q:e.q||void 0,role:e.role||void 0,limit:e.limit,offset:e.offset}})).data}function VT(){const{toast:e}=al(),a=Bn(),s=Ga(a?.role,a?.username),i=s==="admin"||s==="administrator",c=wu(a),[d,f]=g.useState(!1),[h,v]=g.useState(null),[p,y]=g.useState(!1),[x,j]=g.useState(""),[F,E]=g.useState(""),[C,T]=g.useState(""),[q,A]=g.useState(20),[te,U]=g.useState(1),D=(te-1)*q,P=g.useRef(!1);g.useEffect(()=>{if(!P.current){P.current=!0;return}const Ae=setTimeout(()=>{E(x.trim()),U(1)},250);return()=>clearTimeout(Ae)},[x]);const{data:B,refetch:W,isLoading:fe,isFetching:De,error:_e}=Xr({queryKey:["users",{search:F,roleFilter:C,pageSize:q,offset:D}],queryFn:()=>HT({q:F||void 0,role:C||void 0,limit:q,offset:D}),enabled:i,placeholderData:Ae=>Ae}),{register:be,handleSubmit:we,reset:Ce}=gu(),Ue=()=>{v(null),Ce({username:"",password:"",first_name:"",last_name:"",role:"technician",tech_number:0}),f(!0)},M=Ae=>{v(Ae),Ce({username:Ae.username,password:"",first_name:Ae.first_name,last_name:Ae.last_name,role:Ga(Ae.role,Ae.username),tech_number:Ae.tech_number}),f(!0)},V=()=>{f(!1),v(null),Ce()},ae=async Ae=>{try{y(!0),await Ye.post("/auth/users",{...Ae,tech_number:Number(Ae.tech_number)}),e({kind:"success",message:"Usuario creado correctamente"}),V(),W()}catch(Xe){e({kind:"error",title:"Error",message:Xe.response?.data?.detail||"Error al crear"})}finally{y(!1)}},ce=async Ae=>{if(!h)return;const Xe=String(Ae.password||"").trim();try{if(y(!0),c){const R={username:String(Ae.username||"").trim(),first_name:String(Ae.first_name||"").trim(),last_name:String(Ae.last_name||"").trim(),role:Ae.role,tech_number:Number(Ae.tech_number)};Xe&&(R.password=Xe),await Ye.put(`/auth/users/${h.id}`,R),e({kind:"success",message:"Usuario actualizado correctamente"})}else{if(!Xe){e({kind:"error",message:"Debe ingresar una nueva contrasea"});return}await Ye.put(`/auth/users/${h.id}/password`,{new_password:Xe}),e({kind:"success",message:`Contrasea de ${h.username} actualizada`})}V(),W()}catch(R){const z=R?.response?.data?.detail||R?.message||"Error actualizando usuario";e({kind:"error",title:"Error",message:z})}finally{y(!1)}},Re=async Ae=>{if(confirm(`Eliminar usuario? ${Ae.username}?
Esto solo es posible si no tiene registros.`))try{y(!0),await Ye.delete(`/auth/users/${Ae.id}`),e({kind:"success",message:"Usuario eliminado"}),W()}catch(Xe){e({kind:"error",title:"No se puede eliminar",message:Xe.response?.data?.detail||Xe.message})}finally{y(!1)}},_=g.useMemo(()=>B?.items??[],[B]),K=B?.total??0,ue=B?.limit??q,Q=ue>0?Math.ceil(K/ue):1,Ee=10;let Ne=1,Be=Q;if(Q>Ee){const Ae=Math.floor(Ee/2);Ne=Math.max(1,te-Ae),Be=Ne+Ee-1,Be>Q&&(Be=Q,Ne=Math.max(1,Be-Ee+1))}const Ze=K===0?0:D+1,he=K===0?0:Math.min(D+_.length,K),Me=K===0?"0 registros":`Mostrando ${Ze}-${he} de ${K} registros`,Fe=fe||De||p,Qe=()=>{j(""),E(""),T(""),U(1),A(20)},lt=!!h,ze=lt&&!c,Ge=!lt||!c,me=(h?.username??"").toLowerCase()==="admin",Ie=lt?c?"Dejar en blanco para mantener la actual.":"Ingrese una nueva contrasea.":void 0;return i?l.jsxs("div",{className:"container-fluid p-4 vi-oi-light",children:[l.jsx(fi,{show:Fe}),l.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[l.jsx("h2",{className:"h4 m-0",children:"Gestin de Usuarios"}),l.jsx("button",{className:"btn btn-primary",onClick:Ue,disabled:Fe,children:"+ Nuevo Usuario"})]}),l.jsxs("div",{className:"d-flex flex-wrap align-items-end gap-2 mb-3",children:[l.jsxs("div",{style:{minWidth:260},children:[l.jsx("label",{className:"form-label small mb-1",children:"Buscar"}),l.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Usuario o rol...",value:x,onChange:Ae=>{j(Ae.target.value),U(1)}})]}),l.jsxs("div",{style:{minWidth:220},children:[l.jsx("label",{className:"form-label small mb-1",children:"Rol"}),l.jsxs("select",{className:"form-select form-select-sm",value:C,onChange:Ae=>{T(Ae.target.value),U(1)},children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"admin",children:"admin"}),l.jsx("option",{value:"administrator",children:"administrator"}),l.jsx("option",{value:"technician",children:"technician"}),l.jsx("option",{value:"standard",children:"standard"}),l.jsx("option",{value:"user",children:"user (legacy)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"form-label small mb-1",children:"Mostrar"}),l.jsxs("select",{className:"form-select form-select-sm",value:q,onChange:Ae=>{const Xe=Number(Ae.target.value)||20;A(Xe),U(1)},children:[l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"})]})]}),l.jsxs("div",{className:"d-flex gap-2",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:Qe,disabled:Fe,children:"Limpiar filtros"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>W(),disabled:Fe,children:"Recargar"})]})]}),_e?l.jsx("div",{className:"alert alert-danger",role:"alert",children:"No se pudo cargar la lista de usuarios."}):null,l.jsx("div",{className:"card shadow-sm",children:l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-hover align-middle mb-0",children:[l.jsx("thead",{className:"vi-surface-2",children:l.jsxs("tr",{children:[l.jsx("th",{children:"Usuario"}),l.jsx("th",{children:"Nombre"}),l.jsx("th",{children:"Rol"}),l.jsx("th",{children:"N Tcnico"}),l.jsx("th",{className:"text-end",children:"Acciones"})]})}),l.jsxs("tbody",{children:[_.map(Ae=>l.jsxs("tr",{children:[l.jsx("td",{className:"fw-bold",children:Ae.username}),l.jsxs("td",{children:[Ae.first_name," ",Ae.last_name]}),l.jsx("td",{children:(()=>{const Xe=Ga(Ae.role,Ae.username),R=Ae.username.toLowerCase()==="admin"?"Superusuario":Xe==="administrator"?"Administrador":Xe==="technician"?"Tcnico":"Estndar",z=Ae.username.toLowerCase()==="admin"?"bg-danger":Xe==="administrator"?"bg-warning vi-text-contrast":Xe==="technician"?"bg-info vi-text-contrast":"bg-secondary";return l.jsx("span",{className:`badge ${z}`,children:R})})()}),l.jsx("td",{children:Ae.tech_number}),l.jsxs("td",{className:"text-end",children:[l.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",title:"Actualizar usuario","aria-label":`Actualizar ${Ae.username}`,disabled:Fe||Ae.username==="admin"||!c&&Ga(Ae.role,Ae.username)==="administrator",onClick:()=>M(Ae),children:l.jsx("i",{className:"ti ti-edit"})}),l.jsx("button",{className:"btn btn-sm btn-outline-danger",title:"Eliminar usuario","aria-label":`Eliminar ${Ae.username}`,disabled:Fe||Ae.username==="admin"||!c&&Ga(Ae.role,Ae.username)==="administrator",onClick:()=>Re(Ae),children:l.jsx("i",{className:"ti ti-trash"})})]})]},Ae.id)),_.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"text-center py-4",children:"No hay usuarios registrados"})})]})]})})}),Q>1&&l.jsx("nav",{className:"px-3 py-2 d-flex justify-content-center",children:l.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[l.jsx("li",{className:`page-item ${te===1?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>U(Ae=>Math.max(1,Ae-1)),disabled:te===1,children:"Anterior"})}),Array.from({length:Be-Ne+1},(Ae,Xe)=>{const R=Ne+Xe;return l.jsx("li",{className:`page-item ${R===te?"active":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>U(R),children:R})},R)}),l.jsx("li",{className:`page-item ${te===Q?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>U(Ae=>Math.min(Q,Ae+1)),disabled:te===Q,children:"Siguiente"})})]})}),l.jsx("div",{className:"px-3 py-2 d-flex justify-content-end",children:l.jsx("small",{className:"text-muted",children:Me})}),d&&l.jsx("div",{className:"modal d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:l.jsx("div",{className:"modal-dialog",children:l.jsxs("form",{className:"modal-content",onSubmit:we(lt?ce:ae),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{className:"modal-title",children:lt?"Actualizar Usuario":"Nuevo Usuario"}),l.jsx("button",{type:"button",className:"btn-close",onClick:V})]}),l.jsxs("div",{className:"modal-body row g-3",children:[l.jsxs("div",{className:"col-6",children:[l.jsx("label",{className:"form-label",children:"Usuario"}),l.jsx("input",{className:"form-control",disabled:ze,...be("username",{required:!0})})]}),l.jsx("div",{className:"col-6",children:l.jsx(go,{label:"Contrasea",...be("password",{required:Ge}),autoComplete:"new-password",helpText:Ie})}),l.jsxs("div",{className:"col-6",children:[l.jsx("label",{className:"form-label",children:"Nombre"}),l.jsx("input",{className:"form-control",disabled:ze,...be("first_name",{required:!0})})]}),l.jsxs("div",{className:"col-6",children:[l.jsx("label",{className:"form-label",children:"Apellido"}),l.jsx("input",{className:"form-control",disabled:ze,...be("last_name",{required:!0})})]}),l.jsxs("div",{className:"col-6",children:[l.jsx("label",{className:"form-label",children:"Rol"}),l.jsxs("select",{className:"form-select",disabled:ze,...be("role"),children:[me?l.jsx("option",{value:"admin",children:"Superusuario"}):null,l.jsx("option",{value:"technician",children:"Tecnico"}),l.jsx("option",{value:"standard",children:"Estandar"}),c?l.jsx("option",{value:"administrator",children:"Administrador"}):null]})]}),l.jsxs("div",{className:"col-6",children:[l.jsx("label",{className:"form-label",children:"N Tecnico"}),l.jsx("input",{type:"number",className:"form-control",disabled:ze,...be("tech_number",{required:!0})}),l.jsx("div",{className:"form-text small",children:"Use 0 si no aplica (admin/estandar)"})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:V,disabled:Fe,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Fe,children:lt?"Actualizar":"Guardar"})]})]})})})]}):l.jsx("div",{className:"p-4 text-danger",children:"Acceso no autorizado"})}function ZT(){const{toast:e}=al(),[a,s]=g.useState(""),[i,c]=g.useState(""),[d,f]=g.useState(!1),h=a.trim().length>0&&i.trim().length>0,v=async p=>{if(p.preventDefault(),!!h)try{f(!0),await UE(a.trim(),i.trim()),e({kind:"success",message:"Contrasea actualizada"}),s(""),c("")}catch(y){e({kind:"error",title:"Error",message:y?.message??"No se pudo cambiar la contrasea"})}finally{f(!1)}};return l.jsx("div",{className:"container py-4",children:l.jsx("div",{className:"row justify-content-center",children:l.jsx("div",{className:"col-md-6",children:l.jsxs("div",{className:"card shadow-sm",children:[l.jsx("div",{className:"card-header",children:l.jsx("h5",{className:"mb-0",children:"Cambiar mi contrasea"})}),l.jsxs("form",{onSubmit:v,children:[l.jsxs("div",{className:"card-body",children:[l.jsx("div",{className:"mb-3",children:l.jsx(go,{label:"Contrasea actual",inputId:"oldPwd",value:a,onChange:p=>s(p.target.value),required:!0,autoComplete:"current-password"})}),l.jsx("div",{className:"mb-3",children:l.jsx(go,{label:"Nueva contrasea",inputId:"newPwd",value:i,onChange:p=>c(p.target.value),required:!0,autoComplete:"new-password",helpText:"Usa una contrasea segura y que recuerdes."})})]}),l.jsxs("div",{className:"card-footer d-flex justify-content-end gap-2",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:()=>{s(""),c("")},disabled:d,children:"Limpiar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!h||d,children:"Guardar"})]})]})]})})})})}async function GT(e){return(await Ye.get("/admin/permisos/paged",{params:{q:e.q||void 0,role:e.role||void 0,limit:e.limit,offset:e.offset}})).data}async function PT(e,a){const{data:s}=await Ye.put(`/admin/permisos/${e}`,{allowedModules:a});return s}const Vm=[{id:"oi_formulario",label:"Registro OI",path:"/oi"},{id:"oi_listado",label:"Listado OI",path:"/oi/list"},{id:"tools_vima_lista",label:"VIMA  LISTA",path:"/oi/tools/vima-to-lista"},{id:"tools_actualizacion_bases",label:"Actualizacin de Bases",path:"/oi/tools/actualizacion-base"},{id:"tools_historial_ac",label:"Historial A-C",path:"/oi/tools/formato-ac/history"},{id:"tools_consol_correlativo",label:"Consolidacin (Correlativo)",path:"/oi/tools/consolidacion/correlativo"},{id:"tools_consol_no_correlativo",label:"Consolidacin (No Correlativo)",path:"/oi/tools/consolidacion/no-correlativo"},{id:"future_ot",label:"Orden de Trabajo (FUTURO)",path:"FUTURO"},{id:"logistica",label:"Logstica",path:"/logistica/log01/excel"},{id:"logistica_history",label:"Historial de consolidaciones",path:"/logistica/log01/history"},{id:"logistica_pdfs",label:"Filtrado de Cert.PDFs",path:"/logistica/log02/pdfs"},{id:"future_smart",label:"Smart (FUTURO)",path:"FUTURO"},{id:"users_admin",label:"Gestin de usuarios",path:"/users"},{id:"admin_permisos",label:"Permisos",path:"/admin/permisos"}],Iy=[{id:"oi",label:"OI",moduleIds:["oi_formulario","oi_listado","tools_vima_lista","tools_actualizacion_bases","tools_historial_ac","tools_consol_correlativo","tools_consol_no_correlativo","future_ot"]},{id:"logistica",label:"Logstica",moduleIds:["logistica","logistica_history","logistica_pdfs"]},{id:"smart",label:"Smart (FUTURO)",moduleIds:["future_smart"]},{id:"usuarios",label:"Usuarios",moduleIds:["users_admin"]},{id:"administrar",label:"Administrar",moduleIds:["admin_permisos"]}];function $y(e){const a=new Set(Vm.map(c=>c.id)),s=new Set,i=[];for(const c of e){const d=c==="future_logistica"?"logistica":c;!a.has(d)||s.has(d)||(s.add(d),i.push(d))}return i}const Fy="admin_permisos:collapsed_groups";function QT(){const e=rh(),{toast:a}=al(),[s,i]=g.useState(""),[c,d]=g.useState(""),[f,h]=g.useState(""),[v,p]=g.useState(20),[y,x]=g.useState(1),j=(y-1)*v,F=g.useRef(!1);g.useEffect(()=>{if(!F.current){F.current=!0;return}const Q=setTimeout(()=>{d(s.trim()),x(1)},250);return()=>clearTimeout(Q)},[s]);const{data:E,isLoading:C,error:T,refetch:q}=Xr({queryKey:["admin","permisos",{search:c,roleFilter:f,pageSize:v,offset:j}],queryFn:()=>GT({q:c||void 0,role:f||void 0,limit:v,offset:j}),placeholderData:Q=>Q}),[A,te]=g.useState(null),[U,D]=g.useState([]),P=(A?.username??"").toLowerCase()==="admin",[B,W]=g.useState(()=>{const Q=Object.fromEntries(Iy.map(Ee=>[Ee.id,!0]));try{const Ee=localStorage.getItem(Fy);if(!Ee)return Q;const Ne=JSON.parse(Ee);return!Ne||typeof Ne!="object"?Q:{...Q,...Ne}}catch{return Q}}),fe=(Q,Ee)=>{W(Ne=>{const Be={...Ne,[Q]:Ee};try{localStorage.setItem(Fy,JSON.stringify(Be))}catch{}return Be})},De=Q=>{te(Q),D($y(Q.allowedModules??[]))},_e=()=>{te(null),D([])},be=h_({mutationFn:async Q=>PT(Q.userId,Q.allowedModules),onSuccess:async()=>{await e.invalidateQueries({queryKey:["admin","permisos"]}),a({kind:"success",title:"Permisos",message:"Permisos actualizados."}),_e()},onError:Q=>{const Ee=Q?.response?.data?.detail??Q?.message??"No se pudieron actualizar los permisos.";a({kind:"error",title:"Permisos",message:String(Ee)})}}),we=g.useMemo(()=>E?.items??[],[E]),Ce=E?.total??0,Ue=E?.limit??v,M=Ue>0?Math.ceil(Ce/Ue):1,V=Ce===0?0:j+1,ae=Ce===0?0:Math.min(j+we.length,Ce),ce=Ce===0?"0 registros":`Mostrando ${V}-${ae} de ${Ce} registros`,Re=Q=>{D(Ee=>{const Ne=new Set(Ee);return Ne.has(Q)?Ne.delete(Q):Ne.add(Q),Array.from(Ne)})},_=Q=>{D(Ee=>{const Ne=new Set(Ee),Be=Q.moduleIds.filter(he=>Vm.some(Me=>Me.id===he));if(Be.length>0&&Be.every(he=>Ne.has(he)))for(const he of Be)Ne.delete(he);else for(const he of Be)Ne.add(he);return Array.from(Ne)})},K=()=>{A&&be.mutate({userId:A.id,allowedModules:$y(U)})},ue=()=>{i(""),d(""),h(""),x(1),p(20)};return l.jsxs("div",{className:"container-fluid",children:[l.jsx(fi,{show:be.isPending,label:"Guardando permisos..."}),l.jsx("div",{className:"row",children:l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Administrar  Permisos"}),l.jsx("p",{className:"text-muted mB-20",children:"Define qu mdulos puede ver cada usuario (el acceso por URL tambin se bloquea)."}),l.jsxs("div",{className:"d-flex flex-wrap align-items-end gap-2 mb-3",children:[l.jsxs("div",{style:{minWidth:260},children:[l.jsx("label",{className:"form-label small mb-1",children:"Buscar"}),l.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Usuario, nombre o rol...",value:s,onChange:Q=>{i(Q.target.value),x(1)}})]}),l.jsxs("div",{style:{minWidth:220},children:[l.jsx("label",{className:"form-label small mb-1",children:"Rol"}),l.jsxs("select",{className:"form-select form-select-sm",value:f,onChange:Q=>{h(Q.target.value),x(1)},children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"admin",children:"admin"}),l.jsx("option",{value:"administrator",children:"administrator"}),l.jsx("option",{value:"technician",children:"technician"}),l.jsx("option",{value:"standard",children:"standard"}),l.jsx("option",{value:"user",children:"user (legacy)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"form-label small mb-1",children:"Mostrar"}),l.jsxs("select",{className:"form-select form-select-sm",value:v,onChange:Q=>{const Ee=Number(Q.target.value)||20;p(Ee),x(1)},children:[l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"})]})]}),l.jsxs("div",{className:"d-flex gap-2",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:ue,disabled:C||be.isPending,children:"Limpiar filtros"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>q(),disabled:C||be.isPending,children:"Recargar"})]})]}),C?l.jsx("div",{className:"text-muted",children:"Cargando usuarios..."}):T?l.jsx("div",{className:"alert alert-danger",role:"alert",children:"No se pudo cargar la lista de usuarios."}):l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm align-middle",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Usuario"}),l.jsx("th",{children:"Rol"}),l.jsx("th",{className:"text-end",children:"Acciones"})]})}),l.jsxs("tbody",{children:[we.map(Q=>l.jsxs("tr",{children:[l.jsx("td",{children:Q.username}),l.jsx("td",{children:Q.role}),l.jsx("td",{className:"text-end",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>De(Q),disabled:(Q.username??"").toLowerCase()==="admin",children:"Editar"})})]},Q.id)),we.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"text-muted",children:"No hay usuarios."})}):null]})]})}),l.jsx("div",{className:"d-flex justify-content-end mt-2",children:l.jsx("small",{className:"text-muted",children:ce})}),M>1&&l.jsx("nav",{className:"mt-2 d-flex justify-content-center",children:l.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[l.jsx("li",{className:`page-item ${y===1?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>x(Q=>Math.max(1,Q-1)),disabled:y===1,children:""})}),l.jsx("li",{className:"page-item disabled",children:l.jsxs("span",{className:"page-link",children:["Pgina ",y," / ",M]})}),l.jsx("li",{className:`page-item ${y===M?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>x(Q=>Math.min(M,Q+1)),disabled:y===M,children:"Siguiente"})})]})})]})})}),A&&l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"permsModalTitle",onClick:Q=>{Q.target===Q.currentTarget&&_e()},children:l.jsx("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("h5",{id:"permsModalTitle",className:"modal-title",children:["Permisos de ",A.username]}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:_e})]}),l.jsxs("div",{className:"modal-body",children:[P?l.jsxs("div",{className:"alert alert-info",role:"alert",children:["El superusuario ",l.jsx("b",{children:"admin"})," siempre tiene acceso total y no se puede limitar por permisos."]}):null,Iy.map(Q=>{const Ee=Q.moduleIds.map(Me=>Vm.find(Fe=>Fe.id===Me)).filter(Boolean),Ne=Ee.filter(Me=>U.includes(Me.id)).length,Be=Ee.length>0&&Ne===Ee.length,Ze=Ne>0&&!Be,he=!!B[Q.id];return l.jsxs("div",{className:"mb-3",children:[l.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[l.jsxs("div",{className:"form-check mb-0",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:`grp-${A.id}-${Q.id}`,checked:Be,ref:Me=>{Me&&(Me.indeterminate=Ze)},onChange:()=>_(Q),disabled:be.isPending||P}),l.jsxs("label",{className:"form-check-label fw-semibold",htmlFor:`grp-${A.id}-${Q.id}`,children:[Q.label,l.jsxs("span",{className:"text-muted ms-2 small",children:["(",Ne,"/",Ee.length,")"]})]})]}),l.jsx("div",{className:"btn-group btn-group-sm",role:"group","aria-label":`Acciones ${Q.label}`,children:l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:()=>fe(Q.id,!he),disabled:be.isPending,children:he?"Expandir":"Contraer"})})]}),!he&&l.jsx("div",{className:"mt-2 ms-4 ps-3 border-start border-2 border-light",children:l.jsx("div",{className:"row",children:Ee.map(Me=>l.jsx("div",{className:"col-md-6 mb-2",children:l.jsxs("div",{className:"form-check",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:`perm-${A.id}-${Me.id}`,checked:U.includes(Me.id),onChange:()=>Re(Me.id),disabled:be.isPending||P}),l.jsxs("label",{className:"form-check-label",htmlFor:`perm-${A.id}-${Me.id}`,children:[Me.label," ",l.jsxs("span",{className:"text-muted",children:["(",Me.path,")"]})]})]})},Me.id))})})]},Q.id)}),l.jsx("div",{className:"form-text mt-2",children:"Nota: Cambiar contrasea y Home siempre estn disponibles para todos."})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:_e,disabled:be.isPending,children:"Cancelar"}),l.jsx("button",{type:"button",className:"btn btn-primary",onClick:K,disabled:be.isPending||P,children:"Guardar"})]})]})})})]})}function YT(e){const a=Ye.defaults.baseURL??window.location.origin;return`${String(a).replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`}async function KT(e,a){return Ye.post("/integrations/vima-to-lista/dry-run-upload",e,{signal:a})}async function XT(e,a){return Ye.post("/integrations/vima-to-lista/upload",e,{responseType:"blob",signal:a})}async function Hy(e,a,s){const i=YT(`/integrations/vima-to-lista/progress/${e}`),c=Bn()?.token,d=await fetch(i,{method:"GET",headers:c?{Authorization:`Bearer ${c}`}:void 0,signal:s});if(!d.ok||!d.body)throw new Error(`No se pudo abrir el stream de progreso (${d.status})`);const f=d.body.getReader(),h=new TextDecoder("utf-8");let v="";for(;;){const{value:p,done:y}=await f.read();if(y)break;v+=h.decode(p,{stream:!0});let x;for(;(x=v.indexOf(`
`))>=0;){const j=v.slice(0,x).trim();if(v=v.slice(x+1),!!j)try{a(JSON.parse(j))}catch{}}}}function eN(e){return`${e.name}::${e.size}::${e.lastModified}`}function JT(e){return e.normalize("NFKC").trim().replace(/\s+/g,"").toLowerCase()}function uu(e){return JT(e.name)}function WT(e){if(!e)return null;const a=e.split(",").map(s=>s.trim().toLowerCase()).filter(Boolean);return a.length===0?null:a}function Ch(e,a){const s=WT(a);if(!s)return e;const i=s.filter(c=>c.startsWith("."));return i.length===0?e:e.filter(c=>i.some(d=>c.name.toLowerCase().endsWith(d)))}function e2(e,a){if(a.length===0)return{merged:e,added:[],duplicates:[]};const s=[...e],i=[],c=[],d=new Set(e.map(uu));for(const f of a){const h=uu(f);if(d.has(h)){c.push(f);continue}d.add(h),s.push(f),i.push(f)}return{merged:s,added:i,duplicates:c}}function yo({label:e,accept:a,disabled:s=!1,file:i,onChange:c}){const d=g.useRef(null),f=g.useRef(0),[h,v]=g.useState(!1),p=()=>{s||d.current?.click()},y=()=>{s||(d.current&&(d.current.value=""),c(null))},x=T=>{c(T.target.files?.[0]??null),T.currentTarget.value=""},j=T=>{T.preventDefault(),T.stopPropagation(),!s&&(f.current+=1,v(!0))},F=T=>{T.preventDefault(),T.stopPropagation()},E=T=>{T.preventDefault(),T.stopPropagation(),!s&&(f.current=Math.max(0,f.current-1),f.current===0&&v(!1))},C=T=>{if(T.preventDefault(),T.stopPropagation(),f.current=0,v(!1),s)return;const q=T.dataTransfer?.files?Array.from(T.dataTransfer.files):[],te=Ch(q,a)[0]??null;te&&(d.current&&(d.current.value=""),c(te))};return l.jsxs("div",{children:[l.jsx("label",{className:"form-label",children:e}),l.jsx("input",{ref:d,className:"d-none",type:"file",accept:a,onChange:x,disabled:s}),l.jsx("div",{className:`vi-file-drop-target${h?" is-dragover":""}`,onDragEnter:j,onDragOver:F,onDragLeave:E,onDrop:C,"aria-disabled":s?"true":"false",children:l.jsxs("div",{className:"input-group",children:[l.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:p,disabled:s,children:"Examinar"}),l.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:y,disabled:s||!i,children:"Eliminar"}),l.jsx("input",{className:"form-control",type:"text",readOnly:!0,value:i?i.name:"No se ha seleccionado ningn archivo."})]})})]})}const t2={status:"estado",progress:"progreso",complete:"completado",error:"error"},n2={file:"archivo",file_done:"archivo procesado",file_error:"archoivo con error",render:"generando",failed:"fallido",received:"recibido",loading:"cargando",upload:"subida",analysis:"anlisis",init:"iniciando",processing:"procesamiento",opening:"abriendo",reading:"leyendo",writing:"escribiendo",saving:"guardando",cancelled:"cancelado",canceled:"cancelado",copied:"copiado",skipped:"omitido",skipped_incremental:"omitido (incremental)",stopped_blank:"detenido (en blanco)",complete:"completado",done:"finalizado",error:"error"},a2=[[/\bcomplete(d)?\b/gi,"completado"],[/\bstopped_blank\b/gi,"detenido (en blanco)"],[/\bskipped_incremental\b/gi,"omitido (incremental)"],[/\bskipped\b/gi,"omitido"],[/\bprocessing\b/gi,"procesando"],[/\bopening\b/gi,"abriendo"],[/\breading\b/gi,"leyendo"],[/\bwriting\b/gi,"escribiendo"],[/\bsaving\b/gi,"guardando"],[/\breceived\b/gi,"recibido"],[/\bloading\b/gi,"cargando"],[/\bupload(ing)?\b/gi,"subiendo"],[/\bdownload(ing)?\b/gi,"descargando"],[/\bmerge(s|d|ing)?\b/gi,"consolidando"]];function tN(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function si(e){if(!e)return"";const a=e.toLowerCase();return tN(t2[a]??e)}function tl(e){if(!e)return"";const a=e.trim().toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),s=e.trim().replace(/[_-]+/g," ");return tN(n2[a]??ll(s))}function ll(e){if(!e)return"";let a=e;for(const[s,i]of a2)a=a.replace(s,i);return a}function s2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function r2(e,a){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(s)}function l2(){const[e,a]=g.useState(null),[s,i]=g.useState(null),[c,d]=g.useState(""),[f,h]=g.useState(11),[v,p]=g.useState(11),[y,x]=g.useState(!0),[j,F]=g.useState(!0),[E,C]=g.useState(!0),[T,q]=g.useState(!0),[A,te]=g.useState(!1),[U,D]=g.useState(""),[P,B]=g.useState(null),[W,fe]=g.useState(null),[De,_e]=g.useState(null),[be,we]=g.useState([]),[Ce,Ue]=g.useState(""),M=g.useRef(null),V=g.useRef(null),[ae,ce]=g.useState(!1),[Re,_]=g.useState(!1),[K,ue]=g.useState("Ingresa la contrasea de apertura del archivo y vuelve a intentar."),Q=g.useMemo(()=>!!e&&!!s&&!P,[e,s,P]);function Ee(ze){we(me=>[ze,...me].slice(0,200));const Ge=typeof ze.percent=="number"?ze.percent:typeof ze.progress=="number"?ze.progress:null;Ge!=null&&Number.isFinite(Ge)&&_e(Math.max(0,Math.min(100,Ge)))}function Ne(){M.current?.abort(),M.current=null}function Be(){P&&Ne()}function Ze(ze,Ge){if(!e||!s)throw new Error("Faltan archivos");const me=new FormData;me.append("vima_file",e),me.append("lista_file",s);const Ie=(Ge??c).trim();return Ie&&me.append("vima_password",Ie),me.append("vima_start_row",String(f)),me.append("lista_start_row",String(v)),me.append("require_all_g_to_n",y?"true":"false"),me.append("incremental",j?"true":"false"),me.append("strict_incremental",E?"true":"false"),me.append("replicate_merges",T?"true":"false"),me.append("update_existing_periodo",A?"true":"false"),U.trim()&&me.append("oi_pattern",U.trim()),me.append("operation_id",ze),me}function he(){V.current=null,_(!1)}function Me(ze,Ge){V.current=ze,ue(Ge),_(!0)}function Fe(ze,Ge){if(!bt.isAxiosError(ze)){Ue(String(ze));return}const me=ze;if(me.code==="ERR_CANCELED")return;const Ie=me.response?.headers?.["x-code"],Ae=me.response?.data?.detail??me.message;if(Ie==="PASSWORD_REQUIRED"){Ue(""),Me(Ge,"El archivo VIMA est protegido. Ingresa la contrasea de apertura para continuar.");return}if(Ie==="WRONG_PASSWORD"){Ue(""),Me(Ge,"Contrasea incorrecta. Intenta nuevamente.");return}Ue(String(Ae))}async function Qe(ze){Ue(""),fe(null),we([]),_e(0);const Ge=crypto.randomUUID();M.current=new AbortController,Hy(Ge,Ee,M.current.signal).catch(()=>{}),B("dry");try{const me=Ze(Ge,ze?.passwordOverride),Ie=await KT(me,M.current.signal);fe(Ie.data)}catch(me){Fe(me,"dry")}finally{Ne(),B(null)}}async function lt(ze){Ue(""),we([]),_e(0);const Ge=crypto.randomUUID();M.current=new AbortController,Hy(Ge,Ee,M.current.signal).catch(()=>{}),B("upload");try{const me=Ze(Ge,ze?.passwordOverride),Ie=await XT(me,M.current.signal),Ae=Ie.headers?.["content-disposition"],Xe=s2(Ae)??"LISTA_SALIDA.xlsx";r2(Ie.data,Xe)}catch(me){Fe(me,"upload")}finally{Ne(),B(null)}}return l.jsxs("div",{className:"container-fluid",children:[l.jsxs("div",{className:"row gap-20",children:[l.jsx("div",{className:"col-md-7",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-20",children:"Integracin VIMA  LISTA"}),l.jsx("div",{className:"mB-15",children:l.jsx(yo,{label:"Archivo VIMA (.xlsm)",accept:".xlsm,.xlsx",file:e,onChange:a,disabled:!!P})}),l.jsx("div",{className:"mB-15",children:l.jsx(yo,{label:"Archivo LISTA (.xlsx)",accept:".xlsx,.xlsm",file:s,onChange:i,disabled:!!P})}),l.jsxs("div",{className:"mB-15",children:[l.jsx("label",{className:"form-label",children:"Contrasea VIMA (si aplica)"}),l.jsx("input",{className:"form-control",type:"password",value:c,onChange:ze=>d(ze.target.value),placeholder:"(opcional)"})]}),ae?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Fila inicio VIMA"}),l.jsx("input",{className:"form-control",type:"number",value:f,onChange:ze=>h(Number(ze.target.value))})]}),l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Fila inicio LISTA"}),l.jsx("input",{className:"form-control",type:"number",value:v,onChange:ze=>p(Number(ze.target.value))})]})]}),l.jsxs("div",{className:"mB-15",children:[l.jsx("label",{className:"form-label",children:"Patrn OI (regex, opcional)"}),l.jsx("input",{className:"form-control",value:U,onChange:ze=>D(ze.target.value),placeholder:"Ej: OI-(\\\\d{4})-(\\\\d+)"}),l.jsx("small",{className:"text-muted",children:"Nota: si pegas barras invertidas, el backend ya normaliza doble backslash."})]}),l.jsxs("div",{className:"row mT-10",children:[l.jsx("div",{className:"col-md-6 mB-10",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"requireAll",checked:y,onChange:ze=>x(ze.target.checked)}),l.jsx("label",{className:"form-check-label",htmlFor:"requireAll",children:"Requerir GN completos"})]})}),l.jsx("div",{className:"col-md-6 mB-10",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateMerges",checked:T,onChange:ze=>q(ze.target.checked)}),l.jsx("label",{className:"form-check-label",htmlFor:"replicateMerges",children:"Replicar merges"})]})}),l.jsx("div",{className:"col-md-6 mB-10",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"incremental",checked:j,onChange:ze=>F(ze.target.checked)}),l.jsx("label",{className:"form-check-label",htmlFor:"incremental",children:"Incremental"})]})}),l.jsx("div",{className:"col-md-6 mB-10",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"strictIncremental",checked:E,onChange:ze=>C(ze.target.checked),disabled:!j}),l.jsx("label",{className:"form-check-label",htmlFor:"strictIncremental",children:"Incremental estricto"})]})}),l.jsx("div",{className:"col-md-6 mB-10",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"updateExistingPeriodo",checked:A,onChange:ze=>te(ze.target.checked),disabled:!j}),l.jsx("label",{className:"form-check-label",htmlFor:"updateExistingPeriodo",children:"Actualizar periodo en OIs existentes"})]})})]})]}):null,Ce&&l.jsx("div",{className:"alert alert-danger mT-15",role:"alert",children:Ce}),l.jsx("div",{className:"d-flex justify-content-end mT-10",children:l.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>ce(ze=>!ze),disabled:!!P,children:ae?"Menos Opciones":"Ms Opciones"})}),l.jsxs("div",{className:"d-flex gap-10 mT-20",children:[l.jsx("button",{className:"btn btn-primary",disabled:!Q,onClick:()=>void lt(),children:P==="upload"?"Procesando...":"Procesar y Descargar"}),l.jsx("button",{className:"btn btn-outline-danger",disabled:!P,onClick:Be,children:"Cancelar"}),l.jsx("button",{className:"btn btn-outline-primary",disabled:!Q,onClick:()=>void Qe(),children:P==="dry"?"Analizando...":"Analizar"})]}),W&&l.jsxs("div",{className:"mT-20",children:[l.jsx("h5",{className:"c-grey-900",children:"Resumen"}),l.jsxs("ul",{className:"mB-0",children:[l.jsxs("li",{children:["Filas a copiar: ",l.jsx("b",{children:W.would_copy})]}),l.jsxs("li",{children:["Fila inicio escritura (LISTA): ",l.jsx("b",{children:W.start_write_row})]}),l.jsxs("li",{children:["ltimo OI en LISTA: ",l.jsx("b",{children:String(W.last_oi_in_lista??"-")})]}),l.jsxs("li",{children:["Primer OI a copiar: ",l.jsx("b",{children:String(W.first_oi_to_copy??"-")})]}),l.jsxs("li",{children:["ltimo OI a copiar: ",l.jsx("b",{children:String(W.last_oi_to_copy??"-")})]})]})]})]})}),l.jsx("div",{className:"col-md-5",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),P?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress mB-15",style:{height:12},children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${De??0}%`},"aria-valuenow":De??0,"aria-valuemin":0,"aria-valuemax":100})}),l.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:be.length===0?l.jsx("div",{className:"text-muted",children:"Sin eventos an."}):l.jsx("ul",{className:"list-unstyled mB-0",children:be.map((ze,Ge)=>l.jsxs("li",{className:"mB-10",children:[l.jsxs("div",{children:[l.jsx("b",{children:si(ze.type)})," ",ze.stage?l.jsxs("span",{className:"text-muted",children:["[",tl(ze.stage),"]"]}):null,typeof ze.percent=="number"?l.jsxs("span",{className:"text-muted",children:["  ",ze.percent.toFixed(1),"%"]}):null]}),l.jsx("div",{className:"text-muted",children:ll(ze.message??ze.detail??"")}),ze.code?l.jsxs("div",{className:"text-muted",children:["Cdigo: ",ze.code]}):null]},Ge))})})]})})]}),l.jsx(zu,{show:Re,title:"Archivo protegido",confirmLabel:"Continuar",helpText:K,onClose:he,onConfirm:ze=>{d(ze),_(!1);const Ge=V.current;V.current=null,Ge&&(Ge==="dry"?Qe({passwordOverride:ze}):lt({passwordOverride:ze}))}})]})}function du(e){const a=e,s=String(a?.name||""),i=String(a?.message||a||"");return s==="AbortError"||/aborted/i.test(i)||/abort/i.test(i)}function mi(e){const a=Ye.defaults.baseURL??window.location.origin;return`${String(a).replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`}async function Oh(e,a){if(!e.body)return;const s=e.body.getReader(),i=new TextDecoder("utf-8");let c="";try{for(;;){let f;try{f=await s.read()}catch(y){if(du(y))return;throw y}const{value:h,done:v}=f;if(v)break;if(!h||h.length===0)continue;c+=i.decode(h,{stream:!0});let p;for(;(p=c.indexOf(`
`))>=0;){const y=c.slice(0,p).trim();if(c=c.slice(p+1),!!y)try{const x=JSON.parse(y);x&&x.progress!=null&&x.percent==null&&(x.percent=x.progress),x&&x.percent!=null&&x.progress==null&&(x.progress=x.percent),a(x)}catch{}}}const d=c.trim();if(d)try{const f=JSON.parse(d);f&&f.progress!=null&&f.percent==null&&(f.percent=f.progress),f&&f.percent!=null&&f.progress==null&&(f.progress=f.percent),a(f)}catch{}}catch(d){if(du(d))return;throw d}}function jr(e,a,s){const i=new Error(e);return a!=null&&(i.status=a),s&&(i.code=s),i}async function Rh(e,a,s){const i=mi(`/integrations/vima-to-lista/progress/${e}`),c=Bn()?.token,d=await fetch(i,{method:"GET",headers:{...c?{Authorization:`Bearer ${c}`}:{},Accept:"application/x-ndjson","Cache-Control":"no-cache"},signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw jr(`No se pudo abrir el stream (${d.status})`,d.status,f)}await Oh(d,a)}async function i2(e,a,s){const i=mi(`/logistica/log01/progress/${e}`),c=Bn()?.token,d=await fetch(i,{method:"GET",headers:{...c?{Authorization:`Bearer ${c}`}:{},Accept:"application/x-ndjson","Cache-Control":"no-cache"},signal:s});if(!d.ok){const y=d.headers.get("X-Code")??void 0;throw jr(`No se pudo abrir el stream (${d.status})`,d.status,y)}if(!(d.headers.get("Content-Type")??"").includes("application/x-ndjson"))throw jr("Stream no es NDJSON",d.status);if(!d.body)throw jr("Stream sin body",d.status);const h=d.body.getReader(),v=new TextDecoder("utf-8");let p="";try{for(;;){let x;try{x=await h.read()}catch(C){if(du(C))return;throw C}const{value:j,done:F}=x;if(F)break;if(!j||j.length===0)continue;p+=v.decode(j,{stream:!0});let E;for(;(E=p.indexOf(`
`))>=0;){const C=p.slice(0,E).trim();if(p=p.slice(E+1),!!C)try{a(JSON.parse(C))}catch{}}}const y=p.trim();if(y)try{a(JSON.parse(y))}catch{}}catch(y){if(du(y))return;throw y}}async function o2(e,a,s){const i=mi("/bases/actualizar/dry-run-upload"),c=Bn()?.token,d=await fetch(i,{method:"POST",headers:c?{Authorization:`Bearer ${c}`}:void 0,body:e,signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;let h=`Error (${d.status})`;try{const v=await d.json();v?.detail&&(h=String(v.detail))}catch{}throw jr(h,d.status,f)}await Oh(d,a)}async function c2(e,a){return Ye.post("/bases/actualizar/upload",e,{responseType:"blob",signal:a})}async function u2(e,a){return Ye.post("/logistica/log01/start",e,{signal:a})}async function d2(e,a,s){const i=mi(`/logistica/log01/poll/${e}?cursor=${encodeURIComponent(a)}`),c=Bn()?.token,d=await fetch(i,{method:"GET",headers:c?{Authorization:`Bearer ${c}`}:void 0,signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw jr(`No se pudo hacer poll (${d.status})`,d.status,f)}return await d.json()}async function f2(e,a){return Ye.get(`/logistica/log01/result/${encodeURIComponent(e)}`,{responseType:"blob",signal:a,validateStatus:s=>s===200})}async function m2(e){await Ye.post(`/logistica/log01/cancel/${encodeURIComponent(e)}`)}async function Zm(e={}){const{limit:a=20,offset:s=0,include_deleted:i=!1,q:c,dateFrom:d,dateTo:f,source:h,status:v}=e,p={limit:a,offset:s,include_deleted:i};c&&c.trim()&&(p.q=c.trim()),d&&d.trim()&&(p.dateFrom=d.trim()),f&&f.trim()&&(p.dateTo=f.trim()),h&&h.trim()&&(p.source=h.trim()),v&&v.trim()&&(p.status=v.trim());const{data:y}=await Ye.get("/logistica/log01/history",{params:p});return y}async function h2(e){const{data:a}=await Ye.get(`/logistica/log01/history/${encodeURIComponent(String(e))}`);return a}async function p2(e,a,s){return Ye.get(`/logistica/log01/history/${encodeURIComponent(String(e))}/artifact/${encodeURIComponent(a)}`,{responseType:"blob",signal:s,validateStatus:i=>i===200})}async function g2(e,a){await Ye.delete(`/logistica/log01/history/${encodeURIComponent(String(e))}`,{data:void 0})}async function b2(){return(await Ye.get("/logistica/log02/explorador/roots")).data}async function v2(e){return(await Ye.get("/logistica/log02/explorador/listar",{params:{path:e}})).data}async function y2(e){return(await Ye.post("/logistica/log02/validar-rutas-unc",e)).data}async function x2(e,a){return(await Ye.post("/logistica/log02/copiar-conformes/start",e,{signal:a})).data}async function N2(e,a,s){const i=mi(`/logistica/log02/copiar-conformes/progress/${e}`),c=Bn()?.token,d=await fetch(i,{method:"GET",headers:{...c?{Authorization:`Bearer ${c}`}:{},Accept:"application/x-ndjson","Cache-Control":"no-cache"},signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw jr(`No se pudo abrir el stream (${d.status})`,d.status,f)}await Oh(d,a)}async function j2(e,a,s){const i=mi(`/logistica/log02/copiar-conformes/poll/${e}?cursor=${encodeURIComponent(a)}`),c=Bn()?.token,d=await fetch(i,{method:"GET",headers:c?{Authorization:`Bearer ${c}`}:void 0,signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw jr(`No se pudo hacer poll (${d.status})`,d.status,f)}return await d.json()}async function S2(e){return(await Ye.post(`/logistica/log02/copiar-conformes/cancel/${encodeURIComponent(e)}`)).data}async function w2(e,a){return(await Ye.get(`/logistica/log02/copiar-conformes/reporte/${encodeURIComponent(e)}`,{params:{format:a},responseType:"blob"})).data}async function _2(e={}){const{limit:a=20,offset:s=0,q:i,dateFrom:c,dateTo:d,origin:f}=e,h={limit:a,offset:s};i&&i.trim()&&(h.q=i.trim()),c&&c.trim()&&(h.dateFrom=c.trim()),d&&d.trim()&&(h.dateTo=d.trim()),f&&f.trim()&&(h.origin=f.trim());const{data:v}=await Ye.get("/oi/tools/formato-ac/history",{params:h});return v}async function E2(e,a){return Ye.get(`/oi/tools/formato-ac/history/${encodeURIComponent(String(e))}/artifact`,{responseType:"blob",signal:a,validateStatus:s=>s===200})}async function nN(){const{data:e}=await Ye.get("/merge/config/upload-limits");return e}async function aN(e,a,s){return Ye.post(`/merge/?mode=${encodeURIComponent(a)}`,e,{responseType:"blob",signal:s})}async function sN(e){await Ye.post(`/merge/cancel/${encodeURIComponent(e)}`)}async function A2(e){const{data:a}=await Ye.post("/tools/files/upload",e);return a}async function C2(e){const{data:a}=await Ye.post("/tools/excel/inspect",e);return a}async function O2(e){const{data:a}=await Ye.post("/tools/excel/update",e);return a}async function R2(e){const{data:a}=await Ye.post("/tools/excel/change-password",e);return a}async function T2(e){const{data:a}=await Ye.post("/tools/excel/validate",e);return a}function D2({show:e,disabled:a=!1,title:s,accept:i,files:c,onClose:d,onAddFiles:f,onRemoveFile:h,onRemoveAll:v}){const p=g.useRef(null),y=g.useRef(0),[x,j]=g.useState(!1),[F,E]=g.useState("");g.useEffect(()=>{if(!e)return;const B=W=>{W.key==="Escape"&&d()};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[e,d]),g.useEffect(()=>{e||j(!1)},[e]),g.useEffect(()=>{e&&E("")},[e]);const C=g.useCallback(B=>{const W=Ch(B,i);if(W.length===0)return;const fe=new Set(c.map(uu)),De=new Set(fe),_e=[],be=[];for(const we of W){const Ce=uu(we);if(De.has(Ce)){be.push(we);continue}De.add(Ce),_e.push(we)}if(be.length>0){const we=Array.from(new Set(be.map(Ue=>Ue.name))),Ce=be.length;if(we.length===1){const Ue=Ce===1?"Se omiti 1 archivo duplicado":`Se omitieron ${Ce} archivos duplicados`;E(`${Ue}: "${we[0]}".`)}else E(`Se omitieron ${Ce} archivos duplicados: ${we.join(", ")}.`)}_e.length>0&&f(_e)},[i,c,f]);if(g.useEffect(()=>{if(!e)return;const B=fe=>{fe.preventDefault(),fe.stopPropagation()},W=fe=>{if(fe.preventDefault(),fe.stopPropagation(),a)return;const De=fe.dataTransfer?.files?Array.from(fe.dataTransfer.files):[];C(De)};return window.addEventListener("dragover",B,!0),window.addEventListener("drop",W,!0),()=>{window.removeEventListener("dragover",B,!0),window.removeEventListener("drop",W,!0)}},[e,a,C]),!e)return null;const T=()=>{a||p.current?.click()},q=B=>{const W=B.target.files?Array.from(B.target.files):[];C(W),B.currentTarget.value=""},A=()=>{a||(p.current&&(p.current.value=""),v())},te=B=>{B.preventDefault(),B.stopPropagation(),!a&&(y.current+=1,j(!0))},U=B=>{B.preventDefault(),B.stopPropagation()},D=B=>{B.preventDefault(),B.stopPropagation(),!a&&(y.current=Math.max(0,y.current-1),y.current===0&&j(!1))},P=B=>{if(B.preventDefault(),B.stopPropagation(),y.current=0,j(!1),a)return;const W=B.dataTransfer?.files?Array.from(B.dataTransfer.files):[];C(W)};return l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"filePickerModalTitle",onClick:B=>{B.target===B.currentTarget&&d()},children:l.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{id:"filePickerModalTitle",className:"modal-title",children:s}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:d})]}),l.jsxs("div",{className:"modal-body",children:[l.jsx("input",{ref:p,className:"d-none",type:"file",accept:i,multiple:!0,onChange:q,disabled:a}),F?l.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between",role:"alert",children:[l.jsx("div",{children:F}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>E("")})]}):null,l.jsxs("div",{className:`vi-dropzone${x?" is-dragover":""}`,onDragEnter:te,onDragOver:U,onDragLeave:D,onDrop:P,"aria-disabled":a?"true":"false",children:[l.jsxs("div",{className:"text-muted",children:["Arrastra y suelta archivos aqu, o"," ",l.jsx("button",{type:"button",className:"btn btn-link p-0 align-baseline",onClick:T,disabled:a,children:"selecciona desde tu equipo"}),"."]}),i?l.jsxs("div",{className:"form-text",children:["Tipos permitidos: ",i]}):null]}),l.jsxs("div",{className:"d-flex align-items-center justify-content-between mT-15 mB-10",children:[l.jsx("div",{className:"text-muted",children:c.length===0?"No se han seleccionado archivos.":c.length===1?"1 archivo seleccionado":`${c.length} archivos seleccionados`}),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:T,disabled:a,children:"Agregar ms"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-danger",onClick:A,disabled:a||c.length===0,children:"Eliminar todos"})]})]}),c.length===0?null:l.jsx("div",{style:{maxHeight:320,overflow:"auto"},children:l.jsx("ul",{className:"list-group",children:c.map(B=>{const W=eN(B);return l.jsxs("li",{className:"list-group-item d-flex align-items-center justify-content-between gap-10",children:[l.jsx("div",{className:"text-truncate",style:{minWidth:0},children:B.name}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>h(W),disabled:a,children:"Eliminar"})]},W)})})})]}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:d,children:"Cerrar"})})]})})})}function z2(e){if(e.length===0)return"";const a=Array.from(new Set(e.map(i=>i.name))),s=e.length;return a.length===1?`${s===1?"Se omiti 1 archivo duplicado":`Se omitieron ${s} archivos duplicados`}: "${a[0]}".`:`Se omitieron ${s} archivos duplicados: ${a.join(", ")}.`}function ku({label:e,title:a,accept:s,disabled:i=!1,fullDropArea:c=!1,files:d,setFiles:f}){const[h,v]=g.useState(!1),[p,y]=g.useState(!1),[x,j]=g.useState(""),F=g.useRef(0),E=g.useMemo(()=>d.length===0?"No se han seleccionado archivos.":d.length===1?"1 archivo seleccionado":`${d.length} archivos seleccionados`,[d.length]),C=d.length===0?"Agregar archivos":"Modificar/agregar archivos",T=P=>{const B=Ch(P,s);B.length!==0&&f(W=>{const{merged:fe,duplicates:De}=e2(W,B);return De.length>0&&j(z2(De)),fe})},q=P=>{P.preventDefault(),P.stopPropagation(),!i&&(F.current+=1,y(!0))},A=P=>{P.preventDefault(),P.stopPropagation()},te=P=>{P.preventDefault(),P.stopPropagation(),!i&&(F.current=Math.max(0,F.current-1),F.current===0&&y(!1))},U=P=>{if(P.preventDefault(),P.stopPropagation(),F.current=0,y(!1),i)return;const B=P.dataTransfer?.files?Array.from(P.dataTransfer.files):[];T(B)},D=l.jsxs(l.Fragment,{children:[l.jsx("label",{className:"form-label",children:e}),l.jsxs("div",{className:"input-group",children:[l.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>v(!0),disabled:i,children:C}),l.jsx("input",{className:"form-control",type:"text",readOnly:!0,value:E})]}),x?l.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between mT-10",role:"alert",children:[l.jsx("div",{children:x}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>j("")})]}):null]});return l.jsxs(l.Fragment,{children:[c?l.jsx("div",{className:`vi-file-drop-target${p?" is-dragover":""}`,onDragEnter:q,onDragOver:A,onDragLeave:te,onDrop:U,"aria-disabled":i?"true":"false",children:D}):l.jsxs("div",{children:[l.jsx("label",{className:"form-label",children:e}),l.jsx("div",{className:`vi-file-drop-target${p?" is-dragover":""}`,onDragEnter:q,onDragOver:A,onDragLeave:te,onDrop:U,"aria-disabled":i?"true":"false",children:l.jsxs("div",{className:"input-group",children:[l.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>v(!0),disabled:i,children:C}),l.jsx("input",{className:"form-control",type:"text",readOnly:!0,value:E})]})}),x?l.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between mT-10",role:"alert",children:[l.jsx("div",{children:x}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>j("")})]}):null]}),l.jsx(D2,{show:h,disabled:i,title:a,accept:s,files:d,onClose:()=>v(!1),onAddFiles:T,onRemoveFile:P=>f(B=>B.filter(W=>eN(W)!==P)),onRemoveAll:()=>f([])})]})}function k2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function M2(e,a){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(s)}async function U2(e){if(!bt.isAxiosError(e))return{detail:String(e)};const a=e,s=a.response?.headers?.["x-code"]??void 0,i=a.response?.data;if(i instanceof Blob)try{const d=await i.text(),f=JSON.parse(d);return{detail:String(f?.detail??d??a.message),code:s}}catch{return{detail:a.message,code:s}}const c=i?.detail??a.message;return{detail:String(c),code:s}}function L2(){const[e,a]=g.useState(null),[s,i]=g.useState([]),[c,d]=g.useState(""),[f,h]=g.useState(""),[v,p]=g.useState("^OI-(\\d+)-(\\d{4})$"),[y,x]=g.useState(9),[j,F]=g.useState("ERROR FINAL"),[E,C]=g.useState(!0),[T,q]=g.useState(!1),[A,te]=g.useState(!1),[U,D]=g.useState(null),[P,B]=g.useState(null),[W,fe]=g.useState([]),[De,_e]=g.useState(""),be=g.useRef(null),we=g.useRef(null),[Ce,Ue]=g.useState(!1),[M,V]=g.useState(!1),[ae,ce]=g.useState("Ingresa la contrasea de apertura del archivo y vuelve a intentar."),Re=g.useMemo(()=>!!e&&s.length>0&&!U,[e,s,U]);function _(he){fe(Fe=>[he,...Fe].slice(0,200));const Me=typeof he.percent=="number"?he.percent:typeof he.progress=="number"?he.progress:null;Me!=null&&Number.isFinite(Me)&&B(Math.max(0,Math.min(100,Me)))}function K(){be.current?.abort(),be.current=null}function ue(){U&&K()}function Q(he,Me){if(!e)throw new Error("Falta el archivo Base");if(s.length===0)throw new Error("Faltan archivos OI");const Fe=new FormData;Fe.append("base_file",e);for(const lt of s)Fe.append("oi_files",lt);const Qe=(Me??c).trim();return Qe&&Fe.append("default_password",Qe),f.trim()&&Fe.append("per_file_passwords_json",f.trim()),v.trim()&&Fe.append("oi_pattern",v.trim()),Fe.append("oi_start_row",String(y)),j.trim()&&Fe.append("base_sheet",j.trim()),he&&Fe.append("operation_id",he),Fe}function Ee(){we.current=null,V(!1)}function Ne(he,Me){we.current=he,ce(Me),V(!0)}async function Be(he){_e(""),fe([]),B(0),be.current=new AbortController,D("dry");try{const Me=Q(void 0,he?.passwordOverride);await o2(Me,_,be.current.signal)}catch(Me){if(Me?.name==="AbortError")return;const Fe=Me?.code,Qe=String(Me?.message??Me);if(Fe==="PASSWORD_REQUIRED"){_e(""),Ne("dry","Algn archivo est protegido. Ingresa la contrasea de apertura para continuar.");return}else if(Fe==="WRONG_PASSWORD"){_e(""),Ne("dry","Contrasea incorrecta. Intenta nuevamente.");return}else _e(Qe)}finally{K(),D(null)}}async function Ze(he){_e(""),fe([]),B(0);const Me=crypto.randomUUID();be.current=new AbortController,Rh(Me,_,be.current.signal).catch(()=>{}),D("upload");try{const Fe=Q(Me,he?.passwordOverride);Fe.append("replicate_merges",E?"true":"false"),Fe.append("replicate_row_heights",T?"true":"false"),Fe.append("replicate_col_widths",A?"true":"false");const Qe=await c2(Fe,be.current.signal),lt=Qe.headers["content-disposition"],ze=Qe.headers["x-file-name"],Ge=k2(lt)??ze??"base_actualizada.xlsx";M2(Qe.data,Ge)}catch(Fe){if(bt.isAxiosError(Fe)&&Fe.code==="ERR_CANCELED")return;const{detail:Qe,code:lt}=await U2(Fe);if(lt==="PASSWORD_REQUIRED"){_e(""),Ne("upload","Algn archivo est protegido. Ingresa la contrasea de apertura para continuar.");return}else if(lt==="WRONG_PASSWORD"){_e(""),Ne("upload","Contrasea incorrecta. Intenta nuevamente.");return}else _e(Qe)}finally{K(),D(null)}}return l.jsxs("div",{className:"container-fluid",children:[l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-7",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Actualizacin de Bases"}),l.jsx("p",{className:"text-muted mB-20",children:"Integra mltiples OIs en una Base (hoja ERROR FINAL). Soporta dry-run (NDJSON) y ejecucin con descarga."}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-12 mB-15",children:l.jsx(yo,{label:"Base (xlsx)",accept:".xlsx",file:e,onChange:a,disabled:!!U})}),l.jsx("div",{className:"col-12 mB-15",children:l.jsx(ku,{label:"Archivos OI (xlsx/xlsm)",title:"Archivos OI",accept:".xlsx,.xlsm",files:s,setFiles:i,disabled:!!U})}),l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Contrasea por defecto (opcional)"}),l.jsx("input",{className:"form-control",type:"password",value:c,onChange:he=>d(he.target.value),disabled:!!U})]}),l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Hoja Base (opcional)"}),l.jsx("input",{className:"form-control",value:j,onChange:he=>F(he.target.value),disabled:!!U})]}),Ce?l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Regex OI (opcional)"}),l.jsx("input",{className:"form-control",value:v,onChange:he=>p(he.target.value),disabled:!!U})]}):null,l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Fila inicio OI"}),l.jsx("input",{className:"form-control",type:"number",min:1,value:y,onChange:he=>x(Number(he.target.value||9)),disabled:!!U})]}),l.jsxs("div",{className:"col-12 mB-15",children:[l.jsx("label",{className:"form-label",children:"Contraseas por archivo (opcional)"}),l.jsx("textarea",{className:"form-control",rows:4,value:f,onChange:he=>h(he.target.value),disabled:!!U,placeholder:`Ej:
OI-0001-2025.xlsx: clave1
OI-0002-2025.xlsx: clave2

O JSON:
{"OI-0001-2025.xlsx":"clave1"}`})]}),Ce?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"col-md-4 mB-15",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateMerges",checked:E,onChange:he=>C(he.target.checked),disabled:!!U}),l.jsx("label",{className:"form-check-label",htmlFor:"replicateMerges",children:"Replicar merges"})]})}),l.jsx("div",{className:"col-md-4 mB-15",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateRowHeights",checked:T,onChange:he=>q(he.target.checked),disabled:!!U}),l.jsx("label",{className:"form-check-label",htmlFor:"replicateRowHeights",children:"Replicar alto filas"})]})}),l.jsx("div",{className:"col-md-4 mB-15",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateColWidths",checked:A,onChange:he=>te(he.target.checked),disabled:!!U}),l.jsx("label",{className:"form-check-label",htmlFor:"replicateColWidths",children:"Replicar ancho cols"})]})})]}):null]}),De&&l.jsx("div",{className:"alert alert-danger mT-10",role:"alert",children:De}),l.jsx("div",{className:"d-flex justify-content-end mT-10",children:l.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>Ue(he=>!he),disabled:!!U,children:Ce?"Menos Opciones":"Ms Opciones"})}),l.jsxs("div",{className:"d-flex gap-10 mT-15",children:[l.jsx("button",{className:"btn btn-primary",disabled:!Re,onClick:()=>void Ze(),children:U==="upload"?"Procesando...":"Procesar y Descargar"}),l.jsx("button",{className:"btn btn-outline-danger",disabled:!U,onClick:ue,children:"Cancelar"}),l.jsx("button",{className:"btn btn-outline-primary",disabled:!Re,onClick:()=>void Be(),children:U==="dry"?"Analizando...":"Analizar"})]})]})}),l.jsx("div",{className:"col-md-5",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),U?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress mB-15",style:{height:12},children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${P??0}%`},"aria-valuenow":P??0,"aria-valuemin":0,"aria-valuemax":100})}),l.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:W.length===0?l.jsx("div",{className:"text-muted",children:"Sin eventos an."}):l.jsx("ul",{className:"list-unstyled mB-0",children:W.map((he,Me)=>l.jsxs("li",{className:"mB-10",children:[l.jsxs("div",{children:[l.jsx("b",{children:si(he.type)})," ",he.stage?l.jsxs("span",{className:"text-muted",children:["[",tl(he.stage),"]"]}):null,typeof he.percent=="number"?l.jsxs("span",{className:"text-muted",children:["  ",he.percent.toFixed(1),"%"]}):null]}),l.jsx("div",{className:"text-muted",children:ll(he.message??he.detail??"")}),he.code?l.jsxs("div",{className:"text-muted",children:["Cdigo: ",he.code]}):null]},Me))})})]})})]}),l.jsx(zu,{show:M,title:"Archivo protegido",confirmLabel:"Continuar",helpText:ae,onClose:Ee,onConfirm:he=>{d(he),V(!1);const Me=we.current;we.current=null,Me&&(Me==="dry"?Be({passwordOverride:he}):Ze({passwordOverride:he}))}})]})}const B2="America/Lima";function q2(e){if(!e)return null;const a=/filename\*=UTF-8''([^;]+)|filename="([^"]+)"/i.exec(e),s=a?.[1]??a?.[2];if(!s)return null;try{return decodeURIComponent(s)}catch{return s}}function I2(e,a){const s=window.URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(s)}function $2(e){if(!e)return"N/D";const s=/[zZ]$/.test(e)||/[+-]\d{2}:\d{2}$/.test(e)||/[+-]\d{4}$/.test(e)?e:`${e}Z`,i=new Date(s);if(Number.isNaN(i.getTime()))return String(e);const d=new Intl.DateTimeFormat("es-PE",{timeZone:B2,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(i),f=h=>d.find(v=>v.type===h)?.value||"";return`${f("day")}/${f("month")}/${f("year")} ${f("hour")}:${f("minute")}`}function F2(e){const a=(e||"").toUpperCase();return a==="COMPLETADO"?"badge bg-success":a==="ERROR"?"badge bg-danger":"badge bg-secondary"}function H2(e){const a=(e||"").toUpperCase();return a==="VIMA_LISTA"?"VIMA LISTA":a==="ACTUALIZACION_BASES"?"ACTUALIZACION BASES":e||"N/D"}function V2(){const[e,a]=g.useState([]),[s,i]=g.useState(0),[c,d]=g.useState(!1),[f,h]=g.useState(""),[v,p]=g.useState(0),[y,x]=g.useState(""),[j,F]=g.useState(""),[E,C]=g.useState(""),[T,q]=g.useState(""),[A,te]=g.useState(20),[U,D]=g.useState(1),[P,B]=g.useState(()=>({q:"",dateFrom:"",dateTo:"",origin:""})),W=g.useMemo(()=>(U-1)*A,[U,A]);g.useEffect(()=>{let V=!1;return d(!0),h(""),_2({limit:A,offset:W,q:P.q||void 0,dateFrom:P.dateFrom||void 0,dateTo:P.dateTo||void 0,origin:P.origin||void 0}).then(ae=>{V||(a(Array.isArray(ae?.items)?ae.items:[]),i(typeof ae?.total=="number"?ae.total:0))}).catch(ae=>{if(V)return;const ce=ae,Re=ce.response?.data?.detail||ce.message||"No se pudo cargar historial.";h(Re)}).finally(()=>{V||d(!1)}),()=>{V=!0}},[P,W,A,v]);const fe=()=>{B({q:y.trim(),dateFrom:j.trim(),dateTo:E.trim(),origin:T.trim()}),D(1)},De=()=>{x(""),F(""),C(""),q(""),B({q:"",dateFrom:"",dateTo:"",origin:""}),D(1),p(V=>V+1)},_e=()=>p(V=>V+1),be=async V=>{try{h("");const ae=await E2(V),ce=ae.headers["content-disposition"],Re=ae.headers["x-file-name"],_=q2(ce)??Re??"formato_ac.xlsx";I2(ae.data,_)}catch(ae){const ce=ae;if(bt.isCancel(ce))return;const Re=ce.response?.data?.detail||ce.message||"No se pudo descargar.";h(Re)}},we=s===0?0:W+1,Ce=s===0?0:Math.min(W+e.length,s),Ue=U>1,M=W+e.length<s;return l.jsx("div",{className:"container-fluid",children:l.jsx("div",{className:"row",children:l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[l.jsx("div",{className:"d-flex flex-wrap align-items-center justify-content-between mB-10 gap-10",children:l.jsx("h4",{className:"c-grey-900 mB-0",children:"Historial A-C"})}),f?l.jsx("div",{className:"alert alert-danger",role:"alert",children:f}):null,l.jsxs("form",{className:"row g-2 align-items-end",onSubmit:V=>{V.preventDefault(),fe()},children:[l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{className:"form-label",children:"Buscar"}),l.jsx("input",{className:"form-control form-control-sm",value:y,onChange:V=>x(V.target.value),onKeyDown:V=>{V.key==="Enter"&&fe()},placeholder:"Operacion o usuario..."})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Fecha desde"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:j,onChange:V=>F(V.target.value)})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Fecha hasta"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:E,onChange:V=>C(V.target.value)})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Origen"}),l.jsxs("select",{className:"form-select form-select-sm",value:T,onChange:V=>q(V.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"VIMA_LISTA",children:"VIMA LISTA"}),l.jsx("option",{value:"ACTUALIZACION_BASES",children:"ACTUALIZACION BASES"})]})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Mostrar"}),l.jsxs("select",{className:"form-select form-select-sm",value:A,onChange:V=>{const ae=Number(V.target.value);te(Number.isFinite(ae)?ae:20),D(1)},children:[l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"})]})]}),l.jsxs("div",{className:"col-12 d-flex flex-wrap gap-10 mT-5",children:[l.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:c,children:"Buscar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:De,children:"Limpiar filtros"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:_e,children:"Recargar"})]})]}),l.jsxs("div",{className:"mT-15",children:[c?l.jsx("div",{className:"text-muted",children:"Cargando historial..."}):l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Operacion"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Fecha"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Usuario"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Origen"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Estado"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Acciones"})]})}),l.jsx("tbody",{children:e.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"text-muted small",children:"Sin registros."})}):e.map(V=>{const ae=V.created_by_full_name||V.created_by_username||"N/D";return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:V.operation_id}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:$2(V.created_at)}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:ae}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:H2(V.origin)}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("span",{className:F2(V.status),children:V.status})}),l.jsx("td",{children:l.jsx("div",{className:"d-flex gap-1 flex-wrap justify-content-end",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-success",onClick:()=>void be(V.id),children:"Descargar"})})})]},V.id)})})]})}),l.jsxs("div",{className:"d-flex align-items-center justify-content-between mT-10",children:[l.jsxs("div",{className:"small text-muted",children:["Mostrando ",we,"-",Ce," de ",s," registros"]}),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>D(V=>Math.max(1,V-1)),disabled:!Ue||c,children:"Anterior"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>D(V=>V+1),disabled:!M||c,children:"Siguiente"})]})]})]})]})})})})}function Z2(){return l.jsx("div",{className:"container-fluid",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin de Bases Originales"}),l.jsx("p",{className:"text-muted mB-20",children:"Selecciona el modo de consolidacin. Cada modo genera un archivo consolidado para descarga."}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-6 mB-15",children:l.jsx("div",{className:"card h-100",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h5",{className:"card-title",children:"Correlativo"}),l.jsx("p",{className:"card-text text-muted",children:"Ordena por la columna G (correlativo) al consolidar."}),l.jsx(Kc,{className:"btn btn-primary",to:"/oi/tools/consolidacion/correlativo",children:"Abrir"})]})})}),l.jsx("div",{className:"col-md-6 mB-15",children:l.jsx("div",{className:"card h-100",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h5",{className:"card-title",children:"No correlativo"}),l.jsx("p",{className:"card-text text-muted",children:"Mantiene el orden original de los archivos al consolidar."}),l.jsx(Kc,{className:"btn btn-primary",to:"/oi/tools/consolidacion/no-correlativo",children:"Abrir"})]})})})]})]})})}function G2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function P2(e,a){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(s)}async function Q2(e){if(!bt.isAxiosError(e))return String(e);const a=e,s=a.response?.data;if(s instanceof Blob)try{const i=await s.text(),c=JSON.parse(i);return String(c?.detail??i??a.message)}catch{return a.message}return String(s?.detail??a.message)}function Y2(){const[e,a]=g.useState(null),[s,i]=g.useState(null),[c,d]=g.useState([]),[f,h]=g.useState(!1),[v,p]=g.useState(""),[y,x]=g.useState(null),[j,F]=g.useState([]),E=g.useRef(null),C=g.useRef(null),T=g.useMemo(()=>!!s&&c.length>0&&!f,[s,c,f]);g.useEffect(()=>{nN().then(a).catch(()=>a(null))},[]);function q(D){F(B=>[D,...B].slice(0,200));const P=typeof D.percent=="number"?D.percent:typeof D.progress=="number"?D.progress:null;P!=null&&Number.isFinite(P)&&x(Math.max(0,Math.min(100,P)))}function A(){E.current?.abort(),E.current=null}function te(){if(!f)return;const D=C.current;D&&sN(D).catch(()=>{}),q({type:"status",stage:"cancelled",message:"Cancelacin solicitada"}),A()}async function U(){if(p(""),F([]),x(0),!s){p("Selecciona el archivo maestro.");return}if(c.length===0){p("Selecciona al menos un archivo de tcnico.");return}const D=new FormData;D.append("master",s);for(const B of c)D.append("technicians",B);const P=crypto.randomUUID();C.current=P,D.append("operation_id",P),E.current=new AbortController,h(!0);try{const B=E.current?.signal;Rh(P,q,B).catch(()=>{});const W=await aN(D,"correlativo",B),fe=W.headers["content-disposition"],De=G2(fe)??"consolidado_correlativo.xlsx";P2(W.data,De)}catch(B){if(bt.isAxiosError(B)&&B.code==="ERR_CANCELED"||bt.isAxiosError(B)&&(B.response?.headers?.["x-code"]??void 0)?.toUpperCase()==="CANCELLED")return;const W=await Q2(B);q({type:"error",stage:"error",detail:W}),p(W)}finally{C.current=null,h(!1),A()}}return l.jsx("div",{className:"container-fluid",children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-7",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin  Correlativo"}),l.jsx("p",{className:"text-muted mB-20",children:"Genera un consolidado ordenando por correlativo (columna G)."}),e&&l.jsxs("div",{className:"alert alert-info",role:"alert",children:["Lmite por archivo: ",l.jsxs("b",{children:[e.max_file_mb,"MB"]}),"  Mx. archivos tcnico:"," ",l.jsx("b",{children:e.max_tech_files})]}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-12 mB-15",children:l.jsx(yo,{label:"Archivo maestro (xlsx)",accept:".xlsx",file:s,onChange:i,disabled:f})}),l.jsx("div",{className:"col-12 mB-15",children:l.jsx(ku,{label:"Archivos de tcnicos (xlsx)",title:"Archivos de tcnicos",accept:".xlsx",files:c,setFiles:d,disabled:f})})]}),v&&l.jsx("div",{className:"alert alert-danger mT-10",role:"alert",children:v}),l.jsxs("div",{className:"d-flex gap-10 mT-20",children:[l.jsx("button",{className:"btn btn-primary mT-10",disabled:!T,onClick:U,children:f?"Procesando...":"Procesar y Descargar"}),l.jsx("button",{className:"btn btn-outline-danger mT-10",disabled:!f,onClick:te,children:"Cancelar"})]})]})}),l.jsx("div",{className:"col-md-5",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),f?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress mB-15",style:{height:12},children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${y??0}%`},"aria-valuenow":y??0,"aria-valuemin":0,"aria-valuemax":100})}),l.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:j.length===0?l.jsx("div",{className:"text-muted",children:"Sin eventos an."}):l.jsx("ul",{className:"list-unstyled mB-0",children:j.map((D,P)=>l.jsxs("li",{className:"mB-10",children:[l.jsxs("div",{children:[l.jsx("b",{children:si(D.type)})," ",D.stage?l.jsxs("span",{className:"text-muted",children:["[",tl(D.stage),"]"]}):null]}),l.jsx("div",{className:"text-muted",children:ll(D.message??D.detail??"")})]},P))})})]})})]})})}function K2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function X2(e,a){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(s)}async function J2(e){if(!bt.isAxiosError(e))return String(e);const a=e,s=a.response?.data;if(s instanceof Blob)try{const i=await s.text(),c=JSON.parse(i);return String(c?.detail??i??a.message)}catch{return a.message}return String(s?.detail??a.message)}function W2(){const[e,a]=g.useState(null),[s,i]=g.useState(null),[c,d]=g.useState([]),[f,h]=g.useState(!1),[v,p]=g.useState(""),[y,x]=g.useState(null),[j,F]=g.useState([]),E=g.useRef(null),C=g.useRef(null),T=g.useMemo(()=>!!s&&c.length>0&&!f,[s,c,f]);g.useEffect(()=>{nN().then(a).catch(()=>a(null))},[]);function q(D){F(B=>[D,...B].slice(0,200));const P=typeof D.percent=="number"?D.percent:typeof D.progress=="number"?D.progress:null;P!=null&&Number.isFinite(P)&&x(Math.max(0,Math.min(100,P)))}function A(){E.current?.abort(),E.current=null}function te(){if(!f)return;const D=C.current;D&&sN(D).catch(()=>{}),q({type:"status",stage:"cancelled",message:"Cancelacin solicitada"}),A()}async function U(){if(p(""),F([]),x(0),!s){p("Selecciona el archivo maestro.");return}if(c.length===0){p("Selecciona al menos un archivo de tcnico.");return}const D=new FormData;D.append("master",s);for(const B of c)D.append("technicians",B);const P=crypto.randomUUID();C.current=P,D.append("operation_id",P),E.current=new AbortController,h(!0);try{const B=E.current?.signal;Rh(P,q,B).catch(()=>{});const W=await aN(D,"no-correlativo",B),fe=W.headers["content-disposition"],De=K2(fe)??"consolidado_no_correlativo.xlsx";X2(W.data,De)}catch(B){if(bt.isAxiosError(B)&&B.code==="ERR_CANCELED"||bt.isAxiosError(B)&&(B.response?.headers?.["x-code"]??void 0)?.toUpperCase()==="CANCELLED")return;const W=await J2(B);q({type:"error",stage:"error",detail:W}),p(W)}finally{C.current=null,h(!1),A()}}return l.jsx("div",{className:"container-fluid",children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-7",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin  No correlativo"}),l.jsx("p",{className:"text-muted mB-20",children:"Genera un consolidado sin ordenar por correlativo (respeta el orden original)."}),e&&l.jsxs("div",{className:"alert alert-info",role:"alert",children:["Lmite por archivo: ",l.jsxs("b",{children:[e.max_file_mb,"MB"]}),"  Mx. archivos tcnico:"," ",l.jsx("b",{children:e.max_tech_files})]}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-12 mB-15",children:l.jsx(yo,{label:"Archivo maestro (xlsx)",accept:".xlsx",file:s,onChange:i,disabled:f})}),l.jsx("div",{className:"col-12 mB-15",children:l.jsx(ku,{label:"Archivos de tcnicos (xlsx)",title:"Archivos de tcnicos",accept:".xlsx",files:c,setFiles:d,disabled:f})})]}),v&&l.jsx("div",{className:"alert alert-danger mT-10",role:"alert",children:v}),l.jsxs("div",{className:"d-flex gap-10 mT-20",children:[l.jsx("button",{className:"btn btn-primary mT-10",disabled:!T,onClick:U,children:f?"Procesando...":"Procesar y Descargar"}),l.jsx("button",{className:"btn btn-outline-danger mT-10",disabled:!f,onClick:te,children:"Cancelar"})]})]})}),l.jsx("div",{className:"col-md-5",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),f?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress mB-15",style:{height:12},children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${y??0}%`},"aria-valuenow":y??0,"aria-valuemin":0,"aria-valuemax":100})}),l.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:j.length===0?l.jsx("div",{className:"text-muted",children:"Sin eventos an."}):l.jsx("ul",{className:"list-unstyled mB-0",children:j.map((D,P)=>l.jsxs("li",{className:"mB-10",children:[l.jsxs("div",{children:[l.jsx("b",{children:si(D.type)})," ",D.stage?l.jsxs("span",{className:"text-muted",children:["[",tl(D.stage),"]"]}):null]}),l.jsx("div",{className:"text-muted",children:ll(D.message??D.detail??"")})]},P))})})]})})]})})}async function ro(e){if(!bt.isAxiosError(e))return String(e);const a=e,s=a.response?.data;if(s instanceof Blob)try{const i=await s.text(),c=JSON.parse(i);return String(c?.detail??i??a.message)}catch{return a.message}return String(s?.detail??a.message)}function eD(){const[e,a]=g.useState(null),[s,i]=g.useState(""),[c,d]=g.useState(""),[f,h]=g.useState(""),[v,p]=g.useState("ERROR FINAL"),[y,x]=g.useState(""),[j,F]=g.useState("same_password"),[E,C]=g.useState(""),[T,q]=g.useState([{cell:"A1",value:""}]),[A,te]=g.useState(""),[U,D]=g.useState("no_password"),[P,B]=g.useState(""),[W,fe]=g.useState("ERROR FINAL"),[De,_e]=g.useState(1),[be,we]=g.useState(""),[Ce,Ue]=g.useState(""),[M,V]=g.useState(""),[ae,ce]=g.useState(null),[Re,_]=g.useState(""),[K,ue]=g.useState(null),[Q,Ee]=g.useState([]),[Ne,Be]=g.useState(null),Ze=g.useMemo(()=>c.trim().length>0,[c]);function he(me){Ee(Ie=>[me,...Ie].slice(0,200))}function Me(){_(""),Ee([]),ue(0),Be(null)}async function Fe(){if(Me(),!e){_("Selecciona un archivo para subir.");return}ce("upload");try{he({type:"status",stage:"upload",message:"Subiendo archivo..."}),ue(30);const me=new FormData;me.append("file",e),s.trim()&&me.append("suggested_name",s.trim());const Ie=await A2(me);d(Ie.relative_path),Be(Ie),he({type:"complete",stage:"upload",message:"Archivo subido."}),ue(100)}catch(me){const Ie=await ro(me);_(Ie),he({type:"error",stage:"upload",detail:Ie})}finally{ce(null)}}async function Qe(){if(Me(),!Ze){_("Ingresa o sube un archivo para obtener file_path.");return}ce("inspect");try{he({type:"status",stage:"inspect",message:"Inspeccionando..."}),ue(50);const me=await C2({file_path:c.trim(),open_password:f.trim()||null});Be(me),he({type:"complete",stage:"inspect",message:"Inspeccin completada."}),ue(100)}catch(me){const Ie=await ro(me);_(Ie),he({type:"error",stage:"inspect",detail:Ie})}finally{ce(null)}}async function lt(){if(Me(),!Ze){_("Ingresa o sube un archivo para obtener file_path.");return}if(!v.trim()){_("Ingresa el nombre de la hoja.");return}const me=T.map(Ie=>({cell:Ie.cell.trim(),value:Ie.value})).filter(Ie=>Ie.cell);if(me.length===0){_("Agrega al menos una edicin.");return}ce("update");try{he({type:"status",stage:"update",message:"Aplicando ediciones..."}),ue(50);const Ie=await O2({file_path:c.trim(),edits:me.map(Ae=>({sheet:v.trim(),cell:Ae.cell,value:Ae.value})),open_password:y.trim()||null,save_mode:j,new_password:j==="new_password"&&E.trim()||null});Be(Ie),he({type:"complete",stage:"update",message:"Actualizacin completada."}),ue(100)}catch(Ie){const Ae=await ro(Ie);_(Ae),he({type:"error",stage:"update",detail:Ae})}finally{ce(null)}}async function ze(){if(Me(),!Ze){_("Ingresa o sube un archivo para obtener file_path.");return}if(!A.trim()){_("Ingresa la contrasea de apertura (open_password).");return}if(U==="new_password"&&!P.trim()){_("Ingresa la nueva contrasea.");return}ce("change-password");try{he({type:"status",stage:"change-password",message:"Cambiando contrasea..."}),ue(50);const me=await R2({file_path:c.trim(),open_password:A.trim(),mode:U,new_password:U==="new_password"?P.trim():null});Be(me),he({type:"complete",stage:"change-password",message:"Cambio de contrasea completado."}),ue(100)}catch(me){const Ie=await ro(me);_(Ie),he({type:"error",stage:"change-password",detail:Ie})}finally{ce(null)}}async function Ge(){if(Me(),!Ze){_("Ingresa o sube un archivo para obtener file_path.");return}let me={};if(Ce.trim())try{me=JSON.parse(Ce)}catch{_("type_rules debe ser JSON vlido.");return}const Ie=be.split(",").map(Ae=>Ae.trim()).filter(Boolean);ce("validate");try{he({type:"status",stage:"validate",message:"Validando..."}),ue(50);const Ae=await T2({file_path:c.trim(),sheet:W.trim()||null,header_row:De,required_columns:Ie,type_rules:me,open_password:M.trim()||null});Be(Ae),he({type:"complete",stage:"validate",message:"Validacin completada."}),ue(100)}catch(Ae){const Xe=await ro(Ae);_(Xe),he({type:"error",stage:"validate",detail:Xe})}finally{ce(null)}}return l.jsx("div",{className:"container-fluid",children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-7",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Herramientas Excel"}),l.jsx("p",{className:"text-muted mB-20",children:"Subir archivos, inspeccionar, editar celdas, cambiar contrasea y validar."}),l.jsx("div",{className:"card mB-15",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h6",{className:"card-title",children:"1) Subir archivo (recomendado)"}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-8 mB-10",children:l.jsx("input",{className:"form-control",type:"file",accept:".xlsx,.xlsm",disabled:!!ae,onChange:me=>a(me.target.files?.[0]??null)})}),l.jsx("div",{className:"col-md-4 mB-10",children:l.jsx("input",{className:"form-control",placeholder:"Nombre sugerido (opcional)",value:s,disabled:!!ae,onChange:me=>i(me.target.value)})})]}),l.jsx("button",{className:"btn btn-outline-primary",disabled:!!ae||!e,onClick:Fe,children:ae==="upload"?"Subiendo...":"Subir"})]})}),l.jsxs("div",{className:"mB-15",children:[l.jsx("label",{className:"form-label",children:"file_path"}),l.jsx("input",{className:"form-control",value:c,disabled:!!ae,onChange:me=>d(me.target.value),placeholder:"Ruta del archivo en el servidor (o la devuelta por Upload)"}),l.jsx("div",{className:"form-text",children:"Si subes el archivo, se llenar automticamente. Tambin puedes pegar una ruta local/red accesible por el servidor."})]}),l.jsx("div",{className:"card mB-15",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h6",{className:"card-title",children:"2) Inspect"}),l.jsxs("div",{className:"row align-items-end",children:[l.jsxs("div",{className:"col-md-8 mB-10",children:[l.jsx("label",{className:"form-label",children:"open_password (opcional)"}),l.jsx("input",{className:"form-control",type:"password",value:f,disabled:!!ae,onChange:me=>h(me.target.value)})]}),l.jsx("div",{className:"col-md-4 mB-10",children:l.jsx("button",{className:"btn btn-primary w-100",disabled:!!ae||!Ze,onClick:Qe,children:ae==="inspect"?"Inspeccionando...":"Inspect"})})]})]})}),l.jsx("div",{className:"card mB-15",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h6",{className:"card-title",children:"3) Update (editar celdas)"}),l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"Hoja"}),l.jsx("input",{className:"form-control",value:v,disabled:!!ae,onChange:me=>p(me.target.value)})]}),l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"open_password (opcional)"}),l.jsx("input",{className:"form-control",type:"password",value:y,disabled:!!ae,onChange:me=>x(me.target.value)})]}),l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"save_mode"}),l.jsxs("select",{className:"form-select",value:j,disabled:!!ae,onChange:me=>F(me.target.value),children:[l.jsx("option",{value:"same_password",children:"same_password"}),l.jsx("option",{value:"no_password",children:"no_password"}),l.jsx("option",{value:"new_password",children:"new_password"})]})]}),l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"new_password"}),l.jsx("input",{className:"form-control",type:"password",value:E,disabled:!!ae||j!=="new_password",onChange:me=>C(me.target.value),placeholder:j==="new_password"?"Requerido":""})]})]}),l.jsxs("div",{className:"mT-10",children:[l.jsx("label",{className:"form-label",children:"Ediciones"}),T.map((me,Ie)=>l.jsxs("div",{className:"row g-2 mB-10",children:[l.jsx("div",{className:"col-md-3",children:l.jsx("input",{className:"form-control",value:me.cell,disabled:!!ae,onChange:Ae=>{const Xe=T.slice();Xe[Ie]={...Xe[Ie],cell:Ae.target.value},q(Xe)},placeholder:"Celda (A1)"})}),l.jsx("div",{className:"col-md-7",children:l.jsx("input",{className:"form-control",value:me.value,disabled:!!ae,onChange:Ae=>{const Xe=T.slice();Xe[Ie]={...Xe[Ie],value:Ae.target.value},q(Xe)},placeholder:"Valor"})}),l.jsxs("div",{className:"col-md-2 d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-outline-auto w-100",disabled:!!ae,onClick:()=>q(Ae=>[...Ae,{cell:"A1",value:""}]),children:"+"}),l.jsx("button",{type:"button",className:"btn btn-outline-danger w-100",disabled:!!ae||T.length===1,onClick:()=>q(Ae=>Ae.filter((Xe,R)=>R!==Ie)),children:""})]})]},Ie))]}),l.jsx("button",{className:"btn btn-primary",disabled:!!ae||!Ze,onClick:lt,children:ae==="update"?"Actualizando...":"Update"})]})}),l.jsx("div",{className:"card mB-15",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h6",{className:"card-title",children:"4) Change password"}),l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"open_password"}),l.jsx("input",{className:"form-control",type:"password",value:A,disabled:!!ae,onChange:me=>te(me.target.value)})]}),l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"mode"}),l.jsxs("select",{className:"form-select",value:U,disabled:!!ae,onChange:me=>D(me.target.value),children:[l.jsx("option",{value:"no_password",children:"no_password"}),l.jsx("option",{value:"new_password",children:"new_password"})]})]}),l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"new_password"}),l.jsx("input",{className:"form-control",type:"password",value:P,disabled:!!ae||U!=="new_password",onChange:me=>B(me.target.value),placeholder:U==="new_password"?"Requerido":""})]}),l.jsx("div",{className:"col-md-6 mB-10 d-flex align-items-end",children:l.jsx("button",{className:"btn btn-primary w-100",disabled:!!ae||!Ze,onClick:ze,children:ae==="change-password"?"Procesando...":"Change password"})})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h6",{className:"card-title",children:"5) Validate"}),l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"sheet (opcional)"}),l.jsx("input",{className:"form-control",value:W,disabled:!!ae,onChange:me=>fe(me.target.value)})]}),l.jsxs("div",{className:"col-md-3 mB-10",children:[l.jsx("label",{className:"form-label",children:"header_row"}),l.jsx("input",{className:"form-control",type:"number",min:1,value:De,disabled:!!ae,onChange:me=>_e(Number(me.target.value||1))})]}),l.jsxs("div",{className:"col-md-3 mB-10",children:[l.jsx("label",{className:"form-label",children:"open_password (opcional)"}),l.jsx("input",{className:"form-control",type:"password",value:M,disabled:!!ae,onChange:me=>V(me.target.value)})]}),l.jsxs("div",{className:"col-12 mB-10",children:[l.jsx("label",{className:"form-label",children:"required_columns (coma separada)"}),l.jsx("input",{className:"form-control",value:be,disabled:!!ae,onChange:me=>we(me.target.value),placeholder:"ColA, ColB, ColC"})]}),l.jsxs("div",{className:"col-12 mB-10",children:[l.jsx("label",{className:"form-label",children:"type_rules (JSON, opcional)"}),l.jsx("textarea",{className:"form-control",rows:3,value:Ce,disabled:!!ae,onChange:me=>Ue(me.target.value),placeholder:'{"ColA":"int","ColB":"float"}'})]})]}),l.jsx("button",{className:"btn btn-primary",disabled:!!ae||!Ze,onClick:Ge,children:ae==="validate"?"Validando...":"Validate"})]})}),Re&&l.jsx("div",{className:"alert alert-danger mT-15",role:"alert",children:Re})]})}),l.jsx("div",{className:"col-md-5",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),ae?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress mB-15",style:{height:12},children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${K??0}%`},"aria-valuenow":K??0,"aria-valuemin":0,"aria-valuemax":100})}),l.jsx("div",{style:{maxHeight:220,overflow:"auto"},children:Q.length===0?l.jsx("div",{className:"text-muted",children:"Sin eventos an."}):l.jsx("ul",{className:"list-unstyled mB-0",children:Q.map((me,Ie)=>l.jsxs("li",{className:"mB-10",children:[l.jsxs("div",{children:[l.jsx("b",{children:me.type})," ",me.stage?l.jsxs("span",{className:"text-muted",children:["[",me.stage,"]"]}):null]}),l.jsx("div",{className:"text-muted",children:me.message??me.detail??""})]},Ie))})}),l.jsx("hr",{className:"mY-15"}),l.jsx("h6",{className:"c-grey-900 mB-10",children:"Resultado"}),Ne?l.jsx("pre",{className:"vi-surface-2 p-10",style:{maxHeight:360,overflow:"auto"},children:JSON.stringify(Ne,null,2)}):l.jsx("div",{className:"text-muted",children:"Sin resultado an."})]})})]})})}function tD(){const e=ia(),a=nl(),{toast:s}=al(),i=Bn(),c=ai(i?.role),d=po(),f=c&&!(d&&d>0),{data:h,isLoading:v,error:p}=Xr({queryKey:["catalogs"],queryFn:bh,enabled:f}),y=h?.bancos??[],[x,j]=g.useState(()=>d&&d>0?d:0),[F,E]=g.useState(!1),C=g.useMemo(()=>y.find(te=>te.id===x)?.name??null,[y,x]);g.useEffect(()=>{const A=e.state;A?.toast&&(s({kind:A.toast.kind??"info",title:A.toast.title,message:A.toast.message}),a(e.pathname,{replace:!0,state:{}}))},[e.pathname,e.state,a,s]),g.useEffect(()=>{f&&(x>0||y.length>0&&j(y[0].id))},[x,y,f]);const T=x>0&&!F,q=async()=>{if(T)try{E(!0);const A=await N0(x),te=zm(A.userId,A.bancoId??x);if(te.target){a(te.target,{replace:!0});return}s({kind:"success",title:"Banco",message:C?`Banco seleccionado: ${C}`:"Banco seleccionado."})}catch(A){const te=A?.response?.data?.detail??A?.message??"No se pudo guardar el banco.";s({kind:"error",title:"Banco",message:String(te)})}finally{E(!1)}};return l.jsxs("div",{className:"vi-home",children:[l.jsx("div",{className:"vi-home__banner",style:{backgroundImage:'url("/medileser/banner.jpg")'},role:"img","aria-label":"Medileser"}),f&&l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:l.jsx("div",{className:"modal-dialog modal-dialog-centered",children:l.jsxs("div",{className:"modal-content",children:[l.jsx("div",{className:"modal-header",children:l.jsx("h5",{className:"modal-title",children:"Seleccionar banco"})}),l.jsxs("div",{className:"modal-body",children:[l.jsx("p",{className:"text-muted mb-3",children:"Seleccione el banco de trabajo para continuar."}),l.jsx("label",{className:"form-label",htmlFor:"bankId",children:"Banco"}),l.jsx("select",{id:"bankId",className:"form-select",value:x||"",onChange:A=>j(Number(A.target.value)),disabled:v||F,children:y.map(A=>l.jsx("option",{value:A.id,children:A.name},A.id))}),p?l.jsx("div",{className:"alert alert-danger mt-3 mb-0",role:"alert",children:"No se pudieron cargar los bancos."}):null]}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{type:"button",className:"btn btn-primary",disabled:!T,onClick:q,children:F?"Guardando...":"Continuar"})})]})})})]})}const lo=(...e)=>{};function nD(e){if(!e)return null;const a=/filename\*=UTF-8''([^;]+)|filename="([^"]+)"/i.exec(e),s=a?.[1]??a?.[2];if(!s)return null;try{return decodeURIComponent(s)}catch{return s}}function aD(e,a){const s=window.URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(s)}async function sD(e,a){let s=null,i=!1;const c=new Promise(d=>{s=window.setTimeout(()=>{i=!0,d()},a)});try{await Promise.race([e,c])}catch{return!1}finally{s!=null&&window.clearTimeout(s)}return!i}function rD(){const[e,a]=g.useState([]),[s,i]=g.useState(""),[c,d]=g.useState([]),[f,h]=g.useState(0),[v,p]=g.useState("Listo para procesar"),[y,x]=g.useState(!1),[j,F]=g.useState(""),[E,C]=g.useState(!1),[T,q]=g.useState(null),[A,te]=g.useState(null),[U,D]=g.useState(!1);function P(S){const L=S?.series_duplicates_eliminated??S?.detail?.series_duplicates_eliminated??S?.series_duplcates_eliminated;return typeof L=="number"?L:null}const B={MISSING_HEADERS:"Faltan cabeceras requeridas",FILE_INVALID:"Archivo invlido",INVALID_OI_FILENAME:"Nombre de archivo invlido",EMPTY_FILE:"Archivo vaco"};function W(S){const L=String(S??"").trim().toUpperCase();return L?B[L]??L:""}function fe(S){if(!S)return"";let L=ll(S);L=L.replace(/\bERROR\b/gi,"Error");for(const[$,X]of Object.entries(B))L=L.replace(new RegExp(`\\b${$}\\b`,"g"),X);return L}function De(S,L){const $=W(S),X=fe(L);return X?$&&!X.toLowerCase().includes($.toLowerCase())?`${$}: ${X}`:X:$||"N/D"}function _e(S,L,$){const X=String($??"").trim();if(X)return X;const le=Number(S);if(!Number.isFinite(le)||le<=0)return"N/D";const je=Number(L);return Number.isFinite(je)&&je>0?`OI-${String(le).padStart(4,"0")}-${String(je).padStart(4,"0")}`:`OI-${String(le).padStart(4,"0")}`}function be(S){const L=S?.rows_total_read??S?.totals_input?.rows_read;return typeof L=="number"?L:null}const we=g.useMemo(()=>(Array.isArray(A?.audit_by_oi)?A.audit_by_oi:[]).filter(L=>L?.status==="OK"&&String(L?.source??"").toUpperCase()==="BASES").slice().sort((L,$)=>{const X=Number(L?.oi_year),le=Number($?.oi_year),je=Number.isFinite(X)&&X>0,Z=Number.isFinite(le)&&le>0;if(je&&Z&&X!==le)return X-le;if(je&&!Z)return-1;if(!je&&Z)return 1;const ke=Number(L?.oi_num),qe=Number($?.oi_num),We=Number.isFinite(ke),Mt=Number.isFinite(qe);if(We&&Mt&&ke!==qe)return ke-qe;if(We&&!Mt)return-1;if(!We&&Mt)return 1;const ye=String(L?.oi_tag??L?.oi??L?.oi_num??"").toUpperCase(),et=String($?.oi_tag??$?.oi??$?.oi_num??"").toUpperCase();return ye.localeCompare(et)}),[A]),Ce=g.useMemo(()=>(Array.isArray(A?.files_rejected)?A.files_rejected:[]).slice().sort((L,$)=>{const X=String(L?.oi??L?.filename??"").toUpperCase(),le=String($?.oi??$?.filename??"").toUpperCase();return X.localeCompare(le)}),[A]),Ue=g.useMemo(()=>{const S=()=>({files_total:0,files_ok:0,files_error:0,rows_read:0,conformes:0,no_conformes:0,rows_ignored_invalid_estado:0}),L=A?.by_source;if(L&&typeof L=="object")return L;const $={BASES:S(),GASELAG:S()},X=Array.isArray(A?.audit_by_oi)?A.audit_by_oi:[];for(const je of X){if(je?.status!=="OK")continue;const ke=String(je?.source??"").toUpperCase()==="GASELAG"?"GASELAG":"BASES";$[ke].files_ok+=1,$[ke].rows_read+=Number(je?.rows_read??0)||0,$[ke].conformes+=Number(je?.conformes??0)||0,$[ke].no_conformes+=Number(je?.no_conformes??0)||0,$[ke].rows_ignored_invalid_estado+=Number(je?.rows_ignored_invalid_estado??0)||0}const le=Array.isArray(A?.files_rejected)?A.files_rejected:[];for(const je of le){const ke=String(je?.source??"").toUpperCase()==="GASELAG"?"GASELAG":"BASES";$[ke].files_error+=1}for(const je of["BASES","GASELAG"])$[je].files_total=$[je].files_ok+$[je].files_error;return $},[A]),M=g.useRef(null),V=g.useRef(null),ae=g.useRef(null),ce=g.useRef(!1),Re=g.useRef(null),_=g.useRef(null),K=g.useRef(null),ue=g.useRef(!1),Q=g.useRef(!1),Ee=g.useRef(-1),Ne=g.useRef(-1),Be=g.useRef(!1);function Ze(){return Re.current||(Re.current=crypto.randomUUID()),Re.current}function he(S){const L=`${si(S.type)}  ${tl(S.stage)}  ${fe(S.message??S.detail??"")}`;if(p(L),d($=>{const X=[S,...$];if(!Be.current&&S.stage==="cancelled"){Be.current=!0;const le=X.filter(qe=>qe.stage==="file_done"||qe.stage==="file_error").length,je=X.filter(qe=>qe.stage==="file_done").length,Z=X.filter(qe=>qe.stage==="file_error").length;return[{type:"status",stage:"cancelled",message:`Cancelacin aplicada. Archivos procesados hasta el momento: ${le} (OK: ${je}, Rechazados: ${Z}). No se gener resultado final.`},...X]}return X}),S.type==="complete"){const $=S.result??null;te($)}typeof S.progress=="number"&&h(Math.round(S.progress)),typeof S.percent=="number"&&h(Math.round(S.percent)),!ce.current&&(S.type==="complete"||S.stage==="cancelled"||S.stage==="failed")&&(ce.current=!0,S.type==="complete"?(C(!0),q(Re.current)):(C(!1),q(null),Re.current=null),x(!1),lt("terminal_event"),ze())}function Me(S){return typeof S.cursor!="number"?!1:S.cursor<=Ne.current?!0:(Ne.current=S.cursor,S.cursor>Ee.current&&(Ee.current=S.cursor),!1)}function Fe(S){ce.current||Me(S)||he(S)}function Qe(S,L){const $=new FormData;$.append("operation_id",S),$.append("source","AUTO"),s.trim()&&$.append("output_filename",s.trim());for(const X of L)$.append("files",X);return $}function lt(S){V.current&&(ae.current=S,V.current.abort(),V.current=null)}function ze(S){Q.current&&(Q.current=!1,_.current!=null&&(window.clearTimeout(_.current),_.current=null),K.current?.abort(),K.current=null,ue.current=!1)}function Ge(S){Q.current&&(_.current!=null&&window.clearTimeout(_.current),_.current=window.setTimeout(()=>{me()},S))}async function me(){if(!Q.current||ue.current)return;const S=Re.current;if(!S){ze();return}ue.current=!0;try{const L=await d2(S,Ee.current,K.current?.signal);lo("[LOG01] poll cursor =",Ee.current,"->",L.cursor_next),Ee.current=L.cursor_next;for(const $ of L.events)Fe($);if(L.done&&L.events.length===0){ze("done");return}}catch(L){L?.name}finally{ue.current=!1,Q.current&&Ge(350)}}function Ie(S){Q.current||(Q.current=!0,K.current=new AbortController,Ge(0))}function Ae(){M.current?.abort(),M.current=null}async function Xe(){if(!y)return;const S=Re.current;if(S)try{await m2(S)}catch(L){const $=L;bt.isCancel($)||F($.response?.data?.detail||$.message||"No se pudo cancelar la operacion")}Ae()}async function R(){F(""),d([]),te(null),h(0),p("Listo para procesar"),C(!1),q(null),ae.current=null,ce.current=!1,Be.current=!1,Ee.current=-1,Ne.current=-1,ze();const S=[...e];if(!S.length){F("Debes seleccionar al menos 1 Excel.");return}Re.current=null;const L=Ze();let $=null,X=null;const le=new Promise((ke,qe)=>{$=ke,X=qe});V.current=new AbortController,M.current=new AbortController,i2(L,ke=>{if(ke.type==="hello"){$&&($(),$=null);return}Fe(ke)},V.current.signal).then(()=>{ce.current||Ie()}).catch(ke=>{ke?.name==="AbortError"?lo("[LOG01] progress stream aborted (reason) =",ae.current):(X&&(X(ke),X=null),Ie())}),x(!0);try{await sD(le,1800)?lo("[LOG01] hello received"):Ie("hello_timeout");const qe=Qe(L,S);lo("[LOG01] operation_id(start) =",L),await u2(qe,M.current.signal)}catch(ke){const qe=ke;if(bt.isCancel(qe))return;const We=qe.response?.data?.detail||qe.message||"Error inesperado";F(We),x(!1),Ae(),lt("start_failed"),ze(),Re.current=null}finally{Ae()}}async function z(){const S=T??Re.current;if(!S){F("No hay resultado disponible.");return}try{F(""),lo("[LOG01] operation_id(result) =",S);const L=await f2(S),$=L.headers["content-disposition"],X=L.headers["x-file-name"],le=nD($)??X??"BD_CONSOLIDADO.xlsx";aD(L.data,le)}catch(L){const $=L;if(bt.isCancel($))return;const X=$.response?.data?.detail||$.message||"No se pudo descargar.";F(X)}}return l.jsx("div",{className:"container-fluid",children:l.jsx("div",{className:"row",children:l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin Excel"}),j&&l.jsx("div",{className:"alert alert-danger",role:"alert",children:j}),l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-12 mB-15",children:[l.jsx(ku,{label:"Archivos Excel (Bases Comerciales / GASELAG) (xlsx)",title:"Archivos Excel",accept:".xlsx",files:e,setFiles:a,fullDropArea:!0,disabled:y}),l.jsx("div",{className:"small text-muted mT-5",children:"Nota: el sistema identifica el tipo de archivo por cabeceras/contenido (AUTO). No depende del nombre."})]}),l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label mB-0",children:"Nombre de salida (opcional)"}),l.jsx("input",{className:"form-control",value:s,onChange:S=>i(S.target.value),placeholder:"BD_<SERIE_INI>_AL_<SERIE_FIN>.xlsx",disabled:y})]}),l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label mB-0 invisible",children:"Acciones"}),l.jsxs("div",{className:"vi-log01-actions",children:[l.jsx("button",{className:"btn btn-primary btn-sm vi-log01-btn-primary",onClick:R,disabled:y,children:y?"Procesando...":"Consolidar"}),y?l.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>void Xe(),children:"Cancelar"}):null,!y&&E?l.jsx(l.Fragment,{children:l.jsx("button",{className:"btn btn-outline-success btn-sm",onClick:()=>void z(),children:"Descargar Excel"})}):null]})]})]}),l.jsxs("div",{className:"mT-10",children:[l.jsxs("h6",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),y?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress",children:l.jsxs("div",{className:"progress-bar",role:"progressbar",style:{width:`${f}%`},"aria-valuenow":f,"aria-valuemin":0,"aria-valuemax":100,children:[f,"%"]})}),l.jsx("div",{className:"mT-10 text-muted",children:v})]}),!y&&A?l.jsxs("div",{className:"mT-20",children:[l.jsx("h6",{className:"c-grey-900",children:"Reporte de auditora"}),l.jsx("div",{className:"bd p-10",children:l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6",children:[l.jsx("div",{className:"small text-muted",children:"Archivos"}),l.jsxs("div",{className:"small",children:["Total: ",l.jsx("strong",{children:A.files_total??"N/D"}),"  OK:"," ",l.jsx("strong",{children:A.files_ok??"N/D"}),"  Rechazados:"," ",l.jsx("strong",{children:A.files_error??"N/D"})]}),l.jsx("div",{className:"mT-10 small text-muted",children:"Totales por tipo (origen)"}),l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Tipo"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Archivos"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ledos"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ignorados"})]})}),l.jsx("tbody",{children:["BASES","GASELAG"].map(S=>{const L=Ue?.[S]??{},$=L?.files_total??Number(L?.files_ok??0)+Number(L?.files_error??0);return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:S})}),l.jsxs("td",{style:{whiteSpace:"nowrap"},children:[l.jsx("strong",{children:$??0})," ",l.jsxs("span",{className:"text-muted",children:["(OK: ",L?.files_ok??0,"  Rech: ",L?.files_error??0,")"]})]}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:L?.rows_read??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:L?.conformes??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:L?.no_conformes??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:L?.rows_ignored_invalid_estado??0})})]},S)})})]})}),l.jsx("div",{className:"mT-10 small text-muted",children:"No conformes por OI (origen)  BASES"}),we.length>0?l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"OI"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ledos"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"})]})}),l.jsx("tbody",{children:we.map((S,L)=>l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:_e(S?.oi_num,S?.oi_year,S?.oi_tag??S?.oi)}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:S?.rows_read??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:S?.conformes??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:S?.no_conformes??0})})]},L))})]})}):l.jsx("div",{className:"small text-muted",children:"N/D"}),Number(Ue?.GASELAG?.rows_read??0)>0?l.jsxs("div",{className:"mT-10 small",children:[l.jsx("span",{className:"text-muted",children:"GASELAG (origen):"})," ","Ledos: ",l.jsx("strong",{children:Ue.GASELAG.rows_read??0}),"  Conformes:"," ",l.jsx("strong",{children:Ue.GASELAG.conformes??0}),"  No conformes:"," ",l.jsx("strong",{children:Ue.GASELAG.no_conformes??0}),"  Ignorados(estado):"," ",l.jsx("strong",{children:Ue.GASELAG.rows_ignored_invalid_estado??0})]}):null,l.jsxs("div",{className:"col-12 mT-10 p-0",children:[l.jsx("div",{className:"small text-muted",children:"Totales (origen)"}),l.jsxs("div",{className:"small",children:["Registros ledos:"," ",l.jsx("strong",{children:A.totals_input?.rows_read??"N/D"}),"  Conformes:"," ",l.jsx("strong",{children:A.totals_input?.conformes??"N/D"}),"  No conformes:"," ",l.jsx("strong",{children:A.totals_input?.no_conformes??"N/D"})]})]})]}),l.jsxs("div",{className:"col-md-6 mT-10 mT-md-0",children:[Ce.length>0?l.jsxs("div",{className:"mT-15",children:[l.jsx("div",{className:"small text-muted",children:"Archivos rechazados"}),l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"OI / Archivo"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Motivo"})]})}),l.jsx("tbody",{children:Ce.map((S,L)=>{const $=De(S?.code,S?.detail),X=String(S?.source??"").toUpperCase();let le=S?.filename??"N/D";if(X==="BASES"){const je=Number(S?.oi_num),Z=_e(je,S?.oi_year,S?.oi_tag??S?.oi);Z!=="N/D"&&(le=`${Z} / ${le}`)}else X==="GASELAG"&&(le=`GASELAG / ${le}`);return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:le}),l.jsx("td",{children:$})]},L)})})]})})]}):null,l.jsx("div",{className:"small text-muted",children:"Resultado final (post-dedupe)"}),l.jsxs("div",{className:"small",children:["nicas (post-dedupe):"," ",l.jsx("strong",{children:A.series_total_dedup??"N/D"}),"  Conformes finales:"," ",l.jsx("strong",{children:A.series_conformes??"N/D"}),"  No conformes finales:"," ",l.jsx("strong",{children:A.series_no_conformes_final??"N/D"})]}),l.jsx("div",{className:"mT-10",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>D(S=>!S),children:U?"Ocultar detalle tcnico":"Ver detalle tcnico"})}),U?l.jsxs("div",{className:"mT-10",children:[l.jsx("div",{className:"small text-muted",children:"Detalle tcnico (soporte)"}),l.jsxs("div",{className:"small",children:["Registros ledos (total):"," ",l.jsx("strong",{children:be(A)??"N/D"})," "," Duplicados eliminados:"," ",l.jsx("strong",{children:P(A)??"N/D"})," "," nicas = Ledos  Duplicados:"," ",l.jsx("strong",{children:(()=>{const S=be(A),L=P(A);if(typeof S=="number"&&typeof L=="number")return S-L;const $=A.series_total_dedup;return typeof $=="number"?$:"N/D"})()})]})]}):null]})]})})]}):null,c.length>0&&l.jsxs("div",{className:"mT-20",children:[l.jsx("h6",{className:"c-grey-900",children:"Eventos"}),l.jsx("div",{className:"bd p-10",style:{maxHeight:240,overflow:"auto"},children:c.map((S,L)=>{const $=String(S.message??""),X=String(S.code??""),le=String(S.detail??""),je=fe($||le||""),Z=je.toLowerCase(),ke=W(X),qe=fe(le),We=[];ke&&!Z.includes(ke.toLowerCase())&&We.push(ke),qe&&!Z.includes(qe.toLowerCase())&&We.push(qe);const Mt=We.join("  ");return l.jsxs("div",{className:"small",children:[si(S.type),"  ",je,Mt?l.jsxs("span",{className:"text-muted",children:[" (",Mt,")"]}):null]},L)})})]})]})})})})}const lD="America/Lima";function iD(e){if(!e)return null;const a=/filename\*=UTF-8''([^;]+)|filename="([^"]+)"/i.exec(e),s=a?.[1]??a?.[2];if(!s)return null;try{return decodeURIComponent(s)}catch{return s}}function oD(e,a){const s=window.URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(s)}function fm(e){if(!e)return"N/D";const s=/[zZ]$/.test(e)||/[+-]\d{2}:\d{2}$/.test(e)||/[+-]\d{4}$/.test(e)?e:`${e}Z`,i=new Date(s);if(Number.isNaN(i.getTime()))return String(e);const d=new Intl.DateTimeFormat("es-PE",{timeZone:lD,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(i),f=h=>d.find(v=>v.type===h)?.value||"";return`${f("day")}/${f("month")}/${f("year")} ${f("hour")}:${f("minute")}`}function Yl(e,a){const s=e?.[a];return typeof s=="number"?String(s):"N/D"}function Vc(e,a){const s=e?.[a];return typeof s=="string"&&s.trim()?s.trim():"N/D"}function Vy(e){const a=e?.series_duplicates_eliminated??e?.detail?.series_duplicates_eliminated??e?.series_duplcates_eliminated;return typeof a=="number"?a:null}const rN={MISSING_HEADERS:"Faltan cabeceras requeridas",FILE_INVALID:"Archivo invlido",INVALID_OI_FILENAME:"Nombre de archivo invlido",EMPTY_FILE:"Archivo vaco"};function cD(e){const a=String(e??"").trim().toUpperCase();return a?rN[a]??a:""}function uD(e){if(!e)return"";let a=ll(e);a=a.replace(/\bERROR\b/gi,"Error");for(const[s,i]of Object.entries(rN))a=a.replace(new RegExp(`\\b${s}\\b`,"g"),i);return a}function dD(e,a){const s=cD(e),i=uD(a);return i?s&&!i.toLowerCase().includes(s.toLowerCase())?`${s}: ${i}`:i:s||"N/D"}function Zy(e,a,s){const i=String(s??"").trim();if(i)return i;const c=Number(e);if(!Number.isFinite(c)||c<=0)return"N/D";const d=Number(a);return Number.isFinite(d)&&d>0?`OI-${String(c).padStart(4,"0")}-${String(d).padStart(4,"0")}`:`OI-${String(c).padStart(4,"0")}`}function Gy(e){const a=e?.rows_total_read??e?.totals_input?.rows_read;return typeof a=="number"?a:null}function Py(e){const a=(e||"").toUpperCase();return a==="COMPLETADO"?"badge bg-success":a==="ERROR"?"badge bg-danger":a==="CANCELADO"?"badge bg-warning vi-text-contrast":"badge bg-secondary"}function fD(e){try{return JSON.stringify(e??null,null,2)}catch{return String(e)}}function mD(){const e=nl(),a=Bn(),s=Ga(a?.role,a?.username),i=wu(a),c=s==="admin"||s==="administrator",[d,f]=g.useState([]),[h,v]=g.useState(0),[p,y]=g.useState(!1),[x,j]=g.useState(""),[F,E]=g.useState(0),[C,T]=g.useState(""),[q,A]=g.useState(""),[te,U]=g.useState(""),[D,P]=g.useState(""),[B,W]=g.useState(""),[fe,De]=g.useState(20),[_e,be]=g.useState(1),[we,Ce]=g.useState(!1),[Ue,M]=g.useState(!1),[V,ae]=g.useState(""),[ce,Re]=g.useState(null),[_,K]=g.useState(!1),[ue,Q]=g.useState(()=>({q:"",dateFrom:"",dateTo:"",source:"",status:""})),Ee=g.useMemo(()=>(_e-1)*fe,[_e,fe]),Ne=ce?.summary_json,Be=g.useMemo(()=>(Array.isArray(Ne?.audit_by_oi)?Ne.audit_by_oi:[]).filter(S=>S?.status==="OK"&&String(S?.source??"").toUpperCase()==="BASES").slice().sort((S,L)=>{const $=Number(S?.oi_year),X=Number(L?.oi_year),le=Number.isFinite($)&&$>0,je=Number.isFinite(X)&&X>0;if(le&&je&&$!==X)return $-X;if(le&&!je)return-1;if(!le&&je)return 1;const Z=Number(S?.oi_num),ke=Number(L?.oi_num),qe=Number.isFinite(Z),We=Number.isFinite(ke);if(qe&&We&&Z!==ke)return Z-ke;if(qe&&!We)return-1;if(!qe&&We)return 1;const Mt=String(S?.oi_tag??S?.oi??S?.oi_num??"").toUpperCase(),ye=String(L?.oi_tag??L?.oi??L?.oi_num??"").toUpperCase();return Mt.localeCompare(ye)}),[Ne]),Ze=g.useMemo(()=>(Array.isArray(Ne?.files_rejected)?Ne.files_rejected:[]).slice().sort((S,L)=>{const $=String(S?.oi??S?.filename??"").toUpperCase(),X=String(L?.oi??L?.filename??"").toUpperCase();return $.localeCompare(X)}),[Ne]),he=g.useMemo(()=>{const z=()=>({files_total:0,files_ok:0,files_error:0,rows_read:0,conformes:0,no_conformes:0,rows_ignored_invalid_estado:0}),S=Ne?.by_source;if(S&&typeof S=="object")return S;const L={BASES:z(),GASELAG:z()},$=Array.isArray(Ne?.audit_by_oi)?Ne.audit_by_oi:[];for(const le of $){if(le?.status!=="OK")continue;const Z=String(le?.source??"").toUpperCase()==="GASELAG"?"GASELAG":"BASES";L[Z].files_ok+=1,L[Z].rows_read+=Number(le?.rows_read??0)||0,L[Z].conformes+=Number(le?.conformes??0)||0,L[Z].no_conformes+=Number(le?.no_conformes??0)||0,L[Z].rows_ignored_invalid_estado+=Number(le?.rows_ignored_invalid_estado??0)||0}const X=Array.isArray(Ne?.files_rejected)?Ne.files_rejected:[];for(const le of X){const Z=String(le?.source??"").toUpperCase()==="GASELAG"?"GASELAG":"BASES";L[Z].files_error+=1}for(const le of["BASES","GASELAG"])L[le].files_total=L[le].files_ok+L[le].files_error;return L},[Ne]);g.useEffect(()=>{let z=!1;return y(!0),j(""),Zm({limit:fe,offset:Ee,include_deleted:!1,q:ue.q||void 0,dateFrom:ue.dateFrom||void 0,dateTo:ue.dateTo||void 0,source:ue.source||void 0,status:ue.status||void 0}).then(S=>{z||(f(Array.isArray(S?.items)?S.items:[]),v(typeof S?.total=="number"?S.total:0))}).catch(S=>{if(z)return;const L=S,$=L.response?.data?.detail||L.message||"No se pudo cargar historial.";j($)}).finally(()=>{z||y(!1)}),()=>{z=!0}},[ue,Ee,fe,F]);const Me=()=>{Q({q:C.trim(),dateFrom:q.trim(),dateTo:te.trim(),source:D.trim(),status:B.trim()}),be(1)},Fe=()=>{T(""),A(""),U(""),P(""),W(""),Q({q:"",dateFrom:"",dateTo:"",source:"",status:""}),be(1),E(z=>z+1)},Qe=()=>E(z=>z+1),lt=async(z,S)=>{try{j("");const L=await p2(z,S),$=L.headers["content-disposition"],X=L.headers["x-file-name"],le=iD($)??X??`${S}.bin`;oD(L.data,le)}catch(L){const $=L;if(bt.isCancel($))return;const X=$.response?.data?.detail||$.message||"No se pudo descargar.";j(X)}},ze=async z=>{if(c&&window.confirm("Eliminar la corrida del historial?"))try{j(""),await g2(z),Qe()}catch(S){const L=S;if(bt.isCancel(L))return;const $=L.response?.data?.detail||L.message||"No se pudo eliminar.";j($)}},Ge=async z=>{try{Ce(!0),M(!0),ae(""),Re(null),K(!1);const S=await h2(z);Re(S)}catch(S){const L=S;if(bt.isCancel(L))return;const $=L.response?.data?.detail||L.message||"No se pudo cargar el reporte.";ae($)}finally{M(!1)}},me=()=>{Ce(!1)};g.useEffect(()=>{if(!we)return;const z=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=z}},[we]);const Ie=h===0?0:Ee+1,Ae=h===0?0:Math.min(Ee+d.length,h),Xe=_e>1,R=Ee+d.length<h;return l.jsxs("div",{className:"container-fluid",children:[we?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:l.jsx("div",{className:"modal-dialog modal-xl modal-dialog-scrollable",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{className:"modal-title",children:"Reporte de auditora (LOG-01)"}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:me})]}),l.jsx("div",{className:"modal-body",children:Ue?l.jsx("div",{className:"text-muted",children:"Cargando reporte..."}):V?l.jsx("div",{className:"alert alert-danger mB-0",children:V}):ce?(()=>{const z=ce.summary_json,S=Vc(z,"serie_ini"),L=Vc(z,"serie_fin"),$=Yl(z,"series_total_dedup"),X=Yl(z,"series_conformes"),le=Yl(z,"series_no_conformes_final");return l.jsxs("div",{className:"d-flex flex-column gap-15",children:[l.jsxs("div",{className:"d-flex flex-wrap gap-10 align-items-center",children:[l.jsxs("span",{className:"badge bg-secondary",children:["Run ID: ",ce.id]}),l.jsx("span",{className:Py(ce.status),children:ce.status}),l.jsxs("span",{className:"small text-muted",children:[fm(ce.created_at),ce.completed_at?`  ${fm(ce.completed_at)}`:""]})]}),l.jsx("div",{className:"card",children:l.jsx("div",{className:"card-body",children:l.jsxs("div",{className:"d-flex flex-wrap gap-15",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-muted small",children:"Serie inicial"}),l.jsx("div",{children:l.jsx("strong",{children:S})})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-muted small",children:"Serie final"}),l.jsx("div",{children:l.jsx("strong",{children:L})})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-muted small",children:"nicas (post-dedupe)"}),l.jsx("div",{children:l.jsx("strong",{children:$})})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-muted small",children:"Conformes finales"}),l.jsx("div",{children:l.jsx("strong",{children:X})})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-muted small",children:"No conformes finales"}),l.jsx("div",{children:l.jsx("strong",{children:le})})]})]})})}),l.jsx("div",{className:"bd p-10",children:l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6",children:[l.jsx("div",{className:"small text-muted",children:"Archivos"}),l.jsxs("div",{className:"small",children:["Total: ",l.jsx("strong",{children:z?.files_total??"N/D"}),"  OK:"," ",l.jsx("strong",{children:z?.files_ok??"N/D"}),"  Rechazados:"," ",l.jsx("strong",{children:z?.files_error??"N/D"})]}),l.jsx("div",{className:"mT-10 small text-muted",children:"Totales por tipo (origen)"}),l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Tipo"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Archivos"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ledos"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ignorados"})]})}),l.jsx("tbody",{children:["BASES","GASELAG"].map(je=>{const Z=he?.[je]??{},ke=Z?.files_total??Number(Z?.files_ok??0)+Number(Z?.files_error??0);return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:je})}),l.jsxs("td",{style:{whiteSpace:"nowrap"},children:[l.jsx("strong",{children:ke??0})," ",l.jsxs("span",{className:"text-muted",children:["(OK: ",Z?.files_ok??0,"  Rech: ",Z?.files_error??0,")"]})]}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:Z?.rows_read??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:Z?.conformes??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:Z?.no_conformes??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:Z?.rows_ignored_invalid_estado??0})})]},je)})})]})}),l.jsx("div",{className:"mT-10 small text-muted",children:"No conformes por OI (origen)  BASES"}),Be.length>0?l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"OI"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ledos"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"})]})}),l.jsx("tbody",{children:Be.map((je,Z)=>l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:Zy(je?.oi_num,je?.oi_year,je?.oi_tag??je?.oi)}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:je?.rows_read??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:je?.conformes??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:je?.no_conformes??0})})]},Z))})]})}):l.jsx("div",{className:"small text-muted",children:"N/D"}),Number(he?.GASELAG?.rows_read??0)>0?l.jsxs("div",{className:"mT-10 small",children:[l.jsx("span",{className:"text-muted",children:"GASELAG (origen):"})," ","Ledos: ",l.jsx("strong",{children:he.GASELAG.rows_read??0}),"  Conformes:"," ",l.jsx("strong",{children:he.GASELAG.conformes??0}),"  No conformes:"," ",l.jsx("strong",{children:he.GASELAG.no_conformes??0}),"  Ignorados(estado):"," ",l.jsx("strong",{children:he.GASELAG.rows_ignored_invalid_estado??0})]}):null,l.jsxs("div",{className:"col-12 mT-10 p-0",children:[l.jsx("div",{className:"small text-muted",children:"Totales (origen)"}),l.jsxs("div",{className:"small",children:["Registros ledos:"," ",l.jsx("strong",{children:z?.totals_input?.rows_read??"N/D"}),"  Conformes:"," ",l.jsx("strong",{children:z?.totals_input?.conformes??"N/D"}),"  No conformes:"," ",l.jsx("strong",{children:z?.totals_input?.no_conformes??"N/D"})]})]})]}),l.jsxs("div",{className:"col-md-6 mT-10 mT-md-0",children:[Ze.length>0?l.jsxs("div",{className:"mT-15",children:[l.jsx("div",{className:"small text-muted",children:"Archivos rechazados"}),l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"OI / Archivo"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Motivo"})]})}),l.jsx("tbody",{children:Ze.map((je,Z)=>{const ke=dD(je?.code,je?.detail),qe=String(je?.source??"").toUpperCase();let We=je?.filename??"N/D";if(qe==="BASES"){const Mt=Number(je?.oi_num),ye=Zy(Mt,je?.oi_year,je?.oi_tag??je?.oi);ye!=="N/D"&&(We=`${ye} / ${We}`)}else qe==="GASELAG"&&(We=`GASELAG / ${We}`);return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:We}),l.jsx("td",{children:ke})]},Z)})})]})})]}):null,l.jsx("div",{className:"small text-muted",children:"Resultado final (post-dedupe)"}),l.jsxs("div",{className:"small",children:["nicas (post-dedupe):"," ",l.jsx("strong",{children:z?.series_total_dedup??"N/D"}),"  Conformes finales:"," ",l.jsx("strong",{children:z?.series_conformes??"N/D"}),"  No conformes finales:"," ",l.jsx("strong",{children:z?.series_no_conformes_final??"N/D"})]}),l.jsx("div",{className:"mT-10",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>K(je=>!je),children:_?"Ocultar detalle tcnico":"Ver detalle tcnico"})}),_?l.jsxs("div",{className:"mT-10",children:[l.jsx("div",{className:"small text-muted",children:"Detalle tcnico (soporte)"}),l.jsxs("div",{className:"small",children:["Registros ledos (total):"," ",l.jsx("strong",{children:Gy(z)??"N/D"})," "," Duplicados eliminados:"," ",l.jsx("strong",{children:Vy(z)??"N/D"})," "," nicas = Ledos  Duplicados:"," ",l.jsx("strong",{children:(()=>{const je=Gy(z),Z=Vy(z);if(typeof je=="number"&&typeof Z=="number")return je-Z;const ke=z?.series_total_dedup;return typeof ke=="number"?ke:"N/D"})()})]})]}):null]})]})}),l.jsxs("details",{children:[l.jsx("summary",{className:"btn btn-sm btn-outline-auto",children:"Ver auditora completa (JSON)"}),l.jsx("pre",{className:"mT-10 small",style:{whiteSpace:"pre-wrap"},children:fD(ce.summary_json)})]})]})})():l.jsx("div",{className:"text-muted",children:"Sin datos de reporte."})}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{type:"button",className:"btn btn-outline-auto",onClick:me,children:"Cerrar"})})]})})}),l.jsx("div",{className:"modal-backdrop fade show",onClick:me})]}):null,l.jsx("div",{className:"row",children:l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[l.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between mB-10 gap-10",children:[l.jsx("h4",{className:"c-grey-900 mB-0",children:"Historial de consolidaciones LOG-01"}),l.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>e("/logistica/log01/excel"),children:"Nueva consolidacin"})]}),x?l.jsx("div",{className:"alert alert-danger",role:"alert",children:x}):null,l.jsxs("form",{className:"row g-2 align-items-end",onSubmit:z=>{z.preventDefault(),Me()},children:[l.jsxs("div",{className:"col-md-3",children:[l.jsx("label",{className:"form-label",children:"Buscar"}),l.jsx("input",{className:"form-control form-control-sm",value:C,onChange:z=>T(z.target.value),onKeyDown:z=>{z.key==="Enter"&&Me()},placeholder:"Usuario, serie inicial, serie final..."})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Fecha desde"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:q,onChange:z=>A(z.target.value)})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Fecha hasta"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:te,onChange:z=>U(z.target.value)})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Origen"}),l.jsxs("select",{className:"form-select form-select-sm",value:D,onChange:z=>P(z.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"AUTO",children:"AUTO"}),l.jsx("option",{value:"BASES",children:"BASES"}),l.jsx("option",{value:"GASELAG",children:"GASELAG"})]})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Estado"}),l.jsxs("select",{className:"form-select form-select-sm",value:B,onChange:z=>W(z.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"COMPLETADO",children:"COMPLETADO"}),l.jsx("option",{value:"CANCELADO",children:"CANCELADO"}),l.jsx("option",{value:"ERROR",children:"ERROR"})]})]}),l.jsxs("div",{className:"col-md-1",children:[l.jsx("label",{className:"form-label",children:"Mostrar"}),l.jsxs("select",{className:"form-select form-select-sm",value:fe,onChange:z=>{const S=Number(z.target.value);De(Number.isFinite(S)?S:20),be(1)},children:[l.jsx("option",{value:10,children:"10"}),l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"})]})]}),l.jsxs("div",{className:"col-12 d-flex flex-wrap gap-10 mT-5",children:[l.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:p,children:"Buscar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:Fe,children:"Limpiar filtros"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:Qe,children:"Recargar"})]})]}),l.jsxs("div",{className:"mT-15",children:[p?l.jsx("div",{className:"text-muted",children:"Cargando historial..."}):l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Fecha"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Usuario"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Estado"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:" Serie inic"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:" Serie fin "}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"nicas"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Acciones"})]})}),l.jsx("tbody",{children:d.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"text-muted small",children:"Sin registros."})}):d.map(z=>{const S=z.summary_json,L=Vc(S,"serie_ini"),$=Vc(S,"serie_fin"),X=Yl(S,"series_total_dedup"),le=Yl(S,"series_conformes"),je=Yl(S,"series_no_conformes_final"),Z=z.created_by_full_name||z.created_by_username||"N/D";return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:fm(z.created_at)}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:Z}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("span",{className:Py(z.status),children:z.status})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:L}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:$}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:X})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:le})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:je})}),l.jsx("td",{children:l.jsxs("div",{className:"d-flex gap-1 flex-wrap justify-content-end",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-success",onClick:()=>void lt(z.id,"excel"),children:"Excel"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void Ge(z.id),children:"Ver reporte"}),i?l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void lt(z.id,"no-conforme"),children:"No conforme"}):null,i?l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void lt(z.id,"manifiesto"),children:"Manifiesto"}):null,c?l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>void ze(z.id),children:"Eliminar"}):null]})})]},z.id)})})]})}),l.jsxs("div",{className:"d-flex align-items-center justify-content-between mT-10",children:[l.jsxs("div",{className:"small text-muted",children:["Mostrando ",Ie,"-",Ae," de ",h]}),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>be(z=>Math.max(1,z-1)),disabled:!Xe||p,children:"Anterior"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>be(z=>z+1),disabled:!R||p,children:"Siguiente"})]})]})]})]})})})]})}function Kl(e){return e===!0?"badge bg-success":e===!1?"badge bg-danger":"badge bg-secondary"}function hD(e){const a=(e||"").toString().trim().toUpperCase();return a?a==="COMPLETADO"||a==="COMPLETED"?"badge bg-success":a==="ERROR"||a==="FALLIDO"||a==="FAILED"?"badge bg-danger":a==="PROCESANDO"||a==="RUNNING"||a==="EN_PROCESO"?"badge bg-warning text-dark":"badge bg-secondary":"badge bg-secondary"}const mm=250,hm="medileser_log02_rutas_v1",Gm="America/Lima",vr=typeof window<"u"&&new URLSearchParams(window.location.search).get("debugProgress")==="1",pD="[log02-copy-progress]",Qy=2e3,gD=500,bD=600;function br(...e){vr&&console.log(pD,...e)}function Yy(e){if(!e)return"N/D";const s=/[zZ]$/.test(e)||/[+-]\d{2}:\d{2}$/.test(e)||/[+-]\d{4}$/.test(e)?e:`${e}Z`,i=new Date(s);if(Number.isNaN(i.getTime()))return String(e);const d=new Intl.DateTimeFormat("es-PE",{timeZone:Gm,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(i),f=h=>d.find(v=>v.type===h)?.value||"";return`${f("day")}/${f("month")}/${f("year")} ${f("hour")}:${f("minute")}`}function Ky(e){const a=e,s=String(a?.name||""),i=String(a?.message||a||"");return s==="AbortError"||/aborted/i.test(i)||/abort/i.test(i)}function vD(e){const a=e;if(!a)return!1;const s=(a.tagName||"").toLowerCase();return!!(s==="input"||s==="textarea"||s==="select"||a.isContentEditable)}async function io(e){const a=(e||"").trim();if(a)try{await navigator.clipboard.writeText(a);return}catch{const s=document.createElement("textarea");s.value=a,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)}}function yD(){const[e,a]=g.useState([""]),[s,i]=g.useState(""),[c,d]=g.useState("consolidate"),[f,h]=g.useState(0),[v,p]=g.useState("0"),[y,x]=g.useState(!1),[j,F]=g.useState(!1),[E,C]=g.useState(!1),[T,q]=g.useState(""),[A,te]=g.useState(null),[U,D]=g.useState(!1),[P,B]=g.useState(!1),[W,fe]=g.useState(!1),[De,_e]=g.useState(""),[be,we]=g.useState([]),[Ce,Ue]=g.useState(null),[M,V]=g.useState(!1),ae=g.useRef(0),ce=g.useRef(null),[Re,_]=g.useState(""),[K,ue]=g.useState(""),[Q,Ee]=g.useState(""),[Ne,Be]=g.useState(""),[Ze,he]=g.useState("COMPLETADO"),[Me,Fe]=g.useState(!1),[Qe,lt]=g.useState(""),[ze,Ge]=g.useState(0),[me,Ie]=g.useState(""),[Ae,Xe]=g.useState(""),[R,z]=g.useState(""),[S,L]=g.useState([]),[$,X]=g.useState([]),[le,je]=g.useState(null),Z=g.useRef(null),ke=g.useRef(!1),qe=g.useRef(!1),We=g.useRef(null),Mt=g.useRef(null),ye=g.useRef(!1),et=g.useRef(!1),Ut=g.useRef(-1),_t=g.useRef(-1),pn=g.useRef(""),An=g.useRef(null),aa=g.useRef(!1),In=g.useRef(""),it=g.useRef(0),Xn=g.useRef(!0),dn=g.useRef(""),[Vn,Nn]=g.useState(!1),[Zn,J]=g.useState("origen"),[se,Te]=g.useState(null),[He,rt]=g.useState([]),[ht,Je]=g.useState(""),[Ct,Bt]=g.useState(""),[Ot,an]=g.useState([]),[ut,dt]=g.useState(!1),[yt,zt]=g.useState(""),[qt,Jt]=g.useState(""),[gn,bn]=g.useState(""),[Ht,Mn]=g.useState(""),[Lt,sn]=g.useState(1),[Gn,jn]=g.useState(!1),[Et,Xa]=g.useState([]),rn=g.useMemo(()=>{const w=gn.trim().toLocaleLowerCase();return w?Ot.filter(Y=>(Y.name||"").toLocaleLowerCase().includes(w)):Ot},[Ot,gn]);g.useEffect(()=>{if(!Vn)return;if(!rn.length){qt&&Jt("");return}qt&&rn.some(Y=>Y.path===qt)||Jt(rn[0].path)},[Vn,rn,qt]),g.useEffect(()=>{try{const w=localStorage.getItem(hm);if(!w)return;const Y=JSON.parse(w),de=Array.isArray(Y.origenes)?Y.origenes:[],ve=typeof Y?.destino=="string"?Y.destino:"",Ve=Y?.output_mode==="keep_structure"?"keep_structure":"consolidate",Yt=typeof Y?.group_size=="number"&&Number.isFinite(Y.group_size)?Y.group_size:0,Zt=typeof Y?.generate_merged_pdfs=="boolean"?Y.generate_merged_pdfs:!1;de.length&&a(de),ve&&i(ve),d(Ve),h(Math.max(0,Math.trunc(Yt))),F(Zt)}catch{}},[]),g.useEffect(()=>{try{const w={origenes:e,destino:s,output_mode:c,group_size:Math.max(0,Math.trunc(f||0)),generate_merged_pdfs:j};localStorage.setItem(hm,JSON.stringify(w))}catch{}},[e,s,c,f,j]),g.useEffect(()=>(Xn.current=!0,()=>{Xn.current=!1,dn.current="",$n("unmount"),ua("unmount")}),[]),g.useEffect(()=>{if(!P){ce.current!=null&&(window.clearTimeout(ce.current),ce.current=null),ae.current=0,V(!1);return}if(W){ce.current!=null&&(window.clearTimeout(ce.current),ce.current=null),ae.current=Date.now(),V(!0);return}if(!M)return;const w=Date.now()-ae.current,Y=Math.max(0,bD-w);return ce.current!=null&&window.clearTimeout(ce.current),ce.current=window.setTimeout(()=>{ce.current=null,Xn.current&&V(!1)},Y),()=>{ce.current!=null&&(window.clearTimeout(ce.current),ce.current=null)}},[W,P,M]);function Cn(){a([""]),i(""),te(null),q(""),D(!1),Ue(null),d("consolidate"),h(0),F(!1),je(null),L([]),X([]),Xe(""),Ie(""),Ge(0),z(""),lt(""),sn(1),Xa([]),jn(!1);try{localStorage.removeItem(hm)}catch{}}function Jn(){a(w=>{const Y=new Set,de=[];for(const ve of w){const Ve=(ve||"").trim();if(!Ve)continue;const Yt=Ve.toLowerCase();Y.has(Yt)||(Y.add(Yt),de.push(Ve))}return de.length?de:[""]})}function Ja(){D(!0),Te(null),ys("origen")}function Vs(w){D(!0),Te(w),ys("origen")}function Wa(){D(!0),Te(null),ys("destino")}async function ls(w=5){_e(""),fe(!0);try{const Y=await Zm({limit:w,offset:0,include_deleted:!1,status:"COMPLETADO"}),de=Array.isArray(Y?.items)?Y.items:[];if(we(de),Ce?.id&&de.length){const ve=de.find(Ve=>Ve.id===Ce.id);ve&&Ue(ve)}}catch(Y){const de=Y,ve=de.response?.data?.detail||de.message||"No se pudo cargar las corridas.";_e(ve),we([])}finally{fe(!1)}}async function fn(){_e(""),fe(!0);try{const w=await Zm({limit:20,offset:0,include_deleted:!1,q:Re.trim()||void 0,dateFrom:K.trim()||void 0,dateTo:Q.trim()||void 0,source:Ne.trim()||void 0,status:Ze.trim()||void 0}),Y=Array.isArray(w?.items)?w.items:[];we(Y)}catch(w){const Y=w,de=Y.response?.data?.detail||Y.message||"No se pudo cargar las corridas.";_e(de),we([])}finally{fe(!1)}}function Sa(){B(!0),ls(5)}function Wn(w){Ue(w),B(!1),sn(Y=>Y<3?3:Y)}const Wt=g.useMemo(()=>e.map(w=>(w??"").trim()),[e]),is=g.useMemo(()=>Wt.filter(w=>w),[Wt]),oa=g.useMemo(()=>(s??"").trim(),[s]),Zs=g.useMemo(()=>is.length>0&&!!oa,[is.length,oa]);function wr(w,Y){a(de=>{const ve=de.slice();return ve[w]=Y,ve})}function vs(w){a(Y=>{if(Y.length<=1)return[""];const de=Y.slice();return de.splice(w,1),de})}g.useEffect(()=>{if(!Vn)return;function w(de){try{const ve=document.querySelector(`[data-folder-idx="${de}"]`);ve&&(ve.focus(),ve.scrollIntoView({block:"nearest"}))}catch{}}const Y=de=>{if(de.key==="Escape"){de.preventDefault(),Nn(!1);return}if(!vD(de.target)){if(de.key==="ArrowDown"||de.key==="ArrowUp"){if(!rn.length)return;de.preventDefault();const ve=rn.findIndex(_s=>_s.path===qt),Ve=ve>=0?ve:0,Yt=de.key==="ArrowDown"?Math.min(rn.length-1,Ve+1):Math.max(0,Ve-1),Zt=rn[Yt];if(!Zt)return;Jt(Zt.path),requestAnimationFrame(()=>w(Yt));return}if(de.key==="Enter"){if(!qt)return;const ve=rn.find(Ve=>Ve.path===qt);if(!ve)return;de.preventDefault(),Vt(ve.path);return}}};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[Vn,qt,ut]);async function ys(w){J(w),zt(""),Nn(!0),bn("");try{const de=(await b2()).roots||[];rt(de);const ve=de[0]||"";Je(ve),Bt(ve),Mn(ve),ve?await Vt(ve):(an([]),zt("No hay rutas raz configuradas para el explorador. Configure VI_LOG02_UNC_ROOTS en el servidor."))}catch(Y){const de=Y,ve=de.response?.data?.detail||de.message||"No se pudo cargar las rutas raz.";zt(ve),an([])}}async function Vt(w){if(zt(""),!w){an([]);return}try{dt(!0),Jt("");const Y=await v2(w);Bt(Y.path),Mn(Y.path);const de=Y.folders||[];an(de),Jt(de[0]?.path||"")}catch(Y){const de=Y,ve=de.response?.data?.detail||de.message||"No se pudo listar la carpeta.";zt(ve),an([])}finally{dt(!1)}}function _r(w){const Y=(w||"").replace(/[\\\/]+$/,""),de=Y.startsWith("\\\\"),ve=Y.split("\\").filter(Zt=>Zt.length>0);if(ve.length===0)return[];const Ve=[];if(de){const Zt=ve[0]||"",_s=ve[1]||"";if(Zt){const ds=`\\\\${Zt}`;Ve.push({label:`\\\\${Zt}`,path:ds})}if(Zt&&_s){let ds=`\\\\${Zt}\\${_s}`;Ve.push({label:_s,path:ds});for(let Ps=2;Ps<ve.length;Ps++)ds=`${ds}\\${ve[Ps]}`,Ve.push({label:ve[Ps],path:ds})}return Ve}let Yt=ve[0];Ve.push({label:ve[0],path:ve[0]});for(let Zt=1;Zt<ve.length;Zt++)Yt=`${Yt}\\${ve[Zt]}`,Ve.push({label:ve[Zt],path:Yt});return Ve}async function xs(){const w=(Ht||"").trim();w&&await Vt(w)}async function Ns(){const w=(Ct||"").trim();w&&await io(w)}function os(){const w=(Ct||"").replace(/[\\\/]+$/,""),Y=w.lastIndexOf("\\");if(Y<=0)return;const de=w.slice(0,Y);Vt(de)}function il(w){const Y=(w??Ct??"").trim();Y&&(Zn==="destino"?i(Y):a(de=>{const ve=Y.trim();if(!ve)return de;const Ve=de.slice();return se!==null&&se>=0&&se<Ve.length?(Ve[se]=ve,Ve):Ve.map(Zt=>(Zt||"").trim().toLowerCase()).includes(ve.toLowerCase())?Ve:Ve.length===1&&!(Ve[0]||"").trim()?[ve]:[...Ve,ve]}),Te(null),Nn(!1))}function ol(){const w=(Ct||"").trim();w&&il(w)}async function cs(){q(""),te(null),D(!0);const w=oa,Y=is;if(!Y.length){q("Debes ingresar al menos una ruta de origen.");return}if(!w){q("Debes ingresar una ruta de destino.");return}try{C(!0);const de=await y2({rutas_origen:Y,ruta_destino:w});te(de),de.ok?sn(ve=>ve<2?2:ve):q("Validacin incompleta: revisa los detalles de permisos y existencia.")}catch(de){const ve=de;if(bt.isCancel(ve))return;const Ve=ve.response?.data?.detail||ve.message||"No se pudo validar las rutas.";q(Ve)}finally{C(!1)}}const hi=g.useMemo(()=>!!A?.ok&&!!Ce?.id&&!Me,[A?.ok,Ce?.id,Me]);g.useEffect(()=>{sn(w=>Me||A?.ok&&Ce?.id&&w<3?3:A?.ok&&!Ce?.id&&w<2?2:w)},[A?.ok,Ce?.id,Me]);function cl(w){const Y=w?.cursor;if(typeof Y=="number"&&Number.isFinite(Y))return Y;if(typeof Y=="string"){const de=Number(Y);if(Number.isFinite(de))return de}return null}function ul(w){return w==null?!1:w<=_t.current?!0:(_t.current=w,w>Ut.current&&(Ut.current=w),!1)}function Er(w){const Y=w?.progress??w?.percent,de=typeof Y=="number"?Y:typeof Y=="string"?Number(Y):NaN;if(Number.isFinite(de)){const ve=Math.max(0,Math.min(100,de));Ge(Ve=>(vr&&Ve!==ve&&br("setCopyProgress",{prev:Ve,next:ve}),ve))}}function pi(w){const Y=String(w?.type||"");if(Er(w),Y==="status"||Y==="progress"){const de=w?.stage?String(w.stage):Y;if(de&&Ie(de),typeof w?.message=="string"&&w.message&&Xe(w.message),de){const ve=de.toLowerCase();(ve==="cancelado"||ve==="cancelled")&&(ke.current=!0,dn.current="",Fe(!1),$n("cancelled"),ua("cancelled"))}return}if(Y==="oi"){typeof w?.oi=="string"&&z(w.oi);return}if(Y==="oi_warn"){const de=String(w?.oi||""),ve=String(w?.message||""),Ve=w?.code?String(w.code):void 0;de&&ve&&L(Yt=>[...Yt,{oi:de,code:Ve,message:ve}]);return}if(Y==="oi_error"||Y==="file_error"){const de=w?.oi?String(w.oi):void 0,ve=w?.file?String(w.file):void 0,Ve=String(w?.message||"Error");X(Yt=>[...Yt,{oi:de,file:ve,message:Ve}]);return}if(Y==="error"){const de=String(w?.message||"Fallo en el proceso.");X(ve=>[...ve,{message:de}]),Xe(de),Ie("error"),Fe(!1),$n("error_event"),ua("error_event");return}if(Y==="complete"){qe.current=!0,typeof w?.message=="string"&&Xe(w.message),Ie("completado"),Ge(100),je(w?.audit??null),Fe(!1),$n("complete"),ua("complete");return}}function dl(w,Y="stream"){const de=cl(w),ve=String(w?.type||""),Ve=w?.stage?String(w.stage):"";vr&&br("event",{source:Y,type:ve,stage:Ve,progress:w?.progress,percent:w?.percent,cursor:de});const Yt=_t.current;if(ul(de)){vr&&br("skip_event",{source:Y,cursor:de,lastCursor:Yt});return}if(pi(w),ve==="status"||ve==="progress"||ve==="oi"||ve==="oi_warn"||ve==="oi_error"||ve==="file_error"||ve==="error"||ve==="complete"){const _s=typeof w?.message=="string"?w.message:void 0,ds=typeof Ve=="string"&&Ve?ge(Ve):void 0,Ps=typeof w?.oi=="string"?w.oi:void 0,hl=w?.progress??w?.percent,Ro=typeof hl=="number"?hl:typeof hl=="string"?Number(hl):NaN,To=Number.isFinite(Ro)?Math.max(0,Math.min(100,Ro)):void 0;Xa(Mu=>{const pl=[...Mu,{ts:Date.now(),source:Y,type:ve,stage:ds,message:_s,oi:Ps,progress:To}];return pl.length>mm&&pl.splice(0,pl.length-mm),pl})}}function $n(w){if(vr&&br("stop_polling",{reason:w,operationId:pn.current}),!!et.current){et.current=!1,We.current!=null&&(window.clearTimeout(We.current),We.current=null);try{Mt.current?.abort()}catch{}Mt.current=null,ye.current=!1,pn.current=""}}function ca(){An.current!=null&&(window.clearTimeout(An.current),An.current=null)}function wa(w){vr&&br("stream_closed",{reason:w,operationId:In.current}),aa.current=!1,In.current="",ca()}function ua(w){vr&&br("stop_stream",{reason:w,operationId:In.current}),wa(w);try{Z.current?.abort()}catch{}Z.current=null}function ka(w){aa.current&&(ca(),An.current=window.setTimeout(()=>{if(!aa.current)return;const Y=Date.now()-it.current;if(Y>=Qy){br("stream_silent_fallback",{idleMs:Y,operationId:w}),ua("stream_silent"),!qe.current&&!ke.current&&Gs(w,"stream_silent");return}ka(w)},Qy))}function us(w){it.current=Date.now(),aa.current&&ka(w)}function Ar(w){et.current&&(We.current!=null&&window.clearTimeout(We.current),We.current=window.setTimeout(()=>{Cr()},w))}async function Cr(){if(!et.current||ye.current)return;const w=pn.current;if(!w){$n("no_operation_id");return}if(dn.current!==w){$n("operation_mismatch");return}ye.current=!0;try{const Y=await j2(w,Ut.current,Mt.current?.signal);Ut.current=Y.cursor_next;for(const de of Y.events||[])dl(de,"poll");if(Y.done&&(!Y.events||Y.events.length===0)){$n("done");return}}catch(Y){if(ke.current||qe.current)return;if(Y?.name!=="AbortError"){const ve=Y,Ve=ve.response?.data?.detail||ve.message||"No se pudo leer el progreso.";X(Yt=>[...Yt,{message:Ve}]),Ie("error"),Xe(Ve),Fe(!1),$n("poll_error")}}finally{ye.current=!1,et.current&&Ar(gD)}}function Gs(w,Y){dn.current===w&&(et.current||(et.current=!0,pn.current=w,Mt.current=new AbortController,Ut.current=Math.max(Ut.current,_t.current),vr&&br("start_polling",{operationId:w,reason:Y}),Ar(0)))}async function js(){if(q(""),!A?.ok){q("Debes validar rutas correctamente antes de iniciar el copiado.");return}if(!Ce?.id){q("Debes seleccionar una corrida de LOG-01 (Historial) para usar su manifiesto.");return}const w=is,Y=oa;if(!w.length||!Y){q("Completa orgenes y destino antes de iniciar.");return}ke.current=!1,qe.current=!1,X([]),L([]),je(null),Ie("inicio"),Xe("Iniciando copiado..."),Ge(0),z(""),lt(""),Xa([]),jn(!1),ua("reset"),$n("reset"),dn.current="",Ut.current=-1,_t.current=-1,Fe(!0);try{const ve=(await x2({run_id:Ce.id,rutas_origen:w,ruta_destino:Y,output_mode:c,group_size:Math.max(0,Math.trunc(f||0)),generate_merged_pdfs:c==="consolidate"?j:!1})).operation_id;lt(ve),dn.current=ve;const Ve=new AbortController;Z.current=Ve,aa.current=!0,In.current=ve,it.current=Date.now(),ka(ve),N2(ve,Zt=>{Xn.current&&dn.current===ve&&(us(ve),dl(Zt,"stream"))},Ve.signal).then(()=>{dn.current===ve&&(wa("stream_closed"),!qe.current&&!ke.current&&Gs(ve,"stream_closed"))}).catch(Zt=>{if(dn.current===ve){if(Ky(Zt)||ke.current||qe.current){wa("stream_aborted");return}wa("stream_error"),Gs(ve,"stream_error")}})}catch(de){if(ke.current||qe.current||Ky(de))return;const ve=de,Ve=ve.response?.data?.detail||ve.message||"No se pudo iniciar/leer el progreso.";X(Yt=>[...Yt,{message:Ve}]),Ie("error"),Xe(Ve),ua("start_error"),$n("start_error"),Fe(!1)}}async function da(){if(Qe){ke.current=!0,dn.current="";try{await S2(Qe)}catch{}try{Z.current?.abort()}catch{}ua("user_cancel"),$n("user_cancel"),Fe(!1),Ie("cancelado"),Xe("Cancelado por el usuario.")}}const _a=g.useMemo(()=>{if(!A)return null;const w=(A.origenes||[]).filter(ve=>ve.existe&&ve.lectura).length,Y=(A.origenes||[]).length,de=!!(A.destino?.existe&&A.destino?.es_directorio&&A.destino?.lectura&&A.destino?.escritura);return{okOrigenes:w,totalOrigenes:Y,okDestino:de}},[A]);async function Ss(){if(!A)return;const w=[];w.push("LOG-02 - Resultado de validacin"),w.push("");for(const ve of A.origenes||[])w.push(`ORIGEN | ${ve.ruta} | existe=${ve.existe?"SI":"NO"} | lectura=${ve.lectura?"SI":"NO"} | detalle=${ve.detalle||""}`);const Y=A.destino;w.push(`DESTINO | ${Y?.ruta||""} | existe=${Y?.existe?"SI":"NO"} | lectura=${Y?.lectura?"SI":"NO"} | escritura=${Y?.escritura?"SI":"NO"} | detalle=${Y?.detalle||""}`);const de=w.join(`
`);await io(de)}async function Ma(){const w=[];w.push("LOG-02 - Estado de copiado (PB-LOG-015)"),w.push(`operation_id: ${Qe||"N/D"}`),w.push(`progreso: ${Number.isFinite(ze)?ze.toFixed(0):"0"}%`),w.push(`estado: ${me||""}`),R&&w.push(`OI: ${R}`),Ae&&w.push(`mensaje: ${Ae}`),await io(w.join(`
`))}function O(w){const Y=String(w||""),de=Y.match(/(\d+)\s*\/\s*(\d+)\s*PDFs?/i),ve=Y.match(/(\d+)\s*\/\s*(\d+)\s*(?:OIs?|OI)/i)||Y.match(/\b(\d+)\s*\/\s*(\d+)\b/),Ve=de?{done:Number(de[1]),total:Number(de[2])}:null,Yt=ve?{done:Number(ve[1]),total:Number(ve[2])}:null;return{pdf:Ve,oi:Yt}}const H=g.useMemo(()=>{const w=O(Ae||"");return{pdfDone:w.pdf?.done,pdfTotal:w.pdf?.total,oiDone:w.oi?.done,oiTotal:w.oi?.total}},[Ae]);function ge(w){const Y=(w||"").trim();return Y?tl?tl(Y):Y:""}async function Le(){const w=[];w.push("LOG-02 - Detalle en vivo (ltimos eventos)"),w.push("");for(const de of Et.slice(-80)){const Ve=new Date(de.ts).toLocaleString("es-PE",{timeZone:Gm,hour12:!1});w.push(`${Ve} | ${de.source} | ${de.type}${de.stage?` | ${de.stage}`:""}${de.oi?` | oi=${de.oi}`:""}${typeof de.progress=="number"?` | ${Math.round(de.progress)}%`:""}${de.message?` | ${de.message}`:""}`)}const Y=w.join(`
`);try{await navigator.clipboard.writeText(Y)}catch{try{const de=document.createElement("textarea");de.value=Y,document.body.appendChild(de),de.select(),document.execCommand("copy"),document.body.removeChild(de)}catch{}}}const at=!!A?.ok,vt=!!A?.ok&&!!Ce?.id,ot=c!=="consolidate",Rt=Math.max(0,Math.trunc(f||0));g.useEffect(()=>{y||p(String(Rt))},[Rt,y]),g.useEffect(()=>{ot&&y&&(x(!1),p(String(Rt)))},[ot,y,Rt]);function Sn(w){w===2&&!at||w===3&&!vt||sn(w)}const jt=A?.ok?Ce?.id?"":"Falta seleccionar corrida":"Falta validar rutas",[ws,fl]=g.useState(!1),ml=async w=>{const Y=Qe;if(Y)try{fl(!0);const de=await w2(Y,w),ve=window.URL.createObjectURL(de),Ve=document.createElement("a");Ve.href=ve,Ve.download=`LOG02_AUDITORIA_${Y}.${w}`,document.body.appendChild(Ve),Ve.click(),Ve.remove(),window.URL.revokeObjectURL(ve)}finally{fl(!1)}};return l.jsxs("div",{className:"container-fluid",children:[l.jsx("div",{className:"row",children:l.jsxs("div",{className:"col-12",children:[l.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Filtrado de certificados PDF (LOG-02)"}),l.jsxs("div",{className:"text-muted small",children:["Este mdulo se orienta a ",l.jsx("strong",{children:"copiar"})," y ",l.jsx("strong",{children:"filtrar"})," certificados PDF desde una",l.jsx("strong",{children:" carpeta compartida"})," (no ZIP).",l.jsx("br",{}),"Configura las rutas UNC y valida accesos antes de iniciar el filtrado."]}),T?l.jsx("div",{className:"alert alert-danger mT-15",role:"alert",children:T}):null,l.jsxs("div",{className:"vi-wizard-header mT-15",children:[l.jsxs("ul",{className:"nav nav-pills vi-stepper",role:"tablist","aria-label":"Flujo LOG-02",children:[l.jsx("li",{className:"nav-item",role:"presentation",children:l.jsxs("button",{type:"button",className:"nav-link "+(Lt===1?"active":""),onClick:()=>Sn(1),children:[l.jsx("span",{className:"vi-step-num",children:"1"})," Rutas"]})}),l.jsx("li",{className:"nav-item",role:"presentation",children:l.jsxs("button",{type:"button",className:"nav-link "+(Lt===2?"active":""),onClick:()=>Sn(2),disabled:!at,title:at?"":"Primero valida rutas",children:[l.jsx("span",{className:"vi-step-num",children:"2"})," Corrida LOG-01"]})}),l.jsx("li",{className:"nav-item",role:"presentation",children:l.jsxs("button",{type:"button",className:"nav-link "+(Lt===3?"active":""),onClick:()=>Sn(3),disabled:!vt,title:vt?"":"Falta validar rutas o elegir corrida",children:[l.jsx("span",{className:"vi-step-num",children:"3"})," Ejecucin"]})})]}),l.jsxs("div",{className:"small text-muted mT-5",children:["Flujo recomendado: ",l.jsx("strong",{children:"1) Validar rutas"}),"  ",l.jsx("strong",{children:"2) Elegir corrida"})," "," ",l.jsx("strong",{children:"3) Iniciar copiado"}),"."]})]}),l.jsxs("div",{className:"accordion vi-wizard mT-15",id:"log02Wizard",children:[l.jsxs("div",{className:"accordion-item",children:[l.jsx("h2",{className:"accordion-header",id:"log02Step1Head",children:l.jsx("button",{className:"accordion-button "+(Lt===1?"":"collapsed"),type:"button",onClick:()=>Sn(1),children:l.jsxs("span",{className:"d-inline-flex align-items-center gap-10",children:[l.jsx("span",{className:"vi-step-num",children:"1"}),l.jsx("span",{className:"vi-step-title",children:"Rutas UNC"}),A?.ok?l.jsx("span",{className:"badge bg-success",children:"OK"}):A?l.jsx("span",{className:"badge bg-danger",children:"Revisar"}):l.jsx("span",{className:"badge bg-secondary",children:"Pendiente"})]})})}),l.jsx("div",{id:"log02Step1",className:"accordion-collapse collapse "+(Lt===1?"show":""),"aria-labelledby":"log02Step1Head","data-bs-parent":"#log02Wizard",children:l.jsx("div",{className:"accordion-body",children:l.jsxs("div",{className:"row g-3",children:[l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"vi-card",children:[l.jsx("h6",{className:"c-grey-900 mB-10",children:"Rutas UNC"}),l.jsxs("div",{className:"row g-2",children:[l.jsxs("div",{className:"col-12",children:[l.jsx("label",{className:"form-label",children:"Rutas origen (UNC)  lectura"}),e.map((w,Y)=>l.jsx("div",{className:"mB-10",children:l.jsxs("div",{className:"d-flex gap-10 align-items-center",children:[l.jsxs("div",{className:"flex-grow-1",children:[l.jsx("input",{className:"form-control form-control-sm"+(U&&!Wt[Y]?" is-invalid":""),value:w,onChange:de=>wr(Y,de.target.value),placeholder:"\\\\SERVIDOR\\Compartido\\Certificados",disabled:E}),U&&!Wt[Y]?l.jsx("div",{className:"small text-danger mT-5",children:"Requerido"}):null]}),l.jsxs("div",{className:"btn-group",role:"group","aria-label":"Acciones origen",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void io((w||"").trim()),disabled:E||!(w||"").trim(),title:"Copiar ruta",style:{minWidth:84},children:"Copiar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>Vs(Y),disabled:E,title:"Elegir carpeta",style:{minWidth:84},children:(w||"").trim()?"Editar":"Agregar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>vs(Y),disabled:E,title:"Quitar ruta",style:{minWidth:52},children:""})]})]})},Y)),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:Ja,disabled:E,title:"Agregar origen",children:"Agregar origen"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:Jn,disabled:E,title:"Quitar duplicados (solo UI)",children:"Quitar duplicados"})]}),l.jsxs("div",{className:"small text-muted",children:["Nota: estas rutas deben ser accesibles ",l.jsx("strong",{children:"desde el servidor"})," donde corre el backend."]})]}),l.jsxs("div",{className:"col-12",children:[l.jsx("label",{className:"form-label",children:"Ruta destino (UNC)  lectura y escritura"}),l.jsxs("div",{className:"d-flex gap-10 mB-10",children:[l.jsxs("div",{className:"flex-grow-1",children:[l.jsx("input",{className:"form-control form-control-sm "+(U&&!oa?"is-invalid":""),value:s,onChange:w=>i(w.target.value),placeholder:"\\\\SERVIDOR\\Compartido\\Salida_LOG02",disabled:E}),U&&!oa?l.jsx("div",{className:"small text-danger mT-5",children:"Destino requerido."}):null]}),l.jsxs("div",{className:"btn-group",role:"group","aria-label":"Acciones destino",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void io(oa),disabled:E||!oa,title:"Copiar ruta",style:{minWidth:84},children:"Copiar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:Wa,disabled:E,title:"Elegir carpeta",style:{minWidth:84},children:oa?"Editar":"Agregar"})]})]}),l.jsxs("div",{className:"mT-5",children:[l.jsx("div",{className:"small text-muted mB-5",children:Zs?"Listo para validar.":"Completa orgenes y destino."}),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>void cs(),disabled:E||!Zs,children:E?"Validando...":"Validar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:Cn,disabled:E,title:"Limpia orgenes y destino",children:"Limpiar rutas"})]})]})]})]})]})}),l.jsx("div",{className:"col-12",children:A?l.jsxs("div",{className:"vi-card",children:[l.jsx("h6",{className:"c-grey-900 mB-10",children:"Resultado de validacin"}),_a?l.jsxs("div",{className:"d-flex flex-wrap gap-10 align-items-center mB-10",children:[l.jsxs("span",{className:"badge vi-surface-2 vi-text",children:["Orgenes OK: ",l.jsx("strong",{children:_a.okOrigenes})," / ",_a.totalOrigenes]}),l.jsxs("span",{className:_a.okDestino?"badge bg-success":"badge bg-danger",children:["Destino: ",_a.okDestino?"OK":"No OK"]}),A.ok?null:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void Ss(),children:"Copiar detalle"})]}):null,l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Tipo"}),l.jsx("th",{children:"Ruta"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Existe"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Lectura"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Escritura"}),l.jsx("th",{children:"Detalle"})]})}),l.jsxs("tbody",{children:[A.origenes.map((w,Y)=>l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:"Origen"})}),l.jsx("td",{style:{wordBreak:"break-all"},children:w.ruta||"N/D"}),l.jsx("td",{children:l.jsx("span",{className:Kl(w.existe),children:w.existe?"S":"No"})}),l.jsx("td",{children:l.jsx("span",{className:Kl(w.lectura),children:w.lectura?"S":"No"})}),l.jsx("td",{children:l.jsx("span",{className:Kl(null),children:""})}),l.jsx("td",{children:w.detalle||""})]},`o-${Y}`)),l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:"Destino"})}),l.jsx("td",{style:{wordBreak:"break-all"},children:A.destino.ruta||"N/D"}),l.jsx("td",{children:l.jsx("span",{className:Kl(A.destino.existe),children:A.destino.existe?"S":"No"})}),l.jsx("td",{children:l.jsx("span",{className:Kl(A.destino.lectura),children:A.destino.lectura?"S":"No"})}),l.jsx("td",{children:l.jsx("span",{className:Kl(!!A.destino.escritura),children:A.destino.escritura?"S":"No"})}),l.jsx("td",{children:A.destino.detalle||""})]})]})]})}),A.ok?l.jsx("div",{className:"alert alert-success mT-15",role:"alert",children:"Rutas validadas correctamente. Puedes continuar con la siguiente fase."}):l.jsx("div",{className:"alert alert-warning mT-15",role:"alert",children:"Hay rutas con problemas. Corrige existencia/permisos y vuelve a validar."})]}):l.jsx("div",{className:"vi-callout small",children:"An no has validado las rutas. Ejecuta Validar para continuar al paso 2."})})]})})})]}),l.jsxs("div",{className:"accordion-item",children:[l.jsx("h2",{className:"accordion-header",id:"log02Step2Head",children:l.jsx("button",{className:"accordion-button "+(Lt===2?"":"collapsed"),type:"button",onClick:()=>Sn(2),disabled:!at,children:l.jsxs("span",{className:"d-inline-flex align-items-center gap-10",children:[l.jsx("span",{className:"vi-step-num",children:"2"}),l.jsx("span",{className:"vi-step-title",children:"Corrida LOG-01"}),Ce?.id?l.jsx("span",{className:"badge bg-success",children:"Seleccionada"}):at?l.jsx("span",{className:"badge bg-warning vi-text-contrast",children:"Pendiente"}):l.jsx("span",{className:"badge bg-secondary",children:"Bloqueado"})]})})}),l.jsx("div",{id:"log02Step2",className:"accordion-collapse collapse "+(Lt===2?"show":""),"aria-labelledby":"log02Step2Head","data-bs-parent":"#log02Wizard",children:l.jsx("div",{className:"accordion-body",children:at?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between gap-10",children:[l.jsxs("div",{className:"vi-card flex-grow-1",children:[l.jsx("div",{className:"small text-muted",children:"Corrida seleccionada"}),Ce?.id?l.jsx("div",{className:"mT-5",children:l.jsxs("div",{className:"d-flex flex-wrap gap-10 align-items-center",children:[l.jsxs("span",{className:"badge vi-surface-2 vi-text",children:["#",Ce.id]}),Ce?.created_at?l.jsx("span",{className:"small text-muted",children:Yy(Ce.created_at)}):null,Ce?.source?l.jsx("span",{className:"small text-muted",children:Ce.source}):null,Ce?.status?l.jsx("span",{className:"small text-muted",children:Ce.status}):null]})}):l.jsx("div",{className:"text-muted small mT-5",children:"An no se ha elegido una corrida."})]}),l.jsx("div",{className:"d-flex gap-10",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:Sa,disabled:Me,children:Ce?.id?"Cambiar corrida":"Elegir corrida"})})]}),Ce?.id?null:l.jsx("div",{className:"vi-callout mT-10 small",children:"Debes seleccionar una corrida de LOG-01 (historial) para usar su manifiesto y NO CONFORME."})]}):l.jsx("div",{className:"vi-callout small",children:"Valida rutas para habilitar este paso."})})})]}),l.jsxs("div",{className:"accordion-item",children:[l.jsx("h2",{className:"accordion-header",id:"log02Step3Head",children:l.jsx("button",{className:"accordion-button "+(Lt===3?"":"collapsed"),type:"button",onClick:()=>Sn(3),disabled:!vt,children:l.jsxs("span",{className:"d-inline-flex align-items-center gap-10",children:[l.jsx("span",{className:"vi-step-num",children:"3"}),l.jsx("span",{className:"vi-step-title",children:"Ejecucin"}),Me?l.jsx("span",{className:"badge bg-primary",children:"En progreso"}):le?l.jsx("span",{className:"badge bg-success",children:"Completado"}):vt?l.jsx("span",{className:"badge bg-secondary",children:"Listo"}):l.jsx("span",{className:"badge bg-secondary",children:"Bloqueado"})]})})}),l.jsx("div",{id:"log02Step3",className:"accordion-collapse collapse "+(Lt===3?"show":""),"aria-labelledby":"log02Step3Head","data-bs-parent":"#log02Wizard",children:l.jsx("div",{className:"accordion-body",children:vt?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"vi-card mB-10",children:[l.jsx("h6",{className:"c-grey-900 mB-10",children:"Salida de copiado"}),l.jsxs("div",{className:"row g-2",children:[l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"form-check",children:[l.jsx("input",{className:"form-check-input",type:"radio",id:"log02-out-consolidate",name:"log02-output-mode",checked:c==="consolidate",disabled:Me,onChange:()=>d("consolidate")}),l.jsxs("label",{className:"form-check-label",htmlFor:"log02-out-consolidate",children:[l.jsx("strong",{children:"Consolidar en una sola carpeta"}),l.jsxs("span",{className:"text-muted small",children:[" ","(se crea <SERIE_INICIAL>_AL_<SERIE_FINAL>)"]})]})]})}),l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"form-check",children:[l.jsx("input",{className:"form-check-input",type:"radio",id:"log02-out-keep",name:"log02-output-mode",checked:c==="keep_structure",disabled:Me,onChange:()=>d("keep_structure")}),l.jsx("label",{className:"form-check-label",htmlFor:"log02-out-keep",children:l.jsx("strong",{children:"Mantener estructura de carpetas"})})]})}),l.jsxs("div",{className:"col-12 col-md-6",children:[l.jsx("label",{className:"form-label mT-10",children:"Agrupar en subcarpetas por N"}),l.jsx("input",{type:"number",min:0,step:1,className:"form-control form-control-sm",value:y?v:Rt,disabled:Me||ot,onChange:w=>{const Y=w.target.value;if(p(Y),Y==="")return;const de=Number(Y),ve=Number.isFinite(de)?Math.max(0,Math.trunc(de)):0;h(ve)},onFocus:()=>{x(!0),p(Rt===0?"":String(Rt))},onBlur:()=>{x(!1);const w=(v||"").trim();if(!w){h(0),p("0");return}const Y=Number(w),de=Number.isFinite(Y)?Math.max(0,Math.trunc(Y)):0;h(de),p(String(de))},placeholder:"0"}),l.jsx("div",{className:"small text-muted",children:ot?"Disponible solo en modo Consolidar.":Rt===0?"N=0: no se crean subcarpetas.":`Se crean subcarpetas de ${Rt} PDFs (ltimo grupo puede ser menor).`})]}),c==="consolidate"?l.jsxs("div",{className:"col-12",children:[l.jsxs("div",{className:"form-check mT-10",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"log02-gen-merged-pdfs",checked:j,onChange:w=>F(w.target.checked),disabled:Me}),l.jsxs("label",{className:"form-check-label",htmlFor:"log02-gen-merged-pdfs",children:[l.jsx("strong",{children:"Generar PDFs consolidados (merge)"})," ",l.jsx("span",{className:"text-muted small",children:Rt>0?"(1 PDF por grupo, guardado en la carpeta principal)":"(1 PDF global en la carpeta principal)"})]})]}),j?l.jsxs("div",{className:"alert alert-warning small mT-10 mB-0",children:[l.jsxs("div",{className:"mB-5",children:[l.jsx("strong",{children:"Advertencia:"})," consolidar muchos PDFs puede tardar y generar archivos muy grandes."]}),Rt>0?l.jsxs("div",{children:["Se generarn ",l.jsx("strong",{children:"PDFs por grupo"})," en la carpeta principal consolidada.",l.jsx("strong",{children:" No se genera PDF global"})," cuando hay subcarpetas."]}):l.jsxs("div",{children:["Se generar ",l.jsx("strong",{children:"1 PDF global"})," con todos los certificados. Si son muchos, considera usar subcarpetas (N > 0) para evitar un PDF gigante."]}),l.jsx("div",{className:"mT-5",children:"Si el volumen supera el lmite configurado, el merge se omitir y vers una advertencia en el progreso."})]}):null]}):null]})]}),l.jsxs("div",{className:"d-flex flex-wrap gap-10 mB-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>void js(),disabled:!hi,title:jt,children:Me?"Copiando...":"Iniciar copiado"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>void da(),disabled:!Me||!Qe,children:"Cancelar"})]}),l.jsxs("div",{className:"mT-10",children:[l.jsxs("h6",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),Me?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null,Qe?l.jsxs("span",{className:"badge vi-surface-2 vi-text",children:["op: ",l.jsx("strong",{children:Qe})]}):null,l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto ms-auto",onClick:()=>void Ma(),disabled:!me&&!Ae&&!Qe,title:"Copiar estado del progreso",children:"Copiar estado"})]}),l.jsxs("div",{className:"d-flex flex-wrap gap-10 mB-5",children:[l.jsxs("span",{className:"badge vi-surface-2 vi-text",children:["PDFs: ",H.pdfDone??""," / ",H.pdfTotal??""]}),l.jsxs("span",{className:"badge vi-surface-2 vi-text",children:["OIs: ",H.oiDone??""," / ",H.oiTotal??""]}),S.length?l.jsxs("span",{className:"badge bg-warning vi-text-contrast",children:["Advertencias: ",S.length]}):null,$.length?l.jsxs("span",{className:"badge bg-danger",children:["Errores: ",$.length]}):null]}),l.jsxs("div",{className:"small text-muted",children:[l.jsx("strong",{children:me?ge(me):Me?"En progreso":""}),Ae?l.jsxs("span",{children:["  ",Ae]}):null]}),l.jsxs("div",{className:"small text-muted",children:[R?`OI actual: ${R}`:"OI actual: ",H.pdfDone!=null&&H.pdfTotal!=null?l.jsxs("span",{children:["  ",H.pdfDone,"/",H.pdfTotal," PDFs"]}):null,H.oiDone!=null&&H.oiTotal!=null?l.jsxs("span",{children:["  ",H.oiDone,"/",H.oiTotal," OIs"]}):null]}),l.jsx("div",{className:"progress vi-progress",children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${Math.max(0,Math.min(100,ze))}%`},"aria-valuenow":ze,"aria-valuemin":0,"aria-valuemax":100,children:l.jsxs("span",{className:"vi-progress-label",children:[ze.toFixed(0),"%"]})})})]}),l.jsx("div",{className:"accordion mT-10",id:"log02LiveLog",children:l.jsxs("div",{className:"accordion-item",children:[l.jsx("h2",{className:"accordion-header",id:"log02LiveLogHead",children:l.jsxs("button",{className:"accordion-button vi-acc-sm "+(Gn?"":"collapsed"),type:"button",onClick:()=>jn(w=>!w),children:["Detalle en vivo ",Et.length?`(${Et.length})`:""]})}),l.jsx("div",{id:"log02LiveLogBody",className:"accordion-collapse collapse "+(Gn?"show":""),"aria-labelledby":"log02LiveLogHead",children:l.jsxs("div",{className:"accordion-body p-0",children:[l.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between gap-10 p-10",children:[l.jsxs("div",{className:"small text-muted",children:["ltimos eventos (mx ",mm,")"]}),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void Le(),disabled:!Et.length,children:"Copiar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>Xa([]),disabled:!Et.length,children:"Limpiar"})]})]}),l.jsx("div",{className:"vi-logbox",children:Et.length?Et.slice(-80).map((w,Y)=>{const Ve=`${new Date(w.ts).toLocaleString("es-PE",{timeZone:Gm,hour12:!1})} | ${w.source} | ${w.type}${w.stage?` | ${w.stage}`:""}${w.oi?` | oi=${w.oi}`:""}${typeof w.progress=="number"?` | ${Math.round(w.progress)}%`:""}${w.message?` | ${w.message}`:""}`;return l.jsx("div",{className:"vi-logline",children:Ve},`le-${Y}`)}):l.jsx("div",{className:"small text-muted",children:"Sin eventos an."})})]})})]})}),$.length?l.jsxs("div",{className:"alert alert-danger mT-10",role:"alert",children:[l.jsx("strong",{children:"Se detectaron errores:"}),l.jsx("ul",{className:"mB-0 mT-5",children:$.slice(-8).map((w,Y)=>l.jsxs("li",{children:[w.oi?`[${w.oi}] `:"",w.file?`${w.file}: `:"",w.message]},`ce-${Y}`))})]}):null,S.length?l.jsxs("div",{className:"alert alert-warning mT-10",role:"alert",children:[l.jsx("strong",{children:"Advertencias:"}),l.jsx("ul",{className:"mB-0 mT-5",children:S.slice(-8).map((w,Y)=>l.jsxs("li",{children:["[",w.oi,"] ",w.code?`${w.code}: `:"",w.message]},`cw-${Y}`))})]}):null,le?l.jsxs("div",{className:"mT-15",children:[l.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-10 mB-10",children:[l.jsx("h6",{className:"c-grey-900 mB-0",children:"Auditora de copiado"}),l.jsxs("div",{className:"d-flex gap-5",children:[l.jsx("button",{className:"btn btn-sm btn-outline-light",disabled:ws||!Qe,onClick:()=>ml("csv"),children:"Descargar CSV"}),l.jsx("button",{className:"btn btn-sm btn-outline-light",disabled:ws||!Qe,onClick:()=>ml("xlsx"),children:"Descargar Excel"})]})]}),l.jsxs("div",{className:"row g-2",children:[l.jsx("div",{className:"col-12 col-md-4",children:l.jsxs("div",{className:"alert alert-light mB-0",children:[l.jsxs("div",{children:[l.jsx("strong",{children:"Total OIs:"})," ",le?.total_ois??"N/D"]}),l.jsxs("div",{children:[l.jsx("strong",{children:"OIs OK:"})," ",le?.ois_ok??"N/D"]})]})}),l.jsx("div",{className:"col-12 col-md-8",children:l.jsx("div",{className:"alert alert-light mB-0",children:l.jsxs("div",{className:"d-flex flex-wrap gap-10",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"PDF detectados:"})," ",le?.archivos?.pdf_detectados??"N/D"]}),l.jsxs("span",{children:[l.jsx("strong",{children:"PDF copiados:"})," ",le?.archivos?.pdf_copiados??"N/D"]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Omitidos NO CONFORME:"})," ",le?.archivos?.pdf_omitidos_no_conforme??"N/D"]}),l.jsxs("span",{children:[l.jsx("strong",{children:"No PDF omitidos:"})," ",le?.archivos?.archivos_no_pdf_omitidos??"N/D"]})]})})})]}),le?.ois_faltantes?.length||le?.ois_duplicadas?.length||le?.destinos_duplicados?.length||le?.series_duplicadas?.length||le?.series_faltantes?.length?l.jsxs("div",{className:"mT-10",children:[le?.ois_faltantes?.length?l.jsxs("div",{className:"alert alert-warning",role:"alert",children:[l.jsx("strong",{children:"OIs sin carpeta:"}),l.jsx("ul",{className:"mB-0 mT-5",children:le.ois_faltantes.slice(0,10).map((w,Y)=>l.jsxs("li",{children:[w?.oi,"  ",w?.detalle||""]},`of-${Y}`))})]}):null,le?.ois_duplicadas?.length?l.jsxs("div",{className:"alert alert-warning",role:"alert",children:[l.jsx("strong",{children:"OIs con mltiples carpetas (duplicadas):"}),l.jsx("ul",{className:"mB-0 mT-5",children:le.ois_duplicadas.slice(0,10).map((w,Y)=>l.jsxs("li",{children:[w?.oi,"  ",Array.isArray(w?.carpetas)?w.carpetas.join(" | "):""]},`od-${Y}`))})]}):null,le?.destinos_duplicados?.length?l.jsxs("div",{className:"alert alert-warning",role:"alert",children:[l.jsx("strong",{children:"Destinos ya existentes:"}),l.jsx("ul",{className:"mB-0 mT-5",children:le.destinos_duplicados.slice(0,10).map((w,Y)=>l.jsxs("li",{children:[w?.oi,"  ",w?.destino||""]},`dd-${Y}`))})]}):null,le?.series_duplicadas?.length?l.jsxs("div",{className:"alert alert-warning",role:"alert",children:[l.jsx("strong",{children:"Series duplicadas (mismo nombre de PDF):"}),l.jsx("ul",{className:"mB-0 mT-5",children:le.series_duplicadas.slice(0,12).map((w,Y)=>l.jsxs("li",{children:[l.jsx("strong",{children:w?.oi}),"  ",w?.serie," (",Array.isArray(w?.files)?w.files.length:0," archivo(s))"]},`sd-${Y}`))}),le.series_duplicadas.length>12?l.jsxs("div",{className:"small text-muted mT-5",children:["Mostrando 12 de ",le.series_duplicadas.length,". Revisa el audit JSON para el detalle completo."]}):null]}):null,le?.series_faltantes?.length?l.jsxs("div",{className:"alert alert-warning",role:"alert",children:[l.jsx("strong",{children:"Series faltantes (conforme en manifiesto, sin PDF):"}),l.jsx("ul",{className:"mB-0 mT-5",children:le.series_faltantes.slice(0,12).map((w,Y)=>l.jsxs("li",{children:[l.jsx("strong",{children:w?.oi}),"  ",w?.count," faltante(s)"]},`sf-${Y}`))}),le.series_faltantes.length>12?l.jsxs("div",{className:"small text-muted mT-5",children:["Mostrando 12 de ",le.series_faltantes.length,". Revisa el audit JSON para el detalle completo."]}):null]}):null]}):null]}):null]}):l.jsx("div",{className:"vi-callout small",children:"Valida rutas y selecciona una corrida para habilitar la ejecucin."})})})]})]})]}),Me?l.jsx("div",{className:"vi-sticky-actions",children:l.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-10 vi-sticky-actions-row",children:[l.jsxs("div",{className:"small vi-sticky-progress",children:[l.jsx("strong",{children:me?ge(me):"En progreso"}),R?l.jsxs("span",{children:["  OI: ",R]}):null,l.jsxs("span",{className:"text-muted",children:["  ",ze.toFixed(0),"%"]})]}),l.jsxs("div",{className:"d-flex gap-10 vi-sticky-buttons",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>void da(),disabled:!Qe,children:"Cancelar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>jn(!0),children:"Ver detalle"})]})]})}):null]})}),P?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:l.jsx("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",role:"document",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{className:"modal-title",children:"Seleccionar corrida de LOG-01 (Historial)"}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>B(!1)})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"vi-card mB-10",children:[l.jsx("div",{className:"d-flex align-items-center justify-content-between mB-10",children:l.jsx("div",{className:"small text-muted",children:"Filtros"})}),l.jsxs("div",{className:"text-muted small mB-10",children:["Por defecto se cargan las ",l.jsx("strong",{children:"ltimas 5 corridas completadas"}),". Puedes usar filtros si lo necesitas."]}),De?l.jsx("div",{className:"alert alert-danger",role:"alert",children:De}):null,l.jsxs("form",{className:"row g-2 align-items-end",onSubmit:w=>{w.preventDefault(),fn()},children:[l.jsxs("div",{className:"col-12 col-md-4",children:[l.jsx("label",{className:"form-label",children:"Buscar"}),l.jsx("input",{className:"form-control form-control-sm",value:Re,onChange:w=>_(w.target.value),placeholder:"Serie / OI / usuario..."})]}),l.jsxs("div",{className:"col-6 col-md-2",children:[l.jsx("label",{className:"form-label",children:"Desde"}),l.jsx("input",{className:"form-control form-control-sm",type:"date",value:K,onChange:w=>ue(w.target.value)})]}),l.jsxs("div",{className:"col-6 col-md-2",children:[l.jsx("label",{className:"form-label",children:"Hasta"}),l.jsx("input",{className:"form-control form-control-sm",type:"date",value:Q,onChange:w=>Ee(w.target.value)})]}),l.jsxs("div",{className:"col-6 col-md-2",children:[l.jsx("label",{className:"form-label",children:"Origen"}),l.jsx("input",{className:"form-control form-control-sm",value:Ne,onChange:w=>Be(w.target.value),placeholder:"AUTO/BASES/..."})]}),l.jsxs("div",{className:"col-6 col-md-2",children:[l.jsx("label",{className:"form-label",children:"Estado"}),l.jsx("input",{className:"form-control form-control-sm",value:Ze,onChange:w=>he(w.target.value),placeholder:"COMPLETADO"})]}),l.jsxs("div",{className:"col-12 d-flex align-items-center justify-content-between",children:[l.jsx("div",{className:"btn-group",role:"group","aria-label":"Acciones filtros",children:l.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:W,children:W?l.jsxs("span",{className:"d-flex align-items-center gap-10",children:[l.jsx("img",{src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Cargando",style:{width:18,height:18}}),"Buscando..."]}):"Aplicar filtros"})}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>{_(""),ue(""),Ee(""),Be(""),he("COMPLETADO"),ls(5)},disabled:W,children:W?l.jsxs("span",{className:"d-flex align-items-center gap-10",children:[l.jsx("img",{src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Cargando",style:{width:18,height:18}}),"Cargando..."]}):"Ver ltimas 5 exitosas"})]})]})]}),l.jsxs("div",{className:"vi-card",children:[l.jsxs("div",{className:"d-flex align-items-center justify-content-between mB-10",children:[l.jsx("div",{className:"small text-muted",children:"Resultados"}),l.jsx("div",{className:"small text-muted",children:M?"Actualizando...":`${be.length} corrida(s)`})]}),M?l.jsxs("div",{className:"d-flex align-items-center gap-10 text-muted small",children:[l.jsx("img",{src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Cargando",style:{width:28,height:28}}),l.jsx("span",{children:"Cargando corridas..."})]}):l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{width:110},children:"ID"}),l.jsx("th",{children:"Creado"}),l.jsx("th",{style:{width:140},children:"Origen"}),l.jsx("th",{style:{width:150},children:"Estado"}),l.jsx("th",{style:{width:110},className:"text-end"})]})}),l.jsx("tbody",{children:be.length?be.map(w=>l.jsxs("tr",{className:"small",children:[l.jsx("td",{children:l.jsxs("span",{className:"badge bg-secondary font-monospace",children:["#",w.id]})}),l.jsx("td",{children:Yy(w.created_at)}),l.jsx("td",{children:w.source||"N/D"}),l.jsx("td",{children:l.jsx("span",{className:hD(w.status),children:w.status||"N/D"})}),l.jsx("td",{className:"text-end",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>Wn(w),children:"Usar"})})]},w.id)):l.jsx("tr",{className:"small",children:l.jsx("td",{colSpan:5,className:"text-muted",children:"No se encontraron corridas con esos filtros."})})})]})})]})]}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>B(!1),children:"Cerrar"})})]})})}),l.jsx("div",{className:"modal-backdrop fade show",onClick:()=>B(!1)})]}):null,Vn?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:l.jsx("div",{className:"modal-dialog modal-lg",role:"document",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{className:"modal-title",children:Zn==="destino"?"Elegir carpeta de destino":"Elegir carpeta de origen"}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>Nn(!1)})]}),l.jsxs("div",{className:"modal-body",children:[yt?l.jsx("div",{className:"alert alert-danger",role:"alert",children:yt}):null,l.jsxs("div",{className:"row g-2",children:[l.jsxs("div",{className:"col-12 col-md-6",children:[l.jsx("label",{className:"form-label",children:"Raz"}),l.jsx("select",{className:"form-control form-control-sm",value:ht,onChange:w=>{const Y=w.target.value;Je(Y),Vt(Y)},disabled:!He.length,children:He.length?He.map(w=>l.jsx("option",{value:w,children:w},w)):l.jsx("option",{value:"",children:"Sin races"})})]}),l.jsxs("div",{className:"col-12 col-md-6",children:[l.jsx("label",{className:"form-label",children:"Carpeta actual"}),l.jsx("input",{className:"form-control form-control-sm",value:Ct,readOnly:!0})]})]}),l.jsxs("div",{className:"mT-10",children:[l.jsx("label",{className:"form-label mB-5",children:"Navegacin"}),l.jsxs("div",{className:"p-10 vi-surface-2 border vi-border rounded",children:[l.jsx("div",{className:"d-flex flex-wrap align-items-center gap-10",children:_r(Ct).map((w,Y,de)=>l.jsxs("span",{className:"small d-inline-flex align-items-center",children:[l.jsx("button",{type:"button",className:"btn btn-link p-0 align-baseline",onClick:()=>void Vt(w.path),disabled:ut,title:`Ir a: ${w.path}`,children:w.label}),Y<de.length-1?l.jsx("span",{className:"text-muted mX-5",children:"/"}):null]},`${w.path}-${Y}`))}),l.jsx("div",{className:"small vi-text-muted mT-5",children:"Tip: Click en una seccin para saltar a esa carpeta."})]})]}),l.jsxs("div",{className:"row g-2 mT-10",children:[l.jsxs("div",{className:"col-12 col-md-8",children:[l.jsx("label",{className:"form-label",children:"Ir a ruta"}),l.jsxs("div",{className:"input-group input-group-sm",children:[l.jsx("input",{className:"form-control",value:Ht,onChange:w=>Mn(w.target.value),onKeyDown:w=>{w.key==="Enter"&&(w.preventDefault(),xs())},placeholder:"Pega una ruta (UNC o local) dentro de las races permitidas",disabled:ut}),l.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>void xs(),disabled:ut||!Ht.trim(),children:"Ir"})]})]}),l.jsxs("div",{className:"col-12 col-md-4",children:[l.jsx("label",{className:"form-label",children:"Acciones"}),l.jsx("div",{className:"d-flex align-items-end",style:{minHeight:31},children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:()=>void Ns(),disabled:!Ct||ut,title:"Copiar la ruta actual al portapapeles",children:"Copiar ruta"})})]})]}),l.jsxs("div",{className:"d-flex gap-10 mT-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-auto",onClick:os,disabled:!Ct||ut,children:"Subir nivel"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:ol,disabled:!Ct||ut,children:"Seleccionar carpeta"})]}),l.jsx("hr",{}),l.jsx("div",{className:"row g-2 mB-10",children:l.jsxs("div",{className:"col-12 col-md-8",children:[l.jsx("label",{className:"form-label",children:"Buscar subcarpeta"}),l.jsx("input",{className:"form-control form-control-sm",value:gn,onChange:w=>bn(w.target.value),placeholder:"Filtrar por nombre",disabled:ut}),l.jsxs("div",{className:"form-text",children:["Mostrando ",rn.length," de ",Ot.length]})]})}),ut?l.jsx("div",{className:"text-muted small",children:"Cargando carpetas..."}):l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{children:"Subcarpetas"}),l.jsx("th",{style:{width:120}})]})}),l.jsx("tbody",{children:rn.length?rn.map((w,Y)=>l.jsxs("tr",{className:"small"+(qt===w.path?" table-active":""),role:"button",tabIndex:0,"data-folder-idx":Y,title:"Click para seleccionar  Doble click para entrar",style:{cursor:ut?"default":"pointer"},onClick:de=>{ut||(Jt(w.path),de.currentTarget.focus())},onDoubleClick:()=>{ut||Vt(w.path)},onKeyDown:de=>{if(!ut){if(de.key==="Enter"){de.preventDefault(),Vt(w.path);return}if(de.key===" "||de.key==="Spacebar"){de.preventDefault(),Jt(w.path);return}}},children:[l.jsx("td",{style:{wordBreak:"break-all"},children:w.name}),l.jsx("td",{children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:de=>{de.stopPropagation(),Vt(w.path)},disabled:ut,children:"Entrar"})})]},w.path)):l.jsx("tr",{className:"small",children:l.jsx("td",{colSpan:2,className:"text-muted",children:"Sin resultados para el filtro, o sin subcarpetas/permisos para listar."})})})]})})]}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>Nn(!1),children:"Cerrar"})})]})})}),l.jsx("div",{className:"modal-backdrop fade show",onClick:()=>Nn(!1)})]}):null]})}function xD(){const e=Bn();return l.jsx(l.Fragment,{children:l.jsxs(ew,{children:[l.jsx(mn,{path:"/login",element:e?.token?l.jsx(xr,{to:"/home",replace:!0}):l.jsx(ZE,{})}),l.jsx(mn,{element:l.jsx(UT,{}),children:l.jsxs(mn,{element:l.jsx($T,{}),children:[l.jsx(mn,{path:"/",element:l.jsx(xr,{to:"/home",replace:!0})}),l.jsx(mn,{path:"/home",element:l.jsx(tD,{})}),l.jsx(mn,{path:"/oi",element:l.jsx(By,{})}),l.jsx(mn,{path:"/oi/:oiId",element:l.jsx(By,{})}),l.jsx(mn,{path:"/oi/list",element:l.jsx(FT,{})}),l.jsx(mn,{path:"/users",element:l.jsx(VT,{})}),l.jsx(mn,{path:"/password",element:l.jsx(ZT,{})}),l.jsx(mn,{path:"/admin/permisos",element:l.jsx(QT,{})}),l.jsx(mn,{path:"/logistica/log01/excel",element:l.jsx(rD,{})}),l.jsx(mn,{path:"/logistica/log01/history",element:l.jsx(mD,{})}),l.jsx(mn,{path:"/logistica/log02/pdfs",element:l.jsx(yD,{})}),l.jsx(mn,{path:"/oi/tools/vima-to-lista",element:l.jsx(l2,{})}),l.jsx(mn,{path:"/oi/tools/actualizacion-base",element:l.jsx(L2,{})}),l.jsx(mn,{path:"/oi/tools/formato-ac/history",element:l.jsx(V2,{})}),l.jsx(mn,{path:"/oi/tools/consolidacion",element:l.jsx(Z2,{})}),l.jsx(mn,{path:"/oi/tools/consolidacion/correlativo",element:l.jsx(Y2,{})}),l.jsx(mn,{path:"/oi/tools/consolidacion/no-correlativo",element:l.jsx(W2,{})}),l.jsx(mn,{path:"/oi/tools/excel",element:l.jsx(eD,{})})]})}),l.jsx(mn,{path:"*",element:l.jsx(xr,{to:e?.token?"/home":"/login",replace:!0})})]})})}const ND=new t_;FE();iS.createRoot(document.getElementById("root")).render(l.jsx(gt.StrictMode,{children:l.jsx(n_,{client:ND,children:l.jsx(ww,{children:l.jsx(IE,{children:l.jsx(xD,{})})})})}));
