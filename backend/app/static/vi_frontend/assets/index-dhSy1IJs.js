(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function s(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(c){if(c.ep)return;c.ep=!0;const d=s(c);fetch(c.href,d)}})();function Ov(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gf={exports:{}},Oi={};var qy;function kN(){if(qy)return Oi;qy=1;var e=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function s(l,c,d){var f=null;if(d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),"key"in c){d={};for(var h in c)h!=="key"&&(d[h]=c[h])}else d=c;return c=d.ref,{$$typeof:e,type:l,key:f,ref:c!==void 0?c:null,props:d}}return Oi.Fragment=a,Oi.jsx=s,Oi.jsxs=s,Oi}var Iy;function UN(){return Iy||(Iy=1,gf.exports=kN()),gf.exports}var i=UN(),yf={exports:{}},ot={};var $y;function LN(){if($y)return ot;$y=1;var e=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),N=Symbol.iterator;function q(w){return w===null||typeof w!="object"?null:(w=N&&w[N]||w["@@iterator"],typeof w=="function"?w:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,C={};function B(w,P,ie){this.props=w,this.context=P,this.refs=C,this.updater=ie||j}B.prototype.isReactComponent={},B.prototype.setState=function(w,P){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,P,"setState")},B.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function T(){}T.prototype=B.prototype;function K(w,P,ie){this.props=w,this.context=P,this.refs=C,this.updater=ie||j}var D=K.prototype=new T;D.constructor=K,_(D,B.prototype),D.isPureReactComponent=!0;var R=Array.isArray;function Z(){}var U={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function ce(w,P,ie){var k=ie.ref;return{$$typeof:e,type:w,key:P,ref:k!==void 0?k:null,props:ie}}function _e(w,P){return ce(w.type,P,w.props)}function xe(w){return typeof w=="object"&&w!==null&&w.$$typeof===e}function me(w){var P={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(ie){return P[ie]})}var Se=/\/+/g;function De(w,P){return typeof w=="object"&&w!==null&&w.key!=null?me(""+w.key):P.toString(36)}function Oe(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(Z,Z):(w.status="pending",w.then(function(P){w.status==="pending"&&(w.status="fulfilled",w.value=P)},function(P){w.status==="pending"&&(w.status="rejected",w.reason=P)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function M(w,P,ie,k,oe){var ge=typeof w;(ge==="undefined"||ge==="boolean")&&(w=null);var Re=!1;if(w===null)Re=!0;else switch(ge){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(w.$$typeof){case e:case a:Re=!0;break;case v:return Re=w._init,M(Re(w._payload),P,ie,k,oe)}}if(Re)return oe=oe(w),Re=k===""?"."+De(w,0):k,R(oe)?(ie="",Re!=null&&(ie=Re.replace(Se,"$&/")+"/"),M(oe,P,ie,"",function(Ue){return Ue})):oe!=null&&(xe(oe)&&(oe=_e(oe,ie+(oe.key==null||w&&w.key===oe.key?"":(""+oe.key).replace(Se,"$&/")+"/")+Re)),P.push(oe)),1;Re=0;var $e=k===""?".":k+":";if(R(w))for(var de=0;de<w.length;de++)k=w[de],ge=$e+De(k,de),Re+=M(k,P,ie,ge,oe);else if(de=q(w),typeof de=="function")for(w=de.call(w),de=0;!(k=w.next()).done;)k=k.value,ge=$e+De(k,de++),Re+=M(k,P,ie,ge,oe);else if(ge==="object"){if(typeof w.then=="function")return M(Oe(w),P,ie,k,oe);throw P=String(w),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return Re}function I(w,P,ie){if(w==null)return w;var k=[],oe=0;return M(w,k,"","",function(ge){return P.call(ie,ge,oe++)}),k}function ee(w){if(w._status===-1){var P=w._result;P=P(),P.then(function(ie){(w._status===0||w._status===-1)&&(w._status=1,w._result=ie)},function(ie){(w._status===0||w._status===-1)&&(w._status=2,w._result=ie)}),w._status===-1&&(w._status=0,w._result=P)}if(w._status===1)return w._result.default;throw w._result}var be=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)},je={map:I,forEach:function(w,P,ie){I(w,function(){P.apply(this,arguments)},ie)},count:function(w){var P=0;return I(w,function(){P++}),P},toArray:function(w){return I(w,function(P){return P})||[]},only:function(w){if(!xe(w))throw Error("React.Children.only expected to receive a single React element child.");return w}};return ot.Activity=x,ot.Children=je,ot.Component=B,ot.Fragment=s,ot.Profiler=c,ot.PureComponent=K,ot.StrictMode=l,ot.Suspense=g,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,ot.__COMPILER_RUNTIME={__proto__:null,c:function(w){return U.H.useMemoCache(w)}},ot.cache=function(w){return function(){return w.apply(null,arguments)}},ot.cacheSignal=function(){return null},ot.cloneElement=function(w,P,ie){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var k=_({},w.props),oe=w.key;if(P!=null)for(ge in P.key!==void 0&&(oe=""+P.key),P)!X.call(P,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&P.ref===void 0||(k[ge]=P[ge]);var ge=arguments.length-2;if(ge===1)k.children=ie;else if(1<ge){for(var Re=Array(ge),$e=0;$e<ge;$e++)Re[$e]=arguments[$e+2];k.children=Re}return ce(w.type,oe,k)},ot.createContext=function(w){return w={$$typeof:f,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:d,_context:w},w},ot.createElement=function(w,P,ie){var k,oe={},ge=null;if(P!=null)for(k in P.key!==void 0&&(ge=""+P.key),P)X.call(P,k)&&k!=="key"&&k!=="__self"&&k!=="__source"&&(oe[k]=P[k]);var Re=arguments.length-2;if(Re===1)oe.children=ie;else if(1<Re){for(var $e=Array(Re),de=0;de<Re;de++)$e[de]=arguments[de+2];oe.children=$e}if(w&&w.defaultProps)for(k in Re=w.defaultProps,Re)oe[k]===void 0&&(oe[k]=Re[k]);return ce(w,ge,oe)},ot.createRef=function(){return{current:null}},ot.forwardRef=function(w){return{$$typeof:h,render:w}},ot.isValidElement=xe,ot.lazy=function(w){return{$$typeof:v,_payload:{_status:-1,_result:w},_init:ee}},ot.memo=function(w,P){return{$$typeof:p,type:w,compare:P===void 0?null:P}},ot.startTransition=function(w){var P=U.T,ie={};U.T=ie;try{var k=w(),oe=U.S;oe!==null&&oe(ie,k),typeof k=="object"&&k!==null&&typeof k.then=="function"&&k.then(Z,be)}catch(ge){be(ge)}finally{P!==null&&ie.types!==null&&(P.types=ie.types),U.T=P}},ot.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},ot.use=function(w){return U.H.use(w)},ot.useActionState=function(w,P,ie){return U.H.useActionState(w,P,ie)},ot.useCallback=function(w,P){return U.H.useCallback(w,P)},ot.useContext=function(w){return U.H.useContext(w)},ot.useDebugValue=function(){},ot.useDeferredValue=function(w,P){return U.H.useDeferredValue(w,P)},ot.useEffect=function(w,P){return U.H.useEffect(w,P)},ot.useEffectEvent=function(w){return U.H.useEffectEvent(w)},ot.useId=function(){return U.H.useId()},ot.useImperativeHandle=function(w,P,ie){return U.H.useImperativeHandle(w,P,ie)},ot.useInsertionEffect=function(w,P){return U.H.useInsertionEffect(w,P)},ot.useLayoutEffect=function(w,P){return U.H.useLayoutEffect(w,P)},ot.useMemo=function(w,P){return U.H.useMemo(w,P)},ot.useOptimistic=function(w,P){return U.H.useOptimistic(w,P)},ot.useReducer=function(w,P,ie){return U.H.useReducer(w,P,ie)},ot.useRef=function(w){return U.H.useRef(w)},ot.useState=function(w){return U.H.useState(w)},ot.useSyncExternalStore=function(w,P,ie){return U.H.useSyncExternalStore(w,P,ie)},ot.useTransition=function(){return U.H.useTransition()},ot.version="19.2.0",ot}var Fy;function Cm(){return Fy||(Fy=1,yf.exports=LN()),yf.exports}var y=Cm();const ht=Ov(y);var bf={exports:{}},Ri={},vf={exports:{}},xf={};var Hy;function BN(){return Hy||(Hy=1,(function(e){function a(M,I){var ee=M.length;M.push(I);e:for(;0<ee;){var be=ee-1>>>1,je=M[be];if(0<c(je,I))M[be]=I,M[ee]=je,ee=be;else break e}}function s(M){return M.length===0?null:M[0]}function l(M){if(M.length===0)return null;var I=M[0],ee=M.pop();if(ee!==I){M[0]=ee;e:for(var be=0,je=M.length,w=je>>>1;be<w;){var P=2*(be+1)-1,ie=M[P],k=P+1,oe=M[k];if(0>c(ie,ee))k<je&&0>c(oe,ie)?(M[be]=oe,M[k]=ee,be=k):(M[be]=ie,M[P]=ee,be=P);else if(k<je&&0>c(oe,ee))M[be]=oe,M[k]=ee,be=k;else break e}}return I}function c(M,I){var ee=M.sortIndex-I.sortIndex;return ee!==0?ee:M.id-I.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var f=Date,h=f.now();e.unstable_now=function(){return f.now()-h}}var g=[],p=[],v=1,x=null,N=3,q=!1,j=!1,_=!1,C=!1,B=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function D(M){for(var I=s(p);I!==null;){if(I.callback===null)l(p);else if(I.startTime<=M)l(p),I.sortIndex=I.expirationTime,a(g,I);else break;I=s(p)}}function R(M){if(_=!1,D(M),!j)if(s(g)!==null)j=!0,Z||(Z=!0,me());else{var I=s(p);I!==null&&Oe(R,I.startTime-M)}}var Z=!1,U=-1,X=5,ce=-1;function _e(){return C?!0:!(e.unstable_now()-ce<X)}function xe(){if(C=!1,Z){var M=e.unstable_now();ce=M;var I=!0;try{e:{j=!1,_&&(_=!1,T(U),U=-1),q=!0;var ee=N;try{t:{for(D(M),x=s(g);x!==null&&!(x.expirationTime>M&&_e());){var be=x.callback;if(typeof be=="function"){x.callback=null,N=x.priorityLevel;var je=be(x.expirationTime<=M);if(M=e.unstable_now(),typeof je=="function"){x.callback=je,D(M),I=!0;break t}x===s(g)&&l(g),D(M)}else l(g);x=s(g)}if(x!==null)I=!0;else{var w=s(p);w!==null&&Oe(R,w.startTime-M),I=!1}}break e}finally{x=null,N=ee,q=!1}I=void 0}}finally{I?me():Z=!1}}}var me;if(typeof K=="function")me=function(){K(xe)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,De=Se.port2;Se.port1.onmessage=xe,me=function(){De.postMessage(null)}}else me=function(){B(xe,0)};function Oe(M,I){U=B(function(){M(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_next=function(M){switch(N){case 1:case 2:case 3:var I=3;break;default:I=N}var ee=N;N=I;try{return M()}finally{N=ee}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(M,I){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ee=N;N=M;try{return I()}finally{N=ee}},e.unstable_scheduleCallback=function(M,I,ee){var be=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?be+ee:be):ee=be,M){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=ee+je,M={id:v++,callback:I,priorityLevel:M,startTime:ee,expirationTime:je,sortIndex:-1},ee>be?(M.sortIndex=ee,a(p,M),s(g)===null&&M===s(p)&&(_?(T(U),U=-1):_=!0,Oe(R,ee-be))):(M.sortIndex=je,a(g,M),j||q||(j=!0,Z||(Z=!0,me()))),M},e.unstable_shouldYield=_e,e.unstable_wrapCallback=function(M){var I=N;return function(){var ee=N;N=I;try{return M.apply(this,arguments)}finally{N=ee}}}})(xf)),xf}var Vy;function qN(){return Vy||(Vy=1,vf.exports=BN()),vf.exports}var Sf={exports:{}},Yn={};var Zy;function IN(){if(Zy)return Yn;Zy=1;var e=Cm();function a(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var l={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(g,p,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:x==null?null:""+x,children:g,containerInfo:p,implementation:v}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Yn.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return d(g,p,null,v)},Yn.flushSync=function(g){var p=f.T,v=l.p;try{if(f.T=null,l.p=2,g)return g()}finally{f.T=p,l.p=v,l.d.f()}},Yn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,l.d.C(g,p))},Yn.prefetchDNS=function(g){typeof g=="string"&&l.d.D(g)},Yn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,x=h(v,p.crossOrigin),N=typeof p.integrity=="string"?p.integrity:void 0,q=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?l.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:N,fetchPriority:q}):v==="script"&&l.d.X(g,{crossOrigin:x,integrity:N,fetchPriority:q,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Yn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);l.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&l.d.M(g)},Yn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,x=h(v,p.crossOrigin);l.d.L(g,v,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Yn.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=h(p.as,p.crossOrigin);l.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else l.d.m(g)},Yn.requestFormReset=function(g){l.d.r(g)},Yn.unstable_batchedUpdates=function(g,p){return g(p)},Yn.useFormState=function(g,p,v){return f.H.useFormState(g,p,v)},Yn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Yn.version="19.2.0",Yn}var Gy;function $N(){if(Gy)return Sf.exports;Gy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(a){console.error(a)}}return e(),Sf.exports=IN(),Sf.exports}var Py;function FN(){if(Py)return Ri;Py=1;var e=qN(),a=Cm(),s=$N();function l(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function h(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(d(t)!==t)throw Error(l(188))}function p(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(l(188));return n!==t?null:t}for(var r=t,o=n;;){var u=r.return;if(u===null)break;var m=u.alternate;if(m===null){if(o=u.return,o!==null){r=o;continue}break}if(u.child===m.child){for(m=u.child;m;){if(m===r)return g(u),t;if(m===o)return g(u),n;m=m.sibling}throw Error(l(188))}if(r.return!==o.return)r=u,o=m;else{for(var b=!1,S=u.child;S;){if(S===r){b=!0,r=u,o=m;break}if(S===o){b=!0,o=u,r=m;break}S=S.sibling}if(!b){for(S=m.child;S;){if(S===r){b=!0,r=m,o=u;break}if(S===o){b=!0,o=m,r=u;break}S=S.sibling}if(!b)throw Error(l(189))}}if(r.alternate!==o)throw Error(l(190))}if(r.tag!==3)throw Error(l(188));return r.stateNode.current===r?t:n}function v(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=v(t),n!==null)return n;t=t.sibling}return null}var x=Object.assign,N=Symbol.for("react.element"),q=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),K=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ce=Symbol.for("react.activity"),_e=Symbol.for("react.memo_cache_sentinel"),xe=Symbol.iterator;function me(t){return t===null||typeof t!="object"?null:(t=xe&&t[xe]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Symbol.for("react.client.reference");function De(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Se?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _:return"Fragment";case B:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case Z:return"SuspenseList";case ce:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case j:return"Portal";case K:return t.displayName||"Context";case T:return(t._context.displayName||"Context")+".Consumer";case D:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case U:return n=t.displayName||null,n!==null?n:De(t.type)||"Memo";case X:n=t._payload,t=t._init;try{return De(t(n))}catch{}}return null}var Oe=Array.isArray,M=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},be=[],je=-1;function w(t){return{current:t}}function P(t){0>je||(t.current=be[je],be[je]=null,je--)}function ie(t,n){je++,be[je]=t.current,t.current=n}var k=w(null),oe=w(null),ge=w(null),Re=w(null);function $e(t,n){switch(ie(ge,n),ie(oe,t),ie(k,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?oy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=oy(n),t=cy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}P(k),ie(k,t)}function de(){P(k),P(oe),P(ge)}function Ue(t){t.memoizedState!==null&&ie(Re,t);var n=k.current,r=cy(n,t.type);n!==r&&(ie(oe,t),ie(k,r))}function Ie(t){oe.current===t&&(P(k),P(oe)),Re.current===t&&(P(Re),_i._currentValue=ee)}var Ve,dt;function Te(t){if(Ve===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Ve=n&&n[1]||"",dt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ve+t+dt}var He=!1;function fe(t,n){if(!t||He)return"";He=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(le){var ne=le}Reflect.construct(t,[],ve)}else{try{ve.call()}catch(le){ne=le}t.call(ve.prototype)}}else{try{throw Error()}catch(le){ne=le}(ve=t())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(le){if(le&&ne&&typeof le.stack=="string")return[le.stack,ne.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),b=m[0],S=m[1];if(b&&S){var z=b.split(`
`),W=S.split(`
`);for(u=o=0;o<z.length&&!z[o].includes("DetermineComponentFrameRoot");)o++;for(;u<W.length&&!W[u].includes("DetermineComponentFrameRoot");)u++;if(o===z.length||u===W.length)for(o=z.length-1,u=W.length-1;1<=o&&0<=u&&z[o]!==W[u];)u--;for(;1<=o&&0<=u;o--,u--)if(z[o]!==W[u]){if(o!==1||u!==1)do if(o--,u--,0>u||z[o]!==W[u]){var ue=`
`+z[o].replace(" at new "," at ");return t.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",t.displayName)),ue}while(1<=o&&0<=u);break}}}finally{He=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Te(r):""}function Fe(t,n){switch(t.tag){case 26:case 27:case 5:return Te(t.type);case 16:return Te("Lazy");case 13:return t.child!==n&&n!==null?Te("Suspense Fallback"):Te("Suspense");case 19:return Te("SuspenseList");case 0:case 15:return fe(t.type,!1);case 11:return fe(t.type.render,!1);case 1:return fe(t.type,!0);case 31:return Te("Activity");default:return""}}function Ee(t){try{var n="",r=null;do n+=Fe(t,r),r=t,t=t.return;while(t);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Je=Object.prototype.hasOwnProperty,A=e.unstable_scheduleCallback,V=e.unstable_cancelCallback,O=e.unstable_shouldYield,Q=e.unstable_requestPaint,G=e.unstable_now,se=e.unstable_getCurrentPriorityLevel,Ce=e.unstable_ImmediatePriority,Le=e.unstable_UserBlockingPriority,ae=e.unstable_NormalPriority,Me=e.unstable_LowPriority,Pe=e.unstable_IdlePriority,rt=e.log,Pt=e.unstable_setDisableYieldValue,Ne=null,We=null;function qt(t){if(typeof rt=="function"&&Pt(t),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(Ne,t)}catch{}}var jt=Math.clz32?Math.clz32:_a,An=Math.log,qn=Math.LN2;function _a(t){return t>>>=0,t===0?32:31-(An(t)/qn|0)|0}var dn=256,lt=262144,sa=4194304;function Mn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Jn(t,n,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var S=o&134217727;return S!==0?(o=S&~m,o!==0?u=Mn(o):(b&=S,b!==0?u=Mn(b):r||(r=S&~t,r!==0&&(u=Mn(r))))):(S=o&~m,S!==0?u=Mn(S):b!==0?u=Mn(b):r||(r=o&~t,r!==0&&(u=Mn(r)))),u===0?0:n!==0&&n!==u&&(n&m)===0&&(m=u&-u,r=n&-n,m>=r||m===32&&(r&4194048)!==0)?n:u}function In(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function $n(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y(){var t=sa;return sa<<=1,(sa&62914560)===0&&(sa=4194304),t}function te(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function Ae(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ze(t,n,r,o,u,m){var b=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var S=t.entanglements,z=t.expirationTimes,W=t.hiddenUpdates;for(r=b&~r;0<r;){var ue=31-jt(r),ve=1<<ue;S[ue]=0,z[ue]=-1;var ne=W[ue];if(ne!==null)for(W[ue]=null,ue=0;ue<ne.length;ue++){var le=ne[ue];le!==null&&(le.lane&=-536870913)}r&=~ve}o!==0&&st(t,o,0),m!==0&&u===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~n))}function st(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-jt(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|r&261930}function ft(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var o=31-jt(r),u=1<<o;u&n|t[o]&n&&(t[o]|=n),r&=~u}}function Ke(t,n){var r=n&-n;return r=(r&42)!==0?1:Qt(r),(r&(t.suspendedLanes|n))!==0?0:r}function Qt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function kt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Rt(){var t=I.p;return t!==0?t:(t=window.event,t===void 0?32:Dy(t.type))}function Wt(t,n){var r=I.p;try{return I.p=t,n()}finally{I.p=r}}var _t=Math.random().toString(36).slice(2),at="__reactFiber$"+_t,yt="__reactProps$"+_t,It="__reactContainer$"+_t,fn="__reactEvents$"+_t,mn="__reactListeners$"+_t,en="__reactHandles$"+_t,hn="__reactResources$"+_t,Ft="__reactMarker$"+_t;function Fn(t){delete t[at],delete t[yt],delete t[fn],delete t[mn],delete t[en]}function rn(t){var n=t[at];if(n)return n;for(var r=t.parentNode;r;){if(n=r[It]||r[at]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=gy(t);t!==null;){if(r=t[at])return r;t=gy(t)}return n}t=r,r=t.parentNode}return null}function vn(t){if(t=t[at]||t[It]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function Pn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(l(33))}function kn(t){var n=t[hn];return n||(n=t[hn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Tt(t){t[Ft]=!0}var is=new Set,tn={};function pn(t,n){Cn(t,n),Cn(t+"Capture",n)}function Cn(t,n){for(tn[t]=n,t=0;t<n.length;t++)is.add(n[t])}var Un=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xa={},$a={};function Ja(t){return Je.call($a,t)?!0:Je.call(Xa,t)?!1:Un.test(t)?$a[t]=!0:(Xa[t]=!0,!1)}function nn(t,n,r){if(Ja(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function Wn(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function Qn(t,n,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+o)}}function ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fa(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function $r(t,n,r){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,m=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return u.call(this)},set:function(b){r=""+b,m.call(this,b)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(b){r=""+b},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function $(t){if(!t._valueTracker){var n=Fa(t)?"checked":"value";t._valueTracker=$r(t,n,""+t[n])}}function he(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return t&&(o=Fa(t)?t.checked?"true":"false":t.value),t=o,t!==r?(n.setValue(t),!0):!1}function ze(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Be=/[\n"\\]/g;function nt(t){return t.replace(Be,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function On(t,n,r,o,u,m,b,S){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),n!=null?b==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+ln(n)):t.value!==""+ln(n)&&(t.value=""+ln(n)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),n!=null?ir(t,b,ln(n)):r!=null?ir(t,b,ln(r)):o!=null&&t.removeAttribute("value"),u==null&&m!=null&&(t.defaultChecked=!!m),u!=null&&(t.checked=u&&typeof u!="function"&&typeof u!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+ln(S):t.removeAttribute("name")}function Wa(t,n,r,o,u,m,b,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),n!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){$(t);return}r=r!=null?""+ln(r):"",n=n!=null?""+ln(n):r,S||n===t.value||(t.value=n),t.defaultValue=n}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=S?t.checked:!!o,t.defaultChecked=!!o,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),$(t)}function ir(t,n,r){n==="number"&&ze(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Es(t,n,r,o){if(t=t.options,n){n={};for(var u=0;u<r.length;u++)n["$"+r[u]]=!0;for(r=0;r<t.length;r++)u=n.hasOwnProperty("$"+t[r].value),t[r].selected!==u&&(t[r].selected=u),u&&o&&(t[r].defaultSelected=!0)}else{for(r=""+ln(r),n=null,u=0;u<t.length;u++){if(t[u].value===r){t[u].selected=!0,o&&(t[u].defaultSelected=!0);return}n!==null||t[u].disabled||(n=t[u])}n!==null&&(n.selected=!0)}}function ro(t,n,r){if(n!=null&&(n=""+ln(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+ln(r):""}function lo(t,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(l(92));if(Oe(o)){if(1<o.length)throw Error(l(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=ln(n),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o),$(t)}function As(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var hu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function io(t,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,r):typeof r!="number"||r===0||hu.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function oo(t,n,r){if(n!=null&&typeof n!="object")throw Error(l(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var u in n)o=n[u],n.hasOwnProperty(u)&&r[u]!==o&&io(t,u,o)}else for(var m in n)n.hasOwnProperty(m)&&io(t,m,n[m])}function Fl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fr(t){return gu.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ha(){}var Cs=null;function Hl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Os=null,Rs=null;function co(t){var n=vn(t);if(n&&(t=n.stateNode)){var r=t[yt]||null;e:switch(t=n.stateNode,n.type){case"input":if(On(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+nt(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==t&&o.form===t.form){var u=o[yt]||null;if(!u)throw Error(l(90));On(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===t.form&&he(o)}break e;case"textarea":ro(t,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&Es(t,!!r.multiple,n,!1)}}}var Vl=!1;function uo(t,n,r){if(Vl)return t(n,r);Vl=!0;try{var o=t(n);return o}finally{if(Vl=!1,(Os!==null||Rs!==null)&&(Qo(),Os&&(n=Os,t=Rs,Rs=Os=null,co(n),t)))for(n=0;n<t.length;n++)co(t[n])}}function or(t,n){var r=t.stateNode;if(r===null)return null;var o=r[yt]||null;if(o===null)return null;r=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(l(231,n,typeof r));return r}var Va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cr=!1;if(Va)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){cr=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{cr=!1}var es=null,E=null,H=null;function pe(){if(H)return H;var t,n=E,r=n.length,o,u="value"in es?es.value:es.textContent,m=u.length;for(t=0;t<r&&n[t]===u[t];t++);var b=r-t;for(o=1;o<=b&&n[r-o]===u[m-o];o++);return H=u.slice(t,1<o?1-o:void 0)}function ke(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function it(){return!0}function Ct(){return!1}function pt(t){function n(r,o,u,m,b){this._reactName=r,this._targetInst=u,this.type=o,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(r=t[S],this[S]=r?r(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?it:Ct,this.isPropagationStopped=Ct,this}return x(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=it)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=it)},persist:function(){},isPersistent:it}),n}var xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=pt(xn),wt=x({},xn,{view:0,detail:0}),Hr=pt(wt),yu,bu,Zl,fo=x({},wt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zl&&(Zl&&t.type==="mousemove"?(yu=t.screenX-Zl.screenX,bu=t.screenY-Zl.screenY):bu=yu=0,Zl=t),yu)},movementY:function(t){return"movementY"in t?t.movementY:bu}}),dh=pt(fo),M0=x({},fo,{dataTransfer:0}),k0=pt(M0),U0=x({},wt,{relatedTarget:0}),vu=pt(U0),L0=x({},xn,{animationName:0,elapsedTime:0,pseudoElement:0}),B0=pt(L0),q0=x({},xn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),I0=pt(q0),$0=x({},xn,{data:0}),fh=pt($0),F0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},V0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Z0(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=V0[t])?!!n[t]:!1}function xu(){return Z0}var G0=x({},wt,{key:function(t){if(t.key){var n=F0[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=ke(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?H0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xu,charCode:function(t){return t.type==="keypress"?ke(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ke(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),P0=pt(G0),Q0=x({},fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mh=pt(Q0),Y0=x({},wt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xu}),K0=pt(Y0),X0=x({},xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),J0=pt(X0),W0=x({},fo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eS=pt(W0),tS=x({},xn,{newState:0,oldState:0}),nS=pt(tS),aS=[9,13,27,32],Su=Va&&"CompositionEvent"in window,Gl=null;Va&&"documentMode"in document&&(Gl=document.documentMode);var sS=Va&&"TextEvent"in window&&!Gl,hh=Va&&(!Su||Gl&&8<Gl&&11>=Gl),ph=" ",gh=!1;function yh(t,n){switch(t){case"keyup":return aS.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vr=!1;function rS(t,n){switch(t){case"compositionend":return bh(n);case"keypress":return n.which!==32?null:(gh=!0,ph);case"textInput":return t=n.data,t===ph&&gh?null:t;default:return null}}function lS(t,n){if(Vr)return t==="compositionend"||!Su&&yh(t,n)?(t=pe(),H=E=es=null,Vr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return hh&&n.locale!=="ko"?null:n.data;default:return null}}var iS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!iS[t.type]:n==="textarea"}function xh(t,n,r,o){Os?Rs?Rs.push(o):Rs=[o]:Os=o,n=tc(n,"onChange"),0<n.length&&(r=new ra("onChange","change",null,r,o),t.push({event:r,listeners:n}))}var Pl=null,Ql=null;function oS(t){ny(t,0)}function mo(t){var n=Pn(t);if(he(n))return t}function Sh(t,n){if(t==="change")return n}var Nh=!1;if(Va){var Nu;if(Va){var wu="oninput"in document;if(!wu){var wh=document.createElement("div");wh.setAttribute("oninput","return;"),wu=typeof wh.oninput=="function"}Nu=wu}else Nu=!1;Nh=Nu&&(!document.documentMode||9<document.documentMode)}function jh(){Pl&&(Pl.detachEvent("onpropertychange",_h),Ql=Pl=null)}function _h(t){if(t.propertyName==="value"&&mo(Ql)){var n=[];xh(n,Ql,t,Hl(t)),uo(oS,n)}}function cS(t,n,r){t==="focusin"?(jh(),Pl=n,Ql=r,Pl.attachEvent("onpropertychange",_h)):t==="focusout"&&jh()}function uS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mo(Ql)}function dS(t,n){if(t==="click")return mo(n)}function fS(t,n){if(t==="input"||t==="change")return mo(n)}function mS(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var ya=typeof Object.is=="function"?Object.is:mS;function Yl(t,n){if(ya(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var u=r[o];if(!Je.call(n,u)||!ya(t[u],n[u]))return!1}return!0}function Eh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ah(t,n){var r=Eh(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=n&&o>=n)return{node:r,offset:n-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Eh(r)}}function Ch(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Ch(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Oh(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=ze(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=ze(t.document)}return n}function ju(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var hS=Va&&"documentMode"in document&&11>=document.documentMode,Zr=null,_u=null,Kl=null,Eu=!1;function Rh(t,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Eu||Zr==null||Zr!==ze(o)||(o=Zr,"selectionStart"in o&&ju(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Kl&&Yl(Kl,o)||(Kl=o,o=tc(_u,"onSelect"),0<o.length&&(n=new ra("onSelect","select",null,n,r),t.push({event:n,listeners:o}),n.target=Zr)))}function dr(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var Gr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},Au={},Th={};Va&&(Th=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function fr(t){if(Au[t])return Au[t];if(!Gr[t])return t;var n=Gr[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in Th)return Au[t]=n[r];return t}var Dh=fr("animationend"),zh=fr("animationiteration"),Mh=fr("animationstart"),pS=fr("transitionrun"),gS=fr("transitionstart"),yS=fr("transitioncancel"),kh=fr("transitionend"),Uh=new Map,Cu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cu.push("scrollEnd");function Za(t,n){Uh.set(t,n),pn(n,[t])}var ho=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ea=[],Pr=0,Ou=0;function po(){for(var t=Pr,n=Ou=Pr=0;n<t;){var r=Ea[n];Ea[n++]=null;var o=Ea[n];Ea[n++]=null;var u=Ea[n];Ea[n++]=null;var m=Ea[n];if(Ea[n++]=null,o!==null&&u!==null){var b=o.pending;b===null?u.next=u:(u.next=b.next,b.next=u),o.pending=u}m!==0&&Lh(r,u,m)}}function go(t,n,r,o){Ea[Pr++]=t,Ea[Pr++]=n,Ea[Pr++]=r,Ea[Pr++]=o,Ou|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Ru(t,n,r,o){return go(t,n,r,o),yo(t)}function mr(t,n){return go(t,null,null,n),yo(t)}function Lh(t,n,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var u=!1,m=t.return;m!==null;)m.childLanes|=r,o=m.alternate,o!==null&&(o.childLanes|=r),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(u=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,u&&n!==null&&(u=31-jt(r),t=m.hiddenUpdates,o=t[u],o===null?t[u]=[n]:o.push(n),n.lane=r|536870912),m):null}function yo(t){if(50<bi)throw bi=0,qd=null,Error(l(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Qr={};function bS(t,n,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ba(t,n,r,o){return new bS(t,n,r,o)}function Tu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function os(t,n){var r=t.alternate;return r===null?(r=ba(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function Bh(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function bo(t,n,r,o,u,m){var b=0;if(o=t,typeof t=="function")Tu(t)&&(b=1);else if(typeof t=="string")b=wN(t,r,k.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ce:return t=ba(31,r,n,u),t.elementType=ce,t.lanes=m,t;case _:return hr(r.children,u,m,n);case C:b=8,u|=24;break;case B:return t=ba(12,r,n,u|2),t.elementType=B,t.lanes=m,t;case R:return t=ba(13,r,n,u),t.elementType=R,t.lanes=m,t;case Z:return t=ba(19,r,n,u),t.elementType=Z,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K:b=10;break e;case T:b=9;break e;case D:b=11;break e;case U:b=14;break e;case X:b=16,o=null;break e}b=29,r=Error(l(130,t===null?"null":typeof t,"")),o=null}return n=ba(b,r,n,u),n.elementType=t,n.type=o,n.lanes=m,n}function hr(t,n,r,o){return t=ba(7,t,o,n),t.lanes=r,t}function Du(t,n,r){return t=ba(6,t,null,n),t.lanes=r,t}function qh(t){var n=ba(18,null,null,0);return n.stateNode=t,n}function zu(t,n,r){return n=ba(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Ih=new WeakMap;function Aa(t,n){if(typeof t=="object"&&t!==null){var r=Ih.get(t);return r!==void 0?r:(n={value:t,source:n,stack:Ee(n)},Ih.set(t,n),n)}return{value:t,source:n,stack:Ee(n)}}var Yr=[],Kr=0,vo=null,Xl=0,Ca=[],Oa=0,Ts=null,ts=1,ns="";function cs(t,n){Yr[Kr++]=Xl,Yr[Kr++]=vo,vo=t,Xl=n}function $h(t,n,r){Ca[Oa++]=ts,Ca[Oa++]=ns,Ca[Oa++]=Ts,Ts=t;var o=ts;t=ns;var u=32-jt(o)-1;o&=~(1<<u),r+=1;var m=32-jt(n)+u;if(30<m){var b=u-u%5;m=(o&(1<<b)-1).toString(32),o>>=b,u-=b,ts=1<<32-jt(n)+u|r<<u|o,ns=m+t}else ts=1<<m|r<<u|o,ns=t}function Mu(t){t.return!==null&&(cs(t,1),$h(t,1,0))}function ku(t){for(;t===vo;)vo=Yr[--Kr],Yr[Kr]=null,Xl=Yr[--Kr],Yr[Kr]=null;for(;t===Ts;)Ts=Ca[--Oa],Ca[Oa]=null,ns=Ca[--Oa],Ca[Oa]=null,ts=Ca[--Oa],Ca[Oa]=null}function Fh(t,n){Ca[Oa++]=ts,Ca[Oa++]=ns,Ca[Oa++]=Ts,ts=n.id,ns=n.overflow,Ts=t}var Hn=null,Vt=null,Nt=!1,Ds=null,Ra=!1,Uu=Error(l(519));function zs(t){var n=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jl(Aa(n,t)),Uu}function Hh(t){var n=t.stateNode,r=t.type,o=t.memoizedProps;switch(n[at]=t,n[yt]=o,r){case"dialog":vt("cancel",n),vt("close",n);break;case"iframe":case"object":case"embed":vt("load",n);break;case"video":case"audio":for(r=0;r<xi.length;r++)vt(xi[r],n);break;case"source":vt("error",n);break;case"img":case"image":case"link":vt("error",n),vt("load",n);break;case"details":vt("toggle",n);break;case"input":vt("invalid",n),Wa(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":vt("invalid",n);break;case"textarea":vt("invalid",n),lo(n,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||ly(n.textContent,r)?(o.popover!=null&&(vt("beforetoggle",n),vt("toggle",n)),o.onScroll!=null&&vt("scroll",n),o.onScrollEnd!=null&&vt("scrollend",n),o.onClick!=null&&(n.onclick=Ha),n=!0):n=!1,n||zs(t,!0)}function Vh(t){for(Hn=t.return;Hn;)switch(Hn.tag){case 5:case 31:case 13:Ra=!1;return;case 27:case 3:Ra=!0;return;default:Hn=Hn.return}}function Xr(t){if(t!==Hn)return!1;if(!Nt)return Vh(t),Nt=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||ef(t.type,t.memoizedProps)),r=!r),r&&Vt&&zs(t),Vh(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));Vt=py(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));Vt=py(t)}else n===27?(n=Vt,Ps(t.type)?(t=rf,rf=null,Vt=t):Vt=n):Vt=Hn?Da(t.stateNode.nextSibling):null;return!0}function pr(){Vt=Hn=null,Nt=!1}function Lu(){var t=Ds;return t!==null&&(ca===null?ca=t:ca.push.apply(ca,t),Ds=null),t}function Jl(t){Ds===null?Ds=[t]:Ds.push(t)}var Bu=w(null),gr=null,us=null;function Ms(t,n,r){ie(Bu,n._currentValue),n._currentValue=r}function ds(t){t._currentValue=Bu.current,P(Bu)}function qu(t,n,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===r)break;t=t.return}}function Iu(t,n,r,o){var u=t.child;for(u!==null&&(u.return=t);u!==null;){var m=u.dependencies;if(m!==null){var b=u.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=u;for(var z=0;z<n.length;z++)if(S.context===n[z]){m.lanes|=r,S=m.alternate,S!==null&&(S.lanes|=r),qu(m.return,r,t),o||(b=null);break e}m=S.next}}else if(u.tag===18){if(b=u.return,b===null)throw Error(l(341));b.lanes|=r,m=b.alternate,m!==null&&(m.lanes|=r),qu(b,r,t),b=null}else b=u.child;if(b!==null)b.return=u;else for(b=u;b!==null;){if(b===t){b=null;break}if(u=b.sibling,u!==null){u.return=b.return,b=u;break}b=b.return}u=b}}function Jr(t,n,r,o){t=null;for(var u=n,m=!1;u!==null;){if(!m){if((u.flags&524288)!==0)m=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var b=u.alternate;if(b===null)throw Error(l(387));if(b=b.memoizedProps,b!==null){var S=u.type;ya(u.pendingProps.value,b.value)||(t!==null?t.push(S):t=[S])}}else if(u===Re.current){if(b=u.alternate,b===null)throw Error(l(387));b.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(t!==null?t.push(_i):t=[_i])}u=u.return}t!==null&&Iu(n,t,r,o),n.flags|=262144}function xo(t){for(t=t.firstContext;t!==null;){if(!ya(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function yr(t){gr=t,us=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Vn(t){return Zh(gr,t)}function So(t,n){return gr===null&&yr(t),Zh(t,n)}function Zh(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},us===null){if(t===null)throw Error(l(308));us=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else us=us.next=n;return r}var vS=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},xS=e.unstable_scheduleCallback,SS=e.unstable_NormalPriority,Sn={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $u(){return{controller:new vS,data:new Map,refCount:0}}function Wl(t){t.refCount--,t.refCount===0&&xS(SS,function(){t.controller.abort()})}var ei=null,Fu=0,Wr=0,el=null;function NS(t,n){if(ei===null){var r=ei=[];Fu=0,Wr=Zd(),el={status:"pending",value:void 0,then:function(o){r.push(o)}}}return Fu++,n.then(Gh,Gh),n}function Gh(){if(--Fu===0&&ei!==null){el!==null&&(el.status="fulfilled");var t=ei;ei=null,Wr=0,el=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function wS(t,n){var r=[],o={status:"pending",value:null,reason:null,then:function(u){r.push(u)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var u=0;u<r.length;u++)(0,r[u])(n)},function(u){for(o.status="rejected",o.reason=u,u=0;u<r.length;u++)(0,r[u])(void 0)}),o}var Ph=M.S;M.S=function(t,n){Rg=G(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&NS(t,n),Ph!==null&&Ph(t,n)};var br=w(null);function Hu(){var t=br.current;return t!==null?t:$t.pooledCache}function No(t,n){n===null?ie(br,br.current):ie(br,n.pool)}function Qh(){var t=Hu();return t===null?null:{parent:Sn._currentValue,pool:t}}var tl=Error(l(460)),Vu=Error(l(474)),wo=Error(l(542)),jo={then:function(){}};function Yh(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Kh(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(Ha,Ha),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Jh(t),t;default:if(typeof n.status=="string")n.then(Ha,Ha);else{if(t=$t,t!==null&&100<t.shellSuspendCounter)throw Error(l(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=o}},function(o){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Jh(t),t}throw xr=n,tl}}function vr(t){try{var n=t._init;return n(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(xr=r,tl):r}}var xr=null;function Xh(){if(xr===null)throw Error(l(459));var t=xr;return xr=null,t}function Jh(t){if(t===tl||t===wo)throw Error(l(483))}var nl=null,ti=0;function _o(t){var n=ti;return ti+=1,nl===null&&(nl=[]),Kh(nl,t,n)}function ni(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Eo(t,n){throw n.$$typeof===N?Error(l(525)):(t=Object.prototype.toString.call(n),Error(l(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Wh(t){function n(F,L){if(t){var J=F.deletions;J===null?(F.deletions=[L],F.flags|=16):J.push(L)}}function r(F,L){if(!t)return null;for(;L!==null;)n(F,L),L=L.sibling;return null}function o(F){for(var L=new Map;F!==null;)F.key!==null?L.set(F.key,F):L.set(F.index,F),F=F.sibling;return L}function u(F,L){return F=os(F,L),F.index=0,F.sibling=null,F}function m(F,L,J){return F.index=J,t?(J=F.alternate,J!==null?(J=J.index,J<L?(F.flags|=67108866,L):J):(F.flags|=67108866,L)):(F.flags|=1048576,L)}function b(F){return t&&F.alternate===null&&(F.flags|=67108866),F}function S(F,L,J,ye){return L===null||L.tag!==6?(L=Du(J,F.mode,ye),L.return=F,L):(L=u(L,J),L.return=F,L)}function z(F,L,J,ye){var Xe=J.type;return Xe===_?ue(F,L,J.props.children,ye,J.key):L!==null&&(L.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===X&&vr(Xe)===L.type)?(L=u(L,J.props),ni(L,J),L.return=F,L):(L=bo(J.type,J.key,J.props,null,F.mode,ye),ni(L,J),L.return=F,L)}function W(F,L,J,ye){return L===null||L.tag!==4||L.stateNode.containerInfo!==J.containerInfo||L.stateNode.implementation!==J.implementation?(L=zu(J,F.mode,ye),L.return=F,L):(L=u(L,J.children||[]),L.return=F,L)}function ue(F,L,J,ye,Xe){return L===null||L.tag!==7?(L=hr(J,F.mode,ye,Xe),L.return=F,L):(L=u(L,J),L.return=F,L)}function ve(F,L,J){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Du(""+L,F.mode,J),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case q:return J=bo(L.type,L.key,L.props,null,F.mode,J),ni(J,L),J.return=F,J;case j:return L=zu(L,F.mode,J),L.return=F,L;case X:return L=vr(L),ve(F,L,J)}if(Oe(L)||me(L))return L=hr(L,F.mode,J,null),L.return=F,L;if(typeof L.then=="function")return ve(F,_o(L),J);if(L.$$typeof===K)return ve(F,So(F,L),J);Eo(F,L)}return null}function ne(F,L,J,ye){var Xe=L!==null?L.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Xe!==null?null:S(F,L,""+J,ye);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case q:return J.key===Xe?z(F,L,J,ye):null;case j:return J.key===Xe?W(F,L,J,ye):null;case X:return J=vr(J),ne(F,L,J,ye)}if(Oe(J)||me(J))return Xe!==null?null:ue(F,L,J,ye,null);if(typeof J.then=="function")return ne(F,L,_o(J),ye);if(J.$$typeof===K)return ne(F,L,So(F,J),ye);Eo(F,J)}return null}function le(F,L,J,ye,Xe){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return F=F.get(J)||null,S(L,F,""+ye,Xe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case q:return F=F.get(ye.key===null?J:ye.key)||null,z(L,F,ye,Xe);case j:return F=F.get(ye.key===null?J:ye.key)||null,W(L,F,ye,Xe);case X:return ye=vr(ye),le(F,L,J,ye,Xe)}if(Oe(ye)||me(ye))return F=F.get(J)||null,ue(L,F,ye,Xe,null);if(typeof ye.then=="function")return le(F,L,J,_o(ye),Xe);if(ye.$$typeof===K)return le(F,L,J,So(L,ye),Xe);Eo(L,ye)}return null}function Ge(F,L,J,ye){for(var Xe=null,Et=null,Qe=L,mt=L=0,St=null;Qe!==null&&mt<J.length;mt++){Qe.index>mt?(St=Qe,Qe=null):St=Qe.sibling;var At=ne(F,Qe,J[mt],ye);if(At===null){Qe===null&&(Qe=St);break}t&&Qe&&At.alternate===null&&n(F,Qe),L=m(At,L,mt),Et===null?Xe=At:Et.sibling=At,Et=At,Qe=St}if(mt===J.length)return r(F,Qe),Nt&&cs(F,mt),Xe;if(Qe===null){for(;mt<J.length;mt++)Qe=ve(F,J[mt],ye),Qe!==null&&(L=m(Qe,L,mt),Et===null?Xe=Qe:Et.sibling=Qe,Et=Qe);return Nt&&cs(F,mt),Xe}for(Qe=o(Qe);mt<J.length;mt++)St=le(Qe,F,mt,J[mt],ye),St!==null&&(t&&St.alternate!==null&&Qe.delete(St.key===null?mt:St.key),L=m(St,L,mt),Et===null?Xe=St:Et.sibling=St,Et=St);return t&&Qe.forEach(function(Js){return n(F,Js)}),Nt&&cs(F,mt),Xe}function tt(F,L,J,ye){if(J==null)throw Error(l(151));for(var Xe=null,Et=null,Qe=L,mt=L=0,St=null,At=J.next();Qe!==null&&!At.done;mt++,At=J.next()){Qe.index>mt?(St=Qe,Qe=null):St=Qe.sibling;var Js=ne(F,Qe,At.value,ye);if(Js===null){Qe===null&&(Qe=St);break}t&&Qe&&Js.alternate===null&&n(F,Qe),L=m(Js,L,mt),Et===null?Xe=Js:Et.sibling=Js,Et=Js,Qe=St}if(At.done)return r(F,Qe),Nt&&cs(F,mt),Xe;if(Qe===null){for(;!At.done;mt++,At=J.next())At=ve(F,At.value,ye),At!==null&&(L=m(At,L,mt),Et===null?Xe=At:Et.sibling=At,Et=At);return Nt&&cs(F,mt),Xe}for(Qe=o(Qe);!At.done;mt++,At=J.next())At=le(Qe,F,mt,At.value,ye),At!==null&&(t&&At.alternate!==null&&Qe.delete(At.key===null?mt:At.key),L=m(At,L,mt),Et===null?Xe=At:Et.sibling=At,Et=At);return t&&Qe.forEach(function(MN){return n(F,MN)}),Nt&&cs(F,mt),Xe}function Bt(F,L,J,ye){if(typeof J=="object"&&J!==null&&J.type===_&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case q:e:{for(var Xe=J.key;L!==null;){if(L.key===Xe){if(Xe=J.type,Xe===_){if(L.tag===7){r(F,L.sibling),ye=u(L,J.props.children),ye.return=F,F=ye;break e}}else if(L.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===X&&vr(Xe)===L.type){r(F,L.sibling),ye=u(L,J.props),ni(ye,J),ye.return=F,F=ye;break e}r(F,L);break}else n(F,L);L=L.sibling}J.type===_?(ye=hr(J.props.children,F.mode,ye,J.key),ye.return=F,F=ye):(ye=bo(J.type,J.key,J.props,null,F.mode,ye),ni(ye,J),ye.return=F,F=ye)}return b(F);case j:e:{for(Xe=J.key;L!==null;){if(L.key===Xe)if(L.tag===4&&L.stateNode.containerInfo===J.containerInfo&&L.stateNode.implementation===J.implementation){r(F,L.sibling),ye=u(L,J.children||[]),ye.return=F,F=ye;break e}else{r(F,L);break}else n(F,L);L=L.sibling}ye=zu(J,F.mode,ye),ye.return=F,F=ye}return b(F);case X:return J=vr(J),Bt(F,L,J,ye)}if(Oe(J))return Ge(F,L,J,ye);if(me(J)){if(Xe=me(J),typeof Xe!="function")throw Error(l(150));return J=Xe.call(J),tt(F,L,J,ye)}if(typeof J.then=="function")return Bt(F,L,_o(J),ye);if(J.$$typeof===K)return Bt(F,L,So(F,J),ye);Eo(F,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,L!==null&&L.tag===6?(r(F,L.sibling),ye=u(L,J),ye.return=F,F=ye):(r(F,L),ye=Du(J,F.mode,ye),ye.return=F,F=ye),b(F)):r(F,L)}return function(F,L,J,ye){try{ti=0;var Xe=Bt(F,L,J,ye);return nl=null,Xe}catch(Qe){if(Qe===tl||Qe===wo)throw Qe;var Et=ba(29,Qe,null,F.mode);return Et.lanes=ye,Et.return=F,Et}finally{}}}var Sr=Wh(!0),ep=Wh(!1),ks=!1;function Zu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gu(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Us(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ls(t,n,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Ot&2)!==0){var u=o.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),o.pending=n,n=yo(t),Lh(t,null,r),n}return go(t,o,n,r),yo(t)}function ai(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,ft(t,r)}}function Pu(t,n){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var u=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?u=m=b:m=m.next=b,r=r.next}while(r!==null);m===null?u=m=n:m=m.next=n}else u=m=n;r={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var Qu=!1;function si(){if(Qu){var t=el;if(t!==null)throw t}}function ri(t,n,r,o){Qu=!1;var u=t.updateQueue;ks=!1;var m=u.firstBaseUpdate,b=u.lastBaseUpdate,S=u.shared.pending;if(S!==null){u.shared.pending=null;var z=S,W=z.next;z.next=null,b===null?m=W:b.next=W,b=z;var ue=t.alternate;ue!==null&&(ue=ue.updateQueue,S=ue.lastBaseUpdate,S!==b&&(S===null?ue.firstBaseUpdate=W:S.next=W,ue.lastBaseUpdate=z))}if(m!==null){var ve=u.baseState;b=0,ue=W=z=null,S=m;do{var ne=S.lane&-536870913,le=ne!==S.lane;if(le?(xt&ne)===ne:(o&ne)===ne){ne!==0&&ne===Wr&&(Qu=!0),ue!==null&&(ue=ue.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Ge=t,tt=S;ne=n;var Bt=r;switch(tt.tag){case 1:if(Ge=tt.payload,typeof Ge=="function"){ve=Ge.call(Bt,ve,ne);break e}ve=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=tt.payload,ne=typeof Ge=="function"?Ge.call(Bt,ve,ne):Ge,ne==null)break e;ve=x({},ve,ne);break e;case 2:ks=!0}}ne=S.callback,ne!==null&&(t.flags|=64,le&&(t.flags|=8192),le=u.callbacks,le===null?u.callbacks=[ne]:le.push(ne))}else le={lane:ne,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ue===null?(W=ue=le,z=ve):ue=ue.next=le,b|=ne;if(S=S.next,S===null){if(S=u.shared.pending,S===null)break;le=S,S=le.next,le.next=null,u.lastBaseUpdate=le,u.shared.pending=null}}while(!0);ue===null&&(z=ve),u.baseState=z,u.firstBaseUpdate=W,u.lastBaseUpdate=ue,m===null&&(u.shared.lanes=0),Fs|=b,t.lanes=b,t.memoizedState=ve}}function tp(t,n){if(typeof t!="function")throw Error(l(191,t));t.call(n)}function np(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)tp(r[t],n)}var al=w(null),Ao=w(0);function ap(t,n){t=xs,ie(Ao,t),ie(al,n),xs=t|n.baseLanes}function Yu(){ie(Ao,xs),ie(al,al.current)}function Ku(){xs=Ao.current,P(al),P(Ao)}var va=w(null),Ta=null;function Bs(t){var n=t.alternate;ie(gn,gn.current&1),ie(va,t),Ta===null&&(n===null||al.current!==null||n.memoizedState!==null)&&(Ta=t)}function Xu(t){ie(gn,gn.current),ie(va,t),Ta===null&&(Ta=t)}function sp(t){t.tag===22?(ie(gn,gn.current),ie(va,t),Ta===null&&(Ta=t)):qs()}function qs(){ie(gn,gn.current),ie(va,va.current)}function xa(t){P(va),Ta===t&&(Ta=null),P(gn)}var gn=w(0);function Co(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||af(r)||sf(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var fs=0,ct=null,Ut=null,Nn=null,Oo=!1,sl=!1,Nr=!1,Ro=0,li=0,rl=null,jS=0;function on(){throw Error(l(321))}function Ju(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!ya(t[r],n[r]))return!1;return!0}function Wu(t,n,r,o,u,m){return fs=m,ct=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,M.H=t===null||t.memoizedState===null?$p:hd,Nr=!1,m=r(o,u),Nr=!1,sl&&(m=lp(n,r,o,u)),rp(t),m}function rp(t){M.H=ci;var n=Ut!==null&&Ut.next!==null;if(fs=0,Nn=Ut=ct=null,Oo=!1,li=0,rl=null,n)throw Error(l(300));t===null||wn||(t=t.dependencies,t!==null&&xo(t)&&(wn=!0))}function lp(t,n,r,o){ct=t;var u=0;do{if(sl&&(rl=null),li=0,sl=!1,25<=u)throw Error(l(301));if(u+=1,Nn=Ut=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}M.H=Fp,m=n(r,o)}while(sl);return m}function _S(){var t=M.H,n=t.useState()[0];return n=typeof n.then=="function"?ii(n):n,t=t.useState()[0],(Ut!==null?Ut.memoizedState:null)!==t&&(ct.flags|=1024),n}function ed(){var t=Ro!==0;return Ro=0,t}function td(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function nd(t){if(Oo){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Oo=!1}fs=0,Nn=Ut=ct=null,sl=!1,li=Ro=0,rl=null}function ea(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?ct.memoizedState=Nn=t:Nn=Nn.next=t,Nn}function yn(){if(Ut===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Ut.next;var n=Nn===null?ct.memoizedState:Nn.next;if(n!==null)Nn=n,Ut=t;else{if(t===null)throw ct.alternate===null?Error(l(467)):Error(l(310));Ut=t,t={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Nn===null?ct.memoizedState=Nn=t:Nn=Nn.next=t}return Nn}function To(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ii(t){var n=li;return li+=1,rl===null&&(rl=[]),t=Kh(rl,t,n),n=ct,(Nn===null?n.memoizedState:Nn.next)===null&&(n=n.alternate,M.H=n===null||n.memoizedState===null?$p:hd),t}function Do(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ii(t);if(t.$$typeof===K)return Vn(t)}throw Error(l(438,String(t)))}function ad(t){var n=null,r=ct.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=ct.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=To(),ct.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),o=0;o<t;o++)r[o]=_e;return n.index++,r}function ms(t,n){return typeof n=="function"?n(t):n}function zo(t){var n=yn();return sd(n,Ut,t)}function sd(t,n,r){var o=t.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=r;var u=t.baseQueue,m=o.pending;if(m!==null){if(u!==null){var b=u.next;u.next=m.next,m.next=b}n.baseQueue=u=m,o.pending=null}if(m=t.baseState,u===null)t.memoizedState=m;else{n=u.next;var S=b=null,z=null,W=n,ue=!1;do{var ve=W.lane&-536870913;if(ve!==W.lane?(xt&ve)===ve:(fs&ve)===ve){var ne=W.revertLane;if(ne===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ve===Wr&&(ue=!0);else if((fs&ne)===ne){W=W.next,ne===Wr&&(ue=!0);continue}else ve={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},z===null?(S=z=ve,b=m):z=z.next=ve,ct.lanes|=ne,Fs|=ne;ve=W.action,Nr&&r(m,ve),m=W.hasEagerState?W.eagerState:r(m,ve)}else ne={lane:ve,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},z===null?(S=z=ne,b=m):z=z.next=ne,ct.lanes|=ve,Fs|=ve;W=W.next}while(W!==null&&W!==n);if(z===null?b=m:z.next=S,!ya(m,t.memoizedState)&&(wn=!0,ue&&(r=el,r!==null)))throw r;t.memoizedState=m,t.baseState=b,t.baseQueue=z,o.lastRenderedState=m}return u===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function rd(t){var n=yn(),r=n.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=t;var o=r.dispatch,u=r.pending,m=n.memoizedState;if(u!==null){r.pending=null;var b=u=u.next;do m=t(m,b.action),b=b.next;while(b!==u);ya(m,n.memoizedState)||(wn=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),r.lastRenderedState=m}return[m,o]}function ip(t,n,r){var o=ct,u=yn(),m=Nt;if(m){if(r===void 0)throw Error(l(407));r=r()}else r=n();var b=!ya((Ut||u).memoizedState,r);if(b&&(u.memoizedState=r,wn=!0),u=u.queue,od(up.bind(null,o,u,t),[t]),u.getSnapshot!==n||b||Nn!==null&&Nn.memoizedState.tag&1){if(o.flags|=2048,ll(9,{destroy:void 0},cp.bind(null,o,u,r,n),null),$t===null)throw Error(l(349));m||(fs&127)!==0||op(o,n,r)}return r}function op(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=ct.updateQueue,n===null?(n=To(),ct.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function cp(t,n,r,o){n.value=r,n.getSnapshot=o,dp(n)&&fp(t)}function up(t,n,r){return r(function(){dp(n)&&fp(t)})}function dp(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!ya(t,r)}catch{return!0}}function fp(t){var n=mr(t,2);n!==null&&ua(n,t,2)}function ld(t){var n=ea();if(typeof t=="function"){var r=t;if(t=r(),Nr){qt(!0);try{r()}finally{qt(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:t},n}function mp(t,n,r,o){return t.baseState=r,sd(t,Ut,typeof o=="function"?o:ms)}function ES(t,n,r,o,u){if(Uo(t))throw Error(l(485));if(t=n.action,t!==null){var m={payload:u,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};M.T!==null?r(!0):m.isTransition=!1,o(m),r=n.pending,r===null?(m.next=n.pending=m,hp(n,m)):(m.next=r.next,n.pending=r.next=m)}}function hp(t,n){var r=n.action,o=n.payload,u=t.state;if(n.isTransition){var m=M.T,b={};M.T=b;try{var S=r(u,o),z=M.S;z!==null&&z(b,S),pp(t,n,S)}catch(W){id(t,n,W)}finally{m!==null&&b.types!==null&&(m.types=b.types),M.T=m}}else try{m=r(u,o),pp(t,n,m)}catch(W){id(t,n,W)}}function pp(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){gp(t,n,o)},function(o){return id(t,n,o)}):gp(t,n,r)}function gp(t,n,r){n.status="fulfilled",n.value=r,yp(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,hp(t,r)))}function id(t,n,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,yp(n),n=n.next;while(n!==o)}t.action=null}function yp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function bp(t,n){return n}function vp(t,n){if(Nt){var r=$t.formState;if(r!==null){e:{var o=ct;if(Nt){if(Vt){t:{for(var u=Vt,m=Ra;u.nodeType!==8;){if(!m){u=null;break t}if(u=Da(u.nextSibling),u===null){u=null;break t}}m=u.data,u=m==="F!"||m==="F"?u:null}if(u){Vt=Da(u.nextSibling),o=u.data==="F!";break e}}zs(o)}o=!1}o&&(n=r[0])}}return r=ea(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bp,lastRenderedState:n},r.queue=o,r=Bp.bind(null,ct,o),o.dispatch=r,o=ld(!1),m=md.bind(null,ct,!1,o.queue),o=ea(),u={state:n,dispatch:null,action:t,pending:null},o.queue=u,r=ES.bind(null,ct,u,m,r),u.dispatch=r,o.memoizedState=t,[n,r,!1]}function xp(t){var n=yn();return Sp(n,Ut,t)}function Sp(t,n,r){if(n=sd(t,n,bp)[0],t=zo(ms)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=ii(n)}catch(b){throw b===tl?wo:b}else o=n;n=yn();var u=n.queue,m=u.dispatch;return r!==n.memoizedState&&(ct.flags|=2048,ll(9,{destroy:void 0},AS.bind(null,u,r),null)),[o,m,t]}function AS(t,n){t.action=n}function Np(t){var n=yn(),r=Ut;if(r!==null)return Sp(n,r,t);yn(),n=n.memoizedState,r=yn();var o=r.queue.dispatch;return r.memoizedState=t,[n,o,!1]}function ll(t,n,r,o){return t={tag:t,create:r,deps:o,inst:n,next:null},n=ct.updateQueue,n===null&&(n=To(),ct.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,n.lastEffect=t),t}function wp(){return yn().memoizedState}function Mo(t,n,r,o){var u=ea();ct.flags|=t,u.memoizedState=ll(1|n,{destroy:void 0},r,o===void 0?null:o)}function ko(t,n,r,o){var u=yn();o=o===void 0?null:o;var m=u.memoizedState.inst;Ut!==null&&o!==null&&Ju(o,Ut.memoizedState.deps)?u.memoizedState=ll(n,m,r,o):(ct.flags|=t,u.memoizedState=ll(1|n,m,r,o))}function jp(t,n){Mo(8390656,8,t,n)}function od(t,n){ko(2048,8,t,n)}function CS(t){ct.flags|=4;var n=ct.updateQueue;if(n===null)n=To(),ct.updateQueue=n,n.events=[t];else{var r=n.events;r===null?n.events=[t]:r.push(t)}}function _p(t){var n=yn().memoizedState;return CS({ref:n,nextImpl:t}),function(){if((Ot&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}function Ep(t,n){return ko(4,2,t,n)}function Ap(t,n){return ko(4,4,t,n)}function Cp(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Op(t,n,r){r=r!=null?r.concat([t]):null,ko(4,4,Cp.bind(null,n,t),r)}function cd(){}function Rp(t,n){var r=yn();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&Ju(n,o[1])?o[0]:(r.memoizedState=[t,n],t)}function Tp(t,n){var r=yn();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&Ju(n,o[1]))return o[0];if(o=t(),Nr){qt(!0);try{t()}finally{qt(!1)}}return r.memoizedState=[o,n],o}function ud(t,n,r){return r===void 0||(fs&1073741824)!==0&&(xt&261930)===0?t.memoizedState=n:(t.memoizedState=r,t=Dg(),ct.lanes|=t,Fs|=t,r)}function Dp(t,n,r,o){return ya(r,n)?r:al.current!==null?(t=ud(t,r,o),ya(t,n)||(wn=!0),t):(fs&42)===0||(fs&1073741824)!==0&&(xt&261930)===0?(wn=!0,t.memoizedState=r):(t=Dg(),ct.lanes|=t,Fs|=t,n)}function zp(t,n,r,o,u){var m=I.p;I.p=m!==0&&8>m?m:8;var b=M.T,S={};M.T=S,md(t,!1,n,r);try{var z=u(),W=M.S;if(W!==null&&W(S,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ue=wS(z,o);oi(t,n,ue,wa(t))}else oi(t,n,o,wa(t))}catch(ve){oi(t,n,{then:function(){},status:"rejected",reason:ve},wa())}finally{I.p=m,b!==null&&S.types!==null&&(b.types=S.types),M.T=b}}function OS(){}function dd(t,n,r,o){if(t.tag!==5)throw Error(l(476));var u=Mp(t).queue;zp(t,u,n,ee,r===null?OS:function(){return kp(t),r(o)})}function Mp(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:ee},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function kp(t){var n=Mp(t);n.next===null&&(n=t.alternate.memoizedState),oi(t,n.next.queue,{},wa())}function fd(){return Vn(_i)}function Up(){return yn().memoizedState}function Lp(){return yn().memoizedState}function RS(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=wa();t=Us(r);var o=Ls(n,t,r);o!==null&&(ua(o,n,r),ai(o,n,r)),n={cache:$u()},t.payload=n;return}n=n.return}}function TS(t,n,r){var o=wa();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Uo(t)?qp(n,r):(r=Ru(t,n,r,o),r!==null&&(ua(r,t,o),Ip(r,n,o)))}function Bp(t,n,r){var o=wa();oi(t,n,r,o)}function oi(t,n,r,o){var u={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Uo(t))qp(n,u);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var b=n.lastRenderedState,S=m(b,r);if(u.hasEagerState=!0,u.eagerState=S,ya(S,b))return go(t,n,u,0),$t===null&&po(),!1}catch{}finally{}if(r=Ru(t,n,u,o),r!==null)return ua(r,t,o),Ip(r,n,o),!0}return!1}function md(t,n,r,o){if(o={lane:2,revertLane:Zd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Uo(t)){if(n)throw Error(l(479))}else n=Ru(t,r,o,2),n!==null&&ua(n,t,2)}function Uo(t){var n=t.alternate;return t===ct||n!==null&&n===ct}function qp(t,n){sl=Oo=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function Ip(t,n,r){if((r&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,ft(t,r)}}var ci={readContext:Vn,use:Do,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on,useHostTransitionStatus:on,useFormState:on,useActionState:on,useOptimistic:on,useMemoCache:on,useCacheRefresh:on};ci.useEffectEvent=on;var $p={readContext:Vn,use:Do,useCallback:function(t,n){return ea().memoizedState=[t,n===void 0?null:n],t},useContext:Vn,useEffect:jp,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,Mo(4194308,4,Cp.bind(null,n,t),r)},useLayoutEffect:function(t,n){return Mo(4194308,4,t,n)},useInsertionEffect:function(t,n){Mo(4,2,t,n)},useMemo:function(t,n){var r=ea();n=n===void 0?null:n;var o=t();if(Nr){qt(!0);try{t()}finally{qt(!1)}}return r.memoizedState=[o,n],o},useReducer:function(t,n,r){var o=ea();if(r!==void 0){var u=r(n);if(Nr){qt(!0);try{r(n)}finally{qt(!1)}}}else u=n;return o.memoizedState=o.baseState=u,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:u},o.queue=t,t=t.dispatch=TS.bind(null,ct,t),[o.memoizedState,t]},useRef:function(t){var n=ea();return t={current:t},n.memoizedState=t},useState:function(t){t=ld(t);var n=t.queue,r=Bp.bind(null,ct,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:cd,useDeferredValue:function(t,n){var r=ea();return ud(r,t,n)},useTransition:function(){var t=ld(!1);return t=zp.bind(null,ct,t.queue,!0,!1),ea().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var o=ct,u=ea();if(Nt){if(r===void 0)throw Error(l(407));r=r()}else{if(r=n(),$t===null)throw Error(l(349));(xt&127)!==0||op(o,n,r)}u.memoizedState=r;var m={value:r,getSnapshot:n};return u.queue=m,jp(up.bind(null,o,m,t),[t]),o.flags|=2048,ll(9,{destroy:void 0},cp.bind(null,o,m,r,n),null),r},useId:function(){var t=ea(),n=$t.identifierPrefix;if(Nt){var r=ns,o=ts;r=(o&~(1<<32-jt(o)-1)).toString(32)+r,n="_"+n+"R_"+r,r=Ro++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=jS++,n="_"+n+"r_"+r.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:fd,useFormState:vp,useActionState:vp,useOptimistic:function(t){var n=ea();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=md.bind(null,ct,!0,r),r.dispatch=n,[t,n]},useMemoCache:ad,useCacheRefresh:function(){return ea().memoizedState=RS.bind(null,ct)},useEffectEvent:function(t){var n=ea(),r={impl:t};return n.memoizedState=r,function(){if((Ot&2)!==0)throw Error(l(440));return r.impl.apply(void 0,arguments)}}},hd={readContext:Vn,use:Do,useCallback:Rp,useContext:Vn,useEffect:od,useImperativeHandle:Op,useInsertionEffect:Ep,useLayoutEffect:Ap,useMemo:Tp,useReducer:zo,useRef:wp,useState:function(){return zo(ms)},useDebugValue:cd,useDeferredValue:function(t,n){var r=yn();return Dp(r,Ut.memoizedState,t,n)},useTransition:function(){var t=zo(ms)[0],n=yn().memoizedState;return[typeof t=="boolean"?t:ii(t),n]},useSyncExternalStore:ip,useId:Up,useHostTransitionStatus:fd,useFormState:xp,useActionState:xp,useOptimistic:function(t,n){var r=yn();return mp(r,Ut,t,n)},useMemoCache:ad,useCacheRefresh:Lp};hd.useEffectEvent=_p;var Fp={readContext:Vn,use:Do,useCallback:Rp,useContext:Vn,useEffect:od,useImperativeHandle:Op,useInsertionEffect:Ep,useLayoutEffect:Ap,useMemo:Tp,useReducer:rd,useRef:wp,useState:function(){return rd(ms)},useDebugValue:cd,useDeferredValue:function(t,n){var r=yn();return Ut===null?ud(r,t,n):Dp(r,Ut.memoizedState,t,n)},useTransition:function(){var t=rd(ms)[0],n=yn().memoizedState;return[typeof t=="boolean"?t:ii(t),n]},useSyncExternalStore:ip,useId:Up,useHostTransitionStatus:fd,useFormState:Np,useActionState:Np,useOptimistic:function(t,n){var r=yn();return Ut!==null?mp(r,Ut,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:ad,useCacheRefresh:Lp};Fp.useEffectEvent=_p;function pd(t,n,r,o){n=t.memoizedState,r=r(o,n),r=r==null?n:x({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var gd={enqueueSetState:function(t,n,r){t=t._reactInternals;var o=wa(),u=Us(o);u.payload=n,r!=null&&(u.callback=r),n=Ls(t,u,o),n!==null&&(ua(n,t,o),ai(n,t,o))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var o=wa(),u=Us(o);u.tag=1,u.payload=n,r!=null&&(u.callback=r),n=Ls(t,u,o),n!==null&&(ua(n,t,o),ai(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=wa(),o=Us(r);o.tag=2,n!=null&&(o.callback=n),n=Ls(t,o,r),n!==null&&(ua(n,t,r),ai(n,t,r))}};function Hp(t,n,r,o,u,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,b):n.prototype&&n.prototype.isPureReactComponent?!Yl(r,o)||!Yl(u,m):!0}function Vp(t,n,r,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==t&&gd.enqueueReplaceState(n,n.state,null)}function wr(t,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(t=t.defaultProps){r===n&&(r=x({},r));for(var u in t)r[u]===void 0&&(r[u]=t[u])}return r}function Zp(t){ho(t)}function Gp(t){console.error(t)}function Pp(t){ho(t)}function Lo(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Qp(t,n,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function yd(t,n,r){return r=Us(r),r.tag=3,r.payload={element:null},r.callback=function(){Lo(t,n)},r}function Yp(t){return t=Us(t),t.tag=3,t}function Kp(t,n,r,o){var u=r.type.getDerivedStateFromError;if(typeof u=="function"){var m=o.value;t.payload=function(){return u(m)},t.callback=function(){Qp(n,r,o)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Qp(n,r,o),typeof u!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})})}function DS(t,n,r,o,u){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&Jr(n,r,u,!0),r=va.current,r!==null){switch(r.tag){case 31:case 13:return Ta===null?Yo():r.alternate===null&&cn===0&&(cn=3),r.flags&=-257,r.flags|=65536,r.lanes=u,o===jo?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),Fd(t,o,u)),!1;case 22:return r.flags|=65536,o===jo?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),Fd(t,o,u)),!1}throw Error(l(435,r.tag))}return Fd(t,o,u),Yo(),!1}if(Nt)return n=va.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,o!==Uu&&(t=Error(l(422),{cause:o}),Jl(Aa(t,r)))):(o!==Uu&&(n=Error(l(423),{cause:o}),Jl(Aa(n,r))),t=t.current.alternate,t.flags|=65536,u&=-u,t.lanes|=u,o=Aa(o,r),u=yd(t.stateNode,o,u),Pu(t,u),cn!==4&&(cn=2)),!1;var m=Error(l(520),{cause:o});if(m=Aa(m,r),yi===null?yi=[m]:yi.push(m),cn!==4&&(cn=2),n===null)return!0;o=Aa(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=u&-u,r.lanes|=t,t=yd(r.stateNode,o,t),Pu(r,t),!1;case 1:if(n=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Hs===null||!Hs.has(m))))return r.flags|=65536,u&=-u,r.lanes|=u,u=Yp(u),Kp(u,t,r,o),Pu(r,u),!1}r=r.return}while(r!==null);return!1}var bd=Error(l(461)),wn=!1;function Zn(t,n,r,o){n.child=t===null?ep(n,null,r,o):Sr(n,t.child,r,o)}function Xp(t,n,r,o,u){r=r.render;var m=n.ref;if("ref"in o){var b={};for(var S in o)S!=="ref"&&(b[S]=o[S])}else b=o;return yr(n),o=Wu(t,n,r,b,m,u),S=ed(),t!==null&&!wn?(td(t,n,u),hs(t,n,u)):(Nt&&S&&Mu(n),n.flags|=1,Zn(t,n,o,u),n.child)}function Jp(t,n,r,o,u){if(t===null){var m=r.type;return typeof m=="function"&&!Tu(m)&&m.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=m,Wp(t,n,m,o,u)):(t=bo(r.type,null,o,n,n.mode,u),t.ref=n.ref,t.return=n,n.child=t)}if(m=t.child,!Ed(t,u)){var b=m.memoizedProps;if(r=r.compare,r=r!==null?r:Yl,r(b,o)&&t.ref===n.ref)return hs(t,n,u)}return n.flags|=1,t=os(m,o),t.ref=n.ref,t.return=n,n.child=t}function Wp(t,n,r,o,u){if(t!==null){var m=t.memoizedProps;if(Yl(m,o)&&t.ref===n.ref)if(wn=!1,n.pendingProps=o=m,Ed(t,u))(t.flags&131072)!==0&&(wn=!0);else return n.lanes=t.lanes,hs(t,n,u)}return vd(t,n,r,o,u)}function eg(t,n,r,o){var u=o.children,m=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,t!==null){for(o=n.child=t.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~m}else o=0,n.child=null;return tg(t,n,m,r,o)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&No(n,m!==null?m.cachePool:null),m!==null?ap(n,m):Yu(),sp(n);else return o=n.lanes=536870912,tg(t,n,m!==null?m.baseLanes|r:r,r,o)}else m!==null?(No(n,m.cachePool),ap(n,m),qs(),n.memoizedState=null):(t!==null&&No(n,null),Yu(),qs());return Zn(t,n,u,r),n.child}function ui(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function tg(t,n,r,o,u){var m=Hu();return m=m===null?null:{parent:Sn._currentValue,pool:m},n.memoizedState={baseLanes:r,cachePool:m},t!==null&&No(n,null),Yu(),sp(n),t!==null&&Jr(t,n,o,!0),n.childLanes=u,null}function Bo(t,n){return n=Io({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function ng(t,n,r){return Sr(n,t.child,null,r),t=Bo(n,n.pendingProps),t.flags|=2,xa(n),n.memoizedState=null,t}function zS(t,n,r){var o=n.pendingProps,u=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(Nt){if(o.mode==="hidden")return t=Bo(n,o),n.lanes=536870912,ui(null,t);if(Xu(n),(t=Vt)?(t=hy(t,Ra),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Ts!==null?{id:ts,overflow:ns}:null,retryLane:536870912,hydrationErrors:null},r=qh(t),r.return=n,n.child=r,Hn=n,Vt=null)):t=null,t===null)throw zs(n);return n.lanes=536870912,null}return Bo(n,o)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if(Xu(n),u)if(n.flags&256)n.flags&=-257,n=ng(t,n,r);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(l(558));else if(wn||Jr(t,n,r,!1),u=(r&t.childLanes)!==0,wn||u){if(o=$t,o!==null&&(b=Ke(o,r),b!==0&&b!==m.retryLane))throw m.retryLane=b,mr(t,b),ua(o,t,b),bd;Yo(),n=ng(t,n,r)}else t=m.treeContext,Vt=Da(b.nextSibling),Hn=n,Nt=!0,Ds=null,Ra=!1,t!==null&&Fh(n,t),n=Bo(n,o),n.flags|=4096;return n}return t=os(t.child,{mode:o.mode,children:o.children}),t.ref=n.ref,n.child=t,t.return=n,t}function qo(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(l(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function vd(t,n,r,o,u){return yr(n),r=Wu(t,n,r,o,void 0,u),o=ed(),t!==null&&!wn?(td(t,n,u),hs(t,n,u)):(Nt&&o&&Mu(n),n.flags|=1,Zn(t,n,r,u),n.child)}function ag(t,n,r,o,u,m){return yr(n),n.updateQueue=null,r=lp(n,o,r,u),rp(t),o=ed(),t!==null&&!wn?(td(t,n,m),hs(t,n,m)):(Nt&&o&&Mu(n),n.flags|=1,Zn(t,n,r,m),n.child)}function sg(t,n,r,o,u){if(yr(n),n.stateNode===null){var m=Qr,b=r.contextType;typeof b=="object"&&b!==null&&(m=Vn(b)),m=new r(o,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=gd,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=o,m.state=n.memoizedState,m.refs={},Zu(n),b=r.contextType,m.context=typeof b=="object"&&b!==null?Vn(b):Qr,m.state=n.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(pd(n,r,b,o),m.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&gd.enqueueReplaceState(m,m.state,null),ri(n,o,m,u),si(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){m=n.stateNode;var S=n.memoizedProps,z=wr(r,S);m.props=z;var W=m.context,ue=r.contextType;b=Qr,typeof ue=="object"&&ue!==null&&(b=Vn(ue));var ve=r.getDerivedStateFromProps;ue=typeof ve=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=n.pendingProps!==S,ue||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||W!==b)&&Vp(n,m,o,b),ks=!1;var ne=n.memoizedState;m.state=ne,ri(n,o,m,u),si(),W=n.memoizedState,S||ne!==W||ks?(typeof ve=="function"&&(pd(n,r,ve,o),W=n.memoizedState),(z=ks||Hp(n,r,z,o,ne,W,b))?(ue||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=W),m.props=o,m.state=W,m.context=b,o=z):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{m=n.stateNode,Gu(t,n),b=n.memoizedProps,ue=wr(r,b),m.props=ue,ve=n.pendingProps,ne=m.context,W=r.contextType,z=Qr,typeof W=="object"&&W!==null&&(z=Vn(W)),S=r.getDerivedStateFromProps,(W=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==ve||ne!==z)&&Vp(n,m,o,z),ks=!1,ne=n.memoizedState,m.state=ne,ri(n,o,m,u),si();var le=n.memoizedState;b!==ve||ne!==le||ks||t!==null&&t.dependencies!==null&&xo(t.dependencies)?(typeof S=="function"&&(pd(n,r,S,o),le=n.memoizedState),(ue=ks||Hp(n,r,ue,o,ne,le,z)||t!==null&&t.dependencies!==null&&xo(t.dependencies))?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,le,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,le,z)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&ne===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&ne===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=le),m.props=o,m.state=le,m.context=z,o=ue):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&ne===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&ne===t.memoizedState||(n.flags|=1024),o=!1)}return m=o,qo(t,n),o=(n.flags&128)!==0,m||o?(m=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,t!==null&&o?(n.child=Sr(n,t.child,null,u),n.child=Sr(n,null,r,u)):Zn(t,n,r,u),n.memoizedState=m.state,t=n.child):t=hs(t,n,u),t}function rg(t,n,r,o){return pr(),n.flags|=256,Zn(t,n,r,o),n.child}var xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sd(t){return{baseLanes:t,cachePool:Qh()}}function Nd(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=Na),t}function lg(t,n,r){var o=n.pendingProps,u=!1,m=(n.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(gn.current&2)!==0),b&&(u=!0,n.flags&=-129),b=(n.flags&32)!==0,n.flags&=-33,t===null){if(Nt){if(u?Bs(n):qs(),(t=Vt)?(t=hy(t,Ra),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Ts!==null?{id:ts,overflow:ns}:null,retryLane:536870912,hydrationErrors:null},r=qh(t),r.return=n,n.child=r,Hn=n,Vt=null)):t=null,t===null)throw zs(n);return sf(t)?n.lanes=32:n.lanes=536870912,null}var S=o.children;return o=o.fallback,u?(qs(),u=n.mode,S=Io({mode:"hidden",children:S},u),o=hr(o,u,r,null),S.return=n,o.return=n,S.sibling=o,n.child=S,o=n.child,o.memoizedState=Sd(r),o.childLanes=Nd(t,b,r),n.memoizedState=xd,ui(null,o)):(Bs(n),wd(n,S))}var z=t.memoizedState;if(z!==null&&(S=z.dehydrated,S!==null)){if(m)n.flags&256?(Bs(n),n.flags&=-257,n=jd(t,n,r)):n.memoizedState!==null?(qs(),n.child=t.child,n.flags|=128,n=null):(qs(),S=o.fallback,u=n.mode,o=Io({mode:"visible",children:o.children},u),S=hr(S,u,r,null),S.flags|=2,o.return=n,S.return=n,o.sibling=S,n.child=o,Sr(n,t.child,null,r),o=n.child,o.memoizedState=Sd(r),o.childLanes=Nd(t,b,r),n.memoizedState=xd,n=ui(null,o));else if(Bs(n),sf(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var W=b.dgst;b=W,o=Error(l(419)),o.stack="",o.digest=b,Jl({value:o,source:null,stack:null}),n=jd(t,n,r)}else if(wn||Jr(t,n,r,!1),b=(r&t.childLanes)!==0,wn||b){if(b=$t,b!==null&&(o=Ke(b,r),o!==0&&o!==z.retryLane))throw z.retryLane=o,mr(t,o),ua(b,t,o),bd;af(S)||Yo(),n=jd(t,n,r)}else af(S)?(n.flags|=192,n.child=t.child,n=null):(t=z.treeContext,Vt=Da(S.nextSibling),Hn=n,Nt=!0,Ds=null,Ra=!1,t!==null&&Fh(n,t),n=wd(n,o.children),n.flags|=4096);return n}return u?(qs(),S=o.fallback,u=n.mode,z=t.child,W=z.sibling,o=os(z,{mode:"hidden",children:o.children}),o.subtreeFlags=z.subtreeFlags&65011712,W!==null?S=os(W,S):(S=hr(S,u,r,null),S.flags|=2),S.return=n,o.return=n,o.sibling=S,n.child=o,ui(null,o),o=n.child,S=t.child.memoizedState,S===null?S=Sd(r):(u=S.cachePool,u!==null?(z=Sn._currentValue,u=u.parent!==z?{parent:z,pool:z}:u):u=Qh(),S={baseLanes:S.baseLanes|r,cachePool:u}),o.memoizedState=S,o.childLanes=Nd(t,b,r),n.memoizedState=xd,ui(t.child,o)):(Bs(n),r=t.child,t=r.sibling,r=os(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,t!==null&&(b=n.deletions,b===null?(n.deletions=[t],n.flags|=16):b.push(t)),n.child=r,n.memoizedState=null,r)}function wd(t,n){return n=Io({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Io(t,n){return t=ba(22,t,null,n),t.lanes=0,t}function jd(t,n,r){return Sr(n,t.child,null,r),t=wd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function ig(t,n,r){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),qu(t.return,n,r)}function _d(t,n,r,o,u,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:u,treeForkCount:m}:(b.isBackwards=n,b.rendering=null,b.renderingStartTime=0,b.last=o,b.tail=r,b.tailMode=u,b.treeForkCount=m)}function og(t,n,r){var o=n.pendingProps,u=o.revealOrder,m=o.tail;o=o.children;var b=gn.current,S=(b&2)!==0;if(S?(b=b&1|2,n.flags|=128):b&=1,ie(gn,b),Zn(t,n,o,r),o=Nt?Xl:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ig(t,r,n);else if(t.tag===19)ig(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(u){case"forwards":for(r=n.child,u=null;r!==null;)t=r.alternate,t!==null&&Co(t)===null&&(u=r),r=r.sibling;r=u,r===null?(u=n.child,n.child=null):(u=r.sibling,r.sibling=null),_d(n,!1,u,r,m,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,u=n.child,n.child=null;u!==null;){if(t=u.alternate,t!==null&&Co(t)===null){n.child=u;break}t=u.sibling,u.sibling=r,r=u,u=t}_d(n,!0,r,null,m,o);break;case"together":_d(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function hs(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),Fs|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(Jr(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(l(153));if(n.child!==null){for(t=n.child,r=os(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=os(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Ed(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&xo(t)))}function MS(t,n,r){switch(n.tag){case 3:$e(n,n.stateNode.containerInfo),Ms(n,Sn,t.memoizedState.cache),pr();break;case 27:case 5:Ue(n);break;case 4:$e(n,n.stateNode.containerInfo);break;case 10:Ms(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Xu(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Bs(n),n.flags|=128,null):(r&n.child.childLanes)!==0?lg(t,n,r):(Bs(n),t=hs(t,n,r),t!==null?t.sibling:null);Bs(n);break;case 19:var u=(t.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(Jr(t,n,r,!1),o=(r&n.childLanes)!==0),u){if(o)return og(t,n,r);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),ie(gn,gn.current),o)break;return null;case 22:return n.lanes=0,eg(t,n,r,n.pendingProps);case 24:Ms(n,Sn,t.memoizedState.cache)}return hs(t,n,r)}function cg(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)wn=!0;else{if(!Ed(t,r)&&(n.flags&128)===0)return wn=!1,MS(t,n,r);wn=(t.flags&131072)!==0}else wn=!1,Nt&&(n.flags&1048576)!==0&&$h(n,Xl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(t=vr(n.elementType),n.type=t,typeof t=="function")Tu(t)?(o=wr(t,o),n.tag=1,n=sg(null,n,t,o,r)):(n.tag=0,n=vd(null,n,t,o,r));else{if(t!=null){var u=t.$$typeof;if(u===D){n.tag=11,n=Xp(null,n,t,o,r);break e}else if(u===U){n.tag=14,n=Jp(null,n,t,o,r);break e}}throw n=De(t)||t,Error(l(306,n,""))}}return n;case 0:return vd(t,n,n.type,n.pendingProps,r);case 1:return o=n.type,u=wr(o,n.pendingProps),sg(t,n,o,u,r);case 3:e:{if($e(n,n.stateNode.containerInfo),t===null)throw Error(l(387));o=n.pendingProps;var m=n.memoizedState;u=m.element,Gu(t,n),ri(n,o,null,r);var b=n.memoizedState;if(o=b.cache,Ms(n,Sn,o),o!==m.cache&&Iu(n,[Sn],r,!0),si(),o=b.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:b.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=rg(t,n,o,r);break e}else if(o!==u){u=Aa(Error(l(424)),n),Jl(u),n=rg(t,n,o,r);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Vt=Da(t.firstChild),Hn=n,Nt=!0,Ds=null,Ra=!0,r=ep(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(pr(),o===u){n=hs(t,n,r);break e}Zn(t,n,o,r)}n=n.child}return n;case 26:return qo(t,n),t===null?(r=xy(n.type,null,n.pendingProps,null))?n.memoizedState=r:Nt||(r=n.type,t=n.pendingProps,o=nc(ge.current).createElement(r),o[at]=n,o[yt]=t,Gn(o,r,t),Tt(o),n.stateNode=o):n.memoizedState=xy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Ue(n),t===null&&Nt&&(o=n.stateNode=yy(n.type,n.pendingProps,ge.current),Hn=n,Ra=!0,u=Vt,Ps(n.type)?(rf=u,Vt=Da(o.firstChild)):Vt=u),Zn(t,n,n.pendingProps.children,r),qo(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Nt&&((u=o=Vt)&&(o=uN(o,n.type,n.pendingProps,Ra),o!==null?(n.stateNode=o,Hn=n,Vt=Da(o.firstChild),Ra=!1,u=!0):u=!1),u||zs(n)),Ue(n),u=n.type,m=n.pendingProps,b=t!==null?t.memoizedProps:null,o=m.children,ef(u,m)?o=null:b!==null&&ef(u,b)&&(n.flags|=32),n.memoizedState!==null&&(u=Wu(t,n,_S,null,null,r),_i._currentValue=u),qo(t,n),Zn(t,n,o,r),n.child;case 6:return t===null&&Nt&&((t=r=Vt)&&(r=dN(r,n.pendingProps,Ra),r!==null?(n.stateNode=r,Hn=n,Vt=null,t=!0):t=!1),t||zs(n)),null;case 13:return lg(t,n,r);case 4:return $e(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=Sr(n,null,o,r):Zn(t,n,o,r),n.child;case 11:return Xp(t,n,n.type,n.pendingProps,r);case 7:return Zn(t,n,n.pendingProps,r),n.child;case 8:return Zn(t,n,n.pendingProps.children,r),n.child;case 12:return Zn(t,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,Ms(n,n.type,o.value),Zn(t,n,o.children,r),n.child;case 9:return u=n.type._context,o=n.pendingProps.children,yr(n),u=Vn(u),o=o(u),n.flags|=1,Zn(t,n,o,r),n.child;case 14:return Jp(t,n,n.type,n.pendingProps,r);case 15:return Wp(t,n,n.type,n.pendingProps,r);case 19:return og(t,n,r);case 31:return zS(t,n,r);case 22:return eg(t,n,r,n.pendingProps);case 24:return yr(n),o=Vn(Sn),t===null?(u=Hu(),u===null&&(u=$t,m=$u(),u.pooledCache=m,m.refCount++,m!==null&&(u.pooledCacheLanes|=r),u=m),n.memoizedState={parent:o,cache:u},Zu(n),Ms(n,Sn,u)):((t.lanes&r)!==0&&(Gu(t,n),ri(n,null,null,r),si()),u=t.memoizedState,m=n.memoizedState,u.parent!==o?(u={parent:o,cache:o},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),Ms(n,Sn,o)):(o=m.cache,Ms(n,Sn,o),o!==u.cache&&Iu(n,[Sn],r,!0))),Zn(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(l(156,n.tag))}function ps(t){t.flags|=4}function Ad(t,n,r,o,u){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(u&335544128)===u)if(t.stateNode.complete)t.flags|=8192;else if(Ug())t.flags|=8192;else throw xr=jo,Vu}else t.flags&=-16777217}function ug(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!_y(n))if(Ug())t.flags|=8192;else throw xr=jo,Vu}function $o(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Y():536870912,t.lanes|=n,ul|=n)}function di(t,n){if(!Nt)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Zt(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(n)for(var u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=o,t.childLanes=r,n}function kS(t,n,r){var o=n.pendingProps;switch(ku(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(n),null;case 1:return Zt(n),null;case 3:return r=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),ds(Sn),de(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xr(n)?ps(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Lu())),Zt(n),null;case 26:var u=n.type,m=n.memoizedState;return t===null?(ps(n),m!==null?(Zt(n),ug(n,m)):(Zt(n),Ad(n,u,null,o,r))):m?m!==t.memoizedState?(ps(n),Zt(n),ug(n,m)):(Zt(n),n.flags&=-16777217):(t=t.memoizedProps,t!==o&&ps(n),Zt(n),Ad(n,u,t,o,r)),null;case 27:if(Ie(n),r=ge.current,u=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&ps(n);else{if(!o){if(n.stateNode===null)throw Error(l(166));return Zt(n),null}t=k.current,Xr(n)?Hh(n):(t=yy(u,o,r),n.stateNode=t,ps(n))}return Zt(n),null;case 5:if(Ie(n),u=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&ps(n);else{if(!o){if(n.stateNode===null)throw Error(l(166));return Zt(n),null}if(m=k.current,Xr(n))Hh(n);else{var b=nc(ge.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?b.createElement("select",{is:o.is}):b.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?b.createElement(u,{is:o.is}):b.createElement(u)}}m[at]=n,m[yt]=o;e:for(b=n.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===n)break e;for(;b.sibling===null;){if(b.return===null||b.return===n)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}n.stateNode=m;e:switch(Gn(m,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&ps(n)}}return Zt(n),Ad(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,r),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&ps(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(l(166));if(t=ge.current,Xr(n)){if(t=n.stateNode,r=n.memoizedProps,o=null,u=Hn,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}t[at]=n,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||ly(t.nodeValue,r)),t||zs(n,!0)}else t=nc(t).createTextNode(o),t[at]=n,n.stateNode=t}return Zt(n),null;case 31:if(r=n.memoizedState,t===null||t.memoizedState!==null){if(o=Xr(n),r!==null){if(t===null){if(!o)throw Error(l(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(557));t[at]=n}else pr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Zt(n),t=!1}else r=Lu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return n.flags&256?(xa(n),n):(xa(n),null);if((n.flags&128)!==0)throw Error(l(558))}return Zt(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(u=Xr(n),o!==null&&o.dehydrated!==null){if(t===null){if(!u)throw Error(l(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(l(317));u[at]=n}else pr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Zt(n),u=!1}else u=Lu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(xa(n),n):(xa(n),null)}return xa(n),(n.flags&128)!==0?(n.lanes=r,n):(r=o!==null,t=t!==null&&t.memoizedState!==null,r&&(o=n.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==u&&(o.flags|=2048)),r!==t&&r&&(n.child.flags|=8192),$o(n,n.updateQueue),Zt(n),null);case 4:return de(),t===null&&Yd(n.stateNode.containerInfo),Zt(n),null;case 10:return ds(n.type),Zt(n),null;case 19:if(P(gn),o=n.memoizedState,o===null)return Zt(n),null;if(u=(n.flags&128)!==0,m=o.rendering,m===null)if(u)di(o,!1);else{if(cn!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(m=Co(t),m!==null){for(n.flags|=128,di(o,!1),t=m.updateQueue,n.updateQueue=t,$o(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)Bh(r,t),r=r.sibling;return ie(gn,gn.current&1|2),Nt&&cs(n,o.treeForkCount),n.child}t=t.sibling}o.tail!==null&&G()>Go&&(n.flags|=128,u=!0,di(o,!1),n.lanes=4194304)}else{if(!u)if(t=Co(m),t!==null){if(n.flags|=128,u=!0,t=t.updateQueue,n.updateQueue=t,$o(n,t),di(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!Nt)return Zt(n),null}else 2*G()-o.renderingStartTime>Go&&r!==536870912&&(n.flags|=128,u=!0,di(o,!1),n.lanes=4194304);o.isBackwards?(m.sibling=n.child,n.child=m):(t=o.last,t!==null?t.sibling=m:n.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=G(),t.sibling=null,r=gn.current,ie(gn,u?r&1|2:r&1),Nt&&cs(n,o.treeForkCount),t):(Zt(n),null);case 22:case 23:return xa(n),Ku(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(Zt(n),n.subtreeFlags&6&&(n.flags|=8192)):Zt(n),r=n.updateQueue,r!==null&&$o(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),t!==null&&P(br),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),ds(Sn),Zt(n),null;case 25:return null;case 30:return null}throw Error(l(156,n.tag))}function US(t,n){switch(ku(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return ds(Sn),de(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Ie(n),null;case 31:if(n.memoizedState!==null){if(xa(n),n.alternate===null)throw Error(l(340));pr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(xa(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(l(340));pr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return P(gn),null;case 4:return de(),null;case 10:return ds(n.type),null;case 22:case 23:return xa(n),Ku(),t!==null&&P(br),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return ds(Sn),null;case 25:return null;default:return null}}function dg(t,n){switch(ku(n),n.tag){case 3:ds(Sn),de();break;case 26:case 27:case 5:Ie(n);break;case 4:de();break;case 31:n.memoizedState!==null&&xa(n);break;case 13:xa(n);break;case 19:P(gn);break;case 10:ds(n.type);break;case 22:case 23:xa(n),Ku(),t!==null&&P(br);break;case 24:ds(Sn)}}function fi(t,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var u=o.next;r=u;do{if((r.tag&t)===t){o=void 0;var m=r.create,b=r.inst;o=m(),b.destroy=o}r=r.next}while(r!==u)}}catch(S){zt(n,n.return,S)}}function Is(t,n,r){try{var o=n.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&t)===t){var b=o.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,u=n;var z=r,W=S;try{W()}catch(ue){zt(u,z,ue)}}}o=o.next}while(o!==m)}}catch(ue){zt(n,n.return,ue)}}function fg(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{np(n,r)}catch(o){zt(t,t.return,o)}}}function mg(t,n,r){r.props=wr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){zt(t,n,o)}}function mi(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(u){zt(t,n,u)}}function as(t,n){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(u){zt(t,n,u)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(u){zt(t,n,u)}else r.current=null}function hg(t){var n=t.type,r=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(u){zt(t,t.return,u)}}function Cd(t,n,r){try{var o=t.stateNode;sN(o,t.type,r,n),o[yt]=n}catch(u){zt(t,t.return,u)}}function pg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ps(t.type)||t.tag===4}function Od(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ps(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rd(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Ha));else if(o!==4&&(o===27&&Ps(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(Rd(t,n,r),t=t.sibling;t!==null;)Rd(t,n,r),t=t.sibling}function Fo(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(o!==4&&(o===27&&Ps(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Fo(t,n,r),t=t.sibling;t!==null;)Fo(t,n,r),t=t.sibling}function gg(t){var n=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);Gn(n,o,r),n[at]=t,n[yt]=r}catch(m){zt(t,t.return,m)}}var gs=!1,jn=!1,Td=!1,yg=typeof WeakSet=="function"?WeakSet:Set,Ln=null;function LS(t,n){if(t=t.containerInfo,Jd=cc,t=Oh(t),ju(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var u=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var b=0,S=-1,z=-1,W=0,ue=0,ve=t,ne=null;t:for(;;){for(var le;ve!==r||u!==0&&ve.nodeType!==3||(S=b+u),ve!==m||o!==0&&ve.nodeType!==3||(z=b+o),ve.nodeType===3&&(b+=ve.nodeValue.length),(le=ve.firstChild)!==null;)ne=ve,ve=le;for(;;){if(ve===t)break t;if(ne===r&&++W===u&&(S=b),ne===m&&++ue===o&&(z=b),(le=ve.nextSibling)!==null)break;ve=ne,ne=ve.parentNode}ve=le}r=S===-1||z===-1?null:{start:S,end:z}}else r=null}r=r||{start:0,end:0}}else r=null;for(Wd={focusedElem:t,selectionRange:r},cc=!1,Ln=n;Ln!==null;)if(n=Ln,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Ln=t;else for(;Ln!==null;){switch(n=Ln,m=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)u=t[r],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,r=n,u=m.memoizedProps,m=m.memoizedState,o=r.stateNode;try{var Ge=wr(r.type,u);t=o.getSnapshotBeforeUpdate(Ge,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(tt){zt(r,r.return,tt)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)nf(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":nf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(l(163))}if(t=n.sibling,t!==null){t.return=n.return,Ln=t;break}Ln=n.return}}function bg(t,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:bs(t,r),o&4&&fi(5,r);break;case 1:if(bs(t,r),o&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(b){zt(r,r.return,b)}else{var u=wr(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(u,n,t.__reactInternalSnapshotBeforeUpdate)}catch(b){zt(r,r.return,b)}}o&64&&fg(r),o&512&&mi(r,r.return);break;case 3:if(bs(t,r),o&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{np(t,n)}catch(b){zt(r,r.return,b)}}break;case 27:n===null&&o&4&&gg(r);case 26:case 5:bs(t,r),n===null&&o&4&&hg(r),o&512&&mi(r,r.return);break;case 12:bs(t,r);break;case 31:bs(t,r),o&4&&Sg(t,r);break;case 13:bs(t,r),o&4&&Ng(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=GS.bind(null,r),fN(t,r))));break;case 22:if(o=r.memoizedState!==null||gs,!o){n=n!==null&&n.memoizedState!==null||jn,u=gs;var m=jn;gs=o,(jn=n)&&!m?vs(t,r,(r.subtreeFlags&8772)!==0):bs(t,r),gs=u,jn=m}break;case 30:break;default:bs(t,r)}}function vg(t){var n=t.alternate;n!==null&&(t.alternate=null,vg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Fn(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Yt=null,la=!1;function ys(t,n,r){for(r=r.child;r!==null;)xg(t,n,r),r=r.sibling}function xg(t,n,r){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(Ne,r)}catch{}switch(r.tag){case 26:jn||as(r,n),ys(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:jn||as(r,n);var o=Yt,u=la;Ps(r.type)&&(Yt=r.stateNode,la=!1),ys(t,n,r),Ni(r.stateNode),Yt=o,la=u;break;case 5:jn||as(r,n);case 6:if(o=Yt,u=la,Yt=null,ys(t,n,r),Yt=o,la=u,Yt!==null)if(la)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(r.stateNode)}catch(m){zt(r,n,m)}else try{Yt.removeChild(r.stateNode)}catch(m){zt(r,n,m)}break;case 18:Yt!==null&&(la?(t=Yt,fy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),bl(t)):fy(Yt,r.stateNode));break;case 4:o=Yt,u=la,Yt=r.stateNode.containerInfo,la=!0,ys(t,n,r),Yt=o,la=u;break;case 0:case 11:case 14:case 15:Is(2,r,n),jn||Is(4,r,n),ys(t,n,r);break;case 1:jn||(as(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&mg(r,n,o)),ys(t,n,r);break;case 21:ys(t,n,r);break;case 22:jn=(o=jn)||r.memoizedState!==null,ys(t,n,r),jn=o;break;default:ys(t,n,r)}}function Sg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{bl(t)}catch(r){zt(n,n.return,r)}}}function Ng(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{bl(t)}catch(r){zt(n,n.return,r)}}function BS(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new yg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new yg),n;default:throw Error(l(435,t.tag))}}function Ho(t,n){var r=BS(t);n.forEach(function(o){if(!r.has(o)){r.add(o);var u=PS.bind(null,t,o);o.then(u,u)}})}function ia(t,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var u=r[o],m=t,b=n,S=b;e:for(;S!==null;){switch(S.tag){case 27:if(Ps(S.type)){Yt=S.stateNode,la=!1;break e}break;case 5:Yt=S.stateNode,la=!1;break e;case 3:case 4:Yt=S.stateNode.containerInfo,la=!0;break e}S=S.return}if(Yt===null)throw Error(l(160));xg(m,b,u),Yt=null,la=!1,m=u.alternate,m!==null&&(m.return=null),u.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)wg(n,t),n=n.sibling}var Ga=null;function wg(t,n){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ia(n,t),oa(t),o&4&&(Is(3,t,t.return),fi(3,t),Is(5,t,t.return));break;case 1:ia(n,t),oa(t),o&512&&(jn||r===null||as(r,r.return)),o&64&&gs&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var u=Ga;if(ia(n,t),oa(t),o&512&&(jn||r===null||as(r,r.return)),o&4){var m=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){e:{o=t.type,r=t.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":m=u.getElementsByTagName("title")[0],(!m||m[Ft]||m[at]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=u.createElement(o),u.head.insertBefore(m,u.querySelector("head > title"))),Gn(m,o,r),m[at]=t,Tt(m),o=m;break e;case"link":var b=wy("link","href",u).get(o+(r.href||""));if(b){for(var S=0;S<b.length;S++)if(m=b[S],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(S,1);break t}}m=u.createElement(o),Gn(m,o,r),u.head.appendChild(m);break;case"meta":if(b=wy("meta","content",u).get(o+(r.content||""))){for(S=0;S<b.length;S++)if(m=b[S],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(S,1);break t}}m=u.createElement(o),Gn(m,o,r),u.head.appendChild(m);break;default:throw Error(l(468,o))}m[at]=t,Tt(m),o=m}t.stateNode=o}else jy(u,t.type,t.stateNode);else t.stateNode=Ny(u,o,t.memoizedProps);else m!==o?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,o===null?jy(u,t.type,t.stateNode):Ny(u,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Cd(t,t.memoizedProps,r.memoizedProps)}break;case 27:ia(n,t),oa(t),o&512&&(jn||r===null||as(r,r.return)),r!==null&&o&4&&Cd(t,t.memoizedProps,r.memoizedProps);break;case 5:if(ia(n,t),oa(t),o&512&&(jn||r===null||as(r,r.return)),t.flags&32){u=t.stateNode;try{As(u,"")}catch(Ge){zt(t,t.return,Ge)}}o&4&&t.stateNode!=null&&(u=t.memoizedProps,Cd(t,u,r!==null?r.memoizedProps:u)),o&1024&&(Td=!0);break;case 6:if(ia(n,t),oa(t),o&4){if(t.stateNode===null)throw Error(l(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(Ge){zt(t,t.return,Ge)}}break;case 3:if(rc=null,u=Ga,Ga=ac(n.containerInfo),ia(n,t),Ga=u,oa(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{bl(n.containerInfo)}catch(Ge){zt(t,t.return,Ge)}Td&&(Td=!1,jg(t));break;case 4:o=Ga,Ga=ac(t.stateNode.containerInfo),ia(n,t),oa(t),Ga=o;break;case 12:ia(n,t),oa(t);break;case 31:ia(n,t),oa(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ho(t,o)));break;case 13:ia(n,t),oa(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Zo=G()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ho(t,o)));break;case 22:u=t.memoizedState!==null;var z=r!==null&&r.memoizedState!==null,W=gs,ue=jn;if(gs=W||u,jn=ue||z,ia(n,t),jn=ue,gs=W,oa(t),o&8192)e:for(n=t.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(r===null||z||gs||jn||jr(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){z=r=n;try{if(m=z.stateNode,u)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=z.stateNode;var ve=z.memoizedProps.style,ne=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;S.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Ge){zt(z,z.return,Ge)}}}else if(n.tag===6){if(r===null){z=n;try{z.stateNode.nodeValue=u?"":z.memoizedProps}catch(Ge){zt(z,z.return,Ge)}}}else if(n.tag===18){if(r===null){z=n;try{var le=z.stateNode;u?my(le,!0):my(z.stateNode,!1)}catch(Ge){zt(z,z.return,Ge)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,Ho(t,r))));break;case 19:ia(n,t),oa(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ho(t,o)));break;case 30:break;case 21:break;default:ia(n,t),oa(t)}}function oa(t){var n=t.flags;if(n&2){try{for(var r,o=t.return;o!==null;){if(pg(o)){r=o;break}o=o.return}if(r==null)throw Error(l(160));switch(r.tag){case 27:var u=r.stateNode,m=Od(t);Fo(t,m,u);break;case 5:var b=r.stateNode;r.flags&32&&(As(b,""),r.flags&=-33);var S=Od(t);Fo(t,S,b);break;case 3:case 4:var z=r.stateNode.containerInfo,W=Od(t);Rd(t,W,z);break;default:throw Error(l(161))}}catch(ue){zt(t,t.return,ue)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function jg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;jg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function bs(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)bg(t,n.alternate,n),n=n.sibling}function jr(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Is(4,n,n.return),jr(n);break;case 1:as(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&mg(n,n.return,r),jr(n);break;case 27:Ni(n.stateNode);case 26:case 5:as(n,n.return),jr(n);break;case 22:n.memoizedState===null&&jr(n);break;case 30:jr(n);break;default:jr(n)}t=t.sibling}}function vs(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,u=t,m=n,b=m.flags;switch(m.tag){case 0:case 11:case 15:vs(u,m,r),fi(4,m);break;case 1:if(vs(u,m,r),o=m,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(W){zt(o,o.return,W)}if(o=m,u=o.updateQueue,u!==null){var S=o.stateNode;try{var z=u.shared.hiddenCallbacks;if(z!==null)for(u.shared.hiddenCallbacks=null,u=0;u<z.length;u++)tp(z[u],S)}catch(W){zt(o,o.return,W)}}r&&b&64&&fg(m),mi(m,m.return);break;case 27:gg(m);case 26:case 5:vs(u,m,r),r&&o===null&&b&4&&hg(m),mi(m,m.return);break;case 12:vs(u,m,r);break;case 31:vs(u,m,r),r&&b&4&&Sg(u,m);break;case 13:vs(u,m,r),r&&b&4&&Ng(u,m);break;case 22:m.memoizedState===null&&vs(u,m,r),mi(m,m.return);break;case 30:break;default:vs(u,m,r)}n=n.sibling}}function Dd(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Wl(r))}function zd(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Wl(t))}function Pa(t,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)_g(t,n,r,o),n=n.sibling}function _g(t,n,r,o){var u=n.flags;switch(n.tag){case 0:case 11:case 15:Pa(t,n,r,o),u&2048&&fi(9,n);break;case 1:Pa(t,n,r,o);break;case 3:Pa(t,n,r,o),u&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Wl(t)));break;case 12:if(u&2048){Pa(t,n,r,o),t=n.stateNode;try{var m=n.memoizedProps,b=m.id,S=m.onPostCommit;typeof S=="function"&&S(b,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(z){zt(n,n.return,z)}}else Pa(t,n,r,o);break;case 31:Pa(t,n,r,o);break;case 13:Pa(t,n,r,o);break;case 23:break;case 22:m=n.stateNode,b=n.alternate,n.memoizedState!==null?m._visibility&2?Pa(t,n,r,o):hi(t,n):m._visibility&2?Pa(t,n,r,o):(m._visibility|=2,il(t,n,r,o,(n.subtreeFlags&10256)!==0||!1)),u&2048&&Dd(b,n);break;case 24:Pa(t,n,r,o),u&2048&&zd(n.alternate,n);break;default:Pa(t,n,r,o)}}function il(t,n,r,o,u){for(u=u&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=t,b=n,S=r,z=o,W=b.flags;switch(b.tag){case 0:case 11:case 15:il(m,b,S,z,u),fi(8,b);break;case 23:break;case 22:var ue=b.stateNode;b.memoizedState!==null?ue._visibility&2?il(m,b,S,z,u):hi(m,b):(ue._visibility|=2,il(m,b,S,z,u)),u&&W&2048&&Dd(b.alternate,b);break;case 24:il(m,b,S,z,u),u&&W&2048&&zd(b.alternate,b);break;default:il(m,b,S,z,u)}n=n.sibling}}function hi(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,o=n,u=o.flags;switch(o.tag){case 22:hi(r,o),u&2048&&Dd(o.alternate,o);break;case 24:hi(r,o),u&2048&&zd(o.alternate,o);break;default:hi(r,o)}n=n.sibling}}var pi=8192;function ol(t,n,r){if(t.subtreeFlags&pi)for(t=t.child;t!==null;)Eg(t,n,r),t=t.sibling}function Eg(t,n,r){switch(t.tag){case 26:ol(t,n,r),t.flags&pi&&t.memoizedState!==null&&jN(r,Ga,t.memoizedState,t.memoizedProps);break;case 5:ol(t,n,r);break;case 3:case 4:var o=Ga;Ga=ac(t.stateNode.containerInfo),ol(t,n,r),Ga=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=pi,pi=16777216,ol(t,n,r),pi=o):ol(t,n,r));break;default:ol(t,n,r)}}function Ag(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function gi(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];Ln=o,Og(o,t)}Ag(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Cg(t),t=t.sibling}function Cg(t){switch(t.tag){case 0:case 11:case 15:gi(t),t.flags&2048&&Is(9,t,t.return);break;case 3:gi(t);break;case 12:gi(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Vo(t)):gi(t);break;default:gi(t)}}function Vo(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];Ln=o,Og(o,t)}Ag(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Is(8,n,n.return),Vo(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,Vo(n));break;default:Vo(n)}t=t.sibling}}function Og(t,n){for(;Ln!==null;){var r=Ln;switch(r.tag){case 0:case 11:case 15:Is(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Wl(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,Ln=o;else e:for(r=t;Ln!==null;){o=Ln;var u=o.sibling,m=o.return;if(vg(o),o===r){Ln=null;break e}if(u!==null){u.return=m,Ln=u;break e}Ln=m}}}var qS={getCacheForType:function(t){var n=Vn(Sn),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r},cacheSignal:function(){return Vn(Sn).controller.signal}},IS=typeof WeakMap=="function"?WeakMap:Map,Ot=0,$t=null,bt=null,xt=0,Dt=0,Sa=null,$s=!1,cl=!1,Md=!1,xs=0,cn=0,Fs=0,_r=0,kd=0,Na=0,ul=0,yi=null,ca=null,Ud=!1,Zo=0,Rg=0,Go=1/0,Po=null,Hs=null,Rn=0,Vs=null,dl=null,Ss=0,Ld=0,Bd=null,Tg=null,bi=0,qd=null;function wa(){return(Ot&2)!==0&&xt!==0?xt&-xt:M.T!==null?Zd():Rt()}function Dg(){if(Na===0)if((xt&536870912)===0||Nt){var t=lt;lt<<=1,(lt&3932160)===0&&(lt=262144),Na=t}else Na=536870912;return t=va.current,t!==null&&(t.flags|=32),Na}function ua(t,n,r){(t===$t&&(Dt===2||Dt===9)||t.cancelPendingCommit!==null)&&(fl(t,0),Zs(t,xt,Na,!1)),Ae(t,r),((Ot&2)===0||t!==$t)&&(t===$t&&((Ot&2)===0&&(_r|=r),cn===4&&Zs(t,xt,Na,!1)),ss(t))}function zg(t,n,r){if((Ot&6)!==0)throw Error(l(327));var o=!r&&(n&127)===0&&(n&t.expiredLanes)===0||In(t,n),u=o?HS(t,n):$d(t,n,!0),m=o;do{if(u===0){cl&&!o&&Zs(t,n,0,!1);break}else{if(r=t.current.alternate,m&&!$S(r)){u=$d(t,n,!1),m=!1;continue}if(u===2){if(m=n,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){n=b;e:{var S=t;u=yi;var z=S.current.memoizedState.isDehydrated;if(z&&(fl(S,b).flags|=256),b=$d(S,b,!1),b!==2){if(Md&&!z){S.errorRecoveryDisabledLanes|=m,_r|=m,u=4;break e}m=ca,ca=u,m!==null&&(ca===null?ca=m:ca.push.apply(ca,m))}u=b}if(m=!1,u!==2)continue}}if(u===1){fl(t,0),Zs(t,n,0,!0);break}e:{switch(o=t,m=u,m){case 0:case 1:throw Error(l(345));case 4:if((n&4194048)!==n)break;case 6:Zs(o,n,Na,!$s);break e;case 2:ca=null;break;case 3:case 5:break;default:throw Error(l(329))}if((n&62914560)===n&&(u=Zo+300-G(),10<u)){if(Zs(o,n,Na,!$s),Jn(o,0,!0)!==0)break e;Ss=n,o.timeoutHandle=uy(Mg.bind(null,o,r,ca,Po,Ud,n,Na,_r,ul,$s,m,"Throttled",-0,0),u);break e}Mg(o,r,ca,Po,Ud,n,Na,_r,ul,$s,m,null,-0,0)}}break}while(!0);ss(t)}function Mg(t,n,r,o,u,m,b,S,z,W,ue,ve,ne,le){if(t.timeoutHandle=-1,ve=n.subtreeFlags,ve&8192||(ve&16785408)===16785408){ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ha},Eg(n,m,ve);var Ge=(m&62914560)===m?Zo-G():(m&4194048)===m?Rg-G():0;if(Ge=_N(ve,Ge),Ge!==null){Ss=m,t.cancelPendingCommit=Ge(Fg.bind(null,t,n,m,r,o,u,b,S,z,ue,ve,null,ne,le)),Zs(t,m,b,!W);return}}Fg(t,n,m,r,o,u,b,S,z)}function $S(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var u=r[o],m=u.getSnapshot;u=u.value;try{if(!ya(m(),u))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Zs(t,n,r,o){n&=~kd,n&=~_r,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var u=n;0<u;){var m=31-jt(u),b=1<<m;o[m]=-1,u&=~b}r!==0&&st(t,r,n)}function Qo(){return(Ot&6)===0?(vi(0),!1):!0}function Id(){if(bt!==null){if(Dt===0)var t=bt.return;else t=bt,us=gr=null,nd(t),nl=null,ti=0,t=bt;for(;t!==null;)dg(t.alternate,t),t=t.return;bt=null}}function fl(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,iN(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Ss=0,Id(),$t=t,bt=r=os(t.current,null),xt=n,Dt=0,Sa=null,$s=!1,cl=In(t,n),Md=!1,ul=Na=kd=_r=Fs=cn=0,ca=yi=null,Ud=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var u=31-jt(o),m=1<<u;n|=t[u],o&=~m}return xs=n,po(),r}function kg(t,n){ct=null,M.H=ci,n===tl||n===wo?(n=Xh(),Dt=3):n===Vu?(n=Xh(),Dt=4):Dt=n===bd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Sa=n,bt===null&&(cn=1,Lo(t,Aa(n,t.current)))}function Ug(){var t=va.current;return t===null?!0:(xt&4194048)===xt?Ta===null:(xt&62914560)===xt||(xt&536870912)!==0?t===Ta:!1}function Lg(){var t=M.H;return M.H=ci,t===null?ci:t}function Bg(){var t=M.A;return M.A=qS,t}function Yo(){cn=4,$s||(xt&4194048)!==xt&&va.current!==null||(cl=!0),(Fs&134217727)===0&&(_r&134217727)===0||$t===null||Zs($t,xt,Na,!1)}function $d(t,n,r){var o=Ot;Ot|=2;var u=Lg(),m=Bg();($t!==t||xt!==n)&&(Po=null,fl(t,n)),n=!1;var b=cn;e:do try{if(Dt!==0&&bt!==null){var S=bt,z=Sa;switch(Dt){case 8:Id(),b=6;break e;case 3:case 2:case 9:case 6:va.current===null&&(n=!0);var W=Dt;if(Dt=0,Sa=null,ml(t,S,z,W),r&&cl){b=0;break e}break;default:W=Dt,Dt=0,Sa=null,ml(t,S,z,W)}}FS(),b=cn;break}catch(ue){kg(t,ue)}while(!0);return n&&t.shellSuspendCounter++,us=gr=null,Ot=o,M.H=u,M.A=m,bt===null&&($t=null,xt=0,po()),b}function FS(){for(;bt!==null;)qg(bt)}function HS(t,n){var r=Ot;Ot|=2;var o=Lg(),u=Bg();$t!==t||xt!==n?(Po=null,Go=G()+500,fl(t,n)):cl=In(t,n);e:do try{if(Dt!==0&&bt!==null){n=bt;var m=Sa;t:switch(Dt){case 1:Dt=0,Sa=null,ml(t,n,m,1);break;case 2:case 9:if(Yh(m)){Dt=0,Sa=null,Ig(n);break}n=function(){Dt!==2&&Dt!==9||$t!==t||(Dt=7),ss(t)},m.then(n,n);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:Yh(m)?(Dt=0,Sa=null,Ig(n)):(Dt=0,Sa=null,ml(t,n,m,7));break;case 5:var b=null;switch(bt.tag){case 26:b=bt.memoizedState;case 5:case 27:var S=bt;if(b?_y(b):S.stateNode.complete){Dt=0,Sa=null;var z=S.sibling;if(z!==null)bt=z;else{var W=S.return;W!==null?(bt=W,Ko(W)):bt=null}break t}}Dt=0,Sa=null,ml(t,n,m,5);break;case 6:Dt=0,Sa=null,ml(t,n,m,6);break;case 8:Id(),cn=6;break e;default:throw Error(l(462))}}VS();break}catch(ue){kg(t,ue)}while(!0);return us=gr=null,M.H=o,M.A=u,Ot=r,bt!==null?0:($t=null,xt=0,po(),cn)}function VS(){for(;bt!==null&&!O();)qg(bt)}function qg(t){var n=cg(t.alternate,t,xs);t.memoizedProps=t.pendingProps,n===null?Ko(t):bt=n}function Ig(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=ag(r,n,n.pendingProps,n.type,void 0,xt);break;case 11:n=ag(r,n,n.pendingProps,n.type.render,n.ref,xt);break;case 5:nd(n);default:dg(r,n),n=bt=Bh(n,xs),n=cg(r,n,xs)}t.memoizedProps=t.pendingProps,n===null?Ko(t):bt=n}function ml(t,n,r,o){us=gr=null,nd(n),nl=null,ti=0;var u=n.return;try{if(DS(t,u,n,r,xt)){cn=1,Lo(t,Aa(r,t.current)),bt=null;return}}catch(m){if(u!==null)throw bt=u,m;cn=1,Lo(t,Aa(r,t.current)),bt=null;return}n.flags&32768?(Nt||o===1?t=!0:cl||(xt&536870912)!==0?t=!1:($s=t=!0,(o===2||o===9||o===3||o===6)&&(o=va.current,o!==null&&o.tag===13&&(o.flags|=16384))),$g(n,t)):Ko(n)}function Ko(t){var n=t;do{if((n.flags&32768)!==0){$g(n,$s);return}t=n.return;var r=kS(n.alternate,n,xs);if(r!==null){bt=r;return}if(n=n.sibling,n!==null){bt=n;return}bt=n=t}while(n!==null);cn===0&&(cn=5)}function $g(t,n){do{var r=US(t.alternate,t);if(r!==null){r.flags&=32767,bt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){bt=t;return}bt=t=r}while(t!==null);cn=6,bt=null}function Fg(t,n,r,o,u,m,b,S,z){t.cancelPendingCommit=null;do Xo();while(Rn!==0);if((Ot&6)!==0)throw Error(l(327));if(n!==null){if(n===t.current)throw Error(l(177));if(m=n.lanes|n.childLanes,m|=Ou,Ze(t,r,m,b,S,z),t===$t&&(bt=$t=null,xt=0),dl=n,Vs=t,Ss=r,Ld=m,Bd=u,Tg=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,QS(ae,function(){return Pg(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=M.T,M.T=null,u=I.p,I.p=2,b=Ot,Ot|=4;try{LS(t,n,r)}finally{Ot=b,I.p=u,M.T=o}}Rn=1,Hg(),Vg(),Zg()}}function Hg(){if(Rn===1){Rn=0;var t=Vs,n=dl,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=M.T,M.T=null;var o=I.p;I.p=2;var u=Ot;Ot|=4;try{wg(n,t);var m=Wd,b=Oh(t.containerInfo),S=m.focusedElem,z=m.selectionRange;if(b!==S&&S&&S.ownerDocument&&Ch(S.ownerDocument.documentElement,S)){if(z!==null&&ju(S)){var W=z.start,ue=z.end;if(ue===void 0&&(ue=W),"selectionStart"in S)S.selectionStart=W,S.selectionEnd=Math.min(ue,S.value.length);else{var ve=S.ownerDocument||document,ne=ve&&ve.defaultView||window;if(ne.getSelection){var le=ne.getSelection(),Ge=S.textContent.length,tt=Math.min(z.start,Ge),Bt=z.end===void 0?tt:Math.min(z.end,Ge);!le.extend&&tt>Bt&&(b=Bt,Bt=tt,tt=b);var F=Ah(S,tt),L=Ah(S,Bt);if(F&&L&&(le.rangeCount!==1||le.anchorNode!==F.node||le.anchorOffset!==F.offset||le.focusNode!==L.node||le.focusOffset!==L.offset)){var J=ve.createRange();J.setStart(F.node,F.offset),le.removeAllRanges(),tt>Bt?(le.addRange(J),le.extend(L.node,L.offset)):(J.setEnd(L.node,L.offset),le.addRange(J))}}}}for(ve=[],le=S;le=le.parentNode;)le.nodeType===1&&ve.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ve.length;S++){var ye=ve[S];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}cc=!!Jd,Wd=Jd=null}finally{Ot=u,I.p=o,M.T=r}}t.current=n,Rn=2}}function Vg(){if(Rn===2){Rn=0;var t=Vs,n=dl,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=M.T,M.T=null;var o=I.p;I.p=2;var u=Ot;Ot|=4;try{bg(t,n.alternate,n)}finally{Ot=u,I.p=o,M.T=r}}Rn=3}}function Zg(){if(Rn===4||Rn===3){Rn=0,Q();var t=Vs,n=dl,r=Ss,o=Tg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Rn=5:(Rn=0,dl=Vs=null,Gg(t,t.pendingLanes));var u=t.pendingLanes;if(u===0&&(Hs=null),kt(r),n=n.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(Ne,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=M.T,u=I.p,I.p=2,M.T=null;try{for(var m=t.onRecoverableError,b=0;b<o.length;b++){var S=o[b];m(S.value,{componentStack:S.stack})}}finally{M.T=n,I.p=u}}(Ss&3)!==0&&Xo(),ss(t),u=t.pendingLanes,(r&261930)!==0&&(u&42)!==0?t===qd?bi++:(bi=0,qd=t):bi=0,vi(0)}}function Gg(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Wl(n)))}function Xo(){return Hg(),Vg(),Zg(),Pg()}function Pg(){if(Rn!==5)return!1;var t=Vs,n=Ld;Ld=0;var r=kt(Ss),o=M.T,u=I.p;try{I.p=32>r?32:r,M.T=null,r=Bd,Bd=null;var m=Vs,b=Ss;if(Rn=0,dl=Vs=null,Ss=0,(Ot&6)!==0)throw Error(l(331));var S=Ot;if(Ot|=4,Cg(m.current),_g(m,m.current,b,r),Ot=S,vi(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(Ne,m)}catch{}return!0}finally{I.p=u,M.T=o,Gg(t,n)}}function Qg(t,n,r){n=Aa(r,n),n=yd(t.stateNode,n,2),t=Ls(t,n,2),t!==null&&(Ae(t,2),ss(t))}function zt(t,n,r){if(t.tag===3)Qg(t,t,r);else for(;n!==null;){if(n.tag===3){Qg(n,t,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Hs===null||!Hs.has(o))){t=Aa(r,t),r=Yp(2),o=Ls(n,r,2),o!==null&&(Kp(r,o,n,t),Ae(o,2),ss(o));break}}n=n.return}}function Fd(t,n,r){var o=t.pingCache;if(o===null){o=t.pingCache=new IS;var u=new Set;o.set(n,u)}else u=o.get(n),u===void 0&&(u=new Set,o.set(n,u));u.has(r)||(Md=!0,u.add(r),t=ZS.bind(null,t,n,r),n.then(t,t))}function ZS(t,n,r){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,$t===t&&(xt&r)===r&&(cn===4||cn===3&&(xt&62914560)===xt&&300>G()-Zo?(Ot&2)===0&&fl(t,0):kd|=r,ul===xt&&(ul=0)),ss(t)}function Yg(t,n){n===0&&(n=Y()),t=mr(t,n),t!==null&&(Ae(t,n),ss(t))}function GS(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),Yg(t,r)}function PS(t,n){var r=0;switch(t.tag){case 31:case 13:var o=t.stateNode,u=t.memoizedState;u!==null&&(r=u.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(l(314))}o!==null&&o.delete(n),Yg(t,r)}function QS(t,n){return A(t,n)}var Jo=null,hl=null,Hd=!1,Wo=!1,Vd=!1,Gs=0;function ss(t){t!==hl&&t.next===null&&(hl===null?Jo=hl=t:hl=hl.next=t),Wo=!0,Hd||(Hd=!0,KS())}function vi(t,n){if(!Vd&&Wo){Vd=!0;do for(var r=!1,o=Jo;o!==null;){if(t!==0){var u=o.pendingLanes;if(u===0)var m=0;else{var b=o.suspendedLanes,S=o.pingedLanes;m=(1<<31-jt(42|t)+1)-1,m&=u&~(b&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,Wg(o,m))}else m=xt,m=Jn(o,o===$t?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||In(o,m)||(r=!0,Wg(o,m));o=o.next}while(r);Vd=!1}}function YS(){Kg()}function Kg(){Wo=Hd=!1;var t=0;Gs!==0&&lN()&&(t=Gs);for(var n=G(),r=null,o=Jo;o!==null;){var u=o.next,m=Xg(o,n);m===0?(o.next=null,r===null?Jo=u:r.next=u,u===null&&(hl=r)):(r=o,(t!==0||(m&3)!==0)&&(Wo=!0)),o=u}Rn!==0&&Rn!==5||vi(t),Gs!==0&&(Gs=0)}function Xg(t,n){for(var r=t.suspendedLanes,o=t.pingedLanes,u=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-jt(m),S=1<<b,z=u[b];z===-1?((S&r)===0||(S&o)!==0)&&(u[b]=$n(S,n)):z<=n&&(t.expiredLanes|=S),m&=~S}if(n=$t,r=xt,r=Jn(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===n&&(Dt===2||Dt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&V(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||In(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(o!==null&&V(o),kt(r)){case 2:case 8:r=Le;break;case 32:r=ae;break;case 268435456:r=Pe;break;default:r=ae}return o=Jg.bind(null,t),r=A(r,o),t.callbackPriority=n,t.callbackNode=r,n}return o!==null&&o!==null&&V(o),t.callbackPriority=2,t.callbackNode=null,2}function Jg(t,n){if(Rn!==0&&Rn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Xo()&&t.callbackNode!==r)return null;var o=xt;return o=Jn(t,t===$t?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(zg(t,o,n),Xg(t,G()),t.callbackNode!=null&&t.callbackNode===r?Jg.bind(null,t):null)}function Wg(t,n){if(Xo())return null;zg(t,n,!0)}function KS(){oN(function(){(Ot&6)!==0?A(Ce,YS):Kg()})}function Zd(){if(Gs===0){var t=Wr;t===0&&(t=dn,dn<<=1,(dn&261888)===0&&(dn=256)),Gs=t}return Gs}function ey(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Fr(""+t)}function ty(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function XS(t,n,r,o,u){if(n==="submit"&&r&&r.stateNode===u){var m=ey((u[yt]||null).action),b=o.submitter;b&&(n=(n=b[yt]||null)?ey(n.formAction):b.getAttribute("formAction"),n!==null&&(m=n,b=null));var S=new ra("action","action",null,o,u);t.push({event:S,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Gs!==0){var z=b?ty(u,b):new FormData(u);dd(r,{pending:!0,data:z,method:u.method,action:m},null,z)}}else typeof m=="function"&&(S.preventDefault(),z=b?ty(u,b):new FormData(u),dd(r,{pending:!0,data:z,method:u.method,action:m},m,z))},currentTarget:u}]})}}for(var Gd=0;Gd<Cu.length;Gd++){var Pd=Cu[Gd],JS=Pd.toLowerCase(),WS=Pd[0].toUpperCase()+Pd.slice(1);Za(JS,"on"+WS)}Za(Dh,"onAnimationEnd"),Za(zh,"onAnimationIteration"),Za(Mh,"onAnimationStart"),Za("dblclick","onDoubleClick"),Za("focusin","onFocus"),Za("focusout","onBlur"),Za(pS,"onTransitionRun"),Za(gS,"onTransitionStart"),Za(yS,"onTransitionCancel"),Za(kh,"onTransitionEnd"),Cn("onMouseEnter",["mouseout","mouseover"]),Cn("onMouseLeave",["mouseout","mouseover"]),Cn("onPointerEnter",["pointerout","pointerover"]),Cn("onPointerLeave",["pointerout","pointerover"]),pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xi));function ny(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],u=o.event;o=o.listeners;e:{var m=void 0;if(n)for(var b=o.length-1;0<=b;b--){var S=o[b],z=S.instance,W=S.currentTarget;if(S=S.listener,z!==m&&u.isPropagationStopped())break e;m=S,u.currentTarget=W;try{m(u)}catch(ue){ho(ue)}u.currentTarget=null,m=z}else for(b=0;b<o.length;b++){if(S=o[b],z=S.instance,W=S.currentTarget,S=S.listener,z!==m&&u.isPropagationStopped())break e;m=S,u.currentTarget=W;try{m(u)}catch(ue){ho(ue)}u.currentTarget=null,m=z}}}}function vt(t,n){var r=n[fn];r===void 0&&(r=n[fn]=new Set);var o=t+"__bubble";r.has(o)||(ay(n,t,2,!1),r.add(o))}function Qd(t,n,r){var o=0;n&&(o|=4),ay(r,t,o,n)}var ec="_reactListening"+Math.random().toString(36).slice(2);function Yd(t){if(!t[ec]){t[ec]=!0,is.forEach(function(r){r!=="selectionchange"&&(eN.has(r)||Qd(r,!1,t),Qd(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[ec]||(n[ec]=!0,Qd("selectionchange",!1,n))}}function ay(t,n,r,o){switch(Dy(n)){case 2:var u=CN;break;case 8:u=ON;break;default:u=df}r=u.bind(null,n,r,t),u=void 0,!cr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),o?u!==void 0?t.addEventListener(n,r,{capture:!0,passive:u}):t.addEventListener(n,r,!0):u!==void 0?t.addEventListener(n,r,{passive:u}):t.addEventListener(n,r,!1)}function Kd(t,n,r,o,u){var m=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var b=o.tag;if(b===3||b===4){var S=o.stateNode.containerInfo;if(S===u)break;if(b===4)for(b=o.return;b!==null;){var z=b.tag;if((z===3||z===4)&&b.stateNode.containerInfo===u)return;b=b.return}for(;S!==null;){if(b=rn(S),b===null)return;if(z=b.tag,z===5||z===6||z===26||z===27){o=m=b;continue e}S=S.parentNode}}o=o.return}uo(function(){var W=m,ue=Hl(r),ve=[];e:{var ne=Uh.get(t);if(ne!==void 0){var le=ra,Ge=t;switch(t){case"keypress":if(ke(r)===0)break e;case"keydown":case"keyup":le=P0;break;case"focusin":Ge="focus",le=vu;break;case"focusout":Ge="blur",le=vu;break;case"beforeblur":case"afterblur":le=vu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=dh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=k0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=K0;break;case Dh:case zh:case Mh:le=B0;break;case kh:le=J0;break;case"scroll":case"scrollend":le=Hr;break;case"wheel":le=eS;break;case"copy":case"cut":case"paste":le=I0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=mh;break;case"toggle":case"beforetoggle":le=nS}var tt=(n&4)!==0,Bt=!tt&&(t==="scroll"||t==="scrollend"),F=tt?ne!==null?ne+"Capture":null:ne;tt=[];for(var L=W,J;L!==null;){var ye=L;if(J=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||J===null||F===null||(ye=or(L,F),ye!=null&&tt.push(Si(L,ye,J))),Bt)break;L=L.return}0<tt.length&&(ne=new le(ne,Ge,null,r,ue),ve.push({event:ne,listeners:tt}))}}if((n&7)===0){e:{if(ne=t==="mouseover"||t==="pointerover",le=t==="mouseout"||t==="pointerout",ne&&r!==Cs&&(Ge=r.relatedTarget||r.fromElement)&&(rn(Ge)||Ge[It]))break e;if((le||ne)&&(ne=ue.window===ue?ue:(ne=ue.ownerDocument)?ne.defaultView||ne.parentWindow:window,le?(Ge=r.relatedTarget||r.toElement,le=W,Ge=Ge?rn(Ge):null,Ge!==null&&(Bt=d(Ge),tt=Ge.tag,Ge!==Bt||tt!==5&&tt!==27&&tt!==6)&&(Ge=null)):(le=null,Ge=W),le!==Ge)){if(tt=dh,ye="onMouseLeave",F="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(tt=mh,ye="onPointerLeave",F="onPointerEnter",L="pointer"),Bt=le==null?ne:Pn(le),J=Ge==null?ne:Pn(Ge),ne=new tt(ye,L+"leave",le,r,ue),ne.target=Bt,ne.relatedTarget=J,ye=null,rn(ue)===W&&(tt=new tt(F,L+"enter",Ge,r,ue),tt.target=J,tt.relatedTarget=Bt,ye=tt),Bt=ye,le&&Ge)t:{for(tt=tN,F=le,L=Ge,J=0,ye=F;ye;ye=tt(ye))J++;ye=0;for(var Xe=L;Xe;Xe=tt(Xe))ye++;for(;0<J-ye;)F=tt(F),J--;for(;0<ye-J;)L=tt(L),ye--;for(;J--;){if(F===L||L!==null&&F===L.alternate){tt=F;break t}F=tt(F),L=tt(L)}tt=null}else tt=null;le!==null&&sy(ve,ne,le,tt,!1),Ge!==null&&Bt!==null&&sy(ve,Bt,Ge,tt,!0)}}e:{if(ne=W?Pn(W):window,le=ne.nodeName&&ne.nodeName.toLowerCase(),le==="select"||le==="input"&&ne.type==="file")var Et=Sh;else if(vh(ne))if(Nh)Et=fS;else{Et=uS;var Qe=cS}else le=ne.nodeName,!le||le.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?W&&Fl(W.elementType)&&(Et=Sh):Et=dS;if(Et&&(Et=Et(t,W))){xh(ve,Et,r,ue);break e}Qe&&Qe(t,ne,W),t==="focusout"&&W&&ne.type==="number"&&W.memoizedProps.value!=null&&ir(ne,"number",ne.value)}switch(Qe=W?Pn(W):window,t){case"focusin":(vh(Qe)||Qe.contentEditable==="true")&&(Zr=Qe,_u=W,Kl=null);break;case"focusout":Kl=_u=Zr=null;break;case"mousedown":Eu=!0;break;case"contextmenu":case"mouseup":case"dragend":Eu=!1,Rh(ve,r,ue);break;case"selectionchange":if(hS)break;case"keydown":case"keyup":Rh(ve,r,ue)}var mt;if(Su)e:{switch(t){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else Vr?yh(t,r)&&(St="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(St="onCompositionStart");St&&(hh&&r.locale!=="ko"&&(Vr||St!=="onCompositionStart"?St==="onCompositionEnd"&&Vr&&(mt=pe()):(es=ue,E="value"in es?es.value:es.textContent,Vr=!0)),Qe=tc(W,St),0<Qe.length&&(St=new fh(St,t,null,r,ue),ve.push({event:St,listeners:Qe}),mt?St.data=mt:(mt=bh(r),mt!==null&&(St.data=mt)))),(mt=sS?rS(t,r):lS(t,r))&&(St=tc(W,"onBeforeInput"),0<St.length&&(Qe=new fh("onBeforeInput","beforeinput",null,r,ue),ve.push({event:Qe,listeners:St}),Qe.data=mt)),XS(ve,t,W,r,ue)}ny(ve,n)})}function Si(t,n,r){return{instance:t,listener:n,currentTarget:r}}function tc(t,n){for(var r=n+"Capture",o=[];t!==null;){var u=t,m=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||m===null||(u=or(t,r),u!=null&&o.unshift(Si(t,u,m)),u=or(t,n),u!=null&&o.push(Si(t,u,m))),t.tag===3)return o;t=t.return}return[]}function tN(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function sy(t,n,r,o,u){for(var m=n._reactName,b=[];r!==null&&r!==o;){var S=r,z=S.alternate,W=S.stateNode;if(S=S.tag,z!==null&&z===o)break;S!==5&&S!==26&&S!==27||W===null||(z=W,u?(W=or(r,m),W!=null&&b.unshift(Si(r,W,z))):u||(W=or(r,m),W!=null&&b.push(Si(r,W,z)))),r=r.return}b.length!==0&&t.push({event:n,listeners:b})}var nN=/\r\n?/g,aN=/\u0000|\uFFFD/g;function ry(t){return(typeof t=="string"?t:""+t).replace(nN,`
`).replace(aN,"")}function ly(t,n){return n=ry(n),ry(t)===n}function Lt(t,n,r,o,u,m){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||As(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&As(t,""+o);break;case"className":Wn(t,"class",o);break;case"tabIndex":Wn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Wn(t,r,o);break;case"style":oo(t,o,m);break;case"data":if(n!=="object"){Wn(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Fr(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(n!=="input"&&Lt(t,n,"name",u.name,u,null),Lt(t,n,"formEncType",u.formEncType,u,null),Lt(t,n,"formMethod",u.formMethod,u,null),Lt(t,n,"formTarget",u.formTarget,u,null)):(Lt(t,n,"encType",u.encType,u,null),Lt(t,n,"method",u.method,u,null),Lt(t,n,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Fr(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=Ha);break;case"onScroll":o!=null&&vt("scroll",t);break;case"onScrollEnd":o!=null&&vt("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(r=o.__html,r!=null){if(u.children!=null)throw Error(l(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=Fr(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":vt("beforetoggle",t),vt("toggle",t),nn(t,"popover",o);break;case"xlinkActuate":Qn(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Qn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Qn(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Qn(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Qn(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Qn(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Qn(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Qn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Qn(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":nn(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=pu.get(r)||r,nn(t,r,o))}}function Xd(t,n,r,o,u,m){switch(r){case"style":oo(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(r=o.__html,r!=null){if(u.children!=null)throw Error(l(60));t.innerHTML=r}}break;case"children":typeof o=="string"?As(t,o):(typeof o=="number"||typeof o=="bigint")&&As(t,""+o);break;case"onScroll":o!=null&&vt("scroll",t);break;case"onScrollEnd":o!=null&&vt("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Ha);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tn.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(u=r.endsWith("Capture"),n=r.slice(2,u?r.length-7:void 0),m=t[yt]||null,m=m!=null?m[r]:null,typeof m=="function"&&t.removeEventListener(n,m,u),typeof o=="function")){typeof m!="function"&&m!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,o,u);break e}r in t?t[r]=o:o===!0?t.setAttribute(r,""):nn(t,r,o)}}}function Gn(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",t),vt("load",t);var o=!1,u=!1,m;for(m in r)if(r.hasOwnProperty(m)){var b=r[m];if(b!=null)switch(m){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:Lt(t,n,m,b,r,null)}}u&&Lt(t,n,"srcSet",r.srcSet,r,null),o&&Lt(t,n,"src",r.src,r,null);return;case"input":vt("invalid",t);var S=m=b=u=null,z=null,W=null;for(o in r)if(r.hasOwnProperty(o)){var ue=r[o];if(ue!=null)switch(o){case"name":u=ue;break;case"type":b=ue;break;case"checked":z=ue;break;case"defaultChecked":W=ue;break;case"value":m=ue;break;case"defaultValue":S=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(l(137,n));break;default:Lt(t,n,o,ue,r,null)}}Wa(t,m,S,z,W,b,u,!1);return;case"select":vt("invalid",t),o=b=m=null;for(u in r)if(r.hasOwnProperty(u)&&(S=r[u],S!=null))switch(u){case"value":m=S;break;case"defaultValue":b=S;break;case"multiple":o=S;default:Lt(t,n,u,S,r,null)}n=m,r=b,t.multiple=!!o,n!=null?Es(t,!!o,n,!1):r!=null&&Es(t,!!o,r,!0);return;case"textarea":vt("invalid",t),m=u=o=null;for(b in r)if(r.hasOwnProperty(b)&&(S=r[b],S!=null))switch(b){case"value":o=S;break;case"defaultValue":u=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(l(91));break;default:Lt(t,n,b,S,r,null)}lo(t,o,u,m);return;case"option":for(z in r)if(r.hasOwnProperty(z)&&(o=r[z],o!=null))switch(z){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Lt(t,n,z,o,r,null)}return;case"dialog":vt("beforetoggle",t),vt("toggle",t),vt("cancel",t),vt("close",t);break;case"iframe":case"object":vt("load",t);break;case"video":case"audio":for(o=0;o<xi.length;o++)vt(xi[o],t);break;case"image":vt("error",t),vt("load",t);break;case"details":vt("toggle",t);break;case"embed":case"source":case"link":vt("error",t),vt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in r)if(r.hasOwnProperty(W)&&(o=r[W],o!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:Lt(t,n,W,o,r,null)}return;default:if(Fl(n)){for(ue in r)r.hasOwnProperty(ue)&&(o=r[ue],o!==void 0&&Xd(t,n,ue,o,r,void 0));return}}for(S in r)r.hasOwnProperty(S)&&(o=r[S],o!=null&&Lt(t,n,S,o,r,null))}function sN(t,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,m=null,b=null,S=null,z=null,W=null,ue=null;for(le in r){var ve=r[le];if(r.hasOwnProperty(le)&&ve!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":z=ve;default:o.hasOwnProperty(le)||Lt(t,n,le,null,o,ve)}}for(var ne in o){var le=o[ne];if(ve=r[ne],o.hasOwnProperty(ne)&&(le!=null||ve!=null))switch(ne){case"type":m=le;break;case"name":u=le;break;case"checked":W=le;break;case"defaultChecked":ue=le;break;case"value":b=le;break;case"defaultValue":S=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(l(137,n));break;default:le!==ve&&Lt(t,n,ne,le,o,ve)}}On(t,b,S,z,W,ue,m,u);return;case"select":le=b=S=ne=null;for(m in r)if(z=r[m],r.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":le=z;default:o.hasOwnProperty(m)||Lt(t,n,m,null,o,z)}for(u in o)if(m=o[u],z=r[u],o.hasOwnProperty(u)&&(m!=null||z!=null))switch(u){case"value":ne=m;break;case"defaultValue":S=m;break;case"multiple":b=m;default:m!==z&&Lt(t,n,u,m,o,z)}n=S,r=b,o=le,ne!=null?Es(t,!!r,ne,!1):!!o!=!!r&&(n!=null?Es(t,!!r,n,!0):Es(t,!!r,r?[]:"",!1));return;case"textarea":le=ne=null;for(S in r)if(u=r[S],r.hasOwnProperty(S)&&u!=null&&!o.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Lt(t,n,S,null,o,u)}for(b in o)if(u=o[b],m=r[b],o.hasOwnProperty(b)&&(u!=null||m!=null))switch(b){case"value":ne=u;break;case"defaultValue":le=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(l(91));break;default:u!==m&&Lt(t,n,b,u,o,m)}ro(t,ne,le);return;case"option":for(var Ge in r)if(ne=r[Ge],r.hasOwnProperty(Ge)&&ne!=null&&!o.hasOwnProperty(Ge))switch(Ge){case"selected":t.selected=!1;break;default:Lt(t,n,Ge,null,o,ne)}for(z in o)if(ne=o[z],le=r[z],o.hasOwnProperty(z)&&ne!==le&&(ne!=null||le!=null))switch(z){case"selected":t.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Lt(t,n,z,ne,o,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tt in r)ne=r[tt],r.hasOwnProperty(tt)&&ne!=null&&!o.hasOwnProperty(tt)&&Lt(t,n,tt,null,o,ne);for(W in o)if(ne=o[W],le=r[W],o.hasOwnProperty(W)&&ne!==le&&(ne!=null||le!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(l(137,n));break;default:Lt(t,n,W,ne,o,le)}return;default:if(Fl(n)){for(var Bt in r)ne=r[Bt],r.hasOwnProperty(Bt)&&ne!==void 0&&!o.hasOwnProperty(Bt)&&Xd(t,n,Bt,void 0,o,ne);for(ue in o)ne=o[ue],le=r[ue],!o.hasOwnProperty(ue)||ne===le||ne===void 0&&le===void 0||Xd(t,n,ue,ne,o,le);return}}for(var F in r)ne=r[F],r.hasOwnProperty(F)&&ne!=null&&!o.hasOwnProperty(F)&&Lt(t,n,F,null,o,ne);for(ve in o)ne=o[ve],le=r[ve],!o.hasOwnProperty(ve)||ne===le||ne==null&&le==null||Lt(t,n,ve,ne,o,le)}function iy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rN(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var u=r[o],m=u.transferSize,b=u.initiatorType,S=u.duration;if(m&&S&&iy(b)){for(b=0,S=u.responseEnd,o+=1;o<r.length;o++){var z=r[o],W=z.startTime;if(W>S)break;var ue=z.transferSize,ve=z.initiatorType;ue&&iy(ve)&&(z=z.responseEnd,b+=ue*(z<S?1:(S-W)/(z-W)))}if(--o,n+=8*(m+b)/(u.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Jd=null,Wd=null;function nc(t){return t.nodeType===9?t:t.ownerDocument}function oy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function ef(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var tf=null;function lN(){var t=window.event;return t&&t.type==="popstate"?t===tf?!1:(tf=t,!0):(tf=null,!1)}var uy=typeof setTimeout=="function"?setTimeout:void 0,iN=typeof clearTimeout=="function"?clearTimeout:void 0,dy=typeof Promise=="function"?Promise:void 0,oN=typeof queueMicrotask=="function"?queueMicrotask:typeof dy<"u"?function(t){return dy.resolve(null).then(t).catch(cN)}:uy;function cN(t){setTimeout(function(){throw t})}function Ps(t){return t==="head"}function fy(t,n){var r=n,o=0;do{var u=r.nextSibling;if(t.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"||r==="/&"){if(o===0){t.removeChild(u),bl(n);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Ni(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Ni(r);for(var m=r.firstChild;m;){var b=m.nextSibling,S=m.nodeName;m[Ft]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=b}}else r==="body"&&Ni(t.ownerDocument.body);r=u}while(r);bl(n)}function my(t,n){var r=t;t=0;do{var o=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=o}while(r)}function nf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":nf(r),Fn(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function uN(t,n,r,o){for(;t.nodeType===1;){var u=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ft])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==u.rel||t.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||t.getAttribute("title")!==(u.title==null?null:u.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(u.src==null?null:u.src)||t.getAttribute("type")!==(u.type==null?null:u.type)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var m=u.name==null?null:""+u.name;if(u.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Da(t.nextSibling),t===null)break}return null}function dN(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Da(t.nextSibling),t===null))return null;return t}function hy(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Da(t.nextSibling),t===null))return null;return t}function af(t){return t.data==="$?"||t.data==="$~"}function sf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function fN(t,n){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||r.readyState!=="loading")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Da(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var rf=null;function py(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(n===0)return Da(t.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}t=t.nextSibling}return null}function gy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return t;n--}else r!=="/$"&&r!=="/&"||n++}t=t.previousSibling}return null}function yy(t,n,r){switch(n=nc(r),t){case"html":if(t=n.documentElement,!t)throw Error(l(452));return t;case"head":if(t=n.head,!t)throw Error(l(453));return t;case"body":if(t=n.body,!t)throw Error(l(454));return t;default:throw Error(l(451))}}function Ni(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Fn(t)}var za=new Map,by=new Set;function ac(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ns=I.d;I.d={f:mN,r:hN,D:pN,C:gN,L:yN,m:bN,X:xN,S:vN,M:SN};function mN(){var t=Ns.f(),n=Qo();return t||n}function hN(t){var n=vn(t);n!==null&&n.tag===5&&n.type==="form"?kp(n):Ns.r(t)}var pl=typeof document>"u"?null:document;function vy(t,n,r){var o=pl;if(o&&typeof n=="string"&&n){var u=nt(n);u='link[rel="'+t+'"][href="'+u+'"]',typeof r=="string"&&(u+='[crossorigin="'+r+'"]'),by.has(u)||(by.add(u),t={rel:t,crossOrigin:r,href:n},o.querySelector(u)===null&&(n=o.createElement("link"),Gn(n,"link",t),Tt(n),o.head.appendChild(n)))}}function pN(t){Ns.D(t),vy("dns-prefetch",t,null)}function gN(t,n){Ns.C(t,n),vy("preconnect",t,n)}function yN(t,n,r){Ns.L(t,n,r);var o=pl;if(o&&t&&n){var u='link[rel="preload"][as="'+nt(n)+'"]';n==="image"&&r&&r.imageSrcSet?(u+='[imagesrcset="'+nt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(u+='[imagesizes="'+nt(r.imageSizes)+'"]')):u+='[href="'+nt(t)+'"]';var m=u;switch(n){case"style":m=gl(t);break;case"script":m=yl(t)}za.has(m)||(t=x({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),za.set(m,t),o.querySelector(u)!==null||n==="style"&&o.querySelector(wi(m))||n==="script"&&o.querySelector(ji(m))||(n=o.createElement("link"),Gn(n,"link",t),Tt(n),o.head.appendChild(n)))}}function bN(t,n){Ns.m(t,n);var r=pl;if(r&&t){var o=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+nt(o)+'"][href="'+nt(t)+'"]',m=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=yl(t)}if(!za.has(m)&&(t=x({rel:"modulepreload",href:t},n),za.set(m,t),r.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(ji(m)))return}o=r.createElement("link"),Gn(o,"link",t),Tt(o),r.head.appendChild(o)}}}function vN(t,n,r){Ns.S(t,n,r);var o=pl;if(o&&t){var u=kn(o).hoistableStyles,m=gl(t);n=n||"default";var b=u.get(m);if(!b){var S={loading:0,preload:null};if(b=o.querySelector(wi(m)))S.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":n},r),(r=za.get(m))&&lf(t,r);var z=b=o.createElement("link");Tt(z),Gn(z,"link",t),z._p=new Promise(function(W,ue){z.onload=W,z.onerror=ue}),z.addEventListener("load",function(){S.loading|=1}),z.addEventListener("error",function(){S.loading|=2}),S.loading|=4,sc(b,n,o)}b={type:"stylesheet",instance:b,count:1,state:S},u.set(m,b)}}}function xN(t,n){Ns.X(t,n);var r=pl;if(r&&t){var o=kn(r).hoistableScripts,u=yl(t),m=o.get(u);m||(m=r.querySelector(ji(u)),m||(t=x({src:t,async:!0},n),(n=za.get(u))&&of(t,n),m=r.createElement("script"),Tt(m),Gn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(u,m))}}function SN(t,n){Ns.M(t,n);var r=pl;if(r&&t){var o=kn(r).hoistableScripts,u=yl(t),m=o.get(u);m||(m=r.querySelector(ji(u)),m||(t=x({src:t,async:!0,type:"module"},n),(n=za.get(u))&&of(t,n),m=r.createElement("script"),Tt(m),Gn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(u,m))}}function xy(t,n,r,o){var u=(u=ge.current)?ac(u):null;if(!u)throw Error(l(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=gl(r.href),r=kn(u).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=gl(r.href);var m=kn(u).hoistableStyles,b=m.get(t);if(b||(u=u.ownerDocument||u,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=u.querySelector(wi(t)))&&!m._p&&(b.instance=m,b.state.loading=5),za.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},za.set(t,r),m||NN(u,t,r,b.state))),n&&o===null)throw Error(l(528,""));return b}if(n&&o!==null)throw Error(l(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=yl(r),r=kn(u).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,t))}}function gl(t){return'href="'+nt(t)+'"'}function wi(t){return'link[rel="stylesheet"]['+t+"]"}function Sy(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function NN(t,n,r,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Gn(n,"link",r),Tt(n),t.head.appendChild(n))}function yl(t){return'[src="'+nt(t)+'"]'}function ji(t){return"script[async]"+t}function Ny(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+nt(r.href)+'"]');if(o)return n.instance=o,Tt(o),o;var u=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Tt(o),Gn(o,"style",u),sc(o,r.precedence,t),n.instance=o;case"stylesheet":u=gl(r.href);var m=t.querySelector(wi(u));if(m)return n.state.loading|=4,n.instance=m,Tt(m),m;o=Sy(r),(u=za.get(u))&&lf(o,u),m=(t.ownerDocument||t).createElement("link"),Tt(m);var b=m;return b._p=new Promise(function(S,z){b.onload=S,b.onerror=z}),Gn(m,"link",o),n.state.loading|=4,sc(m,r.precedence,t),n.instance=m;case"script":return m=yl(r.src),(u=t.querySelector(ji(m)))?(n.instance=u,Tt(u),u):(o=r,(u=za.get(m))&&(o=x({},r),of(o,u)),t=t.ownerDocument||t,u=t.createElement("script"),Tt(u),Gn(u,"link",o),t.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(l(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,sc(o,r.precedence,t));return n.instance}function sc(t,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,m=u,b=0;b<o.length;b++){var S=o[b];if(S.dataset.precedence===n)m=S;else if(m!==u)break}m?m.parentNode.insertBefore(t,m.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function lf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function of(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var rc=null;function wy(t,n,r){if(rc===null){var o=new Map,u=rc=new Map;u.set(r,o)}else u=rc,o=u.get(r),o||(o=new Map,u.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),u=0;u<r.length;u++){var m=r[u];if(!(m[Ft]||m[at]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(n)||"";b=t+b;var S=o.get(b);S?S.push(m):o.set(b,[m])}}return o}function jy(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function wN(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function _y(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function jN(t,n,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var u=gl(o.href),m=n.querySelector(wi(u));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=lc.bind(t),n.then(t,t)),r.state.loading|=4,r.instance=m,Tt(m);return}m=n.ownerDocument||n,o=Sy(o),(u=za.get(u))&&lf(o,u),m=m.createElement("link"),Tt(m);var b=m;b._p=new Promise(function(S,z){b.onload=S,b.onerror=z}),Gn(m,"link",o),r.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=lc.bind(t),n.addEventListener("load",r),n.addEventListener("error",r))}}var cf=0;function _N(t,n){return t.stylesheets&&t.count===0&&oc(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var o=setTimeout(function(){if(t.stylesheets&&oc(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+n);0<t.imgBytes&&cf===0&&(cf=62500*rN());var u=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&oc(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>cf?50:800)+n);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function lc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)oc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ic=null;function oc(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ic=new Map,n.forEach(EN,t),ic=null,lc.call(t))}function EN(t,n){if(!(n.state.loading&4)){var r=ic.get(t);if(r)var o=r.get(null);else{r=new Map,ic.set(t,r);for(var u=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<u.length;m++){var b=u[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),o=b)}o&&r.set(null,o)}u=n.instance,b=u.getAttribute("data-precedence"),m=r.get(b)||o,m===o&&r.set(null,u),r.set(b,u),this.count++,o=lc.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),m?m.parentNode.insertBefore(u,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(u,t.firstChild)),n.state.loading|=4}}var _i={$$typeof:K,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function AN(t,n,r,o,u,m,b,S,z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=te(0),this.hiddenUpdates=te(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Ey(t,n,r,o,u,m,b,S,z,W,ue,ve){return t=new AN(t,n,r,b,z,W,ue,ve,S),n=1,m===!0&&(n|=24),m=ba(3,null,null,n),t.current=m,m.stateNode=t,n=$u(),n.refCount++,t.pooledCache=n,n.refCount++,m.memoizedState={element:o,isDehydrated:r,cache:n},Zu(m),t}function Ay(t){return t?(t=Qr,t):Qr}function Cy(t,n,r,o,u,m){u=Ay(u),o.context===null?o.context=u:o.pendingContext=u,o=Us(n),o.payload={element:r},m=m===void 0?null:m,m!==null&&(o.callback=m),r=Ls(t,o,n),r!==null&&(ua(r,t,n),ai(r,t,n))}function Oy(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function uf(t,n){Oy(t,n),(t=t.alternate)&&Oy(t,n)}function Ry(t){if(t.tag===13||t.tag===31){var n=mr(t,67108864);n!==null&&ua(n,t,67108864),uf(t,67108864)}}function Ty(t){if(t.tag===13||t.tag===31){var n=wa();n=Qt(n);var r=mr(t,n);r!==null&&ua(r,t,n),uf(t,n)}}var cc=!0;function CN(t,n,r,o){var u=M.T;M.T=null;var m=I.p;try{I.p=2,df(t,n,r,o)}finally{I.p=m,M.T=u}}function ON(t,n,r,o){var u=M.T;M.T=null;var m=I.p;try{I.p=8,df(t,n,r,o)}finally{I.p=m,M.T=u}}function df(t,n,r,o){if(cc){var u=ff(o);if(u===null)Kd(t,n,o,uc,r),zy(t,o);else if(TN(u,t,n,r,o))o.stopPropagation();else if(zy(t,o),n&4&&-1<RN.indexOf(t)){for(;u!==null;){var m=vn(u);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Mn(m.pendingLanes);if(b!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var z=1<<31-jt(b);S.entanglements[1]|=z,b&=~z}ss(m),(Ot&6)===0&&(Go=G()+500,vi(0))}}break;case 31:case 13:S=mr(m,2),S!==null&&ua(S,m,2),Qo(),uf(m,2)}if(m=ff(o),m===null&&Kd(t,n,o,uc,r),m===u)break;u=m}u!==null&&o.stopPropagation()}else Kd(t,n,o,null,r)}}function ff(t){return t=Hl(t),mf(t)}var uc=null;function mf(t){if(uc=null,t=rn(t),t!==null){var n=d(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=f(n),t!==null)return t;t=null}else if(r===31){if(t=h(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return uc=t,null}function Dy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case Ce:return 2;case Le:return 8;case ae:case Me:return 32;case Pe:return 268435456;default:return 32}default:return 32}}var hf=!1,Qs=null,Ys=null,Ks=null,Ei=new Map,Ai=new Map,Xs=[],RN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zy(t,n){switch(t){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":Ks=null;break;case"pointerover":case"pointerout":Ei.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ai.delete(n.pointerId)}}function Ci(t,n,r,o,u,m){return t===null||t.nativeEvent!==m?(t={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:m,targetContainers:[u]},n!==null&&(n=vn(n),n!==null&&Ry(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),t)}function TN(t,n,r,o,u){switch(n){case"focusin":return Qs=Ci(Qs,t,n,r,o,u),!0;case"dragenter":return Ys=Ci(Ys,t,n,r,o,u),!0;case"mouseover":return Ks=Ci(Ks,t,n,r,o,u),!0;case"pointerover":var m=u.pointerId;return Ei.set(m,Ci(Ei.get(m)||null,t,n,r,o,u)),!0;case"gotpointercapture":return m=u.pointerId,Ai.set(m,Ci(Ai.get(m)||null,t,n,r,o,u)),!0}return!1}function My(t){var n=rn(t.target);if(n!==null){var r=d(n);if(r!==null){if(n=r.tag,n===13){if(n=f(r),n!==null){t.blockedOn=n,Wt(t.priority,function(){Ty(r)});return}}else if(n===31){if(n=h(r),n!==null){t.blockedOn=n,Wt(t.priority,function(){Ty(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function dc(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=ff(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);Cs=o,r.target.dispatchEvent(o),Cs=null}else return n=vn(r),n!==null&&Ry(n),t.blockedOn=r,!1;n.shift()}return!0}function ky(t,n,r){dc(t)&&r.delete(n)}function DN(){hf=!1,Qs!==null&&dc(Qs)&&(Qs=null),Ys!==null&&dc(Ys)&&(Ys=null),Ks!==null&&dc(Ks)&&(Ks=null),Ei.forEach(ky),Ai.forEach(ky)}function fc(t,n){t.blockedOn===n&&(t.blockedOn=null,hf||(hf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,DN)))}var mc=null;function Uy(t){mc!==t&&(mc=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){mc===t&&(mc=null);for(var n=0;n<t.length;n+=3){var r=t[n],o=t[n+1],u=t[n+2];if(typeof o!="function"){if(mf(o||r)===null)continue;break}var m=vn(r);m!==null&&(t.splice(n,3),n-=3,dd(m,{pending:!0,data:u,method:r.method,action:o},o,u))}}))}function bl(t){function n(z){return fc(z,t)}Qs!==null&&fc(Qs,t),Ys!==null&&fc(Ys,t),Ks!==null&&fc(Ks,t),Ei.forEach(n),Ai.forEach(n);for(var r=0;r<Xs.length;r++){var o=Xs[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Xs.length&&(r=Xs[0],r.blockedOn===null);)My(r),r.blockedOn===null&&Xs.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var u=r[o],m=r[o+1],b=u[yt]||null;if(typeof m=="function")b||Uy(r);else if(b){var S=null;if(m&&m.hasAttribute("formAction")){if(u=m,b=m[yt]||null)S=b.formAction;else if(mf(u)!==null)continue}else S=b.action;typeof S=="function"?r[o+1]=S:(r.splice(o,3),o-=3),Uy(r)}}}function Ly(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return u=b})},focusReset:"manual",scroll:"manual"})}function n(){u!==null&&(u(),u=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),u!==null&&(u(),u=null)}}}function pf(t){this._internalRoot=t}hc.prototype.render=pf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(l(409));var r=n.current,o=wa();Cy(r,o,t,n,null,null)},hc.prototype.unmount=pf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Cy(t.current,2,null,t,null,null),Qo(),n[It]=null}};function hc(t){this._internalRoot=t}hc.prototype.unstable_scheduleHydration=function(t){if(t){var n=Rt();t={blockedOn:null,target:t,priority:n};for(var r=0;r<Xs.length&&n!==0&&n<Xs[r].priority;r++);Xs.splice(r,0,t),r===0&&My(t)}};var By=a.version;if(By!=="19.2.0")throw Error(l(527,By,"19.2.0"));I.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(l(188)):(t=Object.keys(t).join(","),Error(l(268,t)));return t=p(n),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var zN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{Ne=pc.inject(zN),We=pc}catch{}}return Ri.createRoot=function(t,n){if(!c(t))throw Error(l(299));var r=!1,o="",u=Zp,m=Gp,b=Pp;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError)),n=Ey(t,1,!1,null,null,r,o,null,u,m,b,Ly),t[It]=n.current,Yd(t),new pf(n)},Ri.hydrateRoot=function(t,n,r){if(!c(t))throw Error(l(299));var o=!1,u="",m=Zp,b=Gp,S=Pp,z=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.formState!==void 0&&(z=r.formState)),n=Ey(t,1,!0,n,r??null,o,u,z,m,b,S,Ly),n.context=Ay(null),r=n.current,o=wa(),o=Qt(o),u=Us(o),u.callback=null,Ls(r,u,o),r=o,n.current.lanes=r,Ae(n,r),ss(n),t[It]=n.current,Yd(t),new hc(n)},Ri.version="19.2.0",Ri}var Qy;function HN(){if(Qy)return bf.exports;Qy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(a){console.error(a)}}return e(),bf.exports=FN(),bf.exports}var VN=HN();const ZN=Ov(VN);var Yy="popstate";function GN(e={}){function a(l,c){let{pathname:d,search:f,hash:h}=l.location;return Jf("",{pathname:d,search:f,hash:h},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(l,c){return typeof c=="string"?c:Ii(c)}return QN(a,s,null,e)}function Xt(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function La(e,a){if(!e){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function PN(){return Math.random().toString(36).substring(2,10)}function Ky(e,a){return{usr:e.state,key:e.key,idx:a}}function Jf(e,a,s=null,l){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof a=="string"?Dl(a):a,state:s,key:a&&a.key||l||PN()}}function Ii({pathname:e="/",search:a="",hash:s=""}){return a&&a!=="?"&&(e+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Dl(e){let a={};if(e){let s=e.indexOf("#");s>=0&&(a.hash=e.substring(s),e=e.substring(0,s));let l=e.indexOf("?");l>=0&&(a.search=e.substring(l),e=e.substring(0,l)),e&&(a.pathname=e)}return a}function QN(e,a,s,l={}){let{window:c=document.defaultView,v5Compat:d=!1}=l,f=c.history,h="POP",g=null,p=v();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function v(){return(f.state||{idx:null}).idx}function x(){h="POP";let C=v(),B=C==null?null:C-p;p=C,g&&g({action:h,location:_.location,delta:B})}function N(C,B){h="PUSH";let T=Jf(_.location,C,B);p=v()+1;let K=Ky(T,p),D=_.createHref(T);try{f.pushState(K,"",D)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;c.location.assign(D)}d&&g&&g({action:h,location:_.location,delta:1})}function q(C,B){h="REPLACE";let T=Jf(_.location,C,B);p=v();let K=Ky(T,p),D=_.createHref(T);f.replaceState(K,"",D),d&&g&&g({action:h,location:_.location,delta:0})}function j(C){return YN(C)}let _={get action(){return h},get location(){return e(c,f)},listen(C){if(g)throw new Error("A history only accepts one active listener");return c.addEventListener(Yy,x),g=C,()=>{c.removeEventListener(Yy,x),g=null}},createHref(C){return a(c,C)},createURL:j,encodeLocation(C){let B=j(C);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:N,replace:q,go(C){return f.go(C)}};return _}function YN(e,a=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Xt(s,"No window.location.(origin|href) available to create URL");let l=typeof e=="string"?e:Ii(e);return l=l.replace(/ $/,"%20"),!a&&l.startsWith("//")&&(l=s+l),new URL(l,s)}function Rv(e,a,s="/"){return KN(e,a,s,!1)}function KN(e,a,s,l){let c=typeof a=="string"?Dl(a):a,d=_s(c.pathname||"/",s);if(d==null)return null;let f=Tv(e);XN(f);let h=null;for(let g=0;h==null&&g<f.length;++g){let p=ow(d);h=lw(f[g],p,l)}return h}function Tv(e,a=[],s=[],l="",c=!1){let d=(f,h,g=c,p)=>{let v={relativePath:p===void 0?f.path||"":p,caseSensitive:f.caseSensitive===!0,childrenIndex:h,route:f};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(l)&&g)return;Xt(v.relativePath.startsWith(l),`Absolute route path "${v.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(l.length)}let x=js([l,v.relativePath]),N=s.concat(v);f.children&&f.children.length>0&&(Xt(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Tv(f.children,a,N,x,g)),!(f.path==null&&!f.index)&&a.push({path:x,score:sw(x,f.index),routesMeta:N})};return e.forEach((f,h)=>{if(f.path===""||!f.path?.includes("?"))d(f,h);else for(let g of Dv(f.path))d(f,h,!0,g)}),a}function Dv(e){let a=e.split("/");if(a.length===0)return[];let[s,...l]=a,c=s.endsWith("?"),d=s.replace(/\?$/,"");if(l.length===0)return c?[d,""]:[d];let f=Dv(l.join("/")),h=[];return h.push(...f.map(g=>g===""?d:[d,g].join("/"))),c&&h.push(...f),h.map(g=>e.startsWith("/")&&g===""?"/":g)}function XN(e){e.sort((a,s)=>a.score!==s.score?s.score-a.score:rw(a.routesMeta.map(l=>l.childrenIndex),s.routesMeta.map(l=>l.childrenIndex)))}var JN=/^:[\w-]+$/,WN=3,ew=2,tw=1,nw=10,aw=-2,Xy=e=>e==="*";function sw(e,a){let s=e.split("/"),l=s.length;return s.some(Xy)&&(l+=aw),a&&(l+=ew),s.filter(c=>!Xy(c)).reduce((c,d)=>c+(JN.test(d)?WN:d===""?tw:nw),l)}function rw(e,a){return e.length===a.length&&e.slice(0,-1).every((l,c)=>l===a[c])?e[e.length-1]-a[a.length-1]:0}function lw(e,a,s=!1){let{routesMeta:l}=e,c={},d="/",f=[];for(let h=0;h<l.length;++h){let g=l[h],p=h===l.length-1,v=d==="/"?a:a.slice(d.length)||"/",x=$i({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},v),N=g.route;if(!x&&p&&s&&!l[l.length-1].route.index&&(x=$i({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!x)return null;Object.assign(c,x.params),f.push({params:c,pathname:js([d,x.pathname]),pathnameBase:fw(js([d,x.pathnameBase])),route:N}),x.pathnameBase!=="/"&&(d=js([d,x.pathnameBase]))}return f}function $i(e,a){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,l]=iw(e.path,e.caseSensitive,e.end),c=a.match(s);if(!c)return null;let d=c[0],f=d.replace(/(.)\/+$/,"$1"),h=c.slice(1);return{params:l.reduce((p,{paramName:v,isOptional:x},N)=>{if(v==="*"){let j=h[N]||"";f=d.slice(0,d.length-j.length).replace(/(.)\/+$/,"$1")}const q=h[N];return x&&!q?p[v]=void 0:p[v]=(q||"").replace(/%2F/g,"/"),p},{}),pathname:d,pathnameBase:f,pattern:e}}function iw(e,a=!1,s=!0){La(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let l=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,h,g)=>(l.push({paramName:h,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(l.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),l]}function ow(e){try{return e.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return La(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),e}}function _s(e,a){if(a==="/")return e;if(!e.toLowerCase().startsWith(a.toLowerCase()))return null;let s=a.endsWith("/")?a.length-1:a.length,l=e.charAt(s);return l&&l!=="/"?null:e.slice(s)||"/"}function cw(e,a="/"){let{pathname:s,search:l="",hash:c=""}=typeof e=="string"?Dl(e):e;return{pathname:s?s.startsWith("/")?s:uw(s,a):a,search:mw(l),hash:hw(c)}}function uw(e,a){let s=a.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function Nf(e,a,s,l){return`Cannot include a '${e}' character in a manually specified \`to.${a}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dw(e){return e.filter((a,s)=>s===0||a.route.path&&a.route.path.length>0)}function Om(e){let a=dw(e);return a.map((s,l)=>l===a.length-1?s.pathname:s.pathnameBase)}function Rm(e,a,s,l=!1){let c;typeof e=="string"?c=Dl(e):(c={...e},Xt(!c.pathname||!c.pathname.includes("?"),Nf("?","pathname","search",c)),Xt(!c.pathname||!c.pathname.includes("#"),Nf("#","pathname","hash",c)),Xt(!c.search||!c.search.includes("#"),Nf("#","search","hash",c)));let d=e===""||c.pathname==="",f=d?"/":c.pathname,h;if(f==null)h=s;else{let x=a.length-1;if(!l&&f.startsWith("..")){let N=f.split("/");for(;N[0]==="..";)N.shift(),x-=1;c.pathname=N.join("/")}h=x>=0?a[x]:"/"}let g=cw(c,h),p=f&&f!=="/"&&f.endsWith("/"),v=(d||f===".")&&s.endsWith("/");return!g.pathname.endsWith("/")&&(p||v)&&(g.pathname+="/"),g}var js=e=>e.join("/").replace(/\/\/+/g,"/"),fw=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mw=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,hw=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function pw(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zv=["POST","PUT","PATCH","DELETE"];new Set(zv);var gw=["GET",...zv];new Set(gw);var zl=y.createContext(null);zl.displayName="DataRouter";var Gc=y.createContext(null);Gc.displayName="DataRouterState";y.createContext(!1);var Mv=y.createContext({isTransitioning:!1});Mv.displayName="ViewTransition";var yw=y.createContext(new Map);yw.displayName="Fetchers";var bw=y.createContext(null);bw.displayName="Await";var Ba=y.createContext(null);Ba.displayName="Navigation";var Qi=y.createContext(null);Qi.displayName="Location";var qa=y.createContext({outlet:null,matches:[],isDataRoute:!1});qa.displayName="Route";var Tm=y.createContext(null);Tm.displayName="RouteError";function vw(e,{relative:a}={}){Xt(Ml(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:l}=y.useContext(Ba),{hash:c,pathname:d,search:f}=Yi(e,{relative:a}),h=d;return s!=="/"&&(h=d==="/"?s:js([s,d])),l.createHref({pathname:h,search:f,hash:c})}function Ml(){return y.useContext(Qi)!=null}function aa(){return Xt(Ml(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Qi).location}var kv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Uv(e){y.useContext(Ba).static||y.useLayoutEffect(e)}function Lr(){let{isDataRoute:e}=y.useContext(qa);return e?kw():xw()}function xw(){Xt(Ml(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(zl),{basename:a,navigator:s}=y.useContext(Ba),{matches:l}=y.useContext(qa),{pathname:c}=aa(),d=JSON.stringify(Om(l)),f=y.useRef(!1);return Uv(()=>{f.current=!0}),y.useCallback((g,p={})=>{if(La(f.current,kv),!f.current)return;if(typeof g=="number"){s.go(g);return}let v=Rm(g,JSON.parse(d),c,p.relative==="path");e==null&&a!=="/"&&(v.pathname=v.pathname==="/"?a:js([a,v.pathname])),(p.replace?s.replace:s.push)(v,p.state,p)},[a,s,d,c,e])}var Sw=y.createContext(null);function Nw(e){let a=y.useContext(qa).outlet;return y.useMemo(()=>a&&y.createElement(Sw.Provider,{value:e},a),[a,e])}function ww(){let{matches:e}=y.useContext(qa),a=e[e.length-1];return a?a.params:{}}function Yi(e,{relative:a}={}){let{matches:s}=y.useContext(qa),{pathname:l}=aa(),c=JSON.stringify(Om(s));return y.useMemo(()=>Rm(e,JSON.parse(c),l,a==="path"),[e,c,l,a])}function jw(e,a){return Lv(e,a)}function Lv(e,a,s,l,c){Xt(Ml(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=y.useContext(Ba),{matches:f}=y.useContext(qa),h=f[f.length-1],g=h?h.params:{},p=h?h.pathname:"/",v=h?h.pathnameBase:"/",x=h&&h.route;{let T=x&&x.path||"";Bv(p,!x||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let N=aa(),q;if(a){let T=typeof a=="string"?Dl(a):a;Xt(v==="/"||T.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${T.pathname}" was given in the \`location\` prop.`),q=T}else q=N;let j=q.pathname||"/",_=j;if(v!=="/"){let T=v.replace(/^\//,"").split("/");_="/"+j.replace(/^\//,"").split("/").slice(T.length).join("/")}let C=Rv(e,{pathname:_});La(x||C!=null,`No routes matched location "${q.pathname}${q.search}${q.hash}" `),La(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${q.pathname}${q.search}${q.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=Ow(C&&C.map(T=>Object.assign({},T,{params:Object.assign({},g,T.params),pathname:js([v,d.encodeLocation?d.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?v:js([v,d.encodeLocation?d.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),f,s,l,c);return a&&B?y.createElement(Qi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...q},navigationType:"POP"}},B):B}function _w(){let e=Mw(),a=pw(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,l="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:l},d={padding:"2px 4px",backgroundColor:l},f=null;return console.error("Error handled by React Router default ErrorBoundary:",e),f=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:d},"ErrorBoundary")," or"," ",y.createElement("code",{style:d},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},a),s?y.createElement("pre",{style:c},s):null,f)}var Ew=y.createElement(_w,null),Aw=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,a){return a.location!==e.location||a.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:a.error,location:a.location,revalidation:e.revalidation||a.revalidation}}componentDidCatch(e,a){this.props.unstable_onError?this.props.unstable_onError(e,a):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?y.createElement(qa.Provider,{value:this.props.routeContext},y.createElement(Tm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Cw({routeContext:e,match:a,children:s}){let l=y.useContext(zl);return l&&l.static&&l.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=a.route.id),y.createElement(qa.Provider,{value:e},s)}function Ow(e,a=[],s=null,l=null,c=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(a.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let d=e,f=s?.errors;if(f!=null){let p=d.findIndex(v=>v.route.id&&f?.[v.route.id]!==void 0);Xt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),d=d.slice(0,Math.min(d.length,p+1))}let h=!1,g=-1;if(s)for(let p=0;p<d.length;p++){let v=d[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=p),v.route.id){let{loaderData:x,errors:N}=s,q=v.route.loader&&!x.hasOwnProperty(v.route.id)&&(!N||N[v.route.id]===void 0);if(v.route.lazy||q){h=!0,g>=0?d=d.slice(0,g+1):d=[d[0]];break}}}return d.reduceRight((p,v,x)=>{let N,q=!1,j=null,_=null;s&&(N=f&&v.route.id?f[v.route.id]:void 0,j=v.route.errorElement||Ew,h&&(g<0&&x===0?(Bv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),q=!0,_=null):g===x&&(q=!0,_=v.route.hydrateFallbackElement||null)));let C=a.concat(d.slice(0,x+1)),B=()=>{let T;return N?T=j:q?T=_:v.route.Component?T=y.createElement(v.route.Component,null):v.route.element?T=v.route.element:T=p,y.createElement(Cw,{match:v,routeContext:{outlet:p,matches:C,isDataRoute:s!=null},children:T})};return s&&(v.route.ErrorBoundary||v.route.errorElement||x===0)?y.createElement(Aw,{location:s.location,revalidation:s.revalidation,component:j,error:N,children:B(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:l}):B()},null)}function Dm(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rw(e){let a=y.useContext(zl);return Xt(a,Dm(e)),a}function Tw(e){let a=y.useContext(Gc);return Xt(a,Dm(e)),a}function Dw(e){let a=y.useContext(qa);return Xt(a,Dm(e)),a}function zm(e){let a=Dw(e),s=a.matches[a.matches.length-1];return Xt(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function zw(){return zm("useRouteId")}function Mw(){let e=y.useContext(Tm),a=Tw("useRouteError"),s=zm("useRouteError");return e!==void 0?e:a.errors?.[s]}function kw(){let{router:e}=Rw("useNavigate"),a=zm("useNavigate"),s=y.useRef(!1);return Uv(()=>{s.current=!0}),y.useCallback(async(c,d={})=>{La(s.current,kv),s.current&&(typeof c=="number"?e.navigate(c):await e.navigate(c,{fromRouteId:a,...d}))},[e,a])}var Jy={};function Bv(e,a,s){!a&&!Jy[e]&&(Jy[e]=!0,La(!1,s))}y.memo(Uw);function Uw({routes:e,future:a,state:s,unstable_onError:l}){return Lv(e,void 0,s,l,a)}function ar({to:e,replace:a,state:s,relative:l}){Xt(Ml(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=y.useContext(Ba);La(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=y.useContext(qa),{pathname:f}=aa(),h=Lr(),g=Rm(e,Om(d),f,l==="path"),p=JSON.stringify(g);return y.useEffect(()=>{h(JSON.parse(p),{replace:a,state:s,relative:l})},[h,p,l,a,s]),null}function qv(e){return Nw(e.context)}function an(e){Xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Lw({basename:e="/",children:a=null,location:s,navigationType:l="POP",navigator:c,static:d=!1}){Xt(!Ml(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),h=y.useMemo(()=>({basename:f,navigator:c,static:d,future:{}}),[f,c,d]);typeof s=="string"&&(s=Dl(s));let{pathname:g="/",search:p="",hash:v="",state:x=null,key:N="default"}=s,q=y.useMemo(()=>{let j=_s(g,f);return j==null?null:{location:{pathname:j,search:p,hash:v,state:x,key:N},navigationType:l}},[f,g,p,v,x,N,l]);return La(q!=null,`<Router basename="${f}"> is not able to match the URL "${g}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),q==null?null:y.createElement(Ba.Provider,{value:h},y.createElement(Qi.Provider,{children:a,value:q}))}function Bw({children:e,location:a}){return jw(Wf(e),a)}function Wf(e,a=[]){let s=[];return y.Children.forEach(e,(l,c)=>{if(!y.isValidElement(l))return;let d=[...a,c];if(l.type===y.Fragment){s.push.apply(s,Wf(l.props.children,d));return}Xt(l.type===an,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xt(!l.props.index||!l.props.children,"An index route cannot have child routes.");let f={id:l.props.id||d.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,middleware:l.props.middleware,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(f.children=Wf(l.props.children,d)),s.push(f)}),s}var _c="get",Ec="application/x-www-form-urlencoded";function Pc(e){return e!=null&&typeof e.tagName=="string"}function qw(e){return Pc(e)&&e.tagName.toLowerCase()==="button"}function Iw(e){return Pc(e)&&e.tagName.toLowerCase()==="form"}function $w(e){return Pc(e)&&e.tagName.toLowerCase()==="input"}function Fw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Hw(e,a){return e.button===0&&(!a||a==="_self")&&!Fw(e)}function em(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((a,s)=>{let l=e[s];return a.concat(Array.isArray(l)?l.map(c=>[s,c]):[[s,l]])},[]))}function Vw(e,a){let s=em(e);return a&&a.forEach((l,c)=>{s.has(c)||a.getAll(c).forEach(d=>{s.append(c,d)})}),s}var gc=null;function Zw(){if(gc===null)try{new FormData(document.createElement("form"),0),gc=!1}catch{gc=!0}return gc}var Gw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wf(e){return e!=null&&!Gw.has(e)?(La(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ec}"`),null):e}function Pw(e,a){let s,l,c,d,f;if(Iw(e)){let h=e.getAttribute("action");l=h?_s(h,a):null,s=e.getAttribute("method")||_c,c=wf(e.getAttribute("enctype"))||Ec,d=new FormData(e)}else if(qw(e)||$w(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=e.getAttribute("formaction")||h.getAttribute("action");if(l=g?_s(g,a):null,s=e.getAttribute("formmethod")||h.getAttribute("method")||_c,c=wf(e.getAttribute("formenctype"))||wf(h.getAttribute("enctype"))||Ec,d=new FormData(h,e),!Zw()){let{name:p,type:v,value:x}=e;if(v==="image"){let N=p?`${p}.`:"";d.append(`${N}x`,"0"),d.append(`${N}y`,"0")}else p&&d.append(p,x)}}else{if(Pc(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=_c,l=null,c=Ec,f=e}return d&&c==="text/plain"&&(f=d,d=void 0),{action:l,method:s.toLowerCase(),encType:c,formData:d,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Mm(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function Qw(e,a,s){let l=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return l.pathname==="/"?l.pathname=`_root.${s}`:a&&_s(l.pathname,a)==="/"?l.pathname=`${a.replace(/\/$/,"")}/_root.${s}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${s}`,l}async function Yw(e,a){if(e.id in a)return a[e.id];try{let s=await import(e.module);return a[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Kw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Xw(e,a,s){let l=await Promise.all(e.map(async c=>{let d=a.routes[c.route.id];if(d){let f=await Yw(d,s);return f.links?f.links():[]}return[]}));return tj(l.flat(1).filter(Kw).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Wy(e,a,s,l,c,d){let f=(g,p)=>s[p]?g.route.id!==s[p].route.id:!0,h=(g,p)=>s[p].pathname!==g.pathname||s[p].route.path?.endsWith("*")&&s[p].params["*"]!==g.params["*"];return d==="assets"?a.filter((g,p)=>f(g,p)||h(g,p)):d==="data"?a.filter((g,p)=>{let v=l.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(f(g,p)||h(g,p))return!0;if(g.route.shouldRevalidate){let x=g.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function Jw(e,a,{includeHydrateFallback:s}={}){return Ww(e.map(l=>{let c=a.routes[l.route.id];if(!c)return[];let d=[c.module];return c.clientActionModule&&(d=d.concat(c.clientActionModule)),c.clientLoaderModule&&(d=d.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(d=d.concat(c.hydrateFallbackModule)),c.imports&&(d=d.concat(c.imports)),d}).flat(1))}function Ww(e){return[...new Set(e)]}function ej(e){let a={},s=Object.keys(e).sort();for(let l of s)a[l]=e[l];return a}function tj(e,a){let s=new Set;return new Set(a),e.reduce((l,c)=>{let d=JSON.stringify(ej(c));return s.has(d)||(s.add(d),l.push({key:d,link:c})),l},[])}function Iv(){let e=y.useContext(zl);return Mm(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function nj(){let e=y.useContext(Gc);return Mm(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var km=y.createContext(void 0);km.displayName="FrameworkContext";function $v(){let e=y.useContext(km);return Mm(e,"You must render this element inside a <HydratedRouter> element"),e}function aj(e,a){let s=y.useContext(km),[l,c]=y.useState(!1),[d,f]=y.useState(!1),{onFocus:h,onBlur:g,onMouseEnter:p,onMouseLeave:v,onTouchStart:x}=a,N=y.useRef(null);y.useEffect(()=>{if(e==="render"&&f(!0),e==="viewport"){let _=B=>{B.forEach(T=>{f(T.isIntersecting)})},C=new IntersectionObserver(_,{threshold:.5});return N.current&&C.observe(N.current),()=>{C.disconnect()}}},[e]),y.useEffect(()=>{if(l){let _=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(_)}}},[l]);let q=()=>{c(!0)},j=()=>{c(!1),f(!1)};return s?e!=="intent"?[d,N,{}]:[d,N,{onFocus:Ti(h,q),onBlur:Ti(g,j),onMouseEnter:Ti(p,q),onMouseLeave:Ti(v,j),onTouchStart:Ti(x,q)}]:[!1,N,{}]}function Ti(e,a){return s=>{e&&e(s),s.defaultPrevented||a(s)}}function sj({page:e,...a}){let{router:s}=Iv(),l=y.useMemo(()=>Rv(s.routes,e,s.basename),[s.routes,e,s.basename]);return l?y.createElement(lj,{page:e,matches:l,...a}):null}function rj(e){let{manifest:a,routeModules:s}=$v(),[l,c]=y.useState([]);return y.useEffect(()=>{let d=!1;return Xw(e,a,s).then(f=>{d||c(f)}),()=>{d=!0}},[e,a,s]),l}function lj({page:e,matches:a,...s}){let l=aa(),{manifest:c,routeModules:d}=$v(),{basename:f}=Iv(),{loaderData:h,matches:g}=nj(),p=y.useMemo(()=>Wy(e,a,g,c,l,"data"),[e,a,g,c,l]),v=y.useMemo(()=>Wy(e,a,g,c,l,"assets"),[e,a,g,c,l]),x=y.useMemo(()=>{if(e===l.pathname+l.search+l.hash)return[];let j=new Set,_=!1;if(a.forEach(B=>{let T=c.routes[B.route.id];!T||!T.hasLoader||(!p.some(K=>K.route.id===B.route.id)&&B.route.id in h&&d[B.route.id]?.shouldRevalidate||T.hasClientLoader?_=!0:j.add(B.route.id))}),j.size===0)return[];let C=Qw(e,f,"data");return _&&j.size>0&&C.searchParams.set("_routes",a.filter(B=>j.has(B.route.id)).map(B=>B.route.id).join(",")),[C.pathname+C.search]},[f,h,l,c,p,a,e,d]),N=y.useMemo(()=>Jw(v,c),[v,c]),q=rj(v);return y.createElement(y.Fragment,null,x.map(j=>y.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...s})),N.map(j=>y.createElement("link",{key:j,rel:"modulepreload",href:j,...s})),q.map(({key:j,link:_})=>y.createElement("link",{key:j,nonce:s.nonce,..._})))}function ij(...e){return a=>{e.forEach(s=>{typeof s=="function"?s(a):s!=null&&(s.current=a)})}}var Fv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Fv&&(window.__reactRouterVersion="7.9.5")}catch{}function oj({basename:e,children:a,window:s}){let l=y.useRef();l.current==null&&(l.current=GN({window:s,v5Compat:!0}));let c=l.current,[d,f]=y.useState({action:c.action,location:c.location}),h=y.useCallback(g=>{y.startTransition(()=>f(g))},[f]);return y.useLayoutEffect(()=>c.listen(h),[c,h]),y.createElement(Lw,{basename:e,children:a,location:d.location,navigationType:d.action,navigator:c})}var Hv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rc=y.forwardRef(function({onClick:a,discover:s="render",prefetch:l="none",relative:c,reloadDocument:d,replace:f,state:h,target:g,to:p,preventScrollReset:v,viewTransition:x,...N},q){let{basename:j}=y.useContext(Ba),_=typeof p=="string"&&Hv.test(p),C,B=!1;if(typeof p=="string"&&_&&(C=p,Fv))try{let ce=new URL(window.location.href),_e=p.startsWith("//")?new URL(ce.protocol+p):new URL(p),xe=_s(_e.pathname,j);_e.origin===ce.origin&&xe!=null?p=xe+_e.search+_e.hash:B=!0}catch{La(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=vw(p,{relative:c}),[K,D,R]=aj(l,N),Z=dj(p,{replace:f,state:h,target:g,preventScrollReset:v,relative:c,viewTransition:x});function U(ce){a&&a(ce),ce.defaultPrevented||Z(ce)}let X=y.createElement("a",{...N,...R,href:C||T,onClick:B||d?a:U,ref:ij(q,D),target:g,"data-discover":!_&&s==="render"?"true":void 0});return K&&!_?y.createElement(y.Fragment,null,X,y.createElement(sj,{page:T})):X});Rc.displayName="Link";var Vv=y.forwardRef(function({"aria-current":a="page",caseSensitive:s=!1,className:l="",end:c=!1,style:d,to:f,viewTransition:h,children:g,...p},v){let x=Yi(f,{relative:p.relative}),N=aa(),q=y.useContext(Gc),{navigator:j,basename:_}=y.useContext(Ba),C=q!=null&&gj(x)&&h===!0,B=j.encodeLocation?j.encodeLocation(x).pathname:x.pathname,T=N.pathname,K=q&&q.navigation&&q.navigation.location?q.navigation.location.pathname:null;s||(T=T.toLowerCase(),K=K?K.toLowerCase():null,B=B.toLowerCase()),K&&_&&(K=_s(K,_)||K);const D=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let R=T===B||!c&&T.startsWith(B)&&T.charAt(D)==="/",Z=K!=null&&(K===B||!c&&K.startsWith(B)&&K.charAt(B.length)==="/"),U={isActive:R,isPending:Z,isTransitioning:C},X=R?a:void 0,ce;typeof l=="function"?ce=l(U):ce=[l,R?"active":null,Z?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let _e=typeof d=="function"?d(U):d;return y.createElement(Rc,{...p,"aria-current":X,className:ce,ref:v,style:_e,to:f,viewTransition:h},typeof g=="function"?g(U):g)});Vv.displayName="NavLink";var cj=y.forwardRef(({discover:e="render",fetcherKey:a,navigate:s,reloadDocument:l,replace:c,state:d,method:f=_c,action:h,onSubmit:g,relative:p,preventScrollReset:v,viewTransition:x,...N},q)=>{let j=hj(),_=pj(h,{relative:p}),C=f.toLowerCase()==="get"?"get":"post",B=typeof h=="string"&&Hv.test(h),T=K=>{if(g&&g(K),K.defaultPrevented)return;K.preventDefault();let D=K.nativeEvent.submitter,R=D?.getAttribute("formmethod")||f;j(D||K.currentTarget,{fetcherKey:a,method:R,navigate:s,replace:c,state:d,relative:p,preventScrollReset:v,viewTransition:x})};return y.createElement("form",{ref:q,method:C,action:_,onSubmit:l?g:T,...N,"data-discover":!B&&e==="render"?"true":void 0})});cj.displayName="Form";function uj(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zv(e){let a=y.useContext(zl);return Xt(a,uj(e)),a}function dj(e,{target:a,replace:s,state:l,preventScrollReset:c,relative:d,viewTransition:f}={}){let h=Lr(),g=aa(),p=Yi(e,{relative:d});return y.useCallback(v=>{if(Hw(v,a)){v.preventDefault();let x=s!==void 0?s:Ii(g)===Ii(p);h(e,{replace:x,state:l,preventScrollReset:c,relative:d,viewTransition:f})}},[g,h,p,s,l,a,e,c,d,f])}function Gv(e){La(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=y.useRef(em(e)),s=y.useRef(!1),l=aa(),c=y.useMemo(()=>Vw(l.search,s.current?null:a.current),[l.search]),d=Lr(),f=y.useCallback((h,g)=>{const p=em(typeof h=="function"?h(new URLSearchParams(c)):h);s.current=!0,d("?"+p,g)},[d,c]);return[c,f]}var fj=0,mj=()=>`__${String(++fj)}__`;function hj(){let{router:e}=Zv("useSubmit"),{basename:a}=y.useContext(Ba),s=zw();return y.useCallback(async(l,c={})=>{let{action:d,method:f,encType:h,formData:g,body:p}=Pw(l,a);if(c.navigate===!1){let v=c.fetcherKey||mj();await e.fetch(v,s,c.action||d,{preventScrollReset:c.preventScrollReset,formData:g,body:p,formMethod:c.method||f,formEncType:c.encType||h,flushSync:c.flushSync})}else await e.navigate(c.action||d,{preventScrollReset:c.preventScrollReset,formData:g,body:p,formMethod:c.method||f,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:s,flushSync:c.flushSync,viewTransition:c.viewTransition})},[e,a,s])}function pj(e,{relative:a}={}){let{basename:s}=y.useContext(Ba),l=y.useContext(qa);Xt(l,"useFormAction must be used inside a RouteContext");let[c]=l.matches.slice(-1),d={...Yi(e||".",{relative:a})},f=aa();if(e==null){d.search=f.search;let h=new URLSearchParams(d.search),g=h.getAll("index");if(g.some(v=>v==="")){h.delete("index"),g.filter(x=>x).forEach(x=>h.append("index",x));let v=h.toString();d.search=v?`?${v}`:""}}return(!e||e===".")&&c.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(d.pathname=d.pathname==="/"?s:js([s,d.pathname])),Ii(d)}function gj(e,{relative:a}={}){let s=y.useContext(Mv);Xt(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=Zv("useViewTransitionState"),c=Yi(e,{relative:a});if(!s.isTransitioning)return!1;let d=_s(s.currentLocation.pathname,l)||s.currentLocation.pathname,f=_s(s.nextLocation.pathname,l)||s.nextLocation.pathname;return $i(c.pathname,f)!=null||$i(c.pathname,d)!=null}var kl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},yj={setTimeout:(e,a)=>setTimeout(e,a),clearTimeout:e=>clearTimeout(e),setInterval:(e,a)=>setInterval(e,a),clearInterval:e=>clearInterval(e)},bj=class{#e=yj;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,a){return this.#e.setTimeout(e,a)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,a){return this.#e.setInterval(e,a)}clearInterval(e){this.#e.clearInterval(e)}},Ar=new bj;function vj(e){setTimeout(e,0)}var Tr=typeof window>"u"||"Deno"in globalThis;function na(){}function xj(e,a){return typeof e=="function"?e(a):e}function tm(e){return typeof e=="number"&&e>=0&&e!==1/0}function Pv(e,a){return Math.max(e+(a||0)-Date.now(),0)}function sr(e,a){return typeof e=="function"?e(a):e}function Ma(e,a){return typeof e=="function"?e(a):e}function eb(e,a){const{type:s="all",exact:l,fetchStatus:c,predicate:d,queryKey:f,stale:h}=e;if(f){if(l){if(a.queryHash!==Um(f,a.options))return!1}else if(!Fi(a.queryKey,f))return!1}if(s!=="all"){const g=a.isActive();if(s==="active"&&!g||s==="inactive"&&g)return!1}return!(typeof h=="boolean"&&a.isStale()!==h||c&&c!==a.state.fetchStatus||d&&!d(a))}function tb(e,a){const{exact:s,status:l,predicate:c,mutationKey:d}=e;if(d){if(!a.options.mutationKey)return!1;if(s){if(Dr(a.options.mutationKey)!==Dr(d))return!1}else if(!Fi(a.options.mutationKey,d))return!1}return!(l&&a.state.status!==l||c&&!c(a))}function Um(e,a){return(a?.queryKeyHashFn||Dr)(e)}function Dr(e){return JSON.stringify(e,(a,s)=>nm(s)?Object.keys(s).sort().reduce((l,c)=>(l[c]=s[c],l),{}):s)}function Fi(e,a){return e===a?!0:typeof e!=typeof a?!1:e&&a&&typeof e=="object"&&typeof a=="object"?Object.keys(a).every(s=>Fi(e[s],a[s])):!1}var Sj=Object.prototype.hasOwnProperty;function Qv(e,a){if(e===a)return e;const s=nb(e)&&nb(a);if(!s&&!(nm(e)&&nm(a)))return a;const c=(s?e:Object.keys(e)).length,d=s?a:Object.keys(a),f=d.length,h=s?new Array(f):{};let g=0;for(let p=0;p<f;p++){const v=s?p:d[p],x=e[v],N=a[v];if(x===N){h[v]=x,(s?p<c:Sj.call(e,v))&&g++;continue}if(x===null||N===null||typeof x!="object"||typeof N!="object"){h[v]=N;continue}const q=Qv(x,N);h[v]=q,q===x&&g++}return c===f&&g===c?e:h}function Tc(e,a){if(!a||Object.keys(e).length!==Object.keys(a).length)return!1;for(const s in e)if(e[s]!==a[s])return!1;return!0}function nb(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function nm(e){if(!ab(e))return!1;const a=e.constructor;if(a===void 0)return!0;const s=a.prototype;return!(!ab(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ab(e){return Object.prototype.toString.call(e)==="[object Object]"}function Nj(e){return new Promise(a=>{Ar.setTimeout(a,e)})}function am(e,a,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,a):s.structuralSharing!==!1?Qv(e,a):a}function wj(e,a,s=0){const l=[...e,a];return s&&l.length>s?l.slice(1):l}function jj(e,a,s=0){const l=[a,...e];return s&&l.length>s?l.slice(0,-1):l}var Lm=Symbol();function Yv(e,a){return!e.queryFn&&a?.initialPromise?()=>a.initialPromise:!e.queryFn||e.queryFn===Lm?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Kv(e,a){return typeof e=="function"?e(...a):!!e}var _j=class extends kl{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Tr&&window.addEventListener){const a=()=>e();return window.addEventListener("visibilitychange",a,!1),()=>{window.removeEventListener("visibilitychange",a)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(a=>{a(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Bm=new _j;function sm(){let e,a;const s=new Promise((c,d)=>{e=c,a=d});s.status="pending",s.catch(()=>{});function l(c){Object.assign(s,c),delete s.resolve,delete s.reject}return s.resolve=c=>{l({status:"fulfilled",value:c}),e(c)},s.reject=c=>{l({status:"rejected",reason:c}),a(c)},s}var Ej=vj;function Aj(){let e=[],a=0,s=h=>{h()},l=h=>{h()},c=Ej;const d=h=>{a?e.push(h):c(()=>{s(h)})},f=()=>{const h=e;e=[],h.length&&c(()=>{l(()=>{h.forEach(g=>{s(g)})})})};return{batch:h=>{let g;a++;try{g=h()}finally{a--,a||f()}return g},batchCalls:h=>(...g)=>{d(()=>{h(...g)})},schedule:d,setNotifyFunction:h=>{s=h},setBatchNotifyFunction:h=>{l=h},setScheduler:h=>{c=h}}}var Tn=Aj(),Cj=class extends kl{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Tr&&window.addEventListener){const a=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",a,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#e}},Dc=new Cj;function Oj(e){return Math.min(1e3*2**e,3e4)}function Xv(e){return(e??"online")==="online"?Dc.isOnline():!0}var rm=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Jv(e){let a=!1,s=0,l;const c=sm(),d=()=>c.status!=="pending",f=_=>{if(!d()){const C=new rm(_);N(C),e.onCancel?.(C)}},h=()=>{a=!0},g=()=>{a=!1},p=()=>Bm.isFocused()&&(e.networkMode==="always"||Dc.isOnline())&&e.canRun(),v=()=>Xv(e.networkMode)&&e.canRun(),x=_=>{d()||(l?.(),c.resolve(_))},N=_=>{d()||(l?.(),c.reject(_))},q=()=>new Promise(_=>{l=C=>{(d()||p())&&_(C)},e.onPause?.()}).then(()=>{l=void 0,d()||e.onContinue?.()}),j=()=>{if(d())return;let _;const C=s===0?e.initialPromise:void 0;try{_=C??e.fn()}catch(B){_=Promise.reject(B)}Promise.resolve(_).then(x).catch(B=>{if(d())return;const T=e.retry??(Tr?0:3),K=e.retryDelay??Oj,D=typeof K=="function"?K(s,B):K,R=T===!0||typeof T=="number"&&s<T||typeof T=="function"&&T(s,B);if(a||!R){N(B);return}s++,e.onFail?.(s,B),Nj(D).then(()=>p()?void 0:q()).then(()=>{a?N(B):j()})})};return{promise:c,status:()=>c.status,cancel:f,continue:()=>(l?.(),c),cancelRetry:h,continueRetry:g,canStart:v,start:()=>(v()?j():q().then(j),c)}}var Wv=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),tm(this.gcTime)&&(this.#e=Ar.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Tr?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ar.clearTimeout(this.#e),this.#e=void 0)}},Rj=class extends Wv{#e;#t;#n;#s;#a;#l;#i;constructor(e){super(),this.#i=!1,this.#l=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=rb(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(e){if(this.options={...this.#l,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const a=rb(this.options);a.data!==void 0&&(this.setState(sb(a.data,a.dataUpdatedAt)),this.#e=a)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,a){const s=am(this.state.data,e,this.options);return this.#r({data:s,type:"success",dataUpdatedAt:a?.updatedAt,manual:a?.manual}),s}setState(e,a){this.#r({type:"setState",state:e,setStateOptions:a})}cancel(e){const a=this.#a?.promise;return this.#a?.cancel(e),a?a.then(na).catch(na):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Ma(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Lm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>sr(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Pv(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(a=>a.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(a=>a.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(a=>a!==e),this.observers.length||(this.#a&&(this.#i?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}async fetch(e,a){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&a?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(g=>g.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,l=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(this.#i=!0,s.signal)})},c=()=>{const h=Yv(this.options,a),p=(()=>{const v={client:this.#s,queryKey:this.queryKey,meta:this.meta};return l(v),v})();return this.#i=!1,this.options.persister?this.options.persister(h,p,this):h(p)},f=(()=>{const h={fetchOptions:a,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:c};return l(h),h})();this.options.behavior?.onFetch(f,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==f.fetchOptions?.meta)&&this.#r({type:"fetch",meta:f.fetchOptions?.meta}),this.#a=Jv({initialPromise:a?.initialPromise,fn:f.fetchFn,onCancel:h=>{h instanceof rm&&h.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(h,g)=>{this.#r({type:"failed",failureCount:h,error:g})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0});try{const h=await this.#a.start();if(h===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(h),this.#n.config.onSuccess?.(h,this),this.#n.config.onSettled?.(h,this.state.error,this),h}catch(h){if(h instanceof rm){if(h.silent)return this.#a.promise;if(h.revert){if(this.state.data===void 0)throw h;return this.state.data}}throw this.#r({type:"error",error:h}),this.#n.config.onError?.(h,this),this.#n.config.onSettled?.(this.state.data,h,this),h}finally{this.scheduleGc()}}#r(e){const a=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...ex(s.data,this.options),fetchMeta:e.meta??null};case"success":const l={...s,...sb(e.data,e.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?l:void 0,l;case"error":const c=e.error;return{...s,error:c,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=a(this.state),Tn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function ex(e,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Xv(a.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function sb(e,a){return{data:e,dataUpdatedAt:a??Date.now(),error:null,isInvalidated:!1,status:"success"}}function rb(e){const a=typeof e.initialData=="function"?e.initialData():e.initialData,s=a!==void 0,l=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:s?l??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Tj=class extends kl{constructor(e,a){super(),this.options=a,this.#e=e,this.#r=null,this.#i=sm(),this.bindMethods(),this.setOptions(a)}#e;#t=void 0;#n=void 0;#s=void 0;#a;#l;#i;#r;#p;#f;#m;#c;#u;#o;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),lb(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return lm(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return lm(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#S(),this.#t.removeObserver(this)}setOptions(e){const a=this.options,s=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ma(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),a._defaulted&&!Tc(this.options,a)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const l=this.hasListeners();l&&ib(this.#t,s,this.options,a)&&this.#d(),this.updateResult(),l&&(this.#t!==s||Ma(this.options.enabled,this.#t)!==Ma(a.enabled,this.#t)||sr(this.options.staleTime,this.#t)!==sr(a.staleTime,this.#t))&&this.#g();const c=this.#y();l&&(this.#t!==s||Ma(this.options.enabled,this.#t)!==Ma(a.enabled,this.#t)||c!==this.#o)&&this.#b(c)}getOptimisticResult(e){const a=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(a,e);return zj(this,s)&&(this.#s=s,this.#l=this.options,this.#a=this.#t.state),s}getCurrentResult(){return this.#s}trackResult(e,a){return new Proxy(e,{get:(s,l)=>(this.trackProp(l),a?.(l),l==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,l))})}trackProp(e){this.#h.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const a=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,a);return s.fetch().then(()=>this.createResult(s,a))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(e){this.#N();let a=this.#t.fetch(this.options,e);return e?.throwOnError||(a=a.catch(na)),a}#g(){this.#x();const e=sr(this.options.staleTime,this.#t);if(Tr||this.#s.isStale||!tm(e))return;const s=Pv(this.#s.dataUpdatedAt,e)+1;this.#c=Ar.setTimeout(()=>{this.#s.isStale||this.updateResult()},s)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(e){this.#S(),this.#o=e,!(Tr||Ma(this.options.enabled,this.#t)===!1||!tm(this.#o)||this.#o===0)&&(this.#u=Ar.setInterval(()=>{(this.options.refetchIntervalInBackground||Bm.isFocused())&&this.#d()},this.#o))}#v(){this.#g(),this.#b(this.#y())}#x(){this.#c&&(Ar.clearTimeout(this.#c),this.#c=void 0)}#S(){this.#u&&(Ar.clearInterval(this.#u),this.#u=void 0)}createResult(e,a){const s=this.#t,l=this.options,c=this.#s,d=this.#a,f=this.#l,g=e!==s?e.state:this.#n,{state:p}=e;let v={...p},x=!1,N;if(a._optimisticResults){const X=this.hasListeners(),ce=!X&&lb(e,a),_e=X&&ib(e,s,a,l);(ce||_e)&&(v={...v,...ex(p.data,e.options)}),a._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:q,errorUpdatedAt:j,status:_}=v;N=v.data;let C=!1;if(a.placeholderData!==void 0&&N===void 0&&_==="pending"){let X;c?.isPlaceholderData&&a.placeholderData===f?.placeholderData?(X=c.data,C=!0):X=typeof a.placeholderData=="function"?a.placeholderData(this.#m?.state.data,this.#m):a.placeholderData,X!==void 0&&(_="success",N=am(c?.data,X,a),x=!0)}if(a.select&&N!==void 0&&!C)if(c&&N===d?.data&&a.select===this.#p)N=this.#f;else try{this.#p=a.select,N=a.select(N),N=am(c?.data,N,a),this.#f=N,this.#r=null}catch(X){this.#r=X}this.#r&&(q=this.#r,N=this.#f,j=Date.now(),_="error");const B=v.fetchStatus==="fetching",T=_==="pending",K=_==="error",D=T&&B,R=N!==void 0,U={status:_,fetchStatus:v.fetchStatus,isPending:T,isSuccess:_==="success",isError:K,isInitialLoading:D,isLoading:D,data:N,dataUpdatedAt:v.dataUpdatedAt,error:q,errorUpdatedAt:j,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>g.dataUpdateCount||v.errorUpdateCount>g.errorUpdateCount,isFetching:B,isRefetching:B&&!T,isLoadingError:K&&!R,isPaused:v.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:K&&R,isStale:qm(e,a),refetch:this.refetch,promise:this.#i,isEnabled:Ma(a.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const X=xe=>{U.status==="error"?xe.reject(U.error):U.data!==void 0&&xe.resolve(U.data)},ce=()=>{const xe=this.#i=U.promise=sm();X(xe)},_e=this.#i;switch(_e.status){case"pending":e.queryHash===s.queryHash&&X(_e);break;case"fulfilled":(U.status==="error"||U.data!==_e.value)&&ce();break;case"rejected":(U.status!=="error"||U.error!==_e.reason)&&ce();break}}return U}updateResult(){const e=this.#s,a=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#l=this.options,this.#a.data!==void 0&&(this.#m=this.#t),Tc(a,e))return;this.#s=a;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:l}=this.options,c=typeof l=="function"?l():l;if(c==="all"||!c&&!this.#h.size)return!0;const d=new Set(c??this.#h);return this.options.throwOnError&&d.add("error"),Object.keys(this.#s).some(f=>{const h=f;return this.#s[h]!==e[h]&&d.has(h)})};this.#w({listeners:s()})}#N(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const a=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(a?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#w(e){Tn.batch(()=>{e.listeners&&this.listeners.forEach(a=>{a(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Dj(e,a){return Ma(a.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&a.retryOnMount===!1)}function lb(e,a){return Dj(e,a)||e.state.data!==void 0&&lm(e,a,a.refetchOnMount)}function lm(e,a,s){if(Ma(a.enabled,e)!==!1&&sr(a.staleTime,e)!=="static"){const l=typeof s=="function"?s(e):s;return l==="always"||l!==!1&&qm(e,a)}return!1}function ib(e,a,s,l){return(e!==a||Ma(l.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&qm(e,s)}function qm(e,a){return Ma(a.enabled,e)!==!1&&e.isStaleByTime(sr(a.staleTime,e))}function zj(e,a){return!Tc(e.getCurrentResult(),a)}function ob(e){return{onFetch:(a,s)=>{const l=a.options,c=a.fetchOptions?.meta?.fetchMore?.direction,d=a.state.data?.pages||[],f=a.state.data?.pageParams||[];let h={pages:[],pageParams:[]},g=0;const p=async()=>{let v=!1;const x=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(a.signal.aborted?v=!0:a.signal.addEventListener("abort",()=>{v=!0}),a.signal)})},N=Yv(a.options,a.fetchOptions),q=async(j,_,C)=>{if(v)return Promise.reject();if(_==null&&j.pages.length)return Promise.resolve(j);const T=(()=>{const Z={client:a.client,queryKey:a.queryKey,pageParam:_,direction:C?"backward":"forward",meta:a.options.meta};return x(Z),Z})(),K=await N(T),{maxPages:D}=a.options,R=C?jj:wj;return{pages:R(j.pages,K,D),pageParams:R(j.pageParams,_,D)}};if(c&&d.length){const j=c==="backward",_=j?Mj:cb,C={pages:d,pageParams:f},B=_(l,C);h=await q(C,B,j)}else{const j=e??d.length;do{const _=g===0?f[0]??l.initialPageParam:cb(l,h);if(g>0&&_==null)break;h=await q(h,_),g++}while(g<j)}return h};a.options.persister?a.fetchFn=()=>a.options.persister?.(p,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},s):a.fetchFn=p}}}function cb(e,{pages:a,pageParams:s}){const l=a.length-1;return a.length>0?e.getNextPageParam(a[l],a,s[l],s):void 0}function Mj(e,{pages:a,pageParams:s}){return a.length>0?e.getPreviousPageParam?.(a[0],a,s[0],s):void 0}var kj=class extends Wv{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||tx(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(a=>a!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const a=()=>{this.#a({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=Jv({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(d,f)=>{this.#a({type:"failed",failureCount:d,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:a,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const l=this.state.status==="pending",c=!this.#s.canStart();try{if(l)a();else{this.#a({type:"pending",variables:e,isPaused:c}),await this.#n.config.onMutate?.(e,this,s);const f=await this.options.onMutate?.(e,s);f!==this.state.context&&this.#a({type:"pending",context:f,variables:e,isPaused:c})}const d=await this.#s.start();return await this.#n.config.onSuccess?.(d,e,this.state.context,this,s),await this.options.onSuccess?.(d,e,this.state.context,s),await this.#n.config.onSettled?.(d,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(d,null,e,this.state.context,s),this.#a({type:"success",data:d}),d}catch(d){try{throw await this.#n.config.onError?.(d,e,this.state.context,this,s),await this.options.onError?.(d,e,this.state.context,s),await this.#n.config.onSettled?.(void 0,d,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,d,e,this.state.context,s),d}finally{this.#a({type:"error",error:d})}}finally{this.#n.runNext(this)}}#a(e){const a=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=a(this.state),Tn.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function tx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Uj=class extends kl{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,a,s){const l=new kj({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(a),state:s});return this.add(l),l}add(e){this.#e.add(e);const a=yc(e);if(typeof a=="string"){const s=this.#t.get(a);s?s.push(e):this.#t.set(a,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const a=yc(e);if(typeof a=="string"){const s=this.#t.get(a);if(s)if(s.length>1){const l=s.indexOf(e);l!==-1&&s.splice(l,1)}else s[0]===e&&this.#t.delete(a)}}this.notify({type:"removed",mutation:e})}canRun(e){const a=yc(e);if(typeof a=="string"){const l=this.#t.get(a)?.find(c=>c.state.status==="pending");return!l||l===e}else return!0}runNext(e){const a=yc(e);return typeof a=="string"?this.#t.get(a)?.find(l=>l!==e&&l.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Tn.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const a={exact:!0,...e};return this.getAll().find(s=>tb(a,s))}findAll(e={}){return this.getAll().filter(a=>tb(e,a))}notify(e){Tn.batch(()=>{this.listeners.forEach(a=>{a(e)})})}resumePausedMutations(){const e=this.getAll().filter(a=>a.state.isPaused);return Tn.batch(()=>Promise.all(e.map(a=>a.continue().catch(na))))}};function yc(e){return e.options.scope?.id}var Lj=class extends kl{#e;#t=void 0;#n;#s;constructor(a,s){super(),this.#e=a,this.setOptions(s),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){const s=this.options;this.options=this.#e.defaultMutationOptions(a),Tc(this.options,s)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),s?.mutationKey&&this.options.mutationKey&&Dr(s.mutationKey)!==Dr(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(a){this.#a(),this.#l(a)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#a(),this.#l()}mutate(a,s){return this.#s=s,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(a)}#a(){const a=this.#n?.state??tx();this.#t={...a,isPending:a.status==="pending",isSuccess:a.status==="success",isError:a.status==="error",isIdle:a.status==="idle",mutate:this.mutate,reset:this.reset}}#l(a){Tn.batch(()=>{if(this.#s&&this.hasListeners()){const s=this.#t.variables,l=this.#t.context,c={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};a?.type==="success"?(this.#s.onSuccess?.(a.data,s,l,c),this.#s.onSettled?.(a.data,null,s,l,c)):a?.type==="error"&&(this.#s.onError?.(a.error,s,l,c),this.#s.onSettled?.(void 0,a.error,s,l,c))}this.listeners.forEach(s=>{s(this.#t)})})}},Bj=class extends kl{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,a,s){const l=a.queryKey,c=a.queryHash??Um(l,a);let d=this.get(c);return d||(d=new Rj({client:e,queryKey:l,queryHash:c,options:e.defaultQueryOptions(a),state:s,defaultOptions:e.getQueryDefaults(l)}),this.add(d)),d}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const a=this.#e.get(e.queryHash);a&&(e.destroy(),a===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Tn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const a={exact:!0,...e};return this.getAll().find(s=>eb(a,s))}findAll(e={}){const a=this.getAll();return Object.keys(e).length>0?a.filter(s=>eb(e,s)):a}notify(e){Tn.batch(()=>{this.listeners.forEach(a=>{a(e)})})}onFocus(){Tn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Tn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},qj=class{#e;#t;#n;#s;#a;#l;#i;#r;constructor(e={}){this.#e=e.queryCache||new Bj,this.#t=e.mutationCache||new Uj,this.#n=e.defaultOptions||{},this.#s=new Map,this.#a=new Map,this.#l=0}mount(){this.#l++,this.#l===1&&(this.#i=Bm.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#r=Dc.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#l--,this.#l===0&&(this.#i?.(),this.#i=void 0,this.#r?.(),this.#r=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const a=this.defaultQueryOptions({queryKey:e});return this.#e.get(a.queryHash)?.state.data}ensureQueryData(e){const a=this.defaultQueryOptions(e),s=this.#e.build(this,a),l=s.state.data;return l===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(sr(a.staleTime,s))&&this.prefetchQuery(a),Promise.resolve(l))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:a,state:s})=>{const l=s.data;return[a,l]})}setQueryData(e,a,s){const l=this.defaultQueryOptions({queryKey:e}),d=this.#e.get(l.queryHash)?.state.data,f=xj(a,d);if(f!==void 0)return this.#e.build(this,l).setData(f,{...s,manual:!0})}setQueriesData(e,a,s){return Tn.batch(()=>this.#e.findAll(e).map(({queryKey:l})=>[l,this.setQueryData(l,a,s)]))}getQueryState(e){const a=this.defaultQueryOptions({queryKey:e});return this.#e.get(a.queryHash)?.state}removeQueries(e){const a=this.#e;Tn.batch(()=>{a.findAll(e).forEach(s=>{a.remove(s)})})}resetQueries(e,a){const s=this.#e;return Tn.batch(()=>(s.findAll(e).forEach(l=>{l.reset()}),this.refetchQueries({type:"active",...e},a)))}cancelQueries(e,a={}){const s={revert:!0,...a},l=Tn.batch(()=>this.#e.findAll(e).map(c=>c.cancel(s)));return Promise.all(l).then(na).catch(na)}invalidateQueries(e,a={}){return Tn.batch(()=>(this.#e.findAll(e).forEach(s=>{s.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},a)))}refetchQueries(e,a={}){const s={...a,cancelRefetch:a.cancelRefetch??!0},l=Tn.batch(()=>this.#e.findAll(e).filter(c=>!c.isDisabled()&&!c.isStatic()).map(c=>{let d=c.fetch(void 0,s);return s.throwOnError||(d=d.catch(na)),c.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(l).then(na)}fetchQuery(e){const a=this.defaultQueryOptions(e);a.retry===void 0&&(a.retry=!1);const s=this.#e.build(this,a);return s.isStaleByTime(sr(a.staleTime,s))?s.fetch(a):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(na).catch(na)}fetchInfiniteQuery(e){return e.behavior=ob(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(na).catch(na)}ensureInfiniteQueryData(e){return e.behavior=ob(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Dc.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,a){this.#s.set(Dr(e),{queryKey:e,defaultOptions:a})}getQueryDefaults(e){const a=[...this.#s.values()],s={};return a.forEach(l=>{Fi(e,l.queryKey)&&Object.assign(s,l.defaultOptions)}),s}setMutationDefaults(e,a){this.#a.set(Dr(e),{mutationKey:e,defaultOptions:a})}getMutationDefaults(e){const a=[...this.#a.values()],s={};return a.forEach(l=>{Fi(e,l.mutationKey)&&Object.assign(s,l.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const a={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return a.queryHash||(a.queryHash=Um(a.queryKey,a)),a.refetchOnReconnect===void 0&&(a.refetchOnReconnect=a.networkMode!=="always"),a.throwOnError===void 0&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===Lm&&(a.enabled=!1),a}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},nx=y.createContext(void 0),Im=e=>{const a=y.useContext(nx);if(!a)throw new Error("No QueryClient set, use QueryClientProvider to set one");return a},Ij=({client:e,children:a})=>(y.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(nx.Provider,{value:e,children:a})),ax=y.createContext(!1),$j=()=>y.useContext(ax);ax.Provider;function Fj(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Hj=y.createContext(Fj()),Vj=()=>y.useContext(Hj),Zj=(e,a)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(a.isReset()||(e.retryOnMount=!1))},Gj=e=>{y.useEffect(()=>{e.clearReset()},[e])},Pj=({result:e,errorResetBoundary:a,throwOnError:s,query:l,suspense:c})=>e.isError&&!a.isReset()&&!e.isFetching&&l&&(c&&e.data===void 0||Kv(s,[e.error,l])),Qj=e=>{if(e.suspense){const s=c=>c==="static"?c:Math.max(c??1e3,1e3),l=e.staleTime;e.staleTime=typeof l=="function"?(...c)=>s(l(...c)):s(l),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Yj=(e,a)=>e.isLoading&&e.isFetching&&!a,Kj=(e,a)=>e?.suspense&&a.isPending,ub=(e,a,s)=>a.fetchOptimistic(e).catch(()=>{s.clearReset()});function Xj(e,a,s){const l=$j(),c=Vj(),d=Im(),f=d.defaultQueryOptions(e);d.getDefaultOptions().queries?._experimental_beforeQuery?.(f),f._optimisticResults=l?"isRestoring":"optimistic",Qj(f),Zj(f,c),Gj(c);const h=!d.getQueryCache().get(f.queryHash),[g]=y.useState(()=>new a(d,f)),p=g.getOptimisticResult(f),v=!l&&e.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(x=>{const N=v?g.subscribe(Tn.batchCalls(x)):na;return g.updateResult(),N},[g,v]),()=>g.getCurrentResult(),()=>g.getCurrentResult()),y.useEffect(()=>{g.setOptions(f)},[f,g]),Kj(f,p))throw ub(f,g,c);if(Pj({result:p,errorResetBoundary:c,throwOnError:f.throwOnError,query:d.getQueryCache().get(f.queryHash),suspense:f.suspense}))throw p.error;return d.getDefaultOptions().queries?._experimental_afterQuery?.(f,p),f.experimental_prefetchInRender&&!Tr&&Yj(p,l)&&(h?ub(f,g,c):d.getQueryCache().get(f.queryHash)?.promise)?.catch(na).finally(()=>{g.updateResult()}),f.notifyOnChangeProps?p:g.trackResult(p)}function zr(e,a){return Xj(e,Tj)}function Jj(e,a){const s=Im(),[l]=y.useState(()=>new Lj(s,e));y.useEffect(()=>{l.setOptions(e)},[l,e]);const c=y.useSyncExternalStore(y.useCallback(f=>l.subscribe(Tn.batchCalls(f)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),d=y.useCallback((f,h)=>{l.mutate(f,h).catch(na)},[l]);if(c.error&&Kv(l.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:d,mutateAsync:c.mutate}}var Ki=e=>e.type==="checkbox",Cr=e=>e instanceof Date,fa=e=>e==null;const sx=e=>typeof e=="object";var _n=e=>!fa(e)&&!Array.isArray(e)&&sx(e)&&!Cr(e),Wj=e=>_n(e)&&e.target?Ki(e.target)?e.target.checked:e.target.value:e,e_=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,t_=(e,a)=>e.has(e_(a)),n_=e=>{const a=e.constructor&&e.constructor.prototype;return _n(a)&&a.hasOwnProperty("isPrototypeOf")},$m=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Kt(e){let a;const s=Array.isArray(e),l=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)a=new Date(e);else if(!($m&&(e instanceof Blob||l))&&(s||_n(e)))if(a=s?[]:Object.create(Object.getPrototypeOf(e)),!s&&!n_(e))a=e;else for(const c in e)e.hasOwnProperty(c)&&(a[c]=Kt(e[c]));else return e;return a}var Qc=e=>/^\w*$/.test(e),Gt=e=>e===void 0,Yc=e=>Array.isArray(e)?e.filter(Boolean):[],Fm=e=>Yc(e.replace(/["|']|\]/g,"").split(/\.|\[/)),qe=(e,a,s)=>{if(!a||!_n(e))return s;const l=(Qc(a)?[a]:Fm(a)).reduce((c,d)=>fa(c)?c:c[d],e);return Gt(l)||l===e?Gt(e[a])?s:e[a]:l},ls=e=>typeof e=="boolean",Mt=(e,a,s)=>{let l=-1;const c=Qc(a)?[a]:Fm(a),d=c.length,f=d-1;for(;++l<d;){const h=c[l];let g=s;if(l!==f){const p=e[h];g=_n(p)||Array.isArray(p)?p:isNaN(+c[l+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;e[h]=g,e=e[h]}};const db={BLUR:"blur",FOCUS_OUT:"focusout"},ka={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ws={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},rx=ht.createContext(null);rx.displayName="HookFormContext";const lx=()=>ht.useContext(rx);var a_=(e,a,s,l=!0)=>{const c={defaultValues:a._defaultValues};for(const d in e)Object.defineProperty(c,d,{get:()=>{const f=d;return a._proxyFormState[f]!==ka.all&&(a._proxyFormState[f]=!l||ka.all),e[f]}});return c};const Hm=typeof window<"u"?ht.useLayoutEffect:ht.useEffect;var ja=e=>typeof e=="string",im=(e,a,s,l,c)=>ja(e)?(l&&a.watch.add(e),qe(s,e,c)):Array.isArray(e)?e.map(d=>(l&&a.watch.add(d),qe(s,d))):(l&&(a.watchAll=!0),s),om=e=>fa(e)||!sx(e);function Qa(e,a,s=new WeakSet){if(om(e)||om(a))return e===a;if(Cr(e)&&Cr(a))return e.getTime()===a.getTime();const l=Object.keys(e),c=Object.keys(a);if(l.length!==c.length)return!1;if(s.has(e)||s.has(a))return!0;s.add(e),s.add(a);for(const d of l){const f=e[d];if(!c.includes(d))return!1;if(d!=="ref"){const h=a[d];if(Cr(f)&&Cr(h)||_n(f)&&_n(h)||Array.isArray(f)&&Array.isArray(h)?!Qa(f,h,s):f!==h)return!1}}return!0}function Di(e){const a=lx(),{control:s=a.control,name:l,defaultValue:c,disabled:d,exact:f,compute:h}=e||{},g=ht.useRef(c),p=ht.useRef(h),v=ht.useRef(void 0),x=ht.useRef(s),N=ht.useRef(l);p.current=h;const[q,j]=ht.useState(()=>{const D=s._getWatch(l,g.current);return p.current?p.current(D):D}),_=ht.useCallback(D=>{const R=im(l,s._names,D||s._formValues,!1,g.current);return p.current?p.current(R):R},[s._formValues,s._names,l]),C=ht.useCallback(D=>{if(!d){const R=im(l,s._names,D||s._formValues,!1,g.current);if(p.current){const Z=p.current(R);Qa(Z,v.current)||(j(Z),v.current=Z)}else j(R)}},[s._formValues,s._names,d,l]);Hm(()=>((x.current!==s||!Qa(N.current,l))&&(x.current=s,N.current=l,C()),s._subscribe({name:l,formState:{values:!0},exact:f,callback:D=>{C(D.values)}})),[s,f,l,C]),ht.useEffect(()=>s._removeUnmounted());const B=x.current!==s,T=N.current,K=ht.useMemo(()=>{if(d)return null;const D=!B&&!Qa(T,l);return B||D?_():null},[d,B,l,T,_]);return K!==null?K:q}var Vm=(e,a,s,l,c)=>a?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[l]:c||!0}}:{},ma=e=>Array.isArray(e)?e:[e],fb=()=>{let e=[];return{get observers(){return e},next:c=>{for(const d of e)d.next&&d.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(d=>d!==c)}}),unsubscribe:()=>{e=[]}}};function ix(e,a){const s={};for(const l in e)if(e.hasOwnProperty(l)){const c=e[l],d=a[l];if(c&&_n(c)&&d){const f=ix(c,d);_n(f)&&(s[l]=f)}else e[l]&&(s[l]=d)}return s}var Kn=e=>_n(e)&&!Object.keys(e).length,Zm=e=>e.type==="file",Ya=e=>typeof e=="function",zc=e=>{if(!$m)return!1;const a=e?e.ownerDocument:0;return e instanceof(a&&a.defaultView?a.defaultView.HTMLElement:HTMLElement)},ox=e=>e.type==="select-multiple",Gm=e=>e.type==="radio",s_=e=>Gm(e)||Ki(e),jf=e=>zc(e)&&e.isConnected;function r_(e,a){const s=a.slice(0,-1).length;let l=0;for(;l<s;)e=Gt(e)?l++:e[a[l++]];return e}function l_(e){for(const a in e)if(e.hasOwnProperty(a)&&!Gt(e[a]))return!1;return!0}function bn(e,a){const s=Array.isArray(a)?a:Qc(a)?[a]:Fm(a),l=s.length===1?e:r_(e,s),c=s.length-1,d=s[c];return l&&delete l[d],c!==0&&(_n(l)&&Kn(l)||Array.isArray(l)&&l_(l))&&bn(e,s.slice(0,-1)),e}var i_=e=>{for(const a in e)if(Ya(e[a]))return!0;return!1};function cx(e){return Array.isArray(e)||_n(e)&&!i_(e)}function cm(e,a={}){for(const s in e)cx(e[s])?(a[s]=Array.isArray(e[s])?[]:{},cm(e[s],a[s])):Gt(e[s])||(a[s]=!0);return a}function jl(e,a,s){s||(s=cm(a));for(const l in e)cx(e[l])?Gt(a)||om(s[l])?s[l]=cm(e[l],Array.isArray(e[l])?[]:{}):jl(e[l],fa(a)?{}:a[l],s[l]):s[l]=!Qa(e[l],a[l]);return s}const mb={value:!1,isValid:!1},hb={value:!0,isValid:!0};var ux=e=>{if(Array.isArray(e)){if(e.length>1){const a=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:a,isValid:!!a.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Gt(e[0].attributes.value)?Gt(e[0].value)||e[0].value===""?hb:{value:e[0].value,isValid:!0}:hb:mb}return mb},dx=(e,{valueAsNumber:a,valueAsDate:s,setValueAs:l})=>Gt(e)?e:a?e===""?NaN:e&&+e:s&&ja(e)?new Date(e):l?l(e):e;const pb={isValid:!1,value:null};var fx=e=>Array.isArray(e)?e.reduce((a,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:a,pb):pb;function gb(e){const a=e.ref;return Zm(a)?a.files:Gm(a)?fx(e.refs).value:ox(a)?[...a.selectedOptions].map(({value:s})=>s):Ki(a)?ux(e.refs).value:dx(Gt(a.value)?e.ref.value:a.value,e)}var o_=(e,a,s,l)=>{const c={};for(const d of e){const f=qe(a,d);f&&Mt(c,d,f._f)}return{criteriaMode:s,names:[...e],fields:c,shouldUseNativeValidation:l}},Mc=e=>e instanceof RegExp,zi=e=>Gt(e)?e:Mc(e)?e.source:_n(e)?Mc(e.value)?e.value.source:e.value:e,_l=e=>({isOnSubmit:!e||e===ka.onSubmit,isOnBlur:e===ka.onBlur,isOnChange:e===ka.onChange,isOnAll:e===ka.all,isOnTouch:e===ka.onTouched});const yb="AsyncFunction";var c_=e=>!!e&&!!e.validate&&!!(Ya(e.validate)&&e.validate.constructor.name===yb||_n(e.validate)&&Object.values(e.validate).find(a=>a.constructor.name===yb)),u_=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),um=(e,a,s)=>!s&&(a.watchAll||a.watch.has(e)||[...a.watch].some(l=>e.startsWith(l)&&/^\.\w+/.test(e.slice(l.length))));const Al=(e,a,s,l)=>{for(const c of s||Object.keys(e)){const d=qe(e,c);if(d){const{_f:f,...h}=d;if(f){if(f.refs&&f.refs[0]&&a(f.refs[0],c)&&!l)return!0;if(f.ref&&a(f.ref,f.name)&&!l)return!0;if(Al(h,a))break}else if(_n(h)&&Al(h,a))break}}};function bb(e,a,s){const l=qe(e,s);if(l||Qc(s))return{error:l,name:s};const c=s.split(".");for(;c.length;){const d=c.join("."),f=qe(a,d),h=qe(e,d);if(f&&!Array.isArray(f)&&s!==d)return{name:s};if(h&&h.type)return{name:d,error:h};if(h&&h.root&&h.root.type)return{name:`${d}.root`,error:h.root};c.pop()}return{name:s}}var d_=(e,a,s,l)=>{s(e);const{name:c,...d}=e;return Kn(d)||Object.keys(d).length>=Object.keys(a).length||Object.keys(d).find(f=>a[f]===(!l||ka.all))},f_=(e,a,s)=>!e||!a||e===a||ma(e).some(l=>l&&(s?l===a:l.startsWith(a)||a.startsWith(l))),m_=(e,a,s,l,c)=>c.isOnAll?!1:!s&&c.isOnTouch?!(a||e):(s?l.isOnBlur:c.isOnBlur)?!e:(s?l.isOnChange:c.isOnChange)?e:!0,h_=(e,a)=>!Yc(qe(e,a)).length&&bn(e,a),mx=(e,a,s)=>{const l=ma(qe(e,s));return Mt(l,"root",a[s]),Mt(e,s,l),e};function vb(e,a,s="validate"){if(ja(e)||Array.isArray(e)&&e.every(ja)||ls(e)&&!e)return{type:s,message:ja(e)?e:"",ref:a}}var vl=e=>_n(e)&&!Mc(e)?e:{value:e,message:""},dm=async(e,a,s,l,c,d)=>{const{ref:f,refs:h,required:g,maxLength:p,minLength:v,min:x,max:N,pattern:q,validate:j,name:_,valueAsNumber:C,mount:B}=e._f,T=qe(s,_);if(!B||a.has(_))return{};const K=h?h[0]:f,D=me=>{c&&K.reportValidity&&(K.setCustomValidity(ls(me)?"":me||""),K.reportValidity())},R={},Z=Gm(f),U=Ki(f),X=Z||U,ce=(C||Zm(f))&&Gt(f.value)&&Gt(T)||zc(f)&&f.value===""||T===""||Array.isArray(T)&&!T.length,_e=Vm.bind(null,_,l,R),xe=(me,Se,De,Oe=ws.maxLength,M=ws.minLength)=>{const I=me?Se:De;R[_]={type:me?Oe:M,message:I,ref:f,..._e(me?Oe:M,I)}};if(d?!Array.isArray(T)||!T.length:g&&(!X&&(ce||fa(T))||ls(T)&&!T||U&&!ux(h).isValid||Z&&!fx(h).isValid)){const{value:me,message:Se}=ja(g)?{value:!!g,message:g}:vl(g);if(me&&(R[_]={type:ws.required,message:Se,ref:K,..._e(ws.required,Se)},!l))return D(Se),R}if(!ce&&(!fa(x)||!fa(N))){let me,Se;const De=vl(N),Oe=vl(x);if(!fa(T)&&!isNaN(T)){const M=f.valueAsNumber||T&&+T;fa(De.value)||(me=M>De.value),fa(Oe.value)||(Se=M<Oe.value)}else{const M=f.valueAsDate||new Date(T),I=je=>new Date(new Date().toDateString()+" "+je),ee=f.type=="time",be=f.type=="week";ja(De.value)&&T&&(me=ee?I(T)>I(De.value):be?T>De.value:M>new Date(De.value)),ja(Oe.value)&&T&&(Se=ee?I(T)<I(Oe.value):be?T<Oe.value:M<new Date(Oe.value))}if((me||Se)&&(xe(!!me,De.message,Oe.message,ws.max,ws.min),!l))return D(R[_].message),R}if((p||v)&&!ce&&(ja(T)||d&&Array.isArray(T))){const me=vl(p),Se=vl(v),De=!fa(me.value)&&T.length>+me.value,Oe=!fa(Se.value)&&T.length<+Se.value;if((De||Oe)&&(xe(De,me.message,Se.message),!l))return D(R[_].message),R}if(q&&!ce&&ja(T)){const{value:me,message:Se}=vl(q);if(Mc(me)&&!T.match(me)&&(R[_]={type:ws.pattern,message:Se,ref:f,..._e(ws.pattern,Se)},!l))return D(Se),R}if(j){if(Ya(j)){const me=await j(T,s),Se=vb(me,K);if(Se&&(R[_]={...Se,..._e(ws.validate,Se.message)},!l))return D(Se.message),R}else if(_n(j)){let me={};for(const Se in j){if(!Kn(me)&&!l)break;const De=vb(await j[Se](T,s),K,Se);De&&(me={...De,..._e(Se,De.message)},D(De.message),l&&(R[_]=me))}if(!Kn(me)&&(R[_]={ref:K,...me},!l))return R}}return D(!0),R};const p_={mode:ka.onSubmit,reValidateMode:ka.onChange,shouldFocusError:!0};function g_(e={}){let a={...p_,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ya(a.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1},l={},c=_n(a.defaultValues)||_n(a.values)?Kt(a.defaultValues||a.values)||{}:{},d=a.shouldUnregister?{}:Kt(c),f={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},g,p=0;const v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let x={...v};const N={array:fb(),state:fb()},q=a.criteriaMode===ka.all,j=A=>V=>{clearTimeout(p),p=setTimeout(A,V)},_=async A=>{if(!a.disabled&&(v.isValid||x.isValid||A)){const V=a.resolver?Kn((await U()).errors):await ce(l,!0);V!==s.isValid&&N.state.next({isValid:V})}},C=(A,V)=>{!a.disabled&&(v.isValidating||v.validatingFields||x.isValidating||x.validatingFields)&&((A||Array.from(h.mount)).forEach(O=>{O&&(V?Mt(s.validatingFields,O,V):bn(s.validatingFields,O))}),N.state.next({validatingFields:s.validatingFields,isValidating:!Kn(s.validatingFields)}))},B=(A,V=[],O,Q,G=!0,se=!0)=>{if(Q&&O&&!a.disabled){if(f.action=!0,se&&Array.isArray(qe(l,A))){const Ce=O(qe(l,A),Q.argA,Q.argB);G&&Mt(l,A,Ce)}if(se&&Array.isArray(qe(s.errors,A))){const Ce=O(qe(s.errors,A),Q.argA,Q.argB);G&&Mt(s.errors,A,Ce),h_(s.errors,A)}if((v.touchedFields||x.touchedFields)&&se&&Array.isArray(qe(s.touchedFields,A))){const Ce=O(qe(s.touchedFields,A),Q.argA,Q.argB);G&&Mt(s.touchedFields,A,Ce)}(v.dirtyFields||x.dirtyFields)&&(s.dirtyFields=jl(c,d)),N.state.next({name:A,isDirty:xe(A,V),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Mt(d,A,V)},T=(A,V)=>{Mt(s.errors,A,V),N.state.next({errors:s.errors})},K=A=>{s.errors=A,N.state.next({errors:s.errors,isValid:!1})},D=(A,V,O,Q)=>{const G=qe(l,A);if(G){const se=qe(d,A,Gt(O)?qe(c,A):O);Gt(se)||Q&&Q.defaultChecked||V?Mt(d,A,V?se:gb(G._f)):De(A,se),f.mount&&_()}},R=(A,V,O,Q,G)=>{let se=!1,Ce=!1;const Le={name:A};if(!a.disabled){if(!O||Q){(v.isDirty||x.isDirty)&&(Ce=s.isDirty,s.isDirty=Le.isDirty=xe(),se=Ce!==Le.isDirty);const ae=Qa(qe(c,A),V);Ce=!!qe(s.dirtyFields,A),ae?bn(s.dirtyFields,A):Mt(s.dirtyFields,A,!0),Le.dirtyFields=s.dirtyFields,se=se||(v.dirtyFields||x.dirtyFields)&&Ce!==!ae}if(O){const ae=qe(s.touchedFields,A);ae||(Mt(s.touchedFields,A,O),Le.touchedFields=s.touchedFields,se=se||(v.touchedFields||x.touchedFields)&&ae!==O)}se&&G&&N.state.next(Le)}return se?Le:{}},Z=(A,V,O,Q)=>{const G=qe(s.errors,A),se=(v.isValid||x.isValid)&&ls(V)&&s.isValid!==V;if(a.delayError&&O?(g=j(()=>T(A,O)),g(a.delayError)):(clearTimeout(p),g=null,O?Mt(s.errors,A,O):bn(s.errors,A)),(O?!Qa(G,O):G)||!Kn(Q)||se){const Ce={...Q,...se&&ls(V)?{isValid:V}:{},errors:s.errors,name:A};s={...s,...Ce},N.state.next(Ce)}},U=async A=>{C(A,!0);const V=await a.resolver(d,a.context,o_(A||h.mount,l,a.criteriaMode,a.shouldUseNativeValidation));return C(A),V},X=async A=>{const{errors:V}=await U(A);if(A)for(const O of A){const Q=qe(V,O);Q?Mt(s.errors,O,Q):bn(s.errors,O)}else s.errors=V;return V},ce=async(A,V,O={valid:!0})=>{for(const Q in A){const G=A[Q];if(G){const{_f:se,...Ce}=G;if(se){const Le=h.array.has(se.name),ae=G._f&&c_(G._f);ae&&v.validatingFields&&C([se.name],!0);const Me=await dm(G,h.disabled,d,q,a.shouldUseNativeValidation&&!V,Le);if(ae&&v.validatingFields&&C([se.name]),Me[se.name]&&(O.valid=!1,V))break;!V&&(qe(Me,se.name)?Le?mx(s.errors,Me,se.name):Mt(s.errors,se.name,Me[se.name]):bn(s.errors,se.name))}!Kn(Ce)&&await ce(Ce,V,O)}}return O.valid},_e=()=>{for(const A of h.unMount){const V=qe(l,A);V&&(V._f.refs?V._f.refs.every(O=>!jf(O)):!jf(V._f.ref))&&Re(A)}h.unMount=new Set},xe=(A,V)=>!a.disabled&&(A&&V&&Mt(d,A,V),!Qa(je(),c)),me=(A,V,O)=>im(A,h,{...f.mount?d:Gt(V)?c:ja(A)?{[A]:V}:V},O,V),Se=A=>Yc(qe(f.mount?d:c,A,a.shouldUnregister?qe(c,A,[]):[])),De=(A,V,O={})=>{const Q=qe(l,A);let G=V;if(Q){const se=Q._f;se&&(!se.disabled&&Mt(d,A,dx(V,se)),G=zc(se.ref)&&fa(V)?"":V,ox(se.ref)?[...se.ref.options].forEach(Ce=>Ce.selected=G.includes(Ce.value)):se.refs?Ki(se.ref)?se.refs.forEach(Ce=>{(!Ce.defaultChecked||!Ce.disabled)&&(Array.isArray(G)?Ce.checked=!!G.find(Le=>Le===Ce.value):Ce.checked=G===Ce.value||!!G)}):se.refs.forEach(Ce=>Ce.checked=Ce.value===G):Zm(se.ref)?se.ref.value="":(se.ref.value=G,se.ref.type||N.state.next({name:A,values:Kt(d)})))}(O.shouldDirty||O.shouldTouch)&&R(A,G,O.shouldTouch,O.shouldDirty,!0),O.shouldValidate&&be(A)},Oe=(A,V,O)=>{for(const Q in V){if(!V.hasOwnProperty(Q))return;const G=V[Q],se=A+"."+Q,Ce=qe(l,se);(h.array.has(A)||_n(G)||Ce&&!Ce._f)&&!Cr(G)?Oe(se,G,O):De(se,G,O)}},M=(A,V,O={})=>{const Q=qe(l,A),G=h.array.has(A),se=Kt(V);Mt(d,A,se),G?(N.array.next({name:A,values:Kt(d)}),(v.isDirty||v.dirtyFields||x.isDirty||x.dirtyFields)&&O.shouldDirty&&N.state.next({name:A,dirtyFields:jl(c,d),isDirty:xe(A,se)})):Q&&!Q._f&&!fa(se)?Oe(A,se,O):De(A,se,O),um(A,h)&&N.state.next({...s,name:A}),N.state.next({name:f.mount?A:void 0,values:Kt(d)})},I=async A=>{f.mount=!0;const V=A.target;let O=V.name,Q=!0;const G=qe(l,O),se=ae=>{Q=Number.isNaN(ae)||Cr(ae)&&isNaN(ae.getTime())||Qa(ae,qe(d,O,ae))},Ce=_l(a.mode),Le=_l(a.reValidateMode);if(G){let ae,Me;const Pe=V.type?gb(G._f):Wj(A),rt=A.type===db.BLUR||A.type===db.FOCUS_OUT,Pt=!u_(G._f)&&!a.resolver&&!qe(s.errors,O)&&!G._f.deps||m_(rt,qe(s.touchedFields,O),s.isSubmitted,Le,Ce),Ne=um(O,h,rt);Mt(d,O,Pe),rt?(!V||!V.readOnly)&&(G._f.onBlur&&G._f.onBlur(A),g&&g(0)):G._f.onChange&&G._f.onChange(A);const We=R(O,Pe,rt),qt=!Kn(We)||Ne;if(!rt&&N.state.next({name:O,type:A.type,values:Kt(d)}),Pt)return(v.isValid||x.isValid)&&(a.mode==="onBlur"?rt&&_():rt||_()),qt&&N.state.next({name:O,...Ne?{}:We});if(!rt&&Ne&&N.state.next({...s}),a.resolver){const{errors:jt}=await U([O]);if(se(Pe),Q){const An=bb(s.errors,l,O),qn=bb(jt,l,An.name||O);ae=qn.error,O=qn.name,Me=Kn(jt)}}else C([O],!0),ae=(await dm(G,h.disabled,d,q,a.shouldUseNativeValidation))[O],C([O]),se(Pe),Q&&(ae?Me=!1:(v.isValid||x.isValid)&&(Me=await ce(l,!0)));Q&&(G._f.deps&&(!Array.isArray(G._f.deps)||G._f.deps.length>0)&&be(G._f.deps),Z(O,Me,ae,We))}},ee=(A,V)=>{if(qe(s.errors,V)&&A.focus)return A.focus(),1},be=async(A,V={})=>{let O,Q;const G=ma(A);if(a.resolver){const se=await X(Gt(A)?A:G);O=Kn(se),Q=A?!G.some(Ce=>qe(se,Ce)):O}else A?(Q=(await Promise.all(G.map(async se=>{const Ce=qe(l,se);return await ce(Ce&&Ce._f?{[se]:Ce}:Ce)}))).every(Boolean),!(!Q&&!s.isValid)&&_()):Q=O=await ce(l);return N.state.next({...!ja(A)||(v.isValid||x.isValid)&&O!==s.isValid?{}:{name:A},...a.resolver||!A?{isValid:O}:{},errors:s.errors}),V.shouldFocus&&!Q&&Al(l,ee,A?G:h.mount),Q},je=(A,V)=>{let O={...f.mount?d:c};return V&&(O=ix(V.dirtyFields?s.dirtyFields:s.touchedFields,O)),Gt(A)?O:ja(A)?qe(O,A):A.map(Q=>qe(O,Q))},w=(A,V)=>({invalid:!!qe((V||s).errors,A),isDirty:!!qe((V||s).dirtyFields,A),error:qe((V||s).errors,A),isValidating:!!qe(s.validatingFields,A),isTouched:!!qe((V||s).touchedFields,A)}),P=A=>{A&&ma(A).forEach(V=>bn(s.errors,V)),N.state.next({errors:A?s.errors:{}})},ie=(A,V,O)=>{const Q=(qe(l,A,{_f:{}})._f||{}).ref,G=qe(s.errors,A)||{},{ref:se,message:Ce,type:Le,...ae}=G;Mt(s.errors,A,{...ae,...V,ref:Q}),N.state.next({name:A,errors:s.errors,isValid:!1}),O&&O.shouldFocus&&Q&&Q.focus&&Q.focus()},k=(A,V)=>Ya(A)?N.state.subscribe({next:O=>"values"in O&&A(me(void 0,V),O)}):me(A,V,!0),oe=A=>N.state.subscribe({next:V=>{f_(A.name,V.name,A.exact)&&d_(V,A.formState||v,Fe,A.reRenderRoot)&&A.callback({values:{...d},...s,...V,defaultValues:c})}}).unsubscribe,ge=A=>(f.mount=!0,x={...x,...A.formState},oe({...A,formState:x})),Re=(A,V={})=>{for(const O of A?ma(A):h.mount)h.mount.delete(O),h.array.delete(O),V.keepValue||(bn(l,O),bn(d,O)),!V.keepError&&bn(s.errors,O),!V.keepDirty&&bn(s.dirtyFields,O),!V.keepTouched&&bn(s.touchedFields,O),!V.keepIsValidating&&bn(s.validatingFields,O),!a.shouldUnregister&&!V.keepDefaultValue&&bn(c,O);N.state.next({values:Kt(d)}),N.state.next({...s,...V.keepDirty?{isDirty:xe()}:{}}),!V.keepIsValid&&_()},$e=({disabled:A,name:V})=>{(ls(A)&&f.mount||A||h.disabled.has(V))&&(A?h.disabled.add(V):h.disabled.delete(V))},de=(A,V={})=>{let O=qe(l,A);const Q=ls(V.disabled)||ls(a.disabled);return Mt(l,A,{...O||{},_f:{...O&&O._f?O._f:{ref:{name:A}},name:A,mount:!0,...V}}),h.mount.add(A),O?$e({disabled:ls(V.disabled)?V.disabled:a.disabled,name:A}):D(A,!0,V.value),{...Q?{disabled:V.disabled||a.disabled}:{},...a.progressive?{required:!!V.required,min:zi(V.min),max:zi(V.max),minLength:zi(V.minLength),maxLength:zi(V.maxLength),pattern:zi(V.pattern)}:{},name:A,onChange:I,onBlur:I,ref:G=>{if(G){de(A,V),O=qe(l,A);const se=Gt(G.value)&&G.querySelectorAll&&G.querySelectorAll("input,select,textarea")[0]||G,Ce=s_(se),Le=O._f.refs||[];if(Ce?Le.find(ae=>ae===se):se===O._f.ref)return;Mt(l,A,{_f:{...O._f,...Ce?{refs:[...Le.filter(jf),se,...Array.isArray(qe(c,A))?[{}]:[]],ref:{type:se.type,name:A}}:{ref:se}}}),D(A,!1,void 0,se)}else O=qe(l,A,{}),O._f&&(O._f.mount=!1),(a.shouldUnregister||V.shouldUnregister)&&!(t_(h.array,A)&&f.action)&&h.unMount.add(A)}}},Ue=()=>a.shouldFocusError&&Al(l,ee,h.mount),Ie=A=>{ls(A)&&(N.state.next({disabled:A}),Al(l,(V,O)=>{const Q=qe(l,O);Q&&(V.disabled=Q._f.disabled||A,Array.isArray(Q._f.refs)&&Q._f.refs.forEach(G=>{G.disabled=Q._f.disabled||A}))},0,!1))},Ve=(A,V)=>async O=>{let Q;O&&(O.preventDefault&&O.preventDefault(),O.persist&&O.persist());let G=Kt(d);if(N.state.next({isSubmitting:!0}),a.resolver){const{errors:se,values:Ce}=await U();s.errors=se,G=Kt(Ce)}else await ce(l);if(h.disabled.size)for(const se of h.disabled)bn(G,se);if(bn(s.errors,"root"),Kn(s.errors)){N.state.next({errors:{}});try{await A(G,O)}catch(se){Q=se}}else V&&await V({...s.errors},O),Ue(),setTimeout(Ue);if(N.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Kn(s.errors)&&!Q,submitCount:s.submitCount+1,errors:s.errors}),Q)throw Q},dt=(A,V={})=>{qe(l,A)&&(Gt(V.defaultValue)?M(A,Kt(qe(c,A))):(M(A,V.defaultValue),Mt(c,A,Kt(V.defaultValue))),V.keepTouched||bn(s.touchedFields,A),V.keepDirty||(bn(s.dirtyFields,A),s.isDirty=V.defaultValue?xe(A,Kt(qe(c,A))):xe()),V.keepError||(bn(s.errors,A),v.isValid&&_()),N.state.next({...s}))},Te=(A,V={})=>{const O=A?Kt(A):c,Q=Kt(O),G=Kn(A),se=G?c:Q;if(V.keepDefaultValues||(c=O),!V.keepValues){if(V.keepDirtyValues){const Ce=new Set([...h.mount,...Object.keys(jl(c,d))]);for(const Le of Array.from(Ce))qe(s.dirtyFields,Le)?Mt(se,Le,qe(d,Le)):M(Le,qe(se,Le))}else{if($m&&Gt(A))for(const Ce of h.mount){const Le=qe(l,Ce);if(Le&&Le._f){const ae=Array.isArray(Le._f.refs)?Le._f.refs[0]:Le._f.ref;if(zc(ae)){const Me=ae.closest("form");if(Me){Me.reset();break}}}}if(V.keepFieldsRef)for(const Ce of h.mount)M(Ce,qe(se,Ce));else l={}}d=a.shouldUnregister?V.keepDefaultValues?Kt(c):{}:Kt(se),N.array.next({values:{...se}}),N.state.next({values:{...se}})}h={mount:V.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!v.isValid||!!V.keepIsValid||!!V.keepDirtyValues||!a.shouldUnregister&&!Kn(se),f.watch=!!a.shouldUnregister,N.state.next({submitCount:V.keepSubmitCount?s.submitCount:0,isDirty:G?!1:V.keepDirty?s.isDirty:!!(V.keepDefaultValues&&!Qa(A,c)),isSubmitted:V.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:G?{}:V.keepDirtyValues?V.keepDefaultValues&&d?jl(c,d):s.dirtyFields:V.keepDefaultValues&&A?jl(c,A):V.keepDirty?s.dirtyFields:{},touchedFields:V.keepTouched?s.touchedFields:{},errors:V.keepErrors?s.errors:{},isSubmitSuccessful:V.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:c})},He=(A,V)=>Te(Ya(A)?A(d):A,V),fe=(A,V={})=>{const O=qe(l,A),Q=O&&O._f;if(Q){const G=Q.refs?Q.refs[0]:Q.ref;G.focus&&(G.focus(),V.shouldSelect&&Ya(G.select)&&G.select())}},Fe=A=>{s={...s,...A}},Je={control:{register:de,unregister:Re,getFieldState:w,handleSubmit:Ve,setError:ie,_subscribe:oe,_runSchema:U,_focusError:Ue,_getWatch:me,_getDirty:xe,_setValid:_,_setFieldArray:B,_setDisabledField:$e,_setErrors:K,_getFieldArray:Se,_reset:Te,_resetDefaultValues:()=>Ya(a.defaultValues)&&a.defaultValues().then(A=>{He(A,a.resetOptions),N.state.next({isLoading:!1})}),_removeUnmounted:_e,_disableForm:Ie,_subjects:N,_proxyFormState:v,get _fields(){return l},get _formValues(){return d},get _state(){return f},set _state(A){f=A},get _defaultValues(){return c},get _names(){return h},set _names(A){h=A},get _formState(){return s},get _options(){return a},set _options(A){a={...a,...A}}},subscribe:ge,trigger:be,register:de,handleSubmit:Ve,watch:k,setValue:M,getValues:je,reset:He,resetField:dt,clearErrors:P,unregister:Re,setError:ie,setFocus:fe,getFieldState:w};return{...Je,formControl:Je}}var Ws=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const s=(Math.random()*16+e)%16|0;return(a=="x"?s:s&3|8).toString(16)})},_f=(e,a,s={})=>s.shouldFocus||Gt(s.shouldFocus)?s.focusName||`${e}.${Gt(s.focusIndex)?a:s.focusIndex}.`:"",Ef=(e,a)=>[...e,...ma(a)],Af=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Cf(e,a,s){return[...e.slice(0,a),...ma(s),...e.slice(a)]}var Of=(e,a,s)=>Array.isArray(e)?(Gt(e[s])&&(e[s]=void 0),e.splice(s,0,e.splice(a,1)[0]),e):[],Rf=(e,a)=>[...ma(a),...ma(e)];function y_(e,a){let s=0;const l=[...e];for(const c of a)l.splice(c-s,1),s++;return Yc(l).length?l:[]}var Tf=(e,a)=>Gt(a)?[]:y_(e,ma(a).sort((s,l)=>s-l)),Df=(e,a,s)=>{[e[a],e[s]]=[e[s],e[a]]},xb=(e,a,s)=>(e[a]=s,e);function b_(e){const a=lx(),{control:s=a.control,name:l,keyName:c="id",shouldUnregister:d,rules:f}=e,[h,g]=ht.useState(s._getFieldArray(l)),p=ht.useRef(s._getFieldArray(l).map(Ws)),v=ht.useRef(!1);s._names.array.add(l),ht.useMemo(()=>f&&h.length>=0&&s.register(l,f),[s,l,h.length,f]),Hm(()=>s._subjects.array.subscribe({next:({values:D,name:R})=>{if(R===l||!R){const Z=qe(D,l);Array.isArray(Z)&&(g(Z),p.current=Z.map(Ws))}}}).unsubscribe,[s,l]);const x=ht.useCallback(D=>{v.current=!0,s._setFieldArray(l,D)},[s,l]),N=(D,R)=>{const Z=ma(Kt(D)),U=Ef(s._getFieldArray(l),Z);s._names.focus=_f(l,U.length-1,R),p.current=Ef(p.current,Z.map(Ws)),x(U),g(U),s._setFieldArray(l,U,Ef,{argA:Af(D)})},q=(D,R)=>{const Z=ma(Kt(D)),U=Rf(s._getFieldArray(l),Z);s._names.focus=_f(l,0,R),p.current=Rf(p.current,Z.map(Ws)),x(U),g(U),s._setFieldArray(l,U,Rf,{argA:Af(D)})},j=D=>{const R=Tf(s._getFieldArray(l),D);p.current=Tf(p.current,D),x(R),g(R),!Array.isArray(qe(s._fields,l))&&Mt(s._fields,l,void 0),s._setFieldArray(l,R,Tf,{argA:D})},_=(D,R,Z)=>{const U=ma(Kt(R)),X=Cf(s._getFieldArray(l),D,U);s._names.focus=_f(l,D,Z),p.current=Cf(p.current,D,U.map(Ws)),x(X),g(X),s._setFieldArray(l,X,Cf,{argA:D,argB:Af(R)})},C=(D,R)=>{const Z=s._getFieldArray(l);Df(Z,D,R),Df(p.current,D,R),x(Z),g(Z),s._setFieldArray(l,Z,Df,{argA:D,argB:R},!1)},B=(D,R)=>{const Z=s._getFieldArray(l);Of(Z,D,R),Of(p.current,D,R),x(Z),g(Z),s._setFieldArray(l,Z,Of,{argA:D,argB:R},!1)},T=(D,R)=>{const Z=Kt(R),U=xb(s._getFieldArray(l),D,Z);p.current=[...U].map((X,ce)=>!X||ce===D?Ws():p.current[ce]),x(U),g([...U]),s._setFieldArray(l,U,xb,{argA:D,argB:Z},!0,!1)},K=D=>{const R=ma(Kt(D));p.current=R.map(Ws),x([...R]),g([...R]),s._setFieldArray(l,[...R],Z=>Z,{},!0,!1)};return ht.useEffect(()=>{if(s._state.action=!1,um(l,s._names)&&s._subjects.state.next({...s._formState}),v.current&&(!_l(s._options.mode).isOnSubmit||s._formState.isSubmitted)&&!_l(s._options.reValidateMode).isOnSubmit)if(s._options.resolver)s._runSchema([l]).then(D=>{const R=qe(D.errors,l),Z=qe(s._formState.errors,l);(Z?!R&&Z.type||R&&(Z.type!==R.type||Z.message!==R.message):R&&R.type)&&(R?Mt(s._formState.errors,l,R):bn(s._formState.errors,l),s._subjects.state.next({errors:s._formState.errors}))});else{const D=qe(s._fields,l);D&&D._f&&!(_l(s._options.reValidateMode).isOnSubmit&&_l(s._options.mode).isOnSubmit)&&dm(D,s._names.disabled,s._formValues,s._options.criteriaMode===ka.all,s._options.shouldUseNativeValidation,!0).then(R=>!Kn(R)&&s._subjects.state.next({errors:mx(s._formState.errors,R,l)}))}s._subjects.state.next({name:l,values:Kt(s._formValues)}),s._names.focus&&Al(s._fields,(D,R)=>{if(s._names.focus&&R.startsWith(s._names.focus)&&D.focus)return D.focus(),1}),s._names.focus="",s._setValid(),v.current=!1},[h,l,s]),ht.useEffect(()=>(!qe(s._formValues,l)&&s._setFieldArray(l),()=>{const D=(R,Z)=>{const U=qe(s._fields,R);U&&U._f&&(U._f.mount=Z)};s._options.shouldUnregister||d?s.unregister(l):D(l,!1)}),[l,s,c,d]),{swap:ht.useCallback(C,[x,l,s]),move:ht.useCallback(B,[x,l,s]),prepend:ht.useCallback(q,[x,l,s]),append:ht.useCallback(N,[x,l,s]),remove:ht.useCallback(j,[x,l,s]),insert:ht.useCallback(_,[x,l,s]),update:ht.useCallback(T,[x,l,s]),replace:ht.useCallback(K,[x,l,s]),fields:ht.useMemo(()=>h.map((D,R)=>({...D,[c]:p.current[R]||Ws()})),[h,c])}}function Kc(e={}){const a=ht.useRef(void 0),s=ht.useRef(void 0),[l,c]=ht.useState({isDirty:!1,isValidating:!1,isLoading:Ya(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ya(e.defaultValues)?void 0:e.defaultValues});if(!a.current)if(e.formControl)a.current={...e.formControl,formState:l},e.defaultValues&&!Ya(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:f,...h}=g_(e);a.current={...h,formState:l}}const d=a.current.control;return d._options=e,Hm(()=>{const f=d._subscribe({formState:d._proxyFormState,callback:()=>c({...d._formState}),reRenderRoot:!0});return c(h=>({...h,isReady:!0})),d._formState.isReady=!0,f},[d]),ht.useEffect(()=>d._disableForm(e.disabled),[d,e.disabled]),ht.useEffect(()=>{e.mode&&(d._options.mode=e.mode),e.reValidateMode&&(d._options.reValidateMode=e.reValidateMode)},[d,e.mode,e.reValidateMode]),ht.useEffect(()=>{e.errors&&(d._setErrors(e.errors),d._focusError())},[d,e.errors]),ht.useEffect(()=>{e.shouldUnregister&&d._subjects.state.next({values:d._getWatch()})},[d,e.shouldUnregister]),ht.useEffect(()=>{if(d._proxyFormState.isDirty){const f=d._getDirty();f!==l.isDirty&&d._subjects.state.next({isDirty:f})}},[d,l.isDirty]),ht.useEffect(()=>{e.values&&!Qa(e.values,s.current)?(d._reset(e.values,{keepFieldsRef:!0,...d._options.resetOptions}),s.current=e.values,c(f=>({...f}))):d._resetDefaultValues()},[d,e.values]),ht.useEffect(()=>{d._state.mount||(d._setValid(),d._state.mount=!0),d._state.watch&&(d._state.watch=!1,d._subjects.state.next({...d._formState})),d._removeUnmounted()}),a.current.formState=a_(l,d),a.current}function hx(e,a){return function(){return e.apply(a,arguments)}}const{toString:v_}=Object.prototype,{getPrototypeOf:Pm}=Object,{iterator:Xc,toStringTag:px}=Symbol,Jc=(e=>a=>{const s=v_.call(a);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Ka=e=>(e=e.toLowerCase(),a=>Jc(a)===e),Wc=e=>a=>typeof a===e,{isArray:Ul}=Array,Ol=Wc("undefined");function Xi(e){return e!==null&&!Ol(e)&&e.constructor!==null&&!Ol(e.constructor)&&ha(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const gx=Ka("ArrayBuffer");function x_(e){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(e):a=e&&e.buffer&&gx(e.buffer),a}const S_=Wc("string"),ha=Wc("function"),yx=Wc("number"),Ji=e=>e!==null&&typeof e=="object",N_=e=>e===!0||e===!1,Ac=e=>{if(Jc(e)!=="object")return!1;const a=Pm(e);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(px in e)&&!(Xc in e)},w_=e=>{if(!Ji(e)||Xi(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},j_=Ka("Date"),__=Ka("File"),E_=Ka("Blob"),A_=Ka("FileList"),C_=e=>Ji(e)&&ha(e.pipe),O_=e=>{let a;return e&&(typeof FormData=="function"&&e instanceof FormData||ha(e.append)&&((a=Jc(e))==="formdata"||a==="object"&&ha(e.toString)&&e.toString()==="[object FormData]"))},R_=Ka("URLSearchParams"),[T_,D_,z_,M_]=["ReadableStream","Request","Response","Headers"].map(Ka),k_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Wi(e,a,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let l,c;if(typeof e!="object"&&(e=[e]),Ul(e))for(l=0,c=e.length;l<c;l++)a.call(null,e[l],l,e);else{if(Xi(e))return;const d=s?Object.getOwnPropertyNames(e):Object.keys(e),f=d.length;let h;for(l=0;l<f;l++)h=d[l],a.call(null,e[h],h,e)}}function bx(e,a){if(Xi(e))return null;a=a.toLowerCase();const s=Object.keys(e);let l=s.length,c;for(;l-- >0;)if(c=s[l],a===c.toLowerCase())return c;return null}const Or=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,vx=e=>!Ol(e)&&e!==Or;function fm(){const{caseless:e,skipUndefined:a}=vx(this)&&this||{},s={},l=(c,d)=>{const f=e&&bx(s,d)||d;Ac(s[f])&&Ac(c)?s[f]=fm(s[f],c):Ac(c)?s[f]=fm({},c):Ul(c)?s[f]=c.slice():(!a||!Ol(c))&&(s[f]=c)};for(let c=0,d=arguments.length;c<d;c++)arguments[c]&&Wi(arguments[c],l);return s}const U_=(e,a,s,{allOwnKeys:l}={})=>(Wi(a,(c,d)=>{s&&ha(c)?e[d]=hx(c,s):e[d]=c},{allOwnKeys:l}),e),L_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),B_=(e,a,s,l)=>{e.prototype=Object.create(a.prototype,l),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:a.prototype}),s&&Object.assign(e.prototype,s)},q_=(e,a,s,l)=>{let c,d,f;const h={};if(a=a||{},e==null)return a;do{for(c=Object.getOwnPropertyNames(e),d=c.length;d-- >0;)f=c[d],(!l||l(f,e,a))&&!h[f]&&(a[f]=e[f],h[f]=!0);e=s!==!1&&Pm(e)}while(e&&(!s||s(e,a))&&e!==Object.prototype);return a},I_=(e,a,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=a.length;const l=e.indexOf(a,s);return l!==-1&&l===s},$_=e=>{if(!e)return null;if(Ul(e))return e;let a=e.length;if(!yx(a))return null;const s=new Array(a);for(;a-- >0;)s[a]=e[a];return s},F_=(e=>a=>e&&a instanceof e)(typeof Uint8Array<"u"&&Pm(Uint8Array)),H_=(e,a)=>{const l=(e&&e[Xc]).call(e);let c;for(;(c=l.next())&&!c.done;){const d=c.value;a.call(e,d[0],d[1])}},V_=(e,a)=>{let s;const l=[];for(;(s=e.exec(a))!==null;)l.push(s);return l},Z_=Ka("HTMLFormElement"),G_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,l,c){return l.toUpperCase()+c}),Sb=(({hasOwnProperty:e})=>(a,s)=>e.call(a,s))(Object.prototype),P_=Ka("RegExp"),xx=(e,a)=>{const s=Object.getOwnPropertyDescriptors(e),l={};Wi(s,(c,d)=>{let f;(f=a(c,d,e))!==!1&&(l[d]=f||c)}),Object.defineProperties(e,l)},Q_=e=>{xx(e,(a,s)=>{if(ha(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const l=e[s];if(ha(l)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Y_=(e,a)=>{const s={},l=c=>{c.forEach(d=>{s[d]=!0})};return Ul(e)?l(e):l(String(e).split(a)),s},K_=()=>{},X_=(e,a)=>e!=null&&Number.isFinite(e=+e)?e:a;function J_(e){return!!(e&&ha(e.append)&&e[px]==="FormData"&&e[Xc])}const W_=e=>{const a=new Array(10),s=(l,c)=>{if(Ji(l)){if(a.indexOf(l)>=0)return;if(Xi(l))return l;if(!("toJSON"in l)){a[c]=l;const d=Ul(l)?[]:{};return Wi(l,(f,h)=>{const g=s(f,c+1);!Ol(g)&&(d[h]=g)}),a[c]=void 0,d}}return l};return s(e,0)},e1=Ka("AsyncFunction"),t1=e=>e&&(Ji(e)||ha(e))&&ha(e.then)&&ha(e.catch),Sx=((e,a)=>e?setImmediate:a?((s,l)=>(Or.addEventListener("message",({source:c,data:d})=>{c===Or&&d===s&&l.length&&l.shift()()},!1),c=>{l.push(c),Or.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",ha(Or.postMessage)),n1=typeof queueMicrotask<"u"?queueMicrotask.bind(Or):typeof process<"u"&&process.nextTick||Sx,a1=e=>e!=null&&ha(e[Xc]),re={isArray:Ul,isArrayBuffer:gx,isBuffer:Xi,isFormData:O_,isArrayBufferView:x_,isString:S_,isNumber:yx,isBoolean:N_,isObject:Ji,isPlainObject:Ac,isEmptyObject:w_,isReadableStream:T_,isRequest:D_,isResponse:z_,isHeaders:M_,isUndefined:Ol,isDate:j_,isFile:__,isBlob:E_,isRegExp:P_,isFunction:ha,isStream:C_,isURLSearchParams:R_,isTypedArray:F_,isFileList:A_,forEach:Wi,merge:fm,extend:U_,trim:k_,stripBOM:L_,inherits:B_,toFlatObject:q_,kindOf:Jc,kindOfTest:Ka,endsWith:I_,toArray:$_,forEachEntry:H_,matchAll:V_,isHTMLForm:Z_,hasOwnProperty:Sb,hasOwnProp:Sb,reduceDescriptors:xx,freezeMethods:Q_,toObjectSet:Y_,toCamelCase:G_,noop:K_,toFiniteNumber:X_,findKey:bx,global:Or,isContextDefined:vx,isSpecCompliantForm:J_,toJSONObject:W_,isAsyncFn:e1,isThenable:t1,setImmediate:Sx,asap:n1,isIterable:a1};function ut(e,a,s,l,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",a&&(this.code=a),s&&(this.config=s),l&&(this.request=l),c&&(this.response=c,this.status=c.status?c.status:null)}re.inherits(ut,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:re.toJSONObject(this.config),code:this.code,status:this.status}}});const Nx=ut.prototype,wx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{wx[e]={value:e}});Object.defineProperties(ut,wx);Object.defineProperty(Nx,"isAxiosError",{value:!0});ut.from=(e,a,s,l,c,d)=>{const f=Object.create(Nx);re.toFlatObject(e,f,function(v){return v!==Error.prototype},p=>p!=="isAxiosError");const h=e&&e.message?e.message:"Error",g=a==null&&e?e.code:a;return ut.call(f,h,g,s,l,c),e&&f.cause==null&&Object.defineProperty(f,"cause",{value:e,configurable:!0}),f.name=e&&e.name||"Error",d&&Object.assign(f,d),f};const s1=null;function mm(e){return re.isPlainObject(e)||re.isArray(e)}function jx(e){return re.endsWith(e,"[]")?e.slice(0,-2):e}function Nb(e,a,s){return e?e.concat(a).map(function(c,d){return c=jx(c),!s&&d?"["+c+"]":c}).join(s?".":""):a}function r1(e){return re.isArray(e)&&!e.some(mm)}const l1=re.toFlatObject(re,{},null,function(a){return/^is[A-Z]/.test(a)});function eu(e,a,s){if(!re.isObject(e))throw new TypeError("target must be an object");a=a||new FormData,s=re.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,C){return!re.isUndefined(C[_])});const l=s.metaTokens,c=s.visitor||v,d=s.dots,f=s.indexes,g=(s.Blob||typeof Blob<"u"&&Blob)&&re.isSpecCompliantForm(a);if(!re.isFunction(c))throw new TypeError("visitor must be a function");function p(j){if(j===null)return"";if(re.isDate(j))return j.toISOString();if(re.isBoolean(j))return j.toString();if(!g&&re.isBlob(j))throw new ut("Blob is not supported. Use a Buffer instead.");return re.isArrayBuffer(j)||re.isTypedArray(j)?g&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function v(j,_,C){let B=j;if(j&&!C&&typeof j=="object"){if(re.endsWith(_,"{}"))_=l?_:_.slice(0,-2),j=JSON.stringify(j);else if(re.isArray(j)&&r1(j)||(re.isFileList(j)||re.endsWith(_,"[]"))&&(B=re.toArray(j)))return _=jx(_),B.forEach(function(K,D){!(re.isUndefined(K)||K===null)&&a.append(f===!0?Nb([_],D,d):f===null?_:_+"[]",p(K))}),!1}return mm(j)?!0:(a.append(Nb(C,_,d),p(j)),!1)}const x=[],N=Object.assign(l1,{defaultVisitor:v,convertValue:p,isVisitable:mm});function q(j,_){if(!re.isUndefined(j)){if(x.indexOf(j)!==-1)throw Error("Circular reference detected in "+_.join("."));x.push(j),re.forEach(j,function(B,T){(!(re.isUndefined(B)||B===null)&&c.call(a,B,re.isString(T)?T.trim():T,_,N))===!0&&q(B,_?_.concat(T):[T])}),x.pop()}}if(!re.isObject(e))throw new TypeError("data must be an object");return q(e),a}function wb(e){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(l){return a[l]})}function Qm(e,a){this._pairs=[],e&&eu(e,this,a)}const _x=Qm.prototype;_x.append=function(a,s){this._pairs.push([a,s])};_x.toString=function(a){const s=a?function(l){return a.call(this,l,wb)}:wb;return this._pairs.map(function(c){return s(c[0])+"="+s(c[1])},"").join("&")};function i1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ex(e,a,s){if(!a)return e;const l=s&&s.encode||i1;re.isFunction(s)&&(s={serialize:s});const c=s&&s.serialize;let d;if(c?d=c(a,s):d=re.isURLSearchParams(a)?a.toString():new Qm(a,s).toString(l),d){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class jb{constructor(){this.handlers=[]}use(a,s,l){return this.handlers.push({fulfilled:a,rejected:s,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){re.forEach(this.handlers,function(l){l!==null&&a(l)})}}const Ax={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},o1=typeof URLSearchParams<"u"?URLSearchParams:Qm,c1=typeof FormData<"u"?FormData:null,u1=typeof Blob<"u"?Blob:null,d1={isBrowser:!0,classes:{URLSearchParams:o1,FormData:c1,Blob:u1},protocols:["http","https","file","blob","url","data"]},Ym=typeof window<"u"&&typeof document<"u",hm=typeof navigator=="object"&&navigator||void 0,f1=Ym&&(!hm||["ReactNative","NativeScript","NS"].indexOf(hm.product)<0),m1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",h1=Ym&&window.location.href||"http://localhost",p1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ym,hasStandardBrowserEnv:f1,hasStandardBrowserWebWorkerEnv:m1,navigator:hm,origin:h1},Symbol.toStringTag,{value:"Module"})),Xn={...p1,...d1};function g1(e,a){return eu(e,new Xn.classes.URLSearchParams,{visitor:function(s,l,c,d){return Xn.isNode&&re.isBuffer(s)?(this.append(l,s.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...a})}function y1(e){return re.matchAll(/\w+|\[(\w*)]/g,e).map(a=>a[0]==="[]"?"":a[1]||a[0])}function b1(e){const a={},s=Object.keys(e);let l;const c=s.length;let d;for(l=0;l<c;l++)d=s[l],a[d]=e[d];return a}function Cx(e){function a(s,l,c,d){let f=s[d++];if(f==="__proto__")return!0;const h=Number.isFinite(+f),g=d>=s.length;return f=!f&&re.isArray(c)?c.length:f,g?(re.hasOwnProp(c,f)?c[f]=[c[f],l]:c[f]=l,!h):((!c[f]||!re.isObject(c[f]))&&(c[f]=[]),a(s,l,c[f],d)&&re.isArray(c[f])&&(c[f]=b1(c[f])),!h)}if(re.isFormData(e)&&re.isFunction(e.entries)){const s={};return re.forEachEntry(e,(l,c)=>{a(y1(l),c,s,0)}),s}return null}function v1(e,a,s){if(re.isString(e))try{return(a||JSON.parse)(e),re.trim(e)}catch(l){if(l.name!=="SyntaxError")throw l}return(s||JSON.stringify)(e)}const eo={transitional:Ax,adapter:["xhr","http","fetch"],transformRequest:[function(a,s){const l=s.getContentType()||"",c=l.indexOf("application/json")>-1,d=re.isObject(a);if(d&&re.isHTMLForm(a)&&(a=new FormData(a)),re.isFormData(a))return c?JSON.stringify(Cx(a)):a;if(re.isArrayBuffer(a)||re.isBuffer(a)||re.isStream(a)||re.isFile(a)||re.isBlob(a)||re.isReadableStream(a))return a;if(re.isArrayBufferView(a))return a.buffer;if(re.isURLSearchParams(a))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let h;if(d){if(l.indexOf("application/x-www-form-urlencoded")>-1)return g1(a,this.formSerializer).toString();if((h=re.isFileList(a))||l.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return eu(h?{"files[]":a}:a,g&&new g,this.formSerializer)}}return d||c?(s.setContentType("application/json",!1),v1(a)):a}],transformResponse:[function(a){const s=this.transitional||eo.transitional,l=s&&s.forcedJSONParsing,c=this.responseType==="json";if(re.isResponse(a)||re.isReadableStream(a))return a;if(a&&re.isString(a)&&(l&&!this.responseType||c)){const f=!(s&&s.silentJSONParsing)&&c;try{return JSON.parse(a,this.parseReviver)}catch(h){if(f)throw h.name==="SyntaxError"?ut.from(h,ut.ERR_BAD_RESPONSE,this,null,this.response):h}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xn.classes.FormData,Blob:Xn.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};re.forEach(["delete","get","head","post","put","patch"],e=>{eo.headers[e]={}});const x1=re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),S1=e=>{const a={};let s,l,c;return e&&e.split(`
`).forEach(function(f){c=f.indexOf(":"),s=f.substring(0,c).trim().toLowerCase(),l=f.substring(c+1).trim(),!(!s||a[s]&&x1[s])&&(s==="set-cookie"?a[s]?a[s].push(l):a[s]=[l]:a[s]=a[s]?a[s]+", "+l:l)}),a},_b=Symbol("internals");function Mi(e){return e&&String(e).trim().toLowerCase()}function Cc(e){return e===!1||e==null?e:re.isArray(e)?e.map(Cc):String(e)}function N1(e){const a=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=s.exec(e);)a[l[1]]=l[2];return a}const w1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function zf(e,a,s,l,c){if(re.isFunction(l))return l.call(this,a,s);if(c&&(a=s),!!re.isString(a)){if(re.isString(l))return a.indexOf(l)!==-1;if(re.isRegExp(l))return l.test(a)}}function j1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,s,l)=>s.toUpperCase()+l)}function _1(e,a){const s=re.toCamelCase(" "+a);["get","set","has"].forEach(l=>{Object.defineProperty(e,l+s,{value:function(c,d,f){return this[l].call(this,a,c,d,f)},configurable:!0})})}let pa=class{constructor(a){a&&this.set(a)}set(a,s,l){const c=this;function d(h,g,p){const v=Mi(g);if(!v)throw new Error("header name must be a non-empty string");const x=re.findKey(c,v);(!x||c[x]===void 0||p===!0||p===void 0&&c[x]!==!1)&&(c[x||g]=Cc(h))}const f=(h,g)=>re.forEach(h,(p,v)=>d(p,v,g));if(re.isPlainObject(a)||a instanceof this.constructor)f(a,s);else if(re.isString(a)&&(a=a.trim())&&!w1(a))f(S1(a),s);else if(re.isObject(a)&&re.isIterable(a)){let h={},g,p;for(const v of a){if(!re.isArray(v))throw TypeError("Object iterator must return a key-value pair");h[p=v[0]]=(g=h[p])?re.isArray(g)?[...g,v[1]]:[g,v[1]]:v[1]}f(h,s)}else a!=null&&d(s,a,l);return this}get(a,s){if(a=Mi(a),a){const l=re.findKey(this,a);if(l){const c=this[l];if(!s)return c;if(s===!0)return N1(c);if(re.isFunction(s))return s.call(this,c,l);if(re.isRegExp(s))return s.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,s){if(a=Mi(a),a){const l=re.findKey(this,a);return!!(l&&this[l]!==void 0&&(!s||zf(this,this[l],l,s)))}return!1}delete(a,s){const l=this;let c=!1;function d(f){if(f=Mi(f),f){const h=re.findKey(l,f);h&&(!s||zf(l,l[h],h,s))&&(delete l[h],c=!0)}}return re.isArray(a)?a.forEach(d):d(a),c}clear(a){const s=Object.keys(this);let l=s.length,c=!1;for(;l--;){const d=s[l];(!a||zf(this,this[d],d,a,!0))&&(delete this[d],c=!0)}return c}normalize(a){const s=this,l={};return re.forEach(this,(c,d)=>{const f=re.findKey(l,d);if(f){s[f]=Cc(c),delete s[d];return}const h=a?j1(d):String(d).trim();h!==d&&delete s[d],s[h]=Cc(c),l[h]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const s=Object.create(null);return re.forEach(this,(l,c)=>{l!=null&&l!==!1&&(s[c]=a&&re.isArray(l)?l.join(", "):l)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,s])=>a+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...s){const l=new this(a);return s.forEach(c=>l.set(c)),l}static accessor(a){const l=(this[_b]=this[_b]={accessors:{}}).accessors,c=this.prototype;function d(f){const h=Mi(f);l[h]||(_1(c,f),l[h]=!0)}return re.isArray(a)?a.forEach(d):d(a),this}};pa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);re.reduceDescriptors(pa.prototype,({value:e},a)=>{let s=a[0].toUpperCase()+a.slice(1);return{get:()=>e,set(l){this[s]=l}}});re.freezeMethods(pa);function Mf(e,a){const s=this||eo,l=a||s,c=pa.from(l.headers);let d=l.data;return re.forEach(e,function(h){d=h.call(s,d,c.normalize(),a?a.status:void 0)}),c.normalize(),d}function Ox(e){return!!(e&&e.__CANCEL__)}function Ll(e,a,s){ut.call(this,e??"canceled",ut.ERR_CANCELED,a,s),this.name="CanceledError"}re.inherits(Ll,ut,{__CANCEL__:!0});function Rx(e,a,s){const l=s.config.validateStatus;!s.status||!l||l(s.status)?e(s):a(new ut("Request failed with status code "+s.status,[ut.ERR_BAD_REQUEST,ut.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function E1(e){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return a&&a[1]||""}function A1(e,a){e=e||10;const s=new Array(e),l=new Array(e);let c=0,d=0,f;return a=a!==void 0?a:1e3,function(g){const p=Date.now(),v=l[d];f||(f=p),s[c]=g,l[c]=p;let x=d,N=0;for(;x!==c;)N+=s[x++],x=x%e;if(c=(c+1)%e,c===d&&(d=(d+1)%e),p-f<a)return;const q=v&&p-v;return q?Math.round(N*1e3/q):void 0}}function C1(e,a){let s=0,l=1e3/a,c,d;const f=(p,v=Date.now())=>{s=v,c=null,d&&(clearTimeout(d),d=null),e(...p)};return[(...p)=>{const v=Date.now(),x=v-s;x>=l?f(p,v):(c=p,d||(d=setTimeout(()=>{d=null,f(c)},l-x)))},()=>c&&f(c)]}const kc=(e,a,s=3)=>{let l=0;const c=A1(50,250);return C1(d=>{const f=d.loaded,h=d.lengthComputable?d.total:void 0,g=f-l,p=c(g),v=f<=h;l=f;const x={loaded:f,total:h,progress:h?f/h:void 0,bytes:g,rate:p||void 0,estimated:p&&h&&v?(h-f)/p:void 0,event:d,lengthComputable:h!=null,[a?"download":"upload"]:!0};e(x)},s)},Eb=(e,a)=>{const s=e!=null;return[l=>a[0]({lengthComputable:s,total:e,loaded:l}),a[1]]},Ab=e=>(...a)=>re.asap(()=>e(...a)),O1=Xn.hasStandardBrowserEnv?((e,a)=>s=>(s=new URL(s,Xn.origin),e.protocol===s.protocol&&e.host===s.host&&(a||e.port===s.port)))(new URL(Xn.origin),Xn.navigator&&/(msie|trident)/i.test(Xn.navigator.userAgent)):()=>!0,R1=Xn.hasStandardBrowserEnv?{write(e,a,s,l,c,d,f){if(typeof document>"u")return;const h=[`${e}=${encodeURIComponent(a)}`];re.isNumber(s)&&h.push(`expires=${new Date(s).toUTCString()}`),re.isString(l)&&h.push(`path=${l}`),re.isString(c)&&h.push(`domain=${c}`),d===!0&&h.push("secure"),re.isString(f)&&h.push(`SameSite=${f}`),document.cookie=h.join("; ")},read(e){if(typeof document>"u")return null;const a=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return a?decodeURIComponent(a[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function T1(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function D1(e,a){return a?e.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):e}function Tx(e,a,s){let l=!T1(a);return e&&(l||s==!1)?D1(e,a):a}const Cb=e=>e instanceof pa?{...e}:e;function Mr(e,a){a=a||{};const s={};function l(p,v,x,N){return re.isPlainObject(p)&&re.isPlainObject(v)?re.merge.call({caseless:N},p,v):re.isPlainObject(v)?re.merge({},v):re.isArray(v)?v.slice():v}function c(p,v,x,N){if(re.isUndefined(v)){if(!re.isUndefined(p))return l(void 0,p,x,N)}else return l(p,v,x,N)}function d(p,v){if(!re.isUndefined(v))return l(void 0,v)}function f(p,v){if(re.isUndefined(v)){if(!re.isUndefined(p))return l(void 0,p)}else return l(void 0,v)}function h(p,v,x){if(x in a)return l(p,v);if(x in e)return l(void 0,p)}const g={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:h,headers:(p,v,x)=>c(Cb(p),Cb(v),x,!0)};return re.forEach(Object.keys({...e,...a}),function(v){const x=g[v]||c,N=x(e[v],a[v],v);re.isUndefined(N)&&x!==h||(s[v]=N)}),s}const Dx=e=>{const a=Mr({},e);let{data:s,withXSRFToken:l,xsrfHeaderName:c,xsrfCookieName:d,headers:f,auth:h}=a;if(a.headers=f=pa.from(f),a.url=Ex(Tx(a.baseURL,a.url,a.allowAbsoluteUrls),e.params,e.paramsSerializer),h&&f.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),re.isFormData(s)){if(Xn.hasStandardBrowserEnv||Xn.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(re.isFunction(s.getHeaders)){const g=s.getHeaders(),p=["content-type","content-length"];Object.entries(g).forEach(([v,x])=>{p.includes(v.toLowerCase())&&f.set(v,x)})}}if(Xn.hasStandardBrowserEnv&&(l&&re.isFunction(l)&&(l=l(a)),l||l!==!1&&O1(a.url))){const g=c&&d&&R1.read(d);g&&f.set(c,g)}return a},z1=typeof XMLHttpRequest<"u",M1=z1&&function(e){return new Promise(function(s,l){const c=Dx(e);let d=c.data;const f=pa.from(c.headers).normalize();let{responseType:h,onUploadProgress:g,onDownloadProgress:p}=c,v,x,N,q,j;function _(){q&&q(),j&&j(),c.cancelToken&&c.cancelToken.unsubscribe(v),c.signal&&c.signal.removeEventListener("abort",v)}let C=new XMLHttpRequest;C.open(c.method.toUpperCase(),c.url,!0),C.timeout=c.timeout;function B(){if(!C)return;const K=pa.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),R={data:!h||h==="text"||h==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:K,config:e,request:C};Rx(function(U){s(U),_()},function(U){l(U),_()},R),C=null}"onloadend"in C?C.onloadend=B:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(B)},C.onabort=function(){C&&(l(new ut("Request aborted",ut.ECONNABORTED,e,C)),C=null)},C.onerror=function(D){const R=D&&D.message?D.message:"Network Error",Z=new ut(R,ut.ERR_NETWORK,e,C);Z.event=D||null,l(Z),C=null},C.ontimeout=function(){let D=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const R=c.transitional||Ax;c.timeoutErrorMessage&&(D=c.timeoutErrorMessage),l(new ut(D,R.clarifyTimeoutError?ut.ETIMEDOUT:ut.ECONNABORTED,e,C)),C=null},d===void 0&&f.setContentType(null),"setRequestHeader"in C&&re.forEach(f.toJSON(),function(D,R){C.setRequestHeader(R,D)}),re.isUndefined(c.withCredentials)||(C.withCredentials=!!c.withCredentials),h&&h!=="json"&&(C.responseType=c.responseType),p&&([N,j]=kc(p,!0),C.addEventListener("progress",N)),g&&C.upload&&([x,q]=kc(g),C.upload.addEventListener("progress",x),C.upload.addEventListener("loadend",q)),(c.cancelToken||c.signal)&&(v=K=>{C&&(l(!K||K.type?new Ll(null,e,C):K),C.abort(),C=null)},c.cancelToken&&c.cancelToken.subscribe(v),c.signal&&(c.signal.aborted?v():c.signal.addEventListener("abort",v)));const T=E1(c.url);if(T&&Xn.protocols.indexOf(T)===-1){l(new ut("Unsupported protocol "+T+":",ut.ERR_BAD_REQUEST,e));return}C.send(d||null)})},k1=(e,a)=>{const{length:s}=e=e?e.filter(Boolean):[];if(a||s){let l=new AbortController,c;const d=function(p){if(!c){c=!0,h();const v=p instanceof Error?p:this.reason;l.abort(v instanceof ut?v:new Ll(v instanceof Error?v.message:v))}};let f=a&&setTimeout(()=>{f=null,d(new ut(`timeout ${a} of ms exceeded`,ut.ETIMEDOUT))},a);const h=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(d):p.removeEventListener("abort",d)}),e=null)};e.forEach(p=>p.addEventListener("abort",d));const{signal:g}=l;return g.unsubscribe=()=>re.asap(h),g}},U1=function*(e,a){let s=e.byteLength;if(s<a){yield e;return}let l=0,c;for(;l<s;)c=l+a,yield e.slice(l,c),l=c},L1=async function*(e,a){for await(const s of B1(e))yield*U1(s,a)},B1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const a=e.getReader();try{for(;;){const{done:s,value:l}=await a.read();if(s)break;yield l}}finally{await a.cancel()}},Ob=(e,a,s,l)=>{const c=L1(e,a);let d=0,f,h=g=>{f||(f=!0,l&&l(g))};return new ReadableStream({async pull(g){try{const{done:p,value:v}=await c.next();if(p){h(),g.close();return}let x=v.byteLength;if(s){let N=d+=x;s(N)}g.enqueue(new Uint8Array(v))}catch(p){throw h(p),p}},cancel(g){return h(g),c.return()}},{highWaterMark:2})},Rb=64*1024,{isFunction:bc}=re,q1=(({Request:e,Response:a})=>({Request:e,Response:a}))(re.global),{ReadableStream:Tb,TextEncoder:Db}=re.global,zb=(e,...a)=>{try{return!!e(...a)}catch{return!1}},I1=e=>{e=re.merge.call({skipUndefined:!0},q1,e);const{fetch:a,Request:s,Response:l}=e,c=a?bc(a):typeof fetch=="function",d=bc(s),f=bc(l);if(!c)return!1;const h=c&&bc(Tb),g=c&&(typeof Db=="function"?(j=>_=>j.encode(_))(new Db):async j=>new Uint8Array(await new s(j).arrayBuffer())),p=d&&h&&zb(()=>{let j=!1;const _=new s(Xn.origin,{body:new Tb,method:"POST",get duplex(){return j=!0,"half"}}).headers.has("Content-Type");return j&&!_}),v=f&&h&&zb(()=>re.isReadableStream(new l("").body)),x={stream:v&&(j=>j.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(j=>{!x[j]&&(x[j]=(_,C)=>{let B=_&&_[j];if(B)return B.call(_);throw new ut(`Response type '${j}' is not supported`,ut.ERR_NOT_SUPPORT,C)})});const N=async j=>{if(j==null)return 0;if(re.isBlob(j))return j.size;if(re.isSpecCompliantForm(j))return(await new s(Xn.origin,{method:"POST",body:j}).arrayBuffer()).byteLength;if(re.isArrayBufferView(j)||re.isArrayBuffer(j))return j.byteLength;if(re.isURLSearchParams(j)&&(j=j+""),re.isString(j))return(await g(j)).byteLength},q=async(j,_)=>{const C=re.toFiniteNumber(j.getContentLength());return C??N(_)};return async j=>{let{url:_,method:C,data:B,signal:T,cancelToken:K,timeout:D,onDownloadProgress:R,onUploadProgress:Z,responseType:U,headers:X,withCredentials:ce="same-origin",fetchOptions:_e}=Dx(j),xe=a||fetch;U=U?(U+"").toLowerCase():"text";let me=k1([T,K&&K.toAbortSignal()],D),Se=null;const De=me&&me.unsubscribe&&(()=>{me.unsubscribe()});let Oe;try{if(Z&&p&&C!=="get"&&C!=="head"&&(Oe=await q(X,B))!==0){let w=new s(_,{method:"POST",body:B,duplex:"half"}),P;if(re.isFormData(B)&&(P=w.headers.get("content-type"))&&X.setContentType(P),w.body){const[ie,k]=Eb(Oe,kc(Ab(Z)));B=Ob(w.body,Rb,ie,k)}}re.isString(ce)||(ce=ce?"include":"omit");const M=d&&"credentials"in s.prototype,I={..._e,signal:me,method:C.toUpperCase(),headers:X.normalize().toJSON(),body:B,duplex:"half",credentials:M?ce:void 0};Se=d&&new s(_,I);let ee=await(d?xe(Se,_e):xe(_,I));const be=v&&(U==="stream"||U==="response");if(v&&(R||be&&De)){const w={};["status","statusText","headers"].forEach(oe=>{w[oe]=ee[oe]});const P=re.toFiniteNumber(ee.headers.get("content-length")),[ie,k]=R&&Eb(P,kc(Ab(R),!0))||[];ee=new l(Ob(ee.body,Rb,ie,()=>{k&&k(),De&&De()}),w)}U=U||"text";let je=await x[re.findKey(x,U)||"text"](ee,j);return!be&&De&&De(),await new Promise((w,P)=>{Rx(w,P,{data:je,headers:pa.from(ee.headers),status:ee.status,statusText:ee.statusText,config:j,request:Se})})}catch(M){throw De&&De(),M&&M.name==="TypeError"&&/Load failed|fetch/i.test(M.message)?Object.assign(new ut("Network Error",ut.ERR_NETWORK,j,Se),{cause:M.cause||M}):ut.from(M,M&&M.code,j,Se)}}},$1=new Map,zx=e=>{let a=e&&e.env||{};const{fetch:s,Request:l,Response:c}=a,d=[l,c,s];let f=d.length,h=f,g,p,v=$1;for(;h--;)g=d[h],p=v.get(g),p===void 0&&v.set(g,p=h?new Map:I1(a)),v=p;return p};zx();const Km={http:s1,xhr:M1,fetch:{get:zx}};re.forEach(Km,(e,a)=>{if(e){try{Object.defineProperty(e,"name",{value:a})}catch{}Object.defineProperty(e,"adapterName",{value:a})}});const Mb=e=>`- ${e}`,F1=e=>re.isFunction(e)||e===null||e===!1;function H1(e,a){e=re.isArray(e)?e:[e];const{length:s}=e;let l,c;const d={};for(let f=0;f<s;f++){l=e[f];let h;if(c=l,!F1(l)&&(c=Km[(h=String(l)).toLowerCase()],c===void 0))throw new ut(`Unknown adapter '${h}'`);if(c&&(re.isFunction(c)||(c=c.get(a))))break;d[h||"#"+f]=c}if(!c){const f=Object.entries(d).map(([g,p])=>`adapter ${g} `+(p===!1?"is not supported by the environment":"is not available in the build"));let h=s?f.length>1?`since :
`+f.map(Mb).join(`
`):" "+Mb(f[0]):"as no adapter specified";throw new ut("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return c}const Mx={getAdapter:H1,adapters:Km};function kf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ll(null,e)}function kb(e){return kf(e),e.headers=pa.from(e.headers),e.data=Mf.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Mx.getAdapter(e.adapter||eo.adapter,e)(e).then(function(l){return kf(e),l.data=Mf.call(e,e.transformResponse,l),l.headers=pa.from(l.headers),l},function(l){return Ox(l)||(kf(e),l&&l.response&&(l.response.data=Mf.call(e,e.transformResponse,l.response),l.response.headers=pa.from(l.response.headers))),Promise.reject(l)})}const kx="1.13.2",tu={};["object","boolean","number","function","string","symbol"].forEach((e,a)=>{tu[e]=function(l){return typeof l===e||"a"+(a<1?"n ":" ")+e}});const Ub={};tu.transitional=function(a,s,l){function c(d,f){return"[Axios v"+kx+"] Transitional option '"+d+"'"+f+(l?". "+l:"")}return(d,f,h)=>{if(a===!1)throw new ut(c(f," has been removed"+(s?" in "+s:"")),ut.ERR_DEPRECATED);return s&&!Ub[f]&&(Ub[f]=!0,console.warn(c(f," has been deprecated since v"+s+" and will be removed in the near future"))),a?a(d,f,h):!0}};tu.spelling=function(a){return(s,l)=>(console.warn(`${l} is likely a misspelling of ${a}`),!0)};function V1(e,a,s){if(typeof e!="object")throw new ut("options must be an object",ut.ERR_BAD_OPTION_VALUE);const l=Object.keys(e);let c=l.length;for(;c-- >0;){const d=l[c],f=a[d];if(f){const h=e[d],g=h===void 0||f(h,d,e);if(g!==!0)throw new ut("option "+d+" must be "+g,ut.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new ut("Unknown option "+d,ut.ERR_BAD_OPTION)}}const Oc={assertOptions:V1,validators:tu},rs=Oc.validators;let Rr=class{constructor(a){this.defaults=a||{},this.interceptors={request:new jb,response:new jb}}async request(a,s){try{return await this._request(a,s)}catch(l){if(l instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const d=c.stack?c.stack.replace(/^.+\n/,""):"";try{l.stack?d&&!String(l.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+d):l.stack=d}catch{}}throw l}}_request(a,s){typeof a=="string"?(s=s||{},s.url=a):s=a||{},s=Mr(this.defaults,s);const{transitional:l,paramsSerializer:c,headers:d}=s;l!==void 0&&Oc.assertOptions(l,{silentJSONParsing:rs.transitional(rs.boolean),forcedJSONParsing:rs.transitional(rs.boolean),clarifyTimeoutError:rs.transitional(rs.boolean)},!1),c!=null&&(re.isFunction(c)?s.paramsSerializer={serialize:c}:Oc.assertOptions(c,{encode:rs.function,serialize:rs.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Oc.assertOptions(s,{baseUrl:rs.spelling("baseURL"),withXsrfToken:rs.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let f=d&&re.merge(d.common,d[s.method]);d&&re.forEach(["delete","get","head","post","put","patch","common"],j=>{delete d[j]}),s.headers=pa.concat(f,d);const h=[];let g=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(s)===!1||(g=g&&_.synchronous,h.unshift(_.fulfilled,_.rejected))});const p=[];this.interceptors.response.forEach(function(_){p.push(_.fulfilled,_.rejected)});let v,x=0,N;if(!g){const j=[kb.bind(this),void 0];for(j.unshift(...h),j.push(...p),N=j.length,v=Promise.resolve(s);x<N;)v=v.then(j[x++],j[x++]);return v}N=h.length;let q=s;for(;x<N;){const j=h[x++],_=h[x++];try{q=j(q)}catch(C){_.call(this,C);break}}try{v=kb.call(this,q)}catch(j){return Promise.reject(j)}for(x=0,N=p.length;x<N;)v=v.then(p[x++],p[x++]);return v}getUri(a){a=Mr(this.defaults,a);const s=Tx(a.baseURL,a.url,a.allowAbsoluteUrls);return Ex(s,a.params,a.paramsSerializer)}};re.forEach(["delete","get","head","options"],function(a){Rr.prototype[a]=function(s,l){return this.request(Mr(l||{},{method:a,url:s,data:(l||{}).data}))}});re.forEach(["post","put","patch"],function(a){function s(l){return function(d,f,h){return this.request(Mr(h||{},{method:a,headers:l?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}Rr.prototype[a]=s(),Rr.prototype[a+"Form"]=s(!0)});let Z1=class Ux{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(d){s=d});const l=this;this.promise.then(c=>{if(!l._listeners)return;let d=l._listeners.length;for(;d-- >0;)l._listeners[d](c);l._listeners=null}),this.promise.then=c=>{let d;const f=new Promise(h=>{l.subscribe(h),d=h}).then(c);return f.cancel=function(){l.unsubscribe(d)},f},a(function(d,f,h){l.reason||(l.reason=new Ll(d,f,h),s(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const s=this._listeners.indexOf(a);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const a=new AbortController,s=l=>{a.abort(l)};return this.subscribe(s),a.signal.unsubscribe=()=>this.unsubscribe(s),a.signal}static source(){let a;return{token:new Ux(function(c){a=c}),cancel:a}}};function G1(e){return function(s){return e.apply(null,s)}}function P1(e){return re.isObject(e)&&e.isAxiosError===!0}const pm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(pm).forEach(([e,a])=>{pm[a]=e});function Lx(e){const a=new Rr(e),s=hx(Rr.prototype.request,a);return re.extend(s,Rr.prototype,a,{allOwnKeys:!0}),re.extend(s,a,null,{allOwnKeys:!0}),s.create=function(c){return Lx(Mr(e,c))},s}const gt=Lx(eo);gt.Axios=Rr;gt.CanceledError=Ll;gt.CancelToken=Z1;gt.isCancel=Ox;gt.VERSION=kx;gt.toFormData=eu;gt.AxiosError=ut;gt.Cancel=gt.CanceledError;gt.all=function(a){return Promise.all(a)};gt.spread=G1;gt.isAxiosError=P1;gt.mergeConfig=Mr;gt.AxiosHeaders=pa;gt.formToJSON=e=>Cx(re.isHTMLForm(e)?new FormData(e):e);gt.getAdapter=Mx.getAdapter;gt.HttpStatusCode=pm;gt.default=gt;const{Axios:W2,AxiosError:eD,CanceledError:tD,isCancel:nD,CancelToken:aD,VERSION:sD,all:rD,Cancel:lD,isAxiosError:iD,spread:oD,toFormData:cD,AxiosHeaders:uD,HttpStatusCode:dD,formToJSON:fD,getAdapter:mD,mergeConfig:hD}=gt,Q1="medileser:draft:v1",Uc="medileser:recovery:v1",Lc="medileser:recovery:intent",Y1="vi.auth",K1="vi_auth",X1="medileser.selectedBank",J1=1440*60*1e3,Xm=e=>{if(!e)return!1;const a=Date.parse(e);return Number.isNaN(a)?!1:Date.now()-a>J1},Uf=e=>{const{userId:a,bankId:s,oiId:l,type:c,bancadaId:d,isNew:f}=e;if(!a||s==null)return null;const h=l!=null?String(l):"new",g=`${Q1}:u${a}:b${s}:oi:${h}`;if(c==="header")return`${g}:header`;const p=f?"new":d;return p==null?null:`${g}:bancada:${p}`},Bi=(e,a,s)=>{try{localStorage.setItem(e,JSON.stringify(a))}catch{}s&&Bx(s)},Lf=e=>{try{const a=localStorage.getItem(e);if(!a)return null;const s=JSON.parse(a);return!s||typeof s!="object"?null:Xm(s.ts)?(localStorage.removeItem(e),null):s}catch{return null}},nr=e=>{try{localStorage.removeItem(e)}catch{}},Bx=e=>{try{localStorage.setItem(Uc,JSON.stringify(e))}catch{}},qx=()=>{try{const e=localStorage.getItem(Uc);if(!e)return null;const a=JSON.parse(e);return!a||typeof a!="object"?null:Xm(a.ts)?(localStorage.removeItem(Uc),null):a}catch{return null}},W1=()=>{try{localStorage.removeItem(Uc)}catch{}},eE=e=>{const a=e.userId??null,s=e.bankId??null,l=e.oiId??null;if(!a||s==null||!l)return;const c=qx(),d={version:1,ts:new Date().toISOString(),userId:a,bankId:s,oiId:l,oiCode:e.oiCode??c?.oiCode??null,returnTo:e.returnTo??c?.returnTo??`/oi/${l}?mode=edit`,mode:"edit",modal:e.modal??c?.modal};Bx(d)},tE=e=>{const a={version:1,ts:new Date().toISOString(),userId:e.userId,bankId:e.bankId,oiId:e.oiId,modal:e.modal,returnTo:e.returnTo};try{sessionStorage.setItem(Lc,JSON.stringify(a))}catch{}},nE=()=>{try{const e=sessionStorage.getItem(Lc);if(!e)return null;const a=JSON.parse(e);return!a||typeof a!="object"?null:Xm(a.ts)?(sessionStorage.removeItem(Lc),null):a}catch{return null}},Bf=()=>{try{sessionStorage.removeItem(Lc)}catch{}},aE=()=>{try{const e=localStorage.getItem(Y1)??localStorage.getItem(K1);if(!e)return{userId:null,bankId:null};const a=JSON.parse(e),s=Number(a.userId??a.id),l=a.bancoId!=null?Number(a.bancoId):null;return{userId:Number.isFinite(s)?s:null,bankId:l!=null&&Number.isFinite(l)?l:null}}catch{}return{userId:null,bankId:null}},sE=()=>{try{const e=localStorage.getItem(X1);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}},gm=(e,a)=>{const s=qx();if(!s)return{target:null};if(!e||s.userId!==e)return{target:"/home",reason:"user"};if(a==null||s.bankId!==a)return{target:"/home",reason:"bank"};const l=s.returnTo||`/oi/${s.oiId}?mode=edit`,c=l==="/oi"||l==="/oi/"?`/oi/${s.oiId}?mode=edit`:l;return tE(s),{target:c,recovery:s}},Lb="http://127.0.0.1:8000",Bl="openOiId",nu="vi.currentOI",Ix="vi.auth",$x="vi_auth",rE="medileser.selectedBank",lE="medileser:selectedBank",ym="medileser.pendingToast",to="medileser.pendingAction",iE="medileser:auth-expired",bm="medileser.sessionUserId",vm="medileser.sessionBankId",Fx=()=>typeof window<"u"?window.location.port==="5173"?Lb:window.location.origin:Lb,Ye=gt.create({baseURL:Fx()}),Hx=gt.create({baseURL:Fx()}),Vx=e=>{try{const a=localStorage.getItem(Ix)??localStorage.getItem($x);if(a){const{token:s}=JSON.parse(a);s&&(e.headers&&typeof e.headers.set=="function"?e.headers.set("Authorization",`Bearer ${s}`):e.headers={...e.headers||{},Authorization:`Bearer ${s}`})}}catch{}return e};Ye.interceptors.request.use(Vx);Hx.interceptors.request.use(Vx);function oE(){try{const e=sessionStorage.getItem(Bl);if(!e)return null;const a=Number(e);return Number.isFinite(a)&&a>0?a:null}catch{return null}}const Zx=()=>{try{const e=sessionStorage.getItem(nu);if(!e)return null;const a=JSON.parse(e),s=Number(a?.id);return Number.isFinite(s)&&s>0?s:null}catch{return null}};function cE(e){try{sessionStorage.setItem(Bl,String(e))}catch{}}function Gx(){try{sessionStorage.removeItem(Bl)}catch{}}async function no(){const e=oE();if(e)try{await Hx.post(`/oi/${e}/close`)}catch{}finally{Gx()}}function uE(e){try{sessionStorage.setItem(ym,e)}catch{}}function dE(){try{const e=sessionStorage.getItem(ym);return e?(sessionStorage.removeItem(ym),e):null}catch{return null}}function fE(e){try{sessionStorage.setItem(to,JSON.stringify(e))}catch{}}function mE(){try{const e=sessionStorage.getItem(to);return e?JSON.parse(e):null}catch{return null}}function xl(){try{sessionStorage.removeItem(to)}catch{}}function Px(){try{const e=sessionStorage.getItem(bm);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}}function Bb(e){try{e==null?sessionStorage.removeItem(bm):sessionStorage.setItem(bm,String(e))}catch{}}function Qx(){try{const e=sessionStorage.getItem(vm);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}}function Bc(e){try{e==null?sessionStorage.removeItem(vm):sessionStorage.setItem(vm,String(e))}catch{}}function Yx(e){const a=Px();if(e==null)return!1;if(a===null||a===e)return Bb(e),!1;try{const s=[];for(let l=0;l<sessionStorage.length;l+=1){const c=sessionStorage.key(l);c&&(c.startsWith("oi:")||c===Bl||c===nu||c===to)&&s.push(c)}s.forEach(l=>sessionStorage.removeItem(l))}catch{}return Bb(e),Bc(null),!0}function hE(e){const a=Qx();if(e==null)return!1;if(a===null||a===e)return Bc(e),!1;try{const s=[];for(let l=0;l<sessionStorage.length;l+=1){const c=sessionStorage.key(l);c&&(c.startsWith("oi:")||c===Bl||c===nu||c===to)&&s.push(c)}s.forEach(l=>sessionStorage.removeItem(l))}catch{}return Bc(e),!0}function pE(){try{localStorage.removeItem(Ix),localStorage.removeItem($x),localStorage.removeItem(rE)}catch{}finally{try{window.dispatchEvent(new Event(lE))}catch{}}try{sessionStorage.removeItem(nu),sessionStorage.removeItem(Bl)}catch{}}let qb=!1;async function Kx(e){if(!qb){qb=!0;try{await no()}finally{pE();const a=e?.pending?"Sesion expirada. Inicia sesion para guardar. Tu borrador esta guardado.":"Sesion invalida o expirada";if(uE(a),typeof window<"u"&&window.location.pathname!=="/login"){const s=e?.returnTo,l=s?`?returnTo=${encodeURIComponent(s)}${e?.pending?"&pending=1":""}`:"";window.location.replace(`/login${l}`)}}}}const Li=e=>{const a=e?.response?.status,s=String(e?.response?.headers?.["x-code"]??"").toUpperCase();if(s==="PASSWORD_REQUIRED"||s==="WRONG_PASSWORD")return!1;if(a===401)return!0;const l=e?.response?.data?.detail;return!!(typeof l=="string"&&/token requerido/i.test(l))},qf=(e,a)=>{const s=a.match(e);if(!s)return null;const l=Number(s[1]);return Number.isFinite(l)?l:null},gE=e=>{if(typeof window>"u")return null;const a=String(e?.config?.method??"").toUpperCase(),s=String(e?.config?.url??""),l=`${window.location.pathname}${window.location.search}`;return a==="PUT"&&/\/oi\/\d+$/.test(s)?{type:"save_oi",route:l,oiId:qf(/\/oi\/(\d+)$/,s),ts:new Date().toISOString()}:a==="POST"&&s==="/oi"?{type:"save_oi",route:l,oiId:null,ts:new Date().toISOString()}:a==="POST"&&/\/oi\/\d+\/bancadas$/.test(s)?{type:"save_bancada",route:l,oiId:qf(/\/oi\/(\d+)\/bancadas$/,s),ts:new Date().toISOString()}:a==="PUT"&&/\/oi\/bancadas\/\d+$/.test(s)?{type:"save_bancada",route:l,bancadaId:qf(/\/oi\/bancadas\/(\d+)$/,s),ts:new Date().toISOString()}:null},yE=e=>{if(typeof window>"u")return;const{pathname:a,search:s,hash:l}=window.location,c=new URLSearchParams(s);(a==="/oi"||a.startsWith("/oi/"))&&c.set("mode","edit");const f=c.toString(),h=p=>`${p}${f?`?${f}`:""}${l??""}`;let g=h(a);if(a==="/oi"||a==="/oi/"){const p=e?.oiId??Zx();p&&(g=h(`/oi/${p}`))}return g},bE=(e,a,s,l,c)=>{try{window.dispatchEvent(new CustomEvent(iE,{detail:{status:a,detail:e,url:s,method:l,pending:c}}))}catch{}};Ye.interceptors.response.use(e=>e,async e=>{const a=e?.response?.status,s=String(e?.config?.url??""),l=e?.response?.data?.detail,c=String(e?.config?.method??"").toUpperCase();if(!s.includes("/auth/login")&&Li(e)){const f=gE(e);f&&fE(f),bE(l,a,s,c,f);const h=yE(f),g=aE(),p=g.bankId??sE(),v=f?.oiId??Zx();if(g.userId&&p!=null&&v){const x=f?.type==="save_bancada"?{type:"bancada",bancadaId:f.bancadaId??null,isNew:f.bancadaId==null}:void 0;eE({userId:g.userId,bankId:p,oiId:v,returnTo:h,modal:x})}await Kx({returnTo:h,pending:!!f})}return Promise.reject(e)});const Jm=async()=>{const{data:e}=await Ye.get("/catalogs");return e},au="medileser.selectedBank",qc="medileser:selectedBank";function Ua(e,a){if((a??"").toLowerCase()==="admin")return"admin";const l=(e??"").toLowerCase();return l==="admin"||l==="administrator"||l==="administrador"?"administrator":l==="technician"||l==="user"||l==="tecnico"||l==="tcnico"?"technician":"standard"}function Rl(e){return Ua(e)==="technician"}function Wm(e){return(e?.username??e?.user??"").toLowerCase()==="admin"}function Hi(){try{const e=localStorage.getItem(au);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}}function Xx(e){try{localStorage.setItem(au,String(e))}finally{window.dispatchEvent(new Event(qc))}}function Jx(){try{localStorage.removeItem(au)}finally{window.dispatchEvent(new Event(qc))}}function vE(e){const a=()=>e(),s=l=>{l.key===au&&e()};return window.addEventListener(qc,a),window.addEventListener("storage",s),()=>{window.removeEventListener(qc,a),window.removeEventListener("storage",s)}}async function xE(e,a){try{await Ye.put("/auth/password",{old_password:e,new_password:a})}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo actualizar la contrasea";throw new Error(l)}}async function SE(e){try{await no();const{data:a}=await Ye.post("/auth/login",e);return localStorage.setItem("vi.auth",JSON.stringify(a)),Yx(a.userId??null),!Rl(a.role)&&a.bancoId!=null&&Bc(a.bancoId),Rl(a.role)?Jx():Xx(0),a}catch(a){const s=a?.response?.status,l=a?.response?.data?.detail,c=s===401?"Credenciales invlidas":l??a?.message??"Error de autenticacin";throw new Error(c)}}function Dn(){const e=localStorage.getItem("vi.auth")??localStorage.getItem("vi_auth");if(!e)return null;try{const a=JSON.parse(e),s=a.username??a.user??"",l=[a.firstName,a.lastName].filter(Boolean).join(" ")||void 0,c={user:a.user??a.username??"",userId:a.userId??a.id??0,username:s,firstName:a.firstName??"",lastName:a.lastName??"",fullName:a.fullName??l??s,bancoId:a.bancoId??null,token:a.token,techNumber:a.techNumber,role:Ua(a.role,s),allowedModules:Array.isArray(a.allowedModules)?a.allowedModules.map(d=>d==="future_logistica"?"logistica":d):void 0};return c.username&&c.token?c:null}catch{return null}}async function Wx(e){await no();const{data:a}=await Ye.put("/auth/banco",{bancoId:e});return localStorage.setItem("vi.auth",JSON.stringify(a)),Yx(a.userId??null),hE(e),Xx(e),a}function e0(){localStorage.removeItem("vi.auth"),localStorage.removeItem("vi_auth"),Jx();try{sessionStorage.removeItem("vi.currentOI"),sessionStorage.removeItem("openOiId")}catch{}}async function NE(){await no(),e0()}function Vi({label:e,inputId:a,className:s="",inputRef:l,helpText:c,...d}){const[f,h]=y.useState(!1),g=a||d.name||void 0,{ref:p,...v}=d,x=l??p;return i.jsxs("div",{className:s,children:[e&&i.jsx("label",{className:"form-label",htmlFor:g,children:e}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{...v,id:g,type:f?"text":"password",className:"form-control",ref:x}),i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>h(N=>!N),tabIndex:-1,"aria-label":f?"Ocultar contrasea":"Mostrar contrasea",children:i.jsx("i",{className:`ti ${f?"ti-eye-off":"ti-eye"}`})})]}),c&&i.jsx("div",{className:"form-text",children:c})]})}function ql({show:e=!0,label:a="Cargando..."}){return e?i.jsxs("div",{className:"vi-spinner-overlay",role:"status","aria-live":"polite","aria-label":a,children:[i.jsx("img",{className:"vi-spinner-logo",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"","aria-hidden":"true"}),i.jsx("span",{className:"visually-hidden",children:a})]}):null}const t0=y.createContext(null);function wE(e){return e==="success"?"success":e==="error"?"danger":e==="warning"?"warning":"secondary"}function jE({children:e}){const[a,s]=y.useState([]),l=y.useCallback(d=>{const f=Date.now()+Math.random(),{kind:h="info",duration:g=3500,...p}=d,v={id:f,kind:h,duration:g,...p};s(x=>[...x,v]),window.setTimeout(()=>{s(x=>x.filter(N=>N.id!==f))},g)},[]),c=d=>s(f=>f.filter(h=>h.id!==d));return i.jsxs(t0.Provider,{value:{push:l},children:[e,i.jsx("div",{className:"vi-toast-container position-fixed top-0 end-0 p-3",children:a.map(d=>i.jsx("div",{className:`toast show align-items-center text-bg-${wE(d.kind)} border-0 mb-2`,role:"alert",children:i.jsxs("div",{className:"d-flex",children:[i.jsxs("div",{className:"toast-body",children:[d.title&&i.jsx("strong",{className:"me-2",children:d.title}),d.message]}),i.jsx("button",{className:"btn-close btn-close-white me-2 m-auto","aria-label":"Close",onClick:()=>c(d.id)})]})},d.id))})]})}function Br(){const e=y.useContext(t0);if(!e)throw new Error("useToast must be used inside <ToastProvider>");return{toast:e.push}}function _E(){const{register:e,handleSubmit:a}=Kc({defaultValues:{username:"",password:""}}),{toast:s}=Br(),l=new URLSearchParams(window.location.search),c=l.get("returnTo")??"",d=c.startsWith("/")?c:"/home",f=l.get("pending")==="1",[h,g]=y.useState(!1),p=y.useRef(d),[v,x]=y.useState(!1),[N,q]=y.useState(0),[j,_]=y.useState(!1),{data:C,isLoading:B,error:T,refetch:K}=zr({queryKey:["catalogs"],queryFn:Jm,enabled:v}),D=C?.bancos??[];y.useEffect(()=>{const ce=dE();ce&&s({kind:"error",message:ce})},[s]),y.useEffect(()=>{v&&(N>0||D.length>0&&q(D[0].id))},[N,D,v]);const R=async ce=>{try{g(!0);const _e=Px(),xe=await SE(ce),me=_e!=null&&xe.userId&&_e!==xe.userId,Se=gm(xe.userId,xe.bancoId??0);if(Se.target?p.current=Se.target:f||me?p.current="/home":p.current=d,Rl(xe.role)){x(!0),s({kind:"info",title:"Banco",message:"Seleccione el banco para continuar."});return}window.location.replace(p.current)}catch(_e){const xe=_e?.message??_e?.response?.data?.detail??(typeof _e=="string"?_e:"Error de autenticacin");s({kind:"error",title:"Login",message:String(xe)})}finally{g(!1)}},Z=N>0&&!j&&!B,U=async()=>{if(Z)try{_(!0);const ce=Qx(),_e=ce!=null&&ce!==N,xe=await Wx(N),me=gm(xe.userId,xe.bancoId??N);me.target?p.current=me.target:(f||_e)&&(p.current="/home"),window.location.replace(p.current)}catch(ce){const _e=ce?.response?.data?.detail??ce?.message??"No se pudo guardar el banco.";s({kind:"error",title:"Banco",message:String(_e)})}finally{_(!1)}},X=()=>{e0(),x(!1),q(0)};return i.jsxs("div",{className:"vi-login",children:[i.jsx(ql,{show:h||j,label:j?"Guardando banco...":"Validando credenciales..."}),i.jsxs("div",{className:"vi-login__split",children:[i.jsx("section",{className:"vi-login__left",children:i.jsx("div",{className:"text-center text-md-start",children:i.jsx("h1",{className:"vi-title display-6 mb-0",children:"ACCESO AL SISTEMA MEDILESER APP"})})}),i.jsx("section",{className:"vi-login__right",children:i.jsx("div",{className:"card shadow-sm vi-login__card",children:i.jsxs("div",{className:"card-body p-4 p-md-5",children:[i.jsx("h2",{className:"h4 text-center mb-4",children:"Bienvenido"}),i.jsxs("form",{onSubmit:a(R),className:"row g-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{htmlFor:"username",className:"form-label",children:"Usuario"}),i.jsx("input",{id:"username",className:"form-control",autoFocus:!0,autoComplete:"username",...e("username",{required:!0})})]}),i.jsx("div",{className:"col-md-6",children:i.jsx(Vi,{label:"Contrasea",inputId:"password",autoComplete:"current-password",...e("password",{required:!0})})}),i.jsx("div",{className:"col-12 d-grid",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h||v,"aria-busy":h?"true":"false",children:h?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Ingresando..."]}):"Ingresar"})})]})]})})})]}),v&&i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:i.jsx("div",{className:"modal-dialog modal-dialog-centered",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("div",{className:"modal-header",children:i.jsx("h5",{className:"modal-title",children:"Seleccionar banco"})}),i.jsxs("div",{className:"modal-body",children:[i.jsx("p",{className:"text-muted mb-3",children:"Seleccione el banco de trabajo para continuar."}),i.jsx("label",{className:"form-label",htmlFor:"bankId",children:"Banco"}),i.jsx("select",{id:"bankId",className:"form-select",value:N||"",onChange:ce=>q(Number(ce.target.value)),disabled:B||j,children:D.map(ce=>i.jsx("option",{value:ce.id,children:ce.name},ce.id))}),T?i.jsxs("div",{className:"alert alert-danger mt-3 mb-0",role:"alert",children:["No se pudieron cargar los bancos.",i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger ms-2",onClick:()=>K(),children:"Reintentar"})]}):null]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:X,disabled:j,children:"Cancelar"}),i.jsx("button",{type:"button",className:"btn btn-primary",disabled:!Z,onClick:U,children:j?"Guardando...":"Continuar"})]})]})})})]})}const Ib=(e,a,s)=>{if(e&&"reportValidity"in e){const l=qe(s,a);e.setCustomValidity(l&&l.message||""),e.reportValidity()}},xm=(e,a)=>{for(const s in a.fields){const l=a.fields[s];l&&l.ref&&"reportValidity"in l.ref?Ib(l.ref,s,e):l&&l.refs&&l.refs.forEach(c=>Ib(c,s,e))}},$b=(e,a)=>{a.shouldUseNativeValidation&&xm(e,a);const s={};for(const l in e){const c=qe(a.fields,l),d=Object.assign(e[l]||{},{ref:c&&c.ref});if(EE(a.names||Object.keys(e),l)){const f=Object.assign({},qe(s,l));Mt(f,"root",d),Mt(s,l,f)}else Mt(s,l,d)}return s},EE=(e,a)=>{const s=Fb(a);return e.some(l=>Fb(l).match(`^${s}\\.\\d+`))};function Fb(e){return e.replace(/\]|\[/g,"")}function we(e,a,s){function l(h,g){var p;Object.defineProperty(h,"_zod",{value:h._zod??{},enumerable:!1}),(p=h._zod).traits??(p.traits=new Set),h._zod.traits.add(e),a(h,g);for(const v in f.prototype)v in h||Object.defineProperty(h,v,{value:f.prototype[v].bind(h)});h._zod.constr=f,h._zod.def=g}const c=s?.Parent??Object;class d extends c{}Object.defineProperty(d,"name",{value:e});function f(h){var g;const p=s?.Parent?new d:this;l(p,h),(g=p._zod).deferred??(g.deferred=[]);for(const v of p._zod.deferred)v();return p}return Object.defineProperty(f,"init",{value:l}),Object.defineProperty(f,Symbol.hasInstance,{value:h=>s?.Parent&&h instanceof s.Parent?!0:h?._zod?.traits?.has(e)}),Object.defineProperty(f,"name",{value:e}),f}class Cl extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class n0 extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}const a0={};function kr(e){return a0}function AE(e){const a=Object.values(e).filter(l=>typeof l=="number");return Object.entries(e).filter(([l,c])=>a.indexOf(+l)===-1).map(([l,c])=>c)}function Sm(e,a){return typeof a=="bigint"?a.toString():a}function eh(e){return{get value(){{const a=e();return Object.defineProperty(this,"value",{value:a}),a}}}}function th(e){return e==null}function nh(e){const a=e.startsWith("^")?1:0,s=e.endsWith("$")?e.length-1:e.length;return e.slice(a,s)}function CE(e,a){const s=(e.toString().split(".")[1]||"").length,l=a.toString();let c=(l.split(".")[1]||"").length;if(c===0&&/\d?e-\d?/.test(l)){const g=l.match(/\d?e-(\d?)/);g?.[1]&&(c=Number.parseInt(g[1]))}const d=s>c?s:c,f=Number.parseInt(e.toFixed(d).replace(".","")),h=Number.parseInt(a.toFixed(d).replace(".",""));return f%h/10**d}const Hb=Symbol("evaluating");function Ht(e,a,s){let l;Object.defineProperty(e,a,{get(){if(l!==Hb)return l===void 0&&(l=Hb,l=s()),l},set(c){Object.defineProperty(e,a,{value:c})},configurable:!0})}function qr(e,a,s){Object.defineProperty(e,a,{value:s,writable:!0,enumerable:!0,configurable:!0})}function Ir(...e){const a={};for(const s of e){const l=Object.getOwnPropertyDescriptors(s);Object.assign(a,l)}return Object.defineProperties({},a)}function Vb(e){return JSON.stringify(e)}const s0="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Ic(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const OE=eh(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Zi(e){if(Ic(e)===!1)return!1;const a=e.constructor;if(a===void 0)return!0;const s=a.prototype;return!(Ic(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}function r0(e){return Zi(e)?{...e}:Array.isArray(e)?[...e]:e}const RE=new Set(["string","number","symbol"]);function su(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function lr(e,a,s){const l=new e._zod.constr(a??e._zod.def);return(!a||s?.parent)&&(l._zod.parent=e),l}function et(e){const a=e;if(!a)return{};if(typeof a=="string")return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");a.error=a.message}return delete a.message,typeof a.error=="string"?{...a,error:()=>a.error}:a}function TE(e){return Object.keys(e).filter(a=>e[a]._zod.optin==="optional"&&e[a]._zod.optout==="optional")}const DE={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function zE(e,a){const s=e._zod.def,l=Ir(e._zod.def,{get shape(){const c={};for(const d in a){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);a[d]&&(c[d]=s.shape[d])}return qr(this,"shape",c),c},checks:[]});return lr(e,l)}function ME(e,a){const s=e._zod.def,l=Ir(e._zod.def,{get shape(){const c={...e._zod.def.shape};for(const d in a){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);a[d]&&delete c[d]}return qr(this,"shape",c),c},checks:[]});return lr(e,l)}function kE(e,a){if(!Zi(a))throw new Error("Invalid input to extend: expected a plain object");const s=e._zod.def.checks;if(s&&s.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const c=Ir(e._zod.def,{get shape(){const d={...e._zod.def.shape,...a};return qr(this,"shape",d),d},checks:[]});return lr(e,c)}function UE(e,a){if(!Zi(a))throw new Error("Invalid input to safeExtend: expected a plain object");const s={...e._zod.def,get shape(){const l={...e._zod.def.shape,...a};return qr(this,"shape",l),l},checks:e._zod.def.checks};return lr(e,s)}function LE(e,a){const s=Ir(e._zod.def,{get shape(){const l={...e._zod.def.shape,...a._zod.def.shape};return qr(this,"shape",l),l},get catchall(){return a._zod.def.catchall},checks:[]});return lr(e,s)}function BE(e,a,s){const l=Ir(a._zod.def,{get shape(){const c=a._zod.def.shape,d={...c};if(s)for(const f in s){if(!(f in c))throw new Error(`Unrecognized key: "${f}"`);s[f]&&(d[f]=e?new e({type:"optional",innerType:c[f]}):c[f])}else for(const f in c)d[f]=e?new e({type:"optional",innerType:c[f]}):c[f];return qr(this,"shape",d),d},checks:[]});return lr(a,l)}function qE(e,a,s){const l=Ir(a._zod.def,{get shape(){const c=a._zod.def.shape,d={...c};if(s)for(const f in s){if(!(f in d))throw new Error(`Unrecognized key: "${f}"`);s[f]&&(d[f]=new e({type:"nonoptional",innerType:c[f]}))}else for(const f in c)d[f]=new e({type:"nonoptional",innerType:c[f]});return qr(this,"shape",d),d},checks:[]});return lr(a,l)}function El(e,a=0){if(e.aborted===!0)return!0;for(let s=a;s<e.issues.length;s++)if(e.issues[s]?.continue!==!0)return!0;return!1}function l0(e,a){return a.map(s=>{var l;return(l=s).path??(l.path=[]),s.path.unshift(e),s})}function vc(e){return typeof e=="string"?e:e?.message}function Ur(e,a,s){const l={...e,path:e.path??[]};if(!e.message){const c=vc(e.inst?._zod.def?.error?.(e))??vc(a?.error?.(e))??vc(s.customError?.(e))??vc(s.localeError?.(e))??"Invalid input";l.message=c}return delete l.inst,delete l.continue,a?.reportInput||delete l.input,l}function ah(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Gi(...e){const[a,s,l]=e;return typeof a=="string"?{message:a,code:"custom",input:s,inst:l}:{...a}}const i0=(e,a)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:a,enumerable:!1}),e.message=JSON.stringify(a,Sm,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},sh=we("$ZodError",i0),ru=we("$ZodError",i0,{Parent:Error});function IE(e,a=s=>s.message){const s={},l=[];for(const c of e.issues)c.path.length>0?(s[c.path[0]]=s[c.path[0]]||[],s[c.path[0]].push(a(c))):l.push(a(c));return{formErrors:l,fieldErrors:s}}function $E(e,a=s=>s.message){const s={_errors:[]},l=c=>{for(const d of c.issues)if(d.code==="invalid_union"&&d.errors.length)d.errors.map(f=>l({issues:f}));else if(d.code==="invalid_key")l({issues:d.issues});else if(d.code==="invalid_element")l({issues:d.issues});else if(d.path.length===0)s._errors.push(a(d));else{let f=s,h=0;for(;h<d.path.length;){const g=d.path[h];h===d.path.length-1?(f[g]=f[g]||{_errors:[]},f[g]._errors.push(a(d))):f[g]=f[g]||{_errors:[]},f=f[g],h++}}};return l(e),s}const lu=e=>(a,s,l,c)=>{const d=l?Object.assign(l,{async:!1}):{async:!1},f=a._zod.run({value:s,issues:[]},d);if(f instanceof Promise)throw new Cl;if(f.issues.length){const h=new(c?.Err??e)(f.issues.map(g=>Ur(g,d,kr())));throw s0(h,c?.callee),h}return f.value},FE=lu(ru),iu=e=>async(a,s,l,c)=>{const d=l?Object.assign(l,{async:!0}):{async:!0};let f=a._zod.run({value:s,issues:[]},d);if(f instanceof Promise&&(f=await f),f.issues.length){const h=new(c?.Err??e)(f.issues.map(g=>Ur(g,d,kr())));throw s0(h,c?.callee),h}return f.value},HE=iu(ru),ou=e=>(a,s,l)=>{const c=l?{...l,async:!1}:{async:!1},d=a._zod.run({value:s,issues:[]},c);if(d instanceof Promise)throw new Cl;return d.issues.length?{success:!1,error:new(e??sh)(d.issues.map(f=>Ur(f,c,kr())))}:{success:!0,data:d.value}},VE=ou(ru),cu=e=>async(a,s,l)=>{const c=l?Object.assign(l,{async:!0}):{async:!0};let d=a._zod.run({value:s,issues:[]},c);return d instanceof Promise&&(d=await d),d.issues.length?{success:!1,error:new e(d.issues.map(f=>Ur(f,c,kr())))}:{success:!0,data:d.value}},ZE=cu(ru),GE=e=>(a,s,l)=>{const c=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return lu(e)(a,s,c)},PE=e=>(a,s,l)=>lu(e)(a,s,l),QE=e=>async(a,s,l)=>{const c=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return iu(e)(a,s,c)},YE=e=>async(a,s,l)=>iu(e)(a,s,l),KE=e=>(a,s,l)=>{const c=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return ou(e)(a,s,c)},XE=e=>(a,s,l)=>ou(e)(a,s,l),JE=e=>async(a,s,l)=>{const c=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return cu(e)(a,s,c)},WE=e=>async(a,s,l)=>cu(e)(a,s,l),eA=/^[cC][^\s-]{8,}$/,tA=/^[0-9a-z]+$/,nA=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,aA=/^[0-9a-vA-V]{20}$/,sA=/^[A-Za-z0-9]{27}$/,rA=/^[a-zA-Z0-9_-]{21}$/,lA=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,iA=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Zb=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,oA=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,cA="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function uA(){return new RegExp(cA,"u")}const dA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,fA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,mA=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,hA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,pA=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,o0=/^[A-Za-z0-9_-]*$/,gA=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,yA=/^\+(?:[0-9]){6,14}[0-9]$/,c0="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",bA=new RegExp(`^${c0}$`);function u0(e){const a="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${a}`:e.precision===0?`${a}:[0-5]\\d`:`${a}:[0-5]\\d\\.\\d{${e.precision}}`:`${a}(?::[0-5]\\d(?:\\.\\d+)?)?`}function vA(e){return new RegExp(`^${u0(e)}$`)}function xA(e){const a=u0({precision:e.precision}),s=["Z"];e.local&&s.push(""),e.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const l=`${a}(?:${s.join("|")})`;return new RegExp(`^${c0}T(?:${l})$`)}const SA=e=>{const a=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${a}$`)},NA=/^-?\d+$/,wA=/^-?\d+(?:\.\d+)?/,jA=/^[^A-Z]*$/,_A=/^[^a-z]*$/,ga=we("$ZodCheck",(e,a)=>{var s;e._zod??(e._zod={}),e._zod.def=a,(s=e._zod).onattach??(s.onattach=[])}),d0={number:"number",bigint:"bigint",object:"date"},f0=we("$ZodCheckLessThan",(e,a)=>{ga.init(e,a);const s=d0[typeof a.value];e._zod.onattach.push(l=>{const c=l._zod.bag,d=(a.inclusive?c.maximum:c.exclusiveMaximum)??Number.POSITIVE_INFINITY;a.value<d&&(a.inclusive?c.maximum=a.value:c.exclusiveMaximum=a.value)}),e._zod.check=l=>{(a.inclusive?l.value<=a.value:l.value<a.value)||l.issues.push({origin:s,code:"too_big",maximum:a.value,input:l.value,inclusive:a.inclusive,inst:e,continue:!a.abort})}}),m0=we("$ZodCheckGreaterThan",(e,a)=>{ga.init(e,a);const s=d0[typeof a.value];e._zod.onattach.push(l=>{const c=l._zod.bag,d=(a.inclusive?c.minimum:c.exclusiveMinimum)??Number.NEGATIVE_INFINITY;a.value>d&&(a.inclusive?c.minimum=a.value:c.exclusiveMinimum=a.value)}),e._zod.check=l=>{(a.inclusive?l.value>=a.value:l.value>a.value)||l.issues.push({origin:s,code:"too_small",minimum:a.value,input:l.value,inclusive:a.inclusive,inst:e,continue:!a.abort})}}),EA=we("$ZodCheckMultipleOf",(e,a)=>{ga.init(e,a),e._zod.onattach.push(s=>{var l;(l=s._zod.bag).multipleOf??(l.multipleOf=a.value)}),e._zod.check=s=>{if(typeof s.value!=typeof a.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof s.value=="bigint"?s.value%a.value===BigInt(0):CE(s.value,a.value)===0)||s.issues.push({origin:typeof s.value,code:"not_multiple_of",divisor:a.value,input:s.value,inst:e,continue:!a.abort})}}),AA=we("$ZodCheckNumberFormat",(e,a)=>{ga.init(e,a),a.format=a.format||"float64";const s=a.format?.includes("int"),l=s?"int":"number",[c,d]=DE[a.format];e._zod.onattach.push(f=>{const h=f._zod.bag;h.format=a.format,h.minimum=c,h.maximum=d,s&&(h.pattern=NA)}),e._zod.check=f=>{const h=f.value;if(s){if(!Number.isInteger(h)){f.issues.push({expected:l,format:a.format,code:"invalid_type",continue:!1,input:h,inst:e});return}if(!Number.isSafeInteger(h)){h>0?f.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:l,continue:!a.abort}):f.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:l,continue:!a.abort});return}}h<c&&f.issues.push({origin:"number",input:h,code:"too_small",minimum:c,inclusive:!0,inst:e,continue:!a.abort}),h>d&&f.issues.push({origin:"number",input:h,code:"too_big",maximum:d,inst:e})}}),CA=we("$ZodCheckMaxLength",(e,a)=>{var s;ga.init(e,a),(s=e._zod.def).when??(s.when=l=>{const c=l.value;return!th(c)&&c.length!==void 0}),e._zod.onattach.push(l=>{const c=l._zod.bag.maximum??Number.POSITIVE_INFINITY;a.maximum<c&&(l._zod.bag.maximum=a.maximum)}),e._zod.check=l=>{const c=l.value;if(c.length<=a.maximum)return;const f=ah(c);l.issues.push({origin:f,code:"too_big",maximum:a.maximum,inclusive:!0,input:c,inst:e,continue:!a.abort})}}),OA=we("$ZodCheckMinLength",(e,a)=>{var s;ga.init(e,a),(s=e._zod.def).when??(s.when=l=>{const c=l.value;return!th(c)&&c.length!==void 0}),e._zod.onattach.push(l=>{const c=l._zod.bag.minimum??Number.NEGATIVE_INFINITY;a.minimum>c&&(l._zod.bag.minimum=a.minimum)}),e._zod.check=l=>{const c=l.value;if(c.length>=a.minimum)return;const f=ah(c);l.issues.push({origin:f,code:"too_small",minimum:a.minimum,inclusive:!0,input:c,inst:e,continue:!a.abort})}}),RA=we("$ZodCheckLengthEquals",(e,a)=>{var s;ga.init(e,a),(s=e._zod.def).when??(s.when=l=>{const c=l.value;return!th(c)&&c.length!==void 0}),e._zod.onattach.push(l=>{const c=l._zod.bag;c.minimum=a.length,c.maximum=a.length,c.length=a.length}),e._zod.check=l=>{const c=l.value,d=c.length;if(d===a.length)return;const f=ah(c),h=d>a.length;l.issues.push({origin:f,...h?{code:"too_big",maximum:a.length}:{code:"too_small",minimum:a.length},inclusive:!0,exact:!0,input:l.value,inst:e,continue:!a.abort})}}),uu=we("$ZodCheckStringFormat",(e,a)=>{var s,l;ga.init(e,a),e._zod.onattach.push(c=>{const d=c._zod.bag;d.format=a.format,a.pattern&&(d.patterns??(d.patterns=new Set),d.patterns.add(a.pattern))}),a.pattern?(s=e._zod).check??(s.check=c=>{a.pattern.lastIndex=0,!a.pattern.test(c.value)&&c.issues.push({origin:"string",code:"invalid_format",format:a.format,input:c.value,...a.pattern?{pattern:a.pattern.toString()}:{},inst:e,continue:!a.abort})}):(l=e._zod).check??(l.check=()=>{})}),TA=we("$ZodCheckRegex",(e,a)=>{uu.init(e,a),e._zod.check=s=>{a.pattern.lastIndex=0,!a.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:a.pattern.toString(),inst:e,continue:!a.abort})}}),DA=we("$ZodCheckLowerCase",(e,a)=>{a.pattern??(a.pattern=jA),uu.init(e,a)}),zA=we("$ZodCheckUpperCase",(e,a)=>{a.pattern??(a.pattern=_A),uu.init(e,a)}),MA=we("$ZodCheckIncludes",(e,a)=>{ga.init(e,a);const s=su(a.includes),l=new RegExp(typeof a.position=="number"?`^.{${a.position}}${s}`:s);a.pattern=l,e._zod.onattach.push(c=>{const d=c._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(l)}),e._zod.check=c=>{c.value.includes(a.includes,a.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:a.includes,input:c.value,inst:e,continue:!a.abort})}}),kA=we("$ZodCheckStartsWith",(e,a)=>{ga.init(e,a);const s=new RegExp(`^${su(a.prefix)}.*`);a.pattern??(a.pattern=s),e._zod.onattach.push(l=>{const c=l._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(s)}),e._zod.check=l=>{l.value.startsWith(a.prefix)||l.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:a.prefix,input:l.value,inst:e,continue:!a.abort})}}),UA=we("$ZodCheckEndsWith",(e,a)=>{ga.init(e,a);const s=new RegExp(`.*${su(a.suffix)}$`);a.pattern??(a.pattern=s),e._zod.onattach.push(l=>{const c=l._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(s)}),e._zod.check=l=>{l.value.endsWith(a.suffix)||l.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:a.suffix,input:l.value,inst:e,continue:!a.abort})}}),LA=we("$ZodCheckOverwrite",(e,a)=>{ga.init(e,a),e._zod.check=s=>{s.value=a.tx(s.value)}});class BA{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if(typeof a=="function"){a(this,{execution:"sync"}),a(this,{execution:"async"});return}const l=a.split(`
`).filter(f=>f),c=Math.min(...l.map(f=>f.length-f.trimStart().length)),d=l.map(f=>f.slice(c)).map(f=>" ".repeat(this.indent*2)+f);for(const f of d)this.content.push(f)}compile(){const a=Function,s=this?.args,c=[...(this?.content??[""]).map(d=>`  ${d}`)];return new a(...s,c.join(`
`))}}const qA={major:4,minor:1,patch:12},En=we("$ZodType",(e,a)=>{var s;e??(e={}),e._zod.def=a,e._zod.bag=e._zod.bag||{},e._zod.version=qA;const l=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&l.unshift(e);for(const c of l)for(const d of c._zod.onattach)d(e);if(l.length===0)(s=e._zod).deferred??(s.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const c=(f,h,g)=>{let p=El(f),v;for(const x of h){if(x._zod.def.when){if(!x._zod.def.when(f))continue}else if(p)continue;const N=f.issues.length,q=x._zod.check(f);if(q instanceof Promise&&g?.async===!1)throw new Cl;if(v||q instanceof Promise)v=(v??Promise.resolve()).then(async()=>{await q,f.issues.length!==N&&(p||(p=El(f,N)))});else{if(f.issues.length===N)continue;p||(p=El(f,N))}}return v?v.then(()=>f):f},d=(f,h,g)=>{if(El(f))return f.aborted=!0,f;const p=c(h,l,g);if(p instanceof Promise){if(g.async===!1)throw new Cl;return p.then(v=>e._zod.parse(v,g))}return e._zod.parse(p,g)};e._zod.run=(f,h)=>{if(h.skipChecks)return e._zod.parse(f,h);if(h.direction==="backward"){const p=e._zod.parse({value:f.value,issues:[]},{...h,skipChecks:!0});return p instanceof Promise?p.then(v=>d(v,f,h)):d(p,f,h)}const g=e._zod.parse(f,h);if(g instanceof Promise){if(h.async===!1)throw new Cl;return g.then(p=>c(p,l,h))}return c(g,l,h)}}e["~standard"]={validate:c=>{try{const d=VE(e,c);return d.success?{value:d.data}:{issues:d.error?.issues}}catch{return ZE(e,c).then(f=>f.success?{value:f.data}:{issues:f.error?.issues})}},vendor:"zod",version:1}}),rh=we("$ZodString",(e,a)=>{En.init(e,a),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??SA(e._zod.bag),e._zod.parse=(s,l)=>{if(a.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),Jt=we("$ZodStringFormat",(e,a)=>{uu.init(e,a),rh.init(e,a)}),IA=we("$ZodGUID",(e,a)=>{a.pattern??(a.pattern=iA),Jt.init(e,a)}),$A=we("$ZodUUID",(e,a)=>{if(a.version){const l={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[a.version];if(l===void 0)throw new Error(`Invalid UUID version: "${a.version}"`);a.pattern??(a.pattern=Zb(l))}else a.pattern??(a.pattern=Zb());Jt.init(e,a)}),FA=we("$ZodEmail",(e,a)=>{a.pattern??(a.pattern=oA),Jt.init(e,a)}),HA=we("$ZodURL",(e,a)=>{Jt.init(e,a),e._zod.check=s=>{try{const l=s.value.trim(),c=new URL(l);a.hostname&&(a.hostname.lastIndex=0,a.hostname.test(c.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:gA.source,input:s.value,inst:e,continue:!a.abort})),a.protocol&&(a.protocol.lastIndex=0,a.protocol.test(c.protocol.endsWith(":")?c.protocol.slice(0,-1):c.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:a.protocol.source,input:s.value,inst:e,continue:!a.abort})),a.normalize?s.value=c.href:s.value=l;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:e,continue:!a.abort})}}}),VA=we("$ZodEmoji",(e,a)=>{a.pattern??(a.pattern=uA()),Jt.init(e,a)}),ZA=we("$ZodNanoID",(e,a)=>{a.pattern??(a.pattern=rA),Jt.init(e,a)}),GA=we("$ZodCUID",(e,a)=>{a.pattern??(a.pattern=eA),Jt.init(e,a)}),PA=we("$ZodCUID2",(e,a)=>{a.pattern??(a.pattern=tA),Jt.init(e,a)}),QA=we("$ZodULID",(e,a)=>{a.pattern??(a.pattern=nA),Jt.init(e,a)}),YA=we("$ZodXID",(e,a)=>{a.pattern??(a.pattern=aA),Jt.init(e,a)}),KA=we("$ZodKSUID",(e,a)=>{a.pattern??(a.pattern=sA),Jt.init(e,a)}),XA=we("$ZodISODateTime",(e,a)=>{a.pattern??(a.pattern=xA(a)),Jt.init(e,a)}),JA=we("$ZodISODate",(e,a)=>{a.pattern??(a.pattern=bA),Jt.init(e,a)}),WA=we("$ZodISOTime",(e,a)=>{a.pattern??(a.pattern=vA(a)),Jt.init(e,a)}),eC=we("$ZodISODuration",(e,a)=>{a.pattern??(a.pattern=lA),Jt.init(e,a)}),tC=we("$ZodIPv4",(e,a)=>{a.pattern??(a.pattern=dA),Jt.init(e,a),e._zod.onattach.push(s=>{const l=s._zod.bag;l.format="ipv4"})}),nC=we("$ZodIPv6",(e,a)=>{a.pattern??(a.pattern=fA),Jt.init(e,a),e._zod.onattach.push(s=>{const l=s._zod.bag;l.format="ipv6"}),e._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:e,continue:!a.abort})}}}),aC=we("$ZodCIDRv4",(e,a)=>{a.pattern??(a.pattern=mA),Jt.init(e,a)}),sC=we("$ZodCIDRv6",(e,a)=>{a.pattern??(a.pattern=hA),Jt.init(e,a),e._zod.check=s=>{const l=s.value.split("/");try{if(l.length!==2)throw new Error;const[c,d]=l;if(!d)throw new Error;const f=Number(d);if(`${f}`!==d)throw new Error;if(f<0||f>128)throw new Error;new URL(`http://[${c}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:e,continue:!a.abort})}}});function h0(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const rC=we("$ZodBase64",(e,a)=>{a.pattern??(a.pattern=pA),Jt.init(e,a),e._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64"}),e._zod.check=s=>{h0(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:e,continue:!a.abort})}});function lC(e){if(!o0.test(e))return!1;const a=e.replace(/[-_]/g,l=>l==="-"?"+":"/"),s=a.padEnd(Math.ceil(a.length/4)*4,"=");return h0(s)}const iC=we("$ZodBase64URL",(e,a)=>{a.pattern??(a.pattern=o0),Jt.init(e,a),e._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64url"}),e._zod.check=s=>{lC(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:e,continue:!a.abort})}}),oC=we("$ZodE164",(e,a)=>{a.pattern??(a.pattern=yA),Jt.init(e,a)});function cC(e,a=null){try{const s=e.split(".");if(s.length!==3)return!1;const[l]=s;if(!l)return!1;const c=JSON.parse(atob(l));return!("typ"in c&&c?.typ!=="JWT"||!c.alg||a&&(!("alg"in c)||c.alg!==a))}catch{return!1}}const uC=we("$ZodJWT",(e,a)=>{Jt.init(e,a),e._zod.check=s=>{cC(s.value,a.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:e,continue:!a.abort})}}),p0=we("$ZodNumber",(e,a)=>{En.init(e,a),e._zod.pattern=e._zod.bag.pattern??wA,e._zod.parse=(s,l)=>{if(a.coerce)try{s.value=Number(s.value)}catch{}const c=s.value;if(typeof c=="number"&&!Number.isNaN(c)&&Number.isFinite(c))return s;const d=typeof c=="number"?Number.isNaN(c)?"NaN":Number.isFinite(c)?void 0:"Infinity":void 0;return s.issues.push({expected:"number",code:"invalid_type",input:c,inst:e,...d?{received:d}:{}}),s}}),dC=we("$ZodNumber",(e,a)=>{AA.init(e,a),p0.init(e,a)}),fC=we("$ZodUnknown",(e,a)=>{En.init(e,a),e._zod.parse=s=>s}),mC=we("$ZodNever",(e,a)=>{En.init(e,a),e._zod.parse=(s,l)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:e}),s)});function Gb(e,a,s){e.issues.length&&a.issues.push(...l0(s,e.issues)),a.value[s]=e.value}const hC=we("$ZodArray",(e,a)=>{En.init(e,a),e._zod.parse=(s,l)=>{const c=s.value;if(!Array.isArray(c))return s.issues.push({expected:"array",code:"invalid_type",input:c,inst:e}),s;s.value=Array(c.length);const d=[];for(let f=0;f<c.length;f++){const h=c[f],g=a.element._zod.run({value:h,issues:[]},l);g instanceof Promise?d.push(g.then(p=>Gb(p,s,f))):Gb(g,s,f)}return d.length?Promise.all(d).then(()=>s):s}});function $c(e,a,s,l){e.issues.length&&a.issues.push(...l0(s,e.issues)),e.value===void 0?s in l&&(a.value[s]=void 0):a.value[s]=e.value}function g0(e){const a=Object.keys(e.shape);for(const l of a)if(!e.shape?.[l]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${l}": expected a Zod schema`);const s=TE(e.shape);return{...e,keys:a,keySet:new Set(a),numKeys:a.length,optionalKeys:new Set(s)}}function y0(e,a,s,l,c,d){const f=[],h=c.keySet,g=c.catchall._zod,p=g.def.type;for(const v of Object.keys(a)){if(h.has(v))continue;if(p==="never"){f.push(v);continue}const x=g.run({value:a[v],issues:[]},l);x instanceof Promise?e.push(x.then(N=>$c(N,s,v,a))):$c(x,s,v,a)}return f.length&&s.issues.push({code:"unrecognized_keys",keys:f,input:a,inst:d}),e.length?Promise.all(e).then(()=>s):s}const pC=we("$ZodObject",(e,a)=>{if(En.init(e,a),!Object.getOwnPropertyDescriptor(a,"shape")?.get){const h=a.shape;Object.defineProperty(a,"shape",{get:()=>{const g={...h};return Object.defineProperty(a,"shape",{value:g}),g}})}const l=eh(()=>g0(a));Ht(e._zod,"propValues",()=>{const h=a.shape,g={};for(const p in h){const v=h[p]._zod;if(v.values){g[p]??(g[p]=new Set);for(const x of v.values)g[p].add(x)}}return g});const c=Ic,d=a.catchall;let f;e._zod.parse=(h,g)=>{f??(f=l.value);const p=h.value;if(!c(p))return h.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),h;h.value={};const v=[],x=f.shape;for(const N of f.keys){const j=x[N]._zod.run({value:p[N],issues:[]},g);j instanceof Promise?v.push(j.then(_=>$c(_,h,N,p))):$c(j,h,N,p)}return d?y0(v,p,h,g,l.value,e):v.length?Promise.all(v).then(()=>h):h}}),gC=we("$ZodObjectJIT",(e,a)=>{pC.init(e,a);const s=e._zod.parse,l=eh(()=>g0(a)),c=N=>{const q=new BA(["shape","payload","ctx"]),j=l.value,_=K=>{const D=Vb(K);return`shape[${D}]._zod.run({ value: input[${D}], issues: [] }, ctx)`};q.write("const input = payload.value;");const C=Object.create(null);let B=0;for(const K of j.keys)C[K]=`key_${B++}`;q.write("const newResult = {};");for(const K of j.keys){const D=C[K],R=Vb(K);q.write(`const ${D} = ${_(K)};`),q.write(`
        if (${D}.issues.length) {
          payload.issues = payload.issues.concat(${D}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${R}, ...iss.path] : [${R}]
          })));
        }
        
        
        if (${D}.value === undefined) {
          if (${R} in input) {
            newResult[${R}] = undefined;
          }
        } else {
          newResult[${R}] = ${D}.value;
        }
        
      `)}q.write("payload.value = newResult;"),q.write("return payload;");const T=q.compile();return(K,D)=>T(N,K,D)};let d;const f=Ic,h=!a0.jitless,p=h&&OE.value,v=a.catchall;let x;e._zod.parse=(N,q)=>{x??(x=l.value);const j=N.value;return f(j)?h&&p&&q?.async===!1&&q.jitless!==!0?(d||(d=c(a.shape)),N=d(N,q),v?y0([],j,N,q,x,e):N):s(N,q):(N.issues.push({expected:"object",code:"invalid_type",input:j,inst:e}),N)}});function Pb(e,a,s,l){for(const d of e)if(d.issues.length===0)return a.value=d.value,a;const c=e.filter(d=>!El(d));return c.length===1?(a.value=c[0].value,c[0]):(a.issues.push({code:"invalid_union",input:a.value,inst:s,errors:e.map(d=>d.issues.map(f=>Ur(f,l,kr())))}),a)}const yC=we("$ZodUnion",(e,a)=>{En.init(e,a),Ht(e._zod,"optin",()=>a.options.some(c=>c._zod.optin==="optional")?"optional":void 0),Ht(e._zod,"optout",()=>a.options.some(c=>c._zod.optout==="optional")?"optional":void 0),Ht(e._zod,"values",()=>{if(a.options.every(c=>c._zod.values))return new Set(a.options.flatMap(c=>Array.from(c._zod.values)))}),Ht(e._zod,"pattern",()=>{if(a.options.every(c=>c._zod.pattern)){const c=a.options.map(d=>d._zod.pattern);return new RegExp(`^(${c.map(d=>nh(d.source)).join("|")})$`)}});const s=a.options.length===1,l=a.options[0]._zod.run;e._zod.parse=(c,d)=>{if(s)return l(c,d);let f=!1;const h=[];for(const g of a.options){const p=g._zod.run({value:c.value,issues:[]},d);if(p instanceof Promise)h.push(p),f=!0;else{if(p.issues.length===0)return p;h.push(p)}}return f?Promise.all(h).then(g=>Pb(g,c,e,d)):Pb(h,c,e,d)}}),bC=we("$ZodIntersection",(e,a)=>{En.init(e,a),e._zod.parse=(s,l)=>{const c=s.value,d=a.left._zod.run({value:c,issues:[]},l),f=a.right._zod.run({value:c,issues:[]},l);return d instanceof Promise||f instanceof Promise?Promise.all([d,f]).then(([g,p])=>Qb(s,g,p)):Qb(s,d,f)}});function Nm(e,a){if(e===a)return{valid:!0,data:e};if(e instanceof Date&&a instanceof Date&&+e==+a)return{valid:!0,data:e};if(Zi(e)&&Zi(a)){const s=Object.keys(a),l=Object.keys(e).filter(d=>s.indexOf(d)!==-1),c={...e,...a};for(const d of l){const f=Nm(e[d],a[d]);if(!f.valid)return{valid:!1,mergeErrorPath:[d,...f.mergeErrorPath]};c[d]=f.data}return{valid:!0,data:c}}if(Array.isArray(e)&&Array.isArray(a)){if(e.length!==a.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let l=0;l<e.length;l++){const c=e[l],d=a[l],f=Nm(c,d);if(!f.valid)return{valid:!1,mergeErrorPath:[l,...f.mergeErrorPath]};s.push(f.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function Qb(e,a,s){if(a.issues.length&&e.issues.push(...a.issues),s.issues.length&&e.issues.push(...s.issues),El(e))return e;const l=Nm(a.value,s.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return e.value=l.data,e}const vC=we("$ZodEnum",(e,a)=>{En.init(e,a);const s=AE(a.entries),l=new Set(s);e._zod.values=l,e._zod.pattern=new RegExp(`^(${s.filter(c=>RE.has(typeof c)).map(c=>typeof c=="string"?su(c):c.toString()).join("|")})$`),e._zod.parse=(c,d)=>{const f=c.value;return l.has(f)||c.issues.push({code:"invalid_value",values:s,input:f,inst:e}),c}}),xC=we("$ZodTransform",(e,a)=>{En.init(e,a),e._zod.parse=(s,l)=>{if(l.direction==="backward")throw new n0(e.constructor.name);const c=a.transform(s.value,s);if(l.async)return(c instanceof Promise?c:Promise.resolve(c)).then(f=>(s.value=f,s));if(c instanceof Promise)throw new Cl;return s.value=c,s}});function Yb(e,a){return e.issues.length&&a===void 0?{issues:[],value:void 0}:e}const SC=we("$ZodOptional",(e,a)=>{En.init(e,a),e._zod.optin="optional",e._zod.optout="optional",Ht(e._zod,"values",()=>a.innerType._zod.values?new Set([...a.innerType._zod.values,void 0]):void 0),Ht(e._zod,"pattern",()=>{const s=a.innerType._zod.pattern;return s?new RegExp(`^(${nh(s.source)})?$`):void 0}),e._zod.parse=(s,l)=>{if(a.innerType._zod.optin==="optional"){const c=a.innerType._zod.run(s,l);return c instanceof Promise?c.then(d=>Yb(d,s.value)):Yb(c,s.value)}return s.value===void 0?s:a.innerType._zod.run(s,l)}}),NC=we("$ZodNullable",(e,a)=>{En.init(e,a),Ht(e._zod,"optin",()=>a.innerType._zod.optin),Ht(e._zod,"optout",()=>a.innerType._zod.optout),Ht(e._zod,"pattern",()=>{const s=a.innerType._zod.pattern;return s?new RegExp(`^(${nh(s.source)}|null)$`):void 0}),Ht(e._zod,"values",()=>a.innerType._zod.values?new Set([...a.innerType._zod.values,null]):void 0),e._zod.parse=(s,l)=>s.value===null?s:a.innerType._zod.run(s,l)}),wC=we("$ZodDefault",(e,a)=>{En.init(e,a),e._zod.optin="optional",Ht(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(s,l)=>{if(l.direction==="backward")return a.innerType._zod.run(s,l);if(s.value===void 0)return s.value=a.defaultValue,s;const c=a.innerType._zod.run(s,l);return c instanceof Promise?c.then(d=>Kb(d,a)):Kb(c,a)}});function Kb(e,a){return e.value===void 0&&(e.value=a.defaultValue),e}const jC=we("$ZodPrefault",(e,a)=>{En.init(e,a),e._zod.optin="optional",Ht(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(s,l)=>(l.direction==="backward"||s.value===void 0&&(s.value=a.defaultValue),a.innerType._zod.run(s,l))}),_C=we("$ZodNonOptional",(e,a)=>{En.init(e,a),Ht(e._zod,"values",()=>{const s=a.innerType._zod.values;return s?new Set([...s].filter(l=>l!==void 0)):void 0}),e._zod.parse=(s,l)=>{const c=a.innerType._zod.run(s,l);return c instanceof Promise?c.then(d=>Xb(d,e)):Xb(c,e)}});function Xb(e,a){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:a}),e}const EC=we("$ZodCatch",(e,a)=>{En.init(e,a),Ht(e._zod,"optin",()=>a.innerType._zod.optin),Ht(e._zod,"optout",()=>a.innerType._zod.optout),Ht(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(s,l)=>{if(l.direction==="backward")return a.innerType._zod.run(s,l);const c=a.innerType._zod.run(s,l);return c instanceof Promise?c.then(d=>(s.value=d.value,d.issues.length&&(s.value=a.catchValue({...s,error:{issues:d.issues.map(f=>Ur(f,l,kr()))},input:s.value}),s.issues=[]),s)):(s.value=c.value,c.issues.length&&(s.value=a.catchValue({...s,error:{issues:c.issues.map(d=>Ur(d,l,kr()))},input:s.value}),s.issues=[]),s)}}),AC=we("$ZodPipe",(e,a)=>{En.init(e,a),Ht(e._zod,"values",()=>a.in._zod.values),Ht(e._zod,"optin",()=>a.in._zod.optin),Ht(e._zod,"optout",()=>a.out._zod.optout),Ht(e._zod,"propValues",()=>a.in._zod.propValues),e._zod.parse=(s,l)=>{if(l.direction==="backward"){const d=a.out._zod.run(s,l);return d instanceof Promise?d.then(f=>xc(f,a.in,l)):xc(d,a.in,l)}const c=a.in._zod.run(s,l);return c instanceof Promise?c.then(d=>xc(d,a.out,l)):xc(c,a.out,l)}});function xc(e,a,s){return e.issues.length?(e.aborted=!0,e):a._zod.run({value:e.value,issues:e.issues},s)}const CC=we("$ZodReadonly",(e,a)=>{En.init(e,a),Ht(e._zod,"propValues",()=>a.innerType._zod.propValues),Ht(e._zod,"values",()=>a.innerType._zod.values),Ht(e._zod,"optin",()=>a.innerType._zod.optin),Ht(e._zod,"optout",()=>a.innerType._zod.optout),e._zod.parse=(s,l)=>{if(l.direction==="backward")return a.innerType._zod.run(s,l);const c=a.innerType._zod.run(s,l);return c instanceof Promise?c.then(Jb):Jb(c)}});function Jb(e){return e.value=Object.freeze(e.value),e}const OC=we("$ZodCustom",(e,a)=>{ga.init(e,a),En.init(e,a),e._zod.parse=(s,l)=>s,e._zod.check=s=>{const l=s.value,c=a.fn(l);if(c instanceof Promise)return c.then(d=>Wb(d,s,l,e));Wb(c,s,l,e)}});function Wb(e,a,s,l){if(!e){const c={code:"custom",input:s,inst:l,path:[...l._zod.def.path??[]],continue:!l._zod.def.abort};l._zod.def.params&&(c.params=l._zod.def.params),a.issues.push(Gi(c))}}class RC{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...s){const l=s[0];if(this._map.set(a,l),l&&typeof l=="object"&&"id"in l){if(this._idmap.has(l.id))throw new Error(`ID ${l.id} already exists in the registry`);this._idmap.set(l.id,a)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){const s=this._map.get(a);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(a),this}get(a){const s=a._zod.parent;if(s){const l={...this.get(s)??{}};delete l.id;const c={...l,...this._map.get(a)};return Object.keys(c).length?c:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}function TC(){return new RC}const Sc=TC();function DC(e,a){return new e({type:"string",...et(a)})}function zC(e,a){return new e({type:"string",format:"email",check:"string_format",abort:!1,...et(a)})}function ev(e,a){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...et(a)})}function MC(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...et(a)})}function kC(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...et(a)})}function UC(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...et(a)})}function LC(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...et(a)})}function BC(e,a){return new e({type:"string",format:"url",check:"string_format",abort:!1,...et(a)})}function qC(e,a){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...et(a)})}function IC(e,a){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...et(a)})}function $C(e,a){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...et(a)})}function FC(e,a){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...et(a)})}function HC(e,a){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...et(a)})}function VC(e,a){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...et(a)})}function ZC(e,a){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...et(a)})}function GC(e,a){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...et(a)})}function PC(e,a){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...et(a)})}function QC(e,a){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...et(a)})}function YC(e,a){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...et(a)})}function KC(e,a){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...et(a)})}function XC(e,a){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...et(a)})}function JC(e,a){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...et(a)})}function WC(e,a){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...et(a)})}function eO(e,a){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...et(a)})}function tO(e,a){return new e({type:"string",format:"date",check:"string_format",...et(a)})}function nO(e,a){return new e({type:"string",format:"time",check:"string_format",precision:null,...et(a)})}function aO(e,a){return new e({type:"string",format:"duration",check:"string_format",...et(a)})}function sO(e,a){return new e({type:"number",checks:[],...et(a)})}function rO(e,a){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...et(a)})}function lO(e){return new e({type:"unknown"})}function iO(e,a){return new e({type:"never",...et(a)})}function tv(e,a){return new f0({check:"less_than",...et(a),value:e,inclusive:!1})}function If(e,a){return new f0({check:"less_than",...et(a),value:e,inclusive:!0})}function nv(e,a){return new m0({check:"greater_than",...et(a),value:e,inclusive:!1})}function $f(e,a){return new m0({check:"greater_than",...et(a),value:e,inclusive:!0})}function av(e,a){return new EA({check:"multiple_of",...et(a),value:e})}function b0(e,a){return new CA({check:"max_length",...et(a),maximum:e})}function Fc(e,a){return new OA({check:"min_length",...et(a),minimum:e})}function v0(e,a){return new RA({check:"length_equals",...et(a),length:e})}function oO(e,a){return new TA({check:"string_format",format:"regex",...et(a),pattern:e})}function cO(e){return new DA({check:"string_format",format:"lowercase",...et(e)})}function uO(e){return new zA({check:"string_format",format:"uppercase",...et(e)})}function dO(e,a){return new MA({check:"string_format",format:"includes",...et(a),includes:e})}function fO(e,a){return new kA({check:"string_format",format:"starts_with",...et(a),prefix:e})}function mO(e,a){return new UA({check:"string_format",format:"ends_with",...et(a),suffix:e})}function ao(e){return new LA({check:"overwrite",tx:e})}function hO(e){return ao(a=>a.normalize(e))}function pO(){return ao(e=>e.trim())}function gO(){return ao(e=>e.toLowerCase())}function yO(){return ao(e=>e.toUpperCase())}function bO(e,a,s){return new e({type:"array",element:a,...et(s)})}function vO(e,a,s){return new e({type:"custom",check:"custom",fn:a,...et(s)})}function xO(e){const a=SO(s=>(s.addIssue=l=>{if(typeof l=="string")s.issues.push(Gi(l,s.value,a._zod.def));else{const c=l;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=s.value),c.inst??(c.inst=a),c.continue??(c.continue=!a._zod.def.abort),s.issues.push(Gi(c))}},e(s.value,s)));return a}function SO(e,a){const s=new ga({check:"custom",...et(a)});return s._zod.check=e,s}function sv(e,a){try{var s=e()}catch(l){return a(l)}return s&&s.then?s.then(void 0,a):s}function NO(e,a){for(var s={};e.length;){var l=e[0],c=l.code,d=l.message,f=l.path.join(".");if(!s[f])if("unionErrors"in l){var h=l.unionErrors[0].errors[0];s[f]={message:h.message,type:h.code}}else s[f]={message:d,type:c};if("unionErrors"in l&&l.unionErrors.forEach(function(v){return v.errors.forEach(function(x){return e.push(x)})}),a){var g=s[f].types,p=g&&g[l.code];s[f]=Vm(f,a,s,c,p?[].concat(p,l.message):l.message)}e.shift()}return s}function wO(e,a){for(var s={};e.length;){var l=e[0],c=l.code,d=l.message,f=l.path.join(".");if(!s[f])if(l.code==="invalid_union"&&l.errors.length>0){var h=l.errors[0][0];s[f]={message:h.message,type:h.code}}else s[f]={message:d,type:c};if(l.code==="invalid_union"&&l.errors.forEach(function(v){return v.forEach(function(x){return e.push(x)})}),a){var g=s[f].types,p=g&&g[l.code];s[f]=Vm(f,a,s,c,p?[].concat(p,l.message):l.message)}e.shift()}return s}function jO(e,a,s){if(s===void 0&&(s={}),(function(l){return"_def"in l&&typeof l._def=="object"&&"typeName"in l._def})(e))return function(l,c,d){try{return Promise.resolve(sv(function(){return Promise.resolve(e[s.mode==="sync"?"parse":"parseAsync"](l,a)).then(function(f){return d.shouldUseNativeValidation&&xm({},d),{errors:{},values:s.raw?Object.assign({},l):f}})},function(f){if((function(h){return Array.isArray(h?.issues)})(f))return{values:{},errors:$b(NO(f.errors,!d.shouldUseNativeValidation&&d.criteriaMode==="all"),d)};throw f}))}catch(f){return Promise.reject(f)}};if((function(l){return"_zod"in l&&typeof l._zod=="object"})(e))return function(l,c,d){try{return Promise.resolve(sv(function(){return Promise.resolve((s.mode==="sync"?FE:HE)(e,l,a)).then(function(f){return d.shouldUseNativeValidation&&xm({},d),{errors:{},values:s.raw?Object.assign({},l):f}})},function(f){if((function(h){return h instanceof sh})(f))return{values:{},errors:$b(wO(f.issues,!d.shouldUseNativeValidation&&d.criteriaMode==="all"),d)};throw f}))}catch(f){return Promise.reject(f)}};throw new Error("Invalid input: not a Zod schema")}const _O=we("ZodISODateTime",(e,a)=>{XA.init(e,a),sn.init(e,a)});function EO(e){return eO(_O,e)}const AO=we("ZodISODate",(e,a)=>{JA.init(e,a),sn.init(e,a)});function CO(e){return tO(AO,e)}const OO=we("ZodISOTime",(e,a)=>{WA.init(e,a),sn.init(e,a)});function RO(e){return nO(OO,e)}const TO=we("ZodISODuration",(e,a)=>{eC.init(e,a),sn.init(e,a)});function DO(e){return aO(TO,e)}const zO=(e,a)=>{sh.init(e,a),e.name="ZodError",Object.defineProperties(e,{format:{value:s=>$E(e,s)},flatten:{value:s=>IE(e,s)},addIssue:{value:s=>{e.issues.push(s),e.message=JSON.stringify(e.issues,Sm,2)}},addIssues:{value:s=>{e.issues.push(...s),e.message=JSON.stringify(e.issues,Sm,2)}},isEmpty:{get(){return e.issues.length===0}}})},Ia=we("ZodError",zO,{Parent:Error}),MO=lu(Ia),kO=iu(Ia),UO=ou(Ia),LO=cu(Ia),BO=GE(Ia),qO=PE(Ia),IO=QE(Ia),$O=YE(Ia),FO=KE(Ia),HO=XE(Ia),VO=JE(Ia),ZO=WE(Ia),zn=we("ZodType",(e,a)=>(En.init(e,a),e.def=a,e.type=a.type,Object.defineProperty(e,"_def",{value:a}),e.check=(...s)=>e.clone(Ir(a,{checks:[...a.checks??[],...s.map(l=>typeof l=="function"?{_zod:{check:l,def:{check:"custom"},onattach:[]}}:l)]})),e.clone=(s,l)=>lr(e,s,l),e.brand=()=>e,e.register=((s,l)=>(s.add(e,l),e)),e.parse=(s,l)=>MO(e,s,l,{callee:e.parse}),e.safeParse=(s,l)=>UO(e,s,l),e.parseAsync=async(s,l)=>kO(e,s,l,{callee:e.parseAsync}),e.safeParseAsync=async(s,l)=>LO(e,s,l),e.spa=e.safeParseAsync,e.encode=(s,l)=>BO(e,s,l),e.decode=(s,l)=>qO(e,s,l),e.encodeAsync=async(s,l)=>IO(e,s,l),e.decodeAsync=async(s,l)=>$O(e,s,l),e.safeEncode=(s,l)=>FO(e,s,l),e.safeDecode=(s,l)=>HO(e,s,l),e.safeEncodeAsync=async(s,l)=>VO(e,s,l),e.safeDecodeAsync=async(s,l)=>ZO(e,s,l),e.refine=(s,l)=>e.check(MR(s,l)),e.superRefine=s=>e.check(kR(s)),e.overwrite=s=>e.check(ao(s)),e.optional=()=>ov(e),e.nullable=()=>cv(e),e.nullish=()=>ov(cv(e)),e.nonoptional=s=>AR(e,s),e.array=()=>N0(e),e.or=s=>yR([e,s]),e.and=s=>vR(e,s),e.transform=s=>uv(e,SR(s)),e.default=s=>jR(e,s),e.prefault=s=>ER(e,s),e.catch=s=>OR(e,s),e.pipe=s=>uv(e,s),e.readonly=()=>DR(e),e.describe=s=>{const l=e.clone();return Sc.add(l,{description:s}),l},Object.defineProperty(e,"description",{get(){return Sc.get(e)?.description},configurable:!0}),e.meta=(...s)=>{if(s.length===0)return Sc.get(e);const l=e.clone();return Sc.add(l,s[0]),l},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),x0=we("_ZodString",(e,a)=>{rh.init(e,a),zn.init(e,a);const s=e._zod.bag;e.format=s.format??null,e.minLength=s.minimum??null,e.maxLength=s.maximum??null,e.regex=(...l)=>e.check(oO(...l)),e.includes=(...l)=>e.check(dO(...l)),e.startsWith=(...l)=>e.check(fO(...l)),e.endsWith=(...l)=>e.check(mO(...l)),e.min=(...l)=>e.check(Fc(...l)),e.max=(...l)=>e.check(b0(...l)),e.length=(...l)=>e.check(v0(...l)),e.nonempty=(...l)=>e.check(Fc(1,...l)),e.lowercase=l=>e.check(cO(l)),e.uppercase=l=>e.check(uO(l)),e.trim=()=>e.check(pO()),e.normalize=(...l)=>e.check(hO(...l)),e.toLowerCase=()=>e.check(gO()),e.toUpperCase=()=>e.check(yO())}),GO=we("ZodString",(e,a)=>{rh.init(e,a),x0.init(e,a),e.email=s=>e.check(zC(PO,s)),e.url=s=>e.check(BC(QO,s)),e.jwt=s=>e.check(WC(cR,s)),e.emoji=s=>e.check(qC(YO,s)),e.guid=s=>e.check(ev(rv,s)),e.uuid=s=>e.check(MC(Nc,s)),e.uuidv4=s=>e.check(kC(Nc,s)),e.uuidv6=s=>e.check(UC(Nc,s)),e.uuidv7=s=>e.check(LC(Nc,s)),e.nanoid=s=>e.check(IC(KO,s)),e.guid=s=>e.check(ev(rv,s)),e.cuid=s=>e.check($C(XO,s)),e.cuid2=s=>e.check(FC(JO,s)),e.ulid=s=>e.check(HC(WO,s)),e.base64=s=>e.check(KC(lR,s)),e.base64url=s=>e.check(XC(iR,s)),e.xid=s=>e.check(VC(eR,s)),e.ksuid=s=>e.check(ZC(tR,s)),e.ipv4=s=>e.check(GC(nR,s)),e.ipv6=s=>e.check(PC(aR,s)),e.cidrv4=s=>e.check(QC(sR,s)),e.cidrv6=s=>e.check(YC(rR,s)),e.e164=s=>e.check(JC(oR,s)),e.datetime=s=>e.check(EO(s)),e.date=s=>e.check(CO(s)),e.time=s=>e.check(RO(s)),e.duration=s=>e.check(DO(s))});function Hc(e){return DC(GO,e)}const sn=we("ZodStringFormat",(e,a)=>{Jt.init(e,a),x0.init(e,a)}),PO=we("ZodEmail",(e,a)=>{FA.init(e,a),sn.init(e,a)}),rv=we("ZodGUID",(e,a)=>{IA.init(e,a),sn.init(e,a)}),Nc=we("ZodUUID",(e,a)=>{$A.init(e,a),sn.init(e,a)}),QO=we("ZodURL",(e,a)=>{HA.init(e,a),sn.init(e,a)}),YO=we("ZodEmoji",(e,a)=>{VA.init(e,a),sn.init(e,a)}),KO=we("ZodNanoID",(e,a)=>{ZA.init(e,a),sn.init(e,a)}),XO=we("ZodCUID",(e,a)=>{GA.init(e,a),sn.init(e,a)}),JO=we("ZodCUID2",(e,a)=>{PA.init(e,a),sn.init(e,a)}),WO=we("ZodULID",(e,a)=>{QA.init(e,a),sn.init(e,a)}),eR=we("ZodXID",(e,a)=>{YA.init(e,a),sn.init(e,a)}),tR=we("ZodKSUID",(e,a)=>{KA.init(e,a),sn.init(e,a)}),nR=we("ZodIPv4",(e,a)=>{tC.init(e,a),sn.init(e,a)}),aR=we("ZodIPv6",(e,a)=>{nC.init(e,a),sn.init(e,a)}),sR=we("ZodCIDRv4",(e,a)=>{aC.init(e,a),sn.init(e,a)}),rR=we("ZodCIDRv6",(e,a)=>{sC.init(e,a),sn.init(e,a)}),lR=we("ZodBase64",(e,a)=>{rC.init(e,a),sn.init(e,a)}),iR=we("ZodBase64URL",(e,a)=>{iC.init(e,a),sn.init(e,a)}),oR=we("ZodE164",(e,a)=>{oC.init(e,a),sn.init(e,a)}),cR=we("ZodJWT",(e,a)=>{uC.init(e,a),sn.init(e,a)}),S0=we("ZodNumber",(e,a)=>{p0.init(e,a),zn.init(e,a),e.gt=(l,c)=>e.check(nv(l,c)),e.gte=(l,c)=>e.check($f(l,c)),e.min=(l,c)=>e.check($f(l,c)),e.lt=(l,c)=>e.check(tv(l,c)),e.lte=(l,c)=>e.check(If(l,c)),e.max=(l,c)=>e.check(If(l,c)),e.int=l=>e.check(lv(l)),e.safe=l=>e.check(lv(l)),e.positive=l=>e.check(nv(0,l)),e.nonnegative=l=>e.check($f(0,l)),e.negative=l=>e.check(tv(0,l)),e.nonpositive=l=>e.check(If(0,l)),e.multipleOf=(l,c)=>e.check(av(l,c)),e.step=(l,c)=>e.check(av(l,c)),e.finite=()=>e;const s=e._zod.bag;e.minValue=Math.max(s.minimum??Number.NEGATIVE_INFINITY,s.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(s.maximum??Number.POSITIVE_INFINITY,s.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(s.format??"").includes("int")||Number.isSafeInteger(s.multipleOf??.5),e.isFinite=!0,e.format=s.format??null});function ta(e){return sO(S0,e)}const uR=we("ZodNumberFormat",(e,a)=>{dC.init(e,a),S0.init(e,a)});function lv(e){return rO(uR,e)}const dR=we("ZodUnknown",(e,a)=>{fC.init(e,a),zn.init(e,a)});function iv(){return lO(dR)}const fR=we("ZodNever",(e,a)=>{mC.init(e,a),zn.init(e,a)});function mR(e){return iO(fR,e)}const hR=we("ZodArray",(e,a)=>{hC.init(e,a),zn.init(e,a),e.element=a.element,e.min=(s,l)=>e.check(Fc(s,l)),e.nonempty=s=>e.check(Fc(1,s)),e.max=(s,l)=>e.check(b0(s,l)),e.length=(s,l)=>e.check(v0(s,l)),e.unwrap=()=>e.element});function N0(e,a){return bO(hR,e,a)}const pR=we("ZodObject",(e,a)=>{gC.init(e,a),zn.init(e,a),Ht(e,"shape",()=>a.shape),e.keyof=()=>w0(Object.keys(e._zod.def.shape)),e.catchall=s=>e.clone({...e._zod.def,catchall:s}),e.passthrough=()=>e.clone({...e._zod.def,catchall:iv()}),e.loose=()=>e.clone({...e._zod.def,catchall:iv()}),e.strict=()=>e.clone({...e._zod.def,catchall:mR()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=s=>kE(e,s),e.safeExtend=s=>UE(e,s),e.merge=s=>LE(e,s),e.pick=s=>zE(e,s),e.omit=s=>ME(e,s),e.partial=(...s)=>BE(j0,e,s[0]),e.required=(...s)=>qE(_0,e,s[0])});function du(e,a){const s={type:"object",shape:e??{},...et(a)};return new pR(s)}const gR=we("ZodUnion",(e,a)=>{yC.init(e,a),zn.init(e,a),e.options=a.options});function yR(e,a){return new gR({type:"union",options:e,...et(a)})}const bR=we("ZodIntersection",(e,a)=>{bC.init(e,a),zn.init(e,a)});function vR(e,a){return new bR({type:"intersection",left:e,right:a})}const wm=we("ZodEnum",(e,a)=>{vC.init(e,a),zn.init(e,a),e.enum=a.entries,e.options=Object.values(a.entries);const s=new Set(Object.keys(a.entries));e.extract=(l,c)=>{const d={};for(const f of l)if(s.has(f))d[f]=a.entries[f];else throw new Error(`Key ${f} not found in enum`);return new wm({...a,checks:[],...et(c),entries:d})},e.exclude=(l,c)=>{const d={...a.entries};for(const f of l)if(s.has(f))delete d[f];else throw new Error(`Key ${f} not found in enum`);return new wm({...a,checks:[],...et(c),entries:d})}});function w0(e,a){const s=Array.isArray(e)?Object.fromEntries(e.map(l=>[l,l])):e;return new wm({type:"enum",entries:s,...et(a)})}const xR=we("ZodTransform",(e,a)=>{xC.init(e,a),zn.init(e,a),e._zod.parse=(s,l)=>{if(l.direction==="backward")throw new n0(e.constructor.name);s.addIssue=d=>{if(typeof d=="string")s.issues.push(Gi(d,s.value,a));else{const f=d;f.fatal&&(f.continue=!1),f.code??(f.code="custom"),f.input??(f.input=s.value),f.inst??(f.inst=e),s.issues.push(Gi(f))}};const c=a.transform(s.value,s);return c instanceof Promise?c.then(d=>(s.value=d,s)):(s.value=c,s)}});function SR(e){return new xR({type:"transform",transform:e})}const j0=we("ZodOptional",(e,a)=>{SC.init(e,a),zn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function ov(e){return new j0({type:"optional",innerType:e})}const NR=we("ZodNullable",(e,a)=>{NC.init(e,a),zn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function cv(e){return new NR({type:"nullable",innerType:e})}const wR=we("ZodDefault",(e,a)=>{wC.init(e,a),zn.init(e,a),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function jR(e,a){return new wR({type:"default",innerType:e,get defaultValue(){return typeof a=="function"?a():r0(a)}})}const _R=we("ZodPrefault",(e,a)=>{jC.init(e,a),zn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function ER(e,a){return new _R({type:"prefault",innerType:e,get defaultValue(){return typeof a=="function"?a():r0(a)}})}const _0=we("ZodNonOptional",(e,a)=>{_C.init(e,a),zn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function AR(e,a){return new _0({type:"nonoptional",innerType:e,...et(a)})}const CR=we("ZodCatch",(e,a)=>{EC.init(e,a),zn.init(e,a),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function OR(e,a){return new CR({type:"catch",innerType:e,catchValue:typeof a=="function"?a:()=>a})}const RR=we("ZodPipe",(e,a)=>{AC.init(e,a),zn.init(e,a),e.in=a.in,e.out=a.out});function uv(e,a){return new RR({type:"pipe",in:e,out:a})}const TR=we("ZodReadonly",(e,a)=>{CC.init(e,a),zn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function DR(e){return new TR({type:"readonly",innerType:e})}const zR=we("ZodCustom",(e,a)=>{OC.init(e,a),zn.init(e,a)});function MR(e,a={}){return vO(zR,e,a)}function kR(e){return xO(e)}const UR=["correlativo","no correlativo"],LR=du({oi:Hc().regex(/^OI-\d{4}-\d{4}$/,"Formato OI-####-YYYY"),q3:ta(),alcance:ta(),pma:ta().refine(e=>e===10||e===16,{message:"PMA invlido"}),numeration_type:w0(UR).default("correlativo")}),Ff=du({c1:ta().optional().nullable(),c2:ta().optional().nullable(),c3:ta().optional().nullable(),c4:ta().optional().nullable(),c5:ta().optional().nullable(),c6:ta().optional().nullable(),c7:Hc().optional().nullable(),c7_seconds:ta().optional().nullable(),caudal:ta().optional().nullable(),error:ta().optional().nullable()}),BR=du({medidor:Hc().optional(),estado:ta().int().min(0).max(5).default(0),q3:Ff.optional(),q2:Ff.optional(),q1:Ff.optional(),conformidad:Hc().optional()});du({estado:ta().int().min(0).optional(),rows:ta().int().min(1).default(15),rowsData:N0(BR)});function qR(e){return e===16?25.6:e===10?16:NaN}const IR=/^[A-Za-z0-9]{10}$/,$R=e=>(e??"").trim().toUpperCase(),un=e=>{const a=e.currentTarget;a.size=Math.max(1,a.value.length)},Sl=["medidor","estado","q3.c1","q3.c2","q3.c3","q3.c4","q3.c5","q3.c6","q3.c7","q2.c1","q2.c2","q2.c3","q2.c4","q2.c5","q2.c6","q2.c7","q1.c1","q1.c2","q1.c3","q1.c4","q1.c5","q1.c6","q1.c7"],jm=e=>{e&&(e.focus(),(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&e.select())},dv=(e,a)=>{if(a){if(e==="medidor"){a.focus();return}jm(a)}},Bn=e=>{if(e===""||e===null||e===void 0)return null;const a=String(e).replace(",","."),s=Number(a);return Number.isNaN(s)?null:s};function FR(e,a){if(!e)return"";const s=e.match(/^(.*?)(\d+)$/);if(!s)return e;const l=s[1],c=s[2],d=parseInt(c,10)+a;return`${l}${d.toString().padStart(c.length,"0")}`}function fv(e,a,s){return e?s==="no correlativo"?e.slice(0,4):FR(e,a):""}function Hf(e){if(!e)return 0;const a=String(e).trim(),s=a.split(/[:,\.]/).map(c=>parseFloat(c)).filter(c=>!isNaN(c));let l=0;if(s.length>=3){const c=s[0]||0,d=s[1]||0,f=s[2]||0;l=c*60+d+f/1e3}else if(s.length===2)l=s[0]*60+(s[1]||0);else if(s.length===1)l=s[0];else{const c=parseFloat(a.replace(",","."));if(!isNaN(c)){const d=Math.floor(c),f=(c-d)*100;l=d*60+f}}return l}function Vf(e,a){if(!e||!a)return null;const s=a>0?a/3600:0;return s===0?null:e/s}function Zf(e,a,s){return e===void 0||a===void 0||!s?null:(Number(a)-Number(e)-Number(s))/Number(s)*100}function HR(e,a,s,l){if(e&&e>=1)return"NO CONFORME";if(a==null||s==null||l==null)return"";const c=Math.abs(a),d=Math.abs(s),f=Math.abs(l),h=!(c>2.05||d>2.05||f>5.05),g=c<1.05||d<1.05||f<2.55,p=Math.sign(a),v=Math.sign(s),x=Math.sign(l),N=p>=0&&v>=0&&x>=0||p<=0&&v<=0&&x<=0,q=h&&g;return N?q?"CONFORME":"NO CONFORME":h?"CONFORME":"NO CONFORME"}const Nl=({val:e,isErr:a,warnThreshold:s,failThreshold:l})=>{const c=p=>{const v=Number(p.toFixed(1));return Object.is(v,-0)?"0.0":v.toFixed(1)};if(!a)return i.jsx("td",{className:"bg-light",children:e==null||isNaN(e)?i.jsx("span",{className:"text-muted",children:"-"}):i.jsx("span",{className:"vi-qe-value text-primary fw-semibold",children:e.toFixed(2)})});const d=Math.abs(e??0),f=s??l??0,h=l??s??0;let g="vi-e-ok";return e==null||isNaN(e)?g="":h>0&&d>h?g="vi-e-error":f>0&&d>f&&(g="vi-e-warn"),i.jsx("td",{className:"bg-light",children:e==null||isNaN(e)?i.jsx("span",{className:"text-muted",children:"-"}):i.jsx("span",{className:`vi-qe-value fw-bold ${g}`,children:c(e)})})};function VR({show:e,title:a,initial:s,onClose:l,onSubmit:c,onCancelWithDraft:d,numerationType:f,duplicateMap:h,onClearDuplicate:g,readOnly:p,draftStorageKey:v,draftMeta:x,isOnline:N,showRetry:q}){const j={estado:s?.estado??0,rows:s?.rows??15,version:s?.version??null,draftCreatedAt:s?.draftCreatedAt??null,draftId:s?.draftId??null,rowsData:s?.rowsData??Array.from({length:15}).map(()=>({medidor:"",estado:0,q3:{},q2:{},q1:{}}))},_=p===!0,C=N!==!1,{register:B,control:T,handleSubmit:K,reset:D,setValue:R,getValues:Z}=Kc({defaultValues:j}),U=B("rows",{valueAsNumber:!0}),{fields:X,replace:ce,append:_e,remove:xe}=b_({control:T,name:"rowsData"}),[me,Se]=y.useState(0),De=y.useRef(0),Oe=y.useRef(null),[M,I]=y.useState(0),ee=0,be=5,je=()=>{if(M>=be){alert("Ya estas en el tamano maximo de fuente permitido para las filas (+5).");return}I(Y=>Math.min(Y+1,be))},w=()=>{if(M<=ee){alert("Ya estas en el tamano minimo de fuente permitido para las filas.");return}I(Y=>Math.max(Y-1,ee))},P=y.useRef(null),[ie,k]=y.useState([]),oe=!!s?.version,ge=y.useRef("rows"),Re=y.useRef(null),$e=y.useRef(null),de=y.useRef(null),Ue=y.useRef(new Map),Ie=["c1","c2","c3","c4","c5","c6","c7"];y.useEffect(()=>{s?.rowsData?.length&&X.forEach((Y,te)=>{if(te===0)return;s.rowsData[te]?.medidor&&Ue.current.set(Y.id,!0)})},[s,X]);const Ve=y.useCallback(Y=>{const te=Y<0?0:Y;Se(te),requestAnimationFrame(()=>{const Ae=document.querySelector(`input.vi-medidor-input[data-row="${te}"]`);Ae&&(Ae.focus(),Ae.select())})},[]),dt=()=>(Z("rowsData")??[]).slice(0,X.length);y.useEffect(()=>{De.current=me},[me]);const Te=Y=>{const te=Y.target;if(!te)return;const Ae=te.tagName;if(Ae!=="INPUT"&&Ae!=="SELECT"&&Ae!=="TEXTAREA")return;const Ze=Y.key;if(Ze==="Escape"){Y.preventDefault(),In();return}if(Ze==="ArrowUp"||Ze==="ArrowDown"||Ze==="ArrowLeft"||Ze==="ArrowRight"||Ze==="Enter"){const Wt=te.name;if(!Wt||!Wt.startsWith("rowsData."))return;const _t=Wt.match(/^rowsData\.(\d+)\.(.+)$/);if(!_t)return;const at=parseInt(_t[1],10),yt=_t[2],It=Y.currentTarget,fn=X.length-1,mn=(en,hn)=>{let Ft=en+hn;for(;Ft>=0&&Ft<=fn;){const Fn=`[name="rowsData.${Ft}.${yt}"]`,rn=It.querySelector(Fn);if(rn&&!rn.disabled)return{index:Ft,el:rn};Ft+=hn}return null};if(Ze==="ArrowUp"||Ze==="ArrowDown"){Y.preventDefault();const hn=mn(at,Ze==="ArrowUp"?-1:1);hn&&dv(yt,hn.el);return}if(Ze==="ArrowLeft"||Ze==="ArrowRight"){Y.preventDefault();const en=Sl.indexOf(yt);if(en===-1)return;const Ft=en+(Ze==="ArrowRight"?1:-1);if(Ft<0||Ft>=Sl.length)return;const Fn=Sl[Ft],rn=`[name="rowsData.${at}.${Fn}"]`,vn=It.querySelector(rn);vn&&!vn.disabled&&jm(vn);return}if(Ze==="Enter"){Y.preventDefault();const en=Sl.indexOf(yt);if(en===-1)return;const hn=mn(at,1);if(hn){dv(yt,hn.el);return}const Ft=en+1;if(Ft<Sl.length){const Fn=Sl[Ft];for(let rn=0;rn<=fn;rn++){const vn=`[name="rowsData.${rn}.${Fn}"]`,Pn=It.querySelector(vn);if(Pn&&!Pn.disabled){jm(Pn);return}}}P.current&&P.current.focus();return}}if(Ze!=="Tab")return;const st=Y.currentTarget,ft=Array.from(st.querySelectorAll("input, select, textarea")).filter(Rt=>!Rt.hasAttribute("disabled")),Ke=ft.indexOf(te);if(Ke===-1)return;if(Ze==="Tab"&&Y.shiftKey){Ke>0&&(Y.preventDefault(),ft[Ke-1].focus());return}const kt=Ke+1;if(kt<ft.length){Y.preventDefault(),ft[kt].focus();return}P.current&&(Y.preventDefault(),P.current.focus())},He=(Y,te)=>{ce(Y),R("rows",Y.length),Se(Ae=>Y.length===0?0:typeof te=="number"?Math.max(0,Math.min(te,Y.length-1)):Math.min(Ae,Y.length-1))},fe=()=>({medidor:"",estado:0,q3:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:"",c7_seconds:null},q2:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:"",c7_seconds:null},q1:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:"",c7_seconds:null}}),Fe=Y=>Y==null?"":typeof Y=="number"?Y:typeof Y=="string"?Y.replace(",","."):Y,Ee=Y=>{if(!Y)return{};const te={...Y};return["c1","c2","c3","c4","c5","c6"].forEach(Ae=>{te[Ae]=Fe(te[Ae])}),te},Je=()=>{const Y=s?.rowsData?.length??s?.rows??15,te=(s?.rowsData&&s.rowsData.length>0?s.rowsData:Array.from({length:Y}).map(()=>({medidor:"",estado:0,q3:{},q2:{},q1:{}}))).map(Ae=>({medidor:Ae.medidor??"",estado:Ae.estado??0,q3:Ee(Ae.q3),q2:Ee(Ae.q2),q1:Ee(Ae.q1)}));return{rows:te.length,rowsData:te,version:s?.version??null,estado:s?.estado??0,draftCreatedAt:s?.draftCreatedAt??null,draftId:s?.draftId??null}},A=y.useCallback(()=>{const Y=Z(),te=Y.rowsData??[];return{estado:Y.estado??0,rows:Number(Y.rows??te.length),version:Y.version??s?.version??null,rowsData:te,draftCreatedAt:Y.draftCreatedAt??s?.draftCreatedAt??null,draftId:Y.draftId??s?.draftId??null}},[Z,s?.version,s?.draftCreatedAt,s?.draftId]),V=Y=>x?{version:1,ts:new Date().toISOString(),userId:x.userId,bankId:x.bankId,oiId:x.oiId,bancadaId:x.bancadaId??null,isNew:x.isNew,data:Y}:null,O=()=>x?{version:1,ts:new Date().toISOString(),userId:x.userId,bankId:x.bankId,oiId:x.oiId,oiCode:x.oiCode??null,returnTo:x.returnTo??`/oi/${x.oiId}?mode=edit`,mode:"edit",modal:{type:"bancada",bancadaId:x.bancadaId??null,isNew:x.isNew}}:null,Q=Y=>Y==null||Y===""||typeof Y=="number"&&Number.isNaN(Y),G=Y=>Y?Number(Y.estado??0)!==0||Y.medidor&&Y.medidor.toString().trim()!==""?!0:Ce(Y):!1,se=Y=>(Y.rowsData??[]).some(Ae=>G(Ae)),Ce=Y=>{const te=[Y.q3,Y.q2,Y.q1];for(const Ae of te)if(Ae){for(const Ze of Ie)if(!Q(Ae[Ze]))return!0}return!1},Le=Y=>Y?{...Y,c4:null,c5:null}:{c4:null,c5:null},ae=Y=>{if(!Y)return Y;const te={...Y};return Q(te.c4)&&(te.c4=null),Q(te.c5)&&(te.c5=null),te},Me=Y=>{for(let te=0;te<Y.length;te++){const Ae=Y[te],Ze=Number(Ae.estado??0),st=Ze!==0;if(!G(Ae))continue;if(!Ae.medidor||Ae.medidor.toString().trim()==="")return`La fila ${te+1} tiene datos pero el campo "# Medidor (G)" est vaco. Completa el valor o elimina la fila.`;const Ke=[{name:"Q3 (Nominal)",block:Ae.q3},{name:"Q2 (Transicin)",block:Ae.q2},{name:"Q1 (Mnimo)",block:Ae.q1}],Qt=Ke.some(({block:kt})=>kt&&Ie.some(Rt=>!Q(kt[Rt])));if(Ze===0&&!Qt)return`La fila ${te+1} no tiene lecturas. Ingresa datos en Q3/Q2/Q1 o elimina la fila.`;if(!st)for(const{name:kt,block:Rt}of Ke){if(!Rt||!Ie.some(at=>!Q(Rt[at])))continue;if(Ie.some(at=>Q(Rt[at])))return`La fila ${te+1} tiene datos incompletos en el bloque ${kt}. Completa todos los campos o elimina la fila.`}}return null},Pe=Y=>Y==null||Y===""?null:String(Y).replace(/\./g,","),rt=Y=>{if(!Y)return{};const te={...Y};return["c1","c2","c3","c4","c5","c6","c7"].forEach(Ae=>{te[Ae]=Pe(te[Ae])}),te},Pt=Y=>{const te=[];let Ae=null;const Ze=(ft,Ke,Qt)=>{te[ft]||(te[ft]={}),te[ft][Ke]=Qt,Ae||(Ae=`Fila ${ft+1}: ${Qt}`)},st={};return Y.forEach(ft=>{const Ke=(ft.medidor??"").trim();Ke&&(st[Ke]=(st[Ke]??0)+1)}),Y.forEach((ft,Ke)=>{const Qt=ft.q3||{},kt=ft.q2||{},Rt=ft.q1||{},Wt=Qt.c4,_t=Qt.c5,at=kt.c4,yt=kt.c5,It=Rt.c4,fn=Rt.c5;Wt!=null&&_t!=null&&!Number.isNaN(Wt)&&!Number.isNaN(_t)&&_t<Wt&&Ze(Ke,"q3_lf","En Q3 L.F debe ser mayor o igual que L.I."),at!=null&&yt!=null&&!Number.isNaN(at)&&!Number.isNaN(yt)&&yt<at&&Ze(Ke,"q2_lf","En Q2 L.F debe ser mayor o igual que L.I."),It!=null&&fn!=null&&!Number.isNaN(It)&&!Number.isNaN(fn)&&fn<It&&Ze(Ke,"q1_lf","En Q1 L.F debe ser mayor o igual que L.I."),_t!=null&&at!=null&&!Number.isNaN(_t)&&!Number.isNaN(at)&&at<_t&&Ze(Ke,"q2_li","L.I de Q2 debe ser mayor o igual que L.F de Q3."),yt!=null&&It!=null&&!Number.isNaN(yt)&&!Number.isNaN(It)&&It<yt&&Ze(Ke,"q1_li","L.I de Q1 debe ser mayor o igual que L.F de Q2.");const mn=(ft.medidor??"").trim();mn&&st[mn]>1&&Ze(Ke,"medidor_dup","Serie de medidor repetida."),mn&&!IR.test(mn)&&Ze(Ke,"medidor_format","La serie del medidor debe tener 10 caracteres alfanumricos.")}),{rowErrors:te,firstMessage:Ae}},Ne=Y=>{if(_)return;const te=(Y.rowsData??[]).slice(0,X.length),Ae=Me(te);if(Ae){alert(Ae);return}const{rowErrors:Ze,firstMessage:st}=Pt(te);if(k(Ze),st){alert(st);return}const Ke=te.filter(G).map(kt=>{const Rt=Number(kt.estado??0),Wt=Rt>=1&&Rt<=4,_t=Rt===5&&!Ce(kt),at=Wt||_t,yt=ae(kt.q3),It=ae(kt.q2),fn=ae(kt.q1),mn=en=>{if(at){const hn=Le(en);return rt(hn)}return rt(en)};return{...kt,q3:mn(yt),q2:mn(It),q1:mn(fn)}}),Qt={...Y,rows:Ke.length,rowsData:Ke,version:Y.version??s?.version??null};c(Qt)},We=Di({control:T,name:"rowsData.0"}),qt=Di({control:T,name:"rowsData"}),jt=Di({control:T,name:"rowsData.0.q3.c7"}),An=Di({control:T,name:"rowsData.0.q2.c7"}),qn=Di({control:T,name:"rowsData.0.q1.c7"});y.useEffect(()=>{X[0]&&(R("rowsData.0.q3.c7_seconds",Hf(jt)),R("rowsData.0.q2.c7_seconds",Hf(An)),R("rowsData.0.q1.c7_seconds",Hf(qn)))},[jt,An,qn,R,X]),y.useEffect(()=>{const Y=qt??[],{rowErrors:te}=Pt(Y);k(te)},[qt]),y.useEffect(()=>{if(!We||X.length<=1)return;const Y=qt??[];X.forEach((te,Ae)=>{if(Ae===0)return;const Ze=te.id;(Ue.current.get(Ze)??!1)||R(`rowsData.${Ae}.medidor`,fv(We.medidor||"",Ae,f));const ft=Y[Ae]?.estado;(ft==null||Number.isNaN(ft))&&R(`rowsData.${Ae}.estado`,We.estado),R(`rowsData.${Ae}.q3.c1`,We.q3?.c1??null),R(`rowsData.${Ae}.q3.c2`,We.q3?.c2??null),R(`rowsData.${Ae}.q3.c3`,We.q3?.c3??null),R(`rowsData.${Ae}.q3.c6`,We.q3?.c6??null),R(`rowsData.${Ae}.q3.c7`,We.q3?.c7??""),R(`rowsData.${Ae}.q3.c7_seconds`,We.q3?.c7_seconds??null),R(`rowsData.${Ae}.q2.c1`,We.q2?.c1??null),R(`rowsData.${Ae}.q2.c2`,We.q2?.c2??null),R(`rowsData.${Ae}.q2.c3`,We.q2?.c3??null),R(`rowsData.${Ae}.q2.c6`,We.q2?.c6??null),R(`rowsData.${Ae}.q2.c7`,We.q2?.c7??""),R(`rowsData.${Ae}.q2.c7_seconds`,We.q2?.c7_seconds??null),R(`rowsData.${Ae}.q1.c1`,We.q1?.c1??null),R(`rowsData.${Ae}.q1.c2`,We.q1?.c2??null),R(`rowsData.${Ae}.q1.c3`,We.q1?.c3??null),R(`rowsData.${Ae}.q1.c6`,We.q1?.c6??null),R(`rowsData.${Ae}.q1.c7`,We.q1?.c7??""),R(`rowsData.${Ae}.q1.c7_seconds`,We.q1?.c7_seconds??null)})},[We,qt,X,R,f]),y.useEffect(()=>{Se(Y=>{const te=Math.max(X.length-1,0);return Y>te?te:Y})},[X.length]);const _a=()=>{if(X.length>=50){if(R("rows",50),Ve(0),!confirm("El maximo de filas es 50. Quieres fijar la lista en 50 filas?")){Oe.current&&(Oe.current.focus(),Oe.current.select());return}return}_e(fe()),R("rows",X.length+1),Ve(X.length)},dn=Y=>{if(X.length<=1)return;const te=Math.max(0,Math.min(Y,X.length-1));xe(te),R("rows",Math.max(X.length-1,1)),Ve(Math.max(0,te-(te===X.length-1?1:0)))},lt=()=>{X.length<=1||(xe(X.length-1),R("rows",Math.max(X.length-1,1)),Ve(Math.max(0,X.length-2)))},sa=()=>{if(!confirm("Ests seguro de limpiar todos los datos de la bancada?"))return;const Y=dt();if(!Y.length)return;const te=Y.map(()=>fe());He(te,0),Ve(0)},Mn=()=>{let Y=Number(Z("rows"));if((!Number.isFinite(Y)||Y<1)&&(Y=1),Y>50){const Ze=dt();if(!confirm("El maximo de filas es 50. Quieres usar 50 filas?")){R("rows",Ze.length),Oe.current&&(Oe.current.focus(),Oe.current.select());return}Y=50}const te=dt();if(Y!==te.length&&!confirm(`La lista tendr ${Y} filas. Quieres continuar?`)){R("rows",te.length),Oe.current&&(Oe.current.focus(),Oe.current.select());return}if(Y===te.length){R("rows",Y);return}if(Y>te.length){const Ze=Math.min(Y,50)-te.length;if(Ze>0){const st=Array.from({length:Ze},()=>fe()),ft=[...te,...st];He(ft,me),Ve(te.length)}else R("rows",te.length);return}const Ae=te.slice(0,Y);He(Ae,Math.min(me,Y-1))},Jn=Y=>{Y.key==="Enter"&&(Y.preventDefault(),Mn(),Ve(0))},In=()=>{const Y=Z(),te=document.activeElement;if(Oe.current&&te===Oe.current)ge.current="rows",Re.current="rows";else if(te&&te instanceof HTMLElement){const Ae=te.getAttribute("name");Ae&&Ae.startsWith("rowsData.")?(ge.current="grid",Re.current=Ae):(ge.current="grid",Re.current=null)}else ge.current="grid",Re.current=null;if(v){const Ae=A();if(!se(Ae))nr(v),de.current=null;else{const Ze=V(Ae);if(Ze){const st=JSON.stringify(Ze);Bi(v,Ze,O()),de.current=st}}}d&&d(Y),l()};y.useEffect(()=>{if(!e)return;const Y=te=>{if(te.key==="Escape"){te.preventDefault(),In();return}if((te.key==="+"||te.key==="=")&&te.ctrlKey){te.preventDefault(),_a();return}(te.key==="-"||te.key==="_")&&te.ctrlKey&&(te.preventDefault(),lt())};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[e,_a,lt,In]),y.useEffect(()=>{const Y=Je();D(Y),He(Y.rowsData,0),Ue.current.clear(),requestAnimationFrame(()=>{if(oe)Ve(0);else if(Re.current){const te=document.querySelector(`[name="${Re.current}"]`);if(te){te.focus(),"select"in te&&te.select?.();return}Ve(De.current||0)}else Oe.current&&(Oe.current.focus(),Oe.current.select())})},[s,D,ce,Ve,oe]),y.useEffect(()=>{if(!e||!v)return;const Y=A();if(!se(Y)){nr(v),de.current=null;return}const te=V(Y);if(!te)return;const Ae=JSON.stringify(te);if(Ae!==de.current)return $e.current&&window.clearTimeout($e.current),$e.current=window.setTimeout(()=>{Bi(v,te,O()),de.current=Ae},400),()=>{$e.current&&window.clearTimeout($e.current)}},[e,v,qt,A]),y.useEffect(()=>{e&&requestAnimationFrame(()=>{if(oe)Ve(0);else if(Re.current){const Y=document.querySelector(`[name="${Re.current}"]`);if(Y){Y.focus(),"select"in Y&&Y.select?.();return}Ve(De.current||0)}else Oe.current&&(Oe.current.focus(),Oe.current.select())})},[e,Ve,oe]);const $n=ie.some(Y=>Y&&Object.values(Y).some(Boolean));return e?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"modal d-block",tabIndex:-1,role:"dialog",onClick:Y=>{Y.target===Y.currentTarget&&In()},children:[i.jsx("style",{children:`        /* Ocultar flechas de inputs numricos para limpiar la vista */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
        input[type=number] {
          -moz-appearance: textfield;
        }

        /* Ancho minimo para columnas compactas (Temp, P.Ent, etc.) */
        .vi-min-width {
          min-width: 70px;
        }

        /* Estilo spreadsheet tipo Excel (modo claro) */
        .vi-spreadsheet {
          background-color: #ffffff;
          color: #212529;
          font-size: 0.75rem;
          table-layout: auto;
          width: max-content;
        }

        .vi-spreadsheet th,
        .vi-spreadsheet td {
          white-space: nowrap;
        }

        .vi-spreadsheet thead th {
          background-color: #e6f3ff;
          color: #0c2b4d;
          vertical-align: middle;
          padding: 0.25rem 0.35rem;
        }

        .vi-spreadsheet thead th.vi-header-at,
        .vi-spreadsheet thead th.vi-header-quitar,
        .vi-spreadsheet td.vi-at-valor {
          color: #212529 !important;
        }

                .vi-spreadsheet td.vi-row-index,
        .vi-spreadsheet th.vi-row-index {
          color: #0c2b4d;
        }

        /* Columna ndice (#) fija al hacer scroll horizontal */
        .vi-spreadsheet th.vi-row-index {
          position: sticky;
          left: 0;
          z-index: 3;
          background-color: #e6f3ff; /* mismo fondo que otros headers */
        }

        .vi-spreadsheet td.vi-row-index {
          position: sticky;
          left: 0;
          z-index: 2;
          background-color: inherit;
        }

        /* Columna # Medidor (G) fija, justo despus del ndice de fila */
        .vi-spreadsheet th.vi-sticky-medidor,
        .vi-spreadsheet td.vi-sticky-medidor {
          position: sticky;
          left: 30px; /* coincide con width:"30px" de la columna # */
        }

        .vi-spreadsheet thead th.vi-sticky-medidor {
          z-index: 3;
          background-color: #e6f3ff;
        }

        .vi-spreadsheet tbody td.vi-sticky-medidor {
          z-index: 2;
          background-color: inherit;
        }


        .vi-spreadsheet tr.vi-base-row td.vi-row-index {
          background-color: #d6e9ff !important;
          color: #0c2b4d !important;
          font-weight: 600;
        }

        .vi-spreadsheet td.vi-at-valor {
          transition: color 0.15s ease-in-out;
        }

        .vi-spreadsheet td.vi-at-valor:hover {
          color: #0a58ca !important;
        }

        .vi-spreadsheet tr.table-active td.vi-at-valor {
          color: #0c2b4d !important;
        }

        .vi-spreadsheet tbody td {
          padding: 0.15rem 0.25rem;
        }

        .vi-spreadsheet tr.table-active > td {
          background-color: #d9ecff !important;
          color: #0c2b4d !important;
        }

        .vi-spreadsheet tr.table-active input.form-control {
          background-color: #ffffff;
          color: #0c2b4d;
          border-color: #b6d4fe;
        }

        .vi-spreadsheet tr.vi-base-row.table-active > td {
          background-color: #d9ecff !important;
          color: #0c2b4d !important;
        }

        .vi-spreadsheet.table-hover tbody tr:not(.table-active):hover > td {
          background-color: inherit;
          color: inherit;
        }

        .vi-spreadsheet input.form-control {
          background-color: #ffffff;
          border-color: #ced4da;
          color: #212529;
          font-size: 0.75rem;
          padding: 0.05rem 0.25rem;
          height: 1.7rem;
        }

        .vi-spreadsheet input.form-control:disabled,
        .vi-spreadsheet input.form-control[readonly] {
          background-color: #e9ecef;
          color: #6c757d;
          opacity: 1;
        }

        /* Resaltado de fila BASE solo en columna ndice */
        .vi-spreadsheet tr.vi-base-row > td {
          background-color: transparent;
        }

        /* PUNTO E - colores de la columna de conformidad */
        .vi-spreadsheet td.vi-at-valor.vi-at-valor--fail {
          color: #b02a37 !important;
          background-color: #f8d7da;
        }
        .vi-spreadsheet td.vi-at-valor.vi-at-valor--ok {
          color: #0f9d58 !important;
        }

        /* Colores para celdas de Error % (E%) segn rangos */
        .vi-spreadsheet .vi-e-ok {
          color: #198754; /* verde: dentro de tolerancia */
        }
        .vi-spreadsheet .vi-e-warn {
          color: #fd7e14; /* naranja intenso: advertencia */
        }
        .vi-spreadsheet .vi-e-error {
          color: #b02a37; /* rojo oscuro: error fuerte */
        }

        /* Resaltado suave de la celda enfocada (no agresivo) */
        .vi-spreadsheet input.form-control:focus,
        .vi-spreadsheet select.form-select:focus,
        .vi-spreadsheet .table-active input.form-control:focus,
        .vi-spreadsheet .table-active select.form-select:focus {
          background-color: #d6e7ff !important; /* azul ms visible al enfocar */
          box-shadow: 0 0 0 0.18rem rgba(13, 110, 253, 0.3) !important;
        }

        /* FIX: mantener visible el resaltado rojo de celdas con error */
        .vi-spreadsheet input.vi-error-cell {
          border-color: #dc3545 !important;
          background-color: #f8d7da !important;
          box-shadow: 0 0 0 0.15rem rgba(220, 53, 69, 0.25) !important;
        }

        /* -----------------------------
           Tamao de fuente del grid (filas) y ancho adaptable
           ----------------------------- */

        /* Variables base de fuente y ancho maximo de celda */
        .vi-spreadsheet {
          --vi-grid-font-size: 0.75rem;          /* tamano base de filas */
          --vi-grid-cell-max-width: 110px;       /* aprox. ancho actual maximo por columna */
          font-size: var(--vi-grid-font-size);
          table-layout: auto;
        }

        /* Escalones de tamano de fuente para las FILAS (no afecta titulos ni botones) */
        .vi-spreadsheet.vi-grid-font-0 { --vi-grid-font-size: 0.75rem; }
        .vi-spreadsheet.vi-grid-font-1 { --vi-grid-font-size: 0.8rem; }
        .vi-spreadsheet.vi-grid-font-2 { --vi-grid-font-size: 0.85rem; }
        .vi-spreadsheet.vi-grid-font-3 { --vi-grid-font-size: 0.9rem; }
        .vi-spreadsheet.vi-grid-font-4 { --vi-grid-font-size: 0.95rem; }
        .vi-spreadsheet.vi-grid-font-5 { --vi-grid-font-size: 1.0rem; }

        /* Encabezados y celdas (excepto ndice y medidor fijo):
           minimo igual al ttulo, pero pueden crecer hasta el ancho maximo actual */
        .vi-spreadsheet th:not(.vi-row-index):not(.vi-sticky-medidor),
        .vi-spreadsheet td:not(.vi-row-index):not(.vi-sticky-medidor) {
          white-space: nowrap;
          min-width: 64px;
          max-width: var(--vi-grid-cell-max-width);
        }

        /* Inputs y selects del grid: usan la fuente variable y se adaptan en alto.
           El ancho lo gobierna la celda (th/td), as pueden crecer con el contenido
           hasta el maximo definido arriba. */
        .vi-spreadsheet input.form-control {
          font-size: var(--vi-grid-font-size);
          height: calc(var(--vi-grid-font-size) * 2.3);
          width: 100%;
        }

        .vi-spreadsheet select.form-select {
          font-size: var(--vi-grid-font-size);
          width: 100%;
        }

        /* Valores de Q y E% siempre +2px respecto al resto de la fila */
        .vi-spreadsheet .vi-qe-value {
          font-size: calc(1em + 2px);
        }
        `}),i.jsx("div",{className:"modal-dialog modal-fluid",style:{maxWidth:"98vw",margin:"1vw"},children:i.jsx("div",{className:"modal-content",children:i.jsxs("form",{onSubmit:K(Ne),children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{className:"modal-title",children:a}),i.jsx("button",{type:"button",className:"btn-close",onClick:In,"aria-label":"Close"})]}),i.jsx("fieldset",{disabled:_,children:i.jsxs("div",{className:"modal-body p-2",children:[!C&&i.jsx("div",{className:"alert alert-warning py-1 mb-2",children:"Sin conexion. Los cambios se guardaran localmente hasta que vuelva la red."}),i.jsxs("div",{className:"row g-2 mb-2 align-items-end",children:[i.jsxs("div",{className:"col-auto",style:{maxWidth:"130px"},children:[i.jsx("label",{className:"form-label mb-1",children:"Filas"}),i.jsx("input",{type:"number",className:"form-control form-control-sm text-end",min:1,max:50,style:{maxWidth:"90px"},...U,ref:Y=>{Oe.current=Y,U.ref(Y)},onBlur:Mn,onKeyDown:Jn})]}),i.jsxs("div",{className:"col-md-4 d-flex flex-wrap gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:_a,children:"+ Agregar Fila"}),i.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:lt,children:"- Quitar ltima fila"}),i.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:sa,children:"Limpiar Todo"})]}),i.jsxs("div",{className:"col-md-4 d-flex justify-content-end gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:je,children:"Aumentar tamao"}),i.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:w,children:"Reducir tamao"})]}),i.jsxs("div",{className:"col-md-2 text-end text-muted small",children:["Fila activa: #",me+1,". Desplaza el cursor o enfoca la fila para seleccionarla (Fila 1 se replica al resto)."]})]}),i.jsx("div",{className:"table-responsive border rounded",style:{maxHeight:"70vh",overflowY:"auto",overflowX:"auto"},children:i.jsxs("table",{className:`table table-bordered table-sm mb-0 align-middle text-center vi-spreadsheet vi-grid-font-${M}`,children:[i.jsxs("thead",{className:"table-light sticky-top z-1",children:[i.jsxs("tr",{children:[i.jsx("th",{className:"vi-row-index",style:{width:"30px"},children:"#"}),i.jsx("th",{className:"vi-sticky-medidor",style:{width:"120px"},children:"# Medidor"}),i.jsx("th",{style:{width:"90px"},children:"Estado"}),i.jsx("th",{className:"table-primary border-start border-dark",colSpan:9,children:"Q3"}),i.jsx("th",{className:"table-primary border-start border-dark",colSpan:9,children:"Q2"}),i.jsx("th",{className:"table-primary border-start border-dark",colSpan:9,children:"Q1"}),i.jsx("th",{className:"bg-warning text-dark border-start border-dark vi-header-at",style:{width:"100px"},children:"Conformidad"}),i.jsx("th",{className:"bg-light text-dark vi-header-quitar",style:{width:"40px"},children:"Quitar"})]}),i.jsxs("tr",{style:{fontSize:"0.75rem"},children:[i.jsx("th",{className:"vi-row-index"}),i.jsx("th",{className:"vi-sticky-medidor"}),i.jsx("th",{}),i.jsx("th",{className:"vi-min-width",title:"J",children:"Temp"}),i.jsx("th",{className:"vi-min-width",title:"K",children:"P.Ent"}),i.jsx("th",{className:"vi-min-width",title:"L",children:"P.Sal"}),i.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"M",children:"L.I."}),i.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"N",children:"L.F."}),i.jsx("th",{className:"vi-min-width",title:"O",children:"Vol"}),i.jsx("th",{className:"vi-min-width",title:"P",children:"Tpo"}),i.jsx("th",{title:"T (Caudal)",className:"bg-light border-start text-primary fw-bold vi-min-width",children:"Q3"}),i.jsx("th",{title:"U (Error %)",className:"bg-light text-danger  fw-bold vi-min-width",children:"E%"}),i.jsx("th",{className:"vi-min-width border-start border-dark",title:"V",children:"Temp"}),i.jsx("th",{className:"vi-min-width",title:"W",children:"P.Ent"}),i.jsx("th",{className:"vi-min-width",title:"X",children:"P.Sal"}),i.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"Y",children:"L.I."}),i.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"Z",children:"L.F."}),i.jsx("th",{className:"vi-min-width",title:"AA",children:"Vol"}),i.jsx("th",{className:"vi-min-width",title:"AB",children:"Tpo"}),i.jsx("th",{title:"AF (Caudal)",className:"bg-light border-start text-primary fw-bold vi-min-width",children:"Q2"}),i.jsx("th",{title:"AG (Error %)",className:"bg-light text-danger  fw-bold vi-min-width",children:"E%"}),i.jsx("th",{className:"vi-min-width border-start border-dark",title:"AH",children:"Temp"}),i.jsx("th",{className:"vi-min-width",title:"AI",children:"P.Ent"}),i.jsx("th",{className:"vi-min-width",title:"AJ",children:"P.Sal"}),i.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"AK",children:"L.I."}),i.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"AL",children:"L.F."}),i.jsx("th",{className:"vi-min-width",title:"AM",children:"Vol"}),i.jsx("th",{className:"vi-min-width",title:"AN",children:"Tpo"}),i.jsx("th",{title:"AR (Caudal)",className:"bg-light border-start text-primary fw-bold vi-min-width",children:"Q1"}),i.jsx("th",{title:"AS (Error %)",className:"bg-light text-danger  fw-bold vi-min-width",children:"E%"}),i.jsx("th",{title:"AT (Conformidad)",className:"bg-warning text-dark vi-header-at",children:"Estado"}),i.jsx("th",{className:"vi-header-quitar"})]})]}),i.jsx("tbody",{onKeyDown:Te,children:X.map((Y,te)=>{const Ae=te===0,Ze=qt?.[te]||{},st=ie[te]||{},ft=Number(Ze.estado??0),Ke=ft>=1&&ft<=4,Qt=Ze.q3?.c6,kt=Ze.q3?.c7_seconds,Rt=Ze.q3?.c4,Wt=Ze.q3?.c5,_t=Vf(Qt,kt),at=Zf(Rt,Wt,Qt),yt=Ze.q2?.c6,It=Ze.q2?.c7_seconds,fn=Ze.q2?.c4,mn=Ze.q2?.c5,en=Vf(yt,It),hn=Zf(fn,mn,yt),Ft=Ze.q1?.c6,Fn=Ze.q1?.c7_seconds,rn=Ze.q1?.c4,vn=Ze.q1?.c5,Pn=Vf(Ft,Fn),kn=Zf(rn,vn,Ft),Tt=HR(Ze.estado,at,hn,kn),is=[Ae?"vi-base-row":"",me===te?"table-active":""].filter(Boolean).join(" "),tn=B(`rowsData.${te}.medidor`),pn=$R(Ze.medidor??""),Cn=pn?h?.[pn]?.message:"",Un=st.medidor_format||st.medidor_dup||Cn||"",Xa=!!Un,$a=(Tt||"").toUpperCase(),Ja=$a==="NO CONFORME"?"vi-at-valor--fail":$a==="CONFORME"?"vi-at-valor--ok":"";return i.jsxs("tr",{className:is,onMouseEnter:()=>Se(te),onClick:()=>Se(te),onFocusCapture:()=>Se(te),children:[i.jsx("td",{className:"small vi-row-index",children:te+1}),i.jsx("td",{className:"vi-sticky-medidor",children:i.jsx("input",{"data-row":te,"data-row-id":Y.id,...tn,size:1,style:{minWidth:"100%"},disabled:Ke,onInput:un,className:["form-control form-control-sm p-1 text-center vi-medidor-input",Xa?"vi-error-cell":""].filter(Boolean).join(" "),title:Un||"",onChange:nn=>{const Wn=Z(`rowsData.${te}.medidor`);if(tn.onChange(nn),g?.(Wn),te===0)return;const Qn=nn.currentTarget.value.trim();if(!Qn){Ue.current.delete(Y.id);return}const ln=fv(We?.medidor??"",te,f);ln&&ln===Qn?Ue.current.delete(Y.id):Ue.current.set(Y.id,!0)}})}),i.jsx("td",{children:i.jsxs("select",{className:"form-select form-select-sm p-0 px-1",style:{fontSize:"0.75rem",height:"24px"},...B(`rowsData.${te}.estado`,{valueAsNumber:!0}),children:[i.jsx("option",{value:0,children:"0"}),i.jsx("option",{value:1,children:"1"}),i.jsx("option",{value:2,children:"2"}),i.jsx("option",{value:3,children:"3"}),i.jsx("option",{value:4,children:"4"}),i.jsx("option",{value:5,children:"5"})]})}),i.jsx("td",{className:"border-start border-dark",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:un,disabled:!Ae||Ke,...B(`rowsData.${te}.q3.c1`,{setValueAs:Bn})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:un,disabled:!Ae||Ke,...B(`rowsData.${te}.q3.c2`,{setValueAs:Bn})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:un,disabled:!Ae||Ke,...B(`rowsData.${te}.q3.c3`,{setValueAs:Bn})})}),i.jsx("td",{className:"bg-white",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:un,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(st.q3_li?" vi-error-cell":""),title:st.q3_li||"",...B(`rowsData.${te}.q3.c4`,{setValueAs:Bn})})}),i.jsx("td",{className:"bg-white",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:un,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(st.q3_lf?" vi-error-cell":""),title:st.q3_lf||"",...B(`rowsData.${te}.q3.c5`,{setValueAs:Bn})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:un,disabled:!Ae||Ke,...B(`rowsData.${te}.q3.c6`,{setValueAs:Bn})})}),i.jsx("td",{children:i.jsx("input",{type:"text",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:un,disabled:!Ae||Ke,...B(`rowsData.${te}.q3.c7`),placeholder:"m,ss,ms"})}),i.jsx(Nl,{val:_t}),i.jsx(Nl,{val:at,isErr:!0,warnThreshold:2,failThreshold:5}),i.jsx("td",{className:"border-start border-dark",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:un,disabled:!Ae||Ke,...B(`rowsData.${te}.q2.c1`,{setValueAs:Bn})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:un,disabled:!Ae||Ke,...B(`rowsData.${te}.q2.c2`,{setValueAs:Bn})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:un,disabled:!Ae||Ke,...B(`rowsData.${te}.q2.c3`,{setValueAs:Bn})})}),i.jsx("td",{className:"bg-white",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:un,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(st.q2_li?" vi-error-cell":""),title:st.q2_li||"",...B(`rowsData.${te}.q2.c4`,{setValueAs:Bn})})}),i.jsx("td",{className:"bg-white",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:un,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(st.q2_lf?" vi-error-cell":""),title:st.q2_lf||"",...B(`rowsData.${te}.q2.c5`,{setValueAs:Bn})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:un,disabled:!Ae||Ke,...B(`rowsData.${te}.q2.c6`,{setValueAs:Bn})})}),i.jsx("td",{children:i.jsx("input",{type:"text",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:un,disabled:!Ae||Ke,...B(`rowsData.${te}.q2.c7`),placeholder:"m,ss,ms"})}),i.jsx(Nl,{val:en}),i.jsx(Nl,{val:hn,isErr:!0,warnThreshold:2,failThreshold:5}),i.jsx("td",{className:"border-start border-dark",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:un,disabled:!Ae||Ke,...B(`rowsData.${te}.q1.c1`,{setValueAs:Bn})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:un,disabled:!Ae||Ke,...B(`rowsData.${te}.q1.c2`,{setValueAs:Bn})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:un,disabled:!Ae||Ke,...B(`rowsData.${te}.q1.c3`,{setValueAs:Bn})})}),i.jsx("td",{className:"bg-white",children:i.jsx("input",{type:"text",inputMode:"decimal",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:un,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(st.q1_li?" vi-error-cell":""),title:st.q1_li||"",...B(`rowsData.${te}.q1.c4`,{setValueAs:Bn})})}),i.jsx("td",{className:"bg-white",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:un,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(st.q1_lf?" vi-error-cell":""),title:st.q1_lf||"",...B(`rowsData.${te}.q1.c5`,{setValueAs:Bn})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:un,disabled:!Ae||Ke,...B(`rowsData.${te}.q1.c6`,{setValueAs:Bn})})}),i.jsx("td",{children:i.jsx("input",{type:"text",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:un,disabled:!Ae||Ke,...B(`rowsData.${te}.q1.c7`),placeholder:"m,ss,ms"})}),i.jsx(Nl,{val:Pn}),i.jsx(Nl,{val:kn,isErr:!0,warnThreshold:5,failThreshold:5}),i.jsx("td",{className:`bg-light border-start fw-bold small text-center vi-at-valor ${Ja}`,children:Tt}),i.jsx("td",{className:"text-center align-middle bg-light",children:i.jsx("button",{type:"button",className:"btn btn-danger btn-sm p-0",style:{width:"20px",height:"20px",lineHeight:"1"},onClick:nn=>{nn.stopPropagation(),dn(te)},disabled:X.length<=1,title:"Eliminar esta fila",children:""})})]},Y.id)})})]})})]})}),i.jsxs("div",{className:"modal-footer py-1",children:[i.jsx("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:In,children:"Cancelar"}),i.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",ref:P,disabled:$n||_,children:q&&C?"Reintentar guardar":"Guardar Bancada"})]})]})})})]}),i.jsx("div",{className:"modal-backdrop show vi-backdrop"})]}):null}function fu({show:e,title:a="Contrasea para proteger Excel",confirmLabel:s="Generar Excel",helpText:l="Se usar para proteger estructura y escritura del libro. No habr contrasea de apertura.",onClose:c,onConfirm:d}){const[f,h]=y.useState(""),g=y.useRef(null),p=f.trim().length>0;if(y.useEffect(()=>{e&&(h(""),setTimeout(()=>g.current?.focus(),0))},[e]),y.useEffect(()=>{if(!e)return;const x=N=>{N.key==="Escape"&&c()};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,c]),!e)return null;const v=x=>{x.preventDefault(),p&&d(f.trim())};return i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"pwdModalTitle",onClick:x=>{x.target===x.currentTarget&&c()},children:i.jsx("div",{className:"modal-dialog",children:i.jsxs("form",{className:"modal-content",onSubmit:v,children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{id:"pwdModalTitle",className:"modal-title",children:a}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:c})]}),i.jsx("div",{className:"modal-body",children:i.jsxs("div",{className:"mb-3",children:[i.jsx(Vi,{label:"Contrasea",inputId:"pwd",value:f,onChange:x=>h(x.target.value),inputRef:g,minLength:1,required:!0}),i.jsx("div",{className:"form-text",children:l})]})}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:c,children:"Cancelar"}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!p,children:s})]})]})})})}async function ZR(e,a){try{const{data:s}=await Ye.put(`/oi/${e}`,a);return s}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo actualizar la OI",c=new Error(l);throw c.status=s?.response?.status,c}}async function GR(e,a){try{const{data:s}=await Ye.patch(`/oi/${e}/code`,{code:a});return s}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo actualizar el codigo de la OI",c=new Error(l);throw c.status=s?.response?.status,c}}async function PR(e,a){try{const{data:s}=await Ye.patch(`/oi/${e}/restore-updated-at`,a);return s}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo restaurar la fecha de la OI",c=new Error(l);throw c.status=s?.response?.status,c}}async function QR(e){try{const{data:a}=await Ye.post("/oi",e);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo crear el OI";throw new Error(s)}}async function mv(e,a){try{const{data:s}=await Ye.post(`/oi/${e}/bancadas`,a);return s}catch(s){const l=s?.response?.data?.detail;let c=s?.message??"No se puedo agregar la bancada";typeof l=="string"?c=l:l&&typeof l=="object"&&(c=l.message??l.detail??c);const d=s?.response?.data?.duplicates??(l&&typeof l=="object"?l.duplicates:void 0),f=new Error(c);throw f.status=s?.response?.status,Array.isArray(d)&&(f.duplicates=d),f}}async function YR(e,a){try{const{data:s}=await Ye.put(`/oi/bancadas/${e}`,a);return s}catch(s){const l=s?.response?.data?.detail;let c=s?.message??"No se pudo actualizar la bancada";typeof l=="string"?c=l:l&&typeof l=="object"&&(c=l.message??l.detail??c);const d=s?.response?.data?.duplicates??(l&&typeof l=="object"?l.duplicates:void 0),f=new Error(c);throw f.status=s?.response?.status,Array.isArray(d)&&(f.duplicates=d),f}}async function KR(e,a){try{const{data:s}=await Ye.patch(`/oi/bancadas/${e}/saved_at`,a);return s}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo actualizar la fecha de la bancada",c=new Error(l);throw c.status=s?.response?.status,c}}async function XR(e,a){try{const{data:s}=await Ye.put(`/oi/bancadas/${e}/restore`,a);return s}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo restaurar la bancada",c=new Error(l);throw c.status=s?.response?.status,c}}async function hv(e){try{await Ye.delete(`/oi/bancadas/${e}`)}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo eliminar la bancada";throw new Error(s)}}async function E0(e,a){let s;try{s=await Ye.post(`/oi/${e}/excel`,{password:a},{responseType:"blob"})}catch(p){let v=p?.message??"No se pudo generar el Excel";const x=p?.response?.data;if(x instanceof Blob)try{const N=await x.text();try{const j=JSON.parse(N)?.detail;typeof j=="string"?v=j:Array.isArray(j)&&j.length>0?v=j.map(_=>String(_?.msg??"")).filter(Boolean).join(", "):N&&(v=N)}catch{N&&(v=N)}}catch{}else v=p?.response?.data?.detail??v;throw new Error(v)}const l=s.data,f=s.headers["content-disposition"]?.match(/filename="(.+?)"/i)?.[1]??`OI-${e}.xlsx`,h=URL.createObjectURL(l),g=document.createElement("a");g.href=h,g.download=f,document.body.appendChild(g),g.click(),URL.revokeObjectURL(h),g.remove()}async function JR(e){await Ye.delete(`/oi/${e}`)}async function WR(e){try{const{data:a}=await Ye.post(`/oi/${e}/lock`);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo bloquear la OI",l=new Error(s);throw l.status=a?.response?.status,l}}async function wc(e,a){try{const s=a?{params:{reason:a}}:void 0,{data:l}=await Ye.delete(`/oi/${e}/lock`,s);return l}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo liberar la OI",c=new Error(l);throw c.status=s?.response?.status,c}}async function eT(e,a){try{const{data:s}=await Ye.patch(`/oi/${e}/saved_at`,a);return s}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo actualizar la fecha de guardado",c=new Error(l);throw c.status=s?.response?.status,c}}async function Gf(e){try{const{data:a}=await Ye.get(`/oi/${e}/full`);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se puedo cargar el OI";throw new Error(s)}}async function tT(e){try{const{data:a}=await Ye.get("/oi",{params:{q:e.q||void 0,date_from:e.dateFrom||void 0,date_to:e.dateTo||void 0,limit:e.limit,offset:e.offset,responsable_tech_number:e.responsableTechNumber||void 0},headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo obtener el listado de OI";throw new Error(s)}}async function nT(e){let a;try{a=await Ye.get("/oi/export/csv",{params:{q:e.q||void 0,date_from:e.dateFrom||void 0,date_to:e.dateTo||void 0,responsable_tech_number:e.responsableTechNumber||void 0},responseType:"blob"})}catch(f){let h=f?.message??"No se pudo exportar el CSV";const g=f?.response?.data;if(g instanceof Blob)try{const v=await g.text();try{const N=JSON.parse(v)?.detail;typeof N=="string"?h=N:Array.isArray(N)&&N.length>0?h=N.map(q=>String(q?.msg??"")).filter(Boolean).join(", "):v&&(h=v)}catch{v&&(h=v)}}catch{}else h=f?.response?.data?.detail??h;const p=new Error(h);throw p.status=f?.response?.status,p}const s=a.data,d=a.headers["content-disposition"]?.match(/filename="(.+?)"/i)?.[1]??"oi_list.csv";return{blob:s,filename:d}}async function aT(){try{const{data:e}=await Ye.get("/oi/responsables");return e}catch(e){const a=e?.response?.data?.detail??e?.message??"No se pudo obtener responsables";throw new Error(a)}}async function Pf(e){try{const{data:a}=await Ye.get(`/oi/${e}`);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo obtener el OI";throw new Error(s)}}const lh="vi.currentOI";function qi(e){sessionStorage.setItem(lh,JSON.stringify(e))}function pv(){const e=sessionStorage.getItem(lh);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function _m(){sessionStorage.removeItem(lh)}const Qf=e=>{if(e)return{c1:e.c1??null,c2:e.c2??null,c3:e.c3??null,c4:e.c4??null,c5:e.c5??null,c6:e.c6??null,c7:e.c7??"",c7_seconds:e.c7_seconds??null,caudal:e.caudal??null,error:e.error??null}},Yf=e=>{if(e)return{c1:e.c1??null,c2:e.c2??null,c3:e.c3??null,c4:e.c4??null,c5:e.c5??null,c6:e.c6??null,c7:e.c7??null,c7_seconds:e.c7_seconds??null,caudal:e.caudal??null,error:e.error??null}},sT=e=>({medidor:e.medidor??"",estado:e.estado??0,q3:Qf(e.q3),q2:Qf(e.q2),q1:Qf(e.q1)}),rT=e=>({medidor:e.medidor??"",estado:e.estado??0,q3:Yf(e.q3),q2:Yf(e.q2),q1:Yf(e.q1)}),A0=e=>e.rows_data&&e.rows_data.length>0?e.rows_data:Array.from({length:e.rows}).map((a,s)=>({medidor:s===0?e.medidor??"":"",estado:e.estado,q3:s===0?e.q3??void 0:void 0,q2:s===0?e.q2??void 0:void 0,q1:s===0?e.q1??void 0:void 0})),lT=e=>e.reduce((a,s)=>a+(s.rows??0),0),iT=e=>JSON.parse(JSON.stringify(e)),gv=e=>JSON.stringify({medidor:e.medidor??null,estado:e.estado??0,rows:e.rows??0,rows_data:e.rows_data??null,q1:e.q1??null,q2:e.q2??null,q3:e.q3??null}),yv=e=>e.rows_data&&e.rows_data.length>0?e.rows_data:A0(e),oT=(e,a)=>e==="view"&&a?"view":"edit",bv=e=>{if(!e)return"";const s=/([zZ]|[+-]\d{2}:?\d{2})$/.test(e)?e:`${e}Z`,l=new Date(s);if(Number.isNaN(l.getTime()))return"";const c=d=>d.toString().padStart(2,"0");return`${l.getFullYear()}-${c(l.getMonth()+1)}-${c(l.getDate())}T${c(l.getHours())}:${c(l.getMinutes())}`},cT=e=>{if(!e)return"";const a=new Date(e);return Number.isNaN(a.getTime())?"":a.toISOString().replace("Z","")},C0=e=>(e??"").trim().toUpperCase(),uT=e=>{const a={};e.forEach(l=>{const c=C0(l.medidor);c&&(a[c]||(a[c]={items:[],ids:[]}),l.bancada_item!=null&&!a[c].items.includes(l.bancada_item)&&a[c].items.push(l.bancada_item),l.bancada_id!=null&&!a[c].ids.includes(l.bancada_id)&&a[c].ids.push(l.bancada_id))});const s={};return Object.entries(a).forEach(([l,c])=>{let d="Este medidor existe en otra bancada de esta misma OI.";c.items.length>0&&(d=`Este medidor existe en la bancada #${[...c.items].sort((h,g)=>h-g).join(", ")} de esta misma OI.`),s[l]={message:d,bancadaItem:c.items[0],bancadaId:c.ids[0]}}),s},dT="Tienes una OI abierta en edicion. Cierra la OI antes de salir. Deseas salir de todas formas?",fT=(e,a=!0)=>{const l=y.useContext(Ba)?.navigator;y.useEffect(()=>{if(!a||!l||typeof l.block!="function")return;const c=l.block(d=>{const f={...d,retry(){c(),d.retry()}};e(f)});return c},[l,e,a])},mT=e=>{const a=Ye.defaults.baseURL??(typeof window<"u"?window.location.origin:"");return`${String(a).replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`},hT=()=>{const[e,a]=y.useState(typeof navigator<"u"?navigator.onLine:!0);return y.useEffect(()=>{const s=()=>a(!0),l=()=>a(!1);return window.addEventListener("online",s),window.addEventListener("offline",l),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",l)}},[]),e},jc=e=>{if(e?.status??e?.response?.status)return!1;const s=e?.code??e?.name;return s==="ERR_NETWORK"||s==="ECONNABORTED"?!0:!e?.response};function vv(){const{toast:e}=Br(),a=Lr(),s=aa(),{oiId:l}=ww(),[c,d]=Gv(),f=hT(),{data:h}=zr({queryKey:["catalogs"],queryFn:Jm}),{register:g,handleSubmit:p,watch:v,formState:{errors:x},reset:N,getValues:q}=Kc({resolver:jO(LR),defaultValues:{oi:`OI-0001-${new Date().getFullYear()}`,numeration_type:"correlativo",pma:16,q3:2.5,alcance:80}}),j=Dn(),_=j?.userId??null,C=j?.bancoId??Hi(),B=Ua(j?.role,j?.username)!=="technician",T=pv(),K=l?Number(l):null,D=Number.isFinite(K)?K:null,R=D!=null||(T?.id??null)!=null,Z=(c.get("mode")||"").toLowerCase(),U=oT(Z,R),X=U==="view",ce=U==="edit",[_e,xe]=y.useState(!1),[me,Se]=y.useState(!1),[De,Oe]=y.useState(null),[M,I]=y.useState(null),[ee,be]=y.useState(!1),je=me||X,[w,P]=y.useState(!1),[ie,k]=y.useState(null),[oe,ge]=y.useState(null),[Re,$e]=y.useState(null),[de,Ue]=y.useState(!1),[Ie,Ve]=y.useState(""),[dt,Te]=y.useState(null),[He,fe]=y.useState("bancada"),[Fe,Ee]=y.useState(!1),[Je,A]=y.useState(!1),[V,O]=y.useState(null),Q=y.useRef([]),G=y.useRef(null),se=y.useRef(!1),Ce=y.useRef(!1),Le=y.useRef(!1),ae=y.useRef(null),Me=y.useRef(!1),Pe=y.useRef(f),rt=y.useRef(!1),Pt=y.useRef(!1),[Ne,We]=y.useState(null),[qt,jt]=y.useState(null),[An,qn]=y.useState([]),[_a,dn]=y.useState(!1),[lt,sa]=y.useState(null),[Mn,Jn]=y.useState(!1),[In,$n]=y.useState(null),[Y,te]=y.useState(0),[Ae,Ze]=y.useState({}),[st,ft]=y.useState({}),Ke=s.state?.returnTo,Qt=()=>typeof Ke=="string"&&Ke?Ke:"/oi/list",kt=E=>{const H=new URLSearchParams(c);H.set("mode",E),d(H,{replace:!0})},Rt="new",Wt=15,_t=E=>E?`bancada-${E.id}`:Rt,at=E=>E==null?!1:typeof E=="string"?E.trim()!=="":typeof E=="number"?Number.isFinite(E):!0,yt=E=>E==="c7_seconds"||E==="caudal"||E==="error",It=E=>E?Object.entries(E).some(([H,pe])=>yt(H)?!1:at(pe)):!1,fn=E=>!E||!Array.isArray(E.rowsData)?!1:E.rowsData.some(H=>{if(!H)return!1;if(Number(H.estado??0)!==0)return!0;const ke=H.medidor;return typeof ke=="string"&&ke.trim()!==""?!0:It(H.q3)||It(H.q2)||It(H.q1)}),mn=(E=Wt)=>Array.from({length:E}).map(()=>({medidor:"",estado:0,q3:{},q2:{},q1:{}})),en=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`draft-${Date.now()}`,hn=E=>({draftId:en(),draftCreatedAt:new Date().toISOString(),estado:0,rows:Wt,rowsData:mn(),version:null}),Ft=E=>{const H=new URLSearchParams(s.search);H.set("mode","edit");const pe=s.pathname==="/oi"||s.pathname==="/oi/"?E?`/oi/${E}`:"/oi":s.pathname,ke=H.toString();return ke?`${pe}?${ke}`:pe},Fn=(E,H)=>!E||!_||C==null?null:{version:1,ts:new Date().toISOString(),userId:_,bankId:C,oiId:E,oiCode:q("oi")??null,returnTo:Ft(E),mode:"edit",modal:H},rn=()=>{if(_a)return lt?{type:"bancada",bancadaId:lt.id}:{type:"bancada",isNew:!0}},vn=E=>Uf({userId:_,bankId:C,oiId:E,type:"bancada",isNew:!0}),Pn=E=>{const H=vn(E);if(!H)return null;const pe=Lf(H);if(!pe||!_||C==null||!E||pe.userId!==_||pe.bankId!==C||pe.oiId!==E)return null;const ke=pe?.data??null;return fn(ke)?ke:(nr(H),null)},kn=(E,H)=>{const pe=vn(E);if(!pe)return;if(!H||!fn(H)){nr(pe);return}if(!_||C==null||!E)return;const ke={version:1,ts:new Date().toISOString(),userId:_,bankId:C,oiId:E,isNew:!0,data:H},it=Fn(E,{type:"bancada",isNew:!0});Bi(pe,ke,it)},Tt=E=>Uf({userId:_,bankId:C,oiId:E,type:"header"}),is=E=>{if(!E)return null;const H=Lf(E);return!H||!_||C==null||H.userId!==_||H.bankId!==C||Ne!=null&&H.oiId!==Ne?null:H?.data??null},tn=(E,H)=>{if(!E||!_||C==null)return;const pe=Ne??0,ke={version:1,ts:new Date().toISOString(),userId:_,bankId:C,oiId:pe,data:H},it=Fn(Ne,rn());Bi(E,ke,it)},pn=E=>{E&&nr(E)},Cn=E=>{const H={};return E.q3!=null&&(H.q3=Number(E.q3)),E.alcance!=null&&(H.alcance=Number(E.alcance)),E.pma!=null&&(H.pma=Number(E.pma)),E.numeration_type&&(H.numeration_type=E.numeration_type),H},Un=(E,H)=>Uf({userId:_,bankId:C,oiId:E,type:"bancada",bancadaId:H}),Xa=(E,H)=>{const pe=Un(E,H);if(!pe)return null;const ke=Lf(pe);if(!ke||!_||C==null||!E||!H||ke.userId!==_||ke.bankId!==C||ke.oiId!==E)return null;const it=ke?.data??null;return fn(it)?it:(nr(pe),null)},$a=(E,H,pe)=>{const ke=Un(E,H);if(!ke)return;if(!fn(pe)){nr(ke);return}if(!_||C==null||!E||!H)return;const it={version:1,ts:new Date().toISOString(),userId:_,bankId:C,oiId:E,bancadaId:H,data:pe},Ct=Fn(E,{type:"bancada",bancadaId:H});Bi(ke,it,Ct)},Ja=(E,H)=>{const pe=Un(E,H);pe&&nr(pe)},nn=Tt(Ne);y.useEffect(()=>{h&&N(E=>({...E,q3:h.q3[0],alcance:h.alcance[0],pma:16}))},[h,N]),y.useEffect(()=>{const E=pv(),H=D??E?.id??null;if(!H){We(null),qn([]),Q.current=[],G.current=null,$n(null),te(0),jt(null),ge(null),$e(null),P(!1),Se(!1),Oe(null),I(null),be(!1),k(null);return}(async()=>{try{const pe=await Gf(H);We(pe.id),qi({id:pe.id,code:pe.code}),qn(pe.bancadas??[]),Q.current=iT(pe.bancadas??[]),G.current=pe.updated_at??null,$n(pe.medidores_usuario??null),te(pe.medidores_total_code??0),ge(pe.saved_at??null),$e(pe.created_at??null),jt(pe.updated_at??pe.created_at);const ke={oi:pe.code,q3:pe.q3,alcance:pe.alcance,pma:pe.pma,numeration_type:pe.numeration_type??"correlativo"};N(ke),P(!1),Se(pe.read_only_for_current_user??!1),Oe(pe.locked_by_full_name??null),I(pe.locked_by_user_id??null),be((pe.locked_by_user_id??null)===_),k(ke)}catch{_m()}})()},[N,_,D]),y.useEffect(()=>{if(!Ne||st[Rt])return;const E=Pn(Ne);E&&(ft(H=>({...H,[Rt]:E})),e({kind:"info",message:"Se restauro un borrador local."}))},[Ne,st,e]),y.useEffect(()=>{if(!Ne||!_||!ce)return;let E=!1;return(async()=>{const H=pe=>{Se(pe?.read_only_for_current_user??!1),Oe(pe?.locked_by_full_name??null),I(pe?.locked_by_user_id??null),be((pe?.locked_by_user_id??null)===_)};try{const pe=await WR(Ne);if(E)return;H(pe)}catch(pe){if(E)return;const ke=pe?.status??pe?.response?.status;let it=null;try{const pt=await Gf(Ne);if(E)return;it=pt.locked_by_full_name??null,H({read_only_for_current_user:!0,locked_by_full_name:it,locked_by_user_id:pt.locked_by_user_id??null})}catch{Se(!0),be(!1)}const Ct=it?`La OI est? siendo editada por ${it}. Se abre en modo lectura.`:pe?.message??"La OI est? siendo editada por otro usuario. Int?ntelo m?s tarde.";e({kind:ke===423||ke===409?"warning":"error",title:ke===423||ke===409?"OI bloqueada":"Error",message:Ct}),Se(!0),be(!1),Z!=="view"&&kt("view")}})(),()=>{E=!0}},[Ne,_,ce]),y.useEffect(()=>()=>{Ne&&ee&&wc(Ne).catch(()=>{})},[Ne,ee]),y.useEffect(()=>{Ne&&(!ee||je||!ce||cE(Ne))},[ee,Ne,je,ce]),y.useEffect(()=>{Ce.current=!1,Le.current=!1,A(!1),Me.current=!1,Pt.current=!1},[Ne]),y.useEffect(()=>{if(!Pe.current&&f){if(!!!Dn()?.token){e({kind:"warning",message:"Conexion restablecida, pero debes iniciar sesion para guardar."}),Pe.current=f;return}(Le.current||Je)&&e({kind:"info",message:"Conexion restablecida. Puedes reintentar guardar."})}Pe.current=f},[f,Je,e]),y.useEffect(()=>{const E=()=>{e({kind:"warning",message:"Sesion expirada. Inicia sesion para guardar. Tu borrador esta guardado."})};return window.addEventListener("medileser:auth-expired",E),()=>window.removeEventListener("medileser:auth-expired",E)},[e]),y.useEffect(()=>{const E=mE();if(!E){O(null),rt.current=!1;return}const H=`${s.pathname}${s.search}`,pe=E.route===H,ke=E.oiId==null||E.oiId===Ne;if(!pe&&!ke){O(null),rt.current=!1;return}O(E),E.type==="save_bancada"&&A(!0),E.type==="save_oi"&&(Le.current=!0),rt.current||(e({kind:"info",message:"Sesion restaurada. Reintenta guardar."}),rt.current=!0)},[s.pathname,s.search,Ne,e]);const Wn=ce&&!je&&(w||!Ne);y.useEffect(()=>{if(!Wn||Me.current)return;const E=is(nn);if(!E)return;const H=q();N({...H,...E,numeration_type:E.numeration_type??H.numeration_type??"correlativo"}),Me.current=!0,e({kind:"info",message:"Se restauro un borrador local."})},[Wn,nn,q,N,e]),y.useEffect(()=>{if(!Wn)return;const E=v(H=>{ae.current&&window.clearTimeout(ae.current),ae.current=window.setTimeout(()=>{tn(nn,Cn(H))},400)});return()=>{E.unsubscribe(),ae.current&&window.clearTimeout(ae.current)}},[v,Wn,nn]);const Qn=y.useMemo(()=>Object.keys(st).length>0,[st]),ln=ce&&!je&&(ee||w||Qn);y.useEffect(()=>{if(!ln)return;const E=H=>{if(!se.current)return H.preventDefault(),H.returnValue="",""};return window.addEventListener("beforeunload",E),()=>window.removeEventListener("beforeunload",E)},[ln]),fT(E=>{if(!ln){E.retry();return}if(se.current){E.retry();return}if(E.location.pathname===s.pathname){E.retry();return}window.confirm(dT)&&E.retry()},ln),y.useEffect(()=>{if(!Ne||!ee||je||!ce)return;const E=()=>{if(se.current||Ce.current)return;Ce.current=!0;const pe=Dn()?.token,ke=mT(`/oi/${Ne}/close`);fetch(ke,{method:"POST",headers:pe?{Authorization:`Bearer ${pe}`}:void 0,keepalive:!0}).catch(()=>{})},H=()=>{E()};return window.addEventListener("pagehide",H),()=>window.removeEventListener("pagehide",H)},[Ne,ee,je,ce]);const Fa=v("pma"),$r=y.useMemo(()=>qR(Number(Fa)),[Fa]),$=v("numeration_type")??"correlativo",he=async E=>{try{xe(!0);const H=Dn();if(!H)throw new Error("Sesin no vlida");const pe=H.bancoId;if(pe==null)throw new Error("Debe seleccionar un banco para crear una OI.");const ke={code:E.oi,q3:Number(E.q3),alcance:Number(E.alcance),pma:Number(E.pma),banco_id:pe,tech_number:H.techNumber,numeration_type:E.numeration_type??"correlativo"},it=await QR(ke);return We(it.id),jt(it.updated_at??it.created_at),$n(it.medidores_usuario??0),te(it.medidores_total_code??0),ge(it.saved_at??null),$e(it.created_at??null),qi({id:it.id,code:it.code}),k(E),Le.current=!1,pn(Tt(null)),pn(Tt(it.id)),xl(),O(null),e({kind:"success",title:"OI creada",message:`${it.code} (#${it.id})`}),!0}catch(H){return jc(H)?(Le.current=!0,tn(nn,Cn(E)),e({kind:"warning",title:"Sin conexion",message:"Sin conexion. Cambios guardados localmente. Reintenta al reconectar."}),!1):Li(H)?(Le.current=!0,tn(nn,Cn(E)),!1):(e({kind:"error",title:"Error",message:H?.message??"Error creando OI"}),!1)}finally{xe(!1)}},ze=async E=>{if(!Ne)return!1;if(je)return e({kind:"warning",title:"Solo lectura",message:"La OI est bloqueada por otro usuario."}),!1;try{if(xe(!0),!Ne)throw new Error("No hay OI seleccionada para actualizar.");const H=E.oi?.trim(),pe=E.numeration_type??"correlativo",ke=ie?.numeration_type??"correlativo",it=!ie||Number(E.q3)!==Number(ie.q3)||Number(E.alcance)!==Number(ie.alcance)||Number(E.pma)!==Number(ie.pma)||pe!==ke,Ct=B&&!!H&&H!==(ie?.oi??""),pt=!Ct||it,xn=wt=>{jt(wt.updated_at??wt.created_at),ge(wt.saved_at??null),$e(wt.created_at??null),wt.code&&qi({id:wt.id,code:wt.code}),I(wt.locked_by_user_id??null),Oe(wt.locked_by_full_name??null),Se(wt.read_only_for_current_user??!1),be((wt.locked_by_user_id??null)===_)};let ra=null;if(pt){if(!qt)throw new Error("No se pudo determinar la version actual de la OI. Recargue la pagina e intentelo de nuevo.");const wt={q3:Number(E.q3),alcance:Number(E.alcance),pma:Number(E.pma),numeration_type:pe,updated_at:qt};ra=await ZR(Ne,wt),xn(ra)}if(Ct&&H)try{const wt=await GR(Ne,H);ra=wt,xn(wt)}catch(wt){if(jc(wt)||Li(wt))throw wt;const Hr=wt?.status??wt?.response?.status;return e(Hr===409?{kind:"error",title:"Conflicto",message:"Ya existe una OI con ese codigo."}:Hr===403?{kind:"error",title:"No autorizado",message:"No autorizado."}:Hr===422||Hr===400?{kind:"error",title:"Formato",message:"Formato de OI invalido. Debe ser OI-####-YYYY."}:{kind:"error",title:"Error",message:wt?.message??"Error actualizando OI"}),!1}return ra?(k({...E,oi:ra.code,numeration_type:pe}),P(!1),Le.current=!1,pn(nn),xl(),O(null),e({kind:"success",title:"OI actualizada",message:ra.code??E.oi}),!0):(P(!1),Le.current=!1,pn(nn),xl(),O(null),e({kind:"success",title:"OI actualizada",message:E.oi}),!0)}catch(H){if(jc(H))return Le.current=!0,tn(nn,Cn(E)),e({kind:"warning",title:"Sin conexion",message:"Sin conexion. Cambios guardados localmente. Reintenta al reconectar."}),!1;if(Li(H))return Le.current=!0,tn(nn,Cn(E)),!1;const pe=H?.status??H?.response?.status;return e(pe===409?{kind:"error",title:"Conflicto",message:"La OI fue modificada por otro usuario. Recargue la pgina y vuelva a intentar."}:{kind:"error",title:"Error",message:H?.message??"Error actualizando OI"}),!1}finally{xe(!1)}},Be=!!Ne&&w&&!je,nt=()=>Ze({}),On=E=>{const H=C0(E);H&&Ze(pe=>{if(!pe[H])return pe;const ke={...pe};return delete ke[H],ke})},Wa=()=>{if(je){e({kind:"warning",title:"Solo lectura",message:"No puede agregar bancadas mientras la OI est bloqueada."});return}if(!Ne)return;nt(),A(!1);const E=Pn(Ne),H=E??hn();ft(pe=>({...pe,[Rt]:H})),kn(Ne,H),E&&e({kind:"info",message:"Se restauro un borrador local."}),sa(null),dn(!0)},ir=E=>{if(je&&!X){e({kind:"warning",title:"Solo lectura",message:"No puede editar bancadas mientras la OI est? bloqueada."});return}nt(),A(!1);const H=Xa(Ne,E.id);if(H){const pe=_t(E);ft(ke=>({...ke,[pe]:H})),e({kind:"info",message:"Se restauro un borrador local."})}sa(E),dn(!0)};y.useEffect(()=>{if(!Ne||Pt.current)return;const E=nE();if(E&&!(!_||C==null)&&!(E.userId!==_||E.bankId!==C)&&E.oiId===Ne){if(E.modal?.type==="bancada"){if(E.modal.isNew){Pt.current=!0,Bf(),Wa();return}if(E.modal.bancadaId){const H=An.find(pe=>pe.id===E.modal?.bancadaId);if(!H)return;Pt.current=!0,Bf(),ir(H);return}}Pt.current=!0,Bf()}},[_,C,An,Ne,Wa,ir]);const Es=y.useMemo(()=>{const E=_t(lt),H=st[E];if(H){const it=H.version??lt?.updated_at??lt?.created_at??null;return{...H,version:it}}if(!lt)return;const ke=A0(lt).map(sT);return{estado:lt.estado,rows:ke.length||lt.rows,rowsData:ke,version:lt.updated_at??lt.created_at??null}},[lt,st]),ro=async E=>{if(Ne){if(je){e({kind:"warning",title:"Solo lectura",message:"No puede guardar bancadas mientras la OI est bloqueada."});return}nt(),A(!1);try{xe(!0);const H=E.draftCreatedAt??st[Rt]?.draftCreatedAt,pe={estado:Number(E.estado??0),rows:Number(E.rowsData.length),rows_data:E.rowsData.map(rT)};if(lt){const ke=E.version??lt.updated_at??lt.created_at??null;if(!ke)throw new Error("No se pudo determinar la versin actual de la bancada. Recargue y vuelva a intentar.");const it={...pe,updated_at:ke},Ct=await YR(lt.id,it);qn(pt=>pt.map(xn=>xn.id===Ct.id?Ct:xn)),jt(Ct.updated_at??Ct.created_at??qt),$n(null),Ja(Ne,lt.id),ft(pt=>{const xn=`bancada-${lt.id}`,{[xn]:ra,...wt}=pt;return wt}),e({kind:"success",message:"Bancada actualizada"})}else{H&&(pe.draft_created_at=H);const ke=await mv(Ne,pe);qn(it=>[...it,ke]),jt(ke.updated_at??ke.created_at??qt),$n(null),ft(it=>{const{new:Ct,...pt}=it;return pt}),kn(Ne,null),e({kind:"success",message:"Bancada agregada"})}try{const ke=await Pf(Ne);$n(ke.medidores_usuario??null),te(ke.medidores_total_code??Y),ge(ke.saved_at??null),$e(ke.created_at??null)}catch{}I(j?.userId??M),Oe(j?.fullName??De),be(_!==null),Se(!1),dn(!1),sa(null),xl(),O(null),A(!1)}catch(H){if(jc(H)){lt?$a(Ne,lt.id,E):kn(Ne,E),A(!0),e({kind:"warning",title:"Sin conexion",message:"Sin conexion. La bancada se guardo localmente. Reintenta cuando vuelva la red."});return}if(Li(H)){lt?$a(Ne,lt.id,E):kn(Ne,E),A(!0);return}const pe=H?.status??H?.response?.status;if(pe===409)e({kind:"error",title:"Conflicto",message:"La bancada fue modificada por otro usuario. Recargue la pgina y vuelva a intentar."});else if(pe===400){const ke=Array.isArray(H?.duplicates)?H.duplicates:Array.isArray(H?.response?.data?.duplicates)?H.response.data.duplicates:[];ke.length>0&&Ze(uT(ke)),e({kind:"warning",title:"Validacion",message:H?.message??"Error guardando bancada"})}else e({kind:"error",title:"Error",message:H?.message??"Error guardando bancada"})}finally{xe(!1)}}},lo=async E=>{if(confirm(`Eliminar bancada #${E.item}?`)){if(je){e({kind:"warning",title:"Solo lectura",message:"No puede eliminar bancadas mientras la OI est bloqueada."});return}try{if(xe(!0),!Ne)throw new Error("No hay OI cargada.");await hv(E.id),qn(pe=>pe.filter(ke=>ke.id!==E.id)),$n(null),ft(pe=>{const ke=`bancada-${E.id}`,{[ke]:it,...Ct}=pe;return Ct}),Ja(Ne,E.id);const H=await Pf(Ne);jt(H.updated_at??H.created_at??null),ge(H.saved_at??null),$e(H.created_at??null),I(H.locked_by_user_id??null),Oe(H.locked_by_full_name??null),Se(H.read_only_for_current_user??!1),be((H.locked_by_user_id??null)===_),$n(H.medidores_usuario??null),te(H.medidores_total_code??Y),e({kind:"success",message:`Bancada #${E.item} eliminada`})}catch(H){e({kind:"error",title:"Error",message:H?.message??"Error eliminando bancada"})}finally{xe(!1)}}},As=()=>{if(!Ne){e({kind:"warning",message:"Primero guarda el OI."});return}Jn(!0)},hu=async E=>{if(Ne)try{xe(!0),await E0(Ne,E),e({kind:"success",message:"Excel generado"})}catch(H){e({kind:"error",title:"Error",message:H?.message??"Error generando Excel"})}finally{xe(!1)}},io=()=>{if(!Ne||!B)return;const E=oe??Re;fe("oi"),Te(null),Ve(bv(E)),Ue(!0)},oo=E=>{if(!B)return;fe("bancada"),Te(E);const H=E.saved_at??E.created_at??oe??Re;Ve(bv(H)),Ue(!0)},Fl=async()=>{if(!Ne||!B)return;const E=cT(Ie);if(!E){e({kind:"warning",title:"Fecha",message:"Ingrese una fecha valida."});return}if(!(He==="bancada"&&!dt))try{xe(!0),He==="oi"?await eT(Ne,{saved_at:E,propagate_to_bancadas:!0}):dt&&await KR(dt.id,{saved_at:E});const H=await Gf(Ne);if(qn(H.bancadas??[]),$n(H.medidores_usuario??null),te(H.medidores_total_code??0),ge(H.saved_at??null),$e(H.created_at??null),jt(H.updated_at??H.created_at),Oe(H.locked_by_full_name??null),I(H.locked_by_user_id??null),Se(H.read_only_for_current_user??!1),be((H.locked_by_user_id??null)===_),!w){const pe={oi:H.code,q3:H.q3,alcance:H.alcance,pma:H.pma,numeration_type:H.numeration_type??"correlativo"};N(pe),k(pe)}Ue(!1),Te(null),Ve(""),fe("bancada"),e({kind:"success",message:"Fecha guardada actualizada"})}catch(H){e({kind:"error",title:"Error",message:H?.message??"Error actualizando fecha"})}finally{xe(!1)}},pu=E=>{nt(),A(!1);const H=_t(lt);let pe={...E};if(!lt){const ke=st[Rt];pe.draftCreatedAt||(pe.draftCreatedAt=ke?.draftCreatedAt??new Date().toISOString()),pe.draftId||(pe.draftId=ke?.draftId??en())}ft(ke=>({...ke,[H]:pe})),lt?$a(Ne,lt.id,pe):kn(Ne,pe),dn(!1)},gu=()=>{if(je){e({kind:"warning",title:"Solo lectura",message:"La OI est bloqueada por otro usuario."});return}const E=q();k({...E,numeration_type:E.numeration_type??"correlativo"}),P(!0)},Fr=()=>{!Ne||ce||kt("edit")},Ha=()=>{ie&&N(ie),P(!1),Le.current=!1,pn(nn),xl(),O(null)},Cs=()=>{Ne&&(kn(Ne,null),Object.keys(st).forEach(E=>{if(!E.startsWith("bancada-"))return;const H=Number(E.replace("bancada-",""));Number.isFinite(H)&&Ja(Ne,H)})),pn(Tt(Ne)),pn(Tt(null)),W1(),Le.current=!1,A(!1),xl(),O(null),_m(),Gx(),We(null),qn([]),Q.current=[],ft({}),P(!1),k(null),jt(null),ge(null),$e(null),Se(!1),Oe(null),I(null),be(!1),$n(null),te(0),dn(!1),sa(null),Jn(!1),Ue(!1),Ee(!1),Ve(""),Te(null),fe("bancada"),N({oi:`OI-0001-${new Date().getFullYear()}`,q3:h?.q3[0]??2.5,alcance:h?.alcance[0]??80,pma:16,numeration_type:"correlativo"})},Hl=()=>{Ce.current=!0,se.current=!0,Cs(),a(Qt())},Os=async()=>{if(!Ne)return!0;const E=Q.current??[];if(E.length===0&&An.length===0)return!0;const H=new Map(E.map(ke=>[ke.id,ke])),pe=new Map(An.map(ke=>[ke.id,ke]));try{for(const Ct of An)H.has(Ct.id)||await hv(Ct.id);for(const Ct of An){const pt=H.get(Ct.id);if(!pt||gv(pt)===gv(Ct))continue;const xn=yv(pt),ra=xn.length||pt.rows||1,wt=Ct.updated_at??Ct.created_at??pt.updated_at??pt.created_at;if(!wt)throw new Error("No se pudo determinar la version de la bancada para revertir cambios.");await XR(Ct.id,{medidor:pt.medidor??null,estado:pt.estado??0,rows:ra,rows_data:xn,current_updated_at:wt,restore_updated_at:pt.updated_at??null,restore_saved_at:pt.saved_at??null})}for(const Ct of E)if(!pe.has(Ct.id)){const pt=yv(Ct),xn=pt.length||Ct.rows||1;await mv(Ne,{estado:Ct.estado??0,rows:xn,rows_data:pt})}const ke=await Pf(Ne),it=ke.updated_at??ke.created_at;await PR(Ne,{current_updated_at:it,restore_updated_at:G.current})}catch(ke){return e({kind:"error",title:"Error",message:ke?.message??"No se pudo descartar los cambios en bancadas."}),!1}return!0},Rs=()=>{_e||Ee(!0)},co=async()=>{if(!_e){Ee(!1),xe(!0);try{if(!await Os())return;Ne&&ee&&await wc(Ne,"cancel")}catch{}finally{xe(!1)}Ce.current=!0,se.current=!0,Cs(),e({kind:"info",message:"Edicion cancelada"}),a(Qt())}},Vl=async()=>{if(_e)return;Ee(!1);let E=!0;if((w||!Ne)&&(E=!1,await p(async pe=>{E=Ne?await ze(pe):await he(pe)})()),!!E){xe(!0);try{Ne&&ee&&await wc(Ne)}catch{}finally{xe(!1)}Ce.current=!0,se.current=!0,Cs(),e({kind:"info",message:"Cambios guardados"}),a(Qt())}},uo=async()=>{if(!_e){xe(!0);try{Ne&&ee&&await wc(Ne)}catch{}finally{xe(!1)}Ce.current=!0,se.current=!0,Cs(),e({kind:"info",message:"OI cerrada"}),a(Qt())}},or=y.useMemo(()=>lT(An),[An]),Va=In??or,cr=E=>{if(!E)return"-";const pe=/([zZ]|[+-]\d{2}:?\d{2})$/.test(E)?E:`${E}Z`,ke=new Date(pe);return Number.isNaN(ke.getTime())?E:new Intl.DateTimeFormat("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"America/Lima"}).format(ke)},ur=lt?Un(Ne,lt.id):vn(Ne),es=_&&C!=null&&Ne?{userId:_,bankId:C,oiId:Ne,bancadaId:lt?.id??null,isNew:!lt,returnTo:Ft(Ne),oiCode:q("oi")??null}:null;return i.jsxs("div",{className:"oi-page vi-oi-light",children:[i.jsx(ql,{show:_e}),!f&&i.jsx("div",{className:"alert alert-warning py-1 mt-2 mb-2",children:"Sin conexion. Los cambios se guardaran localmente hasta que vuelva la red."}),V&&i.jsx("div",{className:"alert alert-info py-1 mt-2 mb-2",children:"Sesion restaurada. Reintenta guardar."}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsx("h1",{className:"h3",children:"Formulario OI"}),i.jsxs("div",{className:"d-flex gap-2",children:[Ne&&B&&i.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:io,disabled:_e,children:"Editar fecha guardado"}),Ne&&X&&i.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:Fr,disabled:_e,children:"Editar"})]})]}),je&&i.jsx("div",{className:"alert alert-warning mt-2",children:X?"Modo lectura. Use Editar para modificar.":De?`Esta OI est siendo editada por ${De}. Se abre en modo lectura.`:"Esta OI est en modo lectura. No se pueden realizar cambios."}),i.jsxs("form",{onSubmit:p(Be?ze:he),className:`row g-3 mt-1 ${Be?"vi-form-editing":"vi-form-readonly"}`,children:[i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{htmlFor:"oi",className:"form-label",children:"OI (OI-####-YYYY)"}),i.jsx("input",{id:"oi",className:`form-control ${Ne&&!(B&&w&&!je)?"vi-locked":""}`,...g("oi"),disabled:Ne?!(B&&w&&!je):!1}),x.oi&&i.jsx("div",{className:"text-danger small",children:x.oi.message}),B?null:i.jsx("div",{className:"form-text",children:"Solo administradores pueden cambiar el codigo de OI."})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{htmlFor:"q3",className:"form-label",children:"Q3 (m/h)"}),i.jsx("select",{id:"q3",className:"form-select",...g("q3",{valueAsNumber:!0}),disabled:!!Ne&&!w||je,children:h?.q3.map(E=>i.jsx("option",{value:E,children:E},E))})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{htmlFor:"alcance",className:"form-label",children:"Alcance Q3/Q1"}),i.jsx("select",{id:"alcance",className:"form-select",...g("alcance",{valueAsNumber:!0}),disabled:!!Ne&&!w||je,children:h?.alcance.map(E=>i.jsx("option",{value:E,children:E},E))})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{htmlFor:"pma",className:"form-label",children:"PMA (bar)"}),i.jsx("select",{id:"pma",className:"form-select",...g("pma",{valueAsNumber:!0}),disabled:!!Ne&&!w||je,children:h?.pma.map(E=>i.jsx("option",{value:E,children:E},E))}),i.jsx("div",{className:"form-text",children:"Solo en formulario; calcula Presin (bar)."})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{htmlFor:"presion",className:"form-label",children:"Presin (bar)"}),i.jsx("input",{id:"presion",className:"form-control",value:isNaN($r)?"":$r,disabled:!0})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{htmlFor:"numeration_type",className:"form-label",children:"Tipo de numeracin (# Medidor)"}),i.jsxs("select",{id:"numeration_type",className:"form-select",...g("numeration_type"),disabled:!!Ne&&!w||je,children:[i.jsx("option",{value:"correlativo",children:"Correlativo"}),i.jsx("option",{value:"no correlativo",children:"No Correlativo"})]}),i.jsx("div",{className:"form-text",children:"Define cmo se completa la columna # Medidor en el Grid."})]}),i.jsxs("div",{className:"col-12 d-flex align-items-center gap-2",children:[i.jsx("button",{className:"btn btn-primary",disabled:_e||!!Ne&&(!w||je),children:Ne?Be?"Guardar cambios":"OI guardada":"Guardar OI"}),Ne&&!w&&ce&&i.jsx("button",{type:"button",className:"btn btn-outline-warning",onClick:gu,disabled:_e||je,children:"Editar OI"}),Ne&&w&&ce&&i.jsx("button",{type:"button",className:"btn btn-outline-warning",onClick:Ha,disabled:_e,children:"Cancelar edicion"}),X&&i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:Hl,disabled:_e,children:"Volver al listado"}),i.jsx("button",{type:"button",className:"btn btn-outline-success",onClick:As,disabled:!Ne||_e||w,children:"Generar Excel"}),ce&&i.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:uo,disabled:!Ne||w||_e,children:"Cerrar OI"}),ce&&i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:Rs,disabled:_e,children:"Cancelar"})]})]}),i.jsx("hr",{className:"my-4"}),i.jsxs("div",{className:"card vi-card-table mt-3",children:[i.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"h6 mb-0",children:"Bancadas"}),i.jsxs("small",{className:"text-muted",children:["Medidores (mi registro): ",Va," | Total OI: ",Y]})]}),i.jsx("button",{className:"btn btn-primary",onClick:Wa,disabled:!Ne||_e||w||je,children:"Agregar Bancada"})]}),i.jsx("div",{className:"card-body p-0",children:i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-hover table-striped table-sm align-middle mb-0",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"vi-col-60",children:"Item"}),i.jsx("th",{children:"# Medidor"}),i.jsx("th",{children:"Medidores"}),i.jsx("th",{className:"vi-col-160",children:"Fecha creacin"}),i.jsx("th",{className:"vi-col-160",children:"Fecha guardado"}),i.jsx("th",{className:"vi-col-160",children:"ltima fecha mod."}),i.jsx("th",{className:"vi-col-160 text-end",children:"Acciones"})]})}),i.jsxs("tbody",{children:[An.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"text-muted text-center py-3",children:"Sin bancadas. Agrega la primera."})}),An.map(E=>{const H=E.rows_data?.[0]?.medidor||E.medidor||"",pe=E.rows_data?.[(E.rows_data?.length||0)-1]?.medidor||"",ke=H&&pe&&H!==pe?`${H} ... ${pe}`:H;return i.jsxs("tr",{children:[i.jsx("td",{children:E.item}),i.jsx("td",{children:ke}),i.jsx("td",{children:E.rows}),i.jsx("td",{children:cr(E.created_at)}),i.jsx("td",{children:cr(E.saved_at)}),i.jsx("td",{children:cr(E.updated_at??E.created_at)}),i.jsxs("td",{className:"text-end",children:[B?i.jsx("button",{className:"btn btn-sm btn-outline-secondary me-2",onClick:()=>oo(E),disabled:_e||w||me,"aria-label":`Editar fecha guardado bancada #${E.item}`,title:"Editar fecha guardado",children:"Editar fecha guardado"}):null,i.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>ir(E),disabled:_e||w||!X&&je,"aria-label":`${X?"Ver":"Editar"} bancada #${E.item}`,title:X?"Ver":"Editar",children:X?"Ver":"Editar"}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>lo(E),disabled:_e||w||je,"aria-label":`Eliminar bancada #${E.item}`,title:"Eliminar",children:""})]})]},E.id)})]})]})})})]}),_a&&i.jsx(VR,{show:_a,title:lt?`Editar bancada #${lt.item}`:"Nueva bancada",initial:Es,onClose:()=>{nt(),dn(!1)},onSubmit:ro,onCancelWithDraft:pu,numerationType:$,readOnly:je,duplicateMap:Ae,onClearDuplicate:On,draftStorageKey:ur,draftMeta:es,isOnline:f,showRetry:Je}),Fe&&i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"cancelTitle",onClick:E=>{E.target===E.currentTarget&&Ee(!1)},children:i.jsx("div",{className:"modal-dialog",children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{id:"cancelTitle",className:"modal-title",children:"Confirmar cancelacion"}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>Ee(!1)})]}),i.jsx("div",{className:"modal-body",children:i.jsx("p",{children:"Estas seguro de descartar cambios?"})}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:co,disabled:_e,children:"Descartar cambios"}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:Vl,disabled:_e,children:"Guardar cambios y volver al listado"})]})]})})}),de&&i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"savedAtTitle",onClick:E=>{E.target===E.currentTarget&&(Ue(!1),Te(null),fe("bancada"))},children:i.jsx("div",{className:"modal-dialog",children:i.jsxs("form",{className:"modal-content",onSubmit:E=>{E.preventDefault(),Fl()},children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{id:"savedAtTitle",className:"modal-title",children:"Editar fecha guardado"}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>{Ue(!1),Te(null),fe("bancada")}})]}),i.jsx("div",{className:"modal-body",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{htmlFor:"savedAtInput",className:"form-label",children:"Fecha guardado"}),i.jsx("input",{id:"savedAtInput",type:"datetime-local",className:"form-control",value:Ie,onChange:E=>Ve(E.target.value),required:!0}),i.jsx("div",{className:"form-text",children:He==="oi"?"Se aplicar a todas las bancadas de la OI.":"Se aplica a la bancada seleccionada."})]})}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{Ue(!1),Te(null),fe("bancada")},children:"Cancelar"}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:_e||!Ie,children:"Guardar"})]})]})})}),i.jsx(fu,{show:Mn,title:"Contrasea para proteger Excel",onClose:()=>Jn(!1),onConfirm:E=>{Jn(!1),hu(E)}})]})}function pT(e){return e==="/home"?null:e==="/oi"?"oi_formulario":e==="/oi/list"?"oi_listado":e==="/oi/tools/vima-to-lista"?"tools_vima_lista":e==="/oi/tools/actualizacion-base"?"tools_actualizacion_bases":e==="/oi/tools/formato-ac/history"?"tools_historial_ac":e==="/oi/tools/consolidacion/correlativo"?"tools_consol_correlativo":e==="/oi/tools/consolidacion/no-correlativo"?"tools_consol_no_correlativo":e==="/logistica/log01/history"?"logistica_history":e==="/logistica/log01/excel"?"logistica":e==="/logistica/log02/pdfs"?"logistica_pdfs":e.startsWith("/logistica/")?"logistica":e.startsWith("/oi/")?"oi_formulario":e==="/users"?"users_admin":e==="/admin/permisos"?"admin_permisos":null}function gT(){const e=Dn(),a=aa(),s=e?.token??null,[l,c]=y.useState(()=>!!s);if(y.useEffect(()=>{if(!s){c(!1);return}let N=!1;return c(!0),Ye.get("/auth/me").then(()=>{N||c(!1)}).catch(async q=>{if(N)return;if(q?.response?.status===401){await Kx();return}c(!1)}),()=>{N=!0}},[s]),!s)return i.jsx(ar,{to:"/login",replace:!0});if(l)return i.jsx(ql,{show:!0});const d=e,f=Ua(d.role,d.username),h=Wm(d),g=Rl(f),p=Hi(),v=a.pathname==="/oi"||a.pathname.startsWith("/oi/");if(g&&v&&!(p&&p>0)&&a.pathname!=="/home")return i.jsx(ar,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Banco",message:"Debe seleccionar un banco para continuar."}}});if(a.pathname==="/admin/permisos"&&!h)return i.jsx(ar,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Permisos",message:"Solo el superusuario puede acceder a este mdulo."}}});if(a.pathname==="/users"&&!(f==="admin"||f==="administrator"))return i.jsx(ar,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Usuarios",message:"No tiene permiso para acceder a este mdulo."}}});if(!h){const N=pT(a.pathname),q=d.allowedModules;if(N&&Array.isArray(q)&&!q.includes(N))return i.jsx(ar,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Permisos",message:"No tiene permiso para acceder a este mdulo."}}})}return i.jsx(qv,{})}const yT=({isActive:e})=>"vi-sidebar-link d-flex align-items-center"+(e?" active":""),bT=.9;function ih(e,a){if(!(a||e<=0))return{paddingLeft:`calc(0.75rem + ${e*bT}rem)`}}function da({to:e,icon:a,label:s,depth:l,collapsed:c}){return i.jsx("li",{className:"vi-sidebar-item",children:i.jsxs(Vv,{to:e,end:!0,className:yT,style:ih(l,c),title:s,"aria-label":s,children:[i.jsx("i",{className:`ti ${a} vi-sidebar-icon`}),i.jsx("span",{className:"vi-sidebar-text vi-sidebar-label",children:s})]})})}function xv({icon:e,label:a,depth:s,collapsed:l}){return i.jsx("li",{className:"vi-sidebar-item",children:i.jsxs("button",{type:"button",className:"vi-sidebar-link vi-sidebar-link--disabled d-flex align-items-center w-100 border-0 bg-transparent",style:ih(s,l),title:a,"aria-label":a,"aria-disabled":"true",disabled:!0,children:[i.jsx("i",{className:`ti ${e} vi-sidebar-icon`}),i.jsx("span",{className:"vi-sidebar-text vi-sidebar-label",children:a})]})})}function Er({groupKey:e,icon:a,label:s,depth:l,collapsed:c,open:d,active:f,onToggle:h,children:g}){const p=`sidebar-group-${e}`,v=d?"ti-angle-down":"ti-angle-right";return i.jsxs("li",{className:"vi-sidebar-item",children:[i.jsxs("button",{type:"button",className:"vi-sidebar-link d-flex align-items-center w-100 border-0 bg-transparent"+(f?" active":""),style:ih(l,c),onClick:()=>{c||h(e)},"aria-expanded":!c&&d,"aria-controls":p,title:s,children:[i.jsx("i",{className:`ti ${a} vi-sidebar-icon`}),i.jsx("span",{className:"vi-sidebar-text vi-sidebar-label flex-grow-1",children:s}),i.jsx("span",{className:"vi-sidebar-text vi-sidebar-caret ms-auto",children:i.jsx("i",{className:`ti ${v}`})})]}),!c&&d&&i.jsx("ul",{id:p,className:"list-unstyled mb-0",children:g})]})}function vT({collapsed:e,onToggleSidebar:a}){const s=aa(),l=Dn(),c=!!l,d=Ua(l?.role,l?.username),f=Wm(l),h=d==="admin"||d==="administrator",g=l?.allowedModules,p=be=>f||!Array.isArray(g)||g.includes(be),v=c&&p("tools_vima_lista"),x=c&&p("tools_actualizacion_bases"),N=c&&p("tools_historial_ac"),q=c&&p("tools_consol_correlativo"),j=c&&p("tools_consol_no_correlativo"),_=c&&p("oi_formulario"),C=c&&p("oi_listado"),B=c&&h&&p("users_admin"),T=c&&p("future_ot"),K=c&&p("logistica"),D=c&&p("logistica_history"),R=c&&p("logistica_pdfs"),Z=K||D||R,U=c&&p("future_smart"),X=q||j,ce=v||x||N,_e=_||C||T,xe=ce||_e||X,me=y.useMemo(()=>({oi:!0,oi_formato_ac:!0,oi_consolidacion:!0,oi_verificacion:!0,logistica:!0,usuarios:!1,administrar:!1}),[]),[Se,De]=y.useState(()=>{const be=localStorage.getItem("medileser.sidebar.openGroups")??localStorage.getItem("vi.sidebar.openGroups");if(!be)return me;try{const je=JSON.parse(be),w={...me};return Object.keys(w).forEach(P=>{typeof je[P]=="boolean"&&(w[P]=je[P])}),w}catch{return me}}),Oe=s.pathname;y.useEffect(()=>{localStorage.setItem("medileser.sidebar.openGroups",JSON.stringify(Se))},[Se]);const M=y.useMemo(()=>{const be=je=>!!$i({path:je,end:!0},Oe);return{vimaToLista:be("/oi/tools/vima-to-lista"),actualizacionBases:be("/oi/tools/actualizacion-base"),formatoAcHistory:be("/oi/tools/formato-ac/history"),consolidacionCorrelativo:be("/oi/tools/consolidacion/correlativo"),consolidacionNoCorrelativo:be("/oi/tools/consolidacion/no-correlativo"),registroOi:be("/oi"),listadoOi:be("/oi/list"),users:be("/users"),password:be("/password"),permisos:be("/admin/permisos"),log01Excel:be("/logistica/log01/excel"),log01History:be("/logistica/log01/history"),log02Pdfs:be("/logistica/log02/pdfs")}},[Oe]),I=y.useMemo(()=>({oi_consolidacion:M.consolidacionCorrelativo||M.consolidacionNoCorrelativo,oi_formato_ac:M.vimaToLista||M.actualizacionBases||M.formatoAcHistory,oi_verificacion:M.registroOi||M.listadoOi,oi:M.vimaToLista||M.actualizacionBases||M.formatoAcHistory||M.consolidacionCorrelativo||M.consolidacionNoCorrelativo||M.registroOi||M.listadoOi,usuarios:M.users||M.password,logistica:M.log01Excel||M.log01History||M.log02Pdfs,administrar:M.permisos}),[M]);function ee(be){De(je=>({...je,[be]:!je[be]}))}return i.jsxs("aside",{className:`vi-sidebar ${e?"vi-sidebar--collapsed":""}`,children:[i.jsxs("div",{className:"vi-sidebar__header",children:[i.jsxs("div",{className:"vi-sidebar__brand",children:[i.jsx("img",{className:"vi-brand-logo",src:"/medileser/logo-vertical.jpg",alt:"Medileser",draggable:!1}),i.jsx("span",{className:"vi-brand-text",children:"MEDILESER APP"})]}),a&&i.jsx("button",{type:"button",className:"vi-sidebar-toggle","aria-label":e?"Expandir men":"Contraer men",onClick:a,children:i.jsx("i",{className:`ti ${e?"ti-angle-right":"ti-angle-left"}`})})]}),i.jsxs("ul",{className:"vi-sidebar-menu list-unstyled mb-0",children:[!c&&i.jsx(da,{to:"/login",icon:"ti-login",label:"Login",depth:0,collapsed:e}),xe&&i.jsxs(Er,{groupKey:"oi",icon:"ti-panel",label:"OI",depth:0,collapsed:e,open:Se.oi,active:I.oi,onToggle:ee,children:[ce&&i.jsxs(Er,{groupKey:"oi_formato_ac",icon:"ti-folder",label:"FORMATO A-C",depth:1,collapsed:e,open:Se.oi_formato_ac,active:I.oi_formato_ac,onToggle:ee,children:[v&&i.jsx(da,{to:"/oi/tools/vima-to-lista",icon:"ti-exchange-vertical",label:"VIMA  LISTA",depth:2,collapsed:e}),x&&i.jsx(da,{to:"/oi/tools/actualizacion-base",icon:"ti-reload",label:"ACTUALIZACIN DE BASES",depth:2,collapsed:e}),N&&i.jsx(da,{to:"/oi/tools/formato-ac/history",icon:"ti-view-list-alt",label:"HISTORIAL A-C",depth:2,collapsed:e})]}),X&&i.jsxs(Er,{groupKey:"oi_consolidacion",icon:"ti-layers",label:"CONSOLIDACIN DE BASES ORIGINALES",depth:1,collapsed:e,open:Se.oi_consolidacion,active:I.oi_consolidacion,onToggle:ee,children:[q&&i.jsx(da,{to:"/oi/tools/consolidacion/correlativo",icon:"ti-list",label:"CORRELATIVO",depth:3,collapsed:e}),j&&i.jsx(da,{to:"/oi/tools/consolidacion/no-correlativo",icon:"ti-layout-list-thumb",label:"NO CORRELATIVO",depth:3,collapsed:e})]}),_e&&i.jsxs(Er,{groupKey:"oi_verificacion",icon:"ti-clipboard",label:"VERIFICACIN INICIAL",depth:1,collapsed:e,open:Se.oi_verificacion,active:I.oi_verificacion,onToggle:ee,children:[T&&i.jsx(xv,{icon:"ti-briefcase",label:"ORDEN DE TRABAJO (FUTURO)",depth:2,collapsed:e}),_&&i.jsx(da,{to:"/oi",icon:"ti-layout-grid2",label:"REGISTRO OI",depth:2,collapsed:e}),C&&i.jsx(da,{to:"/oi/list",icon:"ti-view-list-alt",label:"LISTADO OI",depth:2,collapsed:e})]})]}),Z&&i.jsxs(Er,{groupKey:"logistica",icon:"ti-package",label:"LOGSTICA",depth:0,collapsed:e,open:Se.logistica,active:I.logistica,onToggle:ee,children:[K&&i.jsx(da,{to:"/logistica/log01/excel",icon:"ti-files",label:"Consolidacion Excel",depth:1,collapsed:e}),D&&i.jsx(da,{to:"/logistica/log01/history",icon:"ti-view-list-alt",label:"Historial de consolidaciones",depth:1,collapsed:e}),R&&i.jsx(da,{to:"/logistica/log02/pdfs",icon:"ti-filter",label:"Filtrado de Cert.PDFs",depth:1,collapsed:e})]}),U&&i.jsx(xv,{icon:"ti-bar-chart",label:"SMART (FUTURO)",depth:0,collapsed:e}),i.jsxs(Er,{groupKey:"usuarios",icon:"ti-user",label:"USUARIOS",depth:0,collapsed:e,open:Se.usuarios,active:I.usuarios,onToggle:ee,children:[B&&i.jsx(da,{to:"/users",icon:"ti-user",label:"GESTIN DE USUARIOS",depth:1,collapsed:e}),c&&i.jsx(da,{to:"/password",icon:"ti-key",label:"CAMBIAR CONTRASEA",depth:1,collapsed:e})]}),f&&i.jsx(Er,{groupKey:"administrar",icon:"ti-settings",label:"ADMINISTRAR",depth:0,collapsed:e,open:Se.administrar,active:I.administrar,onToggle:ee,children:i.jsx(da,{to:"/admin/permisos",icon:"ti-lock",label:"PERMISOS",depth:1,collapsed:e})})]})]})}function xT({sidebarCollapsed:e,onToggleSidebar:a}){const s=Dn(),l=s?.username??s?.user??"",c=s?Rl(s.role):!1,[d,f]=y.useState(()=>Hi());y.useEffect(()=>vE(()=>f(Hi())),[]);const h=d&&d>0?`Banco ${d}`:"Banco sin seleccionar",g=async()=>{try{await NE()}finally{location.assign("/login")}};return i.jsxs("header",{className:"navbar navbar-expand bg-white border-bottom sticky-top vi-topbar px-3",children:[a&&i.jsx("button",{type:"button",className:"btn btn-link text-secondary me-2 vi-sidebar-toggle","aria-label":e?"Expandir men":"Contraer men",onClick:a,children:i.jsx("i",{className:`ti ${e?"ti-menu-alt":"ti-menu"}`})}),i.jsx("div",{className:"me-auto"}),i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[s&&i.jsxs("span",{className:"text-muted small text-truncate",style:{maxWidth:"360px"},children:["Usuario: ",i.jsx("strong",{children:l||"?"}),c&&i.jsxs(i.Fragment,{children:["  ",h,s.techNumber?i.jsxs(i.Fragment,{children:["  ","Tcnico ",s.techNumber]}):null]})]}),s&&i.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:g,children:"Cerrar sesin"})]})]})}function ST(){const a=aa().pathname==="/home",[s,l]=y.useState(()=>{try{return(localStorage.getItem("medileser.sidebar.collapsed")??localStorage.getItem("vi.sidebar.collapsed"))==="true"}catch{return!1}}),c=()=>l(d=>!d);return y.useEffect(()=>{try{localStorage.setItem("medileser.sidebar.collapsed",String(s))}catch{}},[s]),i.jsxs("div",{className:`vi-layout ${s?"vi-layout--collapsed":""}`,children:[i.jsx(vT,{collapsed:s,onToggleSidebar:c}),i.jsxs("div",{className:"vi-main",children:[i.jsx(xT,{sidebarCollapsed:s,onToggleSidebar:c}),i.jsx("main",{className:`vi-content${a?" vi-content--home":""}`,children:i.jsx(qv,{})})]})]})}function NT(){const{toast:e}=Br(),a=Lr(),s=aa(),[,l]=Gv(),[c,d]=y.useState(()=>new URLSearchParams(s.search).get("q")??""),[f,h]=y.useState(()=>(new URLSearchParams(s.search).get("q")??"").trim()),[g,p]=y.useState(()=>new URLSearchParams(s.search).get("dateFrom")??""),[v,x]=y.useState(()=>new URLSearchParams(s.search).get("dateTo")??""),[N,q]=y.useState(()=>{const ae=new URLSearchParams(s.search).get("pageSize"),Me=ae?Number(ae):20;return Number.isFinite(Me)&&Me>0?Me:20}),[j,_]=y.useState(()=>{const ae=new URLSearchParams(s.search).get("page"),Me=ae?Number(ae):1;return Number.isFinite(Me)&&Me>0?Math.floor(Me):1}),[C,B]=y.useState(()=>new URLSearchParams(s.search).get("responsableTech")??""),T=(j-1)*N,K=y.useRef(!1);y.useEffect(()=>{if(!K.current){K.current=!0;return}const ae=setTimeout(()=>{h(c.trim()),_(1)},300);return()=>clearTimeout(ae)},[c]),y.useEffect(()=>{const ae=new URLSearchParams,Me=c.trim();Me&&ae.set("q",Me),g&&ae.set("dateFrom",g),v&&ae.set("dateTo",v),C&&ae.set("responsableTech",C),j!==1&&ae.set("page",String(j)),N!==20&&ae.set("pageSize",String(N));const Pe=s.search.startsWith("?")?s.search.slice(1):s.search;ae.toString()!==Pe&&l(ae,{replace:!0})},[g,v,s.search,j,N,C,c,l]);const{data:D,isLoading:R,isError:Z,error:U,refetch:X,isFetching:ce}=zr({queryKey:["oi","list",{search:f,dateFrom:g,dateTo:v,responsableTech:C,pageSize:N,offset:T}],queryFn:()=>tT({q:f||void 0,dateFrom:g||void 0,dateTo:v||void 0,responsableTechNumber:C?Number(C):void 0,limit:N,offset:T}),placeholderData:ae=>ae}),_e=Dn(),xe=Ua(_e?.role,_e?.username)!=="technician",{data:me=[],isFetching:Se,isError:De,error:Oe}=zr({queryKey:["oi","responsables"],queryFn:aT,enabled:xe,staleTime:6e4,retry:!1}),M=De?Oe?.message??"No se pudo cargar responsables":"",I=ae=>{if(!ae)return"-";const Me=ae.endsWith("Z")?ae:`${ae}Z`,Pe=new Date(Me),rt=Pt=>Pt.toString().padStart(2,"0");return`${rt(Pe.getDate())}/${rt(Pe.getMonth()+1)}/${Pe.getFullYear()} ${rt(Pe.getHours())}:${rt(Pe.getMinutes())}`},be=D?.items??[],je=D?.summary??{medidores_resultado:0,oi_unicas:0,medidores_total_oi_unicas:0},w=D?.total??0,P=D?.limit??N,ie=P>0?Math.ceil(w/P):1,k=10;let oe=1,ge=ie;if(ie>k){const ae=Math.floor(k/2);oe=Math.max(1,j-ae),ge=oe+k-1,ge>ie&&(ge=ie,oe=Math.max(1,ge-k+1))}const[Re,$e]=y.useState(!1),[de,Ue]=y.useState(null),[Ie,Ve]=y.useState(!1),[dt,Te]=y.useState(!1),He=R||ce||Ie||dt,fe=()=>`${s.pathname}${s.search}`,Fe=(ae,Me)=>{try{qi({id:ae,code:Me}),e({kind:"success",message:`OI ${Me} cargada`}),a(`/oi/${ae}?mode=view`,{state:{returnTo:fe()}})}catch(Pe){e({kind:"error",title:"Error",message:Pe?.message??"No se pudo abrir el OI"})}},Ee=(ae,Me)=>{try{qi({id:ae,code:Me}),e({kind:"success",message:`OI ${Me} cargada`}),a(`/oi/${ae}?mode=edit`,{state:{returnTo:fe()}})}catch(Pe){e({kind:"error",title:"Error",message:Pe?.message??"No se pudo abrir el OI"})}},Je=async()=>{try{await no()}finally{_m(),a("/oi?mode=edit",{state:{returnTo:fe()}})}},A=async(ae,Me)=>{if(confirm(`Ests seguro de ELIMINAR la ${Me}?
Esta accin borrar todas sus bancadas y no se puede deshacer.`))try{await JR(ae),e({kind:"success",title:"Eliminado",message:`Se elimin ${Me} correctamente.`}),X()}catch(Pe){e({kind:"error",title:"Error",message:Pe.message||"No se pudo eliminar la OI"})}},V=ae=>{Ue(ae),$e(!0)},O=async ae=>{if(de)try{Ve(!0),await E0(de,ae),e({kind:"success",message:"Excel generado"})}catch(Me){e({kind:"error",title:"Error",message:Me?.message??"No se pudo generar el Excel"})}finally{Ve(!1)}},Q=async()=>{try{Te(!0);const{blob:ae,filename:Me}=await nT({q:f||void 0,dateFrom:g||void 0,dateTo:v||void 0,responsableTechNumber:C?Number(C):void 0}),Pe=URL.createObjectURL(ae),rt=document.createElement("a");rt.href=Pe,rt.download=Me,document.body.appendChild(rt),rt.click(),URL.revokeObjectURL(Pe),rt.remove()}catch(ae){const Me=ae?.status,Pe=ae?.message??"No se pudo exportar el CSV";e(Me===403?{kind:"error",title:"No autorizado",message:Pe}:{kind:"error",title:"Error",message:Pe})}finally{Te(!1)}},G=()=>{d(""),h(""),p(""),x(""),_(1),B("")},se=w===0?0:T+1,Ce=w===0?0:Math.min(T+be.length,w),Le=w===0?"0 registros":`Mostrando ${se}-${Ce} de ${w} registros`;return i.jsxs("div",{children:[i.jsx(ql,{show:He}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("button",{className:"btn btn-primary",onClick:Je,disabled:He,title:"Nueva OI",children:"Nueva OI"}),i.jsx("h1",{className:"h3 mb-0",children:"Listado de OI"})]}),i.jsxs("div",{className:"d-flex gap-2",children:[xe&&i.jsx("button",{className:"btn btn-outline-secondary",onClick:Q,disabled:He,children:dt?"Exportando...":"Exportar CSV"}),i.jsx("button",{className:"btn btn-outline-secondary",onClick:G,disabled:He,children:"Limpiar filtros"}),i.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>X(),disabled:He,children:"Recargar"})]})]}),Z&&i.jsx("div",{className:"alert alert-danger",children:U?.message??"Error cargando listado"}),i.jsxs("div",{className:"card vi-card-table",children:[i.jsxs("div",{className:"card-header d-flex flex-wrap align-items-center justify-content-between gap-2",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"h6 mb-0",children:"Registros"}),i.jsxs("small",{className:"text-muted",children:["Medidores (resultados): ",je.medidores_resultado," | OI unicas: ",je.oi_unicas," | Medidores (Total OI): ",je.medidores_total_oi_unicas]})]}),i.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[i.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Buscar OI o medidor...",value:c,onChange:ae=>{d(ae.target.value),_(1)},"aria-label":"Buscar por codigo de OI o medidor"}),i.jsx("input",{type:"date",className:"form-control form-control-sm",value:g,onChange:ae=>{p(ae.target.value),_(1)},"aria-label":"Filtrar desde fecha"}),i.jsx("input",{type:"date",className:"form-control form-control-sm",value:v,onChange:ae=>{x(ae.target.value),_(1)},"aria-label":"Filtrar hasta fecha"}),xe&&i.jsxs("div",{className:"d-flex flex-column",children:[i.jsxs("select",{className:"form-select form-select-sm",value:C,onChange:ae=>{B(ae.target.value),_(1)},disabled:He||Se,"aria-label":"Filtrar por responsable",title:"Responsable",children:[i.jsx("option",{value:"",children:"Responsable: Todos"}),me.map(ae=>i.jsx("option",{value:String(ae.tech_number),children:ae.full_name},ae.tech_number))]}),M?i.jsx("small",{className:"text-danger",children:M}):null]}),i.jsxs("div",{className:"d-flex align-items-center",children:[i.jsx("span",{className:"me-1 small",children:"Mostrar"}),i.jsxs("select",{className:"form-select form-select-sm",value:N,onChange:ae=>{const Me=Number(ae.target.value)||20;q(Me),_(1)},"aria-label":"Registros por pgina",children:[i.jsx("option",{value:10,children:"10"}),i.jsx("option",{value:20,children:"20"}),i.jsx("option",{value:50,children:"50"})]})]})]})]}),i.jsxs("div",{className:"card-body p-0",children:[i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-hover table-striped table-sm align-middle mb-0",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"ID"}),i.jsx("th",{children:"OI"}),i.jsx("th",{children:"Medidores"}),i.jsx("th",{children:"Q3"}),i.jsx("th",{children:"Alcance"}),i.jsx("th",{children:"PMA"}),i.jsx("th",{children:"Banco"}),i.jsx("th",{children:"Tcnico"}),i.jsx("th",{children:"Responsable"}),i.jsx("th",{children:"Creacin"}),i.jsx("th",{children:"Guardado"}),i.jsx("th",{children:"lt. mod."}),i.jsx("th",{className:"text-end",children:"Acciones"})]})}),i.jsxs("tbody",{children:[!He&&be.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:13,className:"text-center text-muted py-3",children:w>0?"No hay registros que coincidan con los filtros.":"Sin registros."})}),be.map(ae=>i.jsxs("tr",{children:[i.jsx("td",{children:ae.id}),i.jsx("td",{children:ae.code}),i.jsx("td",{title:"Mi registro / Total OI",children:`${ae.medidores_usuario??0} / ${ae.medidores_total_code??0}`}),i.jsx("td",{children:ae.q3}),i.jsx("td",{children:ae.alcance}),i.jsx("td",{children:ae.pma}),i.jsx("td",{children:ae.banco_id}),i.jsx("td",{children:ae.tech_number}),i.jsx("td",{children:ae.creator_name}),i.jsx("td",{children:I(ae.created_at)}),i.jsx("td",{children:I(ae.saved_at)}),i.jsx("td",{children:I(ae.updated_at)}),i.jsxs("td",{className:"text-end",children:[i.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>Fe(ae.id,ae.code),disabled:He,title:"Ver OI","aria-label":`Ver OI ${ae.code}`,children:"Ver"}),i.jsx("button",{className:"btn btn-sm btn-outline-warning me-2",onClick:()=>Ee(ae.id,ae.code),disabled:He,title:"Editar OI","aria-label":`Editar OI ${ae.code}`,children:"Editar"}),i.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:()=>V(ae.id),disabled:He,title:"Descargar Excel","aria-label":`Descargar Excel ${ae.code}`,children:"Excel"}),xe&&i.jsx("button",{className:"btn btn-sm btn-outline-danger ms-2",onClick:()=>A(ae.id,ae.code),disabled:He,title:"Eliminar OI (Solo Admin)",children:""})]})]},ae.id))]})]})}),ie>1&&i.jsx("nav",{className:"px-3 py-2 d-flex justify-content-center",children:i.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[i.jsx("li",{className:`page-item ${j===1?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>_(ae=>Math.max(1,ae-1)),disabled:j===1,children:""})}),Array.from({length:ge-oe+1},(ae,Me)=>{const Pe=oe+Me;return i.jsx("li",{className:`page-item ${Pe===j?"active":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>_(Pe),children:Pe})},Pe)}),i.jsx("li",{className:`page-item ${j===ie?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>_(ae=>Math.min(ie,ae+1)),disabled:j===ie,children:"Siguiente"})})]})})]})]}),i.jsx("div",{className:"px-3 py-2 d-flex justify-content-end",children:i.jsx("small",{className:"text-muted",children:Le})}),i.jsx(fu,{show:Re,title:"Contrasea para proteger Excel",onClose:()=>{$e(!1),Ue(null)},onConfirm:ae=>{$e(!1),O(ae)}})]})}async function wT(e){return(await Ye.get("/auth/users/paged",{params:{q:e.q||void 0,role:e.role||void 0,limit:e.limit,offset:e.offset}})).data}function jT(){const{toast:e}=Br(),a=Dn(),s=Ua(a?.role,a?.username),l=s==="admin"||s==="administrator",c=Wm(a),[d,f]=y.useState(!1),[h,g]=y.useState(null),[p,v]=y.useState(!1),[x,N]=y.useState(""),[q,j]=y.useState(""),[_,C]=y.useState(""),[B,T]=y.useState(20),[K,D]=y.useState(1),R=(K-1)*B,Z=y.useRef(!1);y.useEffect(()=>{if(!Z.current){Z.current=!0;return}const Ee=setTimeout(()=>{j(x.trim()),D(1)},250);return()=>clearTimeout(Ee)},[x]);const{data:U,refetch:X,isLoading:ce,isFetching:_e,error:xe}=zr({queryKey:["users",{search:q,roleFilter:_,pageSize:B,offset:R}],queryFn:()=>wT({q:q||void 0,role:_||void 0,limit:B,offset:R}),enabled:l,placeholderData:Ee=>Ee}),{register:me,handleSubmit:Se,reset:De}=Kc(),Oe=()=>{g(null),De({username:"",password:"",first_name:"",last_name:"",role:"technician",tech_number:0}),f(!0)},M=Ee=>{g(Ee),De({username:Ee.username,password:"",first_name:Ee.first_name,last_name:Ee.last_name,role:Ua(Ee.role,Ee.username),tech_number:Ee.tech_number}),f(!0)},I=()=>{f(!1),g(null),De()},ee=async Ee=>{try{v(!0),await Ye.post("/auth/users",{...Ee,tech_number:Number(Ee.tech_number)}),e({kind:"success",message:"Usuario creado correctamente"}),I(),X()}catch(Je){e({kind:"error",title:"Error",message:Je.response?.data?.detail||"Error al crear"})}finally{v(!1)}},be=async Ee=>{if(!h)return;const Je=String(Ee.password||"").trim();try{if(v(!0),c){const A={username:String(Ee.username||"").trim(),first_name:String(Ee.first_name||"").trim(),last_name:String(Ee.last_name||"").trim(),role:Ee.role,tech_number:Number(Ee.tech_number)};Je&&(A.password=Je),await Ye.put(`/auth/users/${h.id}`,A),e({kind:"success",message:"Usuario actualizado correctamente"})}else{if(!Je){e({kind:"error",message:"Debe ingresar una nueva contrasea"});return}await Ye.put(`/auth/users/${h.id}/password`,{new_password:Je}),e({kind:"success",message:`Contrasea de ${h.username} actualizada`})}I(),X()}catch(A){const V=A?.response?.data?.detail||A?.message||"Error actualizando usuario";e({kind:"error",title:"Error",message:V})}finally{v(!1)}},je=async Ee=>{if(confirm(`Eliminar usuario? ${Ee.username}?
Esto solo es posible si no tiene registros.`))try{v(!0),await Ye.delete(`/auth/users/${Ee.id}`),e({kind:"success",message:"Usuario eliminado"}),X()}catch(Je){e({kind:"error",title:"No se puede eliminar",message:Je.response?.data?.detail||Je.message})}finally{v(!1)}},w=y.useMemo(()=>U?.items??[],[U]),P=U?.total??0,ie=U?.limit??B,k=ie>0?Math.ceil(P/ie):1,oe=10;let ge=1,Re=k;if(k>oe){const Ee=Math.floor(oe/2);ge=Math.max(1,K-Ee),Re=ge+oe-1,Re>k&&(Re=k,ge=Math.max(1,Re-oe+1))}const $e=P===0?0:R+1,de=P===0?0:Math.min(R+w.length,P),Ue=P===0?"0 registros":`Mostrando ${$e}-${de} de ${P} registros`,Ie=ce||_e||p,Ve=()=>{N(""),j(""),C(""),D(1),T(20)},dt=!!h,Te=dt&&!c,He=!dt||!c,fe=(h?.username??"").toLowerCase()==="admin",Fe=dt?c?"Dejar en blanco para mantener la actual.":"Ingrese una nueva contrasea.":void 0;return l?i.jsxs("div",{className:"container-fluid p-4 vi-oi-light",children:[i.jsx(ql,{show:Ie}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx("h2",{className:"h4 m-0",children:"Gestin de Usuarios"}),i.jsx("button",{className:"btn btn-primary",onClick:Oe,disabled:Ie,children:"+ Nuevo Usuario"})]}),i.jsxs("div",{className:"d-flex flex-wrap align-items-end gap-2 mb-3",children:[i.jsxs("div",{style:{minWidth:260},children:[i.jsx("label",{className:"form-label small mb-1",children:"Buscar"}),i.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Usuario o rol...",value:x,onChange:Ee=>{N(Ee.target.value),D(1)}})]}),i.jsxs("div",{style:{minWidth:220},children:[i.jsx("label",{className:"form-label small mb-1",children:"Rol"}),i.jsxs("select",{className:"form-select form-select-sm",value:_,onChange:Ee=>{C(Ee.target.value),D(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"admin",children:"admin"}),i.jsx("option",{value:"administrator",children:"administrator"}),i.jsx("option",{value:"technician",children:"technician"}),i.jsx("option",{value:"standard",children:"standard"}),i.jsx("option",{value:"user",children:"user (legacy)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"form-label small mb-1",children:"Mostrar"}),i.jsxs("select",{className:"form-select form-select-sm",value:B,onChange:Ee=>{const Je=Number(Ee.target.value)||20;T(Je),D(1)},children:[i.jsx("option",{value:20,children:"20"}),i.jsx("option",{value:50,children:"50"}),i.jsx("option",{value:100,children:"100"})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:Ve,disabled:Ie,children:"Limpiar filtros"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>X(),disabled:Ie,children:"Recargar"})]})]}),xe?i.jsx("div",{className:"alert alert-danger",role:"alert",children:"No se pudo cargar la lista de usuarios."}):null,i.jsx("div",{className:"card shadow-sm",children:i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-hover align-middle mb-0",children:[i.jsx("thead",{className:"table-light",children:i.jsxs("tr",{children:[i.jsx("th",{children:"Usuario"}),i.jsx("th",{children:"Nombre"}),i.jsx("th",{children:"Rol"}),i.jsx("th",{children:"N Tcnico"}),i.jsx("th",{className:"text-end",children:"Acciones"})]})}),i.jsxs("tbody",{children:[w.map(Ee=>i.jsxs("tr",{children:[i.jsx("td",{className:"fw-bold",children:Ee.username}),i.jsxs("td",{children:[Ee.first_name," ",Ee.last_name]}),i.jsx("td",{children:(()=>{const Je=Ua(Ee.role,Ee.username),A=Ee.username.toLowerCase()==="admin"?"Superusuario":Je==="administrator"?"Administrador":Je==="technician"?"Tcnico":"Estndar",V=Ee.username.toLowerCase()==="admin"?"bg-danger":Je==="administrator"?"bg-warning text-dark":Je==="technician"?"bg-info text-dark":"bg-secondary";return i.jsx("span",{className:`badge ${V}`,children:A})})()}),i.jsx("td",{children:Ee.tech_number}),i.jsxs("td",{className:"text-end",children:[i.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",title:"Actualizar usuario","aria-label":`Actualizar ${Ee.username}`,disabled:Ie||Ee.username==="admin"||!c&&Ua(Ee.role,Ee.username)==="administrator",onClick:()=>M(Ee),children:i.jsx("i",{className:"ti ti-edit"})}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",title:"Eliminar usuario","aria-label":`Eliminar ${Ee.username}`,disabled:Ie||Ee.username==="admin"||!c&&Ua(Ee.role,Ee.username)==="administrator",onClick:()=>je(Ee),children:i.jsx("i",{className:"ti ti-trash"})})]})]},Ee.id)),w.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"text-center py-4",children:"No hay usuarios registrados"})})]})]})})}),k>1&&i.jsx("nav",{className:"px-3 py-2 d-flex justify-content-center",children:i.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[i.jsx("li",{className:`page-item ${K===1?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>D(Ee=>Math.max(1,Ee-1)),disabled:K===1,children:"Anterior"})}),Array.from({length:Re-ge+1},(Ee,Je)=>{const A=ge+Je;return i.jsx("li",{className:`page-item ${A===K?"active":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>D(A),children:A})},A)}),i.jsx("li",{className:`page-item ${K===k?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>D(Ee=>Math.min(k,Ee+1)),disabled:K===k,children:"Siguiente"})})]})}),i.jsx("div",{className:"px-3 py-2 d-flex justify-content-end",children:i.jsx("small",{className:"text-muted",children:Ue})}),d&&i.jsx("div",{className:"modal d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:i.jsx("div",{className:"modal-dialog",children:i.jsxs("form",{className:"modal-content",onSubmit:Se(dt?be:ee),children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{className:"modal-title",children:dt?"Actualizar Usuario":"Nuevo Usuario"}),i.jsx("button",{type:"button",className:"btn-close",onClick:I})]}),i.jsxs("div",{className:"modal-body row g-3",children:[i.jsxs("div",{className:"col-6",children:[i.jsx("label",{className:"form-label",children:"Usuario"}),i.jsx("input",{className:"form-control",disabled:Te,...me("username",{required:!0})})]}),i.jsx("div",{className:"col-6",children:i.jsx(Vi,{label:"Contrasea",...me("password",{required:He}),autoComplete:"new-password",helpText:Fe})}),i.jsxs("div",{className:"col-6",children:[i.jsx("label",{className:"form-label",children:"Nombre"}),i.jsx("input",{className:"form-control",disabled:Te,...me("first_name",{required:!0})})]}),i.jsxs("div",{className:"col-6",children:[i.jsx("label",{className:"form-label",children:"Apellido"}),i.jsx("input",{className:"form-control",disabled:Te,...me("last_name",{required:!0})})]}),i.jsxs("div",{className:"col-6",children:[i.jsx("label",{className:"form-label",children:"Rol"}),i.jsxs("select",{className:"form-select",disabled:Te,...me("role"),children:[fe?i.jsx("option",{value:"admin",children:"Superusuario"}):null,i.jsx("option",{value:"technician",children:"Tecnico"}),i.jsx("option",{value:"standard",children:"Estandar"}),c?i.jsx("option",{value:"administrator",children:"Administrador"}):null]})]}),i.jsxs("div",{className:"col-6",children:[i.jsx("label",{className:"form-label",children:"N Tecnico"}),i.jsx("input",{type:"number",className:"form-control",disabled:Te,...me("tech_number",{required:!0})}),i.jsx("div",{className:"form-text small",children:"Use 0 si no aplica (admin/estandar)"})]})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:I,disabled:Ie,children:"Cancelar"}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Ie,children:dt?"Actualizar":"Guardar"})]})]})})})]}):i.jsx("div",{className:"p-4 text-danger",children:"Acceso no autorizado"})}function _T(){const{toast:e}=Br(),[a,s]=y.useState(""),[l,c]=y.useState(""),[d,f]=y.useState(!1),h=a.trim().length>0&&l.trim().length>0,g=async p=>{if(p.preventDefault(),!!h)try{f(!0),await xE(a.trim(),l.trim()),e({kind:"success",message:"Contrasea actualizada"}),s(""),c("")}catch(v){e({kind:"error",title:"Error",message:v?.message??"No se pudo cambiar la contrasea"})}finally{f(!1)}};return i.jsx("div",{className:"container py-4",children:i.jsx("div",{className:"row justify-content-center",children:i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"card shadow-sm",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:"Cambiar mi contrasea"})}),i.jsxs("form",{onSubmit:g,children:[i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"mb-3",children:i.jsx(Vi,{label:"Contrasea actual",inputId:"oldPwd",value:a,onChange:p=>s(p.target.value),required:!0,autoComplete:"current-password"})}),i.jsx("div",{className:"mb-3",children:i.jsx(Vi,{label:"Nueva contrasea",inputId:"newPwd",value:l,onChange:p=>c(p.target.value),required:!0,autoComplete:"new-password",helpText:"Usa una contrasea segura y que recuerdes."})})]}),i.jsxs("div",{className:"card-footer d-flex justify-content-end gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{s(""),c("")},disabled:d,children:"Limpiar"}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!h||d,children:"Guardar"})]})]})]})})})})}async function ET(e){return(await Ye.get("/admin/permisos/paged",{params:{q:e.q||void 0,role:e.role||void 0,limit:e.limit,offset:e.offset}})).data}async function AT(e,a){const{data:s}=await Ye.put(`/admin/permisos/${e}`,{allowedModules:a});return s}const Em=[{id:"oi_formulario",label:"Registro OI",path:"/oi"},{id:"oi_listado",label:"Listado OI",path:"/oi/list"},{id:"tools_vima_lista",label:"VIMA  LISTA",path:"/oi/tools/vima-to-lista"},{id:"tools_actualizacion_bases",label:"Actualizacin de Bases",path:"/oi/tools/actualizacion-base"},{id:"tools_historial_ac",label:"Historial A-C",path:"/oi/tools/formato-ac/history"},{id:"tools_consol_correlativo",label:"Consolidacin (Correlativo)",path:"/oi/tools/consolidacion/correlativo"},{id:"tools_consol_no_correlativo",label:"Consolidacin (No Correlativo)",path:"/oi/tools/consolidacion/no-correlativo"},{id:"future_ot",label:"Orden de Trabajo (FUTURO)",path:"FUTURO"},{id:"logistica",label:"Logstica",path:"/logistica/log01/excel"},{id:"logistica_history",label:"Historial de consolidaciones",path:"/logistica/log01/history"},{id:"logistica_pdfs",label:"Filtrado de Cert.PDFs",path:"/logistica/log02/pdfs"},{id:"future_smart",label:"Smart (FUTURO)",path:"FUTURO"},{id:"users_admin",label:"Gestin de usuarios",path:"/users"},{id:"admin_permisos",label:"Permisos",path:"/admin/permisos"}],Sv=[{id:"oi",label:"OI",moduleIds:["oi_formulario","oi_listado","tools_vima_lista","tools_actualizacion_bases","tools_historial_ac","tools_consol_correlativo","tools_consol_no_correlativo","future_ot"]},{id:"logistica",label:"Logstica",moduleIds:["logistica","logistica_history","logistica_pdfs"]},{id:"smart",label:"Smart (FUTURO)",moduleIds:["future_smart"]},{id:"usuarios",label:"Usuarios",moduleIds:["users_admin"]},{id:"administrar",label:"Administrar",moduleIds:["admin_permisos"]}];function Nv(e){const a=new Set(Em.map(c=>c.id)),s=new Set,l=[];for(const c of e){const d=c==="future_logistica"?"logistica":c;!a.has(d)||s.has(d)||(s.add(d),l.push(d))}return l}const wv="admin_permisos:collapsed_groups";function CT(){const e=Im(),{toast:a}=Br(),[s,l]=y.useState(""),[c,d]=y.useState(""),[f,h]=y.useState(""),[g,p]=y.useState(20),[v,x]=y.useState(1),N=(v-1)*g,q=y.useRef(!1);y.useEffect(()=>{if(!q.current){q.current=!0;return}const k=setTimeout(()=>{d(s.trim()),x(1)},250);return()=>clearTimeout(k)},[s]);const{data:j,isLoading:_,error:C,refetch:B}=zr({queryKey:["admin","permisos",{search:c,roleFilter:f,pageSize:g,offset:N}],queryFn:()=>ET({q:c||void 0,role:f||void 0,limit:g,offset:N}),placeholderData:k=>k}),[T,K]=y.useState(null),[D,R]=y.useState([]),Z=(T?.username??"").toLowerCase()==="admin",[U,X]=y.useState(()=>{const k=Object.fromEntries(Sv.map(oe=>[oe.id,!0]));try{const oe=localStorage.getItem(wv);if(!oe)return k;const ge=JSON.parse(oe);return!ge||typeof ge!="object"?k:{...k,...ge}}catch{return k}}),ce=(k,oe)=>{X(ge=>{const Re={...ge,[k]:oe};try{localStorage.setItem(wv,JSON.stringify(Re))}catch{}return Re})},_e=k=>{K(k),R(Nv(k.allowedModules??[]))},xe=()=>{K(null),R([])},me=Jj({mutationFn:async k=>AT(k.userId,k.allowedModules),onSuccess:async()=>{await e.invalidateQueries({queryKey:["admin","permisos"]}),a({kind:"success",title:"Permisos",message:"Permisos actualizados."}),xe()},onError:k=>{const oe=k?.response?.data?.detail??k?.message??"No se pudieron actualizar los permisos.";a({kind:"error",title:"Permisos",message:String(oe)})}}),Se=y.useMemo(()=>j?.items??[],[j]),De=j?.total??0,Oe=j?.limit??g,M=Oe>0?Math.ceil(De/Oe):1,I=De===0?0:N+1,ee=De===0?0:Math.min(N+Se.length,De),be=De===0?"0 registros":`Mostrando ${I}-${ee} de ${De} registros`,je=k=>{R(oe=>{const ge=new Set(oe);return ge.has(k)?ge.delete(k):ge.add(k),Array.from(ge)})},w=k=>{R(oe=>{const ge=new Set(oe),Re=k.moduleIds.filter(de=>Em.some(Ue=>Ue.id===de));if(Re.length>0&&Re.every(de=>ge.has(de)))for(const de of Re)ge.delete(de);else for(const de of Re)ge.add(de);return Array.from(ge)})},P=()=>{T&&me.mutate({userId:T.id,allowedModules:Nv(D)})},ie=()=>{l(""),d(""),h(""),x(1),p(20)};return i.jsxs("div",{className:"container-fluid",children:[i.jsx(ql,{show:me.isPending,label:"Guardando permisos..."}),i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Administrar  Permisos"}),i.jsx("p",{className:"text-muted mB-20",children:"Define qu mdulos puede ver cada usuario (el acceso por URL tambin se bloquea)."}),i.jsxs("div",{className:"d-flex flex-wrap align-items-end gap-2 mb-3",children:[i.jsxs("div",{style:{minWidth:260},children:[i.jsx("label",{className:"form-label small mb-1",children:"Buscar"}),i.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Usuario, nombre o rol...",value:s,onChange:k=>{l(k.target.value),x(1)}})]}),i.jsxs("div",{style:{minWidth:220},children:[i.jsx("label",{className:"form-label small mb-1",children:"Rol"}),i.jsxs("select",{className:"form-select form-select-sm",value:f,onChange:k=>{h(k.target.value),x(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"admin",children:"admin"}),i.jsx("option",{value:"administrator",children:"administrator"}),i.jsx("option",{value:"technician",children:"technician"}),i.jsx("option",{value:"standard",children:"standard"}),i.jsx("option",{value:"user",children:"user (legacy)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"form-label small mb-1",children:"Mostrar"}),i.jsxs("select",{className:"form-select form-select-sm",value:g,onChange:k=>{const oe=Number(k.target.value)||20;p(oe),x(1)},children:[i.jsx("option",{value:20,children:"20"}),i.jsx("option",{value:50,children:"50"}),i.jsx("option",{value:100,children:"100"})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:ie,disabled:_||me.isPending,children:"Limpiar filtros"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>B(),disabled:_||me.isPending,children:"Recargar"})]})]}),_?i.jsx("div",{className:"text-muted",children:"Cargando usuarios..."}):C?i.jsx("div",{className:"alert alert-danger",role:"alert",children:"No se pudo cargar la lista de usuarios."}):i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm align-middle",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Usuario"}),i.jsx("th",{children:"Rol"}),i.jsx("th",{className:"text-end",children:"Acciones"})]})}),i.jsxs("tbody",{children:[Se.map(k=>i.jsxs("tr",{children:[i.jsx("td",{children:k.username}),i.jsx("td",{children:k.role}),i.jsx("td",{className:"text-end",children:i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>_e(k),disabled:(k.username??"").toLowerCase()==="admin",children:"Editar"})})]},k.id)),Se.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"text-muted",children:"No hay usuarios."})}):null]})]})}),i.jsx("div",{className:"d-flex justify-content-end mt-2",children:i.jsx("small",{className:"text-muted",children:be})}),M>1&&i.jsx("nav",{className:"mt-2 d-flex justify-content-center",children:i.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[i.jsx("li",{className:`page-item ${v===1?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>x(k=>Math.max(1,k-1)),disabled:v===1,children:""})}),i.jsx("li",{className:"page-item disabled",children:i.jsxs("span",{className:"page-link",children:["Pgina ",v," / ",M]})}),i.jsx("li",{className:`page-item ${v===M?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>x(k=>Math.min(M,k+1)),disabled:v===M,children:"Siguiente"})})]})})]})})}),T&&i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"permsModalTitle",onClick:k=>{k.target===k.currentTarget&&xe()},children:i.jsx("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsxs("h5",{id:"permsModalTitle",className:"modal-title",children:["Permisos de ",T.username]}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:xe})]}),i.jsxs("div",{className:"modal-body",children:[Z?i.jsxs("div",{className:"alert alert-info",role:"alert",children:["El superusuario ",i.jsx("b",{children:"admin"})," siempre tiene acceso total y no se puede limitar por permisos."]}):null,Sv.map(k=>{const oe=k.moduleIds.map(Ue=>Em.find(Ie=>Ie.id===Ue)).filter(Boolean),ge=oe.filter(Ue=>D.includes(Ue.id)).length,Re=oe.length>0&&ge===oe.length,$e=ge>0&&!Re,de=!!U[k.id];return i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{className:"form-check mb-0",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:`grp-${T.id}-${k.id}`,checked:Re,ref:Ue=>{Ue&&(Ue.indeterminate=$e)},onChange:()=>w(k),disabled:me.isPending||Z}),i.jsxs("label",{className:"form-check-label fw-semibold",htmlFor:`grp-${T.id}-${k.id}`,children:[k.label,i.jsxs("span",{className:"text-muted ms-2 small",children:["(",ge,"/",oe.length,")"]})]})]}),i.jsx("div",{className:"btn-group btn-group-sm",role:"group","aria-label":`Acciones ${k.label}`,children:i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>ce(k.id,!de),disabled:me.isPending,children:de?"Expandir":"Contraer"})})]}),!de&&i.jsx("div",{className:"mt-2 ms-4 ps-3 border-start border-2 border-light",children:i.jsx("div",{className:"row",children:oe.map(Ue=>i.jsx("div",{className:"col-md-6 mb-2",children:i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:`perm-${T.id}-${Ue.id}`,checked:D.includes(Ue.id),onChange:()=>je(Ue.id),disabled:me.isPending||Z}),i.jsxs("label",{className:"form-check-label",htmlFor:`perm-${T.id}-${Ue.id}`,children:[Ue.label," ",i.jsxs("span",{className:"text-muted",children:["(",Ue.path,")"]})]})]})},Ue.id))})})]},k.id)}),i.jsx("div",{className:"form-text mt-2",children:"Nota: Cambiar contrasea y Home siempre estn disponibles para todos."})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:xe,disabled:me.isPending,children:"Cancelar"}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:P,disabled:me.isPending||Z,children:"Guardar"})]})]})})})]})}function OT(e){const a=Ye.defaults.baseURL??window.location.origin;return`${String(a).replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`}async function RT(e,a){return Ye.post("/integrations/vima-to-lista/dry-run-upload",e,{signal:a})}async function TT(e,a){return Ye.post("/integrations/vima-to-lista/upload",e,{responseType:"blob",signal:a})}async function jv(e,a,s){const l=OT(`/integrations/vima-to-lista/progress/${e}`),c=Dn()?.token,d=await fetch(l,{method:"GET",headers:c?{Authorization:`Bearer ${c}`}:void 0,signal:s});if(!d.ok||!d.body)throw new Error(`No se pudo abrir el stream de progreso (${d.status})`);const f=d.body.getReader(),h=new TextDecoder("utf-8");let g="";for(;;){const{value:p,done:v}=await f.read();if(v)break;g+=h.decode(p,{stream:!0});let x;for(;(x=g.indexOf(`
`))>=0;){const N=g.slice(0,x).trim();if(g=g.slice(x+1),!!N)try{a(JSON.parse(N))}catch{}}}}function O0(e){return`${e.name}::${e.size}::${e.lastModified}`}function DT(e){return e.normalize("NFKC").trim().replace(/\s+/g,"").toLowerCase()}function Vc(e){return DT(e.name)}function zT(e){if(!e)return null;const a=e.split(",").map(s=>s.trim().toLowerCase()).filter(Boolean);return a.length===0?null:a}function oh(e,a){const s=zT(a);if(!s)return e;const l=s.filter(c=>c.startsWith("."));return l.length===0?e:e.filter(c=>l.some(d=>c.name.toLowerCase().endsWith(d)))}function MT(e,a){if(a.length===0)return{merged:e,added:[],duplicates:[]};const s=[...e],l=[],c=[],d=new Set(e.map(Vc));for(const f of a){const h=Vc(f);if(d.has(h)){c.push(f);continue}d.add(h),s.push(f),l.push(f)}return{merged:s,added:l,duplicates:c}}function Pi({label:e,accept:a,disabled:s=!1,file:l,onChange:c}){const d=y.useRef(null),f=y.useRef(0),[h,g]=y.useState(!1),p=()=>{s||d.current?.click()},v=()=>{s||(d.current&&(d.current.value=""),c(null))},x=C=>{c(C.target.files?.[0]??null),C.currentTarget.value=""},N=C=>{C.preventDefault(),C.stopPropagation(),!s&&(f.current+=1,g(!0))},q=C=>{C.preventDefault(),C.stopPropagation()},j=C=>{C.preventDefault(),C.stopPropagation(),!s&&(f.current=Math.max(0,f.current-1),f.current===0&&g(!1))},_=C=>{if(C.preventDefault(),C.stopPropagation(),f.current=0,g(!1),s)return;const B=C.dataTransfer?.files?Array.from(C.dataTransfer.files):[],K=oh(B,a)[0]??null;K&&(d.current&&(d.current.value=""),c(K))};return i.jsxs("div",{children:[i.jsx("label",{className:"form-label",children:e}),i.jsx("input",{ref:d,className:"d-none",type:"file",accept:a,onChange:x,disabled:s}),i.jsx("div",{className:`vi-file-drop-target${h?" is-dragover":""}`,onDragEnter:N,onDragOver:q,onDragLeave:j,onDrop:_,"aria-disabled":s?"true":"false",children:i.jsxs("div",{className:"input-group",children:[i.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:p,disabled:s,children:"Examinar"}),i.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:v,disabled:s||!l,children:"Eliminar"}),i.jsx("input",{className:"form-control",type:"text",readOnly:!0,value:l?l.name:"No se ha seleccionado ningn archivo."})]})})]})}const kT={status:"estado",progress:"progreso",complete:"completado",error:"error"},UT={file:"archivo",file_done:"archivo procesado",file_error:"archoivo con error",render:"generando",failed:"fallido",received:"recibido",loading:"cargando",upload:"subida",analysis:"anlisis",init:"iniciando",processing:"procesamiento",opening:"abriendo",reading:"leyendo",writing:"escribiendo",saving:"guardando",cancelled:"cancelado",canceled:"cancelado",copied:"copiado",skipped:"omitido",skipped_incremental:"omitido (incremental)",stopped_blank:"detenido (en blanco)",complete:"completado",done:"finalizado",error:"error"},LT=[[/\bcomplete(d)?\b/gi,"completado"],[/\bstopped_blank\b/gi,"detenido (en blanco)"],[/\bskipped_incremental\b/gi,"omitido (incremental)"],[/\bskipped\b/gi,"omitido"],[/\bprocessing\b/gi,"procesando"],[/\bopening\b/gi,"abriendo"],[/\breading\b/gi,"leyendo"],[/\bwriting\b/gi,"escribiendo"],[/\bsaving\b/gi,"guardando"],[/\breceived\b/gi,"recibido"],[/\bloading\b/gi,"cargando"],[/\bupload(ing)?\b/gi,"subiendo"],[/\bdownload(ing)?\b/gi,"descargando"],[/\bmerge(s|d|ing)?\b/gi,"consolidando"]];function R0(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function Tl(e){if(!e)return"";const a=e.toLowerCase();return R0(kT[a]??e)}function so(e){if(!e)return"";const a=e.trim().toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),s=e.trim().replace(/[_-]+/g," ");return R0(UT[a]??Il(s))}function Il(e){if(!e)return"";let a=e;for(const[s,l]of LT)a=a.replace(s,l);return a}function BT(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function qT(e,a){const s=URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=a,document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(s)}function IT(){const[e,a]=y.useState(null),[s,l]=y.useState(null),[c,d]=y.useState(""),[f,h]=y.useState(11),[g,p]=y.useState(11),[v,x]=y.useState(!0),[N,q]=y.useState(!0),[j,_]=y.useState(!0),[C,B]=y.useState(!0),[T,K]=y.useState(!1),[D,R]=y.useState(""),[Z,U]=y.useState(null),[X,ce]=y.useState(null),[_e,xe]=y.useState(null),[me,Se]=y.useState([]),[De,Oe]=y.useState(""),M=y.useRef(null),I=y.useRef(null),[ee,be]=y.useState(!1),[je,w]=y.useState(!1),[P,ie]=y.useState("Ingresa la contrasea de apertura del archivo y vuelve a intentar."),k=y.useMemo(()=>!!e&&!!s&&!Z,[e,s,Z]);function oe(Te){Se(fe=>[Te,...fe].slice(0,200));const He=typeof Te.percent=="number"?Te.percent:typeof Te.progress=="number"?Te.progress:null;He!=null&&Number.isFinite(He)&&xe(Math.max(0,Math.min(100,He)))}function ge(){M.current?.abort(),M.current=null}function Re(){Z&&ge()}function $e(Te,He){if(!e||!s)throw new Error("Faltan archivos");const fe=new FormData;fe.append("vima_file",e),fe.append("lista_file",s);const Fe=(He??c).trim();return Fe&&fe.append("vima_password",Fe),fe.append("vima_start_row",String(f)),fe.append("lista_start_row",String(g)),fe.append("require_all_g_to_n",v?"true":"false"),fe.append("incremental",N?"true":"false"),fe.append("strict_incremental",j?"true":"false"),fe.append("replicate_merges",C?"true":"false"),fe.append("update_existing_periodo",T?"true":"false"),D.trim()&&fe.append("oi_pattern",D.trim()),fe.append("operation_id",Te),fe}function de(){I.current=null,w(!1)}function Ue(Te,He){I.current=Te,ie(He),w(!0)}function Ie(Te,He){if(!gt.isAxiosError(Te)){Oe(String(Te));return}const fe=Te;if(fe.code==="ERR_CANCELED")return;const Fe=fe.response?.headers?.["x-code"],Ee=fe.response?.data?.detail??fe.message;if(Fe==="PASSWORD_REQUIRED"){Oe(""),Ue(He,"El archivo VIMA est protegido. Ingresa la contrasea de apertura para continuar.");return}if(Fe==="WRONG_PASSWORD"){Oe(""),Ue(He,"Contrasea incorrecta. Intenta nuevamente.");return}Oe(String(Ee))}async function Ve(Te){Oe(""),ce(null),Se([]),xe(0);const He=crypto.randomUUID();M.current=new AbortController,jv(He,oe,M.current.signal).catch(()=>{}),U("dry");try{const fe=$e(He,Te?.passwordOverride),Fe=await RT(fe,M.current.signal);ce(Fe.data)}catch(fe){Ie(fe,"dry")}finally{ge(),U(null)}}async function dt(Te){Oe(""),Se([]),xe(0);const He=crypto.randomUUID();M.current=new AbortController,jv(He,oe,M.current.signal).catch(()=>{}),U("upload");try{const fe=$e(He,Te?.passwordOverride),Fe=await TT(fe,M.current.signal),Ee=Fe.headers?.["content-disposition"],Je=BT(Ee)??"LISTA_SALIDA.xlsx";qT(Fe.data,Je)}catch(fe){Ie(fe,"upload")}finally{ge(),U(null)}}return i.jsxs("div",{className:"container-fluid",children:[i.jsxs("div",{className:"row gap-20",children:[i.jsx("div",{className:"col-md-7",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsx("h4",{className:"c-grey-900 mB-20",children:"Integracin VIMA  LISTA"}),i.jsx("div",{className:"mB-15",children:i.jsx(Pi,{label:"Archivo VIMA (.xlsm)",accept:".xlsm,.xlsx",file:e,onChange:a,disabled:!!Z})}),i.jsx("div",{className:"mB-15",children:i.jsx(Pi,{label:"Archivo LISTA (.xlsx)",accept:".xlsx,.xlsm",file:s,onChange:l,disabled:!!Z})}),i.jsxs("div",{className:"mB-15",children:[i.jsx("label",{className:"form-label",children:"Contrasea VIMA (si aplica)"}),i.jsx("input",{className:"form-control",type:"password",value:c,onChange:Te=>d(Te.target.value),placeholder:"(opcional)"})]}),ee?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label",children:"Fila inicio VIMA"}),i.jsx("input",{className:"form-control",type:"number",value:f,onChange:Te=>h(Number(Te.target.value))})]}),i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label",children:"Fila inicio LISTA"}),i.jsx("input",{className:"form-control",type:"number",value:g,onChange:Te=>p(Number(Te.target.value))})]})]}),i.jsxs("div",{className:"mB-15",children:[i.jsx("label",{className:"form-label",children:"Patrn OI (regex, opcional)"}),i.jsx("input",{className:"form-control",value:D,onChange:Te=>R(Te.target.value),placeholder:"Ej: OI-(\\\\d{4})-(\\\\d+)"}),i.jsx("small",{className:"text-muted",children:"Nota: si pegas barras invertidas, el backend ya normaliza doble backslash."})]}),i.jsxs("div",{className:"row mT-10",children:[i.jsx("div",{className:"col-md-6 mB-10",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"requireAll",checked:v,onChange:Te=>x(Te.target.checked)}),i.jsx("label",{className:"form-check-label",htmlFor:"requireAll",children:"Requerir GN completos"})]})}),i.jsx("div",{className:"col-md-6 mB-10",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateMerges",checked:C,onChange:Te=>B(Te.target.checked)}),i.jsx("label",{className:"form-check-label",htmlFor:"replicateMerges",children:"Replicar merges"})]})}),i.jsx("div",{className:"col-md-6 mB-10",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"incremental",checked:N,onChange:Te=>q(Te.target.checked)}),i.jsx("label",{className:"form-check-label",htmlFor:"incremental",children:"Incremental"})]})}),i.jsx("div",{className:"col-md-6 mB-10",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"strictIncremental",checked:j,onChange:Te=>_(Te.target.checked),disabled:!N}),i.jsx("label",{className:"form-check-label",htmlFor:"strictIncremental",children:"Incremental estricto"})]})}),i.jsx("div",{className:"col-md-6 mB-10",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"updateExistingPeriodo",checked:T,onChange:Te=>K(Te.target.checked),disabled:!N}),i.jsx("label",{className:"form-check-label",htmlFor:"updateExistingPeriodo",children:"Actualizar periodo en OIs existentes"})]})})]})]}):null,De&&i.jsx("div",{className:"alert alert-danger mT-15",role:"alert",children:De}),i.jsx("div",{className:"d-flex justify-content-end mT-10",children:i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>be(Te=>!Te),disabled:!!Z,children:ee?"Menos Opciones":"Ms Opciones"})}),i.jsxs("div",{className:"d-flex gap-10 mT-20",children:[i.jsx("button",{className:"btn btn-primary",disabled:!k,onClick:()=>void dt(),children:Z==="upload"?"Procesando...":"Procesar y Descargar"}),i.jsx("button",{className:"btn btn-outline-danger",disabled:!Z,onClick:Re,children:"Cancelar"}),i.jsx("button",{className:"btn btn-outline-primary",disabled:!k,onClick:()=>void Ve(),children:Z==="dry"?"Analizando...":"Analizar"})]}),X&&i.jsxs("div",{className:"mT-20",children:[i.jsx("h5",{className:"c-grey-900",children:"Resumen"}),i.jsxs("ul",{className:"mB-0",children:[i.jsxs("li",{children:["Filas a copiar: ",i.jsx("b",{children:X.would_copy})]}),i.jsxs("li",{children:["Fila inicio escritura (LISTA): ",i.jsx("b",{children:X.start_write_row})]}),i.jsxs("li",{children:["ltimo OI en LISTA: ",i.jsx("b",{children:String(X.last_oi_in_lista??"-")})]}),i.jsxs("li",{children:["Primer OI a copiar: ",i.jsx("b",{children:String(X.first_oi_to_copy??"-")})]}),i.jsxs("li",{children:["ltimo OI a copiar: ",i.jsx("b",{children:String(X.last_oi_to_copy??"-")})]})]})]})]})}),i.jsx("div",{className:"col-md-5",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[i.jsx("span",{children:"Progreso"}),Z?i.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),i.jsx("div",{className:"progress mB-15",style:{height:12},children:i.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${_e??0}%`},"aria-valuenow":_e??0,"aria-valuemin":0,"aria-valuemax":100})}),i.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:me.length===0?i.jsx("div",{className:"text-muted",children:"Sin eventos an."}):i.jsx("ul",{className:"list-unstyled mB-0",children:me.map((Te,He)=>i.jsxs("li",{className:"mB-10",children:[i.jsxs("div",{children:[i.jsx("b",{children:Tl(Te.type)})," ",Te.stage?i.jsxs("span",{className:"text-muted",children:["[",so(Te.stage),"]"]}):null,typeof Te.percent=="number"?i.jsxs("span",{className:"text-muted",children:["  ",Te.percent.toFixed(1),"%"]}):null]}),i.jsx("div",{className:"text-muted",children:Il(Te.message??Te.detail??"")}),Te.code?i.jsxs("div",{className:"text-muted",children:["Cdigo: ",Te.code]}):null]},He))})})]})})]}),i.jsx(fu,{show:je,title:"Archivo protegido",confirmLabel:"Continuar",helpText:P,onClose:de,onConfirm:Te=>{d(Te),w(!1);const He=I.current;I.current=null,He&&(He==="dry"?Ve({passwordOverride:Te}):dt({passwordOverride:Te}))}})]})}function Zc(e){const a=e,s=String(a?.name||""),l=String(a?.message||a||"");return s==="AbortError"||/aborted/i.test(l)||/abort/i.test(l)}function $l(e){const a=Ye.defaults.baseURL??window.location.origin;return`${String(a).replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`}async function ch(e,a){if(!e.body)return;const s=e.body.getReader(),l=new TextDecoder("utf-8");let c="";try{for(;;){let f;try{f=await s.read()}catch(v){if(Zc(v))return;throw v}const{value:h,done:g}=f;if(g)break;if(!h||h.length===0)continue;c+=l.decode(h,{stream:!0});let p;for(;(p=c.indexOf(`
`))>=0;){const v=c.slice(0,p).trim();if(c=c.slice(p+1),!!v)try{const x=JSON.parse(v);x&&x.progress!=null&&x.percent==null&&(x.percent=x.progress),x&&x.percent!=null&&x.progress==null&&(x.progress=x.percent),a(x)}catch{}}}const d=c.trim();if(d)try{const f=JSON.parse(d);f&&f.progress!=null&&f.percent==null&&(f.percent=f.progress),f&&f.percent!=null&&f.progress==null&&(f.progress=f.percent),a(f)}catch{}}catch(d){if(Zc(d))return;throw d}}function rr(e,a,s){const l=new Error(e);return a!=null&&(l.status=a),s&&(l.code=s),l}async function uh(e,a,s){const l=$l(`/integrations/vima-to-lista/progress/${e}`),c=Dn()?.token,d=await fetch(l,{method:"GET",headers:{...c?{Authorization:`Bearer ${c}`}:{},Accept:"application/x-ndjson","Cache-Control":"no-cache"},signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw rr(`No se pudo abrir el stream (${d.status})`,d.status,f)}await ch(d,a)}async function $T(e,a,s){const l=$l(`/logistica/log01/progress/${e}`),c=Dn()?.token,d=await fetch(l,{method:"GET",headers:{...c?{Authorization:`Bearer ${c}`}:{},Accept:"application/x-ndjson","Cache-Control":"no-cache"},signal:s});if(!d.ok){const v=d.headers.get("X-Code")??void 0;throw rr(`No se pudo abrir el stream (${d.status})`,d.status,v)}if(!(d.headers.get("Content-Type")??"").includes("application/x-ndjson"))throw rr("Stream no es NDJSON",d.status);if(!d.body)throw rr("Stream sin body",d.status);const h=d.body.getReader(),g=new TextDecoder("utf-8");let p="";try{for(;;){let x;try{x=await h.read()}catch(_){if(Zc(_))return;throw _}const{value:N,done:q}=x;if(q)break;if(!N||N.length===0)continue;p+=g.decode(N,{stream:!0});let j;for(;(j=p.indexOf(`
`))>=0;){const _=p.slice(0,j).trim();if(p=p.slice(j+1),!!_)try{a(JSON.parse(_))}catch{}}}const v=p.trim();if(v)try{a(JSON.parse(v))}catch{}}catch(v){if(Zc(v))return;throw v}}async function FT(e,a,s){const l=$l("/bases/actualizar/dry-run-upload"),c=Dn()?.token,d=await fetch(l,{method:"POST",headers:c?{Authorization:`Bearer ${c}`}:void 0,body:e,signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;let h=`Error (${d.status})`;try{const g=await d.json();g?.detail&&(h=String(g.detail))}catch{}throw rr(h,d.status,f)}await ch(d,a)}async function HT(e,a){return Ye.post("/bases/actualizar/upload",e,{responseType:"blob",signal:a})}async function VT(e,a){return Ye.post("/logistica/log01/start",e,{signal:a})}async function ZT(e,a,s){const l=$l(`/logistica/log01/poll/${e}?cursor=${encodeURIComponent(a)}`),c=Dn()?.token,d=await fetch(l,{method:"GET",headers:c?{Authorization:`Bearer ${c}`}:void 0,signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw rr(`No se pudo hacer poll (${d.status})`,d.status,f)}return await d.json()}async function GT(e,a){return Ye.get(`/logistica/log01/result/${encodeURIComponent(e)}`,{responseType:"blob",signal:a,validateStatus:s=>s===200})}async function PT(e){await Ye.post(`/logistica/log01/cancel/${encodeURIComponent(e)}`)}async function Am(e={}){const{limit:a=20,offset:s=0,include_deleted:l=!1,q:c,dateFrom:d,dateTo:f,source:h,status:g}=e,p={limit:a,offset:s,include_deleted:l};c&&c.trim()&&(p.q=c.trim()),d&&d.trim()&&(p.dateFrom=d.trim()),f&&f.trim()&&(p.dateTo=f.trim()),h&&h.trim()&&(p.source=h.trim()),g&&g.trim()&&(p.status=g.trim());const{data:v}=await Ye.get("/logistica/log01/history",{params:p});return v}async function QT(e,a,s){return Ye.get(`/logistica/log01/history/${encodeURIComponent(String(e))}/artifact/${encodeURIComponent(a)}`,{responseType:"blob",signal:s,validateStatus:l=>l===200})}async function YT(e,a){await Ye.delete(`/logistica/log01/history/${encodeURIComponent(String(e))}`,{data:void 0})}async function KT(){return(await Ye.get("/logistica/log02/explorador/roots")).data}async function XT(e){return(await Ye.get("/logistica/log02/explorador/listar",{params:{path:e}})).data}async function JT(e){return(await Ye.post("/logistica/log02/validar-rutas-unc",e)).data}async function WT(e,a){return(await Ye.post("/logistica/log02/copiar-conformes/start",e,{signal:a})).data}async function e2(e,a,s){const l=$l(`/logistica/log02/copiar-conformes/progress/${e}`),c=Dn()?.token,d=await fetch(l,{method:"GET",headers:{...c?{Authorization:`Bearer ${c}`}:{},Accept:"application/x-ndjson","Cache-Control":"no-cache"},signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw rr(`No se pudo abrir el stream (${d.status})`,d.status,f)}await ch(d,a)}async function t2(e,a,s){const l=$l(`/logistica/log02/copiar-conformes/poll/${e}?cursor=${encodeURIComponent(a)}`),c=Dn()?.token,d=await fetch(l,{method:"GET",headers:c?{Authorization:`Bearer ${c}`}:void 0,signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw rr(`No se pudo hacer poll (${d.status})`,d.status,f)}return await d.json()}async function n2(e){await Ye.post(`/logistica/log02/copiar-conformes/cancel/${encodeURIComponent(e)}`)}async function a2(e={}){const{limit:a=20,offset:s=0,q:l,dateFrom:c,dateTo:d,origin:f}=e,h={limit:a,offset:s};l&&l.trim()&&(h.q=l.trim()),c&&c.trim()&&(h.dateFrom=c.trim()),d&&d.trim()&&(h.dateTo=d.trim()),f&&f.trim()&&(h.origin=f.trim());const{data:g}=await Ye.get("/oi/tools/formato-ac/history",{params:h});return g}async function s2(e,a){return Ye.get(`/oi/tools/formato-ac/history/${encodeURIComponent(String(e))}/artifact`,{responseType:"blob",signal:a,validateStatus:s=>s===200})}async function T0(){const{data:e}=await Ye.get("/merge/config/upload-limits");return e}async function D0(e,a,s){return Ye.post(`/merge/?mode=${encodeURIComponent(a)}`,e,{responseType:"blob",signal:s})}async function z0(e){await Ye.post(`/merge/cancel/${encodeURIComponent(e)}`)}async function r2(e){const{data:a}=await Ye.post("/tools/files/upload",e);return a}async function l2(e){const{data:a}=await Ye.post("/tools/excel/inspect",e);return a}async function i2(e){const{data:a}=await Ye.post("/tools/excel/update",e);return a}async function o2(e){const{data:a}=await Ye.post("/tools/excel/change-password",e);return a}async function c2(e){const{data:a}=await Ye.post("/tools/excel/validate",e);return a}function u2({show:e,disabled:a=!1,title:s,accept:l,files:c,onClose:d,onAddFiles:f,onRemoveFile:h,onRemoveAll:g}){const p=y.useRef(null),v=y.useRef(0),[x,N]=y.useState(!1),[q,j]=y.useState("");y.useEffect(()=>{if(!e)return;const U=X=>{X.key==="Escape"&&d()};return window.addEventListener("keydown",U),()=>window.removeEventListener("keydown",U)},[e,d]),y.useEffect(()=>{e||N(!1)},[e]),y.useEffect(()=>{e&&j("")},[e]);const _=y.useCallback(U=>{const X=oh(U,l);if(X.length===0)return;const ce=new Set(c.map(Vc)),_e=new Set(ce),xe=[],me=[];for(const Se of X){const De=Vc(Se);if(_e.has(De)){me.push(Se);continue}_e.add(De),xe.push(Se)}if(me.length>0){const Se=Array.from(new Set(me.map(Oe=>Oe.name))),De=me.length;if(Se.length===1){const Oe=De===1?"Se omiti 1 archivo duplicado":`Se omitieron ${De} archivos duplicados`;j(`${Oe}: "${Se[0]}".`)}else j(`Se omitieron ${De} archivos duplicados: ${Se.join(", ")}.`)}xe.length>0&&f(xe)},[l,c,f]);if(y.useEffect(()=>{if(!e)return;const U=ce=>{ce.preventDefault(),ce.stopPropagation()},X=ce=>{if(ce.preventDefault(),ce.stopPropagation(),a)return;const _e=ce.dataTransfer?.files?Array.from(ce.dataTransfer.files):[];_(_e)};return window.addEventListener("dragover",U,!0),window.addEventListener("drop",X,!0),()=>{window.removeEventListener("dragover",U,!0),window.removeEventListener("drop",X,!0)}},[e,a,_]),!e)return null;const C=()=>{a||p.current?.click()},B=U=>{const X=U.target.files?Array.from(U.target.files):[];_(X),U.currentTarget.value=""},T=()=>{a||(p.current&&(p.current.value=""),g())},K=U=>{U.preventDefault(),U.stopPropagation(),!a&&(v.current+=1,N(!0))},D=U=>{U.preventDefault(),U.stopPropagation()},R=U=>{U.preventDefault(),U.stopPropagation(),!a&&(v.current=Math.max(0,v.current-1),v.current===0&&N(!1))},Z=U=>{if(U.preventDefault(),U.stopPropagation(),v.current=0,N(!1),a)return;const X=U.dataTransfer?.files?Array.from(U.dataTransfer.files):[];_(X)};return i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"filePickerModalTitle",onClick:U=>{U.target===U.currentTarget&&d()},children:i.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered",children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{id:"filePickerModalTitle",className:"modal-title",children:s}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:d})]}),i.jsxs("div",{className:"modal-body",children:[i.jsx("input",{ref:p,className:"d-none",type:"file",accept:l,multiple:!0,onChange:B,disabled:a}),q?i.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between",role:"alert",children:[i.jsx("div",{children:q}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>j("")})]}):null,i.jsxs("div",{className:`vi-dropzone${x?" is-dragover":""}`,onDragEnter:K,onDragOver:D,onDragLeave:R,onDrop:Z,"aria-disabled":a?"true":"false",children:[i.jsxs("div",{className:"text-muted",children:["Arrastra y suelta archivos aqu, o"," ",i.jsx("button",{type:"button",className:"btn btn-link p-0 align-baseline",onClick:C,disabled:a,children:"selecciona desde tu equipo"}),"."]}),l?i.jsxs("div",{className:"form-text",children:["Tipos permitidos: ",l]}):null]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mT-15 mB-10",children:[i.jsx("div",{className:"text-muted",children:c.length===0?"No se han seleccionado archivos.":c.length===1?"1 archivo seleccionado":`${c.length} archivos seleccionados`}),i.jsxs("div",{className:"d-flex gap-10",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:C,disabled:a,children:"Agregar ms"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-danger",onClick:T,disabled:a||c.length===0,children:"Eliminar todos"})]})]}),c.length===0?null:i.jsx("div",{style:{maxHeight:320,overflow:"auto"},children:i.jsx("ul",{className:"list-group",children:c.map(U=>{const X=O0(U);return i.jsxs("li",{className:"list-group-item d-flex align-items-center justify-content-between gap-10",children:[i.jsx("div",{className:"text-truncate",style:{minWidth:0},children:U.name}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>h(X),disabled:a,children:"Eliminar"})]},X)})})})]}),i.jsx("div",{className:"modal-footer",children:i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:d,children:"Cerrar"})})]})})})}function d2(e){if(e.length===0)return"";const a=Array.from(new Set(e.map(l=>l.name))),s=e.length;return a.length===1?`${s===1?"Se omiti 1 archivo duplicado":`Se omitieron ${s} archivos duplicados`}: "${a[0]}".`:`Se omitieron ${s} archivos duplicados: ${a.join(", ")}.`}function mu({label:e,title:a,accept:s,disabled:l=!1,fullDropArea:c=!1,files:d,setFiles:f}){const[h,g]=y.useState(!1),[p,v]=y.useState(!1),[x,N]=y.useState(""),q=y.useRef(0),j=y.useMemo(()=>d.length===0?"No se han seleccionado archivos.":d.length===1?"1 archivo seleccionado":`${d.length} archivos seleccionados`,[d.length]),_=d.length===0?"Agregar archivos":"Modificar/agregar archivos",C=Z=>{const U=oh(Z,s);U.length!==0&&f(X=>{const{merged:ce,duplicates:_e}=MT(X,U);return _e.length>0&&N(d2(_e)),ce})},B=Z=>{Z.preventDefault(),Z.stopPropagation(),!l&&(q.current+=1,v(!0))},T=Z=>{Z.preventDefault(),Z.stopPropagation()},K=Z=>{Z.preventDefault(),Z.stopPropagation(),!l&&(q.current=Math.max(0,q.current-1),q.current===0&&v(!1))},D=Z=>{if(Z.preventDefault(),Z.stopPropagation(),q.current=0,v(!1),l)return;const U=Z.dataTransfer?.files?Array.from(Z.dataTransfer.files):[];C(U)},R=i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"form-label",children:e}),i.jsxs("div",{className:"input-group",children:[i.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>g(!0),disabled:l,children:_}),i.jsx("input",{className:"form-control",type:"text",readOnly:!0,value:j})]}),x?i.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between mT-10",role:"alert",children:[i.jsx("div",{children:x}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>N("")})]}):null]});return i.jsxs(i.Fragment,{children:[c?i.jsx("div",{className:`vi-file-drop-target${p?" is-dragover":""}`,onDragEnter:B,onDragOver:T,onDragLeave:K,onDrop:D,"aria-disabled":l?"true":"false",children:R}):i.jsxs("div",{children:[i.jsx("label",{className:"form-label",children:e}),i.jsx("div",{className:`vi-file-drop-target${p?" is-dragover":""}`,onDragEnter:B,onDragOver:T,onDragLeave:K,onDrop:D,"aria-disabled":l?"true":"false",children:i.jsxs("div",{className:"input-group",children:[i.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>g(!0),disabled:l,children:_}),i.jsx("input",{className:"form-control",type:"text",readOnly:!0,value:j})]})}),x?i.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between mT-10",role:"alert",children:[i.jsx("div",{children:x}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>N("")})]}):null]}),i.jsx(u2,{show:h,disabled:l,title:a,accept:s,files:d,onClose:()=>g(!1),onAddFiles:C,onRemoveFile:Z=>f(U=>U.filter(X=>O0(X)!==Z)),onRemoveAll:()=>f([])})]})}function f2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function m2(e,a){const s=URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=a,document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(s)}async function h2(e){if(!gt.isAxiosError(e))return{detail:String(e)};const a=e,s=a.response?.headers?.["x-code"]??void 0,l=a.response?.data;if(l instanceof Blob)try{const d=await l.text(),f=JSON.parse(d);return{detail:String(f?.detail??d??a.message),code:s}}catch{return{detail:a.message,code:s}}const c=l?.detail??a.message;return{detail:String(c),code:s}}function p2(){const[e,a]=y.useState(null),[s,l]=y.useState([]),[c,d]=y.useState(""),[f,h]=y.useState(""),[g,p]=y.useState("^OI-(\\d+)-(\\d{4})$"),[v,x]=y.useState(9),[N,q]=y.useState("ERROR FINAL"),[j,_]=y.useState(!0),[C,B]=y.useState(!1),[T,K]=y.useState(!1),[D,R]=y.useState(null),[Z,U]=y.useState(null),[X,ce]=y.useState([]),[_e,xe]=y.useState(""),me=y.useRef(null),Se=y.useRef(null),[De,Oe]=y.useState(!1),[M,I]=y.useState(!1),[ee,be]=y.useState("Ingresa la contrasea de apertura del archivo y vuelve a intentar."),je=y.useMemo(()=>!!e&&s.length>0&&!D,[e,s,D]);function w(de){ce(Ie=>[de,...Ie].slice(0,200));const Ue=typeof de.percent=="number"?de.percent:typeof de.progress=="number"?de.progress:null;Ue!=null&&Number.isFinite(Ue)&&U(Math.max(0,Math.min(100,Ue)))}function P(){me.current?.abort(),me.current=null}function ie(){D&&P()}function k(de,Ue){if(!e)throw new Error("Falta el archivo Base");if(s.length===0)throw new Error("Faltan archivos OI");const Ie=new FormData;Ie.append("base_file",e);for(const dt of s)Ie.append("oi_files",dt);const Ve=(Ue??c).trim();return Ve&&Ie.append("default_password",Ve),f.trim()&&Ie.append("per_file_passwords_json",f.trim()),g.trim()&&Ie.append("oi_pattern",g.trim()),Ie.append("oi_start_row",String(v)),N.trim()&&Ie.append("base_sheet",N.trim()),de&&Ie.append("operation_id",de),Ie}function oe(){Se.current=null,I(!1)}function ge(de,Ue){Se.current=de,be(Ue),I(!0)}async function Re(de){xe(""),ce([]),U(0),me.current=new AbortController,R("dry");try{const Ue=k(void 0,de?.passwordOverride);await FT(Ue,w,me.current.signal)}catch(Ue){if(Ue?.name==="AbortError")return;const Ie=Ue?.code,Ve=String(Ue?.message??Ue);if(Ie==="PASSWORD_REQUIRED"){xe(""),ge("dry","Algn archivo est protegido. Ingresa la contrasea de apertura para continuar.");return}else if(Ie==="WRONG_PASSWORD"){xe(""),ge("dry","Contrasea incorrecta. Intenta nuevamente.");return}else xe(Ve)}finally{P(),R(null)}}async function $e(de){xe(""),ce([]),U(0);const Ue=crypto.randomUUID();me.current=new AbortController,uh(Ue,w,me.current.signal).catch(()=>{}),R("upload");try{const Ie=k(Ue,de?.passwordOverride);Ie.append("replicate_merges",j?"true":"false"),Ie.append("replicate_row_heights",C?"true":"false"),Ie.append("replicate_col_widths",T?"true":"false");const Ve=await HT(Ie,me.current.signal),dt=Ve.headers["content-disposition"],Te=Ve.headers["x-file-name"],He=f2(dt)??Te??"base_actualizada.xlsx";m2(Ve.data,He)}catch(Ie){if(gt.isAxiosError(Ie)&&Ie.code==="ERR_CANCELED")return;const{detail:Ve,code:dt}=await h2(Ie);if(dt==="PASSWORD_REQUIRED"){xe(""),ge("upload","Algn archivo est protegido. Ingresa la contrasea de apertura para continuar.");return}else if(dt==="WRONG_PASSWORD"){xe(""),ge("upload","Contrasea incorrecta. Intenta nuevamente.");return}else xe(Ve)}finally{P(),R(null)}}return i.jsxs("div",{className:"container-fluid",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-7",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Actualizacin de Bases"}),i.jsx("p",{className:"text-muted mB-20",children:"Integra mltiples OIs en una Base (hoja ERROR FINAL). Soporta dry-run (NDJSON) y ejecucin con descarga."}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12 mB-15",children:i.jsx(Pi,{label:"Base (xlsx)",accept:".xlsx",file:e,onChange:a,disabled:!!D})}),i.jsx("div",{className:"col-12 mB-15",children:i.jsx(mu,{label:"Archivos OI (xlsx/xlsm)",title:"Archivos OI",accept:".xlsx,.xlsm",files:s,setFiles:l,disabled:!!D})}),i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label",children:"Contrasea por defecto (opcional)"}),i.jsx("input",{className:"form-control",type:"password",value:c,onChange:de=>d(de.target.value),disabled:!!D})]}),i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label",children:"Hoja Base (opcional)"}),i.jsx("input",{className:"form-control",value:N,onChange:de=>q(de.target.value),disabled:!!D})]}),De?i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label",children:"Regex OI (opcional)"}),i.jsx("input",{className:"form-control",value:g,onChange:de=>p(de.target.value),disabled:!!D})]}):null,i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label",children:"Fila inicio OI"}),i.jsx("input",{className:"form-control",type:"number",min:1,value:v,onChange:de=>x(Number(de.target.value||9)),disabled:!!D})]}),i.jsxs("div",{className:"col-12 mB-15",children:[i.jsx("label",{className:"form-label",children:"Contraseas por archivo (opcional)"}),i.jsx("textarea",{className:"form-control",rows:4,value:f,onChange:de=>h(de.target.value),disabled:!!D,placeholder:`Ej:
OI-0001-2025.xlsx: clave1
OI-0002-2025.xlsx: clave2

O JSON:
{"OI-0001-2025.xlsx":"clave1"}`})]}),De?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"col-md-4 mB-15",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateMerges",checked:j,onChange:de=>_(de.target.checked),disabled:!!D}),i.jsx("label",{className:"form-check-label",htmlFor:"replicateMerges",children:"Replicar merges"})]})}),i.jsx("div",{className:"col-md-4 mB-15",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateRowHeights",checked:C,onChange:de=>B(de.target.checked),disabled:!!D}),i.jsx("label",{className:"form-check-label",htmlFor:"replicateRowHeights",children:"Replicar alto filas"})]})}),i.jsx("div",{className:"col-md-4 mB-15",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateColWidths",checked:T,onChange:de=>K(de.target.checked),disabled:!!D}),i.jsx("label",{className:"form-check-label",htmlFor:"replicateColWidths",children:"Replicar ancho cols"})]})})]}):null]}),_e&&i.jsx("div",{className:"alert alert-danger mT-10",role:"alert",children:_e}),i.jsx("div",{className:"d-flex justify-content-end mT-10",children:i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>Oe(de=>!de),disabled:!!D,children:De?"Menos Opciones":"Ms Opciones"})}),i.jsxs("div",{className:"d-flex gap-10 mT-15",children:[i.jsx("button",{className:"btn btn-primary",disabled:!je,onClick:()=>void $e(),children:D==="upload"?"Procesando...":"Procesar y Descargar"}),i.jsx("button",{className:"btn btn-outline-danger",disabled:!D,onClick:ie,children:"Cancelar"}),i.jsx("button",{className:"btn btn-outline-primary",disabled:!je,onClick:()=>void Re(),children:D==="dry"?"Analizando...":"Analizar"})]})]})}),i.jsx("div",{className:"col-md-5",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[i.jsx("span",{children:"Progreso"}),D?i.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),i.jsx("div",{className:"progress mB-15",style:{height:12},children:i.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${Z??0}%`},"aria-valuenow":Z??0,"aria-valuemin":0,"aria-valuemax":100})}),i.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:X.length===0?i.jsx("div",{className:"text-muted",children:"Sin eventos an."}):i.jsx("ul",{className:"list-unstyled mB-0",children:X.map((de,Ue)=>i.jsxs("li",{className:"mB-10",children:[i.jsxs("div",{children:[i.jsx("b",{children:Tl(de.type)})," ",de.stage?i.jsxs("span",{className:"text-muted",children:["[",so(de.stage),"]"]}):null,typeof de.percent=="number"?i.jsxs("span",{className:"text-muted",children:["  ",de.percent.toFixed(1),"%"]}):null]}),i.jsx("div",{className:"text-muted",children:Il(de.message??de.detail??"")}),de.code?i.jsxs("div",{className:"text-muted",children:["Cdigo: ",de.code]}):null]},Ue))})})]})})]}),i.jsx(fu,{show:M,title:"Archivo protegido",confirmLabel:"Continuar",helpText:ee,onClose:oe,onConfirm:de=>{d(de),I(!1);const Ue=Se.current;Se.current=null,Ue&&(Ue==="dry"?Re({passwordOverride:de}):$e({passwordOverride:de}))}})]})}const g2="America/Lima";function y2(e){if(!e)return null;const a=/filename\*=UTF-8''([^;]+)|filename="([^"]+)"/i.exec(e),s=a?.[1]??a?.[2];if(!s)return null;try{return decodeURIComponent(s)}catch{return s}}function b2(e,a){const s=window.URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=a,document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(s)}function v2(e){if(!e)return"N/D";const s=/[zZ]$/.test(e)||/[+-]\d{2}:\d{2}$/.test(e)||/[+-]\d{4}$/.test(e)?e:`${e}Z`,l=new Date(s);if(Number.isNaN(l.getTime()))return String(e);const d=new Intl.DateTimeFormat("es-PE",{timeZone:g2,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(l),f=h=>d.find(g=>g.type===h)?.value||"";return`${f("day")}/${f("month")}/${f("year")} ${f("hour")}:${f("minute")}`}function x2(e){const a=(e||"").toUpperCase();return a==="COMPLETADO"?"badge bg-success":a==="ERROR"?"badge bg-danger":"badge bg-secondary"}function S2(e){const a=(e||"").toUpperCase();return a==="VIMA_LISTA"?"VIMA LISTA":a==="ACTUALIZACION_BASES"?"ACTUALIZACION BASES":e||"N/D"}function N2(){const[e,a]=y.useState([]),[s,l]=y.useState(0),[c,d]=y.useState(!1),[f,h]=y.useState(""),[g,p]=y.useState(0),[v,x]=y.useState(""),[N,q]=y.useState(""),[j,_]=y.useState(""),[C,B]=y.useState(""),[T,K]=y.useState(20),[D,R]=y.useState(1),[Z,U]=y.useState(()=>({q:"",dateFrom:"",dateTo:"",origin:""})),X=y.useMemo(()=>(D-1)*T,[D,T]);y.useEffect(()=>{let I=!1;return d(!0),h(""),a2({limit:T,offset:X,q:Z.q||void 0,dateFrom:Z.dateFrom||void 0,dateTo:Z.dateTo||void 0,origin:Z.origin||void 0}).then(ee=>{I||(a(Array.isArray(ee?.items)?ee.items:[]),l(typeof ee?.total=="number"?ee.total:0))}).catch(ee=>{if(I)return;const be=ee,je=be.response?.data?.detail||be.message||"No se pudo cargar historial.";h(je)}).finally(()=>{I||d(!1)}),()=>{I=!0}},[Z,X,T,g]);const ce=()=>{U({q:v.trim(),dateFrom:N.trim(),dateTo:j.trim(),origin:C.trim()}),R(1)},_e=()=>{x(""),q(""),_(""),B(""),U({q:"",dateFrom:"",dateTo:"",origin:""}),R(1),p(I=>I+1)},xe=()=>p(I=>I+1),me=async I=>{try{h("");const ee=await s2(I),be=ee.headers["content-disposition"],je=ee.headers["x-file-name"],w=y2(be)??je??"formato_ac.xlsx";b2(ee.data,w)}catch(ee){const be=ee;if(gt.isCancel(be))return;const je=be.response?.data?.detail||be.message||"No se pudo descargar.";h(je)}},Se=s===0?0:X+1,De=s===0?0:Math.min(X+e.length,s),Oe=D>1,M=X+e.length<s;return i.jsx("div",{className:"container-fluid",children:i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[i.jsx("div",{className:"d-flex flex-wrap align-items-center justify-content-between mB-10 gap-10",children:i.jsx("h4",{className:"c-grey-900 mB-0",children:"Historial A-C"})}),f?i.jsx("div",{className:"alert alert-danger",role:"alert",children:f}):null,i.jsxs("form",{className:"row g-2 align-items-end",onSubmit:I=>{I.preventDefault(),ce()},children:[i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:"Buscar"}),i.jsx("input",{className:"form-control form-control-sm",value:v,onChange:I=>x(I.target.value),onKeyDown:I=>{I.key==="Enter"&&ce()},placeholder:"Operacion o usuario..."})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Fecha desde"}),i.jsx("input",{type:"date",className:"form-control form-control-sm",value:N,onChange:I=>q(I.target.value)})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Fecha hasta"}),i.jsx("input",{type:"date",className:"form-control form-control-sm",value:j,onChange:I=>_(I.target.value)})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Origen"}),i.jsxs("select",{className:"form-select form-select-sm",value:C,onChange:I=>B(I.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"VIMA_LISTA",children:"VIMA LISTA"}),i.jsx("option",{value:"ACTUALIZACION_BASES",children:"ACTUALIZACION BASES"})]})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Mostrar"}),i.jsxs("select",{className:"form-select form-select-sm",value:T,onChange:I=>{const ee=Number(I.target.value);K(Number.isFinite(ee)?ee:20),R(1)},children:[i.jsx("option",{value:20,children:"20"}),i.jsx("option",{value:50,children:"50"}),i.jsx("option",{value:100,children:"100"})]})]}),i.jsxs("div",{className:"col-12 d-flex flex-wrap gap-10 mT-5",children:[i.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:c,children:"Buscar"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:_e,children:"Limpiar filtros"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:xe,children:"Recargar"})]})]}),i.jsxs("div",{className:"mT-15",children:[c?i.jsx("div",{className:"text-muted",children:"Cargando historial..."}):i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Operacion"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Fecha"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Usuario"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Origen"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Estado"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Acciones"})]})}),i.jsx("tbody",{children:e.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"text-muted small",children:"Sin registros."})}):e.map(I=>{const ee=I.created_by_full_name||I.created_by_username||"N/D";return i.jsxs("tr",{className:"small",children:[i.jsx("td",{style:{whiteSpace:"nowrap"},children:I.operation_id}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:v2(I.created_at)}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:ee}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:S2(I.origin)}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("span",{className:x2(I.status),children:I.status})}),i.jsx("td",{children:i.jsx("div",{className:"d-flex gap-1 flex-wrap justify-content-end",children:i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-success",onClick:()=>void me(I.id),children:"Descargar"})})})]},I.id)})})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mT-10",children:[i.jsxs("div",{className:"small text-muted",children:["Mostrando ",Se,"-",De," de ",s," registros"]}),i.jsxs("div",{className:"d-flex gap-10",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>R(I=>Math.max(1,I-1)),disabled:!Oe||c,children:"Anterior"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>R(I=>I+1),disabled:!M||c,children:"Siguiente"})]})]})]})]})})})})}function w2(){return i.jsx("div",{className:"container-fluid",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin de Bases Originales"}),i.jsx("p",{className:"text-muted mB-20",children:"Selecciona el modo de consolidacin. Cada modo genera un archivo consolidado para descarga."}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6 mB-15",children:i.jsx("div",{className:"card h-100",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h5",{className:"card-title",children:"Correlativo"}),i.jsx("p",{className:"card-text text-muted",children:"Ordena por la columna G (correlativo) al consolidar."}),i.jsx(Rc,{className:"btn btn-primary",to:"/oi/tools/consolidacion/correlativo",children:"Abrir"})]})})}),i.jsx("div",{className:"col-md-6 mB-15",children:i.jsx("div",{className:"card h-100",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h5",{className:"card-title",children:"No correlativo"}),i.jsx("p",{className:"card-text text-muted",children:"Mantiene el orden original de los archivos al consolidar."}),i.jsx(Rc,{className:"btn btn-primary",to:"/oi/tools/consolidacion/no-correlativo",children:"Abrir"})]})})})]})]})})}function j2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function _2(e,a){const s=URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=a,document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(s)}async function E2(e){if(!gt.isAxiosError(e))return String(e);const a=e,s=a.response?.data;if(s instanceof Blob)try{const l=await s.text(),c=JSON.parse(l);return String(c?.detail??l??a.message)}catch{return a.message}return String(s?.detail??a.message)}function A2(){const[e,a]=y.useState(null),[s,l]=y.useState(null),[c,d]=y.useState([]),[f,h]=y.useState(!1),[g,p]=y.useState(""),[v,x]=y.useState(null),[N,q]=y.useState([]),j=y.useRef(null),_=y.useRef(null),C=y.useMemo(()=>!!s&&c.length>0&&!f,[s,c,f]);y.useEffect(()=>{T0().then(a).catch(()=>a(null))},[]);function B(R){q(U=>[R,...U].slice(0,200));const Z=typeof R.percent=="number"?R.percent:typeof R.progress=="number"?R.progress:null;Z!=null&&Number.isFinite(Z)&&x(Math.max(0,Math.min(100,Z)))}function T(){j.current?.abort(),j.current=null}function K(){if(!f)return;const R=_.current;R&&z0(R).catch(()=>{}),B({type:"status",stage:"cancelled",message:"Cancelacin solicitada"}),T()}async function D(){if(p(""),q([]),x(0),!s){p("Selecciona el archivo maestro.");return}if(c.length===0){p("Selecciona al menos un archivo de tcnico.");return}const R=new FormData;R.append("master",s);for(const U of c)R.append("technicians",U);const Z=crypto.randomUUID();_.current=Z,R.append("operation_id",Z),j.current=new AbortController,h(!0);try{const U=j.current?.signal;uh(Z,B,U).catch(()=>{});const X=await D0(R,"correlativo",U),ce=X.headers["content-disposition"],_e=j2(ce)??"consolidado_correlativo.xlsx";_2(X.data,_e)}catch(U){if(gt.isAxiosError(U)&&U.code==="ERR_CANCELED"||gt.isAxiosError(U)&&(U.response?.headers?.["x-code"]??void 0)?.toUpperCase()==="CANCELLED")return;const X=await E2(U);B({type:"error",stage:"error",detail:X}),p(X)}finally{_.current=null,h(!1),T()}}return i.jsx("div",{className:"container-fluid",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-7",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin  Correlativo"}),i.jsx("p",{className:"text-muted mB-20",children:"Genera un consolidado ordenando por correlativo (columna G)."}),e&&i.jsxs("div",{className:"alert alert-info",role:"alert",children:["Lmite por archivo: ",i.jsxs("b",{children:[e.max_file_mb,"MB"]}),"  Mx. archivos tcnico:"," ",i.jsx("b",{children:e.max_tech_files})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12 mB-15",children:i.jsx(Pi,{label:"Archivo maestro (xlsx)",accept:".xlsx",file:s,onChange:l,disabled:f})}),i.jsx("div",{className:"col-12 mB-15",children:i.jsx(mu,{label:"Archivos de tcnicos (xlsx)",title:"Archivos de tcnicos",accept:".xlsx",files:c,setFiles:d,disabled:f})})]}),g&&i.jsx("div",{className:"alert alert-danger mT-10",role:"alert",children:g}),i.jsxs("div",{className:"d-flex gap-10 mT-20",children:[i.jsx("button",{className:"btn btn-primary mT-10",disabled:!C,onClick:D,children:f?"Procesando...":"Procesar y Descargar"}),i.jsx("button",{className:"btn btn-outline-danger mT-10",disabled:!f,onClick:K,children:"Cancelar"})]})]})}),i.jsx("div",{className:"col-md-5",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[i.jsx("span",{children:"Progreso"}),f?i.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),i.jsx("div",{className:"progress mB-15",style:{height:12},children:i.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${v??0}%`},"aria-valuenow":v??0,"aria-valuemin":0,"aria-valuemax":100})}),i.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:N.length===0?i.jsx("div",{className:"text-muted",children:"Sin eventos an."}):i.jsx("ul",{className:"list-unstyled mB-0",children:N.map((R,Z)=>i.jsxs("li",{className:"mB-10",children:[i.jsxs("div",{children:[i.jsx("b",{children:Tl(R.type)})," ",R.stage?i.jsxs("span",{className:"text-muted",children:["[",so(R.stage),"]"]}):null]}),i.jsx("div",{className:"text-muted",children:Il(R.message??R.detail??"")})]},Z))})})]})})]})})}function C2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function O2(e,a){const s=URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=a,document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(s)}async function R2(e){if(!gt.isAxiosError(e))return String(e);const a=e,s=a.response?.data;if(s instanceof Blob)try{const l=await s.text(),c=JSON.parse(l);return String(c?.detail??l??a.message)}catch{return a.message}return String(s?.detail??a.message)}function T2(){const[e,a]=y.useState(null),[s,l]=y.useState(null),[c,d]=y.useState([]),[f,h]=y.useState(!1),[g,p]=y.useState(""),[v,x]=y.useState(null),[N,q]=y.useState([]),j=y.useRef(null),_=y.useRef(null),C=y.useMemo(()=>!!s&&c.length>0&&!f,[s,c,f]);y.useEffect(()=>{T0().then(a).catch(()=>a(null))},[]);function B(R){q(U=>[R,...U].slice(0,200));const Z=typeof R.percent=="number"?R.percent:typeof R.progress=="number"?R.progress:null;Z!=null&&Number.isFinite(Z)&&x(Math.max(0,Math.min(100,Z)))}function T(){j.current?.abort(),j.current=null}function K(){if(!f)return;const R=_.current;R&&z0(R).catch(()=>{}),B({type:"status",stage:"cancelled",message:"Cancelacin solicitada"}),T()}async function D(){if(p(""),q([]),x(0),!s){p("Selecciona el archivo maestro.");return}if(c.length===0){p("Selecciona al menos un archivo de tcnico.");return}const R=new FormData;R.append("master",s);for(const U of c)R.append("technicians",U);const Z=crypto.randomUUID();_.current=Z,R.append("operation_id",Z),j.current=new AbortController,h(!0);try{const U=j.current?.signal;uh(Z,B,U).catch(()=>{});const X=await D0(R,"no-correlativo",U),ce=X.headers["content-disposition"],_e=C2(ce)??"consolidado_no_correlativo.xlsx";O2(X.data,_e)}catch(U){if(gt.isAxiosError(U)&&U.code==="ERR_CANCELED"||gt.isAxiosError(U)&&(U.response?.headers?.["x-code"]??void 0)?.toUpperCase()==="CANCELLED")return;const X=await R2(U);B({type:"error",stage:"error",detail:X}),p(X)}finally{_.current=null,h(!1),T()}}return i.jsx("div",{className:"container-fluid",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-7",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin  No correlativo"}),i.jsx("p",{className:"text-muted mB-20",children:"Genera un consolidado sin ordenar por correlativo (respeta el orden original)."}),e&&i.jsxs("div",{className:"alert alert-info",role:"alert",children:["Lmite por archivo: ",i.jsxs("b",{children:[e.max_file_mb,"MB"]}),"  Mx. archivos tcnico:"," ",i.jsx("b",{children:e.max_tech_files})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12 mB-15",children:i.jsx(Pi,{label:"Archivo maestro (xlsx)",accept:".xlsx",file:s,onChange:l,disabled:f})}),i.jsx("div",{className:"col-12 mB-15",children:i.jsx(mu,{label:"Archivos de tcnicos (xlsx)",title:"Archivos de tcnicos",accept:".xlsx",files:c,setFiles:d,disabled:f})})]}),g&&i.jsx("div",{className:"alert alert-danger mT-10",role:"alert",children:g}),i.jsxs("div",{className:"d-flex gap-10 mT-20",children:[i.jsx("button",{className:"btn btn-primary mT-10",disabled:!C,onClick:D,children:f?"Procesando...":"Procesar y Descargar"}),i.jsx("button",{className:"btn btn-outline-danger mT-10",disabled:!f,onClick:K,children:"Cancelar"})]})]})}),i.jsx("div",{className:"col-md-5",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[i.jsx("span",{children:"Progreso"}),f?i.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),i.jsx("div",{className:"progress mB-15",style:{height:12},children:i.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${v??0}%`},"aria-valuenow":v??0,"aria-valuemin":0,"aria-valuemax":100})}),i.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:N.length===0?i.jsx("div",{className:"text-muted",children:"Sin eventos an."}):i.jsx("ul",{className:"list-unstyled mB-0",children:N.map((R,Z)=>i.jsxs("li",{className:"mB-10",children:[i.jsxs("div",{children:[i.jsx("b",{children:Tl(R.type)})," ",R.stage?i.jsxs("span",{className:"text-muted",children:["[",so(R.stage),"]"]}):null]}),i.jsx("div",{className:"text-muted",children:Il(R.message??R.detail??"")})]},Z))})})]})})]})})}async function ki(e){if(!gt.isAxiosError(e))return String(e);const a=e,s=a.response?.data;if(s instanceof Blob)try{const l=await s.text(),c=JSON.parse(l);return String(c?.detail??l??a.message)}catch{return a.message}return String(s?.detail??a.message)}function D2(){const[e,a]=y.useState(null),[s,l]=y.useState(""),[c,d]=y.useState(""),[f,h]=y.useState(""),[g,p]=y.useState("ERROR FINAL"),[v,x]=y.useState(""),[N,q]=y.useState("same_password"),[j,_]=y.useState(""),[C,B]=y.useState([{cell:"A1",value:""}]),[T,K]=y.useState(""),[D,R]=y.useState("no_password"),[Z,U]=y.useState(""),[X,ce]=y.useState("ERROR FINAL"),[_e,xe]=y.useState(1),[me,Se]=y.useState(""),[De,Oe]=y.useState(""),[M,I]=y.useState(""),[ee,be]=y.useState(null),[je,w]=y.useState(""),[P,ie]=y.useState(null),[k,oe]=y.useState([]),[ge,Re]=y.useState(null),$e=y.useMemo(()=>c.trim().length>0,[c]);function de(fe){oe(Fe=>[fe,...Fe].slice(0,200))}function Ue(){w(""),oe([]),ie(0),Re(null)}async function Ie(){if(Ue(),!e){w("Selecciona un archivo para subir.");return}be("upload");try{de({type:"status",stage:"upload",message:"Subiendo archivo..."}),ie(30);const fe=new FormData;fe.append("file",e),s.trim()&&fe.append("suggested_name",s.trim());const Fe=await r2(fe);d(Fe.relative_path),Re(Fe),de({type:"complete",stage:"upload",message:"Archivo subido."}),ie(100)}catch(fe){const Fe=await ki(fe);w(Fe),de({type:"error",stage:"upload",detail:Fe})}finally{be(null)}}async function Ve(){if(Ue(),!$e){w("Ingresa o sube un archivo para obtener file_path.");return}be("inspect");try{de({type:"status",stage:"inspect",message:"Inspeccionando..."}),ie(50);const fe=await l2({file_path:c.trim(),open_password:f.trim()||null});Re(fe),de({type:"complete",stage:"inspect",message:"Inspeccin completada."}),ie(100)}catch(fe){const Fe=await ki(fe);w(Fe),de({type:"error",stage:"inspect",detail:Fe})}finally{be(null)}}async function dt(){if(Ue(),!$e){w("Ingresa o sube un archivo para obtener file_path.");return}if(!g.trim()){w("Ingresa el nombre de la hoja.");return}const fe=C.map(Fe=>({cell:Fe.cell.trim(),value:Fe.value})).filter(Fe=>Fe.cell);if(fe.length===0){w("Agrega al menos una edicin.");return}be("update");try{de({type:"status",stage:"update",message:"Aplicando ediciones..."}),ie(50);const Fe=await i2({file_path:c.trim(),edits:fe.map(Ee=>({sheet:g.trim(),cell:Ee.cell,value:Ee.value})),open_password:v.trim()||null,save_mode:N,new_password:N==="new_password"&&j.trim()||null});Re(Fe),de({type:"complete",stage:"update",message:"Actualizacin completada."}),ie(100)}catch(Fe){const Ee=await ki(Fe);w(Ee),de({type:"error",stage:"update",detail:Ee})}finally{be(null)}}async function Te(){if(Ue(),!$e){w("Ingresa o sube un archivo para obtener file_path.");return}if(!T.trim()){w("Ingresa la contrasea de apertura (open_password).");return}if(D==="new_password"&&!Z.trim()){w("Ingresa la nueva contrasea.");return}be("change-password");try{de({type:"status",stage:"change-password",message:"Cambiando contrasea..."}),ie(50);const fe=await o2({file_path:c.trim(),open_password:T.trim(),mode:D,new_password:D==="new_password"?Z.trim():null});Re(fe),de({type:"complete",stage:"change-password",message:"Cambio de contrasea completado."}),ie(100)}catch(fe){const Fe=await ki(fe);w(Fe),de({type:"error",stage:"change-password",detail:Fe})}finally{be(null)}}async function He(){if(Ue(),!$e){w("Ingresa o sube un archivo para obtener file_path.");return}let fe={};if(De.trim())try{fe=JSON.parse(De)}catch{w("type_rules debe ser JSON vlido.");return}const Fe=me.split(",").map(Ee=>Ee.trim()).filter(Boolean);be("validate");try{de({type:"status",stage:"validate",message:"Validando..."}),ie(50);const Ee=await c2({file_path:c.trim(),sheet:X.trim()||null,header_row:_e,required_columns:Fe,type_rules:fe,open_password:M.trim()||null});Re(Ee),de({type:"complete",stage:"validate",message:"Validacin completada."}),ie(100)}catch(Ee){const Je=await ki(Ee);w(Je),de({type:"error",stage:"validate",detail:Je})}finally{be(null)}}return i.jsx("div",{className:"container-fluid",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-7",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Herramientas Excel"}),i.jsx("p",{className:"text-muted mB-20",children:"Subir archivos, inspeccionar, editar celdas, cambiar contrasea y validar."}),i.jsx("div",{className:"card mB-15",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"card-title",children:"1) Subir archivo (recomendado)"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8 mB-10",children:i.jsx("input",{className:"form-control",type:"file",accept:".xlsx,.xlsm",disabled:!!ee,onChange:fe=>a(fe.target.files?.[0]??null)})}),i.jsx("div",{className:"col-md-4 mB-10",children:i.jsx("input",{className:"form-control",placeholder:"Nombre sugerido (opcional)",value:s,disabled:!!ee,onChange:fe=>l(fe.target.value)})})]}),i.jsx("button",{className:"btn btn-outline-primary",disabled:!!ee||!e,onClick:Ie,children:ee==="upload"?"Subiendo...":"Subir"})]})}),i.jsxs("div",{className:"mB-15",children:[i.jsx("label",{className:"form-label",children:"file_path"}),i.jsx("input",{className:"form-control",value:c,disabled:!!ee,onChange:fe=>d(fe.target.value),placeholder:"Ruta del archivo en el servidor (o la devuelta por Upload)"}),i.jsx("div",{className:"form-text",children:"Si subes el archivo, se llenar automticamente. Tambin puedes pegar una ruta local/red accesible por el servidor."})]}),i.jsx("div",{className:"card mB-15",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"card-title",children:"2) Inspect"}),i.jsxs("div",{className:"row align-items-end",children:[i.jsxs("div",{className:"col-md-8 mB-10",children:[i.jsx("label",{className:"form-label",children:"open_password (opcional)"}),i.jsx("input",{className:"form-control",type:"password",value:f,disabled:!!ee,onChange:fe=>h(fe.target.value)})]}),i.jsx("div",{className:"col-md-4 mB-10",children:i.jsx("button",{className:"btn btn-primary w-100",disabled:!!ee||!$e,onClick:Ve,children:ee==="inspect"?"Inspeccionando...":"Inspect"})})]})]})}),i.jsx("div",{className:"card mB-15",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"card-title",children:"3) Update (editar celdas)"}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"Hoja"}),i.jsx("input",{className:"form-control",value:g,disabled:!!ee,onChange:fe=>p(fe.target.value)})]}),i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"open_password (opcional)"}),i.jsx("input",{className:"form-control",type:"password",value:v,disabled:!!ee,onChange:fe=>x(fe.target.value)})]}),i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"save_mode"}),i.jsxs("select",{className:"form-select",value:N,disabled:!!ee,onChange:fe=>q(fe.target.value),children:[i.jsx("option",{value:"same_password",children:"same_password"}),i.jsx("option",{value:"no_password",children:"no_password"}),i.jsx("option",{value:"new_password",children:"new_password"})]})]}),i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"new_password"}),i.jsx("input",{className:"form-control",type:"password",value:j,disabled:!!ee||N!=="new_password",onChange:fe=>_(fe.target.value),placeholder:N==="new_password"?"Requerido":""})]})]}),i.jsxs("div",{className:"mT-10",children:[i.jsx("label",{className:"form-label",children:"Ediciones"}),C.map((fe,Fe)=>i.jsxs("div",{className:"row g-2 mB-10",children:[i.jsx("div",{className:"col-md-3",children:i.jsx("input",{className:"form-control",value:fe.cell,disabled:!!ee,onChange:Ee=>{const Je=C.slice();Je[Fe]={...Je[Fe],cell:Ee.target.value},B(Je)},placeholder:"Celda (A1)"})}),i.jsx("div",{className:"col-md-7",children:i.jsx("input",{className:"form-control",value:fe.value,disabled:!!ee,onChange:Ee=>{const Je=C.slice();Je[Fe]={...Je[Fe],value:Ee.target.value},B(Je)},placeholder:"Valor"})}),i.jsxs("div",{className:"col-md-2 d-flex gap-10",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary w-100",disabled:!!ee,onClick:()=>B(Ee=>[...Ee,{cell:"A1",value:""}]),children:"+"}),i.jsx("button",{type:"button",className:"btn btn-outline-danger w-100",disabled:!!ee||C.length===1,onClick:()=>B(Ee=>Ee.filter((Je,A)=>A!==Fe)),children:""})]})]},Fe))]}),i.jsx("button",{className:"btn btn-primary",disabled:!!ee||!$e,onClick:dt,children:ee==="update"?"Actualizando...":"Update"})]})}),i.jsx("div",{className:"card mB-15",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"card-title",children:"4) Change password"}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"open_password"}),i.jsx("input",{className:"form-control",type:"password",value:T,disabled:!!ee,onChange:fe=>K(fe.target.value)})]}),i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"mode"}),i.jsxs("select",{className:"form-select",value:D,disabled:!!ee,onChange:fe=>R(fe.target.value),children:[i.jsx("option",{value:"no_password",children:"no_password"}),i.jsx("option",{value:"new_password",children:"new_password"})]})]}),i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"new_password"}),i.jsx("input",{className:"form-control",type:"password",value:Z,disabled:!!ee||D!=="new_password",onChange:fe=>U(fe.target.value),placeholder:D==="new_password"?"Requerido":""})]}),i.jsx("div",{className:"col-md-6 mB-10 d-flex align-items-end",children:i.jsx("button",{className:"btn btn-primary w-100",disabled:!!ee||!$e,onClick:Te,children:ee==="change-password"?"Procesando...":"Change password"})})]})]})}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"card-title",children:"5) Validate"}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"sheet (opcional)"}),i.jsx("input",{className:"form-control",value:X,disabled:!!ee,onChange:fe=>ce(fe.target.value)})]}),i.jsxs("div",{className:"col-md-3 mB-10",children:[i.jsx("label",{className:"form-label",children:"header_row"}),i.jsx("input",{className:"form-control",type:"number",min:1,value:_e,disabled:!!ee,onChange:fe=>xe(Number(fe.target.value||1))})]}),i.jsxs("div",{className:"col-md-3 mB-10",children:[i.jsx("label",{className:"form-label",children:"open_password (opcional)"}),i.jsx("input",{className:"form-control",type:"password",value:M,disabled:!!ee,onChange:fe=>I(fe.target.value)})]}),i.jsxs("div",{className:"col-12 mB-10",children:[i.jsx("label",{className:"form-label",children:"required_columns (coma separada)"}),i.jsx("input",{className:"form-control",value:me,disabled:!!ee,onChange:fe=>Se(fe.target.value),placeholder:"ColA, ColB, ColC"})]}),i.jsxs("div",{className:"col-12 mB-10",children:[i.jsx("label",{className:"form-label",children:"type_rules (JSON, opcional)"}),i.jsx("textarea",{className:"form-control",rows:3,value:De,disabled:!!ee,onChange:fe=>Oe(fe.target.value),placeholder:'{"ColA":"int","ColB":"float"}'})]})]}),i.jsx("button",{className:"btn btn-primary",disabled:!!ee||!$e,onClick:He,children:ee==="validate"?"Validando...":"Validate"})]})}),je&&i.jsx("div",{className:"alert alert-danger mT-15",role:"alert",children:je})]})}),i.jsx("div",{className:"col-md-5",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[i.jsx("span",{children:"Progreso"}),ee?i.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),i.jsx("div",{className:"progress mB-15",style:{height:12},children:i.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${P??0}%`},"aria-valuenow":P??0,"aria-valuemin":0,"aria-valuemax":100})}),i.jsx("div",{style:{maxHeight:220,overflow:"auto"},children:k.length===0?i.jsx("div",{className:"text-muted",children:"Sin eventos an."}):i.jsx("ul",{className:"list-unstyled mB-0",children:k.map((fe,Fe)=>i.jsxs("li",{className:"mB-10",children:[i.jsxs("div",{children:[i.jsx("b",{children:fe.type})," ",fe.stage?i.jsxs("span",{className:"text-muted",children:["[",fe.stage,"]"]}):null]}),i.jsx("div",{className:"text-muted",children:fe.message??fe.detail??""})]},Fe))})}),i.jsx("hr",{className:"mY-15"}),i.jsx("h6",{className:"c-grey-900 mB-10",children:"Resultado"}),ge?i.jsx("pre",{className:"bg-light p-10",style:{maxHeight:360,overflow:"auto"},children:JSON.stringify(ge,null,2)}):i.jsx("div",{className:"text-muted",children:"Sin resultado an."})]})})]})})}function z2(){const e=aa(),a=Lr(),{toast:s}=Br(),l=Dn(),c=Rl(l?.role),d=Hi(),f=c&&!(d&&d>0),{data:h,isLoading:g,error:p}=zr({queryKey:["catalogs"],queryFn:Jm,enabled:f}),v=h?.bancos??[],[x,N]=y.useState(()=>d&&d>0?d:0),[q,j]=y.useState(!1),_=y.useMemo(()=>v.find(K=>K.id===x)?.name??null,[v,x]);y.useEffect(()=>{const T=e.state;T?.toast&&(s({kind:T.toast.kind??"info",title:T.toast.title,message:T.toast.message}),a(e.pathname,{replace:!0,state:{}}))},[e.pathname,e.state,a,s]),y.useEffect(()=>{f&&(x>0||v.length>0&&N(v[0].id))},[x,v,f]);const C=x>0&&!q,B=async()=>{if(C)try{j(!0);const T=await Wx(x),K=gm(T.userId,T.bancoId??x);if(K.target){a(K.target,{replace:!0});return}s({kind:"success",title:"Banco",message:_?`Banco seleccionado: ${_}`:"Banco seleccionado."})}catch(T){const K=T?.response?.data?.detail??T?.message??"No se pudo guardar el banco.";s({kind:"error",title:"Banco",message:String(K)})}finally{j(!1)}};return i.jsxs("div",{className:"vi-home",children:[i.jsx("div",{className:"vi-home__banner",style:{backgroundImage:'url("/medileser/banner.jpg")'},role:"img","aria-label":"Medileser"}),f&&i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:i.jsx("div",{className:"modal-dialog modal-dialog-centered",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("div",{className:"modal-header",children:i.jsx("h5",{className:"modal-title",children:"Seleccionar banco"})}),i.jsxs("div",{className:"modal-body",children:[i.jsx("p",{className:"text-muted mb-3",children:"Seleccione el banco de trabajo para continuar."}),i.jsx("label",{className:"form-label",htmlFor:"bankId",children:"Banco"}),i.jsx("select",{id:"bankId",className:"form-select",value:x||"",onChange:T=>N(Number(T.target.value)),disabled:g||q,children:v.map(T=>i.jsx("option",{value:T.id,children:T.name},T.id))}),p?i.jsx("div",{className:"alert alert-danger mt-3 mb-0",role:"alert",children:"No se pudieron cargar los bancos."}):null]}),i.jsx("div",{className:"modal-footer",children:i.jsx("button",{type:"button",className:"btn btn-primary",disabled:!C,onClick:B,children:q?"Guardando...":"Continuar"})})]})})})]})}const Ui=(...e)=>{};function M2(e){if(!e)return null;const a=/filename\*=UTF-8''([^;]+)|filename="([^"]+)"/i.exec(e),s=a?.[1]??a?.[2];if(!s)return null;try{return decodeURIComponent(s)}catch{return s}}function k2(e,a){const s=window.URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=a,document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(s)}async function U2(e,a){let s=null,l=!1;const c=new Promise(d=>{s=window.setTimeout(()=>{l=!0,d()},a)});try{await Promise.race([e,c])}catch{return!1}finally{s!=null&&window.clearTimeout(s)}return!l}function L2(){const[e,a]=y.useState([]),[s,l]=y.useState(""),[c,d]=y.useState([]),[f,h]=y.useState(0),[g,p]=y.useState("Listo para procesar"),[v,x]=y.useState(!1),[N,q]=y.useState(""),[j,_]=y.useState(!1),[C,B]=y.useState(null),[T,K]=y.useState(null),[D,R]=y.useState(!1);function Z(O){const Q=O?.series_duplicates_eliminated??O?.detail?.series_duplicates_eliminated??O?.series_duplcates_eliminated;return typeof Q=="number"?Q:null}const U={MISSING_HEADERS:"Faltan cabeceras requeridas",FILE_INVALID:"Archivo invlido",INVALID_OI_FILENAME:"Nombre de archivo invlido",EMPTY_FILE:"Archivo vaco"};function X(O){const Q=String(O??"").trim().toUpperCase();return Q?U[Q]??Q:""}function ce(O){if(!O)return"";let Q=Il(O);Q=Q.replace(/\bERROR\b/gi,"Error");for(const[G,se]of Object.entries(U))Q=Q.replace(new RegExp(`\\b${G}\\b`,"g"),se);return Q}function _e(O,Q){const G=X(O),se=ce(Q);return se?G&&!se.toLowerCase().includes(G.toLowerCase())?`${G}: ${se}`:se:G||"N/D"}function xe(O,Q,G){const se=String(G??"").trim();if(se)return se;const Ce=Number(O);if(!Number.isFinite(Ce)||Ce<=0)return"N/D";const Le=Number(Q);return Number.isFinite(Le)&&Le>0?`OI-${String(Ce).padStart(4,"0")}-${String(Le).padStart(4,"0")}`:`OI-${String(Ce).padStart(4,"0")}`}function me(O){const Q=O?.rows_total_read??O?.totals_input?.rows_read;return typeof Q=="number"?Q:null}const Se=y.useMemo(()=>(Array.isArray(T?.audit_by_oi)?T.audit_by_oi:[]).filter(Q=>Q?.status==="OK"&&String(Q?.source??"").toUpperCase()==="BASES").slice().sort((Q,G)=>{const se=Number(Q?.oi_year),Ce=Number(G?.oi_year),Le=Number.isFinite(se)&&se>0,ae=Number.isFinite(Ce)&&Ce>0;if(Le&&ae&&se!==Ce)return se-Ce;if(Le&&!ae)return-1;if(!Le&&ae)return 1;const Me=Number(Q?.oi_num),Pe=Number(G?.oi_num),rt=Number.isFinite(Me),Pt=Number.isFinite(Pe);if(rt&&Pt&&Me!==Pe)return Me-Pe;if(rt&&!Pt)return-1;if(!rt&&Pt)return 1;const Ne=String(Q?.oi_tag??Q?.oi??Q?.oi_num??"").toUpperCase(),We=String(G?.oi_tag??G?.oi??G?.oi_num??"").toUpperCase();return Ne.localeCompare(We)}),[T]),De=y.useMemo(()=>(Array.isArray(T?.files_rejected)?T.files_rejected:[]).slice().sort((Q,G)=>{const se=String(Q?.oi??Q?.filename??"").toUpperCase(),Ce=String(G?.oi??G?.filename??"").toUpperCase();return se.localeCompare(Ce)}),[T]),Oe=y.useMemo(()=>{const O=()=>({files_total:0,files_ok:0,files_error:0,rows_read:0,conformes:0,no_conformes:0,rows_ignored_invalid_estado:0}),Q=T?.by_source;if(Q&&typeof Q=="object")return Q;const G={BASES:O(),GASELAG:O()},se=Array.isArray(T?.audit_by_oi)?T.audit_by_oi:[];for(const Le of se){if(Le?.status!=="OK")continue;const Me=String(Le?.source??"").toUpperCase()==="GASELAG"?"GASELAG":"BASES";G[Me].files_ok+=1,G[Me].rows_read+=Number(Le?.rows_read??0)||0,G[Me].conformes+=Number(Le?.conformes??0)||0,G[Me].no_conformes+=Number(Le?.no_conformes??0)||0,G[Me].rows_ignored_invalid_estado+=Number(Le?.rows_ignored_invalid_estado??0)||0}const Ce=Array.isArray(T?.files_rejected)?T.files_rejected:[];for(const Le of Ce){const Me=String(Le?.source??"").toUpperCase()==="GASELAG"?"GASELAG":"BASES";G[Me].files_error+=1}for(const Le of["BASES","GASELAG"])G[Le].files_total=G[Le].files_ok+G[Le].files_error;return G},[T]),M=y.useRef(null),I=y.useRef(null),ee=y.useRef(null),be=y.useRef(!1),je=y.useRef(null),w=y.useRef(null),P=y.useRef(null),ie=y.useRef(!1),k=y.useRef(!1),oe=y.useRef(-1),ge=y.useRef(-1),Re=y.useRef(!1);function $e(){return je.current||(je.current=crypto.randomUUID()),je.current}function de(O){const Q=`${Tl(O.type)}  ${so(O.stage)}  ${ce(O.message??O.detail??"")}`;if(p(Q),d(G=>{const se=[O,...G];if(!Re.current&&O.stage==="cancelled"){Re.current=!0;const Ce=se.filter(Pe=>Pe.stage==="file_done"||Pe.stage==="file_error").length,Le=se.filter(Pe=>Pe.stage==="file_done").length,ae=se.filter(Pe=>Pe.stage==="file_error").length;return[{type:"status",stage:"cancelled",message:`Cancelacin aplicada. Archivos procesados hasta el momento: ${Ce} (OK: ${Le}, Rechazados: ${ae}). No se gener resultado final.`},...se]}return se}),O.type==="complete"){const G=O.result??null;K(G)}typeof O.progress=="number"&&h(Math.round(O.progress)),typeof O.percent=="number"&&h(Math.round(O.percent)),!be.current&&(O.type==="complete"||O.stage==="cancelled"||O.stage==="failed")&&(be.current=!0,O.type==="complete"?(_(!0),B(je.current)):(_(!1),B(null),je.current=null),x(!1),dt("terminal_event"),Te())}function Ue(O){return typeof O.cursor!="number"?!1:O.cursor<=ge.current?!0:(ge.current=O.cursor,O.cursor>oe.current&&(oe.current=O.cursor),!1)}function Ie(O){be.current||Ue(O)||de(O)}function Ve(O,Q){const G=new FormData;G.append("operation_id",O),G.append("source","AUTO"),s.trim()&&G.append("output_filename",s.trim());for(const se of Q)G.append("files",se);return G}function dt(O){I.current&&(ee.current=O,I.current.abort(),I.current=null)}function Te(O){k.current&&(k.current=!1,w.current!=null&&(window.clearTimeout(w.current),w.current=null),P.current?.abort(),P.current=null,ie.current=!1)}function He(O){k.current&&(w.current!=null&&window.clearTimeout(w.current),w.current=window.setTimeout(()=>{fe()},O))}async function fe(){if(!k.current||ie.current)return;const O=je.current;if(!O){Te();return}ie.current=!0;try{const Q=await ZT(O,oe.current,P.current?.signal);Ui("[LOG01] poll cursor =",oe.current,"->",Q.cursor_next),oe.current=Q.cursor_next;for(const G of Q.events)Ie(G);if(Q.done&&Q.events.length===0){Te("done");return}}catch(Q){Q?.name}finally{ie.current=!1,k.current&&He(350)}}function Fe(O){k.current||(k.current=!0,P.current=new AbortController,He(0))}function Ee(){M.current?.abort(),M.current=null}async function Je(){if(!v)return;const O=je.current;if(O)try{await PT(O)}catch(Q){const G=Q;gt.isCancel(G)||q(G.response?.data?.detail||G.message||"No se pudo cancelar la operacion")}Ee()}async function A(){q(""),d([]),K(null),h(0),p("Listo para procesar"),_(!1),B(null),ee.current=null,be.current=!1,Re.current=!1,oe.current=-1,ge.current=-1,Te();const O=[...e];if(!O.length){q("Debes seleccionar al menos 1 Excel.");return}je.current=null;const Q=$e();let G=null,se=null;const Ce=new Promise((Me,Pe)=>{G=Me,se=Pe});I.current=new AbortController,M.current=new AbortController,$T(Q,Me=>{if(Me.type==="hello"){G&&(G(),G=null);return}Ie(Me)},I.current.signal).then(()=>{be.current||Fe()}).catch(Me=>{Me?.name==="AbortError"?Ui("[LOG01] progress stream aborted (reason) =",ee.current):(se&&(se(Me),se=null),Fe())}),x(!0);try{await U2(Ce,1800)?Ui("[LOG01] hello received"):Fe("hello_timeout");const Pe=Ve(Q,O);Ui("[LOG01] operation_id(start) =",Q),await VT(Pe,M.current.signal)}catch(Me){const Pe=Me;if(gt.isCancel(Pe))return;const rt=Pe.response?.data?.detail||Pe.message||"Error inesperado";q(rt),x(!1),Ee(),dt("start_failed"),Te(),je.current=null}finally{Ee()}}async function V(){const O=C??je.current;if(!O){q("No hay resultado disponible.");return}try{q(""),Ui("[LOG01] operation_id(result) =",O);const Q=await GT(O),G=Q.headers["content-disposition"],se=Q.headers["x-file-name"],Ce=M2(G)??se??"BD_CONSOLIDADO.xlsx";k2(Q.data,Ce)}catch(Q){const G=Q;if(gt.isCancel(G))return;const se=G.response?.data?.detail||G.message||"No se pudo descargar.";q(se)}}return i.jsx("div",{className:"container-fluid",children:i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin Excel"}),N&&i.jsx("div",{className:"alert alert-danger",role:"alert",children:N}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-12 mB-15",children:[i.jsx(mu,{label:"Archivos Excel (Bases Comerciales / GASELAG) (xlsx)",title:"Archivos Excel",accept:".xlsx",files:e,setFiles:a,fullDropArea:!0,disabled:v}),i.jsx("div",{className:"small text-muted mT-5",children:"Nota: el sistema identifica el tipo de archivo por cabeceras/contenido (AUTO). No depende del nombre."})]}),i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label mB-0",children:"Nombre de salida (opcional)"}),i.jsx("input",{className:"form-control",value:s,onChange:O=>l(O.target.value),placeholder:"BD_<SERIE_INI>_AL_<SERIE_FIN>.xlsx",disabled:v})]}),i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label mB-0 invisible",children:"Acciones"}),i.jsxs("div",{className:"vi-log01-actions",children:[i.jsx("button",{className:"btn btn-primary btn-sm vi-log01-btn-primary",onClick:A,disabled:v,children:v?"Procesando...":"Consolidar"}),v?i.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>void Je(),children:"Cancelar"}):null,!v&&j?i.jsx(i.Fragment,{children:i.jsx("button",{className:"btn btn-outline-success btn-sm",onClick:()=>void V(),children:"Descargar Excel"})}):null]})]})]}),i.jsxs("div",{className:"mT-10",children:[i.jsxs("h6",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[i.jsx("span",{children:"Progreso"}),v?i.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),i.jsx("div",{className:"progress",children:i.jsxs("div",{className:"progress-bar",role:"progressbar",style:{width:`${f}%`},"aria-valuenow":f,"aria-valuemin":0,"aria-valuemax":100,children:[f,"%"]})}),i.jsx("div",{className:"mT-10 text-muted",children:g})]}),!v&&T?i.jsxs("div",{className:"mT-20",children:[i.jsx("h6",{className:"c-grey-900",children:"Reporte de auditora"}),i.jsx("div",{className:"bd p-10",children:i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("div",{className:"small text-muted",children:"Archivos"}),i.jsxs("div",{className:"small",children:["Total: ",i.jsx("strong",{children:T.files_total??"N/D"}),"  OK:"," ",i.jsx("strong",{children:T.files_ok??"N/D"}),"  Rechazados:"," ",i.jsx("strong",{children:T.files_error??"N/D"})]}),i.jsx("div",{className:"mT-10 small text-muted",children:"Totales por tipo (origen)"}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Tipo"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Archivos"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ledos"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ignorados"})]})}),i.jsx("tbody",{children:["BASES","GASELAG"].map(O=>{const Q=Oe?.[O]??{},G=Q?.files_total??Number(Q?.files_ok??0)+Number(Q?.files_error??0);return i.jsxs("tr",{className:"small",children:[i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:O})}),i.jsxs("td",{style:{whiteSpace:"nowrap"},children:[i.jsx("strong",{children:G??0})," ",i.jsxs("span",{className:"text-muted",children:["(OK: ",Q?.files_ok??0,"  Rech: ",Q?.files_error??0,")"]})]}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:Q?.rows_read??0})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:Q?.conformes??0})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:Q?.no_conformes??0})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:Q?.rows_ignored_invalid_estado??0})})]},O)})})]})}),i.jsx("div",{className:"mT-10 small text-muted",children:"No conformes por OI (origen)  BASES"}),Se.length>0?i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{style:{whiteSpace:"nowrap"},children:"OI"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ledos"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"})]})}),i.jsx("tbody",{children:Se.map((O,Q)=>i.jsxs("tr",{className:"small",children:[i.jsx("td",{style:{whiteSpace:"nowrap"},children:xe(O?.oi_num,O?.oi_year,O?.oi_tag??O?.oi)}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:O?.rows_read??0})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:O?.conformes??0})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:O?.no_conformes??0})})]},Q))})]})}):i.jsx("div",{className:"small text-muted",children:"N/D"}),Number(Oe?.GASELAG?.rows_read??0)>0?i.jsxs("div",{className:"mT-10 small",children:[i.jsx("span",{className:"text-muted",children:"GASELAG (origen):"})," ","Ledos: ",i.jsx("strong",{children:Oe.GASELAG.rows_read??0}),"  Conformes:"," ",i.jsx("strong",{children:Oe.GASELAG.conformes??0}),"  No conformes:"," ",i.jsx("strong",{children:Oe.GASELAG.no_conformes??0}),"  Ignorados(estado):"," ",i.jsx("strong",{children:Oe.GASELAG.rows_ignored_invalid_estado??0})]}):null,i.jsxs("div",{className:"col-12 mT-10 p-0",children:[i.jsx("div",{className:"small text-muted",children:"Totales (origen)"}),i.jsxs("div",{className:"small",children:["Registros ledos:"," ",i.jsx("strong",{children:T.totals_input?.rows_read??"N/D"}),"  Conformes:"," ",i.jsx("strong",{children:T.totals_input?.conformes??"N/D"}),"  No conformes:"," ",i.jsx("strong",{children:T.totals_input?.no_conformes??"N/D"})]})]})]}),i.jsxs("div",{className:"col-md-6 mT-10 mT-md-0",children:[De.length>0?i.jsxs("div",{className:"mT-15",children:[i.jsx("div",{className:"small text-muted",children:"Archivos rechazados"}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{style:{whiteSpace:"nowrap"},children:"OI / Archivo"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Motivo"})]})}),i.jsx("tbody",{children:De.map((O,Q)=>{const G=_e(O?.code,O?.detail),se=String(O?.source??"").toUpperCase();let Ce=O?.filename??"N/D";if(se==="BASES"){const Le=Number(O?.oi_num),ae=xe(Le,O?.oi_year,O?.oi_tag??O?.oi);ae!=="N/D"&&(Ce=`${ae} / ${Ce}`)}else se==="GASELAG"&&(Ce=`GASELAG / ${Ce}`);return i.jsxs("tr",{className:"small",children:[i.jsx("td",{style:{whiteSpace:"nowrap"},children:Ce}),i.jsx("td",{children:G})]},Q)})})]})})]}):null,i.jsx("div",{className:"small text-muted",children:"Resultado final (post-dedupe)"}),i.jsxs("div",{className:"small",children:["nicas (post-dedupe):"," ",i.jsx("strong",{children:T.series_total_dedup??"N/D"}),"  Conformes finales:"," ",i.jsx("strong",{children:T.series_conformes??"N/D"}),"  No conformes finales:"," ",i.jsx("strong",{children:T.series_no_conformes_final??"N/D"})]}),i.jsx("div",{className:"mT-10",children:i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>R(O=>!O),children:D?"Ocultar detalle tcnico":"Ver detalle tcnico"})}),D?i.jsxs("div",{className:"mT-10",children:[i.jsx("div",{className:"small text-muted",children:"Detalle tcnico (soporte)"}),i.jsxs("div",{className:"small",children:["Registros ledos (total):"," ",i.jsx("strong",{children:me(T)??"N/D"})," "," Duplicados eliminados:"," ",i.jsx("strong",{children:Z(T)??"N/D"})," "," nicas = Ledos  Duplicados:"," ",i.jsx("strong",{children:(()=>{const O=me(T),Q=Z(T);if(typeof O=="number"&&typeof Q=="number")return O-Q;const G=T.series_total_dedup;return typeof G=="number"?G:"N/D"})()})]})]}):null]})]})})]}):null,c.length>0&&i.jsxs("div",{className:"mT-20",children:[i.jsx("h6",{className:"c-grey-900",children:"Eventos"}),i.jsx("div",{className:"bd p-10",style:{maxHeight:240,overflow:"auto"},children:c.map((O,Q)=>{const G=String(O.message??""),se=String(O.code??""),Ce=String(O.detail??""),Le=ce(G||Ce||""),ae=Le.toLowerCase(),Me=X(se),Pe=ce(Ce),rt=[];Me&&!ae.includes(Me.toLowerCase())&&rt.push(Me),Pe&&!ae.includes(Pe.toLowerCase())&&rt.push(Pe);const Pt=rt.join("  ");return i.jsxs("div",{className:"small",children:[Tl(O.type),"  ",Le,Pt?i.jsxs("span",{className:"text-muted",children:[" (",Pt,")"]}):null]},Q)})})]})]})})})})}const B2="America/Lima";function q2(e){if(!e)return null;const a=/filename\*=UTF-8''([^;]+)|filename="([^"]+)"/i.exec(e),s=a?.[1]??a?.[2];if(!s)return null;try{return decodeURIComponent(s)}catch{return s}}function I2(e,a){const s=window.URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=a,document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(s)}function $2(e){if(!e)return"N/D";const s=/[zZ]$/.test(e)||/[+-]\d{2}:\d{2}$/.test(e)||/[+-]\d{4}$/.test(e)?e:`${e}Z`,l=new Date(s);if(Number.isNaN(l.getTime()))return String(e);const d=new Intl.DateTimeFormat("es-PE",{timeZone:B2,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(l),f=h=>d.find(g=>g.type===h)?.value||"";return`${f("day")}/${f("month")}/${f("year")} ${f("hour")}:${f("minute")}`}function Kf(e,a){const s=e?.[a];return typeof s=="number"?String(s):"N/D"}function _v(e,a){const s=e?.[a];return typeof s=="string"&&s.trim()?s.trim():"N/D"}function F2(e){const a=(e||"").toUpperCase();return a==="COMPLETADO"?"badge bg-success":a==="ERROR"?"badge bg-danger":a==="CANCELADO"?"badge bg-warning text-dark":"badge bg-secondary"}function H2(){const e=Lr(),a=Dn(),s=Ua(a?.role,a?.username),l=s==="admin"||s==="administrator",[c,d]=y.useState([]),[f,h]=y.useState(0),[g,p]=y.useState(!1),[v,x]=y.useState(""),[N,q]=y.useState(0),[j,_]=y.useState(""),[C,B]=y.useState(""),[T,K]=y.useState(""),[D,R]=y.useState(""),[Z,U]=y.useState(""),[X,ce]=y.useState(20),[_e,xe]=y.useState(1),[me,Se]=y.useState(()=>({q:"",dateFrom:"",dateTo:"",source:"",status:""})),De=y.useMemo(()=>(_e-1)*X,[_e,X]);y.useEffect(()=>{let k=!1;return p(!0),x(""),Am({limit:X,offset:De,include_deleted:!1,q:me.q||void 0,dateFrom:me.dateFrom||void 0,dateTo:me.dateTo||void 0,source:me.source||void 0,status:me.status||void 0}).then(oe=>{k||(d(Array.isArray(oe?.items)?oe.items:[]),h(typeof oe?.total=="number"?oe.total:0))}).catch(oe=>{if(k)return;const ge=oe,Re=ge.response?.data?.detail||ge.message||"No se pudo cargar historial.";x(Re)}).finally(()=>{k||p(!1)}),()=>{k=!0}},[me,De,X,N]);const Oe=()=>{Se({q:j.trim(),dateFrom:C.trim(),dateTo:T.trim(),source:D.trim(),status:Z.trim()}),xe(1)},M=()=>{_(""),B(""),K(""),R(""),U(""),Se({q:"",dateFrom:"",dateTo:"",source:"",status:""}),xe(1),q(k=>k+1)},I=()=>q(k=>k+1),ee=async(k,oe)=>{try{x("");const ge=await QT(k,oe),Re=ge.headers["content-disposition"],$e=ge.headers["x-file-name"],de=q2(Re)??$e??`${oe}.bin`;I2(ge.data,de)}catch(ge){const Re=ge;if(gt.isCancel(Re))return;const $e=Re.response?.data?.detail||Re.message||"No se pudo descargar.";x($e)}},be=async k=>{if(l&&window.confirm("Eliminar la corrida del historial?"))try{x(""),await YT(k),I()}catch(oe){const ge=oe;if(gt.isCancel(ge))return;const Re=ge.response?.data?.detail||ge.message||"No se pudo eliminar.";x(Re)}},je=f===0?0:De+1,w=f===0?0:Math.min(De+c.length,f),P=_e>1,ie=De+c.length<f;return i.jsx("div",{className:"container-fluid",children:i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[i.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between mB-10 gap-10",children:[i.jsx("h4",{className:"c-grey-900 mB-0",children:"Historial de consolidaciones LOG-01"}),i.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>e("/logistica/log01/excel"),children:"Nueva consolidacin"})]}),v?i.jsx("div",{className:"alert alert-danger",role:"alert",children:v}):null,i.jsxs("form",{className:"row g-2 align-items-end",onSubmit:k=>{k.preventDefault(),Oe()},children:[i.jsxs("div",{className:"col-md-3",children:[i.jsx("label",{className:"form-label",children:"Buscar"}),i.jsx("input",{className:"form-control form-control-sm",value:j,onChange:k=>_(k.target.value),onKeyDown:k=>{k.key==="Enter"&&Oe()},placeholder:"Usuario, serie inicial, serie final..."})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Fecha desde"}),i.jsx("input",{type:"date",className:"form-control form-control-sm",value:C,onChange:k=>B(k.target.value)})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Fecha hasta"}),i.jsx("input",{type:"date",className:"form-control form-control-sm",value:T,onChange:k=>K(k.target.value)})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Origen"}),i.jsxs("select",{className:"form-select form-select-sm",value:D,onChange:k=>R(k.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"AUTO",children:"AUTO"}),i.jsx("option",{value:"BASES",children:"BASES"}),i.jsx("option",{value:"GASELAG",children:"GASELAG"})]})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Estado"}),i.jsxs("select",{className:"form-select form-select-sm",value:Z,onChange:k=>U(k.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"COMPLETADO",children:"COMPLETADO"}),i.jsx("option",{value:"CANCELADO",children:"CANCELADO"}),i.jsx("option",{value:"ERROR",children:"ERROR"})]})]}),i.jsxs("div",{className:"col-md-1",children:[i.jsx("label",{className:"form-label",children:"Mostrar"}),i.jsxs("select",{className:"form-select form-select-sm",value:X,onChange:k=>{const oe=Number(k.target.value);ce(Number.isFinite(oe)?oe:20),xe(1)},children:[i.jsx("option",{value:10,children:"10"}),i.jsx("option",{value:20,children:"20"}),i.jsx("option",{value:50,children:"50"}),i.jsx("option",{value:100,children:"100"})]})]}),i.jsxs("div",{className:"col-12 d-flex flex-wrap gap-10 mT-5",children:[i.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:g,children:"Buscar"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:M,children:"Limpiar filtros"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:I,children:"Recargar"})]})]}),i.jsxs("div",{className:"mT-15",children:[g?i.jsx("div",{className:"text-muted",children:"Cargando historial..."}):i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Fecha"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Usuario"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Estado"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:" Serie inic"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:" Serie fin "}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"nicas"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Acciones"})]})}),i.jsx("tbody",{children:c.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"text-muted small",children:"Sin registros."})}):c.map(k=>{const oe=k.summary_json,ge=_v(oe,"serie_ini"),Re=_v(oe,"serie_fin"),$e=Kf(oe,"series_total_dedup"),de=Kf(oe,"series_conformes"),Ue=Kf(oe,"series_no_conformes_final"),Ie=k.created_by_full_name||k.created_by_username||"N/D";return i.jsxs("tr",{className:"small",children:[i.jsx("td",{style:{whiteSpace:"nowrap"},children:$2(k.created_at)}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:Ie}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("span",{className:F2(k.status),children:k.status})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:ge}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:Re}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:$e})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:de})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:Ue})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex gap-1 flex-wrap justify-content-end",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-success",onClick:()=>void ee(k.id,"excel"),children:"Excel"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void ee(k.id,"no-conforme"),children:"No conforme"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void ee(k.id,"manifiesto"),children:"Manifiesto"}),l?i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>void be(k.id),children:"Eliminar"}):null]})})]},k.id)})})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mT-10",children:[i.jsxs("div",{className:"small text-muted",children:["Mostrando ",je,"-",w," de ",f]}),i.jsxs("div",{className:"d-flex gap-10",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>xe(k=>Math.max(1,k-1)),disabled:!P||g,children:"Anterior"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>xe(k=>k+1),disabled:!ie||g,children:"Siguiente"})]})]})]})]})})})})}function wl(e){return e===!0?"badge bg-success":e===!1?"badge bg-danger":"badge bg-secondary"}const Xf="medileser_log02_rutas_v1",V2="America/Lima",tr=typeof window<"u"&&new URLSearchParams(window.location.search).get("debugProgress")==="1",Z2="[log02-copy-progress]",Ev=2e3,G2=500;function er(...e){tr&&console.log(Z2,...e)}function Av(e){if(!e)return"N/D";const s=/[zZ]$/.test(e)||/[+-]\d{2}:\d{2}$/.test(e)||/[+-]\d{4}$/.test(e)?e:`${e}Z`,l=new Date(s);if(Number.isNaN(l.getTime()))return String(e);const d=new Intl.DateTimeFormat("es-PE",{timeZone:V2,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(l),f=h=>d.find(g=>g.type===h)?.value||"";return`${f("day")}/${f("month")}/${f("year")} ${f("hour")}:${f("minute")}`}function Cv(e){const a=e,s=String(a?.name||""),l=String(a?.message||a||"");return s==="AbortError"||/aborted/i.test(l)||/abort/i.test(l)}function P2(){const[e,a]=y.useState([""]),[s,l]=y.useState(""),[c,d]=y.useState(!1),[f,h]=y.useState(""),[g,p]=y.useState(null),[v,x]=y.useState(!1),[N,q]=y.useState(!1),[j,_]=y.useState(!1),[C,B]=y.useState(""),[T,K]=y.useState([]),[D,R]=y.useState(null),[Z,U]=y.useState(""),[X,ce]=y.useState(""),[_e,xe]=y.useState(""),[me,Se]=y.useState(""),[De,Oe]=y.useState("COMPLETADO"),[M,I]=y.useState(!1),[ee,be]=y.useState(""),[je,w]=y.useState(0),[P,ie]=y.useState(""),[k,oe]=y.useState(""),[ge,Re]=y.useState(""),[$e,de]=y.useState([]),[Ue,Ie]=y.useState([]),[Ve,dt]=y.useState(null),Te=y.useRef(null),He=y.useRef(!1),fe=y.useRef(!1),Fe=y.useRef(null),Ee=y.useRef(null),Je=y.useRef(!1),A=y.useRef(!1),V=y.useRef(-1),O=y.useRef(-1),Q=y.useRef(""),G=y.useRef(null),se=y.useRef(!1),Ce=y.useRef(""),Le=y.useRef(0),ae=y.useRef(!0),Me=y.useRef(""),[Pe,rt]=y.useState(!1),[Pt,Ne]=y.useState("origen"),[We,qt]=y.useState(null),[jt,An]=y.useState([]),[qn,_a]=y.useState(""),[dn,lt]=y.useState(""),[sa,Mn]=y.useState([]),[Jn,In]=y.useState(!1),[$n,Y]=y.useState("");y.useEffect(()=>{try{const $=localStorage.getItem(Xf);if(!$)return;const he=JSON.parse($),ze=Array.isArray(he.origenes)?he.origenes:[],Be=typeof he?.destino=="string"?he.destino:"",nt=typeof he?.run_id=="number"?he.run_id:null;ze.length&&a(ze),Be&&l(Be),nt!==null&&R({id:nt})}catch{}},[]),y.useEffect(()=>{try{const $={origenes:e,destino:s,run_id:D?.id??null};localStorage.setItem(Xf,JSON.stringify($))}catch{}},[e,s,D?.id]),y.useEffect(()=>(ae.current=!0,()=>{ae.current=!1,Me.current="",tn("unmount"),Un("unmount")}),[]);function te(){a([""]),l(""),p(null),h(""),x(!1),R(null),dt(null),de([]),Ie([]),oe(""),ie(""),w(0),Re(""),be("");try{localStorage.removeItem(Xf)}catch{}}function Ae(){a($=>{const he=new Set,ze=[];for(const Be of $){const nt=(Be||"").trim();if(!nt)continue;const On=nt.toLowerCase();he.has(On)||(he.add(On),ze.push(nt))}return ze.length?ze:[""]})}function Ze(){x(!0),qt(null),mn("origen")}function st($){x(!0),qt($),mn("origen")}function ft(){x(!0),qt(null),mn("destino")}async function Ke($=5){B(""),_(!0);try{const he=await Am({limit:$,offset:0,include_deleted:!1,status:"COMPLETADO"}),ze=Array.isArray(he?.items)?he.items:[];if(K(ze),!D?.id&&ze.length)R(ze[0]);else if(D?.id&&ze.length){const Be=ze.find(nt=>nt.id===D.id);Be&&R(Be)}}catch(he){const ze=he,Be=ze.response?.data?.detail||ze.message||"No se pudo cargar las corridas.";B(Be),K([])}finally{_(!1)}}async function Qt(){B(""),_(!0);try{const $=await Am({limit:20,offset:0,include_deleted:!1,q:Z.trim()||void 0,dateFrom:X.trim()||void 0,dateTo:_e.trim()||void 0,source:me.trim()||void 0,status:De.trim()||void 0}),he=Array.isArray($?.items)?$.items:[];K(he)}catch($){const he=$,ze=he.response?.data?.detail||he.message||"No se pudo cargar las corridas.";B(ze),K([])}finally{_(!1)}}function kt(){q(!0),Ke(5)}function Rt($){R($),q(!1)}const Wt=y.useMemo(()=>e.map($=>($??"").trim()),[e]),_t=y.useMemo(()=>Wt.filter($=>$),[Wt]),at=y.useMemo(()=>(s??"").trim(),[s]),yt=y.useMemo(()=>_t.length>0&&!!at,[_t.length,at]);function It($,he){a(ze=>{const Be=ze.slice();return Be[$]=he,Be})}function fn($){a(he=>{if(he.length<=1)return[""];const ze=he.slice();return ze.splice($,1),ze})}async function mn($){Ne($),Y(""),rt(!0);try{const ze=(await KT()).roots||[];An(ze);const Be=ze[0]||"";_a(Be),lt(Be),Be?await en(Be):(Mn([]),Y("No hay rutas raz configuradas para el explorador. Configure VI_LOG02_UNC_ROOTS en el servidor."))}catch(he){const ze=he,Be=ze.response?.data?.detail||ze.message||"No se pudo cargar las rutas raz.";Y(Be),Mn([])}}async function en($){if(Y(""),!$){Mn([]);return}try{In(!0);const he=await XT($);lt(he.path),Mn(he.folders||[])}catch(he){const ze=he,Be=ze.response?.data?.detail||ze.message||"No se pudo listar la carpeta.";Y(Be),Mn([])}finally{In(!1)}}function hn(){const $=(dn||"").replace(/[\\\/]+$/,""),he=$.lastIndexOf("\\");if(he<=0)return;const ze=$.slice(0,he);en(ze)}function Ft(){dn&&(Pt==="destino"?l(dn):a($=>{const he=dn.trim();if(!he)return $;const ze=$.slice();return We!==null&&We>=0&&We<ze.length?(ze[We]=he,ze):ze.map(nt=>(nt||"").trim().toLowerCase()).includes(he.toLowerCase())?ze:ze.length===1&&!(ze[0]||"").trim()?[he]:[...ze,he]}),qt(null),rt(!1))}async function Fn(){h(""),p(null),x(!0);const $=at,he=_t;if(!he.length){h("Debes ingresar al menos una ruta de origen.");return}if(!$){h("Debes ingresar una ruta de destino.");return}try{d(!0);const ze=await JT({rutas_origen:he,ruta_destino:$});p(ze),ze.ok||h("Validacin incompleta: revisa los detalles de permisos y existencia.")}catch(ze){const Be=ze;if(gt.isCancel(Be))return;const nt=Be.response?.data?.detail||Be.message||"No se pudo validar las rutas.";h(nt)}finally{d(!1)}}const rn=y.useMemo(()=>!!g?.ok&&!!D?.id&&!M,[g?.ok,D?.id,M]);function vn($){const he=$?.cursor;if(typeof he=="number"&&Number.isFinite(he))return he;if(typeof he=="string"){const ze=Number(he);if(Number.isFinite(ze))return ze}return null}function Pn($){return $==null?!1:$<=O.current?!0:(O.current=$,$>V.current&&(V.current=$),!1)}function kn($){const he=$?.progress??$?.percent,ze=typeof he=="number"?he:typeof he=="string"?Number(he):NaN;if(Number.isFinite(ze)){const Be=Math.max(0,Math.min(100,ze));w(nt=>(tr&&nt!==Be&&er("setCopyProgress",{prev:nt,next:Be}),Be))}}function Tt($){const he=String($?.type||"");if(kn($),he==="status"||he==="progress"){const ze=$?.stage?String($.stage):he;if(ze&&ie(ze),typeof $?.message=="string"&&$.message&&oe($.message),ze){const Be=ze.toLowerCase();(Be==="cancelado"||Be==="cancelled")&&(He.current=!0,Me.current="",I(!1),tn("cancelled"),Un("cancelled"))}return}if(he==="oi"){typeof $?.oi=="string"&&Re($.oi);return}if(he==="oi_warn"){const ze=String($?.oi||""),Be=String($?.message||""),nt=$?.code?String($.code):void 0;ze&&Be&&de(On=>[...On,{oi:ze,code:nt,message:Be}]);return}if(he==="oi_error"||he==="file_error"){const ze=$?.oi?String($.oi):void 0,Be=$?.file?String($.file):void 0,nt=String($?.message||"Error");Ie(On=>[...On,{oi:ze,file:Be,message:nt}]);return}if(he==="error"){const ze=String($?.message||"Fallo en el proceso.");Ie(Be=>[...Be,{message:ze}]),oe(ze),ie("error"),I(!1),tn("error_event"),Un("error_event");return}if(he==="complete"){fe.current=!0,typeof $?.message=="string"&&oe($.message),ie("completado"),w(100),dt($?.audit??null),I(!1),tn("complete"),Un("complete");return}}function is($,he="stream"){const ze=vn($),Be=String($?.type||""),nt=$?.stage?String($.stage):"";tr&&er("event",{source:he,type:Be,stage:nt,progress:$?.progress,percent:$?.percent,cursor:ze});const On=O.current;if(Pn(ze)){tr&&er("skip_event",{source:he,cursor:ze,lastCursor:On});return}Tt($)}function tn($){if(tr&&er("stop_polling",{reason:$,operationId:Q.current}),!!A.current){A.current=!1,Fe.current!=null&&(window.clearTimeout(Fe.current),Fe.current=null);try{Ee.current?.abort()}catch{}Ee.current=null,Je.current=!1,Q.current=""}}function pn(){G.current!=null&&(window.clearTimeout(G.current),G.current=null)}function Cn($){tr&&er("stream_closed",{reason:$,operationId:Ce.current}),se.current=!1,Ce.current="",pn()}function Un($){tr&&er("stop_stream",{reason:$,operationId:Ce.current}),Cn($);try{Te.current?.abort()}catch{}Te.current=null}function Xa($){se.current&&(pn(),G.current=window.setTimeout(()=>{if(!se.current)return;const he=Date.now()-Le.current;if(he>=Ev){er("stream_silent_fallback",{idleMs:he,operationId:$}),Un("stream_silent"),!fe.current&&!He.current&&Wn($,"stream_silent");return}Xa($)},Ev))}function $a($){Le.current=Date.now(),se.current&&Xa($)}function Ja($){A.current&&(Fe.current!=null&&window.clearTimeout(Fe.current),Fe.current=window.setTimeout(()=>{nn()},$))}async function nn(){if(!A.current||Je.current)return;const $=Q.current;if(!$){tn("no_operation_id");return}if(Me.current!==$){tn("operation_mismatch");return}Je.current=!0;try{const he=await t2($,V.current,Ee.current?.signal);V.current=he.cursor_next;for(const ze of he.events||[])is(ze,"poll");if(he.done&&(!he.events||he.events.length===0)){tn("done");return}}catch(he){if(He.current||fe.current)return;if(he?.name!=="AbortError"){const Be=he,nt=Be.response?.data?.detail||Be.message||"No se pudo leer el progreso.";Ie(On=>[...On,{message:nt}]),ie("error"),oe(nt),I(!1),tn("poll_error")}}finally{Je.current=!1,A.current&&Ja(G2)}}function Wn($,he){Me.current===$&&(A.current||(A.current=!0,Q.current=$,Ee.current=new AbortController,V.current=Math.max(V.current,O.current),tr&&er("start_polling",{operationId:$,reason:he}),Ja(0)))}async function Qn(){if(h(""),!g?.ok){h("Debes validar rutas correctamente antes de iniciar el copiado.");return}if(!D?.id){h("Debes seleccionar una corrida de LOG-01 (Historial) para usar su manifiesto.");return}const $=_t,he=at;if(!$.length||!he){h("Completa orgenes y destino antes de iniciar.");return}He.current=!1,fe.current=!1,Ie([]),de([]),dt(null),ie("inicio"),oe("Iniciando copiado..."),w(0),Re(""),be(""),Un("reset"),tn("reset"),Me.current="",V.current=-1,O.current=-1,I(!0);try{const Be=(await WT({run_id:D.id,rutas_origen:$,ruta_destino:he})).operation_id;be(Be),Me.current=Be;const nt=new AbortController;Te.current=nt,se.current=!0,Ce.current=Be,Le.current=Date.now(),Xa(Be),e2(Be,Wa=>{ae.current&&Me.current===Be&&($a(Be),is(Wa,"stream"))},nt.signal).then(()=>{Me.current===Be&&(Cn("stream_closed"),!fe.current&&!He.current&&Wn(Be,"stream_closed"))}).catch(Wa=>{if(Me.current===Be){if(Cv(Wa)||He.current||fe.current){Cn("stream_aborted");return}Cn("stream_error"),Wn(Be,"stream_error")}})}catch(ze){if(He.current||fe.current||Cv(ze))return;const Be=ze,nt=Be.response?.data?.detail||Be.message||"No se pudo iniciar/leer el progreso.";Ie(On=>[...On,{message:nt}]),ie("error"),oe(nt),Un("start_error"),tn("start_error"),I(!1)}}async function ln(){if(ee){He.current=!0,Me.current="";try{await n2(ee)}catch{}try{Te.current?.abort()}catch{}Un("user_cancel"),tn("user_cancel"),I(!1),ie("cancelado"),oe("Cancelado por el usuario.")}}const Fa=y.useMemo(()=>{if(!g)return null;const $=(g.origenes||[]).filter(Be=>Be.existe&&Be.lectura).length,he=(g.origenes||[]).length,ze=!!(g.destino?.existe&&g.destino?.es_directorio&&g.destino?.lectura&&g.destino?.escritura);return{okOrigenes:$,totalOrigenes:he,okDestino:ze}},[g]);async function $r(){if(!g)return;const $=[];$.push("LOG-02 - Resultado de validacin"),$.push("");for(const Be of g.origenes||[])$.push(`ORIGEN | ${Be.ruta} | existe=${Be.existe?"SI":"NO"} | lectura=${Be.lectura?"SI":"NO"} | detalle=${Be.detalle||""}`);const he=g.destino;$.push(`DESTINO | ${he?.ruta||""} | existe=${he?.existe?"SI":"NO"} | lectura=${he?.lectura?"SI":"NO"} | escritura=${he?.escritura?"SI":"NO"} | detalle=${he?.detalle||""}`);const ze=$.join(`
`);try{await navigator.clipboard.writeText(ze)}catch{try{const Be=document.createElement("textarea");Be.value=ze,document.body.appendChild(Be),Be.select(),document.execCommand("copy"),document.body.removeChild(Be)}catch{}}}return i.jsxs("div",{className:"container-fluid",children:[i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Filtrado de certificados PDF (LOG-02)"}),i.jsxs("div",{className:"text-muted small",children:["Este mdulo se orienta a ",i.jsx("strong",{children:"copiar"})," y ",i.jsx("strong",{children:"filtrar"})," certificados PDF desde una",i.jsx("strong",{children:" carpeta compartida"})," (no ZIP).",i.jsx("br",{}),"Configura las rutas UNC y valida accesos antes de iniciar el filtrado."]}),f?i.jsx("div",{className:"alert alert-danger mT-15",role:"alert",children:f}):null,i.jsxs("div",{className:"mT-15",children:[i.jsx("h6",{className:"c-grey-900 mB-10",children:"Rutas UNC"}),i.jsxs("div",{className:"row g-2",children:[i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:"Rutas origen (UNC)  lectura"}),e.map(($,he)=>i.jsxs("div",{className:"d-flex gap-10 mB-10",children:[i.jsx("input",{className:"form-control form-control-sm"+(v&&!Wt[he]?" is-invalid":""),value:$,onChange:ze=>It(he,ze.target.value),placeholder:"\\\\\\\\SERVIDOR\\\\Compartido\\\\Certificados",disabled:c}),v&&!Wt[he]?i.jsx("div",{className:"small text-danger mT-5",children:"Requerido"}):null,i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>st(he),disabled:c,title:"Elegir carpeta",children:($||"").trim()?"Editar":"Agregar"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>fn(he),disabled:c,title:"Quitar ruta",style:{width:52,textAlign:"center"},children:""})]},he)),i.jsxs("div",{className:"d-flex gap-10",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:Ze,disabled:c,title:"Agregar origen",children:"Agregar origen"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:Ae,disabled:c,title:"Quitar duplicados (solo UI)",children:"Quitar duplicados"})]}),i.jsxs("div",{className:"small text-muted",children:["Nota: estas rutas deben ser accesibles ",i.jsx("strong",{children:"desde el servidor"})," donde corre el backend."]})]}),i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:"Ruta destino (UNC)  lectura y escritura"}),i.jsxs("div",{className:"d-flex gap-10 mB-10",children:[i.jsx("input",{className:"form-control form-control-sm "+(v&&!at?"is-invalid":""),value:s,onChange:$=>l($.target.value),placeholder:"\\\\\\\\SERVIDOR\\\\Compartido\\\\Salida_LOG02",disabled:c}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:ft,disabled:c,title:"Editar carpeta",children:at?"Editar":"Agregar"}),"                  "]}),v&&!at?i.jsx("div",{className:"small text-danger mT-5",children:"Destino requerido."}):null,i.jsxs("div",{className:"mT-5",children:[i.jsx("div",{className:"small text-muted mB-5",children:yt?"Listo para validar.":"Completa orgenes y destino."}),i.jsxs("div",{className:"d-flex gap-10",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>void Fn(),disabled:c||!yt,children:c?"Validando...":"Validar"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:te,disabled:c,title:"Limpia orgenes y destino",children:"Limpiar rutas"})]})]})]})]})]}),g?i.jsxs("div",{className:"mT-20",children:[i.jsx("h6",{className:"c-grey-900 mB-10",children:"Resultado de validacin"}),Fa?i.jsxs("div",{className:"d-flex flex-wrap gap-10 align-items-center mB-10",children:[i.jsxs("span",{className:"badge bg-light text-dark",children:["Orgenes OK: ",i.jsx("strong",{children:Fa.okOrigenes})," / ",Fa.totalOrigenes]}),i.jsxs("span",{className:Fa.okDestino?"badge bg-success":"badge bg-danger",children:["Destino: ",Fa.okDestino?"OK":"No OK"]}),g.ok?null:i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void $r(),children:"Copiar detalle"})]}):null,i.jsxs("div",{className:"mT-25",children:[i.jsx("h6",{className:"c-grey-900 mB-10",children:"Copiado de PDFs conformes por OI (PB-LOG-015)"}),i.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between gap-10",children:[i.jsxs("div",{className:"small text-muted",children:["Corrida LOG-01 seleccionada:"," ",D?.id?i.jsxs("span",{className:"badge bg-light text-dark",children:["#",D.id,D?.created_at?`  ${Av(D.created_at)}`:"",D?.source?`  ${D.source}`:"",D?.status?`  ${D.status}`:""]}):i.jsx("span",{className:"badge bg-warning text-dark",children:"No seleccionada"})]}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:kt,disabled:M,children:D?.id?"Cambiar corrida":"Elegir corrida"})]}),D?.id?null:i.jsx("div",{className:"alert alert-warning mT-10",role:"alert",children:"Debes seleccionar una corrida de LOG-01 (historial) para usar su manifiesto y NO CONFORME."}),i.jsxs("div",{className:"d-flex flex-wrap gap-10 mT-10",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>void Qn(),disabled:!rn,children:M?"Copiando...":"Iniciar copiado"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>void ln(),disabled:!M||!ee,children:"Cancelar"})]}),i.jsxs("div",{className:"mT-10",children:[i.jsxs("h6",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[i.jsx("span",{children:"Progreso"}),M?i.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),P||k?i.jsxs("div",{className:"small text-muted",children:[i.jsx("strong",{children:"Estado:"})," ",P||"",ge?i.jsxs("span",{children:[" "," ",i.jsx("strong",{children:"OI:"})," ",ge]}):null,k?i.jsxs("span",{children:["  ",k]}):null]}):null,i.jsx("div",{className:"progress",style:{height:10},children:i.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${Math.max(0,Math.min(100,je))}%`},"aria-valuenow":je,"aria-valuemin":0,"aria-valuemax":100})}),i.jsxs("div",{className:"small text-muted mT-5",children:[je.toFixed(0),"%"]})]}),Ue.length?i.jsxs("div",{className:"alert alert-danger mT-10",role:"alert",children:[i.jsx("strong",{children:"Se detectaron errores:"}),i.jsx("ul",{className:"mB-0 mT-5",children:Ue.slice(-8).map(($,he)=>i.jsxs("li",{children:[$.oi?`[${$.oi}] `:"",$.file?`${$.file}: `:"",$.message]},`ce-${he}`))})]}):null,$e.length?i.jsxs("div",{className:"alert alert-warning mT-10",role:"alert",children:[i.jsx("strong",{children:"Advertencias:"}),i.jsx("ul",{className:"mB-0 mT-5",children:$e.slice(-8).map(($,he)=>i.jsxs("li",{children:["[",$.oi,"] ",$.code?`${$.code}: `:"",$.message]},`cw-${he}`))})]}):null,Ve?i.jsxs("div",{className:"mT-15",children:[i.jsx("h6",{className:"c-grey-900 mB-10",children:"Auditora de copiado"}),i.jsxs("div",{className:"row g-2",children:[i.jsx("div",{className:"col-12 col-md-4",children:i.jsxs("div",{className:"alert alert-light mB-0",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Total OIs:"})," ",Ve?.total_ois??"N/D"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"OIs OK:"})," ",Ve?.ois_ok??"N/D"]})]})}),i.jsx("div",{className:"col-12 col-md-8",children:i.jsx("div",{className:"alert alert-light mB-0",children:i.jsxs("div",{className:"d-flex flex-wrap gap-10",children:[i.jsxs("span",{children:[i.jsx("strong",{children:"PDF detectados:"})," ",Ve?.archivos?.pdf_detectados??"N/D"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"PDF copiados:"})," ",Ve?.archivos?.pdf_copiados??"N/D"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"Omitidos NO CONFORME:"})," ",Ve?.archivos?.pdf_omitidos_no_conforme??"N/D"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"No PDF omitidos:"})," ",Ve?.archivos?.archivos_no_pdf_omitidos??"N/D"]})]})})})]}),Ve?.ois_faltantes?.length||Ve?.ois_duplicadas?.length||Ve?.destinos_duplicados?.length?i.jsxs("div",{className:"mT-10",children:[Ve?.ois_faltantes?.length?i.jsxs("div",{className:"alert alert-warning",role:"alert",children:[i.jsx("strong",{children:"OIs sin carpeta:"}),i.jsx("ul",{className:"mB-0 mT-5",children:Ve.ois_faltantes.slice(0,10).map(($,he)=>i.jsxs("li",{children:[$?.oi,"  ",$?.detalle||""]},`of-${he}`))})]}):null,Ve?.ois_duplicadas?.length?i.jsxs("div",{className:"alert alert-warning",role:"alert",children:[i.jsx("strong",{children:"OIs con mltiples carpetas (duplicadas):"}),i.jsx("ul",{className:"mB-0 mT-5",children:Ve.ois_duplicadas.slice(0,10).map(($,he)=>i.jsxs("li",{children:[$?.oi,"  ",Array.isArray($?.carpetas)?$.carpetas.join(" | "):""]},`od-${he}`))})]}):null,Ve?.destinos_duplicados?.length?i.jsxs("div",{className:"alert alert-warning",role:"alert",children:[i.jsx("strong",{children:"Destinos ya existentes:"}),i.jsx("ul",{className:"mB-0 mT-5",children:Ve.destinos_duplicados.slice(0,10).map(($,he)=>i.jsxs("li",{children:[$?.oi,"  ",$?.destino||""]},`dd-${he}`))})]}):null]}):null]}):null,N?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:i.jsx("div",{className:"modal-dialog modal-lg",role:"document",children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{className:"modal-title",children:"Seleccionar corrida de LOG-01 (Historial)"}),i.jsx("button",{type:"button",className:"close","aria-label":"Close",onClick:()=>q(!1),children:i.jsx("span",{"aria-hidden":"true",children:""})})]}),i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{className:"text-muted small mB-10",children:["Por defecto se cargan las ",i.jsx("strong",{children:"ltimas 5 corridas completadas"}),". Puedes usar filtros si lo necesitas."]}),C?i.jsx("div",{className:"alert alert-danger",role:"alert",children:C}):null,i.jsxs("form",{className:"row g-2 align-items-end",onSubmit:$=>{$.preventDefault(),Qt()},children:[i.jsxs("div",{className:"col-12 col-md-4",children:[i.jsx("label",{className:"form-label",children:"Buscar"}),i.jsx("input",{className:"form-control form-control-sm",value:Z,onChange:$=>U($.target.value),placeholder:"Serie / OI / usuario..."})]}),i.jsxs("div",{className:"col-6 col-md-2",children:[i.jsx("label",{className:"form-label",children:"Desde"}),i.jsx("input",{className:"form-control form-control-sm",type:"date",value:X,onChange:$=>ce($.target.value)})]}),i.jsxs("div",{className:"col-6 col-md-2",children:[i.jsx("label",{className:"form-label",children:"Hasta"}),i.jsx("input",{className:"form-control form-control-sm",type:"date",value:_e,onChange:$=>xe($.target.value)})]}),i.jsxs("div",{className:"col-6 col-md-2",children:[i.jsx("label",{className:"form-label",children:"Origen"}),i.jsx("input",{className:"form-control form-control-sm",value:me,onChange:$=>Se($.target.value),placeholder:"AUTO/BASES/..."})]}),i.jsxs("div",{className:"col-6 col-md-2",children:[i.jsx("label",{className:"form-label",children:"Estado"}),i.jsx("input",{className:"form-control form-control-sm",value:De,onChange:$=>Oe($.target.value),placeholder:"COMPLETADO"})]}),i.jsxs("div",{className:"col-12 d-flex gap-10",children:[i.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:j,children:j?"Buscando...":"Aplicar filtros"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>{U(""),ce(""),xe(""),Se(""),Oe("COMPLETADO"),Ke(5)},disabled:j,children:"Ver ltimas 5 exitosas"})]})]}),i.jsx("hr",{}),j?i.jsx("div",{className:"text-muted small",children:"Cargando corridas..."}):i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{style:{width:90},children:"ID"}),i.jsx("th",{children:"Creado"}),i.jsx("th",{style:{width:120},children:"Origen"}),i.jsx("th",{style:{width:140},children:"Estado"}),i.jsx("th",{style:{width:120}})]})}),i.jsx("tbody",{children:T.length?T.map($=>i.jsxs("tr",{className:"small",children:[i.jsx("td",{children:i.jsxs("strong",{children:["#",$.id]})}),i.jsx("td",{children:Av($.created_at)}),i.jsx("td",{children:$.source||"N/D"}),i.jsx("td",{children:$.status||"N/D"}),i.jsx("td",{children:i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>Rt($),children:"Usar"})})]},$.id)):i.jsx("tr",{className:"small",children:i.jsx("td",{colSpan:5,className:"text-muted",children:"Sin resultados."})})})]})})]}),i.jsx("div",{className:"modal-footer",children:i.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>q(!1),children:"Cerrar"})})]})})}),i.jsx("div",{className:"modal-backdrop fade show"})]}):null]}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Tipo"}),i.jsx("th",{children:"Ruta"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Existe"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Lectura"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Escritura"}),i.jsx("th",{children:"Detalle"})]})}),i.jsxs("tbody",{children:[g.origenes.map(($,he)=>i.jsxs("tr",{className:"small",children:[i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:"Origen"})}),i.jsx("td",{style:{wordBreak:"break-all"},children:$.ruta||"N/D"}),i.jsx("td",{children:i.jsx("span",{className:wl($.existe),children:$.existe?"S":"No"})}),i.jsx("td",{children:i.jsx("span",{className:wl($.lectura),children:$.lectura?"S":"No"})}),i.jsx("td",{children:i.jsx("span",{className:wl(null),children:""})}),i.jsx("td",{children:$.detalle||""})]},`o-${he}`)),i.jsxs("tr",{className:"small",children:[i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:"Destino"})}),i.jsx("td",{style:{wordBreak:"break-all"},children:g.destino.ruta||"N/D"}),i.jsx("td",{children:i.jsx("span",{className:wl(g.destino.existe),children:g.destino.existe?"S":"No"})}),i.jsx("td",{children:i.jsx("span",{className:wl(g.destino.lectura),children:g.destino.lectura?"S":"No"})}),i.jsx("td",{children:i.jsx("span",{className:wl(!!g.destino.escritura),children:g.destino.escritura?"S":"No"})}),i.jsx("td",{children:g.destino.detalle||""})]})]})]})}),g.ok?i.jsx("div",{className:"alert alert-success mT-15",role:"alert",children:"Rutas validadas correctamente. Puedes continuar con la siguiente fase."}):i.jsx("div",{className:"alert alert-warning mT-15",role:"alert",children:"Hay rutas con problemas. Corrige existencia/permisos y vuelve a validar."})]}):null]})})}),Pe?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:i.jsx("div",{className:"modal-dialog modal-lg",role:"document",children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{className:"modal-title",children:Pt==="destino"?"Elegir carpeta de destino":"Elegir carpeta de origen"}),i.jsx("button",{type:"button",className:"close","aria-label":"Close",onClick:()=>rt(!1),children:i.jsx("span",{"aria-hidden":"true",children:""})})]}),i.jsxs("div",{className:"modal-body",children:[$n?i.jsx("div",{className:"alert alert-danger",role:"alert",children:$n}):null,i.jsxs("div",{className:"row g-2",children:[i.jsxs("div",{className:"col-12 col-md-6",children:[i.jsx("label",{className:"form-label",children:"Raz"}),i.jsx("select",{className:"form-control form-control-sm",value:qn,onChange:$=>{const he=$.target.value;_a(he),en(he)},disabled:!jt.length,children:jt.length?jt.map($=>i.jsx("option",{value:$,children:$},$)):i.jsx("option",{value:"",children:"Sin races"})})]}),i.jsxs("div",{className:"col-12 col-md-6",children:[i.jsx("label",{className:"form-label",children:"Carpeta actual"}),i.jsx("input",{className:"form-control form-control-sm",value:dn,readOnly:!0})]})]}),i.jsxs("div",{className:"d-flex gap-10 mT-10",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:hn,disabled:!dn||Jn,children:"Subir nivel"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:Ft,disabled:!dn||Jn,children:"Seleccionar esta carpeta"})]}),i.jsx("hr",{}),Jn?i.jsx("div",{className:"text-muted small",children:"Cargando carpetas..."}):i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{children:"Subcarpetas"}),i.jsx("th",{style:{width:120}})]})}),i.jsx("tbody",{children:sa.length?sa.map($=>i.jsxs("tr",{className:"small",children:[i.jsx("td",{style:{wordBreak:"break-all"},children:$.name}),i.jsx("td",{children:i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>void en($.path),children:"Entrar"})})]},$.path)):i.jsx("tr",{className:"small",children:i.jsx("td",{colSpan:2,className:"text-muted",children:"Sin subcarpetas o sin permisos para listar."})})})]})})]}),i.jsx("div",{className:"modal-footer",children:i.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>rt(!1),children:"Cerrar"})})]})})}),i.jsx("div",{className:"modal-backdrop fade show"})]}):null]})}function Q2(){const e=Dn();return i.jsx(i.Fragment,{children:i.jsxs(Bw,{children:[i.jsx(an,{path:"/login",element:e?.token?i.jsx(ar,{to:"/home",replace:!0}):i.jsx(_E,{})}),i.jsx(an,{element:i.jsx(gT,{}),children:i.jsxs(an,{element:i.jsx(ST,{}),children:[i.jsx(an,{path:"/",element:i.jsx(ar,{to:"/home",replace:!0})}),i.jsx(an,{path:"/home",element:i.jsx(z2,{})}),i.jsx(an,{path:"/oi",element:i.jsx(vv,{})}),i.jsx(an,{path:"/oi/:oiId",element:i.jsx(vv,{})}),i.jsx(an,{path:"/oi/list",element:i.jsx(NT,{})}),i.jsx(an,{path:"/users",element:i.jsx(jT,{})}),i.jsx(an,{path:"/password",element:i.jsx(_T,{})}),i.jsx(an,{path:"/admin/permisos",element:i.jsx(CT,{})}),i.jsx(an,{path:"/logistica/log01/excel",element:i.jsx(L2,{})}),i.jsx(an,{path:"/logistica/log01/history",element:i.jsx(H2,{})}),i.jsx(an,{path:"/logistica/log02/pdfs",element:i.jsx(P2,{})}),i.jsx(an,{path:"/oi/tools/vima-to-lista",element:i.jsx(IT,{})}),i.jsx(an,{path:"/oi/tools/actualizacion-base",element:i.jsx(p2,{})}),i.jsx(an,{path:"/oi/tools/formato-ac/history",element:i.jsx(N2,{})}),i.jsx(an,{path:"/oi/tools/consolidacion",element:i.jsx(w2,{})}),i.jsx(an,{path:"/oi/tools/consolidacion/correlativo",element:i.jsx(A2,{})}),i.jsx(an,{path:"/oi/tools/consolidacion/no-correlativo",element:i.jsx(T2,{})}),i.jsx(an,{path:"/oi/tools/excel",element:i.jsx(D2,{})})]})}),i.jsx(an,{path:"*",element:i.jsx(ar,{to:e?.token?"/home":"/login",replace:!0})})]})})}const Y2=new qj;ZN.createRoot(document.getElementById("root")).render(i.jsx(ht.StrictMode,{children:i.jsx(Ij,{client:Y2,children:i.jsx(oj,{children:i.jsx(jE,{children:i.jsx(Q2,{})})})})}));
