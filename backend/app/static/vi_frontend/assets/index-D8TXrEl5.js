(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function s(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(c){if(c.ep)return;c.ep=!0;const d=s(c);fetch(c.href,d)}})();function Rv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bf={exports:{}},Ui={};var Ib;function UN(){if(Ib)return Ui;Ib=1;var e=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function s(l,c,d){var f=null;if(d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),"key"in c){d={};for(var h in c)h!=="key"&&(d[h]=c[h])}else d=c;return c=d.ref,{$$typeof:e,type:l,key:f,ref:c!==void 0?c:null,props:d}}return Ui.Fragment=a,Ui.jsx=s,Ui.jsxs=s,Ui}var $b;function LN(){return $b||($b=1,bf.exports=UN()),bf.exports}var i=LN(),yf={exports:{}},it={};var Fb;function BN(){if(Fb)return it;Fb=1;var e=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),N=Symbol.iterator;function I(w){return w===null||typeof w!="object"?null:(w=N&&w[N]||w["@@iterator"],typeof w=="function"?w:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,C={};function q(w,P,ie){this.props=w,this.context=P,this.refs=C,this.updater=ie||j}q.prototype.isReactComponent={},q.prototype.setState=function(w,P){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,P,"setState")},q.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function T(){}T.prototype=q.prototype;function J(w,P,ie){this.props=w,this.context=P,this.refs=C,this.updater=ie||j}var D=J.prototype=new T;D.constructor=J,_(D,q.prototype),D.isPureReactComponent=!0;var R=Array.isArray;function Z(){}var L={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function ue(w,P,ie){var M=ie.ref;return{$$typeof:e,type:w,key:P,ref:M!==void 0?M:null,props:ie}}function Ae(w,P){return ue(w.type,P,w.props)}function xe(w){return typeof w=="object"&&w!==null&&w.$$typeof===e}function he(w){var P={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(ie){return P[ie]})}var Ne=/\/+/g;function ke(w,P){return typeof w=="object"&&w!==null&&w.key!=null?he(""+w.key):P.toString(36)}function Te(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(Z,Z):(w.status="pending",w.then(function(P){w.status==="pending"&&(w.status="fulfilled",w.value=P)},function(P){w.status==="pending"&&(w.status="rejected",w.reason=P)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function U(w,P,ie,M,ce){var pe=typeof w;(pe==="undefined"||pe==="boolean")&&(w=null);var De=!1;if(w===null)De=!0;else switch(pe){case"bigint":case"string":case"number":De=!0;break;case"object":switch(w.$$typeof){case e:case a:De=!0;break;case v:return De=w._init,U(De(w._payload),P,ie,M,ce)}}if(De)return ce=ce(w),De=M===""?"."+ke(w,0):M,R(ce)?(ie="",De!=null&&(ie=De.replace(Ne,"$&/")+"/"),U(ce,P,ie,"",function(Le){return Le})):ce!=null&&(xe(ce)&&(ce=Ae(ce,ie+(ce.key==null||w&&w.key===ce.key?"":(""+ce.key).replace(Ne,"$&/")+"/")+De)),P.push(ce)),1;De=0;var $e=M===""?".":M+":";if(R(w))for(var fe=0;fe<w.length;fe++)M=w[fe],pe=$e+ke(M,fe),De+=U(M,P,ie,pe,ce);else if(fe=I(w),typeof fe=="function")for(w=fe.call(w),fe=0;!(M=w.next()).done;)M=M.value,pe=$e+ke(M,fe++),De+=U(M,P,ie,pe,ce);else if(pe==="object"){if(typeof w.then=="function")return U(Te(w),P,ie,M,ce);throw P=String(w),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return De}function $(w,P,ie){if(w==null)return w;var M=[],ce=0;return U(w,M,"","",function(pe){return P.call(ie,pe,ce++)}),M}function X(w){if(w._status===-1){var P=w._result;P=P(),P.then(function(ie){(w._status===0||w._status===-1)&&(w._status=1,w._result=ie)},function(ie){(w._status===0||w._status===-1)&&(w._status=2,w._result=ie)}),w._status===-1&&(w._status=0,w._result=P)}if(w._status===1)return w._result.default;throw w._result}var ye=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)},Se={map:$,forEach:function(w,P,ie){$(w,function(){P.apply(this,arguments)},ie)},count:function(w){var P=0;return $(w,function(){P++}),P},toArray:function(w){return $(w,function(P){return P})||[]},only:function(w){if(!xe(w))throw Error("React.Children.only expected to receive a single React element child.");return w}};return it.Activity=x,it.Children=Se,it.Component=q,it.Fragment=s,it.Profiler=c,it.PureComponent=J,it.StrictMode=l,it.Suspense=g,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,it.__COMPILER_RUNTIME={__proto__:null,c:function(w){return L.H.useMemoCache(w)}},it.cache=function(w){return function(){return w.apply(null,arguments)}},it.cacheSignal=function(){return null},it.cloneElement=function(w,P,ie){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var M=_({},w.props),ce=w.key;if(P!=null)for(pe in P.key!==void 0&&(ce=""+P.key),P)!W.call(P,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&P.ref===void 0||(M[pe]=P[pe]);var pe=arguments.length-2;if(pe===1)M.children=ie;else if(1<pe){for(var De=Array(pe),$e=0;$e<pe;$e++)De[$e]=arguments[$e+2];M.children=De}return ue(w.type,ce,M)},it.createContext=function(w){return w={$$typeof:f,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:d,_context:w},w},it.createElement=function(w,P,ie){var M,ce={},pe=null;if(P!=null)for(M in P.key!==void 0&&(pe=""+P.key),P)W.call(P,M)&&M!=="key"&&M!=="__self"&&M!=="__source"&&(ce[M]=P[M]);var De=arguments.length-2;if(De===1)ce.children=ie;else if(1<De){for(var $e=Array(De),fe=0;fe<De;fe++)$e[fe]=arguments[fe+2];ce.children=$e}if(w&&w.defaultProps)for(M in De=w.defaultProps,De)ce[M]===void 0&&(ce[M]=De[M]);return ue(w,pe,ce)},it.createRef=function(){return{current:null}},it.forwardRef=function(w){return{$$typeof:h,render:w}},it.isValidElement=xe,it.lazy=function(w){return{$$typeof:v,_payload:{_status:-1,_result:w},_init:X}},it.memo=function(w,P){return{$$typeof:p,type:w,compare:P===void 0?null:P}},it.startTransition=function(w){var P=L.T,ie={};L.T=ie;try{var M=w(),ce=L.S;ce!==null&&ce(ie,M),typeof M=="object"&&M!==null&&typeof M.then=="function"&&M.then(Z,ye)}catch(pe){ye(pe)}finally{P!==null&&ie.types!==null&&(P.types=ie.types),L.T=P}},it.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},it.use=function(w){return L.H.use(w)},it.useActionState=function(w,P,ie){return L.H.useActionState(w,P,ie)},it.useCallback=function(w,P){return L.H.useCallback(w,P)},it.useContext=function(w){return L.H.useContext(w)},it.useDebugValue=function(){},it.useDeferredValue=function(w,P){return L.H.useDeferredValue(w,P)},it.useEffect=function(w,P){return L.H.useEffect(w,P)},it.useEffectEvent=function(w){return L.H.useEffectEvent(w)},it.useId=function(){return L.H.useId()},it.useImperativeHandle=function(w,P,ie){return L.H.useImperativeHandle(w,P,ie)},it.useInsertionEffect=function(w,P){return L.H.useInsertionEffect(w,P)},it.useLayoutEffect=function(w,P){return L.H.useLayoutEffect(w,P)},it.useMemo=function(w,P){return L.H.useMemo(w,P)},it.useOptimistic=function(w,P){return L.H.useOptimistic(w,P)},it.useReducer=function(w,P,ie){return L.H.useReducer(w,P,ie)},it.useRef=function(w){return L.H.useRef(w)},it.useState=function(w){return L.H.useState(w)},it.useSyncExternalStore=function(w,P,ie){return L.H.useSyncExternalStore(w,P,ie)},it.useTransition=function(){return L.H.useTransition()},it.version="19.2.0",it}var Hb;function Om(){return Hb||(Hb=1,yf.exports=BN()),yf.exports}var b=Om();const ht=Rv(b);var vf={exports:{}},Li={},xf={exports:{}},Sf={};var Vb;function qN(){return Vb||(Vb=1,(function(e){function a(U,$){var X=U.length;U.push($);e:for(;0<X;){var ye=X-1>>>1,Se=U[ye];if(0<c(Se,$))U[ye]=$,U[X]=Se,X=ye;else break e}}function s(U){return U.length===0?null:U[0]}function l(U){if(U.length===0)return null;var $=U[0],X=U.pop();if(X!==$){U[0]=X;e:for(var ye=0,Se=U.length,w=Se>>>1;ye<w;){var P=2*(ye+1)-1,ie=U[P],M=P+1,ce=U[M];if(0>c(ie,X))M<Se&&0>c(ce,ie)?(U[ye]=ce,U[M]=X,ye=M):(U[ye]=ie,U[P]=X,ye=P);else if(M<Se&&0>c(ce,X))U[ye]=ce,U[M]=X,ye=M;else break e}}return $}function c(U,$){var X=U.sortIndex-$.sortIndex;return X!==0?X:U.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var f=Date,h=f.now();e.unstable_now=function(){return f.now()-h}}var g=[],p=[],v=1,x=null,N=3,I=!1,j=!1,_=!1,C=!1,q=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function D(U){for(var $=s(p);$!==null;){if($.callback===null)l(p);else if($.startTime<=U)l(p),$.sortIndex=$.expirationTime,a(g,$);else break;$=s(p)}}function R(U){if(_=!1,D(U),!j)if(s(g)!==null)j=!0,Z||(Z=!0,he());else{var $=s(p);$!==null&&Te(R,$.startTime-U)}}var Z=!1,L=-1,W=5,ue=-1;function Ae(){return C?!0:!(e.unstable_now()-ue<W)}function xe(){if(C=!1,Z){var U=e.unstable_now();ue=U;var $=!0;try{e:{j=!1,_&&(_=!1,T(L),L=-1),I=!0;var X=N;try{t:{for(D(U),x=s(g);x!==null&&!(x.expirationTime>U&&Ae());){var ye=x.callback;if(typeof ye=="function"){x.callback=null,N=x.priorityLevel;var Se=ye(x.expirationTime<=U);if(U=e.unstable_now(),typeof Se=="function"){x.callback=Se,D(U),$=!0;break t}x===s(g)&&l(g),D(U)}else l(g);x=s(g)}if(x!==null)$=!0;else{var w=s(p);w!==null&&Te(R,w.startTime-U),$=!1}}break e}finally{x=null,N=X,I=!1}$=void 0}}finally{$?he():Z=!1}}}var he;if(typeof J=="function")he=function(){J(xe)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,ke=Ne.port2;Ne.port1.onmessage=xe,he=function(){ke.postMessage(null)}}else he=function(){q(xe,0)};function Te(U,$){L=q(function(){U(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_next=function(U){switch(N){case 1:case 2:case 3:var $=3;break;default:$=N}var X=N;N=$;try{return U()}finally{N=X}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var X=N;N=U;try{return $()}finally{N=X}},e.unstable_scheduleCallback=function(U,$,X){var ye=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ye+X:ye):X=ye,U){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=X+Se,U={id:v++,callback:$,priorityLevel:U,startTime:X,expirationTime:Se,sortIndex:-1},X>ye?(U.sortIndex=X,a(p,U),s(g)===null&&U===s(p)&&(_?(T(L),L=-1):_=!0,Te(R,X-ye))):(U.sortIndex=Se,a(g,U),j||I||(j=!0,Z||(Z=!0,he()))),U},e.unstable_shouldYield=Ae,e.unstable_wrapCallback=function(U){var $=N;return function(){var X=N;N=$;try{return U.apply(this,arguments)}finally{N=X}}}})(Sf)),Sf}var Zb;function IN(){return Zb||(Zb=1,xf.exports=qN()),xf.exports}var Nf={exports:{}},Wn={};var Gb;function $N(){if(Gb)return Wn;Gb=1;var e=Om();function a(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var l={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(g,p,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:x==null?null:""+x,children:g,containerInfo:p,implementation:v}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Wn.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return d(g,p,null,v)},Wn.flushSync=function(g){var p=f.T,v=l.p;try{if(f.T=null,l.p=2,g)return g()}finally{f.T=p,l.p=v,l.d.f()}},Wn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,l.d.C(g,p))},Wn.prefetchDNS=function(g){typeof g=="string"&&l.d.D(g)},Wn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,x=h(v,p.crossOrigin),N=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?l.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:N,fetchPriority:I}):v==="script"&&l.d.X(g,{crossOrigin:x,integrity:N,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Wn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);l.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&l.d.M(g)},Wn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,x=h(v,p.crossOrigin);l.d.L(g,v,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Wn.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=h(p.as,p.crossOrigin);l.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else l.d.m(g)},Wn.requestFormReset=function(g){l.d.r(g)},Wn.unstable_batchedUpdates=function(g,p){return g(p)},Wn.useFormState=function(g,p,v){return f.H.useFormState(g,p,v)},Wn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Wn.version="19.2.0",Wn}var Pb;function FN(){if(Pb)return Nf.exports;Pb=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(a){console.error(a)}}return e(),Nf.exports=$N(),Nf.exports}var Qb;function HN(){if(Qb)return Li;Qb=1;var e=IN(),a=Om(),s=FN();function l(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function h(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(d(t)!==t)throw Error(l(188))}function p(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(l(188));return n!==t?null:t}for(var r=t,o=n;;){var u=r.return;if(u===null)break;var m=u.alternate;if(m===null){if(o=u.return,o!==null){r=o;continue}break}if(u.child===m.child){for(m=u.child;m;){if(m===r)return g(u),t;if(m===o)return g(u),n;m=m.sibling}throw Error(l(188))}if(r.return!==o.return)r=u,o=m;else{for(var y=!1,S=u.child;S;){if(S===r){y=!0,r=u,o=m;break}if(S===o){y=!0,o=u,r=m;break}S=S.sibling}if(!y){for(S=m.child;S;){if(S===r){y=!0,r=m,o=u;break}if(S===o){y=!0,o=m,r=u;break}S=S.sibling}if(!y)throw Error(l(189))}}if(r.alternate!==o)throw Error(l(190))}if(r.tag!==3)throw Error(l(188));return r.stateNode.current===r?t:n}function v(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=v(t),n!==null)return n;t=t.sibling}return null}var x=Object.assign,N=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),J=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),Ae=Symbol.for("react.memo_cache_sentinel"),xe=Symbol.iterator;function he(t){return t===null||typeof t!="object"?null:(t=xe&&t[xe]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Symbol.for("react.client.reference");function ke(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Ne?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _:return"Fragment";case q:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case Z:return"SuspenseList";case ue:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case j:return"Portal";case J:return t.displayName||"Context";case T:return(t._context.displayName||"Context")+".Consumer";case D:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case L:return n=t.displayName||null,n!==null?n:ke(t.type)||"Memo";case W:n=t._payload,t=t._init;try{return ke(t(n))}catch{}}return null}var Te=Array.isArray,U=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ye=[],Se=-1;function w(t){return{current:t}}function P(t){0>Se||(t.current=ye[Se],ye[Se]=null,Se--)}function ie(t,n){Se++,ye[Se]=t.current,t.current=n}var M=w(null),ce=w(null),pe=w(null),De=w(null);function $e(t,n){switch(ie(pe,n),ie(ce,t),ie(M,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?cb(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=cb(n),t=ub(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}P(M),ie(M,t)}function fe(){P(M),P(ce),P(pe)}function Le(t){t.memoizedState!==null&&ie(De,t);var n=M.current,r=ub(n,t.type);n!==r&&(ie(ce,t),ie(M,r))}function Ie(t){ce.current===t&&(P(M),P(ce)),De.current===t&&(P(De),Di._currentValue=X)}var Ge,dt;function ze(t){if(Ge===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Ge=n&&n[1]||"",dt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ge+t+dt}var Ze=!1;function me(t,n){if(!t||Ze)return"";Ze=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(le){var ne=le}Reflect.construct(t,[],ve)}else{try{ve.call()}catch(le){ne=le}t.call(ve.prototype)}}else{try{throw Error()}catch(le){ne=le}(ve=t())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(le){if(le&&ne&&typeof le.stack=="string")return[le.stack,ne.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),y=m[0],S=m[1];if(y&&S){var z=y.split(`
`),te=S.split(`
`);for(u=o=0;o<z.length&&!z[o].includes("DetermineComponentFrameRoot");)o++;for(;u<te.length&&!te[u].includes("DetermineComponentFrameRoot");)u++;if(o===z.length||u===te.length)for(o=z.length-1,u=te.length-1;1<=o&&0<=u&&z[o]!==te[u];)u--;for(;1<=o&&0<=u;o--,u--)if(z[o]!==te[u]){if(o!==1||u!==1)do if(o--,u--,0>u||z[o]!==te[u]){var de=`
`+z[o].replace(" at new "," at ");return t.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",t.displayName)),de}while(1<=o&&0<=u);break}}}finally{Ze=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?ze(r):""}function Fe(t,n){switch(t.tag){case 26:case 27:case 5:return ze(t.type);case 16:return ze("Lazy");case 13:return t.child!==n&&n!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return me(t.type,!1);case 11:return me(t.type.render,!1);case 1:return me(t.type,!0);case 31:return ze("Activity");default:return""}}function Ce(t){try{var n="",r=null;do n+=Fe(t,r),r=t,t=t.return;while(t);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Je=Object.prototype.hasOwnProperty,A=e.unstable_scheduleCallback,V=e.unstable_cancelCallback,O=e.unstable_shouldYield,Q=e.unstable_requestPaint,G=e.unstable_now,se=e.unstable_getCurrentPriorityLevel,Oe=e.unstable_ImmediatePriority,Be=e.unstable_UserBlockingPriority,ae=e.unstable_NormalPriority,Me=e.unstable_LowPriority,He=e.unstable_IdlePriority,at=e.log,Jt=e.unstable_setDisableYieldValue,we=null,et=null;function Ft(t){if(typeof at=="function"&&Jt(t),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(we,t)}catch{}}var Et=Math.clz32?Math.clz32:Ra,Rn=Math.log,$n=Math.LN2;function Ra(t){return t>>>=0,t===0?32:31-(Rn(t)/$n|0)|0}var sn=256,rt=262144,Kn=4194304;function Un(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Zt(t,n,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,m=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var S=o&134217727;return S!==0?(o=S&~m,o!==0?u=Un(o):(y&=S,y!==0?u=Un(y):r||(r=S&~t,r!==0&&(u=Un(r))))):(S=o&~m,S!==0?u=Un(S):y!==0?u=Un(y):r||(r=o&~t,r!==0&&(u=Un(r)))),u===0?0:n!==0&&n!==u&&(n&m)===0&&(m=u&-u,r=n&-n,m>=r||m===32&&(r&4194048)!==0)?n:u}function Fn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Hn(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y(){var t=Kn;return Kn<<=1,(Kn&62914560)===0&&(Kn=4194304),t}function K(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function je(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ve(t,n,r,o,u,m){var y=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var S=t.entanglements,z=t.expirationTimes,te=t.hiddenUpdates;for(r=y&~r;0<r;){var de=31-Et(r),ve=1<<de;S[de]=0,z[de]=-1;var ne=te[de];if(ne!==null)for(te[de]=null,de=0;de<ne.length;de++){var le=ne[de];le!==null&&(le.lane&=-536870913)}r&=~ve}o!==0&&st(t,o,0),m!==0&&u===0&&t.tag!==0&&(t.suspendedLanes|=m&~(y&~n))}function st(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-Et(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|r&261930}function ot(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var o=31-Et(r),u=1<<o;u&n|t[o]&n&&(t[o]|=n),r&=~u}}function Ke(t,n){var r=n&-n;return r=(r&42)!==0?1:Nt(r),(r&(t.suspendedLanes|n))!==0?0:r}function Nt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Lt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Dt(){var t=$.p;return t!==0?t:(t=window.event,t===void 0?32:zb(t.type))}function xn(t,n){var r=$.p;try{return $.p=t,n()}finally{$.p=r}}var Tt=Math.random().toString(36).slice(2),ft="__reactFiber$"+Tt,bt="__reactProps$"+Tt,Ht="__reactContainer$"+Tt,pn="__reactEvents$"+Tt,Tn="__reactListeners$"+Tt,rn="__reactHandles$"+Tt,Wt="__reactResources$"+Tt,jt="__reactMarker$"+Tt;function Ln(t){delete t[ft],delete t[bt],delete t[pn],delete t[Tn],delete t[rn]}function dn(t){var n=t[ft];if(n)return n;for(var r=t.parentNode;r;){if(n=r[Ht]||r[ft]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=bb(t);t!==null;){if(r=t[ft])return r;t=bb(t)}return n}t=r,r=t.parentNode}return null}function Sn(t){if(t=t[ft]||t[Ht]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function Bn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(l(33))}function Gt(t){var n=t[Wt];return n||(n=t[Wt]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function zt(t){t[jt]=!0}var ps=new Set,xa={};function Nn(t,n){Xn(t,n),Xn(t+"Capture",n)}function Xn(t,n){for(xa[t]=n,t=0;t<n.length;t++)ps.add(n[t])}var Ga=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Us={},Pa={};function gs(t){return Je.call(Pa,t)?!0:Je.call(Us,t)?!1:Ga.test(t)?Pa[t]=!0:(Us[t]=!0,!1)}function ln(t,n,r){if(gs(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function Sa(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function Jn(t,n,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+o)}}function on(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vn(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function pr(t,n,r){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,m=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return u.call(this)},set:function(y){r=""+y,m.call(this,y)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(y){r=""+y},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ns(t){if(!t._valueTracker){var n=Vn(t)?"checked":"value";t._valueTracker=pr(t,n,""+t[n])}}function ia(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return t&&(o=Vn(t)?t.checked?"true":"false":t.value),t=o,t!==r?(n.setValue(t),!0):!1}function Qa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var gr=/[\n"\\]/g;function gn(t){return t.replace(gr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function br(t,n,r,o,u,m,y,S){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),n!=null?y==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+on(n)):t.value!==""+on(n)&&(t.value=""+on(n)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),n!=null?bs(t,y,on(n)):r!=null?bs(t,y,on(r)):o!=null&&t.removeAttribute("value"),u==null&&m!=null&&(t.defaultChecked=!!m),u!=null&&(t.checked=u&&typeof u!="function"&&typeof u!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+on(S):t.removeAttribute("name")}function as(t,n,r,o,u,m,y,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),n!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){ns(t);return}r=r!=null?""+on(r):"",n=n!=null?""+on(n):r,S||n===t.value||(t.value=n),t.defaultValue=n}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=S?t.checked:!!o,t.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y),ns(t)}function bs(t,n,r){n==="number"&&Qa(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function ss(t,n,r,o){if(t=t.options,n){n={};for(var u=0;u<r.length;u++)n["$"+r[u]]=!0;for(r=0;r<t.length;r++)u=n.hasOwnProperty("$"+t[r].value),t[r].selected!==u&&(t[r].selected=u),u&&o&&(t[r].defaultSelected=!0)}else{for(r=""+on(r),n=null,u=0;u<t.length;u++){if(t[u].value===r){t[u].selected=!0,o&&(t[u].defaultSelected=!0);return}n!==null||t[u].disabled||(n=t[u])}n!==null&&(n.selected=!0)}}function rs(t,n,r){if(n!=null&&(n=""+on(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+on(r):""}function Xr(t,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(l(92));if(Te(o)){if(1<o.length)throw Error(l(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=on(n),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o),ns(t)}function ls(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var k=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function oe(t,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,r):typeof r!="number"||r===0||k.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function _e(t,n,r){if(n!=null&&typeof n!="object")throw Error(l(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var u in n)o=n[u],n.hasOwnProperty(u)&&r[u]!==o&&oe(t,u,o)}else for(var m in n)n.hasOwnProperty(m)&&oe(t,m,n[m])}function Re(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var We=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bt(t){return Qt.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Zn(){}var na=null;function is(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ls=null,Bs=null;function ho(t){var n=Sn(t);if(n&&(t=n.stateNode)){var r=t[bt]||null;e:switch(t=n.stateNode,n.type){case"input":if(br(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+gn(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==t&&o.form===t.form){var u=o[bt]||null;if(!u)throw Error(l(90));br(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===t.form&&ia(o)}break e;case"textarea":rs(t,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&ss(t,!!r.multiple,n,!1)}}}var Xl=!1;function po(t,n,r){if(Xl)return t(n,r);Xl=!0;try{var o=t(n);return o}finally{if(Xl=!1,(Ls!==null||Bs!==null)&&(Jo(),Ls&&(n=Ls,t=Bs,Bs=Ls=null,ho(n),t)))for(n=0;n<t.length;n++)ho(t[n])}}function yr(t,n){var r=t.stateNode;if(r===null)return null;var o=r[bt]||null;if(o===null)return null;r=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(l(231,n,typeof r));return r}var Ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vr=!1;if(Ya)try{var xr={};Object.defineProperty(xr,"passive",{get:function(){vr=!0}}),window.addEventListener("test",xr,xr),window.removeEventListener("test",xr,xr)}catch{vr=!1}var os=null,E=null,H=null;function ge(){if(H)return H;var t,n=E,r=n.length,o,u="value"in os?os.value:os.textContent,m=u.length;for(t=0;t<r&&n[t]===u[t];t++);var y=r-t;for(o=1;o<=y&&n[r-o]===u[m-o];o++);return H=u.slice(t,1<o?1-o:void 0)}function Ue(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function lt(){return!0}function Ot(){return!1}function pt(t){function n(r,o,u,m,y){this._reactName=r,this._targetInst=u,this.type=o,this.nativeEvent=m,this.target=y,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(r=t[S],this[S]=r?r(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?lt:Ot,this.isPropagationStopped=Ot,this}return x(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=lt)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=lt)},persist:function(){},isPersistent:lt}),n}var wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oa=pt(wn),_t=x({},wn,{view:0,detail:0}),Jr=pt(_t),yu,vu,Jl,go=x({},_t,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Su,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jl&&(Jl&&t.type==="mousemove"?(yu=t.screenX-Jl.screenX,vu=t.screenY-Jl.screenY):vu=yu=0,Jl=t),yu)},movementY:function(t){return"movementY"in t?t.movementY:vu}}),fh=pt(go),M0=x({},go,{dataTransfer:0}),U0=pt(M0),L0=x({},_t,{relatedTarget:0}),xu=pt(L0),B0=x({},wn,{animationName:0,elapsedTime:0,pseudoElement:0}),q0=pt(B0),I0=x({},wn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$0=pt(I0),F0=x({},wn,{data:0}),mh=pt(F0),H0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function G0(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Z0[t])?!!n[t]:!1}function Su(){return G0}var P0=x({},_t,{key:function(t){if(t.key){var n=H0[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ue(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?V0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Su,charCode:function(t){return t.type==="keypress"?Ue(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ue(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Q0=pt(P0),Y0=x({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hh=pt(Y0),K0=x({},_t,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Su}),X0=pt(K0),J0=x({},wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),W0=pt(J0),eS=x({},go,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tS=pt(eS),nS=x({},wn,{newState:0,oldState:0}),aS=pt(nS),sS=[9,13,27,32],Nu=Ya&&"CompositionEvent"in window,Wl=null;Ya&&"documentMode"in document&&(Wl=document.documentMode);var rS=Ya&&"TextEvent"in window&&!Wl,ph=Ya&&(!Nu||Wl&&8<Wl&&11>=Wl),gh=" ",bh=!1;function yh(t,n){switch(t){case"keyup":return sS.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wr=!1;function lS(t,n){switch(t){case"compositionend":return vh(n);case"keypress":return n.which!==32?null:(bh=!0,gh);case"textInput":return t=n.data,t===gh&&bh?null:t;default:return null}}function iS(t,n){if(Wr)return t==="compositionend"||!Nu&&yh(t,n)?(t=ge(),H=E=os=null,Wr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ph&&n.locale!=="ko"?null:n.data;default:return null}}var oS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!oS[t.type]:n==="textarea"}function Sh(t,n,r,o){Ls?Bs?Bs.push(o):Bs=[o]:Ls=o,n=rc(n,"onChange"),0<n.length&&(r=new oa("onChange","change",null,r,o),t.push({event:r,listeners:n}))}var ei=null,ti=null;function cS(t){ab(t,0)}function bo(t){var n=Bn(t);if(ia(n))return t}function Nh(t,n){if(t==="change")return n}var wh=!1;if(Ya){var wu;if(Ya){var ju="oninput"in document;if(!ju){var jh=document.createElement("div");jh.setAttribute("oninput","return;"),ju=typeof jh.oninput=="function"}wu=ju}else wu=!1;wh=wu&&(!document.documentMode||9<document.documentMode)}function _h(){ei&&(ei.detachEvent("onpropertychange",Eh),ti=ei=null)}function Eh(t){if(t.propertyName==="value"&&bo(ti)){var n=[];Sh(n,ti,t,is(t)),po(cS,n)}}function uS(t,n,r){t==="focusin"?(_h(),ei=n,ti=r,ei.attachEvent("onpropertychange",Eh)):t==="focusout"&&_h()}function dS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bo(ti)}function fS(t,n){if(t==="click")return bo(n)}function mS(t,n){if(t==="input"||t==="change")return bo(n)}function hS(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Na=typeof Object.is=="function"?Object.is:hS;function ni(t,n){if(Na(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var u=r[o];if(!Je.call(n,u)||!Na(t[u],n[u]))return!1}return!0}function Ah(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ch(t,n){var r=Ah(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=n&&o>=n)return{node:r,offset:n-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ah(r)}}function Oh(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Oh(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Rh(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Qa(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=Qa(t.document)}return n}function _u(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var pS=Ya&&"documentMode"in document&&11>=document.documentMode,el=null,Eu=null,ai=null,Au=!1;function Th(t,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Au||el==null||el!==Qa(o)||(o=el,"selectionStart"in o&&_u(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ai&&ni(ai,o)||(ai=o,o=rc(Eu,"onSelect"),0<o.length&&(n=new oa("onSelect","select",null,n,r),t.push({event:n,listeners:o}),n.target=el)))}function Sr(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var tl={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionrun:Sr("Transition","TransitionRun"),transitionstart:Sr("Transition","TransitionStart"),transitioncancel:Sr("Transition","TransitionCancel"),transitionend:Sr("Transition","TransitionEnd")},Cu={},Dh={};Ya&&(Dh=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function Nr(t){if(Cu[t])return Cu[t];if(!tl[t])return t;var n=tl[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in Dh)return Cu[t]=n[r];return t}var zh=Nr("animationend"),kh=Nr("animationiteration"),Mh=Nr("animationstart"),gS=Nr("transitionrun"),bS=Nr("transitionstart"),yS=Nr("transitioncancel"),Uh=Nr("transitionend"),Lh=new Map,Ou="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ou.push("scrollEnd");function Ka(t,n){Lh.set(t,n),Nn(n,[t])}var yo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ta=[],nl=0,Ru=0;function vo(){for(var t=nl,n=Ru=nl=0;n<t;){var r=Ta[n];Ta[n++]=null;var o=Ta[n];Ta[n++]=null;var u=Ta[n];Ta[n++]=null;var m=Ta[n];if(Ta[n++]=null,o!==null&&u!==null){var y=o.pending;y===null?u.next=u:(u.next=y.next,y.next=u),o.pending=u}m!==0&&Bh(r,u,m)}}function xo(t,n,r,o){Ta[nl++]=t,Ta[nl++]=n,Ta[nl++]=r,Ta[nl++]=o,Ru|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Tu(t,n,r,o){return xo(t,n,r,o),So(t)}function wr(t,n){return xo(t,null,null,n),So(t)}function Bh(t,n,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var u=!1,m=t.return;m!==null;)m.childLanes|=r,o=m.alternate,o!==null&&(o.childLanes|=r),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(u=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,u&&n!==null&&(u=31-Et(r),t=m.hiddenUpdates,o=t[u],o===null?t[u]=[n]:o.push(n),n.lane=r|536870912),m):null}function So(t){if(50<_i)throw _i=0,Id=null,Error(l(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var al={};function vS(t,n,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wa(t,n,r,o){return new vS(t,n,r,o)}function Du(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ys(t,n){var r=t.alternate;return r===null?(r=wa(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function qh(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function No(t,n,r,o,u,m){var y=0;if(o=t,typeof t=="function")Du(t)&&(y=1);else if(typeof t=="string")y=jN(t,r,M.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ue:return t=wa(31,r,n,u),t.elementType=ue,t.lanes=m,t;case _:return jr(r.children,u,m,n);case C:y=8,u|=24;break;case q:return t=wa(12,r,n,u|2),t.elementType=q,t.lanes=m,t;case R:return t=wa(13,r,n,u),t.elementType=R,t.lanes=m,t;case Z:return t=wa(19,r,n,u),t.elementType=Z,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J:y=10;break e;case T:y=9;break e;case D:y=11;break e;case L:y=14;break e;case W:y=16,o=null;break e}y=29,r=Error(l(130,t===null?"null":typeof t,"")),o=null}return n=wa(y,r,n,u),n.elementType=t,n.type=o,n.lanes=m,n}function jr(t,n,r,o){return t=wa(7,t,o,n),t.lanes=r,t}function zu(t,n,r){return t=wa(6,t,null,n),t.lanes=r,t}function Ih(t){var n=wa(18,null,null,0);return n.stateNode=t,n}function ku(t,n,r){return n=wa(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var $h=new WeakMap;function Da(t,n){if(typeof t=="object"&&t!==null){var r=$h.get(t);return r!==void 0?r:(n={value:t,source:n,stack:Ce(n)},$h.set(t,n),n)}return{value:t,source:n,stack:Ce(n)}}var sl=[],rl=0,wo=null,si=0,za=[],ka=0,qs=null,cs=1,us="";function vs(t,n){sl[rl++]=si,sl[rl++]=wo,wo=t,si=n}function Fh(t,n,r){za[ka++]=cs,za[ka++]=us,za[ka++]=qs,qs=t;var o=cs;t=us;var u=32-Et(o)-1;o&=~(1<<u),r+=1;var m=32-Et(n)+u;if(30<m){var y=u-u%5;m=(o&(1<<y)-1).toString(32),o>>=y,u-=y,cs=1<<32-Et(n)+u|r<<u|o,us=m+t}else cs=1<<m|r<<u|o,us=t}function Mu(t){t.return!==null&&(vs(t,1),Fh(t,1,0))}function Uu(t){for(;t===wo;)wo=sl[--rl],sl[rl]=null,si=sl[--rl],sl[rl]=null;for(;t===qs;)qs=za[--ka],za[ka]=null,us=za[--ka],za[ka]=null,cs=za[--ka],za[ka]=null}function Hh(t,n){za[ka++]=cs,za[ka++]=us,za[ka++]=qs,cs=n.id,us=n.overflow,qs=t}var Gn=null,Yt=null,wt=!1,Is=null,Ma=!1,Lu=Error(l(519));function $s(t){var n=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ri(Da(n,t)),Lu}function Vh(t){var n=t.stateNode,r=t.type,o=t.memoizedProps;switch(n[ft]=t,n[bt]=o,r){case"dialog":vt("cancel",n),vt("close",n);break;case"iframe":case"object":case"embed":vt("load",n);break;case"video":case"audio":for(r=0;r<Ai.length;r++)vt(Ai[r],n);break;case"source":vt("error",n);break;case"img":case"image":case"link":vt("error",n),vt("load",n);break;case"details":vt("toggle",n);break;case"input":vt("invalid",n),as(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":vt("invalid",n);break;case"textarea":vt("invalid",n),Xr(n,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||ib(n.textContent,r)?(o.popover!=null&&(vt("beforetoggle",n),vt("toggle",n)),o.onScroll!=null&&vt("scroll",n),o.onScrollEnd!=null&&vt("scrollend",n),o.onClick!=null&&(n.onclick=Zn),n=!0):n=!1,n||$s(t,!0)}function Zh(t){for(Gn=t.return;Gn;)switch(Gn.tag){case 5:case 31:case 13:Ma=!1;return;case 27:case 3:Ma=!0;return;default:Gn=Gn.return}}function ll(t){if(t!==Gn)return!1;if(!wt)return Zh(t),wt=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||tf(t.type,t.memoizedProps)),r=!r),r&&Yt&&$s(t),Zh(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));Yt=gb(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));Yt=gb(t)}else n===27?(n=Yt,tr(t.type)?(t=lf,lf=null,Yt=t):Yt=n):Yt=Gn?La(t.stateNode.nextSibling):null;return!0}function _r(){Yt=Gn=null,wt=!1}function Bu(){var t=Is;return t!==null&&(fa===null?fa=t:fa.push.apply(fa,t),Is=null),t}function ri(t){Is===null?Is=[t]:Is.push(t)}var qu=w(null),Er=null,xs=null;function Fs(t,n,r){ie(qu,n._currentValue),n._currentValue=r}function Ss(t){t._currentValue=qu.current,P(qu)}function Iu(t,n,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===r)break;t=t.return}}function $u(t,n,r,o){var u=t.child;for(u!==null&&(u.return=t);u!==null;){var m=u.dependencies;if(m!==null){var y=u.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=u;for(var z=0;z<n.length;z++)if(S.context===n[z]){m.lanes|=r,S=m.alternate,S!==null&&(S.lanes|=r),Iu(m.return,r,t),o||(y=null);break e}m=S.next}}else if(u.tag===18){if(y=u.return,y===null)throw Error(l(341));y.lanes|=r,m=y.alternate,m!==null&&(m.lanes|=r),Iu(y,r,t),y=null}else y=u.child;if(y!==null)y.return=u;else for(y=u;y!==null;){if(y===t){y=null;break}if(u=y.sibling,u!==null){u.return=y.return,y=u;break}y=y.return}u=y}}function il(t,n,r,o){t=null;for(var u=n,m=!1;u!==null;){if(!m){if((u.flags&524288)!==0)m=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var y=u.alternate;if(y===null)throw Error(l(387));if(y=y.memoizedProps,y!==null){var S=u.type;Na(u.pendingProps.value,y.value)||(t!==null?t.push(S):t=[S])}}else if(u===De.current){if(y=u.alternate,y===null)throw Error(l(387));y.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(t!==null?t.push(Di):t=[Di])}u=u.return}t!==null&&$u(n,t,r,o),n.flags|=262144}function jo(t){for(t=t.firstContext;t!==null;){if(!Na(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ar(t){Er=t,xs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Pn(t){return Gh(Er,t)}function _o(t,n){return Er===null&&Ar(t),Gh(t,n)}function Gh(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},xs===null){if(t===null)throw Error(l(308));xs=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else xs=xs.next=n;return r}var xS=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},SS=e.unstable_scheduleCallback,NS=e.unstable_NormalPriority,jn={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fu(){return{controller:new xS,data:new Map,refCount:0}}function li(t){t.refCount--,t.refCount===0&&SS(NS,function(){t.controller.abort()})}var ii=null,Hu=0,ol=0,cl=null;function wS(t,n){if(ii===null){var r=ii=[];Hu=0,ol=Gd(),cl={status:"pending",value:void 0,then:function(o){r.push(o)}}}return Hu++,n.then(Ph,Ph),n}function Ph(){if(--Hu===0&&ii!==null){cl!==null&&(cl.status="fulfilled");var t=ii;ii=null,ol=0,cl=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function jS(t,n){var r=[],o={status:"pending",value:null,reason:null,then:function(u){r.push(u)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var u=0;u<r.length;u++)(0,r[u])(n)},function(u){for(o.status="rejected",o.reason=u,u=0;u<r.length;u++)(0,r[u])(void 0)}),o}var Qh=U.S;U.S=function(t,n){Tg=G(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&wS(t,n),Qh!==null&&Qh(t,n)};var Cr=w(null);function Vu(){var t=Cr.current;return t!==null?t:Vt.pooledCache}function Eo(t,n){n===null?ie(Cr,Cr.current):ie(Cr,n.pool)}function Yh(){var t=Vu();return t===null?null:{parent:jn._currentValue,pool:t}}var ul=Error(l(460)),Zu=Error(l(474)),Ao=Error(l(542)),Co={then:function(){}};function Kh(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Xh(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(Zn,Zn),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Wh(t),t;default:if(typeof n.status=="string")n.then(Zn,Zn);else{if(t=Vt,t!==null&&100<t.shellSuspendCounter)throw Error(l(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=o}},function(o){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Wh(t),t}throw Rr=n,ul}}function Or(t){try{var n=t._init;return n(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Rr=r,ul):r}}var Rr=null;function Jh(){if(Rr===null)throw Error(l(459));var t=Rr;return Rr=null,t}function Wh(t){if(t===ul||t===Ao)throw Error(l(483))}var dl=null,oi=0;function Oo(t){var n=oi;return oi+=1,dl===null&&(dl=[]),Xh(dl,t,n)}function ci(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Ro(t,n){throw n.$$typeof===N?Error(l(525)):(t=Object.prototype.toString.call(n),Error(l(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function ep(t){function n(F,B){if(t){var ee=F.deletions;ee===null?(F.deletions=[B],F.flags|=16):ee.push(B)}}function r(F,B){if(!t)return null;for(;B!==null;)n(F,B),B=B.sibling;return null}function o(F){for(var B=new Map;F!==null;)F.key!==null?B.set(F.key,F):B.set(F.index,F),F=F.sibling;return B}function u(F,B){return F=ys(F,B),F.index=0,F.sibling=null,F}function m(F,B,ee){return F.index=ee,t?(ee=F.alternate,ee!==null?(ee=ee.index,ee<B?(F.flags|=67108866,B):ee):(F.flags|=67108866,B)):(F.flags|=1048576,B)}function y(F){return t&&F.alternate===null&&(F.flags|=67108866),F}function S(F,B,ee,be){return B===null||B.tag!==6?(B=zu(ee,F.mode,be),B.return=F,B):(B=u(B,ee),B.return=F,B)}function z(F,B,ee,be){var Xe=ee.type;return Xe===_?de(F,B,ee.props.children,be,ee.key):B!==null&&(B.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===W&&Or(Xe)===B.type)?(B=u(B,ee.props),ci(B,ee),B.return=F,B):(B=No(ee.type,ee.key,ee.props,null,F.mode,be),ci(B,ee),B.return=F,B)}function te(F,B,ee,be){return B===null||B.tag!==4||B.stateNode.containerInfo!==ee.containerInfo||B.stateNode.implementation!==ee.implementation?(B=ku(ee,F.mode,be),B.return=F,B):(B=u(B,ee.children||[]),B.return=F,B)}function de(F,B,ee,be,Xe){return B===null||B.tag!==7?(B=jr(ee,F.mode,be,Xe),B.return=F,B):(B=u(B,ee),B.return=F,B)}function ve(F,B,ee){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=zu(""+B,F.mode,ee),B.return=F,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case I:return ee=No(B.type,B.key,B.props,null,F.mode,ee),ci(ee,B),ee.return=F,ee;case j:return B=ku(B,F.mode,ee),B.return=F,B;case W:return B=Or(B),ve(F,B,ee)}if(Te(B)||he(B))return B=jr(B,F.mode,ee,null),B.return=F,B;if(typeof B.then=="function")return ve(F,Oo(B),ee);if(B.$$typeof===J)return ve(F,_o(F,B),ee);Ro(F,B)}return null}function ne(F,B,ee,be){var Xe=B!==null?B.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Xe!==null?null:S(F,B,""+ee,be);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case I:return ee.key===Xe?z(F,B,ee,be):null;case j:return ee.key===Xe?te(F,B,ee,be):null;case W:return ee=Or(ee),ne(F,B,ee,be)}if(Te(ee)||he(ee))return Xe!==null?null:de(F,B,ee,be,null);if(typeof ee.then=="function")return ne(F,B,Oo(ee),be);if(ee.$$typeof===J)return ne(F,B,_o(F,ee),be);Ro(F,ee)}return null}function le(F,B,ee,be,Xe){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return F=F.get(ee)||null,S(B,F,""+be,Xe);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case I:return F=F.get(be.key===null?ee:be.key)||null,z(B,F,be,Xe);case j:return F=F.get(be.key===null?ee:be.key)||null,te(B,F,be,Xe);case W:return be=Or(be),le(F,B,ee,be,Xe)}if(Te(be)||he(be))return F=F.get(ee)||null,de(B,F,be,Xe,null);if(typeof be.then=="function")return le(F,B,ee,Oo(be),Xe);if(be.$$typeof===J)return le(F,B,ee,_o(B,be),Xe);Ro(B,be)}return null}function Pe(F,B,ee,be){for(var Xe=null,At=null,Qe=B,mt=B=0,St=null;Qe!==null&&mt<ee.length;mt++){Qe.index>mt?(St=Qe,Qe=null):St=Qe.sibling;var Ct=ne(F,Qe,ee[mt],be);if(Ct===null){Qe===null&&(Qe=St);break}t&&Qe&&Ct.alternate===null&&n(F,Qe),B=m(Ct,B,mt),At===null?Xe=Ct:At.sibling=Ct,At=Ct,Qe=St}if(mt===ee.length)return r(F,Qe),wt&&vs(F,mt),Xe;if(Qe===null){for(;mt<ee.length;mt++)Qe=ve(F,ee[mt],be),Qe!==null&&(B=m(Qe,B,mt),At===null?Xe=Qe:At.sibling=Qe,At=Qe);return wt&&vs(F,mt),Xe}for(Qe=o(Qe);mt<ee.length;mt++)St=le(Qe,F,mt,ee[mt],be),St!==null&&(t&&St.alternate!==null&&Qe.delete(St.key===null?mt:St.key),B=m(St,B,mt),At===null?Xe=St:At.sibling=St,At=St);return t&&Qe.forEach(function(lr){return n(F,lr)}),wt&&vs(F,mt),Xe}function nt(F,B,ee,be){if(ee==null)throw Error(l(151));for(var Xe=null,At=null,Qe=B,mt=B=0,St=null,Ct=ee.next();Qe!==null&&!Ct.done;mt++,Ct=ee.next()){Qe.index>mt?(St=Qe,Qe=null):St=Qe.sibling;var lr=ne(F,Qe,Ct.value,be);if(lr===null){Qe===null&&(Qe=St);break}t&&Qe&&lr.alternate===null&&n(F,Qe),B=m(lr,B,mt),At===null?Xe=lr:At.sibling=lr,At=lr,Qe=St}if(Ct.done)return r(F,Qe),wt&&vs(F,mt),Xe;if(Qe===null){for(;!Ct.done;mt++,Ct=ee.next())Ct=ve(F,Ct.value,be),Ct!==null&&(B=m(Ct,B,mt),At===null?Xe=Ct:At.sibling=Ct,At=Ct);return wt&&vs(F,mt),Xe}for(Qe=o(Qe);!Ct.done;mt++,Ct=ee.next())Ct=le(Qe,F,mt,Ct.value,be),Ct!==null&&(t&&Ct.alternate!==null&&Qe.delete(Ct.key===null?mt:Ct.key),B=m(Ct,B,mt),At===null?Xe=Ct:At.sibling=Ct,At=Ct);return t&&Qe.forEach(function(MN){return n(F,MN)}),wt&&vs(F,mt),Xe}function $t(F,B,ee,be){if(typeof ee=="object"&&ee!==null&&ee.type===_&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case I:e:{for(var Xe=ee.key;B!==null;){if(B.key===Xe){if(Xe=ee.type,Xe===_){if(B.tag===7){r(F,B.sibling),be=u(B,ee.props.children),be.return=F,F=be;break e}}else if(B.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===W&&Or(Xe)===B.type){r(F,B.sibling),be=u(B,ee.props),ci(be,ee),be.return=F,F=be;break e}r(F,B);break}else n(F,B);B=B.sibling}ee.type===_?(be=jr(ee.props.children,F.mode,be,ee.key),be.return=F,F=be):(be=No(ee.type,ee.key,ee.props,null,F.mode,be),ci(be,ee),be.return=F,F=be)}return y(F);case j:e:{for(Xe=ee.key;B!==null;){if(B.key===Xe)if(B.tag===4&&B.stateNode.containerInfo===ee.containerInfo&&B.stateNode.implementation===ee.implementation){r(F,B.sibling),be=u(B,ee.children||[]),be.return=F,F=be;break e}else{r(F,B);break}else n(F,B);B=B.sibling}be=ku(ee,F.mode,be),be.return=F,F=be}return y(F);case W:return ee=Or(ee),$t(F,B,ee,be)}if(Te(ee))return Pe(F,B,ee,be);if(he(ee)){if(Xe=he(ee),typeof Xe!="function")throw Error(l(150));return ee=Xe.call(ee),nt(F,B,ee,be)}if(typeof ee.then=="function")return $t(F,B,Oo(ee),be);if(ee.$$typeof===J)return $t(F,B,_o(F,ee),be);Ro(F,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,B!==null&&B.tag===6?(r(F,B.sibling),be=u(B,ee),be.return=F,F=be):(r(F,B),be=zu(ee,F.mode,be),be.return=F,F=be),y(F)):r(F,B)}return function(F,B,ee,be){try{oi=0;var Xe=$t(F,B,ee,be);return dl=null,Xe}catch(Qe){if(Qe===ul||Qe===Ao)throw Qe;var At=wa(29,Qe,null,F.mode);return At.lanes=be,At.return=F,At}finally{}}}var Tr=ep(!0),tp=ep(!1),Hs=!1;function Gu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pu(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Vs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Zs(t,n,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Rt&2)!==0){var u=o.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),o.pending=n,n=So(t),Bh(t,null,r),n}return xo(t,o,n,r),So(t)}function ui(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,ot(t,r)}}function Qu(t,n){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var u=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var y={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?u=m=y:m=m.next=y,r=r.next}while(r!==null);m===null?u=m=n:m=m.next=n}else u=m=n;r={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var Yu=!1;function di(){if(Yu){var t=cl;if(t!==null)throw t}}function fi(t,n,r,o){Yu=!1;var u=t.updateQueue;Hs=!1;var m=u.firstBaseUpdate,y=u.lastBaseUpdate,S=u.shared.pending;if(S!==null){u.shared.pending=null;var z=S,te=z.next;z.next=null,y===null?m=te:y.next=te,y=z;var de=t.alternate;de!==null&&(de=de.updateQueue,S=de.lastBaseUpdate,S!==y&&(S===null?de.firstBaseUpdate=te:S.next=te,de.lastBaseUpdate=z))}if(m!==null){var ve=u.baseState;y=0,de=te=z=null,S=m;do{var ne=S.lane&-536870913,le=ne!==S.lane;if(le?(xt&ne)===ne:(o&ne)===ne){ne!==0&&ne===ol&&(Yu=!0),de!==null&&(de=de.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Pe=t,nt=S;ne=n;var $t=r;switch(nt.tag){case 1:if(Pe=nt.payload,typeof Pe=="function"){ve=Pe.call($t,ve,ne);break e}ve=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=nt.payload,ne=typeof Pe=="function"?Pe.call($t,ve,ne):Pe,ne==null)break e;ve=x({},ve,ne);break e;case 2:Hs=!0}}ne=S.callback,ne!==null&&(t.flags|=64,le&&(t.flags|=8192),le=u.callbacks,le===null?u.callbacks=[ne]:le.push(ne))}else le={lane:ne,tag:S.tag,payload:S.payload,callback:S.callback,next:null},de===null?(te=de=le,z=ve):de=de.next=le,y|=ne;if(S=S.next,S===null){if(S=u.shared.pending,S===null)break;le=S,S=le.next,le.next=null,u.lastBaseUpdate=le,u.shared.pending=null}}while(!0);de===null&&(z=ve),u.baseState=z,u.firstBaseUpdate=te,u.lastBaseUpdate=de,m===null&&(u.shared.lanes=0),Ks|=y,t.lanes=y,t.memoizedState=ve}}function np(t,n){if(typeof t!="function")throw Error(l(191,t));t.call(n)}function ap(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)np(r[t],n)}var fl=w(null),To=w(0);function sp(t,n){t=Rs,ie(To,t),ie(fl,n),Rs=t|n.baseLanes}function Ku(){ie(To,Rs),ie(fl,fl.current)}function Xu(){Rs=To.current,P(fl),P(To)}var ja=w(null),Ua=null;function Gs(t){var n=t.alternate;ie(bn,bn.current&1),ie(ja,t),Ua===null&&(n===null||fl.current!==null||n.memoizedState!==null)&&(Ua=t)}function Ju(t){ie(bn,bn.current),ie(ja,t),Ua===null&&(Ua=t)}function rp(t){t.tag===22?(ie(bn,bn.current),ie(ja,t),Ua===null&&(Ua=t)):Ps()}function Ps(){ie(bn,bn.current),ie(ja,ja.current)}function _a(t){P(ja),Ua===t&&(Ua=null),P(bn)}var bn=w(0);function Do(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||sf(r)||rf(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ns=0,ct=null,qt=null,_n=null,zo=!1,ml=!1,Dr=!1,ko=0,mi=0,hl=null,_S=0;function fn(){throw Error(l(321))}function Wu(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!Na(t[r],n[r]))return!1;return!0}function ed(t,n,r,o,u,m){return Ns=m,ct=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,U.H=t===null||t.memoizedState===null?Fp:pd,Dr=!1,m=r(o,u),Dr=!1,ml&&(m=ip(n,r,o,u)),lp(t),m}function lp(t){U.H=gi;var n=qt!==null&&qt.next!==null;if(Ns=0,_n=qt=ct=null,zo=!1,mi=0,hl=null,n)throw Error(l(300));t===null||En||(t=t.dependencies,t!==null&&jo(t)&&(En=!0))}function ip(t,n,r,o){ct=t;var u=0;do{if(ml&&(hl=null),mi=0,ml=!1,25<=u)throw Error(l(301));if(u+=1,_n=qt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}U.H=Hp,m=n(r,o)}while(ml);return m}function ES(){var t=U.H,n=t.useState()[0];return n=typeof n.then=="function"?hi(n):n,t=t.useState()[0],(qt!==null?qt.memoizedState:null)!==t&&(ct.flags|=1024),n}function td(){var t=ko!==0;return ko=0,t}function nd(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function ad(t){if(zo){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}zo=!1}Ns=0,_n=qt=ct=null,ml=!1,mi=ko=0,hl=null}function aa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?ct.memoizedState=_n=t:_n=_n.next=t,_n}function yn(){if(qt===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=qt.next;var n=_n===null?ct.memoizedState:_n.next;if(n!==null)_n=n,qt=t;else{if(t===null)throw ct.alternate===null?Error(l(467)):Error(l(310));qt=t,t={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},_n===null?ct.memoizedState=_n=t:_n=_n.next=t}return _n}function Mo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hi(t){var n=mi;return mi+=1,hl===null&&(hl=[]),t=Xh(hl,t,n),n=ct,(_n===null?n.memoizedState:_n.next)===null&&(n=n.alternate,U.H=n===null||n.memoizedState===null?Fp:pd),t}function Uo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return hi(t);if(t.$$typeof===J)return Pn(t)}throw Error(l(438,String(t)))}function sd(t){var n=null,r=ct.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=ct.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Mo(),ct.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),o=0;o<t;o++)r[o]=Ae;return n.index++,r}function ws(t,n){return typeof n=="function"?n(t):n}function Lo(t){var n=yn();return rd(n,qt,t)}function rd(t,n,r){var o=t.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=r;var u=t.baseQueue,m=o.pending;if(m!==null){if(u!==null){var y=u.next;u.next=m.next,m.next=y}n.baseQueue=u=m,o.pending=null}if(m=t.baseState,u===null)t.memoizedState=m;else{n=u.next;var S=y=null,z=null,te=n,de=!1;do{var ve=te.lane&-536870913;if(ve!==te.lane?(xt&ve)===ve:(Ns&ve)===ve){var ne=te.revertLane;if(ne===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),ve===ol&&(de=!0);else if((Ns&ne)===ne){te=te.next,ne===ol&&(de=!0);continue}else ve={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},z===null?(S=z=ve,y=m):z=z.next=ve,ct.lanes|=ne,Ks|=ne;ve=te.action,Dr&&r(m,ve),m=te.hasEagerState?te.eagerState:r(m,ve)}else ne={lane:ve,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},z===null?(S=z=ne,y=m):z=z.next=ne,ct.lanes|=ve,Ks|=ve;te=te.next}while(te!==null&&te!==n);if(z===null?y=m:z.next=S,!Na(m,t.memoizedState)&&(En=!0,de&&(r=cl,r!==null)))throw r;t.memoizedState=m,t.baseState=y,t.baseQueue=z,o.lastRenderedState=m}return u===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function ld(t){var n=yn(),r=n.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=t;var o=r.dispatch,u=r.pending,m=n.memoizedState;if(u!==null){r.pending=null;var y=u=u.next;do m=t(m,y.action),y=y.next;while(y!==u);Na(m,n.memoizedState)||(En=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),r.lastRenderedState=m}return[m,o]}function op(t,n,r){var o=ct,u=yn(),m=wt;if(m){if(r===void 0)throw Error(l(407));r=r()}else r=n();var y=!Na((qt||u).memoizedState,r);if(y&&(u.memoizedState=r,En=!0),u=u.queue,cd(dp.bind(null,o,u,t),[t]),u.getSnapshot!==n||y||_n!==null&&_n.memoizedState.tag&1){if(o.flags|=2048,pl(9,{destroy:void 0},up.bind(null,o,u,r,n),null),Vt===null)throw Error(l(349));m||(Ns&127)!==0||cp(o,n,r)}return r}function cp(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=ct.updateQueue,n===null?(n=Mo(),ct.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function up(t,n,r,o){n.value=r,n.getSnapshot=o,fp(n)&&mp(t)}function dp(t,n,r){return r(function(){fp(n)&&mp(t)})}function fp(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!Na(t,r)}catch{return!0}}function mp(t){var n=wr(t,2);n!==null&&ma(n,t,2)}function id(t){var n=aa();if(typeof t=="function"){var r=t;if(t=r(),Dr){Ft(!0);try{r()}finally{Ft(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:t},n}function hp(t,n,r,o){return t.baseState=r,rd(t,qt,typeof o=="function"?o:ws)}function AS(t,n,r,o,u){if(Io(t))throw Error(l(485));if(t=n.action,t!==null){var m={payload:u,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){m.listeners.push(y)}};U.T!==null?r(!0):m.isTransition=!1,o(m),r=n.pending,r===null?(m.next=n.pending=m,pp(n,m)):(m.next=r.next,n.pending=r.next=m)}}function pp(t,n){var r=n.action,o=n.payload,u=t.state;if(n.isTransition){var m=U.T,y={};U.T=y;try{var S=r(u,o),z=U.S;z!==null&&z(y,S),gp(t,n,S)}catch(te){od(t,n,te)}finally{m!==null&&y.types!==null&&(m.types=y.types),U.T=m}}else try{m=r(u,o),gp(t,n,m)}catch(te){od(t,n,te)}}function gp(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){bp(t,n,o)},function(o){return od(t,n,o)}):bp(t,n,r)}function bp(t,n,r){n.status="fulfilled",n.value=r,yp(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,pp(t,r)))}function od(t,n,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,yp(n),n=n.next;while(n!==o)}t.action=null}function yp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function vp(t,n){return n}function xp(t,n){if(wt){var r=Vt.formState;if(r!==null){e:{var o=ct;if(wt){if(Yt){t:{for(var u=Yt,m=Ma;u.nodeType!==8;){if(!m){u=null;break t}if(u=La(u.nextSibling),u===null){u=null;break t}}m=u.data,u=m==="F!"||m==="F"?u:null}if(u){Yt=La(u.nextSibling),o=u.data==="F!";break e}}$s(o)}o=!1}o&&(n=r[0])}}return r=aa(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vp,lastRenderedState:n},r.queue=o,r=qp.bind(null,ct,o),o.dispatch=r,o=id(!1),m=hd.bind(null,ct,!1,o.queue),o=aa(),u={state:n,dispatch:null,action:t,pending:null},o.queue=u,r=AS.bind(null,ct,u,m,r),u.dispatch=r,o.memoizedState=t,[n,r,!1]}function Sp(t){var n=yn();return Np(n,qt,t)}function Np(t,n,r){if(n=rd(t,n,vp)[0],t=Lo(ws)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=hi(n)}catch(y){throw y===ul?Ao:y}else o=n;n=yn();var u=n.queue,m=u.dispatch;return r!==n.memoizedState&&(ct.flags|=2048,pl(9,{destroy:void 0},CS.bind(null,u,r),null)),[o,m,t]}function CS(t,n){t.action=n}function wp(t){var n=yn(),r=qt;if(r!==null)return Np(n,r,t);yn(),n=n.memoizedState,r=yn();var o=r.queue.dispatch;return r.memoizedState=t,[n,o,!1]}function pl(t,n,r,o){return t={tag:t,create:r,deps:o,inst:n,next:null},n=ct.updateQueue,n===null&&(n=Mo(),ct.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,n.lastEffect=t),t}function jp(){return yn().memoizedState}function Bo(t,n,r,o){var u=aa();ct.flags|=t,u.memoizedState=pl(1|n,{destroy:void 0},r,o===void 0?null:o)}function qo(t,n,r,o){var u=yn();o=o===void 0?null:o;var m=u.memoizedState.inst;qt!==null&&o!==null&&Wu(o,qt.memoizedState.deps)?u.memoizedState=pl(n,m,r,o):(ct.flags|=t,u.memoizedState=pl(1|n,m,r,o))}function _p(t,n){Bo(8390656,8,t,n)}function cd(t,n){qo(2048,8,t,n)}function OS(t){ct.flags|=4;var n=ct.updateQueue;if(n===null)n=Mo(),ct.updateQueue=n,n.events=[t];else{var r=n.events;r===null?n.events=[t]:r.push(t)}}function Ep(t){var n=yn().memoizedState;return OS({ref:n,nextImpl:t}),function(){if((Rt&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}function Ap(t,n){return qo(4,2,t,n)}function Cp(t,n){return qo(4,4,t,n)}function Op(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Rp(t,n,r){r=r!=null?r.concat([t]):null,qo(4,4,Op.bind(null,n,t),r)}function ud(){}function Tp(t,n){var r=yn();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&Wu(n,o[1])?o[0]:(r.memoizedState=[t,n],t)}function Dp(t,n){var r=yn();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&Wu(n,o[1]))return o[0];if(o=t(),Dr){Ft(!0);try{t()}finally{Ft(!1)}}return r.memoizedState=[o,n],o}function dd(t,n,r){return r===void 0||(Ns&1073741824)!==0&&(xt&261930)===0?t.memoizedState=n:(t.memoizedState=r,t=zg(),ct.lanes|=t,Ks|=t,r)}function zp(t,n,r,o){return Na(r,n)?r:fl.current!==null?(t=dd(t,r,o),Na(t,n)||(En=!0),t):(Ns&42)===0||(Ns&1073741824)!==0&&(xt&261930)===0?(En=!0,t.memoizedState=r):(t=zg(),ct.lanes|=t,Ks|=t,n)}function kp(t,n,r,o,u){var m=$.p;$.p=m!==0&&8>m?m:8;var y=U.T,S={};U.T=S,hd(t,!1,n,r);try{var z=u(),te=U.S;if(te!==null&&te(S,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var de=jS(z,o);pi(t,n,de,Ca(t))}else pi(t,n,o,Ca(t))}catch(ve){pi(t,n,{then:function(){},status:"rejected",reason:ve},Ca())}finally{$.p=m,y!==null&&S.types!==null&&(y.types=S.types),U.T=y}}function RS(){}function fd(t,n,r,o){if(t.tag!==5)throw Error(l(476));var u=Mp(t).queue;kp(t,u,n,X,r===null?RS:function(){return Up(t),r(o)})}function Mp(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:X},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Up(t){var n=Mp(t);n.next===null&&(n=t.alternate.memoizedState),pi(t,n.next.queue,{},Ca())}function md(){return Pn(Di)}function Lp(){return yn().memoizedState}function Bp(){return yn().memoizedState}function TS(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=Ca();t=Vs(r);var o=Zs(n,t,r);o!==null&&(ma(o,n,r),ui(o,n,r)),n={cache:Fu()},t.payload=n;return}n=n.return}}function DS(t,n,r){var o=Ca();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Io(t)?Ip(n,r):(r=Tu(t,n,r,o),r!==null&&(ma(r,t,o),$p(r,n,o)))}function qp(t,n,r){var o=Ca();pi(t,n,r,o)}function pi(t,n,r,o){var u={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Io(t))Ip(n,u);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var y=n.lastRenderedState,S=m(y,r);if(u.hasEagerState=!0,u.eagerState=S,Na(S,y))return xo(t,n,u,0),Vt===null&&vo(),!1}catch{}finally{}if(r=Tu(t,n,u,o),r!==null)return ma(r,t,o),$p(r,n,o),!0}return!1}function hd(t,n,r,o){if(o={lane:2,revertLane:Gd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Io(t)){if(n)throw Error(l(479))}else n=Tu(t,r,o,2),n!==null&&ma(n,t,2)}function Io(t){var n=t.alternate;return t===ct||n!==null&&n===ct}function Ip(t,n){ml=zo=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function $p(t,n,r){if((r&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,ot(t,r)}}var gi={readContext:Pn,use:Uo,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useLayoutEffect:fn,useInsertionEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useSyncExternalStore:fn,useId:fn,useHostTransitionStatus:fn,useFormState:fn,useActionState:fn,useOptimistic:fn,useMemoCache:fn,useCacheRefresh:fn};gi.useEffectEvent=fn;var Fp={readContext:Pn,use:Uo,useCallback:function(t,n){return aa().memoizedState=[t,n===void 0?null:n],t},useContext:Pn,useEffect:_p,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,Bo(4194308,4,Op.bind(null,n,t),r)},useLayoutEffect:function(t,n){return Bo(4194308,4,t,n)},useInsertionEffect:function(t,n){Bo(4,2,t,n)},useMemo:function(t,n){var r=aa();n=n===void 0?null:n;var o=t();if(Dr){Ft(!0);try{t()}finally{Ft(!1)}}return r.memoizedState=[o,n],o},useReducer:function(t,n,r){var o=aa();if(r!==void 0){var u=r(n);if(Dr){Ft(!0);try{r(n)}finally{Ft(!1)}}}else u=n;return o.memoizedState=o.baseState=u,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:u},o.queue=t,t=t.dispatch=DS.bind(null,ct,t),[o.memoizedState,t]},useRef:function(t){var n=aa();return t={current:t},n.memoizedState=t},useState:function(t){t=id(t);var n=t.queue,r=qp.bind(null,ct,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:ud,useDeferredValue:function(t,n){var r=aa();return dd(r,t,n)},useTransition:function(){var t=id(!1);return t=kp.bind(null,ct,t.queue,!0,!1),aa().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var o=ct,u=aa();if(wt){if(r===void 0)throw Error(l(407));r=r()}else{if(r=n(),Vt===null)throw Error(l(349));(xt&127)!==0||cp(o,n,r)}u.memoizedState=r;var m={value:r,getSnapshot:n};return u.queue=m,_p(dp.bind(null,o,m,t),[t]),o.flags|=2048,pl(9,{destroy:void 0},up.bind(null,o,m,r,n),null),r},useId:function(){var t=aa(),n=Vt.identifierPrefix;if(wt){var r=us,o=cs;r=(o&~(1<<32-Et(o)-1)).toString(32)+r,n="_"+n+"R_"+r,r=ko++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=_S++,n="_"+n+"r_"+r.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:md,useFormState:xp,useActionState:xp,useOptimistic:function(t){var n=aa();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=hd.bind(null,ct,!0,r),r.dispatch=n,[t,n]},useMemoCache:sd,useCacheRefresh:function(){return aa().memoizedState=TS.bind(null,ct)},useEffectEvent:function(t){var n=aa(),r={impl:t};return n.memoizedState=r,function(){if((Rt&2)!==0)throw Error(l(440));return r.impl.apply(void 0,arguments)}}},pd={readContext:Pn,use:Uo,useCallback:Tp,useContext:Pn,useEffect:cd,useImperativeHandle:Rp,useInsertionEffect:Ap,useLayoutEffect:Cp,useMemo:Dp,useReducer:Lo,useRef:jp,useState:function(){return Lo(ws)},useDebugValue:ud,useDeferredValue:function(t,n){var r=yn();return zp(r,qt.memoizedState,t,n)},useTransition:function(){var t=Lo(ws)[0],n=yn().memoizedState;return[typeof t=="boolean"?t:hi(t),n]},useSyncExternalStore:op,useId:Lp,useHostTransitionStatus:md,useFormState:Sp,useActionState:Sp,useOptimistic:function(t,n){var r=yn();return hp(r,qt,t,n)},useMemoCache:sd,useCacheRefresh:Bp};pd.useEffectEvent=Ep;var Hp={readContext:Pn,use:Uo,useCallback:Tp,useContext:Pn,useEffect:cd,useImperativeHandle:Rp,useInsertionEffect:Ap,useLayoutEffect:Cp,useMemo:Dp,useReducer:ld,useRef:jp,useState:function(){return ld(ws)},useDebugValue:ud,useDeferredValue:function(t,n){var r=yn();return qt===null?dd(r,t,n):zp(r,qt.memoizedState,t,n)},useTransition:function(){var t=ld(ws)[0],n=yn().memoizedState;return[typeof t=="boolean"?t:hi(t),n]},useSyncExternalStore:op,useId:Lp,useHostTransitionStatus:md,useFormState:wp,useActionState:wp,useOptimistic:function(t,n){var r=yn();return qt!==null?hp(r,qt,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:sd,useCacheRefresh:Bp};Hp.useEffectEvent=Ep;function gd(t,n,r,o){n=t.memoizedState,r=r(o,n),r=r==null?n:x({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var bd={enqueueSetState:function(t,n,r){t=t._reactInternals;var o=Ca(),u=Vs(o);u.payload=n,r!=null&&(u.callback=r),n=Zs(t,u,o),n!==null&&(ma(n,t,o),ui(n,t,o))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var o=Ca(),u=Vs(o);u.tag=1,u.payload=n,r!=null&&(u.callback=r),n=Zs(t,u,o),n!==null&&(ma(n,t,o),ui(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=Ca(),o=Vs(r);o.tag=2,n!=null&&(o.callback=n),n=Zs(t,o,r),n!==null&&(ma(n,t,r),ui(n,t,r))}};function Vp(t,n,r,o,u,m,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,y):n.prototype&&n.prototype.isPureReactComponent?!ni(r,o)||!ni(u,m):!0}function Zp(t,n,r,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==t&&bd.enqueueReplaceState(n,n.state,null)}function zr(t,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(t=t.defaultProps){r===n&&(r=x({},r));for(var u in t)r[u]===void 0&&(r[u]=t[u])}return r}function Gp(t){yo(t)}function Pp(t){console.error(t)}function Qp(t){yo(t)}function $o(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Yp(t,n,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function yd(t,n,r){return r=Vs(r),r.tag=3,r.payload={element:null},r.callback=function(){$o(t,n)},r}function Kp(t){return t=Vs(t),t.tag=3,t}function Xp(t,n,r,o){var u=r.type.getDerivedStateFromError;if(typeof u=="function"){var m=o.value;t.payload=function(){return u(m)},t.callback=function(){Yp(n,r,o)}}var y=r.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){Yp(n,r,o),typeof u!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})})}function zS(t,n,r,o,u){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&il(n,r,u,!0),r=ja.current,r!==null){switch(r.tag){case 31:case 13:return Ua===null?Wo():r.alternate===null&&mn===0&&(mn=3),r.flags&=-257,r.flags|=65536,r.lanes=u,o===Co?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),Hd(t,o,u)),!1;case 22:return r.flags|=65536,o===Co?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),Hd(t,o,u)),!1}throw Error(l(435,r.tag))}return Hd(t,o,u),Wo(),!1}if(wt)return n=ja.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,o!==Lu&&(t=Error(l(422),{cause:o}),ri(Da(t,r)))):(o!==Lu&&(n=Error(l(423),{cause:o}),ri(Da(n,r))),t=t.current.alternate,t.flags|=65536,u&=-u,t.lanes|=u,o=Da(o,r),u=yd(t.stateNode,o,u),Qu(t,u),mn!==4&&(mn=2)),!1;var m=Error(l(520),{cause:o});if(m=Da(m,r),ji===null?ji=[m]:ji.push(m),mn!==4&&(mn=2),n===null)return!0;o=Da(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=u&-u,r.lanes|=t,t=yd(r.stateNode,o,t),Qu(r,t),!1;case 1:if(n=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Xs===null||!Xs.has(m))))return r.flags|=65536,u&=-u,r.lanes|=u,u=Kp(u),Xp(u,t,r,o),Qu(r,u),!1}r=r.return}while(r!==null);return!1}var vd=Error(l(461)),En=!1;function Qn(t,n,r,o){n.child=t===null?tp(n,null,r,o):Tr(n,t.child,r,o)}function Jp(t,n,r,o,u){r=r.render;var m=n.ref;if("ref"in o){var y={};for(var S in o)S!=="ref"&&(y[S]=o[S])}else y=o;return Ar(n),o=ed(t,n,r,y,m,u),S=td(),t!==null&&!En?(nd(t,n,u),js(t,n,u)):(wt&&S&&Mu(n),n.flags|=1,Qn(t,n,o,u),n.child)}function Wp(t,n,r,o,u){if(t===null){var m=r.type;return typeof m=="function"&&!Du(m)&&m.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=m,eg(t,n,m,o,u)):(t=No(r.type,null,o,n,n.mode,u),t.ref=n.ref,t.return=n,n.child=t)}if(m=t.child,!Ad(t,u)){var y=m.memoizedProps;if(r=r.compare,r=r!==null?r:ni,r(y,o)&&t.ref===n.ref)return js(t,n,u)}return n.flags|=1,t=ys(m,o),t.ref=n.ref,t.return=n,n.child=t}function eg(t,n,r,o,u){if(t!==null){var m=t.memoizedProps;if(ni(m,o)&&t.ref===n.ref)if(En=!1,n.pendingProps=o=m,Ad(t,u))(t.flags&131072)!==0&&(En=!0);else return n.lanes=t.lanes,js(t,n,u)}return xd(t,n,r,o,u)}function tg(t,n,r,o){var u=o.children,m=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,t!==null){for(o=n.child=t.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~m}else o=0,n.child=null;return ng(t,n,m,r,o)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Eo(n,m!==null?m.cachePool:null),m!==null?sp(n,m):Ku(),rp(n);else return o=n.lanes=536870912,ng(t,n,m!==null?m.baseLanes|r:r,r,o)}else m!==null?(Eo(n,m.cachePool),sp(n,m),Ps(),n.memoizedState=null):(t!==null&&Eo(n,null),Ku(),Ps());return Qn(t,n,u,r),n.child}function bi(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function ng(t,n,r,o,u){var m=Vu();return m=m===null?null:{parent:jn._currentValue,pool:m},n.memoizedState={baseLanes:r,cachePool:m},t!==null&&Eo(n,null),Ku(),rp(n),t!==null&&il(t,n,o,!0),n.childLanes=u,null}function Fo(t,n){return n=Vo({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function ag(t,n,r){return Tr(n,t.child,null,r),t=Fo(n,n.pendingProps),t.flags|=2,_a(n),n.memoizedState=null,t}function kS(t,n,r){var o=n.pendingProps,u=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(wt){if(o.mode==="hidden")return t=Fo(n,o),n.lanes=536870912,bi(null,t);if(Ju(n),(t=Yt)?(t=pb(t,Ma),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:qs!==null?{id:cs,overflow:us}:null,retryLane:536870912,hydrationErrors:null},r=Ih(t),r.return=n,n.child=r,Gn=n,Yt=null)):t=null,t===null)throw $s(n);return n.lanes=536870912,null}return Fo(n,o)}var m=t.memoizedState;if(m!==null){var y=m.dehydrated;if(Ju(n),u)if(n.flags&256)n.flags&=-257,n=ag(t,n,r);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(l(558));else if(En||il(t,n,r,!1),u=(r&t.childLanes)!==0,En||u){if(o=Vt,o!==null&&(y=Ke(o,r),y!==0&&y!==m.retryLane))throw m.retryLane=y,wr(t,y),ma(o,t,y),vd;Wo(),n=ag(t,n,r)}else t=m.treeContext,Yt=La(y.nextSibling),Gn=n,wt=!0,Is=null,Ma=!1,t!==null&&Hh(n,t),n=Fo(n,o),n.flags|=4096;return n}return t=ys(t.child,{mode:o.mode,children:o.children}),t.ref=n.ref,n.child=t,t.return=n,t}function Ho(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(l(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function xd(t,n,r,o,u){return Ar(n),r=ed(t,n,r,o,void 0,u),o=td(),t!==null&&!En?(nd(t,n,u),js(t,n,u)):(wt&&o&&Mu(n),n.flags|=1,Qn(t,n,r,u),n.child)}function sg(t,n,r,o,u,m){return Ar(n),n.updateQueue=null,r=ip(n,o,r,u),lp(t),o=td(),t!==null&&!En?(nd(t,n,m),js(t,n,m)):(wt&&o&&Mu(n),n.flags|=1,Qn(t,n,r,m),n.child)}function rg(t,n,r,o,u){if(Ar(n),n.stateNode===null){var m=al,y=r.contextType;typeof y=="object"&&y!==null&&(m=Pn(y)),m=new r(o,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=bd,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=o,m.state=n.memoizedState,m.refs={},Gu(n),y=r.contextType,m.context=typeof y=="object"&&y!==null?Pn(y):al,m.state=n.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(gd(n,r,y,o),m.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(y=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),y!==m.state&&bd.enqueueReplaceState(m,m.state,null),fi(n,o,m,u),di(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){m=n.stateNode;var S=n.memoizedProps,z=zr(r,S);m.props=z;var te=m.context,de=r.contextType;y=al,typeof de=="object"&&de!==null&&(y=Pn(de));var ve=r.getDerivedStateFromProps;de=typeof ve=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=n.pendingProps!==S,de||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||te!==y)&&Zp(n,m,o,y),Hs=!1;var ne=n.memoizedState;m.state=ne,fi(n,o,m,u),di(),te=n.memoizedState,S||ne!==te||Hs?(typeof ve=="function"&&(gd(n,r,ve,o),te=n.memoizedState),(z=Hs||Vp(n,r,z,o,ne,te,y))?(de||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=te),m.props=o,m.state=te,m.context=y,o=z):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{m=n.stateNode,Pu(t,n),y=n.memoizedProps,de=zr(r,y),m.props=de,ve=n.pendingProps,ne=m.context,te=r.contextType,z=al,typeof te=="object"&&te!==null&&(z=Pn(te)),S=r.getDerivedStateFromProps,(te=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(y!==ve||ne!==z)&&Zp(n,m,o,z),Hs=!1,ne=n.memoizedState,m.state=ne,fi(n,o,m,u),di();var le=n.memoizedState;y!==ve||ne!==le||Hs||t!==null&&t.dependencies!==null&&jo(t.dependencies)?(typeof S=="function"&&(gd(n,r,S,o),le=n.memoizedState),(de=Hs||Vp(n,r,de,o,ne,le,z)||t!==null&&t.dependencies!==null&&jo(t.dependencies))?(te||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,le,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,le,z)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||y===t.memoizedProps&&ne===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&ne===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=le),m.props=o,m.state=le,m.context=z,o=de):(typeof m.componentDidUpdate!="function"||y===t.memoizedProps&&ne===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&ne===t.memoizedState||(n.flags|=1024),o=!1)}return m=o,Ho(t,n),o=(n.flags&128)!==0,m||o?(m=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,t!==null&&o?(n.child=Tr(n,t.child,null,u),n.child=Tr(n,null,r,u)):Qn(t,n,r,u),n.memoizedState=m.state,t=n.child):t=js(t,n,u),t}function lg(t,n,r,o){return _r(),n.flags|=256,Qn(t,n,r,o),n.child}var Sd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nd(t){return{baseLanes:t,cachePool:Yh()}}function wd(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=Aa),t}function ig(t,n,r){var o=n.pendingProps,u=!1,m=(n.flags&128)!==0,y;if((y=m)||(y=t!==null&&t.memoizedState===null?!1:(bn.current&2)!==0),y&&(u=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,t===null){if(wt){if(u?Gs(n):Ps(),(t=Yt)?(t=pb(t,Ma),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:qs!==null?{id:cs,overflow:us}:null,retryLane:536870912,hydrationErrors:null},r=Ih(t),r.return=n,n.child=r,Gn=n,Yt=null)):t=null,t===null)throw $s(n);return rf(t)?n.lanes=32:n.lanes=536870912,null}var S=o.children;return o=o.fallback,u?(Ps(),u=n.mode,S=Vo({mode:"hidden",children:S},u),o=jr(o,u,r,null),S.return=n,o.return=n,S.sibling=o,n.child=S,o=n.child,o.memoizedState=Nd(r),o.childLanes=wd(t,y,r),n.memoizedState=Sd,bi(null,o)):(Gs(n),jd(n,S))}var z=t.memoizedState;if(z!==null&&(S=z.dehydrated,S!==null)){if(m)n.flags&256?(Gs(n),n.flags&=-257,n=_d(t,n,r)):n.memoizedState!==null?(Ps(),n.child=t.child,n.flags|=128,n=null):(Ps(),S=o.fallback,u=n.mode,o=Vo({mode:"visible",children:o.children},u),S=jr(S,u,r,null),S.flags|=2,o.return=n,S.return=n,o.sibling=S,n.child=o,Tr(n,t.child,null,r),o=n.child,o.memoizedState=Nd(r),o.childLanes=wd(t,y,r),n.memoizedState=Sd,n=bi(null,o));else if(Gs(n),rf(S)){if(y=S.nextSibling&&S.nextSibling.dataset,y)var te=y.dgst;y=te,o=Error(l(419)),o.stack="",o.digest=y,ri({value:o,source:null,stack:null}),n=_d(t,n,r)}else if(En||il(t,n,r,!1),y=(r&t.childLanes)!==0,En||y){if(y=Vt,y!==null&&(o=Ke(y,r),o!==0&&o!==z.retryLane))throw z.retryLane=o,wr(t,o),ma(y,t,o),vd;sf(S)||Wo(),n=_d(t,n,r)}else sf(S)?(n.flags|=192,n.child=t.child,n=null):(t=z.treeContext,Yt=La(S.nextSibling),Gn=n,wt=!0,Is=null,Ma=!1,t!==null&&Hh(n,t),n=jd(n,o.children),n.flags|=4096);return n}return u?(Ps(),S=o.fallback,u=n.mode,z=t.child,te=z.sibling,o=ys(z,{mode:"hidden",children:o.children}),o.subtreeFlags=z.subtreeFlags&65011712,te!==null?S=ys(te,S):(S=jr(S,u,r,null),S.flags|=2),S.return=n,o.return=n,o.sibling=S,n.child=o,bi(null,o),o=n.child,S=t.child.memoizedState,S===null?S=Nd(r):(u=S.cachePool,u!==null?(z=jn._currentValue,u=u.parent!==z?{parent:z,pool:z}:u):u=Yh(),S={baseLanes:S.baseLanes|r,cachePool:u}),o.memoizedState=S,o.childLanes=wd(t,y,r),n.memoizedState=Sd,bi(t.child,o)):(Gs(n),r=t.child,t=r.sibling,r=ys(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,t!==null&&(y=n.deletions,y===null?(n.deletions=[t],n.flags|=16):y.push(t)),n.child=r,n.memoizedState=null,r)}function jd(t,n){return n=Vo({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Vo(t,n){return t=wa(22,t,null,n),t.lanes=0,t}function _d(t,n,r){return Tr(n,t.child,null,r),t=jd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function og(t,n,r){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),Iu(t.return,n,r)}function Ed(t,n,r,o,u,m){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:u,treeForkCount:m}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=r,y.tailMode=u,y.treeForkCount=m)}function cg(t,n,r){var o=n.pendingProps,u=o.revealOrder,m=o.tail;o=o.children;var y=bn.current,S=(y&2)!==0;if(S?(y=y&1|2,n.flags|=128):y&=1,ie(bn,y),Qn(t,n,o,r),o=wt?si:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&og(t,r,n);else if(t.tag===19)og(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(u){case"forwards":for(r=n.child,u=null;r!==null;)t=r.alternate,t!==null&&Do(t)===null&&(u=r),r=r.sibling;r=u,r===null?(u=n.child,n.child=null):(u=r.sibling,r.sibling=null),Ed(n,!1,u,r,m,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,u=n.child,n.child=null;u!==null;){if(t=u.alternate,t!==null&&Do(t)===null){n.child=u;break}t=u.sibling,u.sibling=r,r=u,u=t}Ed(n,!0,r,null,m,o);break;case"together":Ed(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function js(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),Ks|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(il(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(l(153));if(n.child!==null){for(t=n.child,r=ys(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=ys(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Ad(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&jo(t)))}function MS(t,n,r){switch(n.tag){case 3:$e(n,n.stateNode.containerInfo),Fs(n,jn,t.memoizedState.cache),_r();break;case 27:case 5:Le(n);break;case 4:$e(n,n.stateNode.containerInfo);break;case 10:Fs(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Ju(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Gs(n),n.flags|=128,null):(r&n.child.childLanes)!==0?ig(t,n,r):(Gs(n),t=js(t,n,r),t!==null?t.sibling:null);Gs(n);break;case 19:var u=(t.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(il(t,n,r,!1),o=(r&n.childLanes)!==0),u){if(o)return cg(t,n,r);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),ie(bn,bn.current),o)break;return null;case 22:return n.lanes=0,tg(t,n,r,n.pendingProps);case 24:Fs(n,jn,t.memoizedState.cache)}return js(t,n,r)}function ug(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)En=!0;else{if(!Ad(t,r)&&(n.flags&128)===0)return En=!1,MS(t,n,r);En=(t.flags&131072)!==0}else En=!1,wt&&(n.flags&1048576)!==0&&Fh(n,si,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(t=Or(n.elementType),n.type=t,typeof t=="function")Du(t)?(o=zr(t,o),n.tag=1,n=rg(null,n,t,o,r)):(n.tag=0,n=xd(null,n,t,o,r));else{if(t!=null){var u=t.$$typeof;if(u===D){n.tag=11,n=Jp(null,n,t,o,r);break e}else if(u===L){n.tag=14,n=Wp(null,n,t,o,r);break e}}throw n=ke(t)||t,Error(l(306,n,""))}}return n;case 0:return xd(t,n,n.type,n.pendingProps,r);case 1:return o=n.type,u=zr(o,n.pendingProps),rg(t,n,o,u,r);case 3:e:{if($e(n,n.stateNode.containerInfo),t===null)throw Error(l(387));o=n.pendingProps;var m=n.memoizedState;u=m.element,Pu(t,n),fi(n,o,null,r);var y=n.memoizedState;if(o=y.cache,Fs(n,jn,o),o!==m.cache&&$u(n,[jn],r,!0),di(),o=y.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=lg(t,n,o,r);break e}else if(o!==u){u=Da(Error(l(424)),n),ri(u),n=lg(t,n,o,r);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Yt=La(t.firstChild),Gn=n,wt=!0,Is=null,Ma=!0,r=tp(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(_r(),o===u){n=js(t,n,r);break e}Qn(t,n,o,r)}n=n.child}return n;case 26:return Ho(t,n),t===null?(r=Sb(n.type,null,n.pendingProps,null))?n.memoizedState=r:wt||(r=n.type,t=n.pendingProps,o=lc(pe.current).createElement(r),o[ft]=n,o[bt]=t,Yn(o,r,t),zt(o),n.stateNode=o):n.memoizedState=Sb(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Le(n),t===null&&wt&&(o=n.stateNode=yb(n.type,n.pendingProps,pe.current),Gn=n,Ma=!0,u=Yt,tr(n.type)?(lf=u,Yt=La(o.firstChild)):Yt=u),Qn(t,n,n.pendingProps.children,r),Ho(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&wt&&((u=o=Yt)&&(o=dN(o,n.type,n.pendingProps,Ma),o!==null?(n.stateNode=o,Gn=n,Yt=La(o.firstChild),Ma=!1,u=!0):u=!1),u||$s(n)),Le(n),u=n.type,m=n.pendingProps,y=t!==null?t.memoizedProps:null,o=m.children,tf(u,m)?o=null:y!==null&&tf(u,y)&&(n.flags|=32),n.memoizedState!==null&&(u=ed(t,n,ES,null,null,r),Di._currentValue=u),Ho(t,n),Qn(t,n,o,r),n.child;case 6:return t===null&&wt&&((t=r=Yt)&&(r=fN(r,n.pendingProps,Ma),r!==null?(n.stateNode=r,Gn=n,Yt=null,t=!0):t=!1),t||$s(n)),null;case 13:return ig(t,n,r);case 4:return $e(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=Tr(n,null,o,r):Qn(t,n,o,r),n.child;case 11:return Jp(t,n,n.type,n.pendingProps,r);case 7:return Qn(t,n,n.pendingProps,r),n.child;case 8:return Qn(t,n,n.pendingProps.children,r),n.child;case 12:return Qn(t,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,Fs(n,n.type,o.value),Qn(t,n,o.children,r),n.child;case 9:return u=n.type._context,o=n.pendingProps.children,Ar(n),u=Pn(u),o=o(u),n.flags|=1,Qn(t,n,o,r),n.child;case 14:return Wp(t,n,n.type,n.pendingProps,r);case 15:return eg(t,n,n.type,n.pendingProps,r);case 19:return cg(t,n,r);case 31:return kS(t,n,r);case 22:return tg(t,n,r,n.pendingProps);case 24:return Ar(n),o=Pn(jn),t===null?(u=Vu(),u===null&&(u=Vt,m=Fu(),u.pooledCache=m,m.refCount++,m!==null&&(u.pooledCacheLanes|=r),u=m),n.memoizedState={parent:o,cache:u},Gu(n),Fs(n,jn,u)):((t.lanes&r)!==0&&(Pu(t,n),fi(n,null,null,r),di()),u=t.memoizedState,m=n.memoizedState,u.parent!==o?(u={parent:o,cache:o},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),Fs(n,jn,o)):(o=m.cache,Fs(n,jn,o),o!==u.cache&&$u(n,[jn],r,!0))),Qn(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(l(156,n.tag))}function _s(t){t.flags|=4}function Cd(t,n,r,o,u){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(u&335544128)===u)if(t.stateNode.complete)t.flags|=8192;else if(Lg())t.flags|=8192;else throw Rr=Co,Zu}else t.flags&=-16777217}function dg(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Eb(n))if(Lg())t.flags|=8192;else throw Rr=Co,Zu}function Zo(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Y():536870912,t.lanes|=n,vl|=n)}function yi(t,n){if(!wt)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Kt(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(n)for(var u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=o,t.childLanes=r,n}function US(t,n,r){var o=n.pendingProps;switch(Uu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(n),null;case 1:return Kt(n),null;case 3:return r=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Ss(jn),fe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ll(n)?_s(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Bu())),Kt(n),null;case 26:var u=n.type,m=n.memoizedState;return t===null?(_s(n),m!==null?(Kt(n),dg(n,m)):(Kt(n),Cd(n,u,null,o,r))):m?m!==t.memoizedState?(_s(n),Kt(n),dg(n,m)):(Kt(n),n.flags&=-16777217):(t=t.memoizedProps,t!==o&&_s(n),Kt(n),Cd(n,u,t,o,r)),null;case 27:if(Ie(n),r=pe.current,u=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&_s(n);else{if(!o){if(n.stateNode===null)throw Error(l(166));return Kt(n),null}t=M.current,ll(n)?Vh(n):(t=yb(u,o,r),n.stateNode=t,_s(n))}return Kt(n),null;case 5:if(Ie(n),u=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&_s(n);else{if(!o){if(n.stateNode===null)throw Error(l(166));return Kt(n),null}if(m=M.current,ll(n))Vh(n);else{var y=lc(pe.current);switch(m){case 1:m=y.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:m=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":m=y.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":m=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":m=y.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?y.createElement(u,{is:o.is}):y.createElement(u)}}m[ft]=n,m[bt]=o;e:for(y=n.child;y!==null;){if(y.tag===5||y.tag===6)m.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}n.stateNode=m;e:switch(Yn(m,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&_s(n)}}return Kt(n),Cd(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,r),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&_s(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(l(166));if(t=pe.current,ll(n)){if(t=n.stateNode,r=n.memoizedProps,o=null,u=Gn,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}t[ft]=n,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||ib(t.nodeValue,r)),t||$s(n,!0)}else t=lc(t).createTextNode(o),t[ft]=n,n.stateNode=t}return Kt(n),null;case 31:if(r=n.memoizedState,t===null||t.memoizedState!==null){if(o=ll(n),r!==null){if(t===null){if(!o)throw Error(l(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(557));t[ft]=n}else _r(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Kt(n),t=!1}else r=Bu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return n.flags&256?(_a(n),n):(_a(n),null);if((n.flags&128)!==0)throw Error(l(558))}return Kt(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(u=ll(n),o!==null&&o.dehydrated!==null){if(t===null){if(!u)throw Error(l(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(l(317));u[ft]=n}else _r(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Kt(n),u=!1}else u=Bu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(_a(n),n):(_a(n),null)}return _a(n),(n.flags&128)!==0?(n.lanes=r,n):(r=o!==null,t=t!==null&&t.memoizedState!==null,r&&(o=n.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==u&&(o.flags|=2048)),r!==t&&r&&(n.child.flags|=8192),Zo(n,n.updateQueue),Kt(n),null);case 4:return fe(),t===null&&Kd(n.stateNode.containerInfo),Kt(n),null;case 10:return Ss(n.type),Kt(n),null;case 19:if(P(bn),o=n.memoizedState,o===null)return Kt(n),null;if(u=(n.flags&128)!==0,m=o.rendering,m===null)if(u)yi(o,!1);else{if(mn!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(m=Do(t),m!==null){for(n.flags|=128,yi(o,!1),t=m.updateQueue,n.updateQueue=t,Zo(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)qh(r,t),r=r.sibling;return ie(bn,bn.current&1|2),wt&&vs(n,o.treeForkCount),n.child}t=t.sibling}o.tail!==null&&G()>Ko&&(n.flags|=128,u=!0,yi(o,!1),n.lanes=4194304)}else{if(!u)if(t=Do(m),t!==null){if(n.flags|=128,u=!0,t=t.updateQueue,n.updateQueue=t,Zo(n,t),yi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!wt)return Kt(n),null}else 2*G()-o.renderingStartTime>Ko&&r!==536870912&&(n.flags|=128,u=!0,yi(o,!1),n.lanes=4194304);o.isBackwards?(m.sibling=n.child,n.child=m):(t=o.last,t!==null?t.sibling=m:n.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=G(),t.sibling=null,r=bn.current,ie(bn,u?r&1|2:r&1),wt&&vs(n,o.treeForkCount),t):(Kt(n),null);case 22:case 23:return _a(n),Xu(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(Kt(n),n.subtreeFlags&6&&(n.flags|=8192)):Kt(n),r=n.updateQueue,r!==null&&Zo(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),t!==null&&P(Cr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Ss(jn),Kt(n),null;case 25:return null;case 30:return null}throw Error(l(156,n.tag))}function LS(t,n){switch(Uu(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Ss(jn),fe(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Ie(n),null;case 31:if(n.memoizedState!==null){if(_a(n),n.alternate===null)throw Error(l(340));_r()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(_a(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(l(340));_r()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return P(bn),null;case 4:return fe(),null;case 10:return Ss(n.type),null;case 22:case 23:return _a(n),Xu(),t!==null&&P(Cr),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Ss(jn),null;case 25:return null;default:return null}}function fg(t,n){switch(Uu(n),n.tag){case 3:Ss(jn),fe();break;case 26:case 27:case 5:Ie(n);break;case 4:fe();break;case 31:n.memoizedState!==null&&_a(n);break;case 13:_a(n);break;case 19:P(bn);break;case 10:Ss(n.type);break;case 22:case 23:_a(n),Xu(),t!==null&&P(Cr);break;case 24:Ss(jn)}}function vi(t,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var u=o.next;r=u;do{if((r.tag&t)===t){o=void 0;var m=r.create,y=r.inst;o=m(),y.destroy=o}r=r.next}while(r!==u)}}catch(S){Mt(n,n.return,S)}}function Qs(t,n,r){try{var o=n.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&t)===t){var y=o.inst,S=y.destroy;if(S!==void 0){y.destroy=void 0,u=n;var z=r,te=S;try{te()}catch(de){Mt(u,z,de)}}}o=o.next}while(o!==m)}}catch(de){Mt(n,n.return,de)}}function mg(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{ap(n,r)}catch(o){Mt(t,t.return,o)}}}function hg(t,n,r){r.props=zr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){Mt(t,n,o)}}function xi(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(u){Mt(t,n,u)}}function ds(t,n){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(u){Mt(t,n,u)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(u){Mt(t,n,u)}else r.current=null}function pg(t){var n=t.type,r=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(u){Mt(t,t.return,u)}}function Od(t,n,r){try{var o=t.stateNode;rN(o,t.type,r,n),o[bt]=n}catch(u){Mt(t,t.return,u)}}function gg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&tr(t.type)||t.tag===4}function Rd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&tr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Td(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Zn));else if(o!==4&&(o===27&&tr(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(Td(t,n,r),t=t.sibling;t!==null;)Td(t,n,r),t=t.sibling}function Go(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(o!==4&&(o===27&&tr(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Go(t,n,r),t=t.sibling;t!==null;)Go(t,n,r),t=t.sibling}function bg(t){var n=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);Yn(n,o,r),n[ft]=t,n[bt]=r}catch(m){Mt(t,t.return,m)}}var Es=!1,An=!1,Dd=!1,yg=typeof WeakSet=="function"?WeakSet:Set,qn=null;function BS(t,n){if(t=t.containerInfo,Wd=mc,t=Rh(t),_u(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var u=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var y=0,S=-1,z=-1,te=0,de=0,ve=t,ne=null;t:for(;;){for(var le;ve!==r||u!==0&&ve.nodeType!==3||(S=y+u),ve!==m||o!==0&&ve.nodeType!==3||(z=y+o),ve.nodeType===3&&(y+=ve.nodeValue.length),(le=ve.firstChild)!==null;)ne=ve,ve=le;for(;;){if(ve===t)break t;if(ne===r&&++te===u&&(S=y),ne===m&&++de===o&&(z=y),(le=ve.nextSibling)!==null)break;ve=ne,ne=ve.parentNode}ve=le}r=S===-1||z===-1?null:{start:S,end:z}}else r=null}r=r||{start:0,end:0}}else r=null;for(ef={focusedElem:t,selectionRange:r},mc=!1,qn=n;qn!==null;)if(n=qn,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,qn=t;else for(;qn!==null;){switch(n=qn,m=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)u=t[r],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,r=n,u=m.memoizedProps,m=m.memoizedState,o=r.stateNode;try{var Pe=zr(r.type,u);t=o.getSnapshotBeforeUpdate(Pe,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(nt){Mt(r,r.return,nt)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)af(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":af(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(l(163))}if(t=n.sibling,t!==null){t.return=n.return,qn=t;break}qn=n.return}}function vg(t,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Cs(t,r),o&4&&vi(5,r);break;case 1:if(Cs(t,r),o&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(y){Mt(r,r.return,y)}else{var u=zr(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(u,n,t.__reactInternalSnapshotBeforeUpdate)}catch(y){Mt(r,r.return,y)}}o&64&&mg(r),o&512&&xi(r,r.return);break;case 3:if(Cs(t,r),o&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{ap(t,n)}catch(y){Mt(r,r.return,y)}}break;case 27:n===null&&o&4&&bg(r);case 26:case 5:Cs(t,r),n===null&&o&4&&pg(r),o&512&&xi(r,r.return);break;case 12:Cs(t,r);break;case 31:Cs(t,r),o&4&&Ng(t,r);break;case 13:Cs(t,r),o&4&&wg(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=PS.bind(null,r),mN(t,r))));break;case 22:if(o=r.memoizedState!==null||Es,!o){n=n!==null&&n.memoizedState!==null||An,u=Es;var m=An;Es=o,(An=n)&&!m?Os(t,r,(r.subtreeFlags&8772)!==0):Cs(t,r),Es=u,An=m}break;case 30:break;default:Cs(t,r)}}function xg(t){var n=t.alternate;n!==null&&(t.alternate=null,xg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Ln(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var en=null,ca=!1;function As(t,n,r){for(r=r.child;r!==null;)Sg(t,n,r),r=r.sibling}function Sg(t,n,r){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(we,r)}catch{}switch(r.tag){case 26:An||ds(r,n),As(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:An||ds(r,n);var o=en,u=ca;tr(r.type)&&(en=r.stateNode,ca=!1),As(t,n,r),Oi(r.stateNode),en=o,ca=u;break;case 5:An||ds(r,n);case 6:if(o=en,u=ca,en=null,As(t,n,r),en=o,ca=u,en!==null)if(ca)try{(en.nodeType===9?en.body:en.nodeName==="HTML"?en.ownerDocument.body:en).removeChild(r.stateNode)}catch(m){Mt(r,n,m)}else try{en.removeChild(r.stateNode)}catch(m){Mt(r,n,m)}break;case 18:en!==null&&(ca?(t=en,mb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Al(t)):mb(en,r.stateNode));break;case 4:o=en,u=ca,en=r.stateNode.containerInfo,ca=!0,As(t,n,r),en=o,ca=u;break;case 0:case 11:case 14:case 15:Qs(2,r,n),An||Qs(4,r,n),As(t,n,r);break;case 1:An||(ds(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&hg(r,n,o)),As(t,n,r);break;case 21:As(t,n,r);break;case 22:An=(o=An)||r.memoizedState!==null,As(t,n,r),An=o;break;default:As(t,n,r)}}function Ng(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Al(t)}catch(r){Mt(n,n.return,r)}}}function wg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Al(t)}catch(r){Mt(n,n.return,r)}}function qS(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new yg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new yg),n;default:throw Error(l(435,t.tag))}}function Po(t,n){var r=qS(t);n.forEach(function(o){if(!r.has(o)){r.add(o);var u=QS.bind(null,t,o);o.then(u,u)}})}function ua(t,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var u=r[o],m=t,y=n,S=y;e:for(;S!==null;){switch(S.tag){case 27:if(tr(S.type)){en=S.stateNode,ca=!1;break e}break;case 5:en=S.stateNode,ca=!1;break e;case 3:case 4:en=S.stateNode.containerInfo,ca=!0;break e}S=S.return}if(en===null)throw Error(l(160));Sg(m,y,u),en=null,ca=!1,m=u.alternate,m!==null&&(m.return=null),u.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)jg(n,t),n=n.sibling}var Xa=null;function jg(t,n){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ua(n,t),da(t),o&4&&(Qs(3,t,t.return),vi(3,t),Qs(5,t,t.return));break;case 1:ua(n,t),da(t),o&512&&(An||r===null||ds(r,r.return)),o&64&&Es&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var u=Xa;if(ua(n,t),da(t),o&512&&(An||r===null||ds(r,r.return)),o&4){var m=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){e:{o=t.type,r=t.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":m=u.getElementsByTagName("title")[0],(!m||m[jt]||m[ft]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=u.createElement(o),u.head.insertBefore(m,u.querySelector("head > title"))),Yn(m,o,r),m[ft]=t,zt(m),o=m;break e;case"link":var y=jb("link","href",u).get(o+(r.href||""));if(y){for(var S=0;S<y.length;S++)if(m=y[S],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){y.splice(S,1);break t}}m=u.createElement(o),Yn(m,o,r),u.head.appendChild(m);break;case"meta":if(y=jb("meta","content",u).get(o+(r.content||""))){for(S=0;S<y.length;S++)if(m=y[S],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){y.splice(S,1);break t}}m=u.createElement(o),Yn(m,o,r),u.head.appendChild(m);break;default:throw Error(l(468,o))}m[ft]=t,zt(m),o=m}t.stateNode=o}else _b(u,t.type,t.stateNode);else t.stateNode=wb(u,o,t.memoizedProps);else m!==o?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,o===null?_b(u,t.type,t.stateNode):wb(u,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Od(t,t.memoizedProps,r.memoizedProps)}break;case 27:ua(n,t),da(t),o&512&&(An||r===null||ds(r,r.return)),r!==null&&o&4&&Od(t,t.memoizedProps,r.memoizedProps);break;case 5:if(ua(n,t),da(t),o&512&&(An||r===null||ds(r,r.return)),t.flags&32){u=t.stateNode;try{ls(u,"")}catch(Pe){Mt(t,t.return,Pe)}}o&4&&t.stateNode!=null&&(u=t.memoizedProps,Od(t,u,r!==null?r.memoizedProps:u)),o&1024&&(Dd=!0);break;case 6:if(ua(n,t),da(t),o&4){if(t.stateNode===null)throw Error(l(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(Pe){Mt(t,t.return,Pe)}}break;case 3:if(cc=null,u=Xa,Xa=ic(n.containerInfo),ua(n,t),Xa=u,da(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Al(n.containerInfo)}catch(Pe){Mt(t,t.return,Pe)}Dd&&(Dd=!1,_g(t));break;case 4:o=Xa,Xa=ic(t.stateNode.containerInfo),ua(n,t),da(t),Xa=o;break;case 12:ua(n,t),da(t);break;case 31:ua(n,t),da(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Po(t,o)));break;case 13:ua(n,t),da(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Yo=G()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Po(t,o)));break;case 22:u=t.memoizedState!==null;var z=r!==null&&r.memoizedState!==null,te=Es,de=An;if(Es=te||u,An=de||z,ua(n,t),An=de,Es=te,da(t),o&8192)e:for(n=t.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(r===null||z||Es||An||kr(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){z=r=n;try{if(m=z.stateNode,u)y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{S=z.stateNode;var ve=z.memoizedProps.style,ne=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;S.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Pe){Mt(z,z.return,Pe)}}}else if(n.tag===6){if(r===null){z=n;try{z.stateNode.nodeValue=u?"":z.memoizedProps}catch(Pe){Mt(z,z.return,Pe)}}}else if(n.tag===18){if(r===null){z=n;try{var le=z.stateNode;u?hb(le,!0):hb(z.stateNode,!1)}catch(Pe){Mt(z,z.return,Pe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,Po(t,r))));break;case 19:ua(n,t),da(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Po(t,o)));break;case 30:break;case 21:break;default:ua(n,t),da(t)}}function da(t){var n=t.flags;if(n&2){try{for(var r,o=t.return;o!==null;){if(gg(o)){r=o;break}o=o.return}if(r==null)throw Error(l(160));switch(r.tag){case 27:var u=r.stateNode,m=Rd(t);Go(t,m,u);break;case 5:var y=r.stateNode;r.flags&32&&(ls(y,""),r.flags&=-33);var S=Rd(t);Go(t,S,y);break;case 3:case 4:var z=r.stateNode.containerInfo,te=Rd(t);Td(t,te,z);break;default:throw Error(l(161))}}catch(de){Mt(t,t.return,de)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function _g(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;_g(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Cs(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)vg(t,n.alternate,n),n=n.sibling}function kr(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Qs(4,n,n.return),kr(n);break;case 1:ds(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&hg(n,n.return,r),kr(n);break;case 27:Oi(n.stateNode);case 26:case 5:ds(n,n.return),kr(n);break;case 22:n.memoizedState===null&&kr(n);break;case 30:kr(n);break;default:kr(n)}t=t.sibling}}function Os(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,u=t,m=n,y=m.flags;switch(m.tag){case 0:case 11:case 15:Os(u,m,r),vi(4,m);break;case 1:if(Os(u,m,r),o=m,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(te){Mt(o,o.return,te)}if(o=m,u=o.updateQueue,u!==null){var S=o.stateNode;try{var z=u.shared.hiddenCallbacks;if(z!==null)for(u.shared.hiddenCallbacks=null,u=0;u<z.length;u++)np(z[u],S)}catch(te){Mt(o,o.return,te)}}r&&y&64&&mg(m),xi(m,m.return);break;case 27:bg(m);case 26:case 5:Os(u,m,r),r&&o===null&&y&4&&pg(m),xi(m,m.return);break;case 12:Os(u,m,r);break;case 31:Os(u,m,r),r&&y&4&&Ng(u,m);break;case 13:Os(u,m,r),r&&y&4&&wg(u,m);break;case 22:m.memoizedState===null&&Os(u,m,r),xi(m,m.return);break;case 30:break;default:Os(u,m,r)}n=n.sibling}}function zd(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&li(r))}function kd(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&li(t))}function Ja(t,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Eg(t,n,r,o),n=n.sibling}function Eg(t,n,r,o){var u=n.flags;switch(n.tag){case 0:case 11:case 15:Ja(t,n,r,o),u&2048&&vi(9,n);break;case 1:Ja(t,n,r,o);break;case 3:Ja(t,n,r,o),u&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&li(t)));break;case 12:if(u&2048){Ja(t,n,r,o),t=n.stateNode;try{var m=n.memoizedProps,y=m.id,S=m.onPostCommit;typeof S=="function"&&S(y,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(z){Mt(n,n.return,z)}}else Ja(t,n,r,o);break;case 31:Ja(t,n,r,o);break;case 13:Ja(t,n,r,o);break;case 23:break;case 22:m=n.stateNode,y=n.alternate,n.memoizedState!==null?m._visibility&2?Ja(t,n,r,o):Si(t,n):m._visibility&2?Ja(t,n,r,o):(m._visibility|=2,gl(t,n,r,o,(n.subtreeFlags&10256)!==0||!1)),u&2048&&zd(y,n);break;case 24:Ja(t,n,r,o),u&2048&&kd(n.alternate,n);break;default:Ja(t,n,r,o)}}function gl(t,n,r,o,u){for(u=u&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=t,y=n,S=r,z=o,te=y.flags;switch(y.tag){case 0:case 11:case 15:gl(m,y,S,z,u),vi(8,y);break;case 23:break;case 22:var de=y.stateNode;y.memoizedState!==null?de._visibility&2?gl(m,y,S,z,u):Si(m,y):(de._visibility|=2,gl(m,y,S,z,u)),u&&te&2048&&zd(y.alternate,y);break;case 24:gl(m,y,S,z,u),u&&te&2048&&kd(y.alternate,y);break;default:gl(m,y,S,z,u)}n=n.sibling}}function Si(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,o=n,u=o.flags;switch(o.tag){case 22:Si(r,o),u&2048&&zd(o.alternate,o);break;case 24:Si(r,o),u&2048&&kd(o.alternate,o);break;default:Si(r,o)}n=n.sibling}}var Ni=8192;function bl(t,n,r){if(t.subtreeFlags&Ni)for(t=t.child;t!==null;)Ag(t,n,r),t=t.sibling}function Ag(t,n,r){switch(t.tag){case 26:bl(t,n,r),t.flags&Ni&&t.memoizedState!==null&&_N(r,Xa,t.memoizedState,t.memoizedProps);break;case 5:bl(t,n,r);break;case 3:case 4:var o=Xa;Xa=ic(t.stateNode.containerInfo),bl(t,n,r),Xa=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Ni,Ni=16777216,bl(t,n,r),Ni=o):bl(t,n,r));break;default:bl(t,n,r)}}function Cg(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function wi(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];qn=o,Rg(o,t)}Cg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Og(t),t=t.sibling}function Og(t){switch(t.tag){case 0:case 11:case 15:wi(t),t.flags&2048&&Qs(9,t,t.return);break;case 3:wi(t);break;case 12:wi(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Qo(t)):wi(t);break;default:wi(t)}}function Qo(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];qn=o,Rg(o,t)}Cg(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Qs(8,n,n.return),Qo(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,Qo(n));break;default:Qo(n)}t=t.sibling}}function Rg(t,n){for(;qn!==null;){var r=qn;switch(r.tag){case 0:case 11:case 15:Qs(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:li(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,qn=o;else e:for(r=t;qn!==null;){o=qn;var u=o.sibling,m=o.return;if(xg(o),o===r){qn=null;break e}if(u!==null){u.return=m,qn=u;break e}qn=m}}}var IS={getCacheForType:function(t){var n=Pn(jn),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r},cacheSignal:function(){return Pn(jn).controller.signal}},$S=typeof WeakMap=="function"?WeakMap:Map,Rt=0,Vt=null,yt=null,xt=0,kt=0,Ea=null,Ys=!1,yl=!1,Md=!1,Rs=0,mn=0,Ks=0,Mr=0,Ud=0,Aa=0,vl=0,ji=null,fa=null,Ld=!1,Yo=0,Tg=0,Ko=1/0,Xo=null,Xs=null,Dn=0,Js=null,xl=null,Ts=0,Bd=0,qd=null,Dg=null,_i=0,Id=null;function Ca(){return(Rt&2)!==0&&xt!==0?xt&-xt:U.T!==null?Gd():Dt()}function zg(){if(Aa===0)if((xt&536870912)===0||wt){var t=rt;rt<<=1,(rt&3932160)===0&&(rt=262144),Aa=t}else Aa=536870912;return t=ja.current,t!==null&&(t.flags|=32),Aa}function ma(t,n,r){(t===Vt&&(kt===2||kt===9)||t.cancelPendingCommit!==null)&&(Sl(t,0),Ws(t,xt,Aa,!1)),je(t,r),((Rt&2)===0||t!==Vt)&&(t===Vt&&((Rt&2)===0&&(Mr|=r),mn===4&&Ws(t,xt,Aa,!1)),fs(t))}function kg(t,n,r){if((Rt&6)!==0)throw Error(l(327));var o=!r&&(n&127)===0&&(n&t.expiredLanes)===0||Fn(t,n),u=o?VS(t,n):Fd(t,n,!0),m=o;do{if(u===0){yl&&!o&&Ws(t,n,0,!1);break}else{if(r=t.current.alternate,m&&!FS(r)){u=Fd(t,n,!1),m=!1;continue}if(u===2){if(m=n,t.errorRecoveryDisabledLanes&m)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var S=t;u=ji;var z=S.current.memoizedState.isDehydrated;if(z&&(Sl(S,y).flags|=256),y=Fd(S,y,!1),y!==2){if(Md&&!z){S.errorRecoveryDisabledLanes|=m,Mr|=m,u=4;break e}m=fa,fa=u,m!==null&&(fa===null?fa=m:fa.push.apply(fa,m))}u=y}if(m=!1,u!==2)continue}}if(u===1){Sl(t,0),Ws(t,n,0,!0);break}e:{switch(o=t,m=u,m){case 0:case 1:throw Error(l(345));case 4:if((n&4194048)!==n)break;case 6:Ws(o,n,Aa,!Ys);break e;case 2:fa=null;break;case 3:case 5:break;default:throw Error(l(329))}if((n&62914560)===n&&(u=Yo+300-G(),10<u)){if(Ws(o,n,Aa,!Ys),Zt(o,0,!0)!==0)break e;Ts=n,o.timeoutHandle=db(Mg.bind(null,o,r,fa,Xo,Ld,n,Aa,Mr,vl,Ys,m,"Throttled",-0,0),u);break e}Mg(o,r,fa,Xo,Ld,n,Aa,Mr,vl,Ys,m,null,-0,0)}}break}while(!0);fs(t)}function Mg(t,n,r,o,u,m,y,S,z,te,de,ve,ne,le){if(t.timeoutHandle=-1,ve=n.subtreeFlags,ve&8192||(ve&16785408)===16785408){ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},Ag(n,m,ve);var Pe=(m&62914560)===m?Yo-G():(m&4194048)===m?Tg-G():0;if(Pe=EN(ve,Pe),Pe!==null){Ts=m,t.cancelPendingCommit=Pe(Hg.bind(null,t,n,m,r,o,u,y,S,z,de,ve,null,ne,le)),Ws(t,m,y,!te);return}}Hg(t,n,m,r,o,u,y,S,z)}function FS(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var u=r[o],m=u.getSnapshot;u=u.value;try{if(!Na(m(),u))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ws(t,n,r,o){n&=~Ud,n&=~Mr,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var u=n;0<u;){var m=31-Et(u),y=1<<m;o[m]=-1,u&=~y}r!==0&&st(t,r,n)}function Jo(){return(Rt&6)===0?(Ei(0),!1):!0}function $d(){if(yt!==null){if(kt===0)var t=yt.return;else t=yt,xs=Er=null,ad(t),dl=null,oi=0,t=yt;for(;t!==null;)fg(t.alternate,t),t=t.return;yt=null}}function Sl(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,oN(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Ts=0,$d(),Vt=t,yt=r=ys(t.current,null),xt=n,kt=0,Ea=null,Ys=!1,yl=Fn(t,n),Md=!1,vl=Aa=Ud=Mr=Ks=mn=0,fa=ji=null,Ld=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var u=31-Et(o),m=1<<u;n|=t[u],o&=~m}return Rs=n,vo(),r}function Ug(t,n){ct=null,U.H=gi,n===ul||n===Ao?(n=Jh(),kt=3):n===Zu?(n=Jh(),kt=4):kt=n===vd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ea=n,yt===null&&(mn=1,$o(t,Da(n,t.current)))}function Lg(){var t=ja.current;return t===null?!0:(xt&4194048)===xt?Ua===null:(xt&62914560)===xt||(xt&536870912)!==0?t===Ua:!1}function Bg(){var t=U.H;return U.H=gi,t===null?gi:t}function qg(){var t=U.A;return U.A=IS,t}function Wo(){mn=4,Ys||(xt&4194048)!==xt&&ja.current!==null||(yl=!0),(Ks&134217727)===0&&(Mr&134217727)===0||Vt===null||Ws(Vt,xt,Aa,!1)}function Fd(t,n,r){var o=Rt;Rt|=2;var u=Bg(),m=qg();(Vt!==t||xt!==n)&&(Xo=null,Sl(t,n)),n=!1;var y=mn;e:do try{if(kt!==0&&yt!==null){var S=yt,z=Ea;switch(kt){case 8:$d(),y=6;break e;case 3:case 2:case 9:case 6:ja.current===null&&(n=!0);var te=kt;if(kt=0,Ea=null,Nl(t,S,z,te),r&&yl){y=0;break e}break;default:te=kt,kt=0,Ea=null,Nl(t,S,z,te)}}HS(),y=mn;break}catch(de){Ug(t,de)}while(!0);return n&&t.shellSuspendCounter++,xs=Er=null,Rt=o,U.H=u,U.A=m,yt===null&&(Vt=null,xt=0,vo()),y}function HS(){for(;yt!==null;)Ig(yt)}function VS(t,n){var r=Rt;Rt|=2;var o=Bg(),u=qg();Vt!==t||xt!==n?(Xo=null,Ko=G()+500,Sl(t,n)):yl=Fn(t,n);e:do try{if(kt!==0&&yt!==null){n=yt;var m=Ea;t:switch(kt){case 1:kt=0,Ea=null,Nl(t,n,m,1);break;case 2:case 9:if(Kh(m)){kt=0,Ea=null,$g(n);break}n=function(){kt!==2&&kt!==9||Vt!==t||(kt=7),fs(t)},m.then(n,n);break e;case 3:kt=7;break e;case 4:kt=5;break e;case 7:Kh(m)?(kt=0,Ea=null,$g(n)):(kt=0,Ea=null,Nl(t,n,m,7));break;case 5:var y=null;switch(yt.tag){case 26:y=yt.memoizedState;case 5:case 27:var S=yt;if(y?Eb(y):S.stateNode.complete){kt=0,Ea=null;var z=S.sibling;if(z!==null)yt=z;else{var te=S.return;te!==null?(yt=te,ec(te)):yt=null}break t}}kt=0,Ea=null,Nl(t,n,m,5);break;case 6:kt=0,Ea=null,Nl(t,n,m,6);break;case 8:$d(),mn=6;break e;default:throw Error(l(462))}}ZS();break}catch(de){Ug(t,de)}while(!0);return xs=Er=null,U.H=o,U.A=u,Rt=r,yt!==null?0:(Vt=null,xt=0,vo(),mn)}function ZS(){for(;yt!==null&&!O();)Ig(yt)}function Ig(t){var n=ug(t.alternate,t,Rs);t.memoizedProps=t.pendingProps,n===null?ec(t):yt=n}function $g(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=sg(r,n,n.pendingProps,n.type,void 0,xt);break;case 11:n=sg(r,n,n.pendingProps,n.type.render,n.ref,xt);break;case 5:ad(n);default:fg(r,n),n=yt=qh(n,Rs),n=ug(r,n,Rs)}t.memoizedProps=t.pendingProps,n===null?ec(t):yt=n}function Nl(t,n,r,o){xs=Er=null,ad(n),dl=null,oi=0;var u=n.return;try{if(zS(t,u,n,r,xt)){mn=1,$o(t,Da(r,t.current)),yt=null;return}}catch(m){if(u!==null)throw yt=u,m;mn=1,$o(t,Da(r,t.current)),yt=null;return}n.flags&32768?(wt||o===1?t=!0:yl||(xt&536870912)!==0?t=!1:(Ys=t=!0,(o===2||o===9||o===3||o===6)&&(o=ja.current,o!==null&&o.tag===13&&(o.flags|=16384))),Fg(n,t)):ec(n)}function ec(t){var n=t;do{if((n.flags&32768)!==0){Fg(n,Ys);return}t=n.return;var r=US(n.alternate,n,Rs);if(r!==null){yt=r;return}if(n=n.sibling,n!==null){yt=n;return}yt=n=t}while(n!==null);mn===0&&(mn=5)}function Fg(t,n){do{var r=LS(t.alternate,t);if(r!==null){r.flags&=32767,yt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){yt=t;return}yt=t=r}while(t!==null);mn=6,yt=null}function Hg(t,n,r,o,u,m,y,S,z){t.cancelPendingCommit=null;do tc();while(Dn!==0);if((Rt&6)!==0)throw Error(l(327));if(n!==null){if(n===t.current)throw Error(l(177));if(m=n.lanes|n.childLanes,m|=Ru,Ve(t,r,m,y,S,z),t===Vt&&(yt=Vt=null,xt=0),xl=n,Js=t,Ts=r,Bd=m,qd=u,Dg=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,YS(ae,function(){return Qg(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=U.T,U.T=null,u=$.p,$.p=2,y=Rt,Rt|=4;try{BS(t,n,r)}finally{Rt=y,$.p=u,U.T=o}}Dn=1,Vg(),Zg(),Gg()}}function Vg(){if(Dn===1){Dn=0;var t=Js,n=xl,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=U.T,U.T=null;var o=$.p;$.p=2;var u=Rt;Rt|=4;try{jg(n,t);var m=ef,y=Rh(t.containerInfo),S=m.focusedElem,z=m.selectionRange;if(y!==S&&S&&S.ownerDocument&&Oh(S.ownerDocument.documentElement,S)){if(z!==null&&_u(S)){var te=z.start,de=z.end;if(de===void 0&&(de=te),"selectionStart"in S)S.selectionStart=te,S.selectionEnd=Math.min(de,S.value.length);else{var ve=S.ownerDocument||document,ne=ve&&ve.defaultView||window;if(ne.getSelection){var le=ne.getSelection(),Pe=S.textContent.length,nt=Math.min(z.start,Pe),$t=z.end===void 0?nt:Math.min(z.end,Pe);!le.extend&&nt>$t&&(y=$t,$t=nt,nt=y);var F=Ch(S,nt),B=Ch(S,$t);if(F&&B&&(le.rangeCount!==1||le.anchorNode!==F.node||le.anchorOffset!==F.offset||le.focusNode!==B.node||le.focusOffset!==B.offset)){var ee=ve.createRange();ee.setStart(F.node,F.offset),le.removeAllRanges(),nt>$t?(le.addRange(ee),le.extend(B.node,B.offset)):(ee.setEnd(B.node,B.offset),le.addRange(ee))}}}}for(ve=[],le=S;le=le.parentNode;)le.nodeType===1&&ve.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ve.length;S++){var be=ve[S];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}mc=!!Wd,ef=Wd=null}finally{Rt=u,$.p=o,U.T=r}}t.current=n,Dn=2}}function Zg(){if(Dn===2){Dn=0;var t=Js,n=xl,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=U.T,U.T=null;var o=$.p;$.p=2;var u=Rt;Rt|=4;try{vg(t,n.alternate,n)}finally{Rt=u,$.p=o,U.T=r}}Dn=3}}function Gg(){if(Dn===4||Dn===3){Dn=0,Q();var t=Js,n=xl,r=Ts,o=Dg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Dn=5:(Dn=0,xl=Js=null,Pg(t,t.pendingLanes));var u=t.pendingLanes;if(u===0&&(Xs=null),Lt(r),n=n.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(we,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=U.T,u=$.p,$.p=2,U.T=null;try{for(var m=t.onRecoverableError,y=0;y<o.length;y++){var S=o[y];m(S.value,{componentStack:S.stack})}}finally{U.T=n,$.p=u}}(Ts&3)!==0&&tc(),fs(t),u=t.pendingLanes,(r&261930)!==0&&(u&42)!==0?t===Id?_i++:(_i=0,Id=t):_i=0,Ei(0)}}function Pg(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,li(n)))}function tc(){return Vg(),Zg(),Gg(),Qg()}function Qg(){if(Dn!==5)return!1;var t=Js,n=Bd;Bd=0;var r=Lt(Ts),o=U.T,u=$.p;try{$.p=32>r?32:r,U.T=null,r=qd,qd=null;var m=Js,y=Ts;if(Dn=0,xl=Js=null,Ts=0,(Rt&6)!==0)throw Error(l(331));var S=Rt;if(Rt|=4,Og(m.current),Eg(m,m.current,y,r),Rt=S,Ei(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(we,m)}catch{}return!0}finally{$.p=u,U.T=o,Pg(t,n)}}function Yg(t,n,r){n=Da(r,n),n=yd(t.stateNode,n,2),t=Zs(t,n,2),t!==null&&(je(t,2),fs(t))}function Mt(t,n,r){if(t.tag===3)Yg(t,t,r);else for(;n!==null;){if(n.tag===3){Yg(n,t,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Xs===null||!Xs.has(o))){t=Da(r,t),r=Kp(2),o=Zs(n,r,2),o!==null&&(Xp(r,o,n,t),je(o,2),fs(o));break}}n=n.return}}function Hd(t,n,r){var o=t.pingCache;if(o===null){o=t.pingCache=new $S;var u=new Set;o.set(n,u)}else u=o.get(n),u===void 0&&(u=new Set,o.set(n,u));u.has(r)||(Md=!0,u.add(r),t=GS.bind(null,t,n,r),n.then(t,t))}function GS(t,n,r){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Vt===t&&(xt&r)===r&&(mn===4||mn===3&&(xt&62914560)===xt&&300>G()-Yo?(Rt&2)===0&&Sl(t,0):Ud|=r,vl===xt&&(vl=0)),fs(t)}function Kg(t,n){n===0&&(n=Y()),t=wr(t,n),t!==null&&(je(t,n),fs(t))}function PS(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),Kg(t,r)}function QS(t,n){var r=0;switch(t.tag){case 31:case 13:var o=t.stateNode,u=t.memoizedState;u!==null&&(r=u.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(l(314))}o!==null&&o.delete(n),Kg(t,r)}function YS(t,n){return A(t,n)}var nc=null,wl=null,Vd=!1,ac=!1,Zd=!1,er=0;function fs(t){t!==wl&&t.next===null&&(wl===null?nc=wl=t:wl=wl.next=t),ac=!0,Vd||(Vd=!0,XS())}function Ei(t,n){if(!Zd&&ac){Zd=!0;do for(var r=!1,o=nc;o!==null;){if(t!==0){var u=o.pendingLanes;if(u===0)var m=0;else{var y=o.suspendedLanes,S=o.pingedLanes;m=(1<<31-Et(42|t)+1)-1,m&=u&~(y&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,eb(o,m))}else m=xt,m=Zt(o,o===Vt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||Fn(o,m)||(r=!0,eb(o,m));o=o.next}while(r);Zd=!1}}function KS(){Xg()}function Xg(){ac=Vd=!1;var t=0;er!==0&&iN()&&(t=er);for(var n=G(),r=null,o=nc;o!==null;){var u=o.next,m=Jg(o,n);m===0?(o.next=null,r===null?nc=u:r.next=u,u===null&&(wl=r)):(r=o,(t!==0||(m&3)!==0)&&(ac=!0)),o=u}Dn!==0&&Dn!==5||Ei(t),er!==0&&(er=0)}function Jg(t,n){for(var r=t.suspendedLanes,o=t.pingedLanes,u=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var y=31-Et(m),S=1<<y,z=u[y];z===-1?((S&r)===0||(S&o)!==0)&&(u[y]=Hn(S,n)):z<=n&&(t.expiredLanes|=S),m&=~S}if(n=Vt,r=xt,r=Zt(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===n&&(kt===2||kt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&V(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Fn(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(o!==null&&V(o),Lt(r)){case 2:case 8:r=Be;break;case 32:r=ae;break;case 268435456:r=He;break;default:r=ae}return o=Wg.bind(null,t),r=A(r,o),t.callbackPriority=n,t.callbackNode=r,n}return o!==null&&o!==null&&V(o),t.callbackPriority=2,t.callbackNode=null,2}function Wg(t,n){if(Dn!==0&&Dn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(tc()&&t.callbackNode!==r)return null;var o=xt;return o=Zt(t,t===Vt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(kg(t,o,n),Jg(t,G()),t.callbackNode!=null&&t.callbackNode===r?Wg.bind(null,t):null)}function eb(t,n){if(tc())return null;kg(t,n,!0)}function XS(){cN(function(){(Rt&6)!==0?A(Oe,KS):Xg()})}function Gd(){if(er===0){var t=ol;t===0&&(t=sn,sn<<=1,(sn&261888)===0&&(sn=256)),er=t}return er}function tb(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Bt(""+t)}function nb(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function JS(t,n,r,o,u){if(n==="submit"&&r&&r.stateNode===u){var m=tb((u[bt]||null).action),y=o.submitter;y&&(n=(n=y[bt]||null)?tb(n.formAction):y.getAttribute("formAction"),n!==null&&(m=n,y=null));var S=new oa("action","action",null,o,u);t.push({event:S,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(er!==0){var z=y?nb(u,y):new FormData(u);fd(r,{pending:!0,data:z,method:u.method,action:m},null,z)}}else typeof m=="function"&&(S.preventDefault(),z=y?nb(u,y):new FormData(u),fd(r,{pending:!0,data:z,method:u.method,action:m},m,z))},currentTarget:u}]})}}for(var Pd=0;Pd<Ou.length;Pd++){var Qd=Ou[Pd],WS=Qd.toLowerCase(),eN=Qd[0].toUpperCase()+Qd.slice(1);Ka(WS,"on"+eN)}Ka(zh,"onAnimationEnd"),Ka(kh,"onAnimationIteration"),Ka(Mh,"onAnimationStart"),Ka("dblclick","onDoubleClick"),Ka("focusin","onFocus"),Ka("focusout","onBlur"),Ka(gS,"onTransitionRun"),Ka(bS,"onTransitionStart"),Ka(yS,"onTransitionCancel"),Ka(Uh,"onTransitionEnd"),Xn("onMouseEnter",["mouseout","mouseover"]),Xn("onMouseLeave",["mouseout","mouseover"]),Xn("onPointerEnter",["pointerout","pointerover"]),Xn("onPointerLeave",["pointerout","pointerover"]),Nn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Nn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Nn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Nn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Nn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Nn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ai));function ab(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],u=o.event;o=o.listeners;e:{var m=void 0;if(n)for(var y=o.length-1;0<=y;y--){var S=o[y],z=S.instance,te=S.currentTarget;if(S=S.listener,z!==m&&u.isPropagationStopped())break e;m=S,u.currentTarget=te;try{m(u)}catch(de){yo(de)}u.currentTarget=null,m=z}else for(y=0;y<o.length;y++){if(S=o[y],z=S.instance,te=S.currentTarget,S=S.listener,z!==m&&u.isPropagationStopped())break e;m=S,u.currentTarget=te;try{m(u)}catch(de){yo(de)}u.currentTarget=null,m=z}}}}function vt(t,n){var r=n[pn];r===void 0&&(r=n[pn]=new Set);var o=t+"__bubble";r.has(o)||(sb(n,t,2,!1),r.add(o))}function Yd(t,n,r){var o=0;n&&(o|=4),sb(r,t,o,n)}var sc="_reactListening"+Math.random().toString(36).slice(2);function Kd(t){if(!t[sc]){t[sc]=!0,ps.forEach(function(r){r!=="selectionchange"&&(tN.has(r)||Yd(r,!1,t),Yd(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[sc]||(n[sc]=!0,Yd("selectionchange",!1,n))}}function sb(t,n,r,o){switch(zb(n)){case 2:var u=ON;break;case 8:u=RN;break;default:u=ff}r=u.bind(null,n,r,t),u=void 0,!vr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),o?u!==void 0?t.addEventListener(n,r,{capture:!0,passive:u}):t.addEventListener(n,r,!0):u!==void 0?t.addEventListener(n,r,{passive:u}):t.addEventListener(n,r,!1)}function Xd(t,n,r,o,u){var m=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var S=o.stateNode.containerInfo;if(S===u)break;if(y===4)for(y=o.return;y!==null;){var z=y.tag;if((z===3||z===4)&&y.stateNode.containerInfo===u)return;y=y.return}for(;S!==null;){if(y=dn(S),y===null)return;if(z=y.tag,z===5||z===6||z===26||z===27){o=m=y;continue e}S=S.parentNode}}o=o.return}po(function(){var te=m,de=is(r),ve=[];e:{var ne=Lh.get(t);if(ne!==void 0){var le=oa,Pe=t;switch(t){case"keypress":if(Ue(r)===0)break e;case"keydown":case"keyup":le=Q0;break;case"focusin":Pe="focus",le=xu;break;case"focusout":Pe="blur",le=xu;break;case"beforeblur":case"afterblur":le=xu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=fh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=U0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=X0;break;case zh:case kh:case Mh:le=q0;break;case Uh:le=W0;break;case"scroll":case"scrollend":le=Jr;break;case"wheel":le=tS;break;case"copy":case"cut":case"paste":le=$0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=hh;break;case"toggle":case"beforetoggle":le=aS}var nt=(n&4)!==0,$t=!nt&&(t==="scroll"||t==="scrollend"),F=nt?ne!==null?ne+"Capture":null:ne;nt=[];for(var B=te,ee;B!==null;){var be=B;if(ee=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||ee===null||F===null||(be=yr(B,F),be!=null&&nt.push(Ci(B,be,ee))),$t)break;B=B.return}0<nt.length&&(ne=new le(ne,Pe,null,r,de),ve.push({event:ne,listeners:nt}))}}if((n&7)===0){e:{if(ne=t==="mouseover"||t==="pointerover",le=t==="mouseout"||t==="pointerout",ne&&r!==na&&(Pe=r.relatedTarget||r.fromElement)&&(dn(Pe)||Pe[Ht]))break e;if((le||ne)&&(ne=de.window===de?de:(ne=de.ownerDocument)?ne.defaultView||ne.parentWindow:window,le?(Pe=r.relatedTarget||r.toElement,le=te,Pe=Pe?dn(Pe):null,Pe!==null&&($t=d(Pe),nt=Pe.tag,Pe!==$t||nt!==5&&nt!==27&&nt!==6)&&(Pe=null)):(le=null,Pe=te),le!==Pe)){if(nt=fh,be="onMouseLeave",F="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(nt=hh,be="onPointerLeave",F="onPointerEnter",B="pointer"),$t=le==null?ne:Bn(le),ee=Pe==null?ne:Bn(Pe),ne=new nt(be,B+"leave",le,r,de),ne.target=$t,ne.relatedTarget=ee,be=null,dn(de)===te&&(nt=new nt(F,B+"enter",Pe,r,de),nt.target=ee,nt.relatedTarget=$t,be=nt),$t=be,le&&Pe)t:{for(nt=nN,F=le,B=Pe,ee=0,be=F;be;be=nt(be))ee++;be=0;for(var Xe=B;Xe;Xe=nt(Xe))be++;for(;0<ee-be;)F=nt(F),ee--;for(;0<be-ee;)B=nt(B),be--;for(;ee--;){if(F===B||B!==null&&F===B.alternate){nt=F;break t}F=nt(F),B=nt(B)}nt=null}else nt=null;le!==null&&rb(ve,ne,le,nt,!1),Pe!==null&&$t!==null&&rb(ve,$t,Pe,nt,!0)}}e:{if(ne=te?Bn(te):window,le=ne.nodeName&&ne.nodeName.toLowerCase(),le==="select"||le==="input"&&ne.type==="file")var At=Nh;else if(xh(ne))if(wh)At=mS;else{At=dS;var Qe=uS}else le=ne.nodeName,!le||le.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?te&&Re(te.elementType)&&(At=Nh):At=fS;if(At&&(At=At(t,te))){Sh(ve,At,r,de);break e}Qe&&Qe(t,ne,te),t==="focusout"&&te&&ne.type==="number"&&te.memoizedProps.value!=null&&bs(ne,"number",ne.value)}switch(Qe=te?Bn(te):window,t){case"focusin":(xh(Qe)||Qe.contentEditable==="true")&&(el=Qe,Eu=te,ai=null);break;case"focusout":ai=Eu=el=null;break;case"mousedown":Au=!0;break;case"contextmenu":case"mouseup":case"dragend":Au=!1,Th(ve,r,de);break;case"selectionchange":if(pS)break;case"keydown":case"keyup":Th(ve,r,de)}var mt;if(Nu)e:{switch(t){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else Wr?yh(t,r)&&(St="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(St="onCompositionStart");St&&(ph&&r.locale!=="ko"&&(Wr||St!=="onCompositionStart"?St==="onCompositionEnd"&&Wr&&(mt=ge()):(os=de,E="value"in os?os.value:os.textContent,Wr=!0)),Qe=rc(te,St),0<Qe.length&&(St=new mh(St,t,null,r,de),ve.push({event:St,listeners:Qe}),mt?St.data=mt:(mt=vh(r),mt!==null&&(St.data=mt)))),(mt=rS?lS(t,r):iS(t,r))&&(St=rc(te,"onBeforeInput"),0<St.length&&(Qe=new mh("onBeforeInput","beforeinput",null,r,de),ve.push({event:Qe,listeners:St}),Qe.data=mt)),JS(ve,t,te,r,de)}ab(ve,n)})}function Ci(t,n,r){return{instance:t,listener:n,currentTarget:r}}function rc(t,n){for(var r=n+"Capture",o=[];t!==null;){var u=t,m=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||m===null||(u=yr(t,r),u!=null&&o.unshift(Ci(t,u,m)),u=yr(t,n),u!=null&&o.push(Ci(t,u,m))),t.tag===3)return o;t=t.return}return[]}function nN(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function rb(t,n,r,o,u){for(var m=n._reactName,y=[];r!==null&&r!==o;){var S=r,z=S.alternate,te=S.stateNode;if(S=S.tag,z!==null&&z===o)break;S!==5&&S!==26&&S!==27||te===null||(z=te,u?(te=yr(r,m),te!=null&&y.unshift(Ci(r,te,z))):u||(te=yr(r,m),te!=null&&y.push(Ci(r,te,z)))),r=r.return}y.length!==0&&t.push({event:n,listeners:y})}var aN=/\r\n?/g,sN=/\u0000|\uFFFD/g;function lb(t){return(typeof t=="string"?t:""+t).replace(aN,`
`).replace(sN,"")}function ib(t,n){return n=lb(n),lb(t)===n}function It(t,n,r,o,u,m){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||ls(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&ls(t,""+o);break;case"className":Sa(t,"class",o);break;case"tabIndex":Sa(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Sa(t,r,o);break;case"style":_e(t,o,m);break;case"data":if(n!=="object"){Sa(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Bt(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(n!=="input"&&It(t,n,"name",u.name,u,null),It(t,n,"formEncType",u.formEncType,u,null),It(t,n,"formMethod",u.formMethod,u,null),It(t,n,"formTarget",u.formTarget,u,null)):(It(t,n,"encType",u.encType,u,null),It(t,n,"method",u.method,u,null),It(t,n,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Bt(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=Zn);break;case"onScroll":o!=null&&vt("scroll",t);break;case"onScrollEnd":o!=null&&vt("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(r=o.__html,r!=null){if(u.children!=null)throw Error(l(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=Bt(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":vt("beforetoggle",t),vt("toggle",t),ln(t,"popover",o);break;case"xlinkActuate":Jn(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Jn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Jn(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Jn(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Jn(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Jn(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ln(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=We.get(r)||r,ln(t,r,o))}}function Jd(t,n,r,o,u,m){switch(r){case"style":_e(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(r=o.__html,r!=null){if(u.children!=null)throw Error(l(60));t.innerHTML=r}}break;case"children":typeof o=="string"?ls(t,o):(typeof o=="number"||typeof o=="bigint")&&ls(t,""+o);break;case"onScroll":o!=null&&vt("scroll",t);break;case"onScrollEnd":o!=null&&vt("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xa.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(u=r.endsWith("Capture"),n=r.slice(2,u?r.length-7:void 0),m=t[bt]||null,m=m!=null?m[r]:null,typeof m=="function"&&t.removeEventListener(n,m,u),typeof o=="function")){typeof m!="function"&&m!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,o,u);break e}r in t?t[r]=o:o===!0?t.setAttribute(r,""):ln(t,r,o)}}}function Yn(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",t),vt("load",t);var o=!1,u=!1,m;for(m in r)if(r.hasOwnProperty(m)){var y=r[m];if(y!=null)switch(m){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:It(t,n,m,y,r,null)}}u&&It(t,n,"srcSet",r.srcSet,r,null),o&&It(t,n,"src",r.src,r,null);return;case"input":vt("invalid",t);var S=m=y=u=null,z=null,te=null;for(o in r)if(r.hasOwnProperty(o)){var de=r[o];if(de!=null)switch(o){case"name":u=de;break;case"type":y=de;break;case"checked":z=de;break;case"defaultChecked":te=de;break;case"value":m=de;break;case"defaultValue":S=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(l(137,n));break;default:It(t,n,o,de,r,null)}}as(t,m,S,z,te,y,u,!1);return;case"select":vt("invalid",t),o=y=m=null;for(u in r)if(r.hasOwnProperty(u)&&(S=r[u],S!=null))switch(u){case"value":m=S;break;case"defaultValue":y=S;break;case"multiple":o=S;default:It(t,n,u,S,r,null)}n=m,r=y,t.multiple=!!o,n!=null?ss(t,!!o,n,!1):r!=null&&ss(t,!!o,r,!0);return;case"textarea":vt("invalid",t),m=u=o=null;for(y in r)if(r.hasOwnProperty(y)&&(S=r[y],S!=null))switch(y){case"value":o=S;break;case"defaultValue":u=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(l(91));break;default:It(t,n,y,S,r,null)}Xr(t,o,u,m);return;case"option":for(z in r)if(r.hasOwnProperty(z)&&(o=r[z],o!=null))switch(z){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:It(t,n,z,o,r,null)}return;case"dialog":vt("beforetoggle",t),vt("toggle",t),vt("cancel",t),vt("close",t);break;case"iframe":case"object":vt("load",t);break;case"video":case"audio":for(o=0;o<Ai.length;o++)vt(Ai[o],t);break;case"image":vt("error",t),vt("load",t);break;case"details":vt("toggle",t);break;case"embed":case"source":case"link":vt("error",t),vt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in r)if(r.hasOwnProperty(te)&&(o=r[te],o!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:It(t,n,te,o,r,null)}return;default:if(Re(n)){for(de in r)r.hasOwnProperty(de)&&(o=r[de],o!==void 0&&Jd(t,n,de,o,r,void 0));return}}for(S in r)r.hasOwnProperty(S)&&(o=r[S],o!=null&&It(t,n,S,o,r,null))}function rN(t,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,m=null,y=null,S=null,z=null,te=null,de=null;for(le in r){var ve=r[le];if(r.hasOwnProperty(le)&&ve!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":z=ve;default:o.hasOwnProperty(le)||It(t,n,le,null,o,ve)}}for(var ne in o){var le=o[ne];if(ve=r[ne],o.hasOwnProperty(ne)&&(le!=null||ve!=null))switch(ne){case"type":m=le;break;case"name":u=le;break;case"checked":te=le;break;case"defaultChecked":de=le;break;case"value":y=le;break;case"defaultValue":S=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(l(137,n));break;default:le!==ve&&It(t,n,ne,le,o,ve)}}br(t,y,S,z,te,de,m,u);return;case"select":le=y=S=ne=null;for(m in r)if(z=r[m],r.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":le=z;default:o.hasOwnProperty(m)||It(t,n,m,null,o,z)}for(u in o)if(m=o[u],z=r[u],o.hasOwnProperty(u)&&(m!=null||z!=null))switch(u){case"value":ne=m;break;case"defaultValue":S=m;break;case"multiple":y=m;default:m!==z&&It(t,n,u,m,o,z)}n=S,r=y,o=le,ne!=null?ss(t,!!r,ne,!1):!!o!=!!r&&(n!=null?ss(t,!!r,n,!0):ss(t,!!r,r?[]:"",!1));return;case"textarea":le=ne=null;for(S in r)if(u=r[S],r.hasOwnProperty(S)&&u!=null&&!o.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:It(t,n,S,null,o,u)}for(y in o)if(u=o[y],m=r[y],o.hasOwnProperty(y)&&(u!=null||m!=null))switch(y){case"value":ne=u;break;case"defaultValue":le=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(l(91));break;default:u!==m&&It(t,n,y,u,o,m)}rs(t,ne,le);return;case"option":for(var Pe in r)if(ne=r[Pe],r.hasOwnProperty(Pe)&&ne!=null&&!o.hasOwnProperty(Pe))switch(Pe){case"selected":t.selected=!1;break;default:It(t,n,Pe,null,o,ne)}for(z in o)if(ne=o[z],le=r[z],o.hasOwnProperty(z)&&ne!==le&&(ne!=null||le!=null))switch(z){case"selected":t.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:It(t,n,z,ne,o,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in r)ne=r[nt],r.hasOwnProperty(nt)&&ne!=null&&!o.hasOwnProperty(nt)&&It(t,n,nt,null,o,ne);for(te in o)if(ne=o[te],le=r[te],o.hasOwnProperty(te)&&ne!==le&&(ne!=null||le!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(l(137,n));break;default:It(t,n,te,ne,o,le)}return;default:if(Re(n)){for(var $t in r)ne=r[$t],r.hasOwnProperty($t)&&ne!==void 0&&!o.hasOwnProperty($t)&&Jd(t,n,$t,void 0,o,ne);for(de in o)ne=o[de],le=r[de],!o.hasOwnProperty(de)||ne===le||ne===void 0&&le===void 0||Jd(t,n,de,ne,o,le);return}}for(var F in r)ne=r[F],r.hasOwnProperty(F)&&ne!=null&&!o.hasOwnProperty(F)&&It(t,n,F,null,o,ne);for(ve in o)ne=o[ve],le=r[ve],!o.hasOwnProperty(ve)||ne===le||ne==null&&le==null||It(t,n,ve,ne,o,le)}function ob(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lN(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var u=r[o],m=u.transferSize,y=u.initiatorType,S=u.duration;if(m&&S&&ob(y)){for(y=0,S=u.responseEnd,o+=1;o<r.length;o++){var z=r[o],te=z.startTime;if(te>S)break;var de=z.transferSize,ve=z.initiatorType;de&&ob(ve)&&(z=z.responseEnd,y+=de*(z<S?1:(S-te)/(z-te)))}if(--o,n+=8*(m+y)/(u.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Wd=null,ef=null;function lc(t){return t.nodeType===9?t:t.ownerDocument}function cb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ub(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function tf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var nf=null;function iN(){var t=window.event;return t&&t.type==="popstate"?t===nf?!1:(nf=t,!0):(nf=null,!1)}var db=typeof setTimeout=="function"?setTimeout:void 0,oN=typeof clearTimeout=="function"?clearTimeout:void 0,fb=typeof Promise=="function"?Promise:void 0,cN=typeof queueMicrotask=="function"?queueMicrotask:typeof fb<"u"?function(t){return fb.resolve(null).then(t).catch(uN)}:db;function uN(t){setTimeout(function(){throw t})}function tr(t){return t==="head"}function mb(t,n){var r=n,o=0;do{var u=r.nextSibling;if(t.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"||r==="/&"){if(o===0){t.removeChild(u),Al(n);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Oi(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Oi(r);for(var m=r.firstChild;m;){var y=m.nextSibling,S=m.nodeName;m[jt]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=y}}else r==="body"&&Oi(t.ownerDocument.body);r=u}while(r);Al(n)}function hb(t,n){var r=t;t=0;do{var o=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=o}while(r)}function af(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":af(r),Ln(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function dN(t,n,r,o){for(;t.nodeType===1;){var u=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[jt])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==u.rel||t.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||t.getAttribute("title")!==(u.title==null?null:u.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(u.src==null?null:u.src)||t.getAttribute("type")!==(u.type==null?null:u.type)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var m=u.name==null?null:""+u.name;if(u.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=La(t.nextSibling),t===null)break}return null}function fN(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=La(t.nextSibling),t===null))return null;return t}function pb(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=La(t.nextSibling),t===null))return null;return t}function sf(t){return t.data==="$?"||t.data==="$~"}function rf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function mN(t,n){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||r.readyState!=="loading")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function La(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var lf=null;function gb(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(n===0)return La(t.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}t=t.nextSibling}return null}function bb(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return t;n--}else r!=="/$"&&r!=="/&"||n++}t=t.previousSibling}return null}function yb(t,n,r){switch(n=lc(r),t){case"html":if(t=n.documentElement,!t)throw Error(l(452));return t;case"head":if(t=n.head,!t)throw Error(l(453));return t;case"body":if(t=n.body,!t)throw Error(l(454));return t;default:throw Error(l(451))}}function Oi(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Ln(t)}var Ba=new Map,vb=new Set;function ic(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ds=$.d;$.d={f:hN,r:pN,D:gN,C:bN,L:yN,m:vN,X:SN,S:xN,M:NN};function hN(){var t=Ds.f(),n=Jo();return t||n}function pN(t){var n=Sn(t);n!==null&&n.tag===5&&n.type==="form"?Up(n):Ds.r(t)}var jl=typeof document>"u"?null:document;function xb(t,n,r){var o=jl;if(o&&typeof n=="string"&&n){var u=gn(n);u='link[rel="'+t+'"][href="'+u+'"]',typeof r=="string"&&(u+='[crossorigin="'+r+'"]'),vb.has(u)||(vb.add(u),t={rel:t,crossOrigin:r,href:n},o.querySelector(u)===null&&(n=o.createElement("link"),Yn(n,"link",t),zt(n),o.head.appendChild(n)))}}function gN(t){Ds.D(t),xb("dns-prefetch",t,null)}function bN(t,n){Ds.C(t,n),xb("preconnect",t,n)}function yN(t,n,r){Ds.L(t,n,r);var o=jl;if(o&&t&&n){var u='link[rel="preload"][as="'+gn(n)+'"]';n==="image"&&r&&r.imageSrcSet?(u+='[imagesrcset="'+gn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(u+='[imagesizes="'+gn(r.imageSizes)+'"]')):u+='[href="'+gn(t)+'"]';var m=u;switch(n){case"style":m=_l(t);break;case"script":m=El(t)}Ba.has(m)||(t=x({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),Ba.set(m,t),o.querySelector(u)!==null||n==="style"&&o.querySelector(Ri(m))||n==="script"&&o.querySelector(Ti(m))||(n=o.createElement("link"),Yn(n,"link",t),zt(n),o.head.appendChild(n)))}}function vN(t,n){Ds.m(t,n);var r=jl;if(r&&t){var o=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+gn(o)+'"][href="'+gn(t)+'"]',m=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=El(t)}if(!Ba.has(m)&&(t=x({rel:"modulepreload",href:t},n),Ba.set(m,t),r.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ti(m)))return}o=r.createElement("link"),Yn(o,"link",t),zt(o),r.head.appendChild(o)}}}function xN(t,n,r){Ds.S(t,n,r);var o=jl;if(o&&t){var u=Gt(o).hoistableStyles,m=_l(t);n=n||"default";var y=u.get(m);if(!y){var S={loading:0,preload:null};if(y=o.querySelector(Ri(m)))S.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":n},r),(r=Ba.get(m))&&of(t,r);var z=y=o.createElement("link");zt(z),Yn(z,"link",t),z._p=new Promise(function(te,de){z.onload=te,z.onerror=de}),z.addEventListener("load",function(){S.loading|=1}),z.addEventListener("error",function(){S.loading|=2}),S.loading|=4,oc(y,n,o)}y={type:"stylesheet",instance:y,count:1,state:S},u.set(m,y)}}}function SN(t,n){Ds.X(t,n);var r=jl;if(r&&t){var o=Gt(r).hoistableScripts,u=El(t),m=o.get(u);m||(m=r.querySelector(Ti(u)),m||(t=x({src:t,async:!0},n),(n=Ba.get(u))&&cf(t,n),m=r.createElement("script"),zt(m),Yn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(u,m))}}function NN(t,n){Ds.M(t,n);var r=jl;if(r&&t){var o=Gt(r).hoistableScripts,u=El(t),m=o.get(u);m||(m=r.querySelector(Ti(u)),m||(t=x({src:t,async:!0,type:"module"},n),(n=Ba.get(u))&&cf(t,n),m=r.createElement("script"),zt(m),Yn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(u,m))}}function Sb(t,n,r,o){var u=(u=pe.current)?ic(u):null;if(!u)throw Error(l(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=_l(r.href),r=Gt(u).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=_l(r.href);var m=Gt(u).hoistableStyles,y=m.get(t);if(y||(u=u.ownerDocument||u,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,y),(m=u.querySelector(Ri(t)))&&!m._p&&(y.instance=m,y.state.loading=5),Ba.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Ba.set(t,r),m||wN(u,t,r,y.state))),n&&o===null)throw Error(l(528,""));return y}if(n&&o!==null)throw Error(l(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=El(r),r=Gt(u).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,t))}}function _l(t){return'href="'+gn(t)+'"'}function Ri(t){return'link[rel="stylesheet"]['+t+"]"}function Nb(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function wN(t,n,r,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Yn(n,"link",r),zt(n),t.head.appendChild(n))}function El(t){return'[src="'+gn(t)+'"]'}function Ti(t){return"script[async]"+t}function wb(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+gn(r.href)+'"]');if(o)return n.instance=o,zt(o),o;var u=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),zt(o),Yn(o,"style",u),oc(o,r.precedence,t),n.instance=o;case"stylesheet":u=_l(r.href);var m=t.querySelector(Ri(u));if(m)return n.state.loading|=4,n.instance=m,zt(m),m;o=Nb(r),(u=Ba.get(u))&&of(o,u),m=(t.ownerDocument||t).createElement("link"),zt(m);var y=m;return y._p=new Promise(function(S,z){y.onload=S,y.onerror=z}),Yn(m,"link",o),n.state.loading|=4,oc(m,r.precedence,t),n.instance=m;case"script":return m=El(r.src),(u=t.querySelector(Ti(m)))?(n.instance=u,zt(u),u):(o=r,(u=Ba.get(m))&&(o=x({},r),cf(o,u)),t=t.ownerDocument||t,u=t.createElement("script"),zt(u),Yn(u,"link",o),t.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(l(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,oc(o,r.precedence,t));return n.instance}function oc(t,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,m=u,y=0;y<o.length;y++){var S=o[y];if(S.dataset.precedence===n)m=S;else if(m!==u)break}m?m.parentNode.insertBefore(t,m.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function of(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function cf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var cc=null;function jb(t,n,r){if(cc===null){var o=new Map,u=cc=new Map;u.set(r,o)}else u=cc,o=u.get(r),o||(o=new Map,u.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),u=0;u<r.length;u++){var m=r[u];if(!(m[jt]||m[ft]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var y=m.getAttribute(n)||"";y=t+y;var S=o.get(y);S?S.push(m):o.set(y,[m])}}return o}function _b(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function jN(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Eb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function _N(t,n,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var u=_l(o.href),m=n.querySelector(Ri(u));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=uc.bind(t),n.then(t,t)),r.state.loading|=4,r.instance=m,zt(m);return}m=n.ownerDocument||n,o=Nb(o),(u=Ba.get(u))&&of(o,u),m=m.createElement("link"),zt(m);var y=m;y._p=new Promise(function(S,z){y.onload=S,y.onerror=z}),Yn(m,"link",o),r.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=uc.bind(t),n.addEventListener("load",r),n.addEventListener("error",r))}}var uf=0;function EN(t,n){return t.stylesheets&&t.count===0&&fc(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var o=setTimeout(function(){if(t.stylesheets&&fc(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+n);0<t.imgBytes&&uf===0&&(uf=62500*lN());var u=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&fc(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>uf?50:800)+n);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function uc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var dc=null;function fc(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,dc=new Map,n.forEach(AN,t),dc=null,uc.call(t))}function AN(t,n){if(!(n.state.loading&4)){var r=dc.get(t);if(r)var o=r.get(null);else{r=new Map,dc.set(t,r);for(var u=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<u.length;m++){var y=u[m];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(r.set(y.dataset.precedence,y),o=y)}o&&r.set(null,o)}u=n.instance,y=u.getAttribute("data-precedence"),m=r.get(y)||o,m===o&&r.set(null,u),r.set(y,u),this.count++,o=uc.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),m?m.parentNode.insertBefore(u,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(u,t.firstChild)),n.state.loading|=4}}var Di={$$typeof:J,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function CN(t,n,r,o,u,m,y,S,z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=K(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=K(0),this.hiddenUpdates=K(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=m,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Ab(t,n,r,o,u,m,y,S,z,te,de,ve){return t=new CN(t,n,r,y,z,te,de,ve,S),n=1,m===!0&&(n|=24),m=wa(3,null,null,n),t.current=m,m.stateNode=t,n=Fu(),n.refCount++,t.pooledCache=n,n.refCount++,m.memoizedState={element:o,isDehydrated:r,cache:n},Gu(m),t}function Cb(t){return t?(t=al,t):al}function Ob(t,n,r,o,u,m){u=Cb(u),o.context===null?o.context=u:o.pendingContext=u,o=Vs(n),o.payload={element:r},m=m===void 0?null:m,m!==null&&(o.callback=m),r=Zs(t,o,n),r!==null&&(ma(r,t,n),ui(r,t,n))}function Rb(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function df(t,n){Rb(t,n),(t=t.alternate)&&Rb(t,n)}function Tb(t){if(t.tag===13||t.tag===31){var n=wr(t,67108864);n!==null&&ma(n,t,67108864),df(t,67108864)}}function Db(t){if(t.tag===13||t.tag===31){var n=Ca();n=Nt(n);var r=wr(t,n);r!==null&&ma(r,t,n),df(t,n)}}var mc=!0;function ON(t,n,r,o){var u=U.T;U.T=null;var m=$.p;try{$.p=2,ff(t,n,r,o)}finally{$.p=m,U.T=u}}function RN(t,n,r,o){var u=U.T;U.T=null;var m=$.p;try{$.p=8,ff(t,n,r,o)}finally{$.p=m,U.T=u}}function ff(t,n,r,o){if(mc){var u=mf(o);if(u===null)Xd(t,n,o,hc,r),kb(t,o);else if(DN(u,t,n,r,o))o.stopPropagation();else if(kb(t,o),n&4&&-1<TN.indexOf(t)){for(;u!==null;){var m=Sn(u);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var y=Un(m.pendingLanes);if(y!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;y;){var z=1<<31-Et(y);S.entanglements[1]|=z,y&=~z}fs(m),(Rt&6)===0&&(Ko=G()+500,Ei(0))}}break;case 31:case 13:S=wr(m,2),S!==null&&ma(S,m,2),Jo(),df(m,2)}if(m=mf(o),m===null&&Xd(t,n,o,hc,r),m===u)break;u=m}u!==null&&o.stopPropagation()}else Xd(t,n,o,null,r)}}function mf(t){return t=is(t),hf(t)}var hc=null;function hf(t){if(hc=null,t=dn(t),t!==null){var n=d(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=f(n),t!==null)return t;t=null}else if(r===31){if(t=h(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return hc=t,null}function zb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case Oe:return 2;case Be:return 8;case ae:case Me:return 32;case He:return 268435456;default:return 32}default:return 32}}var pf=!1,nr=null,ar=null,sr=null,zi=new Map,ki=new Map,rr=[],TN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kb(t,n){switch(t){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":zi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ki.delete(n.pointerId)}}function Mi(t,n,r,o,u,m){return t===null||t.nativeEvent!==m?(t={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:m,targetContainers:[u]},n!==null&&(n=Sn(n),n!==null&&Tb(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),t)}function DN(t,n,r,o,u){switch(n){case"focusin":return nr=Mi(nr,t,n,r,o,u),!0;case"dragenter":return ar=Mi(ar,t,n,r,o,u),!0;case"mouseover":return sr=Mi(sr,t,n,r,o,u),!0;case"pointerover":var m=u.pointerId;return zi.set(m,Mi(zi.get(m)||null,t,n,r,o,u)),!0;case"gotpointercapture":return m=u.pointerId,ki.set(m,Mi(ki.get(m)||null,t,n,r,o,u)),!0}return!1}function Mb(t){var n=dn(t.target);if(n!==null){var r=d(n);if(r!==null){if(n=r.tag,n===13){if(n=f(r),n!==null){t.blockedOn=n,xn(t.priority,function(){Db(r)});return}}else if(n===31){if(n=h(r),n!==null){t.blockedOn=n,xn(t.priority,function(){Db(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pc(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=mf(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);na=o,r.target.dispatchEvent(o),na=null}else return n=Sn(r),n!==null&&Tb(n),t.blockedOn=r,!1;n.shift()}return!0}function Ub(t,n,r){pc(t)&&r.delete(n)}function zN(){pf=!1,nr!==null&&pc(nr)&&(nr=null),ar!==null&&pc(ar)&&(ar=null),sr!==null&&pc(sr)&&(sr=null),zi.forEach(Ub),ki.forEach(Ub)}function gc(t,n){t.blockedOn===n&&(t.blockedOn=null,pf||(pf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,zN)))}var bc=null;function Lb(t){bc!==t&&(bc=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){bc===t&&(bc=null);for(var n=0;n<t.length;n+=3){var r=t[n],o=t[n+1],u=t[n+2];if(typeof o!="function"){if(hf(o||r)===null)continue;break}var m=Sn(r);m!==null&&(t.splice(n,3),n-=3,fd(m,{pending:!0,data:u,method:r.method,action:o},o,u))}}))}function Al(t){function n(z){return gc(z,t)}nr!==null&&gc(nr,t),ar!==null&&gc(ar,t),sr!==null&&gc(sr,t),zi.forEach(n),ki.forEach(n);for(var r=0;r<rr.length;r++){var o=rr[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<rr.length&&(r=rr[0],r.blockedOn===null);)Mb(r),r.blockedOn===null&&rr.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var u=r[o],m=r[o+1],y=u[bt]||null;if(typeof m=="function")y||Lb(r);else if(y){var S=null;if(m&&m.hasAttribute("formAction")){if(u=m,y=m[bt]||null)S=y.formAction;else if(hf(u)!==null)continue}else S=y.action;typeof S=="function"?r[o+1]=S:(r.splice(o,3),o-=3),Lb(r)}}}function Bb(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(y){return u=y})},focusReset:"manual",scroll:"manual"})}function n(){u!==null&&(u(),u=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),u!==null&&(u(),u=null)}}}function gf(t){this._internalRoot=t}yc.prototype.render=gf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(l(409));var r=n.current,o=Ca();Ob(r,o,t,n,null,null)},yc.prototype.unmount=gf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Ob(t.current,2,null,t,null,null),Jo(),n[Ht]=null}};function yc(t){this._internalRoot=t}yc.prototype.unstable_scheduleHydration=function(t){if(t){var n=Dt();t={blockedOn:null,target:t,priority:n};for(var r=0;r<rr.length&&n!==0&&n<rr[r].priority;r++);rr.splice(r,0,t),r===0&&Mb(t)}};var qb=a.version;if(qb!=="19.2.0")throw Error(l(527,qb,"19.2.0"));$.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(l(188)):(t=Object.keys(t).join(","),Error(l(268,t)));return t=p(n),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var kN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{we=vc.inject(kN),et=vc}catch{}}return Li.createRoot=function(t,n){if(!c(t))throw Error(l(299));var r=!1,o="",u=Gp,m=Pp,y=Qp;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=Ab(t,1,!1,null,null,r,o,null,u,m,y,Bb),t[Ht]=n.current,Kd(t),new gf(n)},Li.hydrateRoot=function(t,n,r){if(!c(t))throw Error(l(299));var o=!1,u="",m=Gp,y=Pp,S=Qp,z=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.formState!==void 0&&(z=r.formState)),n=Ab(t,1,!0,n,r??null,o,u,z,m,y,S,Bb),n.context=Cb(null),r=n.current,o=Ca(),o=Nt(o),u=Vs(o),u.callback=null,Zs(r,u,o),r=o,n.current.lanes=r,je(n,r),fs(n),t[Ht]=n.current,Kd(t),new yc(n)},Li.version="19.2.0",Li}var Yb;function VN(){if(Yb)return vf.exports;Yb=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(a){console.error(a)}}return e(),vf.exports=HN(),vf.exports}var ZN=VN();const GN=Rv(ZN);var Kb="popstate";function PN(e={}){function a(l,c){let{pathname:d,search:f,hash:h}=l.location;return Wf("",{pathname:d,search:f,hash:h},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(l,c){return typeof c=="string"?c:Qi(c)}return YN(a,s,null,e)}function nn(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function Fa(e,a){if(!e){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function QN(){return Math.random().toString(36).substring(2,10)}function Xb(e,a){return{usr:e.state,key:e.key,idx:a}}function Wf(e,a,s=null,l){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof a=="string"?$l(a):a,state:s,key:a&&a.key||l||QN()}}function Qi({pathname:e="/",search:a="",hash:s=""}){return a&&a!=="?"&&(e+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function $l(e){let a={};if(e){let s=e.indexOf("#");s>=0&&(a.hash=e.substring(s),e=e.substring(0,s));let l=e.indexOf("?");l>=0&&(a.search=e.substring(l),e=e.substring(0,l)),e&&(a.pathname=e)}return a}function YN(e,a,s,l={}){let{window:c=document.defaultView,v5Compat:d=!1}=l,f=c.history,h="POP",g=null,p=v();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function v(){return(f.state||{idx:null}).idx}function x(){h="POP";let C=v(),q=C==null?null:C-p;p=C,g&&g({action:h,location:_.location,delta:q})}function N(C,q){h="PUSH";let T=Wf(_.location,C,q);p=v()+1;let J=Xb(T,p),D=_.createHref(T);try{f.pushState(J,"",D)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;c.location.assign(D)}d&&g&&g({action:h,location:_.location,delta:1})}function I(C,q){h="REPLACE";let T=Wf(_.location,C,q);p=v();let J=Xb(T,p),D=_.createHref(T);f.replaceState(J,"",D),d&&g&&g({action:h,location:_.location,delta:0})}function j(C){return KN(C)}let _={get action(){return h},get location(){return e(c,f)},listen(C){if(g)throw new Error("A history only accepts one active listener");return c.addEventListener(Kb,x),g=C,()=>{c.removeEventListener(Kb,x),g=null}},createHref(C){return a(c,C)},createURL:j,encodeLocation(C){let q=j(C);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:N,replace:I,go(C){return f.go(C)}};return _}function KN(e,a=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),nn(s,"No window.location.(origin|href) available to create URL");let l=typeof e=="string"?e:Qi(e);return l=l.replace(/ $/,"%20"),!a&&l.startsWith("//")&&(l=s+l),new URL(l,s)}function Tv(e,a,s="/"){return XN(e,a,s,!1)}function XN(e,a,s,l){let c=typeof a=="string"?$l(a):a,d=Ms(c.pathname||"/",s);if(d==null)return null;let f=Dv(e);JN(f);let h=null;for(let g=0;h==null&&g<f.length;++g){let p=cw(d);h=iw(f[g],p,l)}return h}function Dv(e,a=[],s=[],l="",c=!1){let d=(f,h,g=c,p)=>{let v={relativePath:p===void 0?f.path||"":p,caseSensitive:f.caseSensitive===!0,childrenIndex:h,route:f};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(l)&&g)return;nn(v.relativePath.startsWith(l),`Absolute route path "${v.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(l.length)}let x=ks([l,v.relativePath]),N=s.concat(v);f.children&&f.children.length>0&&(nn(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Dv(f.children,a,N,x,g)),!(f.path==null&&!f.index)&&a.push({path:x,score:rw(x,f.index),routesMeta:N})};return e.forEach((f,h)=>{if(f.path===""||!f.path?.includes("?"))d(f,h);else for(let g of zv(f.path))d(f,h,!0,g)}),a}function zv(e){let a=e.split("/");if(a.length===0)return[];let[s,...l]=a,c=s.endsWith("?"),d=s.replace(/\?$/,"");if(l.length===0)return c?[d,""]:[d];let f=zv(l.join("/")),h=[];return h.push(...f.map(g=>g===""?d:[d,g].join("/"))),c&&h.push(...f),h.map(g=>e.startsWith("/")&&g===""?"/":g)}function JN(e){e.sort((a,s)=>a.score!==s.score?s.score-a.score:lw(a.routesMeta.map(l=>l.childrenIndex),s.routesMeta.map(l=>l.childrenIndex)))}var WN=/^:[\w-]+$/,ew=3,tw=2,nw=1,aw=10,sw=-2,Jb=e=>e==="*";function rw(e,a){let s=e.split("/"),l=s.length;return s.some(Jb)&&(l+=sw),a&&(l+=tw),s.filter(c=>!Jb(c)).reduce((c,d)=>c+(WN.test(d)?ew:d===""?nw:aw),l)}function lw(e,a){return e.length===a.length&&e.slice(0,-1).every((l,c)=>l===a[c])?e[e.length-1]-a[a.length-1]:0}function iw(e,a,s=!1){let{routesMeta:l}=e,c={},d="/",f=[];for(let h=0;h<l.length;++h){let g=l[h],p=h===l.length-1,v=d==="/"?a:a.slice(d.length)||"/",x=Yi({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},v),N=g.route;if(!x&&p&&s&&!l[l.length-1].route.index&&(x=Yi({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!x)return null;Object.assign(c,x.params),f.push({params:c,pathname:ks([d,x.pathname]),pathnameBase:mw(ks([d,x.pathnameBase])),route:N}),x.pathnameBase!=="/"&&(d=ks([d,x.pathnameBase]))}return f}function Yi(e,a){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,l]=ow(e.path,e.caseSensitive,e.end),c=a.match(s);if(!c)return null;let d=c[0],f=d.replace(/(.)\/+$/,"$1"),h=c.slice(1);return{params:l.reduce((p,{paramName:v,isOptional:x},N)=>{if(v==="*"){let j=h[N]||"";f=d.slice(0,d.length-j.length).replace(/(.)\/+$/,"$1")}const I=h[N];return x&&!I?p[v]=void 0:p[v]=(I||"").replace(/%2F/g,"/"),p},{}),pathname:d,pathnameBase:f,pattern:e}}function ow(e,a=!1,s=!0){Fa(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let l=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,h,g)=>(l.push({paramName:h,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(l.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),l]}function cw(e){try{return e.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Fa(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),e}}function Ms(e,a){if(a==="/")return e;if(!e.toLowerCase().startsWith(a.toLowerCase()))return null;let s=a.endsWith("/")?a.length-1:a.length,l=e.charAt(s);return l&&l!=="/"?null:e.slice(s)||"/"}function uw(e,a="/"){let{pathname:s,search:l="",hash:c=""}=typeof e=="string"?$l(e):e;return{pathname:s?s.startsWith("/")?s:dw(s,a):a,search:hw(l),hash:pw(c)}}function dw(e,a){let s=a.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function wf(e,a,s,l){return`Cannot include a '${e}' character in a manually specified \`to.${a}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fw(e){return e.filter((a,s)=>s===0||a.route.path&&a.route.path.length>0)}function Rm(e){let a=fw(e);return a.map((s,l)=>l===a.length-1?s.pathname:s.pathnameBase)}function Tm(e,a,s,l=!1){let c;typeof e=="string"?c=$l(e):(c={...e},nn(!c.pathname||!c.pathname.includes("?"),wf("?","pathname","search",c)),nn(!c.pathname||!c.pathname.includes("#"),wf("#","pathname","hash",c)),nn(!c.search||!c.search.includes("#"),wf("#","search","hash",c)));let d=e===""||c.pathname==="",f=d?"/":c.pathname,h;if(f==null)h=s;else{let x=a.length-1;if(!l&&f.startsWith("..")){let N=f.split("/");for(;N[0]==="..";)N.shift(),x-=1;c.pathname=N.join("/")}h=x>=0?a[x]:"/"}let g=uw(c,h),p=f&&f!=="/"&&f.endsWith("/"),v=(d||f===".")&&s.endsWith("/");return!g.pathname.endsWith("/")&&(p||v)&&(g.pathname+="/"),g}var ks=e=>e.join("/").replace(/\/\/+/g,"/"),mw=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),hw=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,pw=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function gw(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var kv=["POST","PUT","PATCH","DELETE"];new Set(kv);var bw=["GET",...kv];new Set(bw);var Fl=b.createContext(null);Fl.displayName="DataRouter";var Kc=b.createContext(null);Kc.displayName="DataRouterState";b.createContext(!1);var Mv=b.createContext({isTransitioning:!1});Mv.displayName="ViewTransition";var yw=b.createContext(new Map);yw.displayName="Fetchers";var vw=b.createContext(null);vw.displayName="Await";var Ha=b.createContext(null);Ha.displayName="Navigation";var no=b.createContext(null);no.displayName="Location";var Va=b.createContext({outlet:null,matches:[],isDataRoute:!1});Va.displayName="Route";var Dm=b.createContext(null);Dm.displayName="RouteError";function xw(e,{relative:a}={}){nn(Hl(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:l}=b.useContext(Ha),{hash:c,pathname:d,search:f}=ao(e,{relative:a}),h=d;return s!=="/"&&(h=d==="/"?s:ks([s,d])),l.createHref({pathname:h,search:f,hash:c})}function Hl(){return b.useContext(no)!=null}function la(){return nn(Hl(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(no).location}var Uv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Lv(e){b.useContext(Ha).static||b.useLayoutEffect(e)}function Pr(){let{isDataRoute:e}=b.useContext(Va);return e?Uw():Sw()}function Sw(){nn(Hl(),"useNavigate() may be used only in the context of a <Router> component.");let e=b.useContext(Fl),{basename:a,navigator:s}=b.useContext(Ha),{matches:l}=b.useContext(Va),{pathname:c}=la(),d=JSON.stringify(Rm(l)),f=b.useRef(!1);return Lv(()=>{f.current=!0}),b.useCallback((g,p={})=>{if(Fa(f.current,Uv),!f.current)return;if(typeof g=="number"){s.go(g);return}let v=Tm(g,JSON.parse(d),c,p.relative==="path");e==null&&a!=="/"&&(v.pathname=v.pathname==="/"?a:ks([a,v.pathname])),(p.replace?s.replace:s.push)(v,p.state,p)},[a,s,d,c,e])}var Nw=b.createContext(null);function ww(e){let a=b.useContext(Va).outlet;return b.useMemo(()=>a&&b.createElement(Nw.Provider,{value:e},a),[a,e])}function jw(){let{matches:e}=b.useContext(Va),a=e[e.length-1];return a?a.params:{}}function ao(e,{relative:a}={}){let{matches:s}=b.useContext(Va),{pathname:l}=la(),c=JSON.stringify(Rm(s));return b.useMemo(()=>Tm(e,JSON.parse(c),l,a==="path"),[e,c,l,a])}function _w(e,a){return Bv(e,a)}function Bv(e,a,s,l,c){nn(Hl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=b.useContext(Ha),{matches:f}=b.useContext(Va),h=f[f.length-1],g=h?h.params:{},p=h?h.pathname:"/",v=h?h.pathnameBase:"/",x=h&&h.route;{let T=x&&x.path||"";qv(p,!x||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let N=la(),I;if(a){let T=typeof a=="string"?$l(a):a;nn(v==="/"||T.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${T.pathname}" was given in the \`location\` prop.`),I=T}else I=N;let j=I.pathname||"/",_=j;if(v!=="/"){let T=v.replace(/^\//,"").split("/");_="/"+j.replace(/^\//,"").split("/").slice(T.length).join("/")}let C=Tv(e,{pathname:_});Fa(x||C!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Fa(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=Rw(C&&C.map(T=>Object.assign({},T,{params:Object.assign({},g,T.params),pathname:ks([v,d.encodeLocation?d.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?v:ks([v,d.encodeLocation?d.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),f,s,l,c);return a&&q?b.createElement(no.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},q):q}function Ew(){let e=Mw(),a=gw(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,l="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:l},d={padding:"2px 4px",backgroundColor:l},f=null;return console.error("Error handled by React Router default ErrorBoundary:",e),f=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:d},"ErrorBoundary")," or"," ",b.createElement("code",{style:d},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},a),s?b.createElement("pre",{style:c},s):null,f)}var Aw=b.createElement(Ew,null),Cw=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,a){return a.location!==e.location||a.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:a.error,location:a.location,revalidation:e.revalidation||a.revalidation}}componentDidCatch(e,a){this.props.unstable_onError?this.props.unstable_onError(e,a):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?b.createElement(Va.Provider,{value:this.props.routeContext},b.createElement(Dm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ow({routeContext:e,match:a,children:s}){let l=b.useContext(Fl);return l&&l.static&&l.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=a.route.id),b.createElement(Va.Provider,{value:e},s)}function Rw(e,a=[],s=null,l=null,c=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(a.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let d=e,f=s?.errors;if(f!=null){let p=d.findIndex(v=>v.route.id&&f?.[v.route.id]!==void 0);nn(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),d=d.slice(0,Math.min(d.length,p+1))}let h=!1,g=-1;if(s)for(let p=0;p<d.length;p++){let v=d[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=p),v.route.id){let{loaderData:x,errors:N}=s,I=v.route.loader&&!x.hasOwnProperty(v.route.id)&&(!N||N[v.route.id]===void 0);if(v.route.lazy||I){h=!0,g>=0?d=d.slice(0,g+1):d=[d[0]];break}}}return d.reduceRight((p,v,x)=>{let N,I=!1,j=null,_=null;s&&(N=f&&v.route.id?f[v.route.id]:void 0,j=v.route.errorElement||Aw,h&&(g<0&&x===0?(qv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,_=null):g===x&&(I=!0,_=v.route.hydrateFallbackElement||null)));let C=a.concat(d.slice(0,x+1)),q=()=>{let T;return N?T=j:I?T=_:v.route.Component?T=b.createElement(v.route.Component,null):v.route.element?T=v.route.element:T=p,b.createElement(Ow,{match:v,routeContext:{outlet:p,matches:C,isDataRoute:s!=null},children:T})};return s&&(v.route.ErrorBoundary||v.route.errorElement||x===0)?b.createElement(Cw,{location:s.location,revalidation:s.revalidation,component:j,error:N,children:q(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:l}):q()},null)}function zm(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tw(e){let a=b.useContext(Fl);return nn(a,zm(e)),a}function Dw(e){let a=b.useContext(Kc);return nn(a,zm(e)),a}function zw(e){let a=b.useContext(Va);return nn(a,zm(e)),a}function km(e){let a=zw(e),s=a.matches[a.matches.length-1];return nn(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function kw(){return km("useRouteId")}function Mw(){let e=b.useContext(Dm),a=Dw("useRouteError"),s=km("useRouteError");return e!==void 0?e:a.errors?.[s]}function Uw(){let{router:e}=Tw("useNavigate"),a=km("useNavigate"),s=b.useRef(!1);return Lv(()=>{s.current=!0}),b.useCallback(async(c,d={})=>{Fa(s.current,Uv),s.current&&(typeof c=="number"?e.navigate(c):await e.navigate(c,{fromRouteId:a,...d}))},[e,a])}var Wb={};function qv(e,a,s){!a&&!Wb[e]&&(Wb[e]=!0,Fa(!1,s))}b.memo(Lw);function Lw({routes:e,future:a,state:s,unstable_onError:l}){return Bv(e,void 0,s,l,a)}function dr({to:e,replace:a,state:s,relative:l}){nn(Hl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=b.useContext(Ha);Fa(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=b.useContext(Va),{pathname:f}=la(),h=Pr(),g=Tm(e,Rm(d),f,l==="path"),p=JSON.stringify(g);return b.useEffect(()=>{h(JSON.parse(p),{replace:a,state:s,relative:l})},[h,p,l,a,s]),null}function Iv(e){return ww(e.context)}function cn(e){nn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Bw({basename:e="/",children:a=null,location:s,navigationType:l="POP",navigator:c,static:d=!1}){nn(!Hl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),h=b.useMemo(()=>({basename:f,navigator:c,static:d,future:{}}),[f,c,d]);typeof s=="string"&&(s=$l(s));let{pathname:g="/",search:p="",hash:v="",state:x=null,key:N="default"}=s,I=b.useMemo(()=>{let j=Ms(g,f);return j==null?null:{location:{pathname:j,search:p,hash:v,state:x,key:N},navigationType:l}},[f,g,p,v,x,N,l]);return Fa(I!=null,`<Router basename="${f}"> is not able to match the URL "${g}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:b.createElement(Ha.Provider,{value:h},b.createElement(no.Provider,{children:a,value:I}))}function qw({children:e,location:a}){return _w(em(e),a)}function em(e,a=[]){let s=[];return b.Children.forEach(e,(l,c)=>{if(!b.isValidElement(l))return;let d=[...a,c];if(l.type===b.Fragment){s.push.apply(s,em(l.props.children,d));return}nn(l.type===cn,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),nn(!l.props.index||!l.props.children,"An index route cannot have child routes.");let f={id:l.props.id||d.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,middleware:l.props.middleware,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(f.children=em(l.props.children,d)),s.push(f)}),s}var Oc="get",Rc="application/x-www-form-urlencoded";function Xc(e){return e!=null&&typeof e.tagName=="string"}function Iw(e){return Xc(e)&&e.tagName.toLowerCase()==="button"}function $w(e){return Xc(e)&&e.tagName.toLowerCase()==="form"}function Fw(e){return Xc(e)&&e.tagName.toLowerCase()==="input"}function Hw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Vw(e,a){return e.button===0&&(!a||a==="_self")&&!Hw(e)}function tm(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((a,s)=>{let l=e[s];return a.concat(Array.isArray(l)?l.map(c=>[s,c]):[[s,l]])},[]))}function Zw(e,a){let s=tm(e);return a&&a.forEach((l,c)=>{s.has(c)||a.getAll(c).forEach(d=>{s.append(c,d)})}),s}var xc=null;function Gw(){if(xc===null)try{new FormData(document.createElement("form"),0),xc=!1}catch{xc=!0}return xc}var Pw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jf(e){return e!=null&&!Pw.has(e)?(Fa(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rc}"`),null):e}function Qw(e,a){let s,l,c,d,f;if($w(e)){let h=e.getAttribute("action");l=h?Ms(h,a):null,s=e.getAttribute("method")||Oc,c=jf(e.getAttribute("enctype"))||Rc,d=new FormData(e)}else if(Iw(e)||Fw(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=e.getAttribute("formaction")||h.getAttribute("action");if(l=g?Ms(g,a):null,s=e.getAttribute("formmethod")||h.getAttribute("method")||Oc,c=jf(e.getAttribute("formenctype"))||jf(h.getAttribute("enctype"))||Rc,d=new FormData(h,e),!Gw()){let{name:p,type:v,value:x}=e;if(v==="image"){let N=p?`${p}.`:"";d.append(`${N}x`,"0"),d.append(`${N}y`,"0")}else p&&d.append(p,x)}}else{if(Xc(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Oc,l=null,c=Rc,f=e}return d&&c==="text/plain"&&(f=d,d=void 0),{action:l,method:s.toLowerCase(),encType:c,formData:d,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Mm(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function Yw(e,a,s){let l=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return l.pathname==="/"?l.pathname=`_root.${s}`:a&&Ms(l.pathname,a)==="/"?l.pathname=`${a.replace(/\/$/,"")}/_root.${s}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${s}`,l}async function Kw(e,a){if(e.id in a)return a[e.id];try{let s=await import(e.module);return a[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Xw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Jw(e,a,s){let l=await Promise.all(e.map(async c=>{let d=a.routes[c.route.id];if(d){let f=await Kw(d,s);return f.links?f.links():[]}return[]}));return nj(l.flat(1).filter(Xw).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function ey(e,a,s,l,c,d){let f=(g,p)=>s[p]?g.route.id!==s[p].route.id:!0,h=(g,p)=>s[p].pathname!==g.pathname||s[p].route.path?.endsWith("*")&&s[p].params["*"]!==g.params["*"];return d==="assets"?a.filter((g,p)=>f(g,p)||h(g,p)):d==="data"?a.filter((g,p)=>{let v=l.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(f(g,p)||h(g,p))return!0;if(g.route.shouldRevalidate){let x=g.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function Ww(e,a,{includeHydrateFallback:s}={}){return ej(e.map(l=>{let c=a.routes[l.route.id];if(!c)return[];let d=[c.module];return c.clientActionModule&&(d=d.concat(c.clientActionModule)),c.clientLoaderModule&&(d=d.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(d=d.concat(c.hydrateFallbackModule)),c.imports&&(d=d.concat(c.imports)),d}).flat(1))}function ej(e){return[...new Set(e)]}function tj(e){let a={},s=Object.keys(e).sort();for(let l of s)a[l]=e[l];return a}function nj(e,a){let s=new Set;return new Set(a),e.reduce((l,c)=>{let d=JSON.stringify(tj(c));return s.has(d)||(s.add(d),l.push({key:d,link:c})),l},[])}function $v(){let e=b.useContext(Fl);return Mm(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function aj(){let e=b.useContext(Kc);return Mm(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Um=b.createContext(void 0);Um.displayName="FrameworkContext";function Fv(){let e=b.useContext(Um);return Mm(e,"You must render this element inside a <HydratedRouter> element"),e}function sj(e,a){let s=b.useContext(Um),[l,c]=b.useState(!1),[d,f]=b.useState(!1),{onFocus:h,onBlur:g,onMouseEnter:p,onMouseLeave:v,onTouchStart:x}=a,N=b.useRef(null);b.useEffect(()=>{if(e==="render"&&f(!0),e==="viewport"){let _=q=>{q.forEach(T=>{f(T.isIntersecting)})},C=new IntersectionObserver(_,{threshold:.5});return N.current&&C.observe(N.current),()=>{C.disconnect()}}},[e]),b.useEffect(()=>{if(l){let _=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(_)}}},[l]);let I=()=>{c(!0)},j=()=>{c(!1),f(!1)};return s?e!=="intent"?[d,N,{}]:[d,N,{onFocus:Bi(h,I),onBlur:Bi(g,j),onMouseEnter:Bi(p,I),onMouseLeave:Bi(v,j),onTouchStart:Bi(x,I)}]:[!1,N,{}]}function Bi(e,a){return s=>{e&&e(s),s.defaultPrevented||a(s)}}function rj({page:e,...a}){let{router:s}=$v(),l=b.useMemo(()=>Tv(s.routes,e,s.basename),[s.routes,e,s.basename]);return l?b.createElement(ij,{page:e,matches:l,...a}):null}function lj(e){let{manifest:a,routeModules:s}=Fv(),[l,c]=b.useState([]);return b.useEffect(()=>{let d=!1;return Jw(e,a,s).then(f=>{d||c(f)}),()=>{d=!0}},[e,a,s]),l}function ij({page:e,matches:a,...s}){let l=la(),{manifest:c,routeModules:d}=Fv(),{basename:f}=$v(),{loaderData:h,matches:g}=aj(),p=b.useMemo(()=>ey(e,a,g,c,l,"data"),[e,a,g,c,l]),v=b.useMemo(()=>ey(e,a,g,c,l,"assets"),[e,a,g,c,l]),x=b.useMemo(()=>{if(e===l.pathname+l.search+l.hash)return[];let j=new Set,_=!1;if(a.forEach(q=>{let T=c.routes[q.route.id];!T||!T.hasLoader||(!p.some(J=>J.route.id===q.route.id)&&q.route.id in h&&d[q.route.id]?.shouldRevalidate||T.hasClientLoader?_=!0:j.add(q.route.id))}),j.size===0)return[];let C=Yw(e,f,"data");return _&&j.size>0&&C.searchParams.set("_routes",a.filter(q=>j.has(q.route.id)).map(q=>q.route.id).join(",")),[C.pathname+C.search]},[f,h,l,c,p,a,e,d]),N=b.useMemo(()=>Ww(v,c),[v,c]),I=lj(v);return b.createElement(b.Fragment,null,x.map(j=>b.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...s})),N.map(j=>b.createElement("link",{key:j,rel:"modulepreload",href:j,...s})),I.map(({key:j,link:_})=>b.createElement("link",{key:j,nonce:s.nonce,..._})))}function oj(...e){return a=>{e.forEach(s=>{typeof s=="function"?s(a):s!=null&&(s.current=a)})}}var Hv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Hv&&(window.__reactRouterVersion="7.9.5")}catch{}function cj({basename:e,children:a,window:s}){let l=b.useRef();l.current==null&&(l.current=PN({window:s,v5Compat:!0}));let c=l.current,[d,f]=b.useState({action:c.action,location:c.location}),h=b.useCallback(g=>{b.startTransition(()=>f(g))},[f]);return b.useLayoutEffect(()=>c.listen(h),[c,h]),b.createElement(Bw,{basename:e,children:a,location:d.location,navigationType:d.action,navigator:c})}var Vv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kc=b.forwardRef(function({onClick:a,discover:s="render",prefetch:l="none",relative:c,reloadDocument:d,replace:f,state:h,target:g,to:p,preventScrollReset:v,viewTransition:x,...N},I){let{basename:j}=b.useContext(Ha),_=typeof p=="string"&&Vv.test(p),C,q=!1;if(typeof p=="string"&&_&&(C=p,Hv))try{let ue=new URL(window.location.href),Ae=p.startsWith("//")?new URL(ue.protocol+p):new URL(p),xe=Ms(Ae.pathname,j);Ae.origin===ue.origin&&xe!=null?p=xe+Ae.search+Ae.hash:q=!0}catch{Fa(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=xw(p,{relative:c}),[J,D,R]=sj(l,N),Z=fj(p,{replace:f,state:h,target:g,preventScrollReset:v,relative:c,viewTransition:x});function L(ue){a&&a(ue),ue.defaultPrevented||Z(ue)}let W=b.createElement("a",{...N,...R,href:C||T,onClick:q||d?a:L,ref:oj(I,D),target:g,"data-discover":!_&&s==="render"?"true":void 0});return J&&!_?b.createElement(b.Fragment,null,W,b.createElement(rj,{page:T})):W});kc.displayName="Link";var Zv=b.forwardRef(function({"aria-current":a="page",caseSensitive:s=!1,className:l="",end:c=!1,style:d,to:f,viewTransition:h,children:g,...p},v){let x=ao(f,{relative:p.relative}),N=la(),I=b.useContext(Kc),{navigator:j,basename:_}=b.useContext(Ha),C=I!=null&&bj(x)&&h===!0,q=j.encodeLocation?j.encodeLocation(x).pathname:x.pathname,T=N.pathname,J=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;s||(T=T.toLowerCase(),J=J?J.toLowerCase():null,q=q.toLowerCase()),J&&_&&(J=Ms(J,_)||J);const D=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let R=T===q||!c&&T.startsWith(q)&&T.charAt(D)==="/",Z=J!=null&&(J===q||!c&&J.startsWith(q)&&J.charAt(q.length)==="/"),L={isActive:R,isPending:Z,isTransitioning:C},W=R?a:void 0,ue;typeof l=="function"?ue=l(L):ue=[l,R?"active":null,Z?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let Ae=typeof d=="function"?d(L):d;return b.createElement(kc,{...p,"aria-current":W,className:ue,ref:v,style:Ae,to:f,viewTransition:h},typeof g=="function"?g(L):g)});Zv.displayName="NavLink";var uj=b.forwardRef(({discover:e="render",fetcherKey:a,navigate:s,reloadDocument:l,replace:c,state:d,method:f=Oc,action:h,onSubmit:g,relative:p,preventScrollReset:v,viewTransition:x,...N},I)=>{let j=pj(),_=gj(h,{relative:p}),C=f.toLowerCase()==="get"?"get":"post",q=typeof h=="string"&&Vv.test(h),T=J=>{if(g&&g(J),J.defaultPrevented)return;J.preventDefault();let D=J.nativeEvent.submitter,R=D?.getAttribute("formmethod")||f;j(D||J.currentTarget,{fetcherKey:a,method:R,navigate:s,replace:c,state:d,relative:p,preventScrollReset:v,viewTransition:x})};return b.createElement("form",{ref:I,method:C,action:_,onSubmit:l?g:T,...N,"data-discover":!q&&e==="render"?"true":void 0})});uj.displayName="Form";function dj(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Gv(e){let a=b.useContext(Fl);return nn(a,dj(e)),a}function fj(e,{target:a,replace:s,state:l,preventScrollReset:c,relative:d,viewTransition:f}={}){let h=Pr(),g=la(),p=ao(e,{relative:d});return b.useCallback(v=>{if(Vw(v,a)){v.preventDefault();let x=s!==void 0?s:Qi(g)===Qi(p);h(e,{replace:x,state:l,preventScrollReset:c,relative:d,viewTransition:f})}},[g,h,p,s,l,a,e,c,d,f])}function Pv(e){Fa(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=b.useRef(tm(e)),s=b.useRef(!1),l=la(),c=b.useMemo(()=>Zw(l.search,s.current?null:a.current),[l.search]),d=Pr(),f=b.useCallback((h,g)=>{const p=tm(typeof h=="function"?h(new URLSearchParams(c)):h);s.current=!0,d("?"+p,g)},[d,c]);return[c,f]}var mj=0,hj=()=>`__${String(++mj)}__`;function pj(){let{router:e}=Gv("useSubmit"),{basename:a}=b.useContext(Ha),s=kw();return b.useCallback(async(l,c={})=>{let{action:d,method:f,encType:h,formData:g,body:p}=Qw(l,a);if(c.navigate===!1){let v=c.fetcherKey||hj();await e.fetch(v,s,c.action||d,{preventScrollReset:c.preventScrollReset,formData:g,body:p,formMethod:c.method||f,formEncType:c.encType||h,flushSync:c.flushSync})}else await e.navigate(c.action||d,{preventScrollReset:c.preventScrollReset,formData:g,body:p,formMethod:c.method||f,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:s,flushSync:c.flushSync,viewTransition:c.viewTransition})},[e,a,s])}function gj(e,{relative:a}={}){let{basename:s}=b.useContext(Ha),l=b.useContext(Va);nn(l,"useFormAction must be used inside a RouteContext");let[c]=l.matches.slice(-1),d={...ao(e||".",{relative:a})},f=la();if(e==null){d.search=f.search;let h=new URLSearchParams(d.search),g=h.getAll("index");if(g.some(v=>v==="")){h.delete("index"),g.filter(x=>x).forEach(x=>h.append("index",x));let v=h.toString();d.search=v?`?${v}`:""}}return(!e||e===".")&&c.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(d.pathname=d.pathname==="/"?s:ks([s,d.pathname])),Qi(d)}function bj(e,{relative:a}={}){let s=b.useContext(Mv);nn(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=Gv("useViewTransitionState"),c=ao(e,{relative:a});if(!s.isTransitioning)return!1;let d=Ms(s.currentLocation.pathname,l)||s.currentLocation.pathname,f=Ms(s.nextLocation.pathname,l)||s.nextLocation.pathname;return Yi(c.pathname,f)!=null||Yi(c.pathname,d)!=null}var Vl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},yj={setTimeout:(e,a)=>setTimeout(e,a),clearTimeout:e=>clearTimeout(e),setInterval:(e,a)=>setInterval(e,a),clearInterval:e=>clearInterval(e)},vj=class{#e=yj;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,a){return this.#e.setTimeout(e,a)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,a){return this.#e.setInterval(e,a)}clearInterval(e){this.#e.clearInterval(e)}},Lr=new vj;function xj(e){setTimeout(e,0)}var $r=typeof window>"u"||"Deno"in globalThis;function ra(){}function Sj(e,a){return typeof e=="function"?e(a):e}function nm(e){return typeof e=="number"&&e>=0&&e!==1/0}function Qv(e,a){return Math.max(e+(a||0)-Date.now(),0)}function fr(e,a){return typeof e=="function"?e(a):e}function qa(e,a){return typeof e=="function"?e(a):e}function ty(e,a){const{type:s="all",exact:l,fetchStatus:c,predicate:d,queryKey:f,stale:h}=e;if(f){if(l){if(a.queryHash!==Lm(f,a.options))return!1}else if(!Ki(a.queryKey,f))return!1}if(s!=="all"){const g=a.isActive();if(s==="active"&&!g||s==="inactive"&&g)return!1}return!(typeof h=="boolean"&&a.isStale()!==h||c&&c!==a.state.fetchStatus||d&&!d(a))}function ny(e,a){const{exact:s,status:l,predicate:c,mutationKey:d}=e;if(d){if(!a.options.mutationKey)return!1;if(s){if(Fr(a.options.mutationKey)!==Fr(d))return!1}else if(!Ki(a.options.mutationKey,d))return!1}return!(l&&a.state.status!==l||c&&!c(a))}function Lm(e,a){return(a?.queryKeyHashFn||Fr)(e)}function Fr(e){return JSON.stringify(e,(a,s)=>am(s)?Object.keys(s).sort().reduce((l,c)=>(l[c]=s[c],l),{}):s)}function Ki(e,a){return e===a?!0:typeof e!=typeof a?!1:e&&a&&typeof e=="object"&&typeof a=="object"?Object.keys(a).every(s=>Ki(e[s],a[s])):!1}var Nj=Object.prototype.hasOwnProperty;function Yv(e,a){if(e===a)return e;const s=ay(e)&&ay(a);if(!s&&!(am(e)&&am(a)))return a;const c=(s?e:Object.keys(e)).length,d=s?a:Object.keys(a),f=d.length,h=s?new Array(f):{};let g=0;for(let p=0;p<f;p++){const v=s?p:d[p],x=e[v],N=a[v];if(x===N){h[v]=x,(s?p<c:Nj.call(e,v))&&g++;continue}if(x===null||N===null||typeof x!="object"||typeof N!="object"){h[v]=N;continue}const I=Yv(x,N);h[v]=I,I===x&&g++}return c===f&&g===c?e:h}function Mc(e,a){if(!a||Object.keys(e).length!==Object.keys(a).length)return!1;for(const s in e)if(e[s]!==a[s])return!1;return!0}function ay(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function am(e){if(!sy(e))return!1;const a=e.constructor;if(a===void 0)return!0;const s=a.prototype;return!(!sy(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function sy(e){return Object.prototype.toString.call(e)==="[object Object]"}function wj(e){return new Promise(a=>{Lr.setTimeout(a,e)})}function sm(e,a,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,a):s.structuralSharing!==!1?Yv(e,a):a}function jj(e,a,s=0){const l=[...e,a];return s&&l.length>s?l.slice(1):l}function _j(e,a,s=0){const l=[a,...e];return s&&l.length>s?l.slice(0,-1):l}var Bm=Symbol();function Kv(e,a){return!e.queryFn&&a?.initialPromise?()=>a.initialPromise:!e.queryFn||e.queryFn===Bm?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Xv(e,a){return typeof e=="function"?e(...a):!!e}var Ej=class extends Vl{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!$r&&window.addEventListener){const a=()=>e();return window.addEventListener("visibilitychange",a,!1),()=>{window.removeEventListener("visibilitychange",a)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(a=>{a(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},qm=new Ej;function rm(){let e,a;const s=new Promise((c,d)=>{e=c,a=d});s.status="pending",s.catch(()=>{});function l(c){Object.assign(s,c),delete s.resolve,delete s.reject}return s.resolve=c=>{l({status:"fulfilled",value:c}),e(c)},s.reject=c=>{l({status:"rejected",reason:c}),a(c)},s}var Aj=xj;function Cj(){let e=[],a=0,s=h=>{h()},l=h=>{h()},c=Aj;const d=h=>{a?e.push(h):c(()=>{s(h)})},f=()=>{const h=e;e=[],h.length&&c(()=>{l(()=>{h.forEach(g=>{s(g)})})})};return{batch:h=>{let g;a++;try{g=h()}finally{a--,a||f()}return g},batchCalls:h=>(...g)=>{d(()=>{h(...g)})},schedule:d,setNotifyFunction:h=>{s=h},setBatchNotifyFunction:h=>{l=h},setScheduler:h=>{c=h}}}var zn=Cj(),Oj=class extends Vl{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!$r&&window.addEventListener){const a=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",a,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#e}},Uc=new Oj;function Rj(e){return Math.min(1e3*2**e,3e4)}function Jv(e){return(e??"online")==="online"?Uc.isOnline():!0}var lm=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Wv(e){let a=!1,s=0,l;const c=rm(),d=()=>c.status!=="pending",f=_=>{if(!d()){const C=new lm(_);N(C),e.onCancel?.(C)}},h=()=>{a=!0},g=()=>{a=!1},p=()=>qm.isFocused()&&(e.networkMode==="always"||Uc.isOnline())&&e.canRun(),v=()=>Jv(e.networkMode)&&e.canRun(),x=_=>{d()||(l?.(),c.resolve(_))},N=_=>{d()||(l?.(),c.reject(_))},I=()=>new Promise(_=>{l=C=>{(d()||p())&&_(C)},e.onPause?.()}).then(()=>{l=void 0,d()||e.onContinue?.()}),j=()=>{if(d())return;let _;const C=s===0?e.initialPromise:void 0;try{_=C??e.fn()}catch(q){_=Promise.reject(q)}Promise.resolve(_).then(x).catch(q=>{if(d())return;const T=e.retry??($r?0:3),J=e.retryDelay??Rj,D=typeof J=="function"?J(s,q):J,R=T===!0||typeof T=="number"&&s<T||typeof T=="function"&&T(s,q);if(a||!R){N(q);return}s++,e.onFail?.(s,q),wj(D).then(()=>p()?void 0:I()).then(()=>{a?N(q):j()})})};return{promise:c,status:()=>c.status,cancel:f,continue:()=>(l?.(),c),cancelRetry:h,continueRetry:g,canStart:v,start:()=>(v()?j():I().then(j),c)}}var ex=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),nm(this.gcTime)&&(this.#e=Lr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??($r?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Lr.clearTimeout(this.#e),this.#e=void 0)}},Tj=class extends ex{#e;#t;#n;#s;#a;#l;#i;constructor(e){super(),this.#i=!1,this.#l=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=ly(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(e){if(this.options={...this.#l,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const a=ly(this.options);a.data!==void 0&&(this.setState(ry(a.data,a.dataUpdatedAt)),this.#e=a)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,a){const s=sm(this.state.data,e,this.options);return this.#r({data:s,type:"success",dataUpdatedAt:a?.updatedAt,manual:a?.manual}),s}setState(e,a){this.#r({type:"setState",state:e,setStateOptions:a})}cancel(e){const a=this.#a?.promise;return this.#a?.cancel(e),a?a.then(ra).catch(ra):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>qa(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Bm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>fr(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Qv(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(a=>a.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(a=>a.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(a=>a!==e),this.observers.length||(this.#a&&(this.#i?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}async fetch(e,a){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&a?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(g=>g.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,l=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(this.#i=!0,s.signal)})},c=()=>{const h=Kv(this.options,a),p=(()=>{const v={client:this.#s,queryKey:this.queryKey,meta:this.meta};return l(v),v})();return this.#i=!1,this.options.persister?this.options.persister(h,p,this):h(p)},f=(()=>{const h={fetchOptions:a,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:c};return l(h),h})();this.options.behavior?.onFetch(f,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==f.fetchOptions?.meta)&&this.#r({type:"fetch",meta:f.fetchOptions?.meta}),this.#a=Wv({initialPromise:a?.initialPromise,fn:f.fetchFn,onCancel:h=>{h instanceof lm&&h.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(h,g)=>{this.#r({type:"failed",failureCount:h,error:g})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0});try{const h=await this.#a.start();if(h===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(h),this.#n.config.onSuccess?.(h,this),this.#n.config.onSettled?.(h,this.state.error,this),h}catch(h){if(h instanceof lm){if(h.silent)return this.#a.promise;if(h.revert){if(this.state.data===void 0)throw h;return this.state.data}}throw this.#r({type:"error",error:h}),this.#n.config.onError?.(h,this),this.#n.config.onSettled?.(this.state.data,h,this),h}finally{this.scheduleGc()}}#r(e){const a=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...tx(s.data,this.options),fetchMeta:e.meta??null};case"success":const l={...s,...ry(e.data,e.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?l:void 0,l;case"error":const c=e.error;return{...s,error:c,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=a(this.state),zn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function tx(e,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Jv(a.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ry(e,a){return{data:e,dataUpdatedAt:a??Date.now(),error:null,isInvalidated:!1,status:"success"}}function ly(e){const a=typeof e.initialData=="function"?e.initialData():e.initialData,s=a!==void 0,l=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:s?l??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Dj=class extends Vl{constructor(e,a){super(),this.options=a,this.#e=e,this.#r=null,this.#i=rm(),this.bindMethods(),this.setOptions(a)}#e;#t=void 0;#n=void 0;#s=void 0;#a;#l;#i;#r;#p;#f;#m;#c;#u;#o;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),iy(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return im(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return im(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#S(),this.#t.removeObserver(this)}setOptions(e){const a=this.options,s=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof qa(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),a._defaulted&&!Mc(this.options,a)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const l=this.hasListeners();l&&oy(this.#t,s,this.options,a)&&this.#d(),this.updateResult(),l&&(this.#t!==s||qa(this.options.enabled,this.#t)!==qa(a.enabled,this.#t)||fr(this.options.staleTime,this.#t)!==fr(a.staleTime,this.#t))&&this.#g();const c=this.#b();l&&(this.#t!==s||qa(this.options.enabled,this.#t)!==qa(a.enabled,this.#t)||c!==this.#o)&&this.#y(c)}getOptimisticResult(e){const a=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(a,e);return kj(this,s)&&(this.#s=s,this.#l=this.options,this.#a=this.#t.state),s}getCurrentResult(){return this.#s}trackResult(e,a){return new Proxy(e,{get:(s,l)=>(this.trackProp(l),a?.(l),l==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,l))})}trackProp(e){this.#h.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const a=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,a);return s.fetch().then(()=>this.createResult(s,a))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(e){this.#N();let a=this.#t.fetch(this.options,e);return e?.throwOnError||(a=a.catch(ra)),a}#g(){this.#x();const e=fr(this.options.staleTime,this.#t);if($r||this.#s.isStale||!nm(e))return;const s=Qv(this.#s.dataUpdatedAt,e)+1;this.#c=Lr.setTimeout(()=>{this.#s.isStale||this.updateResult()},s)}#b(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#S(),this.#o=e,!($r||qa(this.options.enabled,this.#t)===!1||!nm(this.#o)||this.#o===0)&&(this.#u=Lr.setInterval(()=>{(this.options.refetchIntervalInBackground||qm.isFocused())&&this.#d()},this.#o))}#v(){this.#g(),this.#y(this.#b())}#x(){this.#c&&(Lr.clearTimeout(this.#c),this.#c=void 0)}#S(){this.#u&&(Lr.clearInterval(this.#u),this.#u=void 0)}createResult(e,a){const s=this.#t,l=this.options,c=this.#s,d=this.#a,f=this.#l,g=e!==s?e.state:this.#n,{state:p}=e;let v={...p},x=!1,N;if(a._optimisticResults){const W=this.hasListeners(),ue=!W&&iy(e,a),Ae=W&&oy(e,s,a,l);(ue||Ae)&&(v={...v,...tx(p.data,e.options)}),a._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:I,errorUpdatedAt:j,status:_}=v;N=v.data;let C=!1;if(a.placeholderData!==void 0&&N===void 0&&_==="pending"){let W;c?.isPlaceholderData&&a.placeholderData===f?.placeholderData?(W=c.data,C=!0):W=typeof a.placeholderData=="function"?a.placeholderData(this.#m?.state.data,this.#m):a.placeholderData,W!==void 0&&(_="success",N=sm(c?.data,W,a),x=!0)}if(a.select&&N!==void 0&&!C)if(c&&N===d?.data&&a.select===this.#p)N=this.#f;else try{this.#p=a.select,N=a.select(N),N=sm(c?.data,N,a),this.#f=N,this.#r=null}catch(W){this.#r=W}this.#r&&(I=this.#r,N=this.#f,j=Date.now(),_="error");const q=v.fetchStatus==="fetching",T=_==="pending",J=_==="error",D=T&&q,R=N!==void 0,L={status:_,fetchStatus:v.fetchStatus,isPending:T,isSuccess:_==="success",isError:J,isInitialLoading:D,isLoading:D,data:N,dataUpdatedAt:v.dataUpdatedAt,error:I,errorUpdatedAt:j,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>g.dataUpdateCount||v.errorUpdateCount>g.errorUpdateCount,isFetching:q,isRefetching:q&&!T,isLoadingError:J&&!R,isPaused:v.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:J&&R,isStale:Im(e,a),refetch:this.refetch,promise:this.#i,isEnabled:qa(a.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const W=xe=>{L.status==="error"?xe.reject(L.error):L.data!==void 0&&xe.resolve(L.data)},ue=()=>{const xe=this.#i=L.promise=rm();W(xe)},Ae=this.#i;switch(Ae.status){case"pending":e.queryHash===s.queryHash&&W(Ae);break;case"fulfilled":(L.status==="error"||L.data!==Ae.value)&&ue();break;case"rejected":(L.status!=="error"||L.error!==Ae.reason)&&ue();break}}return L}updateResult(){const e=this.#s,a=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#l=this.options,this.#a.data!==void 0&&(this.#m=this.#t),Mc(a,e))return;this.#s=a;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:l}=this.options,c=typeof l=="function"?l():l;if(c==="all"||!c&&!this.#h.size)return!0;const d=new Set(c??this.#h);return this.options.throwOnError&&d.add("error"),Object.keys(this.#s).some(f=>{const h=f;return this.#s[h]!==e[h]&&d.has(h)})};this.#w({listeners:s()})}#N(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const a=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(a?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#w(e){zn.batch(()=>{e.listeners&&this.listeners.forEach(a=>{a(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function zj(e,a){return qa(a.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&a.retryOnMount===!1)}function iy(e,a){return zj(e,a)||e.state.data!==void 0&&im(e,a,a.refetchOnMount)}function im(e,a,s){if(qa(a.enabled,e)!==!1&&fr(a.staleTime,e)!=="static"){const l=typeof s=="function"?s(e):s;return l==="always"||l!==!1&&Im(e,a)}return!1}function oy(e,a,s,l){return(e!==a||qa(l.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Im(e,s)}function Im(e,a){return qa(a.enabled,e)!==!1&&e.isStaleByTime(fr(a.staleTime,e))}function kj(e,a){return!Mc(e.getCurrentResult(),a)}function cy(e){return{onFetch:(a,s)=>{const l=a.options,c=a.fetchOptions?.meta?.fetchMore?.direction,d=a.state.data?.pages||[],f=a.state.data?.pageParams||[];let h={pages:[],pageParams:[]},g=0;const p=async()=>{let v=!1;const x=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(a.signal.aborted?v=!0:a.signal.addEventListener("abort",()=>{v=!0}),a.signal)})},N=Kv(a.options,a.fetchOptions),I=async(j,_,C)=>{if(v)return Promise.reject();if(_==null&&j.pages.length)return Promise.resolve(j);const T=(()=>{const Z={client:a.client,queryKey:a.queryKey,pageParam:_,direction:C?"backward":"forward",meta:a.options.meta};return x(Z),Z})(),J=await N(T),{maxPages:D}=a.options,R=C?_j:jj;return{pages:R(j.pages,J,D),pageParams:R(j.pageParams,_,D)}};if(c&&d.length){const j=c==="backward",_=j?Mj:uy,C={pages:d,pageParams:f},q=_(l,C);h=await I(C,q,j)}else{const j=e??d.length;do{const _=g===0?f[0]??l.initialPageParam:uy(l,h);if(g>0&&_==null)break;h=await I(h,_),g++}while(g<j)}return h};a.options.persister?a.fetchFn=()=>a.options.persister?.(p,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},s):a.fetchFn=p}}}function uy(e,{pages:a,pageParams:s}){const l=a.length-1;return a.length>0?e.getNextPageParam(a[l],a,s[l],s):void 0}function Mj(e,{pages:a,pageParams:s}){return a.length>0?e.getPreviousPageParam?.(a[0],a,s[0],s):void 0}var Uj=class extends ex{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||nx(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(a=>a!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const a=()=>{this.#a({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=Wv({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(d,f)=>{this.#a({type:"failed",failureCount:d,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:a,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const l=this.state.status==="pending",c=!this.#s.canStart();try{if(l)a();else{this.#a({type:"pending",variables:e,isPaused:c}),await this.#n.config.onMutate?.(e,this,s);const f=await this.options.onMutate?.(e,s);f!==this.state.context&&this.#a({type:"pending",context:f,variables:e,isPaused:c})}const d=await this.#s.start();return await this.#n.config.onSuccess?.(d,e,this.state.context,this,s),await this.options.onSuccess?.(d,e,this.state.context,s),await this.#n.config.onSettled?.(d,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(d,null,e,this.state.context,s),this.#a({type:"success",data:d}),d}catch(d){try{throw await this.#n.config.onError?.(d,e,this.state.context,this,s),await this.options.onError?.(d,e,this.state.context,s),await this.#n.config.onSettled?.(void 0,d,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,d,e,this.state.context,s),d}finally{this.#a({type:"error",error:d})}}finally{this.#n.runNext(this)}}#a(e){const a=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=a(this.state),zn.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function nx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Lj=class extends Vl{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,a,s){const l=new Uj({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(a),state:s});return this.add(l),l}add(e){this.#e.add(e);const a=Sc(e);if(typeof a=="string"){const s=this.#t.get(a);s?s.push(e):this.#t.set(a,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const a=Sc(e);if(typeof a=="string"){const s=this.#t.get(a);if(s)if(s.length>1){const l=s.indexOf(e);l!==-1&&s.splice(l,1)}else s[0]===e&&this.#t.delete(a)}}this.notify({type:"removed",mutation:e})}canRun(e){const a=Sc(e);if(typeof a=="string"){const l=this.#t.get(a)?.find(c=>c.state.status==="pending");return!l||l===e}else return!0}runNext(e){const a=Sc(e);return typeof a=="string"?this.#t.get(a)?.find(l=>l!==e&&l.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){zn.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const a={exact:!0,...e};return this.getAll().find(s=>ny(a,s))}findAll(e={}){return this.getAll().filter(a=>ny(e,a))}notify(e){zn.batch(()=>{this.listeners.forEach(a=>{a(e)})})}resumePausedMutations(){const e=this.getAll().filter(a=>a.state.isPaused);return zn.batch(()=>Promise.all(e.map(a=>a.continue().catch(ra))))}};function Sc(e){return e.options.scope?.id}var Bj=class extends Vl{#e;#t=void 0;#n;#s;constructor(a,s){super(),this.#e=a,this.setOptions(s),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){const s=this.options;this.options=this.#e.defaultMutationOptions(a),Mc(this.options,s)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),s?.mutationKey&&this.options.mutationKey&&Fr(s.mutationKey)!==Fr(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(a){this.#a(),this.#l(a)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#a(),this.#l()}mutate(a,s){return this.#s=s,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(a)}#a(){const a=this.#n?.state??nx();this.#t={...a,isPending:a.status==="pending",isSuccess:a.status==="success",isError:a.status==="error",isIdle:a.status==="idle",mutate:this.mutate,reset:this.reset}}#l(a){zn.batch(()=>{if(this.#s&&this.hasListeners()){const s=this.#t.variables,l=this.#t.context,c={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};a?.type==="success"?(this.#s.onSuccess?.(a.data,s,l,c),this.#s.onSettled?.(a.data,null,s,l,c)):a?.type==="error"&&(this.#s.onError?.(a.error,s,l,c),this.#s.onSettled?.(void 0,a.error,s,l,c))}this.listeners.forEach(s=>{s(this.#t)})})}},qj=class extends Vl{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,a,s){const l=a.queryKey,c=a.queryHash??Lm(l,a);let d=this.get(c);return d||(d=new Tj({client:e,queryKey:l,queryHash:c,options:e.defaultQueryOptions(a),state:s,defaultOptions:e.getQueryDefaults(l)}),this.add(d)),d}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const a=this.#e.get(e.queryHash);a&&(e.destroy(),a===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){zn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const a={exact:!0,...e};return this.getAll().find(s=>ty(a,s))}findAll(e={}){const a=this.getAll();return Object.keys(e).length>0?a.filter(s=>ty(e,s)):a}notify(e){zn.batch(()=>{this.listeners.forEach(a=>{a(e)})})}onFocus(){zn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){zn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ij=class{#e;#t;#n;#s;#a;#l;#i;#r;constructor(e={}){this.#e=e.queryCache||new qj,this.#t=e.mutationCache||new Lj,this.#n=e.defaultOptions||{},this.#s=new Map,this.#a=new Map,this.#l=0}mount(){this.#l++,this.#l===1&&(this.#i=qm.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#r=Uc.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#l--,this.#l===0&&(this.#i?.(),this.#i=void 0,this.#r?.(),this.#r=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const a=this.defaultQueryOptions({queryKey:e});return this.#e.get(a.queryHash)?.state.data}ensureQueryData(e){const a=this.defaultQueryOptions(e),s=this.#e.build(this,a),l=s.state.data;return l===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(fr(a.staleTime,s))&&this.prefetchQuery(a),Promise.resolve(l))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:a,state:s})=>{const l=s.data;return[a,l]})}setQueryData(e,a,s){const l=this.defaultQueryOptions({queryKey:e}),d=this.#e.get(l.queryHash)?.state.data,f=Sj(a,d);if(f!==void 0)return this.#e.build(this,l).setData(f,{...s,manual:!0})}setQueriesData(e,a,s){return zn.batch(()=>this.#e.findAll(e).map(({queryKey:l})=>[l,this.setQueryData(l,a,s)]))}getQueryState(e){const a=this.defaultQueryOptions({queryKey:e});return this.#e.get(a.queryHash)?.state}removeQueries(e){const a=this.#e;zn.batch(()=>{a.findAll(e).forEach(s=>{a.remove(s)})})}resetQueries(e,a){const s=this.#e;return zn.batch(()=>(s.findAll(e).forEach(l=>{l.reset()}),this.refetchQueries({type:"active",...e},a)))}cancelQueries(e,a={}){const s={revert:!0,...a},l=zn.batch(()=>this.#e.findAll(e).map(c=>c.cancel(s)));return Promise.all(l).then(ra).catch(ra)}invalidateQueries(e,a={}){return zn.batch(()=>(this.#e.findAll(e).forEach(s=>{s.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},a)))}refetchQueries(e,a={}){const s={...a,cancelRefetch:a.cancelRefetch??!0},l=zn.batch(()=>this.#e.findAll(e).filter(c=>!c.isDisabled()&&!c.isStatic()).map(c=>{let d=c.fetch(void 0,s);return s.throwOnError||(d=d.catch(ra)),c.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(l).then(ra)}fetchQuery(e){const a=this.defaultQueryOptions(e);a.retry===void 0&&(a.retry=!1);const s=this.#e.build(this,a);return s.isStaleByTime(fr(a.staleTime,s))?s.fetch(a):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ra).catch(ra)}fetchInfiniteQuery(e){return e.behavior=cy(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ra).catch(ra)}ensureInfiniteQueryData(e){return e.behavior=cy(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Uc.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,a){this.#s.set(Fr(e),{queryKey:e,defaultOptions:a})}getQueryDefaults(e){const a=[...this.#s.values()],s={};return a.forEach(l=>{Ki(e,l.queryKey)&&Object.assign(s,l.defaultOptions)}),s}setMutationDefaults(e,a){this.#a.set(Fr(e),{mutationKey:e,defaultOptions:a})}getMutationDefaults(e){const a=[...this.#a.values()],s={};return a.forEach(l=>{Ki(e,l.mutationKey)&&Object.assign(s,l.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const a={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return a.queryHash||(a.queryHash=Lm(a.queryKey,a)),a.refetchOnReconnect===void 0&&(a.refetchOnReconnect=a.networkMode!=="always"),a.throwOnError===void 0&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===Bm&&(a.enabled=!1),a}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},ax=b.createContext(void 0),$m=e=>{const a=b.useContext(ax);if(!a)throw new Error("No QueryClient set, use QueryClientProvider to set one");return a},$j=({client:e,children:a})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(ax.Provider,{value:e,children:a})),sx=b.createContext(!1),Fj=()=>b.useContext(sx);sx.Provider;function Hj(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Vj=b.createContext(Hj()),Zj=()=>b.useContext(Vj),Gj=(e,a)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(a.isReset()||(e.retryOnMount=!1))},Pj=e=>{b.useEffect(()=>{e.clearReset()},[e])},Qj=({result:e,errorResetBoundary:a,throwOnError:s,query:l,suspense:c})=>e.isError&&!a.isReset()&&!e.isFetching&&l&&(c&&e.data===void 0||Xv(s,[e.error,l])),Yj=e=>{if(e.suspense){const s=c=>c==="static"?c:Math.max(c??1e3,1e3),l=e.staleTime;e.staleTime=typeof l=="function"?(...c)=>s(l(...c)):s(l),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Kj=(e,a)=>e.isLoading&&e.isFetching&&!a,Xj=(e,a)=>e?.suspense&&a.isPending,dy=(e,a,s)=>a.fetchOptimistic(e).catch(()=>{s.clearReset()});function Jj(e,a,s){const l=Fj(),c=Zj(),d=$m(),f=d.defaultQueryOptions(e);d.getDefaultOptions().queries?._experimental_beforeQuery?.(f),f._optimisticResults=l?"isRestoring":"optimistic",Yj(f),Gj(f,c),Pj(c);const h=!d.getQueryCache().get(f.queryHash),[g]=b.useState(()=>new a(d,f)),p=g.getOptimisticResult(f),v=!l&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(x=>{const N=v?g.subscribe(zn.batchCalls(x)):ra;return g.updateResult(),N},[g,v]),()=>g.getCurrentResult(),()=>g.getCurrentResult()),b.useEffect(()=>{g.setOptions(f)},[f,g]),Xj(f,p))throw dy(f,g,c);if(Qj({result:p,errorResetBoundary:c,throwOnError:f.throwOnError,query:d.getQueryCache().get(f.queryHash),suspense:f.suspense}))throw p.error;return d.getDefaultOptions().queries?._experimental_afterQuery?.(f,p),f.experimental_prefetchInRender&&!$r&&Kj(p,l)&&(h?dy(f,g,c):d.getQueryCache().get(f.queryHash)?.promise)?.catch(ra).finally(()=>{g.updateResult()}),f.notifyOnChangeProps?p:g.trackResult(p)}function Hr(e,a){return Jj(e,Dj)}function Wj(e,a){const s=$m(),[l]=b.useState(()=>new Bj(s,e));b.useEffect(()=>{l.setOptions(e)},[l,e]);const c=b.useSyncExternalStore(b.useCallback(f=>l.subscribe(zn.batchCalls(f)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),d=b.useCallback((f,h)=>{l.mutate(f,h).catch(ra)},[l]);if(c.error&&Xv(l.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:d,mutateAsync:c.mutate}}var so=e=>e.type==="checkbox",Br=e=>e instanceof Date,pa=e=>e==null;const rx=e=>typeof e=="object";var Cn=e=>!pa(e)&&!Array.isArray(e)&&rx(e)&&!Br(e),e_=e=>Cn(e)&&e.target?so(e.target)?e.target.checked:e.target.value:e,t_=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,n_=(e,a)=>e.has(t_(a)),a_=e=>{const a=e.constructor&&e.constructor.prototype;return Cn(a)&&a.hasOwnProperty("isPrototypeOf")},Fm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function tn(e){let a;const s=Array.isArray(e),l=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)a=new Date(e);else if(!(Fm&&(e instanceof Blob||l))&&(s||Cn(e)))if(a=s?[]:Object.create(Object.getPrototypeOf(e)),!s&&!a_(e))a=e;else for(const c in e)e.hasOwnProperty(c)&&(a[c]=tn(e[c]));else return e;return a}var Jc=e=>/^\w*$/.test(e),Xt=e=>e===void 0,Wc=e=>Array.isArray(e)?e.filter(Boolean):[],Hm=e=>Wc(e.replace(/["|']|\]/g,"").split(/\.|\[/)),qe=(e,a,s)=>{if(!a||!Cn(e))return s;const l=(Jc(a)?[a]:Hm(a)).reduce((c,d)=>pa(c)?c:c[d],e);return Xt(l)||l===e?Xt(e[a])?s:e[a]:l},hs=e=>typeof e=="boolean",Ut=(e,a,s)=>{let l=-1;const c=Jc(a)?[a]:Hm(a),d=c.length,f=d-1;for(;++l<d;){const h=c[l];let g=s;if(l!==f){const p=e[h];g=Cn(p)||Array.isArray(p)?p:isNaN(+c[l+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;e[h]=g,e=e[h]}};const fy={BLUR:"blur",FOCUS_OUT:"focusout"},Ia={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},zs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},lx=ht.createContext(null);lx.displayName="HookFormContext";const ix=()=>ht.useContext(lx);var s_=(e,a,s,l=!0)=>{const c={defaultValues:a._defaultValues};for(const d in e)Object.defineProperty(c,d,{get:()=>{const f=d;return a._proxyFormState[f]!==Ia.all&&(a._proxyFormState[f]=!l||Ia.all),e[f]}});return c};const Vm=typeof window<"u"?ht.useLayoutEffect:ht.useEffect;var Oa=e=>typeof e=="string",om=(e,a,s,l,c)=>Oa(e)?(l&&a.watch.add(e),qe(s,e,c)):Array.isArray(e)?e.map(d=>(l&&a.watch.add(d),qe(s,d))):(l&&(a.watchAll=!0),s),cm=e=>pa(e)||!rx(e);function Wa(e,a,s=new WeakSet){if(cm(e)||cm(a))return e===a;if(Br(e)&&Br(a))return e.getTime()===a.getTime();const l=Object.keys(e),c=Object.keys(a);if(l.length!==c.length)return!1;if(s.has(e)||s.has(a))return!0;s.add(e),s.add(a);for(const d of l){const f=e[d];if(!c.includes(d))return!1;if(d!=="ref"){const h=a[d];if(Br(f)&&Br(h)||Cn(f)&&Cn(h)||Array.isArray(f)&&Array.isArray(h)?!Wa(f,h,s):f!==h)return!1}}return!0}function qi(e){const a=ix(),{control:s=a.control,name:l,defaultValue:c,disabled:d,exact:f,compute:h}=e||{},g=ht.useRef(c),p=ht.useRef(h),v=ht.useRef(void 0),x=ht.useRef(s),N=ht.useRef(l);p.current=h;const[I,j]=ht.useState(()=>{const D=s._getWatch(l,g.current);return p.current?p.current(D):D}),_=ht.useCallback(D=>{const R=om(l,s._names,D||s._formValues,!1,g.current);return p.current?p.current(R):R},[s._formValues,s._names,l]),C=ht.useCallback(D=>{if(!d){const R=om(l,s._names,D||s._formValues,!1,g.current);if(p.current){const Z=p.current(R);Wa(Z,v.current)||(j(Z),v.current=Z)}else j(R)}},[s._formValues,s._names,d,l]);Vm(()=>((x.current!==s||!Wa(N.current,l))&&(x.current=s,N.current=l,C()),s._subscribe({name:l,formState:{values:!0},exact:f,callback:D=>{C(D.values)}})),[s,f,l,C]),ht.useEffect(()=>s._removeUnmounted());const q=x.current!==s,T=N.current,J=ht.useMemo(()=>{if(d)return null;const D=!q&&!Wa(T,l);return q||D?_():null},[d,q,l,T,_]);return J!==null?J:I}var Zm=(e,a,s,l,c)=>a?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[l]:c||!0}}:{},ga=e=>Array.isArray(e)?e:[e],my=()=>{let e=[];return{get observers(){return e},next:c=>{for(const d of e)d.next&&d.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(d=>d!==c)}}),unsubscribe:()=>{e=[]}}};function ox(e,a){const s={};for(const l in e)if(e.hasOwnProperty(l)){const c=e[l],d=a[l];if(c&&Cn(c)&&d){const f=ox(c,d);Cn(f)&&(s[l]=f)}else e[l]&&(s[l]=d)}return s}var ea=e=>Cn(e)&&!Object.keys(e).length,Gm=e=>e.type==="file",es=e=>typeof e=="function",Lc=e=>{if(!Fm)return!1;const a=e?e.ownerDocument:0;return e instanceof(a&&a.defaultView?a.defaultView.HTMLElement:HTMLElement)},cx=e=>e.type==="select-multiple",Pm=e=>e.type==="radio",r_=e=>Pm(e)||so(e),_f=e=>Lc(e)&&e.isConnected;function l_(e,a){const s=a.slice(0,-1).length;let l=0;for(;l<s;)e=Xt(e)?l++:e[a[l++]];return e}function i_(e){for(const a in e)if(e.hasOwnProperty(a)&&!Xt(e[a]))return!1;return!0}function vn(e,a){const s=Array.isArray(a)?a:Jc(a)?[a]:Hm(a),l=s.length===1?e:l_(e,s),c=s.length-1,d=s[c];return l&&delete l[d],c!==0&&(Cn(l)&&ea(l)||Array.isArray(l)&&i_(l))&&vn(e,s.slice(0,-1)),e}var o_=e=>{for(const a in e)if(es(e[a]))return!0;return!1};function ux(e){return Array.isArray(e)||Cn(e)&&!o_(e)}function um(e,a={}){for(const s in e)ux(e[s])?(a[s]=Array.isArray(e[s])?[]:{},um(e[s],a[s])):Xt(e[s])||(a[s]=!0);return a}function zl(e,a,s){s||(s=um(a));for(const l in e)ux(e[l])?Xt(a)||cm(s[l])?s[l]=um(e[l],Array.isArray(e[l])?[]:{}):zl(e[l],pa(a)?{}:a[l],s[l]):s[l]=!Wa(e[l],a[l]);return s}const hy={value:!1,isValid:!1},py={value:!0,isValid:!0};var dx=e=>{if(Array.isArray(e)){if(e.length>1){const a=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:a,isValid:!!a.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Xt(e[0].attributes.value)?Xt(e[0].value)||e[0].value===""?py:{value:e[0].value,isValid:!0}:py:hy}return hy},fx=(e,{valueAsNumber:a,valueAsDate:s,setValueAs:l})=>Xt(e)?e:a?e===""?NaN:e&&+e:s&&Oa(e)?new Date(e):l?l(e):e;const gy={isValid:!1,value:null};var mx=e=>Array.isArray(e)?e.reduce((a,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:a,gy):gy;function by(e){const a=e.ref;return Gm(a)?a.files:Pm(a)?mx(e.refs).value:cx(a)?[...a.selectedOptions].map(({value:s})=>s):so(a)?dx(e.refs).value:fx(Xt(a.value)?e.ref.value:a.value,e)}var c_=(e,a,s,l)=>{const c={};for(const d of e){const f=qe(a,d);f&&Ut(c,d,f._f)}return{criteriaMode:s,names:[...e],fields:c,shouldUseNativeValidation:l}},Bc=e=>e instanceof RegExp,Ii=e=>Xt(e)?e:Bc(e)?e.source:Cn(e)?Bc(e.value)?e.value.source:e.value:e,kl=e=>({isOnSubmit:!e||e===Ia.onSubmit,isOnBlur:e===Ia.onBlur,isOnChange:e===Ia.onChange,isOnAll:e===Ia.all,isOnTouch:e===Ia.onTouched});const yy="AsyncFunction";var u_=e=>!!e&&!!e.validate&&!!(es(e.validate)&&e.validate.constructor.name===yy||Cn(e.validate)&&Object.values(e.validate).find(a=>a.constructor.name===yy)),d_=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),dm=(e,a,s)=>!s&&(a.watchAll||a.watch.has(e)||[...a.watch].some(l=>e.startsWith(l)&&/^\.\w+/.test(e.slice(l.length))));const Ul=(e,a,s,l)=>{for(const c of s||Object.keys(e)){const d=qe(e,c);if(d){const{_f:f,...h}=d;if(f){if(f.refs&&f.refs[0]&&a(f.refs[0],c)&&!l)return!0;if(f.ref&&a(f.ref,f.name)&&!l)return!0;if(Ul(h,a))break}else if(Cn(h)&&Ul(h,a))break}}};function vy(e,a,s){const l=qe(e,s);if(l||Jc(s))return{error:l,name:s};const c=s.split(".");for(;c.length;){const d=c.join("."),f=qe(a,d),h=qe(e,d);if(f&&!Array.isArray(f)&&s!==d)return{name:s};if(h&&h.type)return{name:d,error:h};if(h&&h.root&&h.root.type)return{name:`${d}.root`,error:h.root};c.pop()}return{name:s}}var f_=(e,a,s,l)=>{s(e);const{name:c,...d}=e;return ea(d)||Object.keys(d).length>=Object.keys(a).length||Object.keys(d).find(f=>a[f]===(!l||Ia.all))},m_=(e,a,s)=>!e||!a||e===a||ga(e).some(l=>l&&(s?l===a:l.startsWith(a)||a.startsWith(l))),h_=(e,a,s,l,c)=>c.isOnAll?!1:!s&&c.isOnTouch?!(a||e):(s?l.isOnBlur:c.isOnBlur)?!e:(s?l.isOnChange:c.isOnChange)?e:!0,p_=(e,a)=>!Wc(qe(e,a)).length&&vn(e,a),hx=(e,a,s)=>{const l=ga(qe(e,s));return Ut(l,"root",a[s]),Ut(e,s,l),e};function xy(e,a,s="validate"){if(Oa(e)||Array.isArray(e)&&e.every(Oa)||hs(e)&&!e)return{type:s,message:Oa(e)?e:"",ref:a}}var Cl=e=>Cn(e)&&!Bc(e)?e:{value:e,message:""},fm=async(e,a,s,l,c,d)=>{const{ref:f,refs:h,required:g,maxLength:p,minLength:v,min:x,max:N,pattern:I,validate:j,name:_,valueAsNumber:C,mount:q}=e._f,T=qe(s,_);if(!q||a.has(_))return{};const J=h?h[0]:f,D=he=>{c&&J.reportValidity&&(J.setCustomValidity(hs(he)?"":he||""),J.reportValidity())},R={},Z=Pm(f),L=so(f),W=Z||L,ue=(C||Gm(f))&&Xt(f.value)&&Xt(T)||Lc(f)&&f.value===""||T===""||Array.isArray(T)&&!T.length,Ae=Zm.bind(null,_,l,R),xe=(he,Ne,ke,Te=zs.maxLength,U=zs.minLength)=>{const $=he?Ne:ke;R[_]={type:he?Te:U,message:$,ref:f,...Ae(he?Te:U,$)}};if(d?!Array.isArray(T)||!T.length:g&&(!W&&(ue||pa(T))||hs(T)&&!T||L&&!dx(h).isValid||Z&&!mx(h).isValid)){const{value:he,message:Ne}=Oa(g)?{value:!!g,message:g}:Cl(g);if(he&&(R[_]={type:zs.required,message:Ne,ref:J,...Ae(zs.required,Ne)},!l))return D(Ne),R}if(!ue&&(!pa(x)||!pa(N))){let he,Ne;const ke=Cl(N),Te=Cl(x);if(!pa(T)&&!isNaN(T)){const U=f.valueAsNumber||T&&+T;pa(ke.value)||(he=U>ke.value),pa(Te.value)||(Ne=U<Te.value)}else{const U=f.valueAsDate||new Date(T),$=Se=>new Date(new Date().toDateString()+" "+Se),X=f.type=="time",ye=f.type=="week";Oa(ke.value)&&T&&(he=X?$(T)>$(ke.value):ye?T>ke.value:U>new Date(ke.value)),Oa(Te.value)&&T&&(Ne=X?$(T)<$(Te.value):ye?T<Te.value:U<new Date(Te.value))}if((he||Ne)&&(xe(!!he,ke.message,Te.message,zs.max,zs.min),!l))return D(R[_].message),R}if((p||v)&&!ue&&(Oa(T)||d&&Array.isArray(T))){const he=Cl(p),Ne=Cl(v),ke=!pa(he.value)&&T.length>+he.value,Te=!pa(Ne.value)&&T.length<+Ne.value;if((ke||Te)&&(xe(ke,he.message,Ne.message),!l))return D(R[_].message),R}if(I&&!ue&&Oa(T)){const{value:he,message:Ne}=Cl(I);if(Bc(he)&&!T.match(he)&&(R[_]={type:zs.pattern,message:Ne,ref:f,...Ae(zs.pattern,Ne)},!l))return D(Ne),R}if(j){if(es(j)){const he=await j(T,s),Ne=xy(he,J);if(Ne&&(R[_]={...Ne,...Ae(zs.validate,Ne.message)},!l))return D(Ne.message),R}else if(Cn(j)){let he={};for(const Ne in j){if(!ea(he)&&!l)break;const ke=xy(await j[Ne](T,s),J,Ne);ke&&(he={...ke,...Ae(Ne,ke.message)},D(ke.message),l&&(R[_]=he))}if(!ea(he)&&(R[_]={ref:J,...he},!l))return R}}return D(!0),R};const g_={mode:Ia.onSubmit,reValidateMode:Ia.onChange,shouldFocusError:!0};function b_(e={}){let a={...g_,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:es(a.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1},l={},c=Cn(a.defaultValues)||Cn(a.values)?tn(a.defaultValues||a.values)||{}:{},d=a.shouldUnregister?{}:tn(c),f={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},g,p=0;const v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let x={...v};const N={array:my(),state:my()},I=a.criteriaMode===Ia.all,j=A=>V=>{clearTimeout(p),p=setTimeout(A,V)},_=async A=>{if(!a.disabled&&(v.isValid||x.isValid||A)){const V=a.resolver?ea((await L()).errors):await ue(l,!0);V!==s.isValid&&N.state.next({isValid:V})}},C=(A,V)=>{!a.disabled&&(v.isValidating||v.validatingFields||x.isValidating||x.validatingFields)&&((A||Array.from(h.mount)).forEach(O=>{O&&(V?Ut(s.validatingFields,O,V):vn(s.validatingFields,O))}),N.state.next({validatingFields:s.validatingFields,isValidating:!ea(s.validatingFields)}))},q=(A,V=[],O,Q,G=!0,se=!0)=>{if(Q&&O&&!a.disabled){if(f.action=!0,se&&Array.isArray(qe(l,A))){const Oe=O(qe(l,A),Q.argA,Q.argB);G&&Ut(l,A,Oe)}if(se&&Array.isArray(qe(s.errors,A))){const Oe=O(qe(s.errors,A),Q.argA,Q.argB);G&&Ut(s.errors,A,Oe),p_(s.errors,A)}if((v.touchedFields||x.touchedFields)&&se&&Array.isArray(qe(s.touchedFields,A))){const Oe=O(qe(s.touchedFields,A),Q.argA,Q.argB);G&&Ut(s.touchedFields,A,Oe)}(v.dirtyFields||x.dirtyFields)&&(s.dirtyFields=zl(c,d)),N.state.next({name:A,isDirty:xe(A,V),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Ut(d,A,V)},T=(A,V)=>{Ut(s.errors,A,V),N.state.next({errors:s.errors})},J=A=>{s.errors=A,N.state.next({errors:s.errors,isValid:!1})},D=(A,V,O,Q)=>{const G=qe(l,A);if(G){const se=qe(d,A,Xt(O)?qe(c,A):O);Xt(se)||Q&&Q.defaultChecked||V?Ut(d,A,V?se:by(G._f)):ke(A,se),f.mount&&_()}},R=(A,V,O,Q,G)=>{let se=!1,Oe=!1;const Be={name:A};if(!a.disabled){if(!O||Q){(v.isDirty||x.isDirty)&&(Oe=s.isDirty,s.isDirty=Be.isDirty=xe(),se=Oe!==Be.isDirty);const ae=Wa(qe(c,A),V);Oe=!!qe(s.dirtyFields,A),ae?vn(s.dirtyFields,A):Ut(s.dirtyFields,A,!0),Be.dirtyFields=s.dirtyFields,se=se||(v.dirtyFields||x.dirtyFields)&&Oe!==!ae}if(O){const ae=qe(s.touchedFields,A);ae||(Ut(s.touchedFields,A,O),Be.touchedFields=s.touchedFields,se=se||(v.touchedFields||x.touchedFields)&&ae!==O)}se&&G&&N.state.next(Be)}return se?Be:{}},Z=(A,V,O,Q)=>{const G=qe(s.errors,A),se=(v.isValid||x.isValid)&&hs(V)&&s.isValid!==V;if(a.delayError&&O?(g=j(()=>T(A,O)),g(a.delayError)):(clearTimeout(p),g=null,O?Ut(s.errors,A,O):vn(s.errors,A)),(O?!Wa(G,O):G)||!ea(Q)||se){const Oe={...Q,...se&&hs(V)?{isValid:V}:{},errors:s.errors,name:A};s={...s,...Oe},N.state.next(Oe)}},L=async A=>{C(A,!0);const V=await a.resolver(d,a.context,c_(A||h.mount,l,a.criteriaMode,a.shouldUseNativeValidation));return C(A),V},W=async A=>{const{errors:V}=await L(A);if(A)for(const O of A){const Q=qe(V,O);Q?Ut(s.errors,O,Q):vn(s.errors,O)}else s.errors=V;return V},ue=async(A,V,O={valid:!0})=>{for(const Q in A){const G=A[Q];if(G){const{_f:se,...Oe}=G;if(se){const Be=h.array.has(se.name),ae=G._f&&u_(G._f);ae&&v.validatingFields&&C([se.name],!0);const Me=await fm(G,h.disabled,d,I,a.shouldUseNativeValidation&&!V,Be);if(ae&&v.validatingFields&&C([se.name]),Me[se.name]&&(O.valid=!1,V))break;!V&&(qe(Me,se.name)?Be?hx(s.errors,Me,se.name):Ut(s.errors,se.name,Me[se.name]):vn(s.errors,se.name))}!ea(Oe)&&await ue(Oe,V,O)}}return O.valid},Ae=()=>{for(const A of h.unMount){const V=qe(l,A);V&&(V._f.refs?V._f.refs.every(O=>!_f(O)):!_f(V._f.ref))&&De(A)}h.unMount=new Set},xe=(A,V)=>!a.disabled&&(A&&V&&Ut(d,A,V),!Wa(Se(),c)),he=(A,V,O)=>om(A,h,{...f.mount?d:Xt(V)?c:Oa(A)?{[A]:V}:V},O,V),Ne=A=>Wc(qe(f.mount?d:c,A,a.shouldUnregister?qe(c,A,[]):[])),ke=(A,V,O={})=>{const Q=qe(l,A);let G=V;if(Q){const se=Q._f;se&&(!se.disabled&&Ut(d,A,fx(V,se)),G=Lc(se.ref)&&pa(V)?"":V,cx(se.ref)?[...se.ref.options].forEach(Oe=>Oe.selected=G.includes(Oe.value)):se.refs?so(se.ref)?se.refs.forEach(Oe=>{(!Oe.defaultChecked||!Oe.disabled)&&(Array.isArray(G)?Oe.checked=!!G.find(Be=>Be===Oe.value):Oe.checked=G===Oe.value||!!G)}):se.refs.forEach(Oe=>Oe.checked=Oe.value===G):Gm(se.ref)?se.ref.value="":(se.ref.value=G,se.ref.type||N.state.next({name:A,values:tn(d)})))}(O.shouldDirty||O.shouldTouch)&&R(A,G,O.shouldTouch,O.shouldDirty,!0),O.shouldValidate&&ye(A)},Te=(A,V,O)=>{for(const Q in V){if(!V.hasOwnProperty(Q))return;const G=V[Q],se=A+"."+Q,Oe=qe(l,se);(h.array.has(A)||Cn(G)||Oe&&!Oe._f)&&!Br(G)?Te(se,G,O):ke(se,G,O)}},U=(A,V,O={})=>{const Q=qe(l,A),G=h.array.has(A),se=tn(V);Ut(d,A,se),G?(N.array.next({name:A,values:tn(d)}),(v.isDirty||v.dirtyFields||x.isDirty||x.dirtyFields)&&O.shouldDirty&&N.state.next({name:A,dirtyFields:zl(c,d),isDirty:xe(A,se)})):Q&&!Q._f&&!pa(se)?Te(A,se,O):ke(A,se,O),dm(A,h)&&N.state.next({...s,name:A}),N.state.next({name:f.mount?A:void 0,values:tn(d)})},$=async A=>{f.mount=!0;const V=A.target;let O=V.name,Q=!0;const G=qe(l,O),se=ae=>{Q=Number.isNaN(ae)||Br(ae)&&isNaN(ae.getTime())||Wa(ae,qe(d,O,ae))},Oe=kl(a.mode),Be=kl(a.reValidateMode);if(G){let ae,Me;const He=V.type?by(G._f):e_(A),at=A.type===fy.BLUR||A.type===fy.FOCUS_OUT,Jt=!d_(G._f)&&!a.resolver&&!qe(s.errors,O)&&!G._f.deps||h_(at,qe(s.touchedFields,O),s.isSubmitted,Be,Oe),we=dm(O,h,at);Ut(d,O,He),at?(!V||!V.readOnly)&&(G._f.onBlur&&G._f.onBlur(A),g&&g(0)):G._f.onChange&&G._f.onChange(A);const et=R(O,He,at),Ft=!ea(et)||we;if(!at&&N.state.next({name:O,type:A.type,values:tn(d)}),Jt)return(v.isValid||x.isValid)&&(a.mode==="onBlur"?at&&_():at||_()),Ft&&N.state.next({name:O,...we?{}:et});if(!at&&we&&N.state.next({...s}),a.resolver){const{errors:Et}=await L([O]);if(se(He),Q){const Rn=vy(s.errors,l,O),$n=vy(Et,l,Rn.name||O);ae=$n.error,O=$n.name,Me=ea(Et)}}else C([O],!0),ae=(await fm(G,h.disabled,d,I,a.shouldUseNativeValidation))[O],C([O]),se(He),Q&&(ae?Me=!1:(v.isValid||x.isValid)&&(Me=await ue(l,!0)));Q&&(G._f.deps&&(!Array.isArray(G._f.deps)||G._f.deps.length>0)&&ye(G._f.deps),Z(O,Me,ae,et))}},X=(A,V)=>{if(qe(s.errors,V)&&A.focus)return A.focus(),1},ye=async(A,V={})=>{let O,Q;const G=ga(A);if(a.resolver){const se=await W(Xt(A)?A:G);O=ea(se),Q=A?!G.some(Oe=>qe(se,Oe)):O}else A?(Q=(await Promise.all(G.map(async se=>{const Oe=qe(l,se);return await ue(Oe&&Oe._f?{[se]:Oe}:Oe)}))).every(Boolean),!(!Q&&!s.isValid)&&_()):Q=O=await ue(l);return N.state.next({...!Oa(A)||(v.isValid||x.isValid)&&O!==s.isValid?{}:{name:A},...a.resolver||!A?{isValid:O}:{},errors:s.errors}),V.shouldFocus&&!Q&&Ul(l,X,A?G:h.mount),Q},Se=(A,V)=>{let O={...f.mount?d:c};return V&&(O=ox(V.dirtyFields?s.dirtyFields:s.touchedFields,O)),Xt(A)?O:Oa(A)?qe(O,A):A.map(Q=>qe(O,Q))},w=(A,V)=>({invalid:!!qe((V||s).errors,A),isDirty:!!qe((V||s).dirtyFields,A),error:qe((V||s).errors,A),isValidating:!!qe(s.validatingFields,A),isTouched:!!qe((V||s).touchedFields,A)}),P=A=>{A&&ga(A).forEach(V=>vn(s.errors,V)),N.state.next({errors:A?s.errors:{}})},ie=(A,V,O)=>{const Q=(qe(l,A,{_f:{}})._f||{}).ref,G=qe(s.errors,A)||{},{ref:se,message:Oe,type:Be,...ae}=G;Ut(s.errors,A,{...ae,...V,ref:Q}),N.state.next({name:A,errors:s.errors,isValid:!1}),O&&O.shouldFocus&&Q&&Q.focus&&Q.focus()},M=(A,V)=>es(A)?N.state.subscribe({next:O=>"values"in O&&A(he(void 0,V),O)}):he(A,V,!0),ce=A=>N.state.subscribe({next:V=>{m_(A.name,V.name,A.exact)&&f_(V,A.formState||v,Fe,A.reRenderRoot)&&A.callback({values:{...d},...s,...V,defaultValues:c})}}).unsubscribe,pe=A=>(f.mount=!0,x={...x,...A.formState},ce({...A,formState:x})),De=(A,V={})=>{for(const O of A?ga(A):h.mount)h.mount.delete(O),h.array.delete(O),V.keepValue||(vn(l,O),vn(d,O)),!V.keepError&&vn(s.errors,O),!V.keepDirty&&vn(s.dirtyFields,O),!V.keepTouched&&vn(s.touchedFields,O),!V.keepIsValidating&&vn(s.validatingFields,O),!a.shouldUnregister&&!V.keepDefaultValue&&vn(c,O);N.state.next({values:tn(d)}),N.state.next({...s,...V.keepDirty?{isDirty:xe()}:{}}),!V.keepIsValid&&_()},$e=({disabled:A,name:V})=>{(hs(A)&&f.mount||A||h.disabled.has(V))&&(A?h.disabled.add(V):h.disabled.delete(V))},fe=(A,V={})=>{let O=qe(l,A);const Q=hs(V.disabled)||hs(a.disabled);return Ut(l,A,{...O||{},_f:{...O&&O._f?O._f:{ref:{name:A}},name:A,mount:!0,...V}}),h.mount.add(A),O?$e({disabled:hs(V.disabled)?V.disabled:a.disabled,name:A}):D(A,!0,V.value),{...Q?{disabled:V.disabled||a.disabled}:{},...a.progressive?{required:!!V.required,min:Ii(V.min),max:Ii(V.max),minLength:Ii(V.minLength),maxLength:Ii(V.maxLength),pattern:Ii(V.pattern)}:{},name:A,onChange:$,onBlur:$,ref:G=>{if(G){fe(A,V),O=qe(l,A);const se=Xt(G.value)&&G.querySelectorAll&&G.querySelectorAll("input,select,textarea")[0]||G,Oe=r_(se),Be=O._f.refs||[];if(Oe?Be.find(ae=>ae===se):se===O._f.ref)return;Ut(l,A,{_f:{...O._f,...Oe?{refs:[...Be.filter(_f),se,...Array.isArray(qe(c,A))?[{}]:[]],ref:{type:se.type,name:A}}:{ref:se}}}),D(A,!1,void 0,se)}else O=qe(l,A,{}),O._f&&(O._f.mount=!1),(a.shouldUnregister||V.shouldUnregister)&&!(n_(h.array,A)&&f.action)&&h.unMount.add(A)}}},Le=()=>a.shouldFocusError&&Ul(l,X,h.mount),Ie=A=>{hs(A)&&(N.state.next({disabled:A}),Ul(l,(V,O)=>{const Q=qe(l,O);Q&&(V.disabled=Q._f.disabled||A,Array.isArray(Q._f.refs)&&Q._f.refs.forEach(G=>{G.disabled=Q._f.disabled||A}))},0,!1))},Ge=(A,V)=>async O=>{let Q;O&&(O.preventDefault&&O.preventDefault(),O.persist&&O.persist());let G=tn(d);if(N.state.next({isSubmitting:!0}),a.resolver){const{errors:se,values:Oe}=await L();s.errors=se,G=tn(Oe)}else await ue(l);if(h.disabled.size)for(const se of h.disabled)vn(G,se);if(vn(s.errors,"root"),ea(s.errors)){N.state.next({errors:{}});try{await A(G,O)}catch(se){Q=se}}else V&&await V({...s.errors},O),Le(),setTimeout(Le);if(N.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ea(s.errors)&&!Q,submitCount:s.submitCount+1,errors:s.errors}),Q)throw Q},dt=(A,V={})=>{qe(l,A)&&(Xt(V.defaultValue)?U(A,tn(qe(c,A))):(U(A,V.defaultValue),Ut(c,A,tn(V.defaultValue))),V.keepTouched||vn(s.touchedFields,A),V.keepDirty||(vn(s.dirtyFields,A),s.isDirty=V.defaultValue?xe(A,tn(qe(c,A))):xe()),V.keepError||(vn(s.errors,A),v.isValid&&_()),N.state.next({...s}))},ze=(A,V={})=>{const O=A?tn(A):c,Q=tn(O),G=ea(A),se=G?c:Q;if(V.keepDefaultValues||(c=O),!V.keepValues){if(V.keepDirtyValues){const Oe=new Set([...h.mount,...Object.keys(zl(c,d))]);for(const Be of Array.from(Oe))qe(s.dirtyFields,Be)?Ut(se,Be,qe(d,Be)):U(Be,qe(se,Be))}else{if(Fm&&Xt(A))for(const Oe of h.mount){const Be=qe(l,Oe);if(Be&&Be._f){const ae=Array.isArray(Be._f.refs)?Be._f.refs[0]:Be._f.ref;if(Lc(ae)){const Me=ae.closest("form");if(Me){Me.reset();break}}}}if(V.keepFieldsRef)for(const Oe of h.mount)U(Oe,qe(se,Oe));else l={}}d=a.shouldUnregister?V.keepDefaultValues?tn(c):{}:tn(se),N.array.next({values:{...se}}),N.state.next({values:{...se}})}h={mount:V.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!v.isValid||!!V.keepIsValid||!!V.keepDirtyValues||!a.shouldUnregister&&!ea(se),f.watch=!!a.shouldUnregister,N.state.next({submitCount:V.keepSubmitCount?s.submitCount:0,isDirty:G?!1:V.keepDirty?s.isDirty:!!(V.keepDefaultValues&&!Wa(A,c)),isSubmitted:V.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:G?{}:V.keepDirtyValues?V.keepDefaultValues&&d?zl(c,d):s.dirtyFields:V.keepDefaultValues&&A?zl(c,A):V.keepDirty?s.dirtyFields:{},touchedFields:V.keepTouched?s.touchedFields:{},errors:V.keepErrors?s.errors:{},isSubmitSuccessful:V.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:c})},Ze=(A,V)=>ze(es(A)?A(d):A,V),me=(A,V={})=>{const O=qe(l,A),Q=O&&O._f;if(Q){const G=Q.refs?Q.refs[0]:Q.ref;G.focus&&(G.focus(),V.shouldSelect&&es(G.select)&&G.select())}},Fe=A=>{s={...s,...A}},Je={control:{register:fe,unregister:De,getFieldState:w,handleSubmit:Ge,setError:ie,_subscribe:ce,_runSchema:L,_focusError:Le,_getWatch:he,_getDirty:xe,_setValid:_,_setFieldArray:q,_setDisabledField:$e,_setErrors:J,_getFieldArray:Ne,_reset:ze,_resetDefaultValues:()=>es(a.defaultValues)&&a.defaultValues().then(A=>{Ze(A,a.resetOptions),N.state.next({isLoading:!1})}),_removeUnmounted:Ae,_disableForm:Ie,_subjects:N,_proxyFormState:v,get _fields(){return l},get _formValues(){return d},get _state(){return f},set _state(A){f=A},get _defaultValues(){return c},get _names(){return h},set _names(A){h=A},get _formState(){return s},get _options(){return a},set _options(A){a={...a,...A}}},subscribe:pe,trigger:ye,register:fe,handleSubmit:Ge,watch:M,setValue:U,getValues:Se,reset:Ze,resetField:dt,clearErrors:P,unregister:De,setError:ie,setFocus:me,getFieldState:w};return{...Je,formControl:Je}}var ir=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const s=(Math.random()*16+e)%16|0;return(a=="x"?s:s&3|8).toString(16)})},Ef=(e,a,s={})=>s.shouldFocus||Xt(s.shouldFocus)?s.focusName||`${e}.${Xt(s.focusIndex)?a:s.focusIndex}.`:"",Af=(e,a)=>[...e,...ga(a)],Cf=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Of(e,a,s){return[...e.slice(0,a),...ga(s),...e.slice(a)]}var Rf=(e,a,s)=>Array.isArray(e)?(Xt(e[s])&&(e[s]=void 0),e.splice(s,0,e.splice(a,1)[0]),e):[],Tf=(e,a)=>[...ga(a),...ga(e)];function y_(e,a){let s=0;const l=[...e];for(const c of a)l.splice(c-s,1),s++;return Wc(l).length?l:[]}var Df=(e,a)=>Xt(a)?[]:y_(e,ga(a).sort((s,l)=>s-l)),zf=(e,a,s)=>{[e[a],e[s]]=[e[s],e[a]]},Sy=(e,a,s)=>(e[a]=s,e);function v_(e){const a=ix(),{control:s=a.control,name:l,keyName:c="id",shouldUnregister:d,rules:f}=e,[h,g]=ht.useState(s._getFieldArray(l)),p=ht.useRef(s._getFieldArray(l).map(ir)),v=ht.useRef(!1);s._names.array.add(l),ht.useMemo(()=>f&&h.length>=0&&s.register(l,f),[s,l,h.length,f]),Vm(()=>s._subjects.array.subscribe({next:({values:D,name:R})=>{if(R===l||!R){const Z=qe(D,l);Array.isArray(Z)&&(g(Z),p.current=Z.map(ir))}}}).unsubscribe,[s,l]);const x=ht.useCallback(D=>{v.current=!0,s._setFieldArray(l,D)},[s,l]),N=(D,R)=>{const Z=ga(tn(D)),L=Af(s._getFieldArray(l),Z);s._names.focus=Ef(l,L.length-1,R),p.current=Af(p.current,Z.map(ir)),x(L),g(L),s._setFieldArray(l,L,Af,{argA:Cf(D)})},I=(D,R)=>{const Z=ga(tn(D)),L=Tf(s._getFieldArray(l),Z);s._names.focus=Ef(l,0,R),p.current=Tf(p.current,Z.map(ir)),x(L),g(L),s._setFieldArray(l,L,Tf,{argA:Cf(D)})},j=D=>{const R=Df(s._getFieldArray(l),D);p.current=Df(p.current,D),x(R),g(R),!Array.isArray(qe(s._fields,l))&&Ut(s._fields,l,void 0),s._setFieldArray(l,R,Df,{argA:D})},_=(D,R,Z)=>{const L=ga(tn(R)),W=Of(s._getFieldArray(l),D,L);s._names.focus=Ef(l,D,Z),p.current=Of(p.current,D,L.map(ir)),x(W),g(W),s._setFieldArray(l,W,Of,{argA:D,argB:Cf(R)})},C=(D,R)=>{const Z=s._getFieldArray(l);zf(Z,D,R),zf(p.current,D,R),x(Z),g(Z),s._setFieldArray(l,Z,zf,{argA:D,argB:R},!1)},q=(D,R)=>{const Z=s._getFieldArray(l);Rf(Z,D,R),Rf(p.current,D,R),x(Z),g(Z),s._setFieldArray(l,Z,Rf,{argA:D,argB:R},!1)},T=(D,R)=>{const Z=tn(R),L=Sy(s._getFieldArray(l),D,Z);p.current=[...L].map((W,ue)=>!W||ue===D?ir():p.current[ue]),x(L),g([...L]),s._setFieldArray(l,L,Sy,{argA:D,argB:Z},!0,!1)},J=D=>{const R=ga(tn(D));p.current=R.map(ir),x([...R]),g([...R]),s._setFieldArray(l,[...R],Z=>Z,{},!0,!1)};return ht.useEffect(()=>{if(s._state.action=!1,dm(l,s._names)&&s._subjects.state.next({...s._formState}),v.current&&(!kl(s._options.mode).isOnSubmit||s._formState.isSubmitted)&&!kl(s._options.reValidateMode).isOnSubmit)if(s._options.resolver)s._runSchema([l]).then(D=>{const R=qe(D.errors,l),Z=qe(s._formState.errors,l);(Z?!R&&Z.type||R&&(Z.type!==R.type||Z.message!==R.message):R&&R.type)&&(R?Ut(s._formState.errors,l,R):vn(s._formState.errors,l),s._subjects.state.next({errors:s._formState.errors}))});else{const D=qe(s._fields,l);D&&D._f&&!(kl(s._options.reValidateMode).isOnSubmit&&kl(s._options.mode).isOnSubmit)&&fm(D,s._names.disabled,s._formValues,s._options.criteriaMode===Ia.all,s._options.shouldUseNativeValidation,!0).then(R=>!ea(R)&&s._subjects.state.next({errors:hx(s._formState.errors,R,l)}))}s._subjects.state.next({name:l,values:tn(s._formValues)}),s._names.focus&&Ul(s._fields,(D,R)=>{if(s._names.focus&&R.startsWith(s._names.focus)&&D.focus)return D.focus(),1}),s._names.focus="",s._setValid(),v.current=!1},[h,l,s]),ht.useEffect(()=>(!qe(s._formValues,l)&&s._setFieldArray(l),()=>{const D=(R,Z)=>{const L=qe(s._fields,R);L&&L._f&&(L._f.mount=Z)};s._options.shouldUnregister||d?s.unregister(l):D(l,!1)}),[l,s,c,d]),{swap:ht.useCallback(C,[x,l,s]),move:ht.useCallback(q,[x,l,s]),prepend:ht.useCallback(I,[x,l,s]),append:ht.useCallback(N,[x,l,s]),remove:ht.useCallback(j,[x,l,s]),insert:ht.useCallback(_,[x,l,s]),update:ht.useCallback(T,[x,l,s]),replace:ht.useCallback(J,[x,l,s]),fields:ht.useMemo(()=>h.map((D,R)=>({...D,[c]:p.current[R]||ir()})),[h,c])}}function eu(e={}){const a=ht.useRef(void 0),s=ht.useRef(void 0),[l,c]=ht.useState({isDirty:!1,isValidating:!1,isLoading:es(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:es(e.defaultValues)?void 0:e.defaultValues});if(!a.current)if(e.formControl)a.current={...e.formControl,formState:l},e.defaultValues&&!es(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:f,...h}=b_(e);a.current={...h,formState:l}}const d=a.current.control;return d._options=e,Vm(()=>{const f=d._subscribe({formState:d._proxyFormState,callback:()=>c({...d._formState}),reRenderRoot:!0});return c(h=>({...h,isReady:!0})),d._formState.isReady=!0,f},[d]),ht.useEffect(()=>d._disableForm(e.disabled),[d,e.disabled]),ht.useEffect(()=>{e.mode&&(d._options.mode=e.mode),e.reValidateMode&&(d._options.reValidateMode=e.reValidateMode)},[d,e.mode,e.reValidateMode]),ht.useEffect(()=>{e.errors&&(d._setErrors(e.errors),d._focusError())},[d,e.errors]),ht.useEffect(()=>{e.shouldUnregister&&d._subjects.state.next({values:d._getWatch()})},[d,e.shouldUnregister]),ht.useEffect(()=>{if(d._proxyFormState.isDirty){const f=d._getDirty();f!==l.isDirty&&d._subjects.state.next({isDirty:f})}},[d,l.isDirty]),ht.useEffect(()=>{e.values&&!Wa(e.values,s.current)?(d._reset(e.values,{keepFieldsRef:!0,...d._options.resetOptions}),s.current=e.values,c(f=>({...f}))):d._resetDefaultValues()},[d,e.values]),ht.useEffect(()=>{d._state.mount||(d._setValid(),d._state.mount=!0),d._state.watch&&(d._state.watch=!1,d._subjects.state.next({...d._formState})),d._removeUnmounted()}),a.current.formState=s_(l,d),a.current}function px(e,a){return function(){return e.apply(a,arguments)}}const{toString:x_}=Object.prototype,{getPrototypeOf:Qm}=Object,{iterator:tu,toStringTag:gx}=Symbol,nu=(e=>a=>{const s=x_.call(a);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),ts=e=>(e=e.toLowerCase(),a=>nu(a)===e),au=e=>a=>typeof a===e,{isArray:Zl}=Array,Bl=au("undefined");function ro(e){return e!==null&&!Bl(e)&&e.constructor!==null&&!Bl(e.constructor)&&ba(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const bx=ts("ArrayBuffer");function S_(e){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(e):a=e&&e.buffer&&bx(e.buffer),a}const N_=au("string"),ba=au("function"),yx=au("number"),lo=e=>e!==null&&typeof e=="object",w_=e=>e===!0||e===!1,Tc=e=>{if(nu(e)!=="object")return!1;const a=Qm(e);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(gx in e)&&!(tu in e)},j_=e=>{if(!lo(e)||ro(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},__=ts("Date"),E_=ts("File"),A_=ts("Blob"),C_=ts("FileList"),O_=e=>lo(e)&&ba(e.pipe),R_=e=>{let a;return e&&(typeof FormData=="function"&&e instanceof FormData||ba(e.append)&&((a=nu(e))==="formdata"||a==="object"&&ba(e.toString)&&e.toString()==="[object FormData]"))},T_=ts("URLSearchParams"),[D_,z_,k_,M_]=["ReadableStream","Request","Response","Headers"].map(ts),U_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function io(e,a,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let l,c;if(typeof e!="object"&&(e=[e]),Zl(e))for(l=0,c=e.length;l<c;l++)a.call(null,e[l],l,e);else{if(ro(e))return;const d=s?Object.getOwnPropertyNames(e):Object.keys(e),f=d.length;let h;for(l=0;l<f;l++)h=d[l],a.call(null,e[h],h,e)}}function vx(e,a){if(ro(e))return null;a=a.toLowerCase();const s=Object.keys(e);let l=s.length,c;for(;l-- >0;)if(c=s[l],a===c.toLowerCase())return c;return null}const qr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xx=e=>!Bl(e)&&e!==qr;function mm(){const{caseless:e,skipUndefined:a}=xx(this)&&this||{},s={},l=(c,d)=>{const f=e&&vx(s,d)||d;Tc(s[f])&&Tc(c)?s[f]=mm(s[f],c):Tc(c)?s[f]=mm({},c):Zl(c)?s[f]=c.slice():(!a||!Bl(c))&&(s[f]=c)};for(let c=0,d=arguments.length;c<d;c++)arguments[c]&&io(arguments[c],l);return s}const L_=(e,a,s,{allOwnKeys:l}={})=>(io(a,(c,d)=>{s&&ba(c)?e[d]=px(c,s):e[d]=c},{allOwnKeys:l}),e),B_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),q_=(e,a,s,l)=>{e.prototype=Object.create(a.prototype,l),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:a.prototype}),s&&Object.assign(e.prototype,s)},I_=(e,a,s,l)=>{let c,d,f;const h={};if(a=a||{},e==null)return a;do{for(c=Object.getOwnPropertyNames(e),d=c.length;d-- >0;)f=c[d],(!l||l(f,e,a))&&!h[f]&&(a[f]=e[f],h[f]=!0);e=s!==!1&&Qm(e)}while(e&&(!s||s(e,a))&&e!==Object.prototype);return a},$_=(e,a,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=a.length;const l=e.indexOf(a,s);return l!==-1&&l===s},F_=e=>{if(!e)return null;if(Zl(e))return e;let a=e.length;if(!yx(a))return null;const s=new Array(a);for(;a-- >0;)s[a]=e[a];return s},H_=(e=>a=>e&&a instanceof e)(typeof Uint8Array<"u"&&Qm(Uint8Array)),V_=(e,a)=>{const l=(e&&e[tu]).call(e);let c;for(;(c=l.next())&&!c.done;){const d=c.value;a.call(e,d[0],d[1])}},Z_=(e,a)=>{let s;const l=[];for(;(s=e.exec(a))!==null;)l.push(s);return l},G_=ts("HTMLFormElement"),P_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,l,c){return l.toUpperCase()+c}),Ny=(({hasOwnProperty:e})=>(a,s)=>e.call(a,s))(Object.prototype),Q_=ts("RegExp"),Sx=(e,a)=>{const s=Object.getOwnPropertyDescriptors(e),l={};io(s,(c,d)=>{let f;(f=a(c,d,e))!==!1&&(l[d]=f||c)}),Object.defineProperties(e,l)},Y_=e=>{Sx(e,(a,s)=>{if(ba(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const l=e[s];if(ba(l)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},K_=(e,a)=>{const s={},l=c=>{c.forEach(d=>{s[d]=!0})};return Zl(e)?l(e):l(String(e).split(a)),s},X_=()=>{},J_=(e,a)=>e!=null&&Number.isFinite(e=+e)?e:a;function W_(e){return!!(e&&ba(e.append)&&e[gx]==="FormData"&&e[tu])}const e1=e=>{const a=new Array(10),s=(l,c)=>{if(lo(l)){if(a.indexOf(l)>=0)return;if(ro(l))return l;if(!("toJSON"in l)){a[c]=l;const d=Zl(l)?[]:{};return io(l,(f,h)=>{const g=s(f,c+1);!Bl(g)&&(d[h]=g)}),a[c]=void 0,d}}return l};return s(e,0)},t1=ts("AsyncFunction"),n1=e=>e&&(lo(e)||ba(e))&&ba(e.then)&&ba(e.catch),Nx=((e,a)=>e?setImmediate:a?((s,l)=>(qr.addEventListener("message",({source:c,data:d})=>{c===qr&&d===s&&l.length&&l.shift()()},!1),c=>{l.push(c),qr.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",ba(qr.postMessage)),a1=typeof queueMicrotask<"u"?queueMicrotask.bind(qr):typeof process<"u"&&process.nextTick||Nx,s1=e=>e!=null&&ba(e[tu]),re={isArray:Zl,isArrayBuffer:bx,isBuffer:ro,isFormData:R_,isArrayBufferView:S_,isString:N_,isNumber:yx,isBoolean:w_,isObject:lo,isPlainObject:Tc,isEmptyObject:j_,isReadableStream:D_,isRequest:z_,isResponse:k_,isHeaders:M_,isUndefined:Bl,isDate:__,isFile:E_,isBlob:A_,isRegExp:Q_,isFunction:ba,isStream:O_,isURLSearchParams:T_,isTypedArray:H_,isFileList:C_,forEach:io,merge:mm,extend:L_,trim:U_,stripBOM:B_,inherits:q_,toFlatObject:I_,kindOf:nu,kindOfTest:ts,endsWith:$_,toArray:F_,forEachEntry:V_,matchAll:Z_,isHTMLForm:G_,hasOwnProperty:Ny,hasOwnProp:Ny,reduceDescriptors:Sx,freezeMethods:Y_,toObjectSet:K_,toCamelCase:P_,noop:X_,toFiniteNumber:J_,findKey:vx,global:qr,isContextDefined:xx,isSpecCompliantForm:W_,toJSONObject:e1,isAsyncFn:t1,isThenable:n1,setImmediate:Nx,asap:a1,isIterable:s1};function ut(e,a,s,l,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",a&&(this.code=a),s&&(this.config=s),l&&(this.request=l),c&&(this.response=c,this.status=c.status?c.status:null)}re.inherits(ut,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:re.toJSONObject(this.config),code:this.code,status:this.status}}});const wx=ut.prototype,jx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{jx[e]={value:e}});Object.defineProperties(ut,jx);Object.defineProperty(wx,"isAxiosError",{value:!0});ut.from=(e,a,s,l,c,d)=>{const f=Object.create(wx);re.toFlatObject(e,f,function(v){return v!==Error.prototype},p=>p!=="isAxiosError");const h=e&&e.message?e.message:"Error",g=a==null&&e?e.code:a;return ut.call(f,h,g,s,l,c),e&&f.cause==null&&Object.defineProperty(f,"cause",{value:e,configurable:!0}),f.name=e&&e.name||"Error",d&&Object.assign(f,d),f};const r1=null;function hm(e){return re.isPlainObject(e)||re.isArray(e)}function _x(e){return re.endsWith(e,"[]")?e.slice(0,-2):e}function wy(e,a,s){return e?e.concat(a).map(function(c,d){return c=_x(c),!s&&d?"["+c+"]":c}).join(s?".":""):a}function l1(e){return re.isArray(e)&&!e.some(hm)}const i1=re.toFlatObject(re,{},null,function(a){return/^is[A-Z]/.test(a)});function su(e,a,s){if(!re.isObject(e))throw new TypeError("target must be an object");a=a||new FormData,s=re.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,C){return!re.isUndefined(C[_])});const l=s.metaTokens,c=s.visitor||v,d=s.dots,f=s.indexes,g=(s.Blob||typeof Blob<"u"&&Blob)&&re.isSpecCompliantForm(a);if(!re.isFunction(c))throw new TypeError("visitor must be a function");function p(j){if(j===null)return"";if(re.isDate(j))return j.toISOString();if(re.isBoolean(j))return j.toString();if(!g&&re.isBlob(j))throw new ut("Blob is not supported. Use a Buffer instead.");return re.isArrayBuffer(j)||re.isTypedArray(j)?g&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function v(j,_,C){let q=j;if(j&&!C&&typeof j=="object"){if(re.endsWith(_,"{}"))_=l?_:_.slice(0,-2),j=JSON.stringify(j);else if(re.isArray(j)&&l1(j)||(re.isFileList(j)||re.endsWith(_,"[]"))&&(q=re.toArray(j)))return _=_x(_),q.forEach(function(J,D){!(re.isUndefined(J)||J===null)&&a.append(f===!0?wy([_],D,d):f===null?_:_+"[]",p(J))}),!1}return hm(j)?!0:(a.append(wy(C,_,d),p(j)),!1)}const x=[],N=Object.assign(i1,{defaultVisitor:v,convertValue:p,isVisitable:hm});function I(j,_){if(!re.isUndefined(j)){if(x.indexOf(j)!==-1)throw Error("Circular reference detected in "+_.join("."));x.push(j),re.forEach(j,function(q,T){(!(re.isUndefined(q)||q===null)&&c.call(a,q,re.isString(T)?T.trim():T,_,N))===!0&&I(q,_?_.concat(T):[T])}),x.pop()}}if(!re.isObject(e))throw new TypeError("data must be an object");return I(e),a}function jy(e){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(l){return a[l]})}function Ym(e,a){this._pairs=[],e&&su(e,this,a)}const Ex=Ym.prototype;Ex.append=function(a,s){this._pairs.push([a,s])};Ex.toString=function(a){const s=a?function(l){return a.call(this,l,jy)}:jy;return this._pairs.map(function(c){return s(c[0])+"="+s(c[1])},"").join("&")};function o1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ax(e,a,s){if(!a)return e;const l=s&&s.encode||o1;re.isFunction(s)&&(s={serialize:s});const c=s&&s.serialize;let d;if(c?d=c(a,s):d=re.isURLSearchParams(a)?a.toString():new Ym(a,s).toString(l),d){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class _y{constructor(){this.handlers=[]}use(a,s,l){return this.handlers.push({fulfilled:a,rejected:s,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){re.forEach(this.handlers,function(l){l!==null&&a(l)})}}const Cx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},c1=typeof URLSearchParams<"u"?URLSearchParams:Ym,u1=typeof FormData<"u"?FormData:null,d1=typeof Blob<"u"?Blob:null,f1={isBrowser:!0,classes:{URLSearchParams:c1,FormData:u1,Blob:d1},protocols:["http","https","file","blob","url","data"]},Km=typeof window<"u"&&typeof document<"u",pm=typeof navigator=="object"&&navigator||void 0,m1=Km&&(!pm||["ReactNative","NativeScript","NS"].indexOf(pm.product)<0),h1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",p1=Km&&window.location.href||"http://localhost",g1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Km,hasStandardBrowserEnv:m1,hasStandardBrowserWebWorkerEnv:h1,navigator:pm,origin:p1},Symbol.toStringTag,{value:"Module"})),ta={...g1,...f1};function b1(e,a){return su(e,new ta.classes.URLSearchParams,{visitor:function(s,l,c,d){return ta.isNode&&re.isBuffer(s)?(this.append(l,s.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...a})}function y1(e){return re.matchAll(/\w+|\[(\w*)]/g,e).map(a=>a[0]==="[]"?"":a[1]||a[0])}function v1(e){const a={},s=Object.keys(e);let l;const c=s.length;let d;for(l=0;l<c;l++)d=s[l],a[d]=e[d];return a}function Ox(e){function a(s,l,c,d){let f=s[d++];if(f==="__proto__")return!0;const h=Number.isFinite(+f),g=d>=s.length;return f=!f&&re.isArray(c)?c.length:f,g?(re.hasOwnProp(c,f)?c[f]=[c[f],l]:c[f]=l,!h):((!c[f]||!re.isObject(c[f]))&&(c[f]=[]),a(s,l,c[f],d)&&re.isArray(c[f])&&(c[f]=v1(c[f])),!h)}if(re.isFormData(e)&&re.isFunction(e.entries)){const s={};return re.forEachEntry(e,(l,c)=>{a(y1(l),c,s,0)}),s}return null}function x1(e,a,s){if(re.isString(e))try{return(a||JSON.parse)(e),re.trim(e)}catch(l){if(l.name!=="SyntaxError")throw l}return(s||JSON.stringify)(e)}const oo={transitional:Cx,adapter:["xhr","http","fetch"],transformRequest:[function(a,s){const l=s.getContentType()||"",c=l.indexOf("application/json")>-1,d=re.isObject(a);if(d&&re.isHTMLForm(a)&&(a=new FormData(a)),re.isFormData(a))return c?JSON.stringify(Ox(a)):a;if(re.isArrayBuffer(a)||re.isBuffer(a)||re.isStream(a)||re.isFile(a)||re.isBlob(a)||re.isReadableStream(a))return a;if(re.isArrayBufferView(a))return a.buffer;if(re.isURLSearchParams(a))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let h;if(d){if(l.indexOf("application/x-www-form-urlencoded")>-1)return b1(a,this.formSerializer).toString();if((h=re.isFileList(a))||l.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return su(h?{"files[]":a}:a,g&&new g,this.formSerializer)}}return d||c?(s.setContentType("application/json",!1),x1(a)):a}],transformResponse:[function(a){const s=this.transitional||oo.transitional,l=s&&s.forcedJSONParsing,c=this.responseType==="json";if(re.isResponse(a)||re.isReadableStream(a))return a;if(a&&re.isString(a)&&(l&&!this.responseType||c)){const f=!(s&&s.silentJSONParsing)&&c;try{return JSON.parse(a,this.parseReviver)}catch(h){if(f)throw h.name==="SyntaxError"?ut.from(h,ut.ERR_BAD_RESPONSE,this,null,this.response):h}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ta.classes.FormData,Blob:ta.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};re.forEach(["delete","get","head","post","put","patch"],e=>{oo.headers[e]={}});const S1=re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),N1=e=>{const a={};let s,l,c;return e&&e.split(`
`).forEach(function(f){c=f.indexOf(":"),s=f.substring(0,c).trim().toLowerCase(),l=f.substring(c+1).trim(),!(!s||a[s]&&S1[s])&&(s==="set-cookie"?a[s]?a[s].push(l):a[s]=[l]:a[s]=a[s]?a[s]+", "+l:l)}),a},Ey=Symbol("internals");function $i(e){return e&&String(e).trim().toLowerCase()}function Dc(e){return e===!1||e==null?e:re.isArray(e)?e.map(Dc):String(e)}function w1(e){const a=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=s.exec(e);)a[l[1]]=l[2];return a}const j1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function kf(e,a,s,l,c){if(re.isFunction(l))return l.call(this,a,s);if(c&&(a=s),!!re.isString(a)){if(re.isString(l))return a.indexOf(l)!==-1;if(re.isRegExp(l))return l.test(a)}}function _1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,s,l)=>s.toUpperCase()+l)}function E1(e,a){const s=re.toCamelCase(" "+a);["get","set","has"].forEach(l=>{Object.defineProperty(e,l+s,{value:function(c,d,f){return this[l].call(this,a,c,d,f)},configurable:!0})})}let ya=class{constructor(a){a&&this.set(a)}set(a,s,l){const c=this;function d(h,g,p){const v=$i(g);if(!v)throw new Error("header name must be a non-empty string");const x=re.findKey(c,v);(!x||c[x]===void 0||p===!0||p===void 0&&c[x]!==!1)&&(c[x||g]=Dc(h))}const f=(h,g)=>re.forEach(h,(p,v)=>d(p,v,g));if(re.isPlainObject(a)||a instanceof this.constructor)f(a,s);else if(re.isString(a)&&(a=a.trim())&&!j1(a))f(N1(a),s);else if(re.isObject(a)&&re.isIterable(a)){let h={},g,p;for(const v of a){if(!re.isArray(v))throw TypeError("Object iterator must return a key-value pair");h[p=v[0]]=(g=h[p])?re.isArray(g)?[...g,v[1]]:[g,v[1]]:v[1]}f(h,s)}else a!=null&&d(s,a,l);return this}get(a,s){if(a=$i(a),a){const l=re.findKey(this,a);if(l){const c=this[l];if(!s)return c;if(s===!0)return w1(c);if(re.isFunction(s))return s.call(this,c,l);if(re.isRegExp(s))return s.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,s){if(a=$i(a),a){const l=re.findKey(this,a);return!!(l&&this[l]!==void 0&&(!s||kf(this,this[l],l,s)))}return!1}delete(a,s){const l=this;let c=!1;function d(f){if(f=$i(f),f){const h=re.findKey(l,f);h&&(!s||kf(l,l[h],h,s))&&(delete l[h],c=!0)}}return re.isArray(a)?a.forEach(d):d(a),c}clear(a){const s=Object.keys(this);let l=s.length,c=!1;for(;l--;){const d=s[l];(!a||kf(this,this[d],d,a,!0))&&(delete this[d],c=!0)}return c}normalize(a){const s=this,l={};return re.forEach(this,(c,d)=>{const f=re.findKey(l,d);if(f){s[f]=Dc(c),delete s[d];return}const h=a?_1(d):String(d).trim();h!==d&&delete s[d],s[h]=Dc(c),l[h]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const s=Object.create(null);return re.forEach(this,(l,c)=>{l!=null&&l!==!1&&(s[c]=a&&re.isArray(l)?l.join(", "):l)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,s])=>a+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...s){const l=new this(a);return s.forEach(c=>l.set(c)),l}static accessor(a){const l=(this[Ey]=this[Ey]={accessors:{}}).accessors,c=this.prototype;function d(f){const h=$i(f);l[h]||(E1(c,f),l[h]=!0)}return re.isArray(a)?a.forEach(d):d(a),this}};ya.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);re.reduceDescriptors(ya.prototype,({value:e},a)=>{let s=a[0].toUpperCase()+a.slice(1);return{get:()=>e,set(l){this[s]=l}}});re.freezeMethods(ya);function Mf(e,a){const s=this||oo,l=a||s,c=ya.from(l.headers);let d=l.data;return re.forEach(e,function(h){d=h.call(s,d,c.normalize(),a?a.status:void 0)}),c.normalize(),d}function Rx(e){return!!(e&&e.__CANCEL__)}function Gl(e,a,s){ut.call(this,e??"canceled",ut.ERR_CANCELED,a,s),this.name="CanceledError"}re.inherits(Gl,ut,{__CANCEL__:!0});function Tx(e,a,s){const l=s.config.validateStatus;!s.status||!l||l(s.status)?e(s):a(new ut("Request failed with status code "+s.status,[ut.ERR_BAD_REQUEST,ut.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function A1(e){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return a&&a[1]||""}function C1(e,a){e=e||10;const s=new Array(e),l=new Array(e);let c=0,d=0,f;return a=a!==void 0?a:1e3,function(g){const p=Date.now(),v=l[d];f||(f=p),s[c]=g,l[c]=p;let x=d,N=0;for(;x!==c;)N+=s[x++],x=x%e;if(c=(c+1)%e,c===d&&(d=(d+1)%e),p-f<a)return;const I=v&&p-v;return I?Math.round(N*1e3/I):void 0}}function O1(e,a){let s=0,l=1e3/a,c,d;const f=(p,v=Date.now())=>{s=v,c=null,d&&(clearTimeout(d),d=null),e(...p)};return[(...p)=>{const v=Date.now(),x=v-s;x>=l?f(p,v):(c=p,d||(d=setTimeout(()=>{d=null,f(c)},l-x)))},()=>c&&f(c)]}const qc=(e,a,s=3)=>{let l=0;const c=C1(50,250);return O1(d=>{const f=d.loaded,h=d.lengthComputable?d.total:void 0,g=f-l,p=c(g),v=f<=h;l=f;const x={loaded:f,total:h,progress:h?f/h:void 0,bytes:g,rate:p||void 0,estimated:p&&h&&v?(h-f)/p:void 0,event:d,lengthComputable:h!=null,[a?"download":"upload"]:!0};e(x)},s)},Ay=(e,a)=>{const s=e!=null;return[l=>a[0]({lengthComputable:s,total:e,loaded:l}),a[1]]},Cy=e=>(...a)=>re.asap(()=>e(...a)),R1=ta.hasStandardBrowserEnv?((e,a)=>s=>(s=new URL(s,ta.origin),e.protocol===s.protocol&&e.host===s.host&&(a||e.port===s.port)))(new URL(ta.origin),ta.navigator&&/(msie|trident)/i.test(ta.navigator.userAgent)):()=>!0,T1=ta.hasStandardBrowserEnv?{write(e,a,s,l,c,d,f){if(typeof document>"u")return;const h=[`${e}=${encodeURIComponent(a)}`];re.isNumber(s)&&h.push(`expires=${new Date(s).toUTCString()}`),re.isString(l)&&h.push(`path=${l}`),re.isString(c)&&h.push(`domain=${c}`),d===!0&&h.push("secure"),re.isString(f)&&h.push(`SameSite=${f}`),document.cookie=h.join("; ")},read(e){if(typeof document>"u")return null;const a=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return a?decodeURIComponent(a[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function D1(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function z1(e,a){return a?e.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):e}function Dx(e,a,s){let l=!D1(a);return e&&(l||s==!1)?z1(e,a):a}const Oy=e=>e instanceof ya?{...e}:e;function Vr(e,a){a=a||{};const s={};function l(p,v,x,N){return re.isPlainObject(p)&&re.isPlainObject(v)?re.merge.call({caseless:N},p,v):re.isPlainObject(v)?re.merge({},v):re.isArray(v)?v.slice():v}function c(p,v,x,N){if(re.isUndefined(v)){if(!re.isUndefined(p))return l(void 0,p,x,N)}else return l(p,v,x,N)}function d(p,v){if(!re.isUndefined(v))return l(void 0,v)}function f(p,v){if(re.isUndefined(v)){if(!re.isUndefined(p))return l(void 0,p)}else return l(void 0,v)}function h(p,v,x){if(x in a)return l(p,v);if(x in e)return l(void 0,p)}const g={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:h,headers:(p,v,x)=>c(Oy(p),Oy(v),x,!0)};return re.forEach(Object.keys({...e,...a}),function(v){const x=g[v]||c,N=x(e[v],a[v],v);re.isUndefined(N)&&x!==h||(s[v]=N)}),s}const zx=e=>{const a=Vr({},e);let{data:s,withXSRFToken:l,xsrfHeaderName:c,xsrfCookieName:d,headers:f,auth:h}=a;if(a.headers=f=ya.from(f),a.url=Ax(Dx(a.baseURL,a.url,a.allowAbsoluteUrls),e.params,e.paramsSerializer),h&&f.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),re.isFormData(s)){if(ta.hasStandardBrowserEnv||ta.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(re.isFunction(s.getHeaders)){const g=s.getHeaders(),p=["content-type","content-length"];Object.entries(g).forEach(([v,x])=>{p.includes(v.toLowerCase())&&f.set(v,x)})}}if(ta.hasStandardBrowserEnv&&(l&&re.isFunction(l)&&(l=l(a)),l||l!==!1&&R1(a.url))){const g=c&&d&&T1.read(d);g&&f.set(c,g)}return a},k1=typeof XMLHttpRequest<"u",M1=k1&&function(e){return new Promise(function(s,l){const c=zx(e);let d=c.data;const f=ya.from(c.headers).normalize();let{responseType:h,onUploadProgress:g,onDownloadProgress:p}=c,v,x,N,I,j;function _(){I&&I(),j&&j(),c.cancelToken&&c.cancelToken.unsubscribe(v),c.signal&&c.signal.removeEventListener("abort",v)}let C=new XMLHttpRequest;C.open(c.method.toUpperCase(),c.url,!0),C.timeout=c.timeout;function q(){if(!C)return;const J=ya.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),R={data:!h||h==="text"||h==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:J,config:e,request:C};Tx(function(L){s(L),_()},function(L){l(L),_()},R),C=null}"onloadend"in C?C.onloadend=q:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(q)},C.onabort=function(){C&&(l(new ut("Request aborted",ut.ECONNABORTED,e,C)),C=null)},C.onerror=function(D){const R=D&&D.message?D.message:"Network Error",Z=new ut(R,ut.ERR_NETWORK,e,C);Z.event=D||null,l(Z),C=null},C.ontimeout=function(){let D=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const R=c.transitional||Cx;c.timeoutErrorMessage&&(D=c.timeoutErrorMessage),l(new ut(D,R.clarifyTimeoutError?ut.ETIMEDOUT:ut.ECONNABORTED,e,C)),C=null},d===void 0&&f.setContentType(null),"setRequestHeader"in C&&re.forEach(f.toJSON(),function(D,R){C.setRequestHeader(R,D)}),re.isUndefined(c.withCredentials)||(C.withCredentials=!!c.withCredentials),h&&h!=="json"&&(C.responseType=c.responseType),p&&([N,j]=qc(p,!0),C.addEventListener("progress",N)),g&&C.upload&&([x,I]=qc(g),C.upload.addEventListener("progress",x),C.upload.addEventListener("loadend",I)),(c.cancelToken||c.signal)&&(v=J=>{C&&(l(!J||J.type?new Gl(null,e,C):J),C.abort(),C=null)},c.cancelToken&&c.cancelToken.subscribe(v),c.signal&&(c.signal.aborted?v():c.signal.addEventListener("abort",v)));const T=A1(c.url);if(T&&ta.protocols.indexOf(T)===-1){l(new ut("Unsupported protocol "+T+":",ut.ERR_BAD_REQUEST,e));return}C.send(d||null)})},U1=(e,a)=>{const{length:s}=e=e?e.filter(Boolean):[];if(a||s){let l=new AbortController,c;const d=function(p){if(!c){c=!0,h();const v=p instanceof Error?p:this.reason;l.abort(v instanceof ut?v:new Gl(v instanceof Error?v.message:v))}};let f=a&&setTimeout(()=>{f=null,d(new ut(`timeout ${a} of ms exceeded`,ut.ETIMEDOUT))},a);const h=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(d):p.removeEventListener("abort",d)}),e=null)};e.forEach(p=>p.addEventListener("abort",d));const{signal:g}=l;return g.unsubscribe=()=>re.asap(h),g}},L1=function*(e,a){let s=e.byteLength;if(s<a){yield e;return}let l=0,c;for(;l<s;)c=l+a,yield e.slice(l,c),l=c},B1=async function*(e,a){for await(const s of q1(e))yield*L1(s,a)},q1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const a=e.getReader();try{for(;;){const{done:s,value:l}=await a.read();if(s)break;yield l}}finally{await a.cancel()}},Ry=(e,a,s,l)=>{const c=B1(e,a);let d=0,f,h=g=>{f||(f=!0,l&&l(g))};return new ReadableStream({async pull(g){try{const{done:p,value:v}=await c.next();if(p){h(),g.close();return}let x=v.byteLength;if(s){let N=d+=x;s(N)}g.enqueue(new Uint8Array(v))}catch(p){throw h(p),p}},cancel(g){return h(g),c.return()}},{highWaterMark:2})},Ty=64*1024,{isFunction:Nc}=re,I1=(({Request:e,Response:a})=>({Request:e,Response:a}))(re.global),{ReadableStream:Dy,TextEncoder:zy}=re.global,ky=(e,...a)=>{try{return!!e(...a)}catch{return!1}},$1=e=>{e=re.merge.call({skipUndefined:!0},I1,e);const{fetch:a,Request:s,Response:l}=e,c=a?Nc(a):typeof fetch=="function",d=Nc(s),f=Nc(l);if(!c)return!1;const h=c&&Nc(Dy),g=c&&(typeof zy=="function"?(j=>_=>j.encode(_))(new zy):async j=>new Uint8Array(await new s(j).arrayBuffer())),p=d&&h&&ky(()=>{let j=!1;const _=new s(ta.origin,{body:new Dy,method:"POST",get duplex(){return j=!0,"half"}}).headers.has("Content-Type");return j&&!_}),v=f&&h&&ky(()=>re.isReadableStream(new l("").body)),x={stream:v&&(j=>j.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(j=>{!x[j]&&(x[j]=(_,C)=>{let q=_&&_[j];if(q)return q.call(_);throw new ut(`Response type '${j}' is not supported`,ut.ERR_NOT_SUPPORT,C)})});const N=async j=>{if(j==null)return 0;if(re.isBlob(j))return j.size;if(re.isSpecCompliantForm(j))return(await new s(ta.origin,{method:"POST",body:j}).arrayBuffer()).byteLength;if(re.isArrayBufferView(j)||re.isArrayBuffer(j))return j.byteLength;if(re.isURLSearchParams(j)&&(j=j+""),re.isString(j))return(await g(j)).byteLength},I=async(j,_)=>{const C=re.toFiniteNumber(j.getContentLength());return C??N(_)};return async j=>{let{url:_,method:C,data:q,signal:T,cancelToken:J,timeout:D,onDownloadProgress:R,onUploadProgress:Z,responseType:L,headers:W,withCredentials:ue="same-origin",fetchOptions:Ae}=zx(j),xe=a||fetch;L=L?(L+"").toLowerCase():"text";let he=U1([T,J&&J.toAbortSignal()],D),Ne=null;const ke=he&&he.unsubscribe&&(()=>{he.unsubscribe()});let Te;try{if(Z&&p&&C!=="get"&&C!=="head"&&(Te=await I(W,q))!==0){let w=new s(_,{method:"POST",body:q,duplex:"half"}),P;if(re.isFormData(q)&&(P=w.headers.get("content-type"))&&W.setContentType(P),w.body){const[ie,M]=Ay(Te,qc(Cy(Z)));q=Ry(w.body,Ty,ie,M)}}re.isString(ue)||(ue=ue?"include":"omit");const U=d&&"credentials"in s.prototype,$={...Ae,signal:he,method:C.toUpperCase(),headers:W.normalize().toJSON(),body:q,duplex:"half",credentials:U?ue:void 0};Ne=d&&new s(_,$);let X=await(d?xe(Ne,Ae):xe(_,$));const ye=v&&(L==="stream"||L==="response");if(v&&(R||ye&&ke)){const w={};["status","statusText","headers"].forEach(ce=>{w[ce]=X[ce]});const P=re.toFiniteNumber(X.headers.get("content-length")),[ie,M]=R&&Ay(P,qc(Cy(R),!0))||[];X=new l(Ry(X.body,Ty,ie,()=>{M&&M(),ke&&ke()}),w)}L=L||"text";let Se=await x[re.findKey(x,L)||"text"](X,j);return!ye&&ke&&ke(),await new Promise((w,P)=>{Tx(w,P,{data:Se,headers:ya.from(X.headers),status:X.status,statusText:X.statusText,config:j,request:Ne})})}catch(U){throw ke&&ke(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new ut("Network Error",ut.ERR_NETWORK,j,Ne),{cause:U.cause||U}):ut.from(U,U&&U.code,j,Ne)}}},F1=new Map,kx=e=>{let a=e&&e.env||{};const{fetch:s,Request:l,Response:c}=a,d=[l,c,s];let f=d.length,h=f,g,p,v=F1;for(;h--;)g=d[h],p=v.get(g),p===void 0&&v.set(g,p=h?new Map:$1(a)),v=p;return p};kx();const Xm={http:r1,xhr:M1,fetch:{get:kx}};re.forEach(Xm,(e,a)=>{if(e){try{Object.defineProperty(e,"name",{value:a})}catch{}Object.defineProperty(e,"adapterName",{value:a})}});const My=e=>`- ${e}`,H1=e=>re.isFunction(e)||e===null||e===!1;function V1(e,a){e=re.isArray(e)?e:[e];const{length:s}=e;let l,c;const d={};for(let f=0;f<s;f++){l=e[f];let h;if(c=l,!H1(l)&&(c=Xm[(h=String(l)).toLowerCase()],c===void 0))throw new ut(`Unknown adapter '${h}'`);if(c&&(re.isFunction(c)||(c=c.get(a))))break;d[h||"#"+f]=c}if(!c){const f=Object.entries(d).map(([g,p])=>`adapter ${g} `+(p===!1?"is not supported by the environment":"is not available in the build"));let h=s?f.length>1?`since :
`+f.map(My).join(`
`):" "+My(f[0]):"as no adapter specified";throw new ut("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return c}const Mx={getAdapter:V1,adapters:Xm};function Uf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Gl(null,e)}function Uy(e){return Uf(e),e.headers=ya.from(e.headers),e.data=Mf.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Mx.getAdapter(e.adapter||oo.adapter,e)(e).then(function(l){return Uf(e),l.data=Mf.call(e,e.transformResponse,l),l.headers=ya.from(l.headers),l},function(l){return Rx(l)||(Uf(e),l&&l.response&&(l.response.data=Mf.call(e,e.transformResponse,l.response),l.response.headers=ya.from(l.response.headers))),Promise.reject(l)})}const Ux="1.13.2",ru={};["object","boolean","number","function","string","symbol"].forEach((e,a)=>{ru[e]=function(l){return typeof l===e||"a"+(a<1?"n ":" ")+e}});const Ly={};ru.transitional=function(a,s,l){function c(d,f){return"[Axios v"+Ux+"] Transitional option '"+d+"'"+f+(l?". "+l:"")}return(d,f,h)=>{if(a===!1)throw new ut(c(f," has been removed"+(s?" in "+s:"")),ut.ERR_DEPRECATED);return s&&!Ly[f]&&(Ly[f]=!0,console.warn(c(f," has been deprecated since v"+s+" and will be removed in the near future"))),a?a(d,f,h):!0}};ru.spelling=function(a){return(s,l)=>(console.warn(`${l} is likely a misspelling of ${a}`),!0)};function Z1(e,a,s){if(typeof e!="object")throw new ut("options must be an object",ut.ERR_BAD_OPTION_VALUE);const l=Object.keys(e);let c=l.length;for(;c-- >0;){const d=l[c],f=a[d];if(f){const h=e[d],g=h===void 0||f(h,d,e);if(g!==!0)throw new ut("option "+d+" must be "+g,ut.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new ut("Unknown option "+d,ut.ERR_BAD_OPTION)}}const zc={assertOptions:Z1,validators:ru},ms=zc.validators;let Ir=class{constructor(a){this.defaults=a||{},this.interceptors={request:new _y,response:new _y}}async request(a,s){try{return await this._request(a,s)}catch(l){if(l instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const d=c.stack?c.stack.replace(/^.+\n/,""):"";try{l.stack?d&&!String(l.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+d):l.stack=d}catch{}}throw l}}_request(a,s){typeof a=="string"?(s=s||{},s.url=a):s=a||{},s=Vr(this.defaults,s);const{transitional:l,paramsSerializer:c,headers:d}=s;l!==void 0&&zc.assertOptions(l,{silentJSONParsing:ms.transitional(ms.boolean),forcedJSONParsing:ms.transitional(ms.boolean),clarifyTimeoutError:ms.transitional(ms.boolean)},!1),c!=null&&(re.isFunction(c)?s.paramsSerializer={serialize:c}:zc.assertOptions(c,{encode:ms.function,serialize:ms.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),zc.assertOptions(s,{baseUrl:ms.spelling("baseURL"),withXsrfToken:ms.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let f=d&&re.merge(d.common,d[s.method]);d&&re.forEach(["delete","get","head","post","put","patch","common"],j=>{delete d[j]}),s.headers=ya.concat(f,d);const h=[];let g=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(s)===!1||(g=g&&_.synchronous,h.unshift(_.fulfilled,_.rejected))});const p=[];this.interceptors.response.forEach(function(_){p.push(_.fulfilled,_.rejected)});let v,x=0,N;if(!g){const j=[Uy.bind(this),void 0];for(j.unshift(...h),j.push(...p),N=j.length,v=Promise.resolve(s);x<N;)v=v.then(j[x++],j[x++]);return v}N=h.length;let I=s;for(;x<N;){const j=h[x++],_=h[x++];try{I=j(I)}catch(C){_.call(this,C);break}}try{v=Uy.call(this,I)}catch(j){return Promise.reject(j)}for(x=0,N=p.length;x<N;)v=v.then(p[x++],p[x++]);return v}getUri(a){a=Vr(this.defaults,a);const s=Dx(a.baseURL,a.url,a.allowAbsoluteUrls);return Ax(s,a.params,a.paramsSerializer)}};re.forEach(["delete","get","head","options"],function(a){Ir.prototype[a]=function(s,l){return this.request(Vr(l||{},{method:a,url:s,data:(l||{}).data}))}});re.forEach(["post","put","patch"],function(a){function s(l){return function(d,f,h){return this.request(Vr(h||{},{method:a,headers:l?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}Ir.prototype[a]=s(),Ir.prototype[a+"Form"]=s(!0)});let G1=class Lx{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(d){s=d});const l=this;this.promise.then(c=>{if(!l._listeners)return;let d=l._listeners.length;for(;d-- >0;)l._listeners[d](c);l._listeners=null}),this.promise.then=c=>{let d;const f=new Promise(h=>{l.subscribe(h),d=h}).then(c);return f.cancel=function(){l.unsubscribe(d)},f},a(function(d,f,h){l.reason||(l.reason=new Gl(d,f,h),s(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const s=this._listeners.indexOf(a);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const a=new AbortController,s=l=>{a.abort(l)};return this.subscribe(s),a.signal.unsubscribe=()=>this.unsubscribe(s),a.signal}static source(){let a;return{token:new Lx(function(c){a=c}),cancel:a}}};function P1(e){return function(s){return e.apply(null,s)}}function Q1(e){return re.isObject(e)&&e.isAxiosError===!0}const gm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(gm).forEach(([e,a])=>{gm[a]=e});function Bx(e){const a=new Ir(e),s=px(Ir.prototype.request,a);return re.extend(s,Ir.prototype,a,{allOwnKeys:!0}),re.extend(s,a,null,{allOwnKeys:!0}),s.create=function(c){return Bx(Vr(e,c))},s}const gt=Bx(oo);gt.Axios=Ir;gt.CanceledError=Gl;gt.CancelToken=G1;gt.isCancel=Rx;gt.VERSION=Ux;gt.toFormData=su;gt.AxiosError=ut;gt.Cancel=gt.CanceledError;gt.all=function(a){return Promise.all(a)};gt.spread=P1;gt.isAxiosError=Q1;gt.mergeConfig=Vr;gt.AxiosHeaders=ya;gt.formToJSON=e=>Ox(re.isHTMLForm(e)?new FormData(e):e);gt.getAdapter=Mx.getAdapter;gt.HttpStatusCode=gm;gt.default=gt;const{Axios:tD,AxiosError:nD,CanceledError:aD,isCancel:sD,CancelToken:rD,VERSION:lD,all:iD,Cancel:oD,isAxiosError:cD,spread:uD,toFormData:dD,AxiosHeaders:fD,HttpStatusCode:mD,formToJSON:hD,getAdapter:pD,mergeConfig:gD}=gt,Y1="medileser:draft:v1",Ic="medileser:recovery:v1",$c="medileser:recovery:intent",K1="vi.auth",X1="vi_auth",J1="medileser.selectedBank",W1=1440*60*1e3,Jm=e=>{if(!e)return!1;const a=Date.parse(e);return Number.isNaN(a)?!1:Date.now()-a>W1},Lf=e=>{const{userId:a,bankId:s,oiId:l,type:c,bancadaId:d,isNew:f}=e;if(!a||s==null)return null;const h=l!=null?String(l):"new",g=`${Y1}:u${a}:b${s}:oi:${h}`;if(c==="header")return`${g}:header`;const p=f?"new":d;return p==null?null:`${g}:bancada:${p}`},Gi=(e,a,s)=>{try{localStorage.setItem(e,JSON.stringify(a))}catch{}s&&qx(s)},Bf=e=>{try{const a=localStorage.getItem(e);if(!a)return null;const s=JSON.parse(a);return!s||typeof s!="object"?null:Jm(s.ts)?(localStorage.removeItem(e),null):s}catch{return null}},ur=e=>{try{localStorage.removeItem(e)}catch{}},qx=e=>{try{localStorage.setItem(Ic,JSON.stringify(e))}catch{}},Ix=()=>{try{const e=localStorage.getItem(Ic);if(!e)return null;const a=JSON.parse(e);return!a||typeof a!="object"?null:Jm(a.ts)?(localStorage.removeItem(Ic),null):a}catch{return null}},eE=()=>{try{localStorage.removeItem(Ic)}catch{}},tE=e=>{const a=e.userId??null,s=e.bankId??null,l=e.oiId??null;if(!a||s==null||!l)return;const c=Ix(),d={version:1,ts:new Date().toISOString(),userId:a,bankId:s,oiId:l,oiCode:e.oiCode??c?.oiCode??null,returnTo:e.returnTo??c?.returnTo??`/oi/${l}?mode=edit`,mode:"edit",modal:e.modal??c?.modal};qx(d)},nE=e=>{const a={version:1,ts:new Date().toISOString(),userId:e.userId,bankId:e.bankId,oiId:e.oiId,modal:e.modal,returnTo:e.returnTo};try{sessionStorage.setItem($c,JSON.stringify(a))}catch{}},aE=()=>{try{const e=sessionStorage.getItem($c);if(!e)return null;const a=JSON.parse(e);return!a||typeof a!="object"?null:Jm(a.ts)?(sessionStorage.removeItem($c),null):a}catch{return null}},qf=()=>{try{sessionStorage.removeItem($c)}catch{}},sE=()=>{try{const e=localStorage.getItem(K1)??localStorage.getItem(X1);if(!e)return{userId:null,bankId:null};const a=JSON.parse(e),s=Number(a.userId??a.id),l=a.bancoId!=null?Number(a.bancoId):null;return{userId:Number.isFinite(s)?s:null,bankId:l!=null&&Number.isFinite(l)?l:null}}catch{}return{userId:null,bankId:null}},rE=()=>{try{const e=localStorage.getItem(J1);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}},bm=(e,a)=>{const s=Ix();if(!s)return{target:null};if(!e||s.userId!==e)return{target:"/home",reason:"user"};if(a==null||s.bankId!==a)return{target:"/home",reason:"bank"};const l=s.returnTo||`/oi/${s.oiId}?mode=edit`,c=l==="/oi"||l==="/oi/"?`/oi/${s.oiId}?mode=edit`:l;return nE(s),{target:c,recovery:s}},By="http://127.0.0.1:8000",Pl="openOiId",lu="vi.currentOI",$x="vi.auth",Fx="vi_auth",lE="medileser.selectedBank",iE="medileser:selectedBank",ym="medileser.pendingToast",co="medileser.pendingAction",oE="medileser:auth-expired",vm="medileser.sessionUserId",xm="medileser.sessionBankId",Hx=()=>typeof window<"u"?window.location.port==="5173"?By:window.location.origin:By,Ye=gt.create({baseURL:Hx()}),Vx=gt.create({baseURL:Hx()}),Zx=e=>{try{const a=localStorage.getItem($x)??localStorage.getItem(Fx);if(a){const{token:s}=JSON.parse(a);s&&(e.headers&&typeof e.headers.set=="function"?e.headers.set("Authorization",`Bearer ${s}`):e.headers={...e.headers||{},Authorization:`Bearer ${s}`})}}catch{}return e};Ye.interceptors.request.use(Zx);Vx.interceptors.request.use(Zx);function cE(){try{const e=sessionStorage.getItem(Pl);if(!e)return null;const a=Number(e);return Number.isFinite(a)&&a>0?a:null}catch{return null}}const Gx=()=>{try{const e=sessionStorage.getItem(lu);if(!e)return null;const a=JSON.parse(e),s=Number(a?.id);return Number.isFinite(s)&&s>0?s:null}catch{return null}};function uE(e){try{sessionStorage.setItem(Pl,String(e))}catch{}}function Px(){try{sessionStorage.removeItem(Pl)}catch{}}async function uo(){const e=cE();if(e)try{await Vx.post(`/oi/${e}/close`)}catch{}finally{Px()}}function dE(e){try{sessionStorage.setItem(ym,e)}catch{}}function fE(){try{const e=sessionStorage.getItem(ym);return e?(sessionStorage.removeItem(ym),e):null}catch{return null}}function mE(e){try{sessionStorage.setItem(co,JSON.stringify(e))}catch{}}function hE(){try{const e=sessionStorage.getItem(co);return e?JSON.parse(e):null}catch{return null}}function Ol(){try{sessionStorage.removeItem(co)}catch{}}function Qx(){try{const e=sessionStorage.getItem(vm);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}}function qy(e){try{e==null?sessionStorage.removeItem(vm):sessionStorage.setItem(vm,String(e))}catch{}}function Yx(){try{const e=sessionStorage.getItem(xm);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}}function Fc(e){try{e==null?sessionStorage.removeItem(xm):sessionStorage.setItem(xm,String(e))}catch{}}function Kx(e){const a=Qx();if(e==null)return!1;if(a===null||a===e)return qy(e),!1;try{const s=[];for(let l=0;l<sessionStorage.length;l+=1){const c=sessionStorage.key(l);c&&(c.startsWith("oi:")||c===Pl||c===lu||c===co)&&s.push(c)}s.forEach(l=>sessionStorage.removeItem(l))}catch{}return qy(e),Fc(null),!0}function pE(e){const a=Yx();if(e==null)return!1;if(a===null||a===e)return Fc(e),!1;try{const s=[];for(let l=0;l<sessionStorage.length;l+=1){const c=sessionStorage.key(l);c&&(c.startsWith("oi:")||c===Pl||c===lu||c===co)&&s.push(c)}s.forEach(l=>sessionStorage.removeItem(l))}catch{}return Fc(e),!0}function gE(){try{localStorage.removeItem($x),localStorage.removeItem(Fx),localStorage.removeItem(lE)}catch{}finally{try{window.dispatchEvent(new Event(iE))}catch{}}try{sessionStorage.removeItem(lu),sessionStorage.removeItem(Pl)}catch{}}let Iy=!1;async function Xx(e){if(!Iy){Iy=!0;try{await uo()}finally{gE();const a=e?.pending?"Sesion expirada. Inicia sesion para guardar. Tu borrador esta guardado.":"Sesion invalida o expirada";if(dE(a),typeof window<"u"&&window.location.pathname!=="/login"){const s=e?.returnTo,l=s?`?returnTo=${encodeURIComponent(s)}${e?.pending?"&pending=1":""}`:"";window.location.replace(`/login${l}`)}}}}const Zi=e=>{const a=e?.response?.status,s=String(e?.response?.headers?.["x-code"]??"").toUpperCase();if(s==="PASSWORD_REQUIRED"||s==="WRONG_PASSWORD")return!1;if(a===401)return!0;const l=e?.response?.data?.detail;return!!(typeof l=="string"&&/token requerido/i.test(l))},If=(e,a)=>{const s=a.match(e);if(!s)return null;const l=Number(s[1]);return Number.isFinite(l)?l:null},bE=e=>{if(typeof window>"u")return null;const a=String(e?.config?.method??"").toUpperCase(),s=String(e?.config?.url??""),l=`${window.location.pathname}${window.location.search}`;return a==="PUT"&&/\/oi\/\d+$/.test(s)?{type:"save_oi",route:l,oiId:If(/\/oi\/(\d+)$/,s),ts:new Date().toISOString()}:a==="POST"&&s==="/oi"?{type:"save_oi",route:l,oiId:null,ts:new Date().toISOString()}:a==="POST"&&/\/oi\/\d+\/bancadas$/.test(s)?{type:"save_bancada",route:l,oiId:If(/\/oi\/(\d+)\/bancadas$/,s),ts:new Date().toISOString()}:a==="PUT"&&/\/oi\/bancadas\/\d+$/.test(s)?{type:"save_bancada",route:l,bancadaId:If(/\/oi\/bancadas\/(\d+)$/,s),ts:new Date().toISOString()}:null},yE=e=>{if(typeof window>"u")return;const{pathname:a,search:s,hash:l}=window.location,c=new URLSearchParams(s);(a==="/oi"||a.startsWith("/oi/"))&&c.set("mode","edit");const f=c.toString(),h=p=>`${p}${f?`?${f}`:""}${l??""}`;let g=h(a);if(a==="/oi"||a==="/oi/"){const p=e?.oiId??Gx();p&&(g=h(`/oi/${p}`))}return g},vE=(e,a,s,l,c)=>{try{window.dispatchEvent(new CustomEvent(oE,{detail:{status:a,detail:e,url:s,method:l,pending:c}}))}catch{}};Ye.interceptors.response.use(e=>e,async e=>{const a=e?.response?.status,s=String(e?.config?.url??""),l=e?.response?.data?.detail,c=String(e?.config?.method??"").toUpperCase();if(!s.includes("/auth/login")&&Zi(e)){const f=bE(e);f&&mE(f),vE(l,a,s,c,f);const h=yE(f),g=sE(),p=g.bankId??rE(),v=f?.oiId??Gx();if(g.userId&&p!=null&&v){const x=f?.type==="save_bancada"?{type:"bancada",bancadaId:f.bancadaId??null,isNew:f.bancadaId==null}:void 0;tE({userId:g.userId,bankId:p,oiId:v,returnTo:h,modal:x})}await Xx({returnTo:h,pending:!!f})}return Promise.reject(e)});const Wm=async()=>{const{data:e}=await Ye.get("/catalogs");return e},iu="medileser.selectedBank",Hc="medileser:selectedBank";function $a(e,a){if((a??"").toLowerCase()==="admin")return"admin";const l=(e??"").toLowerCase();return l==="admin"||l==="administrator"||l==="administrador"?"administrator":l==="technician"||l==="user"||l==="tecnico"||l==="tcnico"?"technician":"standard"}function ql(e){return $a(e)==="technician"}function eh(e){return(e?.username??e?.user??"").toLowerCase()==="admin"}function Xi(){try{const e=localStorage.getItem(iu);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}}function Jx(e){try{localStorage.setItem(iu,String(e))}finally{window.dispatchEvent(new Event(Hc))}}function Wx(){try{localStorage.removeItem(iu)}finally{window.dispatchEvent(new Event(Hc))}}function xE(e){const a=()=>e(),s=l=>{l.key===iu&&e()};return window.addEventListener(Hc,a),window.addEventListener("storage",s),()=>{window.removeEventListener(Hc,a),window.removeEventListener("storage",s)}}async function SE(e,a){try{await Ye.put("/auth/password",{old_password:e,new_password:a})}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo actualizar la contrasea";throw new Error(l)}}async function NE(e){try{await uo();const{data:a}=await Ye.post("/auth/login",e);return localStorage.setItem("vi.auth",JSON.stringify(a)),Kx(a.userId??null),!ql(a.role)&&a.bancoId!=null&&Fc(a.bancoId),ql(a.role)?Wx():Jx(0),a}catch(a){const s=a?.response?.status,l=a?.response?.data?.detail,c=s===401?"Credenciales invlidas":l??a?.message??"Error de autenticacin";throw new Error(c)}}function kn(){const e=localStorage.getItem("vi.auth")??localStorage.getItem("vi_auth");if(!e)return null;try{const a=JSON.parse(e),s=a.username??a.user??"",l=[a.firstName,a.lastName].filter(Boolean).join(" ")||void 0,c={user:a.user??a.username??"",userId:a.userId??a.id??0,username:s,firstName:a.firstName??"",lastName:a.lastName??"",fullName:a.fullName??l??s,bancoId:a.bancoId??null,token:a.token,techNumber:a.techNumber,role:$a(a.role,s),allowedModules:Array.isArray(a.allowedModules)?a.allowedModules.map(d=>d==="future_logistica"?"logistica":d):void 0};return c.username&&c.token?c:null}catch{return null}}async function e0(e){await uo();const{data:a}=await Ye.put("/auth/banco",{bancoId:e});return localStorage.setItem("vi.auth",JSON.stringify(a)),Kx(a.userId??null),pE(e),Jx(e),a}function t0(){localStorage.removeItem("vi.auth"),localStorage.removeItem("vi_auth"),Wx();try{sessionStorage.removeItem("vi.currentOI"),sessionStorage.removeItem("openOiId")}catch{}}async function wE(){await uo(),t0()}function Ji({label:e,inputId:a,className:s="",inputRef:l,helpText:c,...d}){const[f,h]=b.useState(!1),g=a||d.name||void 0,{ref:p,...v}=d,x=l??p;return i.jsxs("div",{className:s,children:[e&&i.jsx("label",{className:"form-label",htmlFor:g,children:e}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{...v,id:g,type:f?"text":"password",className:"form-control",ref:x}),i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>h(N=>!N),tabIndex:-1,"aria-label":f?"Ocultar contrasea":"Mostrar contrasea",children:i.jsx("i",{className:`ti ${f?"ti-eye-off":"ti-eye"}`})})]}),c&&i.jsx("div",{className:"form-text",children:c})]})}function Ql({show:e=!0,label:a="Cargando..."}){return e?i.jsxs("div",{className:"vi-spinner-overlay",role:"status","aria-live":"polite","aria-label":a,children:[i.jsx("img",{className:"vi-spinner-logo",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"","aria-hidden":"true"}),i.jsx("span",{className:"visually-hidden",children:a})]}):null}const n0=b.createContext(null);function jE(e){return e==="success"?"success":e==="error"?"danger":e==="warning"?"warning":"secondary"}function _E({children:e}){const[a,s]=b.useState([]),l=b.useCallback(d=>{const f=Date.now()+Math.random(),{kind:h="info",duration:g=3500,...p}=d,v={id:f,kind:h,duration:g,...p};s(x=>[...x,v]),window.setTimeout(()=>{s(x=>x.filter(N=>N.id!==f))},g)},[]),c=d=>s(f=>f.filter(h=>h.id!==d));return i.jsxs(n0.Provider,{value:{push:l},children:[e,i.jsx("div",{className:"vi-toast-container position-fixed top-0 end-0 p-3",children:a.map(d=>i.jsx("div",{className:`toast show align-items-center text-bg-${jE(d.kind)} border-0 mb-2`,role:"alert",children:i.jsxs("div",{className:"d-flex",children:[i.jsxs("div",{className:"toast-body",children:[d.title&&i.jsx("strong",{className:"me-2",children:d.title}),d.message]}),i.jsx("button",{className:"btn-close btn-close-white me-2 m-auto","aria-label":"Close",onClick:()=>c(d.id)})]})},d.id))})]})}function Qr(){const e=b.useContext(n0);if(!e)throw new Error("useToast must be used inside <ToastProvider>");return{toast:e.push}}function EE(){const{register:e,handleSubmit:a}=eu({defaultValues:{username:"",password:""}}),{toast:s}=Qr(),l=new URLSearchParams(window.location.search),c=l.get("returnTo")??"",d=c.startsWith("/")?c:"/home",f=l.get("pending")==="1",[h,g]=b.useState(!1),p=b.useRef(d),[v,x]=b.useState(!1),[N,I]=b.useState(0),[j,_]=b.useState(!1),{data:C,isLoading:q,error:T,refetch:J}=Hr({queryKey:["catalogs"],queryFn:Wm,enabled:v}),D=C?.bancos??[];b.useEffect(()=>{const ue=fE();ue&&s({kind:"error",message:ue})},[s]),b.useEffect(()=>{v&&(N>0||D.length>0&&I(D[0].id))},[N,D,v]);const R=async ue=>{try{g(!0);const Ae=Qx(),xe=await NE(ue),he=Ae!=null&&xe.userId&&Ae!==xe.userId,Ne=bm(xe.userId,xe.bancoId??0);if(Ne.target?p.current=Ne.target:f||he?p.current="/home":p.current=d,ql(xe.role)){x(!0),s({kind:"info",title:"Banco",message:"Seleccione el banco para continuar."});return}window.location.replace(p.current)}catch(Ae){const xe=Ae?.message??Ae?.response?.data?.detail??(typeof Ae=="string"?Ae:"Error de autenticacin");s({kind:"error",title:"Login",message:String(xe)})}finally{g(!1)}},Z=N>0&&!j&&!q,L=async()=>{if(Z)try{_(!0);const ue=Yx(),Ae=ue!=null&&ue!==N,xe=await e0(N),he=bm(xe.userId,xe.bancoId??N);he.target?p.current=he.target:(f||Ae)&&(p.current="/home"),window.location.replace(p.current)}catch(ue){const Ae=ue?.response?.data?.detail??ue?.message??"No se pudo guardar el banco.";s({kind:"error",title:"Banco",message:String(Ae)})}finally{_(!1)}},W=()=>{t0(),x(!1),I(0)};return i.jsxs("div",{className:"vi-login",children:[i.jsx(Ql,{show:h||j,label:j?"Guardando banco...":"Validando credenciales..."}),i.jsxs("div",{className:"vi-login__split",children:[i.jsx("section",{className:"vi-login__left",children:i.jsx("div",{className:"text-center text-md-start",children:i.jsx("h1",{className:"vi-title display-6 mb-0",children:"ACCESO AL SISTEMA MEDILESER APP"})})}),i.jsx("section",{className:"vi-login__right",children:i.jsx("div",{className:"card shadow-sm vi-login__card",children:i.jsxs("div",{className:"card-body p-4 p-md-5",children:[i.jsx("h2",{className:"h4 text-center mb-4",children:"Bienvenido"}),i.jsxs("form",{onSubmit:a(R),className:"row g-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{htmlFor:"username",className:"form-label",children:"Usuario"}),i.jsx("input",{id:"username",className:"form-control",autoFocus:!0,autoComplete:"username",...e("username",{required:!0})})]}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ji,{label:"Contrasea",inputId:"password",autoComplete:"current-password",...e("password",{required:!0})})}),i.jsx("div",{className:"col-12 d-grid",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h||v,"aria-busy":h?"true":"false",children:h?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Ingresando..."]}):"Ingresar"})})]})]})})})]}),v&&i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:i.jsx("div",{className:"modal-dialog modal-dialog-centered",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("div",{className:"modal-header",children:i.jsx("h5",{className:"modal-title",children:"Seleccionar banco"})}),i.jsxs("div",{className:"modal-body",children:[i.jsx("p",{className:"text-muted mb-3",children:"Seleccione el banco de trabajo para continuar."}),i.jsx("label",{className:"form-label",htmlFor:"bankId",children:"Banco"}),i.jsx("select",{id:"bankId",className:"form-select",value:N||"",onChange:ue=>I(Number(ue.target.value)),disabled:q||j,children:D.map(ue=>i.jsx("option",{value:ue.id,children:ue.name},ue.id))}),T?i.jsxs("div",{className:"alert alert-danger mt-3 mb-0",role:"alert",children:["No se pudieron cargar los bancos.",i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger ms-2",onClick:()=>J(),children:"Reintentar"})]}):null]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:W,disabled:j,children:"Cancelar"}),i.jsx("button",{type:"button",className:"btn btn-primary",disabled:!Z,onClick:L,children:j?"Guardando...":"Continuar"})]})]})})})]})}const $y=(e,a,s)=>{if(e&&"reportValidity"in e){const l=qe(s,a);e.setCustomValidity(l&&l.message||""),e.reportValidity()}},Sm=(e,a)=>{for(const s in a.fields){const l=a.fields[s];l&&l.ref&&"reportValidity"in l.ref?$y(l.ref,s,e):l&&l.refs&&l.refs.forEach(c=>$y(c,s,e))}},Fy=(e,a)=>{a.shouldUseNativeValidation&&Sm(e,a);const s={};for(const l in e){const c=qe(a.fields,l),d=Object.assign(e[l]||{},{ref:c&&c.ref});if(AE(a.names||Object.keys(e),l)){const f=Object.assign({},qe(s,l));Ut(f,"root",d),Ut(s,l,f)}else Ut(s,l,d)}return s},AE=(e,a)=>{const s=Hy(a);return e.some(l=>Hy(l).match(`^${s}\\.\\d+`))};function Hy(e){return e.replace(/\]|\[/g,"")}function Ee(e,a,s){function l(h,g){var p;Object.defineProperty(h,"_zod",{value:h._zod??{},enumerable:!1}),(p=h._zod).traits??(p.traits=new Set),h._zod.traits.add(e),a(h,g);for(const v in f.prototype)v in h||Object.defineProperty(h,v,{value:f.prototype[v].bind(h)});h._zod.constr=f,h._zod.def=g}const c=s?.Parent??Object;class d extends c{}Object.defineProperty(d,"name",{value:e});function f(h){var g;const p=s?.Parent?new d:this;l(p,h),(g=p._zod).deferred??(g.deferred=[]);for(const v of p._zod.deferred)v();return p}return Object.defineProperty(f,"init",{value:l}),Object.defineProperty(f,Symbol.hasInstance,{value:h=>s?.Parent&&h instanceof s.Parent?!0:h?._zod?.traits?.has(e)}),Object.defineProperty(f,"name",{value:e}),f}class Ll extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class a0 extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}const s0={};function Zr(e){return s0}function CE(e){const a=Object.values(e).filter(l=>typeof l=="number");return Object.entries(e).filter(([l,c])=>a.indexOf(+l)===-1).map(([l,c])=>c)}function Nm(e,a){return typeof a=="bigint"?a.toString():a}function th(e){return{get value(){{const a=e();return Object.defineProperty(this,"value",{value:a}),a}}}}function nh(e){return e==null}function ah(e){const a=e.startsWith("^")?1:0,s=e.endsWith("$")?e.length-1:e.length;return e.slice(a,s)}function OE(e,a){const s=(e.toString().split(".")[1]||"").length,l=a.toString();let c=(l.split(".")[1]||"").length;if(c===0&&/\d?e-\d?/.test(l)){const g=l.match(/\d?e-(\d?)/);g?.[1]&&(c=Number.parseInt(g[1]))}const d=s>c?s:c,f=Number.parseInt(e.toFixed(d).replace(".","")),h=Number.parseInt(a.toFixed(d).replace(".",""));return f%h/10**d}const Vy=Symbol("evaluating");function Pt(e,a,s){let l;Object.defineProperty(e,a,{get(){if(l!==Vy)return l===void 0&&(l=Vy,l=s()),l},set(c){Object.defineProperty(e,a,{value:c})},configurable:!0})}function Yr(e,a,s){Object.defineProperty(e,a,{value:s,writable:!0,enumerable:!0,configurable:!0})}function Kr(...e){const a={};for(const s of e){const l=Object.getOwnPropertyDescriptors(s);Object.assign(a,l)}return Object.defineProperties({},a)}function Zy(e){return JSON.stringify(e)}const r0="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Vc(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const RE=th(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Wi(e){if(Vc(e)===!1)return!1;const a=e.constructor;if(a===void 0)return!0;const s=a.prototype;return!(Vc(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}function l0(e){return Wi(e)?{...e}:Array.isArray(e)?[...e]:e}const TE=new Set(["string","number","symbol"]);function ou(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function hr(e,a,s){const l=new e._zod.constr(a??e._zod.def);return(!a||s?.parent)&&(l._zod.parent=e),l}function tt(e){const a=e;if(!a)return{};if(typeof a=="string")return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");a.error=a.message}return delete a.message,typeof a.error=="string"?{...a,error:()=>a.error}:a}function DE(e){return Object.keys(e).filter(a=>e[a]._zod.optin==="optional"&&e[a]._zod.optout==="optional")}const zE={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function kE(e,a){const s=e._zod.def,l=Kr(e._zod.def,{get shape(){const c={};for(const d in a){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);a[d]&&(c[d]=s.shape[d])}return Yr(this,"shape",c),c},checks:[]});return hr(e,l)}function ME(e,a){const s=e._zod.def,l=Kr(e._zod.def,{get shape(){const c={...e._zod.def.shape};for(const d in a){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);a[d]&&delete c[d]}return Yr(this,"shape",c),c},checks:[]});return hr(e,l)}function UE(e,a){if(!Wi(a))throw new Error("Invalid input to extend: expected a plain object");const s=e._zod.def.checks;if(s&&s.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const c=Kr(e._zod.def,{get shape(){const d={...e._zod.def.shape,...a};return Yr(this,"shape",d),d},checks:[]});return hr(e,c)}function LE(e,a){if(!Wi(a))throw new Error("Invalid input to safeExtend: expected a plain object");const s={...e._zod.def,get shape(){const l={...e._zod.def.shape,...a};return Yr(this,"shape",l),l},checks:e._zod.def.checks};return hr(e,s)}function BE(e,a){const s=Kr(e._zod.def,{get shape(){const l={...e._zod.def.shape,...a._zod.def.shape};return Yr(this,"shape",l),l},get catchall(){return a._zod.def.catchall},checks:[]});return hr(e,s)}function qE(e,a,s){const l=Kr(a._zod.def,{get shape(){const c=a._zod.def.shape,d={...c};if(s)for(const f in s){if(!(f in c))throw new Error(`Unrecognized key: "${f}"`);s[f]&&(d[f]=e?new e({type:"optional",innerType:c[f]}):c[f])}else for(const f in c)d[f]=e?new e({type:"optional",innerType:c[f]}):c[f];return Yr(this,"shape",d),d},checks:[]});return hr(a,l)}function IE(e,a,s){const l=Kr(a._zod.def,{get shape(){const c=a._zod.def.shape,d={...c};if(s)for(const f in s){if(!(f in d))throw new Error(`Unrecognized key: "${f}"`);s[f]&&(d[f]=new e({type:"nonoptional",innerType:c[f]}))}else for(const f in c)d[f]=new e({type:"nonoptional",innerType:c[f]});return Yr(this,"shape",d),d},checks:[]});return hr(a,l)}function Ml(e,a=0){if(e.aborted===!0)return!0;for(let s=a;s<e.issues.length;s++)if(e.issues[s]?.continue!==!0)return!0;return!1}function i0(e,a){return a.map(s=>{var l;return(l=s).path??(l.path=[]),s.path.unshift(e),s})}function wc(e){return typeof e=="string"?e:e?.message}function Gr(e,a,s){const l={...e,path:e.path??[]};if(!e.message){const c=wc(e.inst?._zod.def?.error?.(e))??wc(a?.error?.(e))??wc(s.customError?.(e))??wc(s.localeError?.(e))??"Invalid input";l.message=c}return delete l.inst,delete l.continue,a?.reportInput||delete l.input,l}function sh(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function eo(...e){const[a,s,l]=e;return typeof a=="string"?{message:a,code:"custom",input:s,inst:l}:{...a}}const o0=(e,a)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:a,enumerable:!1}),e.message=JSON.stringify(a,Nm,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},rh=Ee("$ZodError",o0),cu=Ee("$ZodError",o0,{Parent:Error});function $E(e,a=s=>s.message){const s={},l=[];for(const c of e.issues)c.path.length>0?(s[c.path[0]]=s[c.path[0]]||[],s[c.path[0]].push(a(c))):l.push(a(c));return{formErrors:l,fieldErrors:s}}function FE(e,a=s=>s.message){const s={_errors:[]},l=c=>{for(const d of c.issues)if(d.code==="invalid_union"&&d.errors.length)d.errors.map(f=>l({issues:f}));else if(d.code==="invalid_key")l({issues:d.issues});else if(d.code==="invalid_element")l({issues:d.issues});else if(d.path.length===0)s._errors.push(a(d));else{let f=s,h=0;for(;h<d.path.length;){const g=d.path[h];h===d.path.length-1?(f[g]=f[g]||{_errors:[]},f[g]._errors.push(a(d))):f[g]=f[g]||{_errors:[]},f=f[g],h++}}};return l(e),s}const uu=e=>(a,s,l,c)=>{const d=l?Object.assign(l,{async:!1}):{async:!1},f=a._zod.run({value:s,issues:[]},d);if(f instanceof Promise)throw new Ll;if(f.issues.length){const h=new(c?.Err??e)(f.issues.map(g=>Gr(g,d,Zr())));throw r0(h,c?.callee),h}return f.value},HE=uu(cu),du=e=>async(a,s,l,c)=>{const d=l?Object.assign(l,{async:!0}):{async:!0};let f=a._zod.run({value:s,issues:[]},d);if(f instanceof Promise&&(f=await f),f.issues.length){const h=new(c?.Err??e)(f.issues.map(g=>Gr(g,d,Zr())));throw r0(h,c?.callee),h}return f.value},VE=du(cu),fu=e=>(a,s,l)=>{const c=l?{...l,async:!1}:{async:!1},d=a._zod.run({value:s,issues:[]},c);if(d instanceof Promise)throw new Ll;return d.issues.length?{success:!1,error:new(e??rh)(d.issues.map(f=>Gr(f,c,Zr())))}:{success:!0,data:d.value}},ZE=fu(cu),mu=e=>async(a,s,l)=>{const c=l?Object.assign(l,{async:!0}):{async:!0};let d=a._zod.run({value:s,issues:[]},c);return d instanceof Promise&&(d=await d),d.issues.length?{success:!1,error:new e(d.issues.map(f=>Gr(f,c,Zr())))}:{success:!0,data:d.value}},GE=mu(cu),PE=e=>(a,s,l)=>{const c=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return uu(e)(a,s,c)},QE=e=>(a,s,l)=>uu(e)(a,s,l),YE=e=>async(a,s,l)=>{const c=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return du(e)(a,s,c)},KE=e=>async(a,s,l)=>du(e)(a,s,l),XE=e=>(a,s,l)=>{const c=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return fu(e)(a,s,c)},JE=e=>(a,s,l)=>fu(e)(a,s,l),WE=e=>async(a,s,l)=>{const c=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return mu(e)(a,s,c)},eA=e=>async(a,s,l)=>mu(e)(a,s,l),tA=/^[cC][^\s-]{8,}$/,nA=/^[0-9a-z]+$/,aA=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,sA=/^[0-9a-vA-V]{20}$/,rA=/^[A-Za-z0-9]{27}$/,lA=/^[a-zA-Z0-9_-]{21}$/,iA=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,oA=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Gy=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,cA=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,uA="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function dA(){return new RegExp(uA,"u")}const fA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,hA=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,pA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,gA=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,c0=/^[A-Za-z0-9_-]*$/,bA=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,yA=/^\+(?:[0-9]){6,14}[0-9]$/,u0="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",vA=new RegExp(`^${u0}$`);function d0(e){const a="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${a}`:e.precision===0?`${a}:[0-5]\\d`:`${a}:[0-5]\\d\\.\\d{${e.precision}}`:`${a}(?::[0-5]\\d(?:\\.\\d+)?)?`}function xA(e){return new RegExp(`^${d0(e)}$`)}function SA(e){const a=d0({precision:e.precision}),s=["Z"];e.local&&s.push(""),e.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const l=`${a}(?:${s.join("|")})`;return new RegExp(`^${u0}T(?:${l})$`)}const NA=e=>{const a=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${a}$`)},wA=/^-?\d+$/,jA=/^-?\d+(?:\.\d+)?/,_A=/^[^A-Z]*$/,EA=/^[^a-z]*$/,va=Ee("$ZodCheck",(e,a)=>{var s;e._zod??(e._zod={}),e._zod.def=a,(s=e._zod).onattach??(s.onattach=[])}),f0={number:"number",bigint:"bigint",object:"date"},m0=Ee("$ZodCheckLessThan",(e,a)=>{va.init(e,a);const s=f0[typeof a.value];e._zod.onattach.push(l=>{const c=l._zod.bag,d=(a.inclusive?c.maximum:c.exclusiveMaximum)??Number.POSITIVE_INFINITY;a.value<d&&(a.inclusive?c.maximum=a.value:c.exclusiveMaximum=a.value)}),e._zod.check=l=>{(a.inclusive?l.value<=a.value:l.value<a.value)||l.issues.push({origin:s,code:"too_big",maximum:a.value,input:l.value,inclusive:a.inclusive,inst:e,continue:!a.abort})}}),h0=Ee("$ZodCheckGreaterThan",(e,a)=>{va.init(e,a);const s=f0[typeof a.value];e._zod.onattach.push(l=>{const c=l._zod.bag,d=(a.inclusive?c.minimum:c.exclusiveMinimum)??Number.NEGATIVE_INFINITY;a.value>d&&(a.inclusive?c.minimum=a.value:c.exclusiveMinimum=a.value)}),e._zod.check=l=>{(a.inclusive?l.value>=a.value:l.value>a.value)||l.issues.push({origin:s,code:"too_small",minimum:a.value,input:l.value,inclusive:a.inclusive,inst:e,continue:!a.abort})}}),AA=Ee("$ZodCheckMultipleOf",(e,a)=>{va.init(e,a),e._zod.onattach.push(s=>{var l;(l=s._zod.bag).multipleOf??(l.multipleOf=a.value)}),e._zod.check=s=>{if(typeof s.value!=typeof a.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof s.value=="bigint"?s.value%a.value===BigInt(0):OE(s.value,a.value)===0)||s.issues.push({origin:typeof s.value,code:"not_multiple_of",divisor:a.value,input:s.value,inst:e,continue:!a.abort})}}),CA=Ee("$ZodCheckNumberFormat",(e,a)=>{va.init(e,a),a.format=a.format||"float64";const s=a.format?.includes("int"),l=s?"int":"number",[c,d]=zE[a.format];e._zod.onattach.push(f=>{const h=f._zod.bag;h.format=a.format,h.minimum=c,h.maximum=d,s&&(h.pattern=wA)}),e._zod.check=f=>{const h=f.value;if(s){if(!Number.isInteger(h)){f.issues.push({expected:l,format:a.format,code:"invalid_type",continue:!1,input:h,inst:e});return}if(!Number.isSafeInteger(h)){h>0?f.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:l,continue:!a.abort}):f.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:l,continue:!a.abort});return}}h<c&&f.issues.push({origin:"number",input:h,code:"too_small",minimum:c,inclusive:!0,inst:e,continue:!a.abort}),h>d&&f.issues.push({origin:"number",input:h,code:"too_big",maximum:d,inst:e})}}),OA=Ee("$ZodCheckMaxLength",(e,a)=>{var s;va.init(e,a),(s=e._zod.def).when??(s.when=l=>{const c=l.value;return!nh(c)&&c.length!==void 0}),e._zod.onattach.push(l=>{const c=l._zod.bag.maximum??Number.POSITIVE_INFINITY;a.maximum<c&&(l._zod.bag.maximum=a.maximum)}),e._zod.check=l=>{const c=l.value;if(c.length<=a.maximum)return;const f=sh(c);l.issues.push({origin:f,code:"too_big",maximum:a.maximum,inclusive:!0,input:c,inst:e,continue:!a.abort})}}),RA=Ee("$ZodCheckMinLength",(e,a)=>{var s;va.init(e,a),(s=e._zod.def).when??(s.when=l=>{const c=l.value;return!nh(c)&&c.length!==void 0}),e._zod.onattach.push(l=>{const c=l._zod.bag.minimum??Number.NEGATIVE_INFINITY;a.minimum>c&&(l._zod.bag.minimum=a.minimum)}),e._zod.check=l=>{const c=l.value;if(c.length>=a.minimum)return;const f=sh(c);l.issues.push({origin:f,code:"too_small",minimum:a.minimum,inclusive:!0,input:c,inst:e,continue:!a.abort})}}),TA=Ee("$ZodCheckLengthEquals",(e,a)=>{var s;va.init(e,a),(s=e._zod.def).when??(s.when=l=>{const c=l.value;return!nh(c)&&c.length!==void 0}),e._zod.onattach.push(l=>{const c=l._zod.bag;c.minimum=a.length,c.maximum=a.length,c.length=a.length}),e._zod.check=l=>{const c=l.value,d=c.length;if(d===a.length)return;const f=sh(c),h=d>a.length;l.issues.push({origin:f,...h?{code:"too_big",maximum:a.length}:{code:"too_small",minimum:a.length},inclusive:!0,exact:!0,input:l.value,inst:e,continue:!a.abort})}}),hu=Ee("$ZodCheckStringFormat",(e,a)=>{var s,l;va.init(e,a),e._zod.onattach.push(c=>{const d=c._zod.bag;d.format=a.format,a.pattern&&(d.patterns??(d.patterns=new Set),d.patterns.add(a.pattern))}),a.pattern?(s=e._zod).check??(s.check=c=>{a.pattern.lastIndex=0,!a.pattern.test(c.value)&&c.issues.push({origin:"string",code:"invalid_format",format:a.format,input:c.value,...a.pattern?{pattern:a.pattern.toString()}:{},inst:e,continue:!a.abort})}):(l=e._zod).check??(l.check=()=>{})}),DA=Ee("$ZodCheckRegex",(e,a)=>{hu.init(e,a),e._zod.check=s=>{a.pattern.lastIndex=0,!a.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:a.pattern.toString(),inst:e,continue:!a.abort})}}),zA=Ee("$ZodCheckLowerCase",(e,a)=>{a.pattern??(a.pattern=_A),hu.init(e,a)}),kA=Ee("$ZodCheckUpperCase",(e,a)=>{a.pattern??(a.pattern=EA),hu.init(e,a)}),MA=Ee("$ZodCheckIncludes",(e,a)=>{va.init(e,a);const s=ou(a.includes),l=new RegExp(typeof a.position=="number"?`^.{${a.position}}${s}`:s);a.pattern=l,e._zod.onattach.push(c=>{const d=c._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(l)}),e._zod.check=c=>{c.value.includes(a.includes,a.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:a.includes,input:c.value,inst:e,continue:!a.abort})}}),UA=Ee("$ZodCheckStartsWith",(e,a)=>{va.init(e,a);const s=new RegExp(`^${ou(a.prefix)}.*`);a.pattern??(a.pattern=s),e._zod.onattach.push(l=>{const c=l._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(s)}),e._zod.check=l=>{l.value.startsWith(a.prefix)||l.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:a.prefix,input:l.value,inst:e,continue:!a.abort})}}),LA=Ee("$ZodCheckEndsWith",(e,a)=>{va.init(e,a);const s=new RegExp(`.*${ou(a.suffix)}$`);a.pattern??(a.pattern=s),e._zod.onattach.push(l=>{const c=l._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(s)}),e._zod.check=l=>{l.value.endsWith(a.suffix)||l.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:a.suffix,input:l.value,inst:e,continue:!a.abort})}}),BA=Ee("$ZodCheckOverwrite",(e,a)=>{va.init(e,a),e._zod.check=s=>{s.value=a.tx(s.value)}});class qA{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if(typeof a=="function"){a(this,{execution:"sync"}),a(this,{execution:"async"});return}const l=a.split(`
`).filter(f=>f),c=Math.min(...l.map(f=>f.length-f.trimStart().length)),d=l.map(f=>f.slice(c)).map(f=>" ".repeat(this.indent*2)+f);for(const f of d)this.content.push(f)}compile(){const a=Function,s=this?.args,c=[...(this?.content??[""]).map(d=>`  ${d}`)];return new a(...s,c.join(`
`))}}const IA={major:4,minor:1,patch:12},On=Ee("$ZodType",(e,a)=>{var s;e??(e={}),e._zod.def=a,e._zod.bag=e._zod.bag||{},e._zod.version=IA;const l=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&l.unshift(e);for(const c of l)for(const d of c._zod.onattach)d(e);if(l.length===0)(s=e._zod).deferred??(s.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const c=(f,h,g)=>{let p=Ml(f),v;for(const x of h){if(x._zod.def.when){if(!x._zod.def.when(f))continue}else if(p)continue;const N=f.issues.length,I=x._zod.check(f);if(I instanceof Promise&&g?.async===!1)throw new Ll;if(v||I instanceof Promise)v=(v??Promise.resolve()).then(async()=>{await I,f.issues.length!==N&&(p||(p=Ml(f,N)))});else{if(f.issues.length===N)continue;p||(p=Ml(f,N))}}return v?v.then(()=>f):f},d=(f,h,g)=>{if(Ml(f))return f.aborted=!0,f;const p=c(h,l,g);if(p instanceof Promise){if(g.async===!1)throw new Ll;return p.then(v=>e._zod.parse(v,g))}return e._zod.parse(p,g)};e._zod.run=(f,h)=>{if(h.skipChecks)return e._zod.parse(f,h);if(h.direction==="backward"){const p=e._zod.parse({value:f.value,issues:[]},{...h,skipChecks:!0});return p instanceof Promise?p.then(v=>d(v,f,h)):d(p,f,h)}const g=e._zod.parse(f,h);if(g instanceof Promise){if(h.async===!1)throw new Ll;return g.then(p=>c(p,l,h))}return c(g,l,h)}}e["~standard"]={validate:c=>{try{const d=ZE(e,c);return d.success?{value:d.data}:{issues:d.error?.issues}}catch{return GE(e,c).then(f=>f.success?{value:f.data}:{issues:f.error?.issues})}},vendor:"zod",version:1}}),lh=Ee("$ZodString",(e,a)=>{On.init(e,a),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??NA(e._zod.bag),e._zod.parse=(s,l)=>{if(a.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),an=Ee("$ZodStringFormat",(e,a)=>{hu.init(e,a),lh.init(e,a)}),$A=Ee("$ZodGUID",(e,a)=>{a.pattern??(a.pattern=oA),an.init(e,a)}),FA=Ee("$ZodUUID",(e,a)=>{if(a.version){const l={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[a.version];if(l===void 0)throw new Error(`Invalid UUID version: "${a.version}"`);a.pattern??(a.pattern=Gy(l))}else a.pattern??(a.pattern=Gy());an.init(e,a)}),HA=Ee("$ZodEmail",(e,a)=>{a.pattern??(a.pattern=cA),an.init(e,a)}),VA=Ee("$ZodURL",(e,a)=>{an.init(e,a),e._zod.check=s=>{try{const l=s.value.trim(),c=new URL(l);a.hostname&&(a.hostname.lastIndex=0,a.hostname.test(c.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:bA.source,input:s.value,inst:e,continue:!a.abort})),a.protocol&&(a.protocol.lastIndex=0,a.protocol.test(c.protocol.endsWith(":")?c.protocol.slice(0,-1):c.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:a.protocol.source,input:s.value,inst:e,continue:!a.abort})),a.normalize?s.value=c.href:s.value=l;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:e,continue:!a.abort})}}}),ZA=Ee("$ZodEmoji",(e,a)=>{a.pattern??(a.pattern=dA()),an.init(e,a)}),GA=Ee("$ZodNanoID",(e,a)=>{a.pattern??(a.pattern=lA),an.init(e,a)}),PA=Ee("$ZodCUID",(e,a)=>{a.pattern??(a.pattern=tA),an.init(e,a)}),QA=Ee("$ZodCUID2",(e,a)=>{a.pattern??(a.pattern=nA),an.init(e,a)}),YA=Ee("$ZodULID",(e,a)=>{a.pattern??(a.pattern=aA),an.init(e,a)}),KA=Ee("$ZodXID",(e,a)=>{a.pattern??(a.pattern=sA),an.init(e,a)}),XA=Ee("$ZodKSUID",(e,a)=>{a.pattern??(a.pattern=rA),an.init(e,a)}),JA=Ee("$ZodISODateTime",(e,a)=>{a.pattern??(a.pattern=SA(a)),an.init(e,a)}),WA=Ee("$ZodISODate",(e,a)=>{a.pattern??(a.pattern=vA),an.init(e,a)}),eC=Ee("$ZodISOTime",(e,a)=>{a.pattern??(a.pattern=xA(a)),an.init(e,a)}),tC=Ee("$ZodISODuration",(e,a)=>{a.pattern??(a.pattern=iA),an.init(e,a)}),nC=Ee("$ZodIPv4",(e,a)=>{a.pattern??(a.pattern=fA),an.init(e,a),e._zod.onattach.push(s=>{const l=s._zod.bag;l.format="ipv4"})}),aC=Ee("$ZodIPv6",(e,a)=>{a.pattern??(a.pattern=mA),an.init(e,a),e._zod.onattach.push(s=>{const l=s._zod.bag;l.format="ipv6"}),e._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:e,continue:!a.abort})}}}),sC=Ee("$ZodCIDRv4",(e,a)=>{a.pattern??(a.pattern=hA),an.init(e,a)}),rC=Ee("$ZodCIDRv6",(e,a)=>{a.pattern??(a.pattern=pA),an.init(e,a),e._zod.check=s=>{const l=s.value.split("/");try{if(l.length!==2)throw new Error;const[c,d]=l;if(!d)throw new Error;const f=Number(d);if(`${f}`!==d)throw new Error;if(f<0||f>128)throw new Error;new URL(`http://[${c}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:e,continue:!a.abort})}}});function p0(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const lC=Ee("$ZodBase64",(e,a)=>{a.pattern??(a.pattern=gA),an.init(e,a),e._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64"}),e._zod.check=s=>{p0(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:e,continue:!a.abort})}});function iC(e){if(!c0.test(e))return!1;const a=e.replace(/[-_]/g,l=>l==="-"?"+":"/"),s=a.padEnd(Math.ceil(a.length/4)*4,"=");return p0(s)}const oC=Ee("$ZodBase64URL",(e,a)=>{a.pattern??(a.pattern=c0),an.init(e,a),e._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64url"}),e._zod.check=s=>{iC(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:e,continue:!a.abort})}}),cC=Ee("$ZodE164",(e,a)=>{a.pattern??(a.pattern=yA),an.init(e,a)});function uC(e,a=null){try{const s=e.split(".");if(s.length!==3)return!1;const[l]=s;if(!l)return!1;const c=JSON.parse(atob(l));return!("typ"in c&&c?.typ!=="JWT"||!c.alg||a&&(!("alg"in c)||c.alg!==a))}catch{return!1}}const dC=Ee("$ZodJWT",(e,a)=>{an.init(e,a),e._zod.check=s=>{uC(s.value,a.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:e,continue:!a.abort})}}),g0=Ee("$ZodNumber",(e,a)=>{On.init(e,a),e._zod.pattern=e._zod.bag.pattern??jA,e._zod.parse=(s,l)=>{if(a.coerce)try{s.value=Number(s.value)}catch{}const c=s.value;if(typeof c=="number"&&!Number.isNaN(c)&&Number.isFinite(c))return s;const d=typeof c=="number"?Number.isNaN(c)?"NaN":Number.isFinite(c)?void 0:"Infinity":void 0;return s.issues.push({expected:"number",code:"invalid_type",input:c,inst:e,...d?{received:d}:{}}),s}}),fC=Ee("$ZodNumber",(e,a)=>{CA.init(e,a),g0.init(e,a)}),mC=Ee("$ZodUnknown",(e,a)=>{On.init(e,a),e._zod.parse=s=>s}),hC=Ee("$ZodNever",(e,a)=>{On.init(e,a),e._zod.parse=(s,l)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:e}),s)});function Py(e,a,s){e.issues.length&&a.issues.push(...i0(s,e.issues)),a.value[s]=e.value}const pC=Ee("$ZodArray",(e,a)=>{On.init(e,a),e._zod.parse=(s,l)=>{const c=s.value;if(!Array.isArray(c))return s.issues.push({expected:"array",code:"invalid_type",input:c,inst:e}),s;s.value=Array(c.length);const d=[];for(let f=0;f<c.length;f++){const h=c[f],g=a.element._zod.run({value:h,issues:[]},l);g instanceof Promise?d.push(g.then(p=>Py(p,s,f))):Py(g,s,f)}return d.length?Promise.all(d).then(()=>s):s}});function Zc(e,a,s,l){e.issues.length&&a.issues.push(...i0(s,e.issues)),e.value===void 0?s in l&&(a.value[s]=void 0):a.value[s]=e.value}function b0(e){const a=Object.keys(e.shape);for(const l of a)if(!e.shape?.[l]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${l}": expected a Zod schema`);const s=DE(e.shape);return{...e,keys:a,keySet:new Set(a),numKeys:a.length,optionalKeys:new Set(s)}}function y0(e,a,s,l,c,d){const f=[],h=c.keySet,g=c.catchall._zod,p=g.def.type;for(const v of Object.keys(a)){if(h.has(v))continue;if(p==="never"){f.push(v);continue}const x=g.run({value:a[v],issues:[]},l);x instanceof Promise?e.push(x.then(N=>Zc(N,s,v,a))):Zc(x,s,v,a)}return f.length&&s.issues.push({code:"unrecognized_keys",keys:f,input:a,inst:d}),e.length?Promise.all(e).then(()=>s):s}const gC=Ee("$ZodObject",(e,a)=>{if(On.init(e,a),!Object.getOwnPropertyDescriptor(a,"shape")?.get){const h=a.shape;Object.defineProperty(a,"shape",{get:()=>{const g={...h};return Object.defineProperty(a,"shape",{value:g}),g}})}const l=th(()=>b0(a));Pt(e._zod,"propValues",()=>{const h=a.shape,g={};for(const p in h){const v=h[p]._zod;if(v.values){g[p]??(g[p]=new Set);for(const x of v.values)g[p].add(x)}}return g});const c=Vc,d=a.catchall;let f;e._zod.parse=(h,g)=>{f??(f=l.value);const p=h.value;if(!c(p))return h.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),h;h.value={};const v=[],x=f.shape;for(const N of f.keys){const j=x[N]._zod.run({value:p[N],issues:[]},g);j instanceof Promise?v.push(j.then(_=>Zc(_,h,N,p))):Zc(j,h,N,p)}return d?y0(v,p,h,g,l.value,e):v.length?Promise.all(v).then(()=>h):h}}),bC=Ee("$ZodObjectJIT",(e,a)=>{gC.init(e,a);const s=e._zod.parse,l=th(()=>b0(a)),c=N=>{const I=new qA(["shape","payload","ctx"]),j=l.value,_=J=>{const D=Zy(J);return`shape[${D}]._zod.run({ value: input[${D}], issues: [] }, ctx)`};I.write("const input = payload.value;");const C=Object.create(null);let q=0;for(const J of j.keys)C[J]=`key_${q++}`;I.write("const newResult = {};");for(const J of j.keys){const D=C[J],R=Zy(J);I.write(`const ${D} = ${_(J)};`),I.write(`
        if (${D}.issues.length) {
          payload.issues = payload.issues.concat(${D}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${R}, ...iss.path] : [${R}]
          })));
        }
        
        
        if (${D}.value === undefined) {
          if (${R} in input) {
            newResult[${R}] = undefined;
          }
        } else {
          newResult[${R}] = ${D}.value;
        }
        
      `)}I.write("payload.value = newResult;"),I.write("return payload;");const T=I.compile();return(J,D)=>T(N,J,D)};let d;const f=Vc,h=!s0.jitless,p=h&&RE.value,v=a.catchall;let x;e._zod.parse=(N,I)=>{x??(x=l.value);const j=N.value;return f(j)?h&&p&&I?.async===!1&&I.jitless!==!0?(d||(d=c(a.shape)),N=d(N,I),v?y0([],j,N,I,x,e):N):s(N,I):(N.issues.push({expected:"object",code:"invalid_type",input:j,inst:e}),N)}});function Qy(e,a,s,l){for(const d of e)if(d.issues.length===0)return a.value=d.value,a;const c=e.filter(d=>!Ml(d));return c.length===1?(a.value=c[0].value,c[0]):(a.issues.push({code:"invalid_union",input:a.value,inst:s,errors:e.map(d=>d.issues.map(f=>Gr(f,l,Zr())))}),a)}const yC=Ee("$ZodUnion",(e,a)=>{On.init(e,a),Pt(e._zod,"optin",()=>a.options.some(c=>c._zod.optin==="optional")?"optional":void 0),Pt(e._zod,"optout",()=>a.options.some(c=>c._zod.optout==="optional")?"optional":void 0),Pt(e._zod,"values",()=>{if(a.options.every(c=>c._zod.values))return new Set(a.options.flatMap(c=>Array.from(c._zod.values)))}),Pt(e._zod,"pattern",()=>{if(a.options.every(c=>c._zod.pattern)){const c=a.options.map(d=>d._zod.pattern);return new RegExp(`^(${c.map(d=>ah(d.source)).join("|")})$`)}});const s=a.options.length===1,l=a.options[0]._zod.run;e._zod.parse=(c,d)=>{if(s)return l(c,d);let f=!1;const h=[];for(const g of a.options){const p=g._zod.run({value:c.value,issues:[]},d);if(p instanceof Promise)h.push(p),f=!0;else{if(p.issues.length===0)return p;h.push(p)}}return f?Promise.all(h).then(g=>Qy(g,c,e,d)):Qy(h,c,e,d)}}),vC=Ee("$ZodIntersection",(e,a)=>{On.init(e,a),e._zod.parse=(s,l)=>{const c=s.value,d=a.left._zod.run({value:c,issues:[]},l),f=a.right._zod.run({value:c,issues:[]},l);return d instanceof Promise||f instanceof Promise?Promise.all([d,f]).then(([g,p])=>Yy(s,g,p)):Yy(s,d,f)}});function wm(e,a){if(e===a)return{valid:!0,data:e};if(e instanceof Date&&a instanceof Date&&+e==+a)return{valid:!0,data:e};if(Wi(e)&&Wi(a)){const s=Object.keys(a),l=Object.keys(e).filter(d=>s.indexOf(d)!==-1),c={...e,...a};for(const d of l){const f=wm(e[d],a[d]);if(!f.valid)return{valid:!1,mergeErrorPath:[d,...f.mergeErrorPath]};c[d]=f.data}return{valid:!0,data:c}}if(Array.isArray(e)&&Array.isArray(a)){if(e.length!==a.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let l=0;l<e.length;l++){const c=e[l],d=a[l],f=wm(c,d);if(!f.valid)return{valid:!1,mergeErrorPath:[l,...f.mergeErrorPath]};s.push(f.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function Yy(e,a,s){if(a.issues.length&&e.issues.push(...a.issues),s.issues.length&&e.issues.push(...s.issues),Ml(e))return e;const l=wm(a.value,s.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return e.value=l.data,e}const xC=Ee("$ZodEnum",(e,a)=>{On.init(e,a);const s=CE(a.entries),l=new Set(s);e._zod.values=l,e._zod.pattern=new RegExp(`^(${s.filter(c=>TE.has(typeof c)).map(c=>typeof c=="string"?ou(c):c.toString()).join("|")})$`),e._zod.parse=(c,d)=>{const f=c.value;return l.has(f)||c.issues.push({code:"invalid_value",values:s,input:f,inst:e}),c}}),SC=Ee("$ZodTransform",(e,a)=>{On.init(e,a),e._zod.parse=(s,l)=>{if(l.direction==="backward")throw new a0(e.constructor.name);const c=a.transform(s.value,s);if(l.async)return(c instanceof Promise?c:Promise.resolve(c)).then(f=>(s.value=f,s));if(c instanceof Promise)throw new Ll;return s.value=c,s}});function Ky(e,a){return e.issues.length&&a===void 0?{issues:[],value:void 0}:e}const NC=Ee("$ZodOptional",(e,a)=>{On.init(e,a),e._zod.optin="optional",e._zod.optout="optional",Pt(e._zod,"values",()=>a.innerType._zod.values?new Set([...a.innerType._zod.values,void 0]):void 0),Pt(e._zod,"pattern",()=>{const s=a.innerType._zod.pattern;return s?new RegExp(`^(${ah(s.source)})?$`):void 0}),e._zod.parse=(s,l)=>{if(a.innerType._zod.optin==="optional"){const c=a.innerType._zod.run(s,l);return c instanceof Promise?c.then(d=>Ky(d,s.value)):Ky(c,s.value)}return s.value===void 0?s:a.innerType._zod.run(s,l)}}),wC=Ee("$ZodNullable",(e,a)=>{On.init(e,a),Pt(e._zod,"optin",()=>a.innerType._zod.optin),Pt(e._zod,"optout",()=>a.innerType._zod.optout),Pt(e._zod,"pattern",()=>{const s=a.innerType._zod.pattern;return s?new RegExp(`^(${ah(s.source)}|null)$`):void 0}),Pt(e._zod,"values",()=>a.innerType._zod.values?new Set([...a.innerType._zod.values,null]):void 0),e._zod.parse=(s,l)=>s.value===null?s:a.innerType._zod.run(s,l)}),jC=Ee("$ZodDefault",(e,a)=>{On.init(e,a),e._zod.optin="optional",Pt(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(s,l)=>{if(l.direction==="backward")return a.innerType._zod.run(s,l);if(s.value===void 0)return s.value=a.defaultValue,s;const c=a.innerType._zod.run(s,l);return c instanceof Promise?c.then(d=>Xy(d,a)):Xy(c,a)}});function Xy(e,a){return e.value===void 0&&(e.value=a.defaultValue),e}const _C=Ee("$ZodPrefault",(e,a)=>{On.init(e,a),e._zod.optin="optional",Pt(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(s,l)=>(l.direction==="backward"||s.value===void 0&&(s.value=a.defaultValue),a.innerType._zod.run(s,l))}),EC=Ee("$ZodNonOptional",(e,a)=>{On.init(e,a),Pt(e._zod,"values",()=>{const s=a.innerType._zod.values;return s?new Set([...s].filter(l=>l!==void 0)):void 0}),e._zod.parse=(s,l)=>{const c=a.innerType._zod.run(s,l);return c instanceof Promise?c.then(d=>Jy(d,e)):Jy(c,e)}});function Jy(e,a){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:a}),e}const AC=Ee("$ZodCatch",(e,a)=>{On.init(e,a),Pt(e._zod,"optin",()=>a.innerType._zod.optin),Pt(e._zod,"optout",()=>a.innerType._zod.optout),Pt(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(s,l)=>{if(l.direction==="backward")return a.innerType._zod.run(s,l);const c=a.innerType._zod.run(s,l);return c instanceof Promise?c.then(d=>(s.value=d.value,d.issues.length&&(s.value=a.catchValue({...s,error:{issues:d.issues.map(f=>Gr(f,l,Zr()))},input:s.value}),s.issues=[]),s)):(s.value=c.value,c.issues.length&&(s.value=a.catchValue({...s,error:{issues:c.issues.map(d=>Gr(d,l,Zr()))},input:s.value}),s.issues=[]),s)}}),CC=Ee("$ZodPipe",(e,a)=>{On.init(e,a),Pt(e._zod,"values",()=>a.in._zod.values),Pt(e._zod,"optin",()=>a.in._zod.optin),Pt(e._zod,"optout",()=>a.out._zod.optout),Pt(e._zod,"propValues",()=>a.in._zod.propValues),e._zod.parse=(s,l)=>{if(l.direction==="backward"){const d=a.out._zod.run(s,l);return d instanceof Promise?d.then(f=>jc(f,a.in,l)):jc(d,a.in,l)}const c=a.in._zod.run(s,l);return c instanceof Promise?c.then(d=>jc(d,a.out,l)):jc(c,a.out,l)}});function jc(e,a,s){return e.issues.length?(e.aborted=!0,e):a._zod.run({value:e.value,issues:e.issues},s)}const OC=Ee("$ZodReadonly",(e,a)=>{On.init(e,a),Pt(e._zod,"propValues",()=>a.innerType._zod.propValues),Pt(e._zod,"values",()=>a.innerType._zod.values),Pt(e._zod,"optin",()=>a.innerType._zod.optin),Pt(e._zod,"optout",()=>a.innerType._zod.optout),e._zod.parse=(s,l)=>{if(l.direction==="backward")return a.innerType._zod.run(s,l);const c=a.innerType._zod.run(s,l);return c instanceof Promise?c.then(Wy):Wy(c)}});function Wy(e){return e.value=Object.freeze(e.value),e}const RC=Ee("$ZodCustom",(e,a)=>{va.init(e,a),On.init(e,a),e._zod.parse=(s,l)=>s,e._zod.check=s=>{const l=s.value,c=a.fn(l);if(c instanceof Promise)return c.then(d=>ev(d,s,l,e));ev(c,s,l,e)}});function ev(e,a,s,l){if(!e){const c={code:"custom",input:s,inst:l,path:[...l._zod.def.path??[]],continue:!l._zod.def.abort};l._zod.def.params&&(c.params=l._zod.def.params),a.issues.push(eo(c))}}class TC{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...s){const l=s[0];if(this._map.set(a,l),l&&typeof l=="object"&&"id"in l){if(this._idmap.has(l.id))throw new Error(`ID ${l.id} already exists in the registry`);this._idmap.set(l.id,a)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){const s=this._map.get(a);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(a),this}get(a){const s=a._zod.parent;if(s){const l={...this.get(s)??{}};delete l.id;const c={...l,...this._map.get(a)};return Object.keys(c).length?c:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}function DC(){return new TC}const _c=DC();function zC(e,a){return new e({type:"string",...tt(a)})}function kC(e,a){return new e({type:"string",format:"email",check:"string_format",abort:!1,...tt(a)})}function tv(e,a){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...tt(a)})}function MC(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...tt(a)})}function UC(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...tt(a)})}function LC(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...tt(a)})}function BC(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...tt(a)})}function qC(e,a){return new e({type:"string",format:"url",check:"string_format",abort:!1,...tt(a)})}function IC(e,a){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...tt(a)})}function $C(e,a){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...tt(a)})}function FC(e,a){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...tt(a)})}function HC(e,a){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...tt(a)})}function VC(e,a){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...tt(a)})}function ZC(e,a){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...tt(a)})}function GC(e,a){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...tt(a)})}function PC(e,a){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...tt(a)})}function QC(e,a){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...tt(a)})}function YC(e,a){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...tt(a)})}function KC(e,a){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...tt(a)})}function XC(e,a){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...tt(a)})}function JC(e,a){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...tt(a)})}function WC(e,a){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...tt(a)})}function eO(e,a){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...tt(a)})}function tO(e,a){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...tt(a)})}function nO(e,a){return new e({type:"string",format:"date",check:"string_format",...tt(a)})}function aO(e,a){return new e({type:"string",format:"time",check:"string_format",precision:null,...tt(a)})}function sO(e,a){return new e({type:"string",format:"duration",check:"string_format",...tt(a)})}function rO(e,a){return new e({type:"number",checks:[],...tt(a)})}function lO(e,a){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...tt(a)})}function iO(e){return new e({type:"unknown"})}function oO(e,a){return new e({type:"never",...tt(a)})}function nv(e,a){return new m0({check:"less_than",...tt(a),value:e,inclusive:!1})}function $f(e,a){return new m0({check:"less_than",...tt(a),value:e,inclusive:!0})}function av(e,a){return new h0({check:"greater_than",...tt(a),value:e,inclusive:!1})}function Ff(e,a){return new h0({check:"greater_than",...tt(a),value:e,inclusive:!0})}function sv(e,a){return new AA({check:"multiple_of",...tt(a),value:e})}function v0(e,a){return new OA({check:"max_length",...tt(a),maximum:e})}function Gc(e,a){return new RA({check:"min_length",...tt(a),minimum:e})}function x0(e,a){return new TA({check:"length_equals",...tt(a),length:e})}function cO(e,a){return new DA({check:"string_format",format:"regex",...tt(a),pattern:e})}function uO(e){return new zA({check:"string_format",format:"lowercase",...tt(e)})}function dO(e){return new kA({check:"string_format",format:"uppercase",...tt(e)})}function fO(e,a){return new MA({check:"string_format",format:"includes",...tt(a),includes:e})}function mO(e,a){return new UA({check:"string_format",format:"starts_with",...tt(a),prefix:e})}function hO(e,a){return new LA({check:"string_format",format:"ends_with",...tt(a),suffix:e})}function fo(e){return new BA({check:"overwrite",tx:e})}function pO(e){return fo(a=>a.normalize(e))}function gO(){return fo(e=>e.trim())}function bO(){return fo(e=>e.toLowerCase())}function yO(){return fo(e=>e.toUpperCase())}function vO(e,a,s){return new e({type:"array",element:a,...tt(s)})}function xO(e,a,s){return new e({type:"custom",check:"custom",fn:a,...tt(s)})}function SO(e){const a=NO(s=>(s.addIssue=l=>{if(typeof l=="string")s.issues.push(eo(l,s.value,a._zod.def));else{const c=l;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=s.value),c.inst??(c.inst=a),c.continue??(c.continue=!a._zod.def.abort),s.issues.push(eo(c))}},e(s.value,s)));return a}function NO(e,a){const s=new va({check:"custom",...tt(a)});return s._zod.check=e,s}function rv(e,a){try{var s=e()}catch(l){return a(l)}return s&&s.then?s.then(void 0,a):s}function wO(e,a){for(var s={};e.length;){var l=e[0],c=l.code,d=l.message,f=l.path.join(".");if(!s[f])if("unionErrors"in l){var h=l.unionErrors[0].errors[0];s[f]={message:h.message,type:h.code}}else s[f]={message:d,type:c};if("unionErrors"in l&&l.unionErrors.forEach(function(v){return v.errors.forEach(function(x){return e.push(x)})}),a){var g=s[f].types,p=g&&g[l.code];s[f]=Zm(f,a,s,c,p?[].concat(p,l.message):l.message)}e.shift()}return s}function jO(e,a){for(var s={};e.length;){var l=e[0],c=l.code,d=l.message,f=l.path.join(".");if(!s[f])if(l.code==="invalid_union"&&l.errors.length>0){var h=l.errors[0][0];s[f]={message:h.message,type:h.code}}else s[f]={message:d,type:c};if(l.code==="invalid_union"&&l.errors.forEach(function(v){return v.forEach(function(x){return e.push(x)})}),a){var g=s[f].types,p=g&&g[l.code];s[f]=Zm(f,a,s,c,p?[].concat(p,l.message):l.message)}e.shift()}return s}function _O(e,a,s){if(s===void 0&&(s={}),(function(l){return"_def"in l&&typeof l._def=="object"&&"typeName"in l._def})(e))return function(l,c,d){try{return Promise.resolve(rv(function(){return Promise.resolve(e[s.mode==="sync"?"parse":"parseAsync"](l,a)).then(function(f){return d.shouldUseNativeValidation&&Sm({},d),{errors:{},values:s.raw?Object.assign({},l):f}})},function(f){if((function(h){return Array.isArray(h?.issues)})(f))return{values:{},errors:Fy(wO(f.errors,!d.shouldUseNativeValidation&&d.criteriaMode==="all"),d)};throw f}))}catch(f){return Promise.reject(f)}};if((function(l){return"_zod"in l&&typeof l._zod=="object"})(e))return function(l,c,d){try{return Promise.resolve(rv(function(){return Promise.resolve((s.mode==="sync"?HE:VE)(e,l,a)).then(function(f){return d.shouldUseNativeValidation&&Sm({},d),{errors:{},values:s.raw?Object.assign({},l):f}})},function(f){if((function(h){return h instanceof rh})(f))return{values:{},errors:Fy(jO(f.issues,!d.shouldUseNativeValidation&&d.criteriaMode==="all"),d)};throw f}))}catch(f){return Promise.reject(f)}};throw new Error("Invalid input: not a Zod schema")}const EO=Ee("ZodISODateTime",(e,a)=>{JA.init(e,a),un.init(e,a)});function AO(e){return tO(EO,e)}const CO=Ee("ZodISODate",(e,a)=>{WA.init(e,a),un.init(e,a)});function OO(e){return nO(CO,e)}const RO=Ee("ZodISOTime",(e,a)=>{eC.init(e,a),un.init(e,a)});function TO(e){return aO(RO,e)}const DO=Ee("ZodISODuration",(e,a)=>{tC.init(e,a),un.init(e,a)});function zO(e){return sO(DO,e)}const kO=(e,a)=>{rh.init(e,a),e.name="ZodError",Object.defineProperties(e,{format:{value:s=>FE(e,s)},flatten:{value:s=>$E(e,s)},addIssue:{value:s=>{e.issues.push(s),e.message=JSON.stringify(e.issues,Nm,2)}},addIssues:{value:s=>{e.issues.push(...s),e.message=JSON.stringify(e.issues,Nm,2)}},isEmpty:{get(){return e.issues.length===0}}})},Za=Ee("ZodError",kO,{Parent:Error}),MO=uu(Za),UO=du(Za),LO=fu(Za),BO=mu(Za),qO=PE(Za),IO=QE(Za),$O=YE(Za),FO=KE(Za),HO=XE(Za),VO=JE(Za),ZO=WE(Za),GO=eA(Za),Mn=Ee("ZodType",(e,a)=>(On.init(e,a),e.def=a,e.type=a.type,Object.defineProperty(e,"_def",{value:a}),e.check=(...s)=>e.clone(Kr(a,{checks:[...a.checks??[],...s.map(l=>typeof l=="function"?{_zod:{check:l,def:{check:"custom"},onattach:[]}}:l)]})),e.clone=(s,l)=>hr(e,s,l),e.brand=()=>e,e.register=((s,l)=>(s.add(e,l),e)),e.parse=(s,l)=>MO(e,s,l,{callee:e.parse}),e.safeParse=(s,l)=>LO(e,s,l),e.parseAsync=async(s,l)=>UO(e,s,l,{callee:e.parseAsync}),e.safeParseAsync=async(s,l)=>BO(e,s,l),e.spa=e.safeParseAsync,e.encode=(s,l)=>qO(e,s,l),e.decode=(s,l)=>IO(e,s,l),e.encodeAsync=async(s,l)=>$O(e,s,l),e.decodeAsync=async(s,l)=>FO(e,s,l),e.safeEncode=(s,l)=>HO(e,s,l),e.safeDecode=(s,l)=>VO(e,s,l),e.safeEncodeAsync=async(s,l)=>ZO(e,s,l),e.safeDecodeAsync=async(s,l)=>GO(e,s,l),e.refine=(s,l)=>e.check(MR(s,l)),e.superRefine=s=>e.check(UR(s)),e.overwrite=s=>e.check(fo(s)),e.optional=()=>cv(e),e.nullable=()=>uv(e),e.nullish=()=>cv(uv(e)),e.nonoptional=s=>CR(e,s),e.array=()=>w0(e),e.or=s=>yR([e,s]),e.and=s=>xR(e,s),e.transform=s=>dv(e,NR(s)),e.default=s=>_R(e,s),e.prefault=s=>AR(e,s),e.catch=s=>RR(e,s),e.pipe=s=>dv(e,s),e.readonly=()=>zR(e),e.describe=s=>{const l=e.clone();return _c.add(l,{description:s}),l},Object.defineProperty(e,"description",{get(){return _c.get(e)?.description},configurable:!0}),e.meta=(...s)=>{if(s.length===0)return _c.get(e);const l=e.clone();return _c.add(l,s[0]),l},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),S0=Ee("_ZodString",(e,a)=>{lh.init(e,a),Mn.init(e,a);const s=e._zod.bag;e.format=s.format??null,e.minLength=s.minimum??null,e.maxLength=s.maximum??null,e.regex=(...l)=>e.check(cO(...l)),e.includes=(...l)=>e.check(fO(...l)),e.startsWith=(...l)=>e.check(mO(...l)),e.endsWith=(...l)=>e.check(hO(...l)),e.min=(...l)=>e.check(Gc(...l)),e.max=(...l)=>e.check(v0(...l)),e.length=(...l)=>e.check(x0(...l)),e.nonempty=(...l)=>e.check(Gc(1,...l)),e.lowercase=l=>e.check(uO(l)),e.uppercase=l=>e.check(dO(l)),e.trim=()=>e.check(gO()),e.normalize=(...l)=>e.check(pO(...l)),e.toLowerCase=()=>e.check(bO()),e.toUpperCase=()=>e.check(yO())}),PO=Ee("ZodString",(e,a)=>{lh.init(e,a),S0.init(e,a),e.email=s=>e.check(kC(QO,s)),e.url=s=>e.check(qC(YO,s)),e.jwt=s=>e.check(eO(uR,s)),e.emoji=s=>e.check(IC(KO,s)),e.guid=s=>e.check(tv(lv,s)),e.uuid=s=>e.check(MC(Ec,s)),e.uuidv4=s=>e.check(UC(Ec,s)),e.uuidv6=s=>e.check(LC(Ec,s)),e.uuidv7=s=>e.check(BC(Ec,s)),e.nanoid=s=>e.check($C(XO,s)),e.guid=s=>e.check(tv(lv,s)),e.cuid=s=>e.check(FC(JO,s)),e.cuid2=s=>e.check(HC(WO,s)),e.ulid=s=>e.check(VC(eR,s)),e.base64=s=>e.check(XC(iR,s)),e.base64url=s=>e.check(JC(oR,s)),e.xid=s=>e.check(ZC(tR,s)),e.ksuid=s=>e.check(GC(nR,s)),e.ipv4=s=>e.check(PC(aR,s)),e.ipv6=s=>e.check(QC(sR,s)),e.cidrv4=s=>e.check(YC(rR,s)),e.cidrv6=s=>e.check(KC(lR,s)),e.e164=s=>e.check(WC(cR,s)),e.datetime=s=>e.check(AO(s)),e.date=s=>e.check(OO(s)),e.time=s=>e.check(TO(s)),e.duration=s=>e.check(zO(s))});function Pc(e){return zC(PO,e)}const un=Ee("ZodStringFormat",(e,a)=>{an.init(e,a),S0.init(e,a)}),QO=Ee("ZodEmail",(e,a)=>{HA.init(e,a),un.init(e,a)}),lv=Ee("ZodGUID",(e,a)=>{$A.init(e,a),un.init(e,a)}),Ec=Ee("ZodUUID",(e,a)=>{FA.init(e,a),un.init(e,a)}),YO=Ee("ZodURL",(e,a)=>{VA.init(e,a),un.init(e,a)}),KO=Ee("ZodEmoji",(e,a)=>{ZA.init(e,a),un.init(e,a)}),XO=Ee("ZodNanoID",(e,a)=>{GA.init(e,a),un.init(e,a)}),JO=Ee("ZodCUID",(e,a)=>{PA.init(e,a),un.init(e,a)}),WO=Ee("ZodCUID2",(e,a)=>{QA.init(e,a),un.init(e,a)}),eR=Ee("ZodULID",(e,a)=>{YA.init(e,a),un.init(e,a)}),tR=Ee("ZodXID",(e,a)=>{KA.init(e,a),un.init(e,a)}),nR=Ee("ZodKSUID",(e,a)=>{XA.init(e,a),un.init(e,a)}),aR=Ee("ZodIPv4",(e,a)=>{nC.init(e,a),un.init(e,a)}),sR=Ee("ZodIPv6",(e,a)=>{aC.init(e,a),un.init(e,a)}),rR=Ee("ZodCIDRv4",(e,a)=>{sC.init(e,a),un.init(e,a)}),lR=Ee("ZodCIDRv6",(e,a)=>{rC.init(e,a),un.init(e,a)}),iR=Ee("ZodBase64",(e,a)=>{lC.init(e,a),un.init(e,a)}),oR=Ee("ZodBase64URL",(e,a)=>{oC.init(e,a),un.init(e,a)}),cR=Ee("ZodE164",(e,a)=>{cC.init(e,a),un.init(e,a)}),uR=Ee("ZodJWT",(e,a)=>{dC.init(e,a),un.init(e,a)}),N0=Ee("ZodNumber",(e,a)=>{g0.init(e,a),Mn.init(e,a),e.gt=(l,c)=>e.check(av(l,c)),e.gte=(l,c)=>e.check(Ff(l,c)),e.min=(l,c)=>e.check(Ff(l,c)),e.lt=(l,c)=>e.check(nv(l,c)),e.lte=(l,c)=>e.check($f(l,c)),e.max=(l,c)=>e.check($f(l,c)),e.int=l=>e.check(iv(l)),e.safe=l=>e.check(iv(l)),e.positive=l=>e.check(av(0,l)),e.nonnegative=l=>e.check(Ff(0,l)),e.negative=l=>e.check(nv(0,l)),e.nonpositive=l=>e.check($f(0,l)),e.multipleOf=(l,c)=>e.check(sv(l,c)),e.step=(l,c)=>e.check(sv(l,c)),e.finite=()=>e;const s=e._zod.bag;e.minValue=Math.max(s.minimum??Number.NEGATIVE_INFINITY,s.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(s.maximum??Number.POSITIVE_INFINITY,s.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(s.format??"").includes("int")||Number.isSafeInteger(s.multipleOf??.5),e.isFinite=!0,e.format=s.format??null});function sa(e){return rO(N0,e)}const dR=Ee("ZodNumberFormat",(e,a)=>{fC.init(e,a),N0.init(e,a)});function iv(e){return lO(dR,e)}const fR=Ee("ZodUnknown",(e,a)=>{mC.init(e,a),Mn.init(e,a)});function ov(){return iO(fR)}const mR=Ee("ZodNever",(e,a)=>{hC.init(e,a),Mn.init(e,a)});function hR(e){return oO(mR,e)}const pR=Ee("ZodArray",(e,a)=>{pC.init(e,a),Mn.init(e,a),e.element=a.element,e.min=(s,l)=>e.check(Gc(s,l)),e.nonempty=s=>e.check(Gc(1,s)),e.max=(s,l)=>e.check(v0(s,l)),e.length=(s,l)=>e.check(x0(s,l)),e.unwrap=()=>e.element});function w0(e,a){return vO(pR,e,a)}const gR=Ee("ZodObject",(e,a)=>{bC.init(e,a),Mn.init(e,a),Pt(e,"shape",()=>a.shape),e.keyof=()=>j0(Object.keys(e._zod.def.shape)),e.catchall=s=>e.clone({...e._zod.def,catchall:s}),e.passthrough=()=>e.clone({...e._zod.def,catchall:ov()}),e.loose=()=>e.clone({...e._zod.def,catchall:ov()}),e.strict=()=>e.clone({...e._zod.def,catchall:hR()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=s=>UE(e,s),e.safeExtend=s=>LE(e,s),e.merge=s=>BE(e,s),e.pick=s=>kE(e,s),e.omit=s=>ME(e,s),e.partial=(...s)=>qE(_0,e,s[0]),e.required=(...s)=>IE(E0,e,s[0])});function pu(e,a){const s={type:"object",shape:e??{},...tt(a)};return new gR(s)}const bR=Ee("ZodUnion",(e,a)=>{yC.init(e,a),Mn.init(e,a),e.options=a.options});function yR(e,a){return new bR({type:"union",options:e,...tt(a)})}const vR=Ee("ZodIntersection",(e,a)=>{vC.init(e,a),Mn.init(e,a)});function xR(e,a){return new vR({type:"intersection",left:e,right:a})}const jm=Ee("ZodEnum",(e,a)=>{xC.init(e,a),Mn.init(e,a),e.enum=a.entries,e.options=Object.values(a.entries);const s=new Set(Object.keys(a.entries));e.extract=(l,c)=>{const d={};for(const f of l)if(s.has(f))d[f]=a.entries[f];else throw new Error(`Key ${f} not found in enum`);return new jm({...a,checks:[],...tt(c),entries:d})},e.exclude=(l,c)=>{const d={...a.entries};for(const f of l)if(s.has(f))delete d[f];else throw new Error(`Key ${f} not found in enum`);return new jm({...a,checks:[],...tt(c),entries:d})}});function j0(e,a){const s=Array.isArray(e)?Object.fromEntries(e.map(l=>[l,l])):e;return new jm({type:"enum",entries:s,...tt(a)})}const SR=Ee("ZodTransform",(e,a)=>{SC.init(e,a),Mn.init(e,a),e._zod.parse=(s,l)=>{if(l.direction==="backward")throw new a0(e.constructor.name);s.addIssue=d=>{if(typeof d=="string")s.issues.push(eo(d,s.value,a));else{const f=d;f.fatal&&(f.continue=!1),f.code??(f.code="custom"),f.input??(f.input=s.value),f.inst??(f.inst=e),s.issues.push(eo(f))}};const c=a.transform(s.value,s);return c instanceof Promise?c.then(d=>(s.value=d,s)):(s.value=c,s)}});function NR(e){return new SR({type:"transform",transform:e})}const _0=Ee("ZodOptional",(e,a)=>{NC.init(e,a),Mn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function cv(e){return new _0({type:"optional",innerType:e})}const wR=Ee("ZodNullable",(e,a)=>{wC.init(e,a),Mn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function uv(e){return new wR({type:"nullable",innerType:e})}const jR=Ee("ZodDefault",(e,a)=>{jC.init(e,a),Mn.init(e,a),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function _R(e,a){return new jR({type:"default",innerType:e,get defaultValue(){return typeof a=="function"?a():l0(a)}})}const ER=Ee("ZodPrefault",(e,a)=>{_C.init(e,a),Mn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function AR(e,a){return new ER({type:"prefault",innerType:e,get defaultValue(){return typeof a=="function"?a():l0(a)}})}const E0=Ee("ZodNonOptional",(e,a)=>{EC.init(e,a),Mn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function CR(e,a){return new E0({type:"nonoptional",innerType:e,...tt(a)})}const OR=Ee("ZodCatch",(e,a)=>{AC.init(e,a),Mn.init(e,a),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function RR(e,a){return new OR({type:"catch",innerType:e,catchValue:typeof a=="function"?a:()=>a})}const TR=Ee("ZodPipe",(e,a)=>{CC.init(e,a),Mn.init(e,a),e.in=a.in,e.out=a.out});function dv(e,a){return new TR({type:"pipe",in:e,out:a})}const DR=Ee("ZodReadonly",(e,a)=>{OC.init(e,a),Mn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function zR(e){return new DR({type:"readonly",innerType:e})}const kR=Ee("ZodCustom",(e,a)=>{RC.init(e,a),Mn.init(e,a)});function MR(e,a={}){return xO(kR,e,a)}function UR(e){return SO(e)}const LR=["correlativo","no correlativo"],BR=pu({oi:Pc().regex(/^OI-\d{4}-\d{4}$/,"Formato OI-####-YYYY"),q3:sa(),alcance:sa(),pma:sa().refine(e=>e===10||e===16,{message:"PMA invlido"}),numeration_type:j0(LR).default("correlativo")}),Hf=pu({c1:sa().optional().nullable(),c2:sa().optional().nullable(),c3:sa().optional().nullable(),c4:sa().optional().nullable(),c5:sa().optional().nullable(),c6:sa().optional().nullable(),c7:Pc().optional().nullable(),c7_seconds:sa().optional().nullable(),caudal:sa().optional().nullable(),error:sa().optional().nullable()}),qR=pu({medidor:Pc().optional(),estado:sa().int().min(0).max(5).default(0),q3:Hf.optional(),q2:Hf.optional(),q1:Hf.optional(),conformidad:Pc().optional()});pu({estado:sa().int().min(0).optional(),rows:sa().int().min(1).default(15),rowsData:w0(qR)});function IR(e){return e===16?25.6:e===10?16:NaN}const $R=/^[A-Za-z0-9]{10}$/,FR=e=>(e??"").trim().toUpperCase(),hn=e=>{const a=e.currentTarget;a.size=Math.max(1,a.value.length)},Rl=["medidor","estado","q3.c1","q3.c2","q3.c3","q3.c4","q3.c5","q3.c6","q3.c7","q2.c1","q2.c2","q2.c3","q2.c4","q2.c5","q2.c6","q2.c7","q1.c1","q1.c2","q1.c3","q1.c4","q1.c5","q1.c6","q1.c7"],_m=e=>{e&&(e.focus(),(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&e.select())},fv=(e,a)=>{if(a){if(e==="medidor"){a.focus();return}_m(a)}},In=e=>{if(e===""||e===null||e===void 0)return null;const a=String(e).replace(",","."),s=Number(a);return Number.isNaN(s)?null:s};function HR(e,a){if(!e)return"";const s=e.match(/^(.*?)(\d+)$/);if(!s)return e;const l=s[1],c=s[2],d=parseInt(c,10)+a;return`${l}${d.toString().padStart(c.length,"0")}`}function mv(e,a,s){return e?s==="no correlativo"?e.slice(0,4):HR(e,a):""}function Vf(e){if(!e)return 0;const a=String(e).trim(),s=a.split(/[:,\.]/).map(c=>parseFloat(c)).filter(c=>!isNaN(c));let l=0;if(s.length>=3){const c=s[0]||0,d=s[1]||0,f=s[2]||0;l=c*60+d+f/1e3}else if(s.length===2)l=s[0]*60+(s[1]||0);else if(s.length===1)l=s[0];else{const c=parseFloat(a.replace(",","."));if(!isNaN(c)){const d=Math.floor(c),f=(c-d)*100;l=d*60+f}}return l}function Zf(e,a){if(!e||!a)return null;const s=a>0?a/3600:0;return s===0?null:e/s}function Gf(e,a,s){return e===void 0||a===void 0||!s?null:(Number(a)-Number(e)-Number(s))/Number(s)*100}function VR(e,a,s,l){if(e&&e>=1)return"NO CONFORME";if(a==null||s==null||l==null)return"";const c=Math.abs(a),d=Math.abs(s),f=Math.abs(l),h=!(c>2.05||d>2.05||f>5.05),g=c<1.05||d<1.05||f<2.55,p=Math.sign(a),v=Math.sign(s),x=Math.sign(l),N=p>=0&&v>=0&&x>=0||p<=0&&v<=0&&x<=0,I=h&&g;return N?I?"CONFORME":"NO CONFORME":h?"CONFORME":"NO CONFORME"}const Tl=({val:e,isErr:a,warnThreshold:s,failThreshold:l})=>{const c=p=>{const v=Number(p.toFixed(1));return Object.is(v,-0)?"0.0":v.toFixed(1)};if(!a)return i.jsx("td",{className:"bg-light",children:e==null||isNaN(e)?i.jsx("span",{className:"text-muted",children:"-"}):i.jsx("span",{className:"vi-qe-value text-primary fw-semibold",children:e.toFixed(2)})});const d=Math.abs(e??0),f=s??l??0,h=l??s??0;let g="vi-e-ok";return e==null||isNaN(e)?g="":h>0&&d>h?g="vi-e-error":f>0&&d>f&&(g="vi-e-warn"),i.jsx("td",{className:"bg-light",children:e==null||isNaN(e)?i.jsx("span",{className:"text-muted",children:"-"}):i.jsx("span",{className:`vi-qe-value fw-bold ${g}`,children:c(e)})})};function ZR({show:e,title:a,initial:s,onClose:l,onSubmit:c,onCancelWithDraft:d,numerationType:f,duplicateMap:h,onClearDuplicate:g,readOnly:p,draftStorageKey:v,draftMeta:x,isOnline:N,showRetry:I}){const j={estado:s?.estado??0,rows:s?.rows??15,version:s?.version??null,draftCreatedAt:s?.draftCreatedAt??null,draftId:s?.draftId??null,rowsData:s?.rowsData??Array.from({length:15}).map(()=>({medidor:"",estado:0,q3:{},q2:{},q1:{}}))},_=p===!0,C=N!==!1,{register:q,control:T,handleSubmit:J,reset:D,setValue:R,getValues:Z}=eu({defaultValues:j}),L=q("rows",{valueAsNumber:!0}),{fields:W,replace:ue,append:Ae,remove:xe}=v_({control:T,name:"rowsData"}),[he,Ne]=b.useState(0),ke=b.useRef(0),Te=b.useRef(null),[U,$]=b.useState(0),X=0,ye=5,Se=()=>{if(U>=ye){alert("Ya estas en el tamano maximo de fuente permitido para las filas (+5).");return}$(Y=>Math.min(Y+1,ye))},w=()=>{if(U<=X){alert("Ya estas en el tamano minimo de fuente permitido para las filas.");return}$(Y=>Math.max(Y-1,X))},P=b.useRef(null),[ie,M]=b.useState([]),ce=!!s?.version,pe=b.useRef("rows"),De=b.useRef(null),$e=b.useRef(null),fe=b.useRef(null),Le=b.useRef(new Map),Ie=["c1","c2","c3","c4","c5","c6","c7"];b.useEffect(()=>{s?.rowsData?.length&&W.forEach((Y,K)=>{if(K===0)return;s.rowsData[K]?.medidor&&Le.current.set(Y.id,!0)})},[s,W]);const Ge=b.useCallback(Y=>{const K=Y<0?0:Y;Ne(K),requestAnimationFrame(()=>{const je=document.querySelector(`input.vi-medidor-input[data-row="${K}"]`);je&&(je.focus(),je.select())})},[]),dt=()=>(Z("rowsData")??[]).slice(0,W.length);b.useEffect(()=>{ke.current=he},[he]);const ze=Y=>{const K=Y.target;if(!K)return;const je=K.tagName;if(je!=="INPUT"&&je!=="SELECT"&&je!=="TEXTAREA")return;const Ve=Y.key;if(Ve==="Escape"){Y.preventDefault(),Fn();return}if(Ve==="ArrowUp"||Ve==="ArrowDown"||Ve==="ArrowLeft"||Ve==="ArrowRight"||Ve==="Enter"){const xn=K.name;if(!xn||!xn.startsWith("rowsData."))return;const Tt=xn.match(/^rowsData\.(\d+)\.(.+)$/);if(!Tt)return;const ft=parseInt(Tt[1],10),bt=Tt[2],Ht=Y.currentTarget,pn=W.length-1,Tn=(rn,Wt)=>{let jt=rn+Wt;for(;jt>=0&&jt<=pn;){const Ln=`[name="rowsData.${jt}.${bt}"]`,dn=Ht.querySelector(Ln);if(dn&&!dn.disabled)return{index:jt,el:dn};jt+=Wt}return null};if(Ve==="ArrowUp"||Ve==="ArrowDown"){Y.preventDefault();const Wt=Tn(ft,Ve==="ArrowUp"?-1:1);Wt&&fv(bt,Wt.el);return}if(Ve==="ArrowLeft"||Ve==="ArrowRight"){Y.preventDefault();const rn=Rl.indexOf(bt);if(rn===-1)return;const jt=rn+(Ve==="ArrowRight"?1:-1);if(jt<0||jt>=Rl.length)return;const Ln=Rl[jt],dn=`[name="rowsData.${ft}.${Ln}"]`,Sn=Ht.querySelector(dn);Sn&&!Sn.disabled&&_m(Sn);return}if(Ve==="Enter"){Y.preventDefault();const rn=Rl.indexOf(bt);if(rn===-1)return;const Wt=Tn(ft,1);if(Wt){fv(bt,Wt.el);return}const jt=rn+1;if(jt<Rl.length){const Ln=Rl[jt];for(let dn=0;dn<=pn;dn++){const Sn=`[name="rowsData.${dn}.${Ln}"]`,Bn=Ht.querySelector(Sn);if(Bn&&!Bn.disabled){_m(Bn);return}}}P.current&&P.current.focus();return}}if(Ve!=="Tab")return;const st=Y.currentTarget,ot=Array.from(st.querySelectorAll("input, select, textarea")).filter(Dt=>!Dt.hasAttribute("disabled")),Ke=ot.indexOf(K);if(Ke===-1)return;if(Ve==="Tab"&&Y.shiftKey){Ke>0&&(Y.preventDefault(),ot[Ke-1].focus());return}const Lt=Ke+1;if(Lt<ot.length){Y.preventDefault(),ot[Lt].focus();return}P.current&&(Y.preventDefault(),P.current.focus())},Ze=(Y,K)=>{ue(Y),R("rows",Y.length),Ne(je=>Y.length===0?0:typeof K=="number"?Math.max(0,Math.min(K,Y.length-1)):Math.min(je,Y.length-1))},me=()=>({medidor:"",estado:0,q3:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:"",c7_seconds:null},q2:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:"",c7_seconds:null},q1:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:"",c7_seconds:null}}),Fe=Y=>Y==null?"":typeof Y=="number"?Y:typeof Y=="string"?Y.replace(",","."):Y,Ce=Y=>{if(!Y)return{};const K={...Y};return["c1","c2","c3","c4","c5","c6"].forEach(je=>{K[je]=Fe(K[je])}),K},Je=()=>{const Y=s?.rowsData?.length??s?.rows??15,K=(s?.rowsData&&s.rowsData.length>0?s.rowsData:Array.from({length:Y}).map(()=>({medidor:"",estado:0,q3:{},q2:{},q1:{}}))).map(je=>({medidor:je.medidor??"",estado:je.estado??0,q3:Ce(je.q3),q2:Ce(je.q2),q1:Ce(je.q1)}));return{rows:K.length,rowsData:K,version:s?.version??null,estado:s?.estado??0,draftCreatedAt:s?.draftCreatedAt??null,draftId:s?.draftId??null}},A=b.useCallback(()=>{const Y=Z(),K=Y.rowsData??[];return{estado:Y.estado??0,rows:Number(Y.rows??K.length),version:Y.version??s?.version??null,rowsData:K,draftCreatedAt:Y.draftCreatedAt??s?.draftCreatedAt??null,draftId:Y.draftId??s?.draftId??null}},[Z,s?.version,s?.draftCreatedAt,s?.draftId]),V=Y=>x?{version:1,ts:new Date().toISOString(),userId:x.userId,bankId:x.bankId,oiId:x.oiId,bancadaId:x.bancadaId??null,isNew:x.isNew,data:Y}:null,O=()=>x?{version:1,ts:new Date().toISOString(),userId:x.userId,bankId:x.bankId,oiId:x.oiId,oiCode:x.oiCode??null,returnTo:x.returnTo??`/oi/${x.oiId}?mode=edit`,mode:"edit",modal:{type:"bancada",bancadaId:x.bancadaId??null,isNew:x.isNew}}:null,Q=Y=>Y==null||Y===""||typeof Y=="number"&&Number.isNaN(Y),G=Y=>Y?Number(Y.estado??0)!==0||Y.medidor&&Y.medidor.toString().trim()!==""?!0:Oe(Y):!1,se=Y=>(Y.rowsData??[]).some(je=>G(je)),Oe=Y=>{const K=[Y.q3,Y.q2,Y.q1];for(const je of K)if(je){for(const Ve of Ie)if(!Q(je[Ve]))return!0}return!1},Be=Y=>Y?{...Y,c4:null,c5:null}:{c4:null,c5:null},ae=Y=>{if(!Y)return Y;const K={...Y};return Q(K.c4)&&(K.c4=null),Q(K.c5)&&(K.c5=null),K},Me=Y=>{for(let K=0;K<Y.length;K++){const je=Y[K],Ve=Number(je.estado??0),st=Ve!==0;if(!G(je))continue;if(!je.medidor||je.medidor.toString().trim()==="")return`La fila ${K+1} tiene datos pero el campo "# Medidor (G)" est vaco. Completa el valor o elimina la fila.`;const Ke=[{name:"Q3 (Nominal)",block:je.q3},{name:"Q2 (Transicin)",block:je.q2},{name:"Q1 (Mnimo)",block:je.q1}],Nt=Ke.some(({block:Lt})=>Lt&&Ie.some(Dt=>!Q(Lt[Dt])));if(Ve===0&&!Nt)return`La fila ${K+1} no tiene lecturas. Ingresa datos en Q3/Q2/Q1 o elimina la fila.`;if(!st)for(const{name:Lt,block:Dt}of Ke){if(!Dt||!Ie.some(ft=>!Q(Dt[ft])))continue;if(Ie.some(ft=>Q(Dt[ft])))return`La fila ${K+1} tiene datos incompletos en el bloque ${Lt}. Completa todos los campos o elimina la fila.`}}return null},He=Y=>Y==null||Y===""?null:String(Y).replace(/\./g,","),at=Y=>{if(!Y)return{};const K={...Y};return["c1","c2","c3","c4","c5","c6","c7"].forEach(je=>{K[je]=He(K[je])}),K},Jt=Y=>{const K=[];let je=null;const Ve=(ot,Ke,Nt)=>{K[ot]||(K[ot]={}),K[ot][Ke]=Nt,je||(je=`Fila ${ot+1}: ${Nt}`)},st={};return Y.forEach(ot=>{const Ke=(ot.medidor??"").trim();Ke&&(st[Ke]=(st[Ke]??0)+1)}),Y.forEach((ot,Ke)=>{const Nt=ot.q3||{},Lt=ot.q2||{},Dt=ot.q1||{},xn=Nt.c4,Tt=Nt.c5,ft=Lt.c4,bt=Lt.c5,Ht=Dt.c4,pn=Dt.c5;xn!=null&&Tt!=null&&!Number.isNaN(xn)&&!Number.isNaN(Tt)&&Tt<xn&&Ve(Ke,"q3_lf","En Q3 L.F debe ser mayor o igual que L.I."),ft!=null&&bt!=null&&!Number.isNaN(ft)&&!Number.isNaN(bt)&&bt<ft&&Ve(Ke,"q2_lf","En Q2 L.F debe ser mayor o igual que L.I."),Ht!=null&&pn!=null&&!Number.isNaN(Ht)&&!Number.isNaN(pn)&&pn<Ht&&Ve(Ke,"q1_lf","En Q1 L.F debe ser mayor o igual que L.I."),Tt!=null&&ft!=null&&!Number.isNaN(Tt)&&!Number.isNaN(ft)&&ft<Tt&&Ve(Ke,"q2_li","L.I de Q2 debe ser mayor o igual que L.F de Q3."),bt!=null&&Ht!=null&&!Number.isNaN(bt)&&!Number.isNaN(Ht)&&Ht<bt&&Ve(Ke,"q1_li","L.I de Q1 debe ser mayor o igual que L.F de Q2.");const Tn=(ot.medidor??"").trim();Tn&&st[Tn]>1&&Ve(Ke,"medidor_dup","Serie de medidor repetida."),Tn&&!$R.test(Tn)&&Ve(Ke,"medidor_format","La serie del medidor debe tener 10 caracteres alfanumricos.")}),{rowErrors:K,firstMessage:je}},we=Y=>{if(_)return;const K=(Y.rowsData??[]).slice(0,W.length),je=Me(K);if(je){alert(je);return}const{rowErrors:Ve,firstMessage:st}=Jt(K);if(M(Ve),st){alert(st);return}const Ke=K.filter(G).map(Lt=>{const Dt=Number(Lt.estado??0),xn=Dt>=1&&Dt<=4,Tt=Dt===5&&!Oe(Lt),ft=xn||Tt,bt=ae(Lt.q3),Ht=ae(Lt.q2),pn=ae(Lt.q1),Tn=rn=>{if(ft){const Wt=Be(rn);return at(Wt)}return at(rn)};return{...Lt,q3:Tn(bt),q2:Tn(Ht),q1:Tn(pn)}}),Nt={...Y,rows:Ke.length,rowsData:Ke,version:Y.version??s?.version??null};c(Nt)},et=qi({control:T,name:"rowsData.0"}),Ft=qi({control:T,name:"rowsData"}),Et=qi({control:T,name:"rowsData.0.q3.c7"}),Rn=qi({control:T,name:"rowsData.0.q2.c7"}),$n=qi({control:T,name:"rowsData.0.q1.c7"});b.useEffect(()=>{W[0]&&(R("rowsData.0.q3.c7_seconds",Vf(Et)),R("rowsData.0.q2.c7_seconds",Vf(Rn)),R("rowsData.0.q1.c7_seconds",Vf($n)))},[Et,Rn,$n,R,W]),b.useEffect(()=>{const Y=Ft??[],{rowErrors:K}=Jt(Y);M(K)},[Ft]),b.useEffect(()=>{if(!et||W.length<=1)return;const Y=Ft??[];W.forEach((K,je)=>{if(je===0)return;const Ve=K.id;(Le.current.get(Ve)??!1)||R(`rowsData.${je}.medidor`,mv(et.medidor||"",je,f));const ot=Y[je]?.estado;(ot==null||Number.isNaN(ot))&&R(`rowsData.${je}.estado`,et.estado),R(`rowsData.${je}.q3.c1`,et.q3?.c1??null),R(`rowsData.${je}.q3.c2`,et.q3?.c2??null),R(`rowsData.${je}.q3.c3`,et.q3?.c3??null),R(`rowsData.${je}.q3.c6`,et.q3?.c6??null),R(`rowsData.${je}.q3.c7`,et.q3?.c7??""),R(`rowsData.${je}.q3.c7_seconds`,et.q3?.c7_seconds??null),R(`rowsData.${je}.q2.c1`,et.q2?.c1??null),R(`rowsData.${je}.q2.c2`,et.q2?.c2??null),R(`rowsData.${je}.q2.c3`,et.q2?.c3??null),R(`rowsData.${je}.q2.c6`,et.q2?.c6??null),R(`rowsData.${je}.q2.c7`,et.q2?.c7??""),R(`rowsData.${je}.q2.c7_seconds`,et.q2?.c7_seconds??null),R(`rowsData.${je}.q1.c1`,et.q1?.c1??null),R(`rowsData.${je}.q1.c2`,et.q1?.c2??null),R(`rowsData.${je}.q1.c3`,et.q1?.c3??null),R(`rowsData.${je}.q1.c6`,et.q1?.c6??null),R(`rowsData.${je}.q1.c7`,et.q1?.c7??""),R(`rowsData.${je}.q1.c7_seconds`,et.q1?.c7_seconds??null)})},[et,Ft,W,R,f]),b.useEffect(()=>{Ne(Y=>{const K=Math.max(W.length-1,0);return Y>K?K:Y})},[W.length]);const Ra=()=>{if(W.length>=50){if(R("rows",50),Ge(0),!confirm("El maximo de filas es 50. Quieres fijar la lista en 50 filas?")){Te.current&&(Te.current.focus(),Te.current.select());return}return}Ae(me()),R("rows",W.length+1),Ge(W.length)},sn=Y=>{if(W.length<=1)return;const K=Math.max(0,Math.min(Y,W.length-1));xe(K),R("rows",Math.max(W.length-1,1)),Ge(Math.max(0,K-(K===W.length-1?1:0)))},rt=()=>{W.length<=1||(xe(W.length-1),R("rows",Math.max(W.length-1,1)),Ge(Math.max(0,W.length-2)))},Kn=()=>{if(!confirm("Ests seguro de limpiar todos los datos de la bancada?"))return;const Y=dt();if(!Y.length)return;const K=Y.map(()=>me());Ze(K,0),Ge(0)},Un=()=>{let Y=Number(Z("rows"));if((!Number.isFinite(Y)||Y<1)&&(Y=1),Y>50){const Ve=dt();if(!confirm("El maximo de filas es 50. Quieres usar 50 filas?")){R("rows",Ve.length),Te.current&&(Te.current.focus(),Te.current.select());return}Y=50}const K=dt();if(Y!==K.length&&!confirm(`La lista tendr ${Y} filas. Quieres continuar?`)){R("rows",K.length),Te.current&&(Te.current.focus(),Te.current.select());return}if(Y===K.length){R("rows",Y);return}if(Y>K.length){const Ve=Math.min(Y,50)-K.length;if(Ve>0){const st=Array.from({length:Ve},()=>me()),ot=[...K,...st];Ze(ot,he),Ge(K.length)}else R("rows",K.length);return}const je=K.slice(0,Y);Ze(je,Math.min(he,Y-1))},Zt=Y=>{Y.key==="Enter"&&(Y.preventDefault(),Un(),Ge(0))},Fn=()=>{const Y=Z(),K=document.activeElement;if(Te.current&&K===Te.current)pe.current="rows",De.current="rows";else if(K&&K instanceof HTMLElement){const je=K.getAttribute("name");je&&je.startsWith("rowsData.")?(pe.current="grid",De.current=je):(pe.current="grid",De.current=null)}else pe.current="grid",De.current=null;if(v){const je=A();if(!se(je))ur(v),fe.current=null;else{const Ve=V(je);if(Ve){const st=JSON.stringify(Ve);Gi(v,Ve,O()),fe.current=st}}}d&&d(Y),l()};b.useEffect(()=>{if(!e)return;const Y=K=>{if(K.key==="Escape"){K.preventDefault(),Fn();return}if((K.key==="+"||K.key==="=")&&K.ctrlKey){K.preventDefault(),Ra();return}(K.key==="-"||K.key==="_")&&K.ctrlKey&&(K.preventDefault(),rt())};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[e,Ra,rt,Fn]),b.useEffect(()=>{const Y=Je();D(Y),Ze(Y.rowsData,0),Le.current.clear(),requestAnimationFrame(()=>{if(ce)Ge(0);else if(De.current){const K=document.querySelector(`[name="${De.current}"]`);if(K){K.focus(),"select"in K&&K.select?.();return}Ge(ke.current||0)}else Te.current&&(Te.current.focus(),Te.current.select())})},[s,D,ue,Ge,ce]),b.useEffect(()=>{if(!e||!v)return;const Y=A();if(!se(Y)){ur(v),fe.current=null;return}const K=V(Y);if(!K)return;const je=JSON.stringify(K);if(je!==fe.current)return $e.current&&window.clearTimeout($e.current),$e.current=window.setTimeout(()=>{Gi(v,K,O()),fe.current=je},400),()=>{$e.current&&window.clearTimeout($e.current)}},[e,v,Ft,A]),b.useEffect(()=>{e&&requestAnimationFrame(()=>{if(ce)Ge(0);else if(De.current){const Y=document.querySelector(`[name="${De.current}"]`);if(Y){Y.focus(),"select"in Y&&Y.select?.();return}Ge(ke.current||0)}else Te.current&&(Te.current.focus(),Te.current.select())})},[e,Ge,ce]);const Hn=ie.some(Y=>Y&&Object.values(Y).some(Boolean));return e?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"modal d-block",tabIndex:-1,role:"dialog",onClick:Y=>{Y.target===Y.currentTarget&&Fn()},children:[i.jsx("style",{children:`        /* Ocultar flechas de inputs numricos para limpiar la vista */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
        input[type=number] {
          -moz-appearance: textfield;
        }

        /* Ancho minimo para columnas compactas (Temp, P.Ent, etc.) */
        .vi-min-width {
          min-width: 70px;
        }

        /* Estilo spreadsheet tipo Excel (modo claro) */
        .vi-spreadsheet {
          background-color: #ffffff;
          color: #212529;
          font-size: 0.75rem;
          table-layout: auto;
          width: max-content;
        }

        .vi-spreadsheet th,
        .vi-spreadsheet td {
          white-space: nowrap;
        }

        .vi-spreadsheet thead th {
          background-color: #e6f3ff;
          color: #0c2b4d;
          vertical-align: middle;
          padding: 0.25rem 0.35rem;
        }

        .vi-spreadsheet thead th.vi-header-at,
        .vi-spreadsheet thead th.vi-header-quitar,
        .vi-spreadsheet td.vi-at-valor {
          color: #212529 !important;
        }

                .vi-spreadsheet td.vi-row-index,
        .vi-spreadsheet th.vi-row-index {
          color: #0c2b4d;
        }

        /* Columna ndice (#) fija al hacer scroll horizontal */
        .vi-spreadsheet th.vi-row-index {
          position: sticky;
          left: 0;
          z-index: 3;
          background-color: #e6f3ff; /* mismo fondo que otros headers */
        }

        .vi-spreadsheet td.vi-row-index {
          position: sticky;
          left: 0;
          z-index: 2;
          background-color: inherit;
        }

        /* Columna # Medidor (G) fija, justo despus del ndice de fila */
        .vi-spreadsheet th.vi-sticky-medidor,
        .vi-spreadsheet td.vi-sticky-medidor {
          position: sticky;
          left: 30px; /* coincide con width:"30px" de la columna # */
        }

        .vi-spreadsheet thead th.vi-sticky-medidor {
          z-index: 3;
          background-color: #e6f3ff;
        }

        .vi-spreadsheet tbody td.vi-sticky-medidor {
          z-index: 2;
          background-color: inherit;
        }


        .vi-spreadsheet tr.vi-base-row td.vi-row-index {
          background-color: #d6e9ff !important;
          color: #0c2b4d !important;
          font-weight: 600;
        }

        .vi-spreadsheet td.vi-at-valor {
          transition: color 0.15s ease-in-out;
        }

        .vi-spreadsheet td.vi-at-valor:hover {
          color: #0a58ca !important;
        }

        .vi-spreadsheet tr.table-active td.vi-at-valor {
          color: #0c2b4d !important;
        }

        .vi-spreadsheet tbody td {
          padding: 0.15rem 0.25rem;
        }

        .vi-spreadsheet tr.table-active > td {
          background-color: #d9ecff !important;
          color: #0c2b4d !important;
        }

        .vi-spreadsheet tr.table-active input.form-control {
          background-color: #ffffff;
          color: #0c2b4d;
          border-color: #b6d4fe;
        }

        .vi-spreadsheet tr.vi-base-row.table-active > td {
          background-color: #d9ecff !important;
          color: #0c2b4d !important;
        }

        .vi-spreadsheet.table-hover tbody tr:not(.table-active):hover > td {
          background-color: inherit;
          color: inherit;
        }

        .vi-spreadsheet input.form-control {
          background-color: #ffffff;
          border-color: #ced4da;
          color: #212529;
          font-size: 0.75rem;
          padding: 0.05rem 0.25rem;
          height: 1.7rem;
        }

        .vi-spreadsheet input.form-control:disabled,
        .vi-spreadsheet input.form-control[readonly] {
          background-color: #e9ecef;
          color: #6c757d;
          opacity: 1;
        }

        /* Resaltado de fila BASE solo en columna ndice */
        .vi-spreadsheet tr.vi-base-row > td {
          background-color: transparent;
        }

        /* PUNTO E - colores de la columna de conformidad */
        .vi-spreadsheet td.vi-at-valor.vi-at-valor--fail {
          color: #b02a37 !important;
          background-color: #f8d7da;
        }
        .vi-spreadsheet td.vi-at-valor.vi-at-valor--ok {
          color: #0f9d58 !important;
        }

        /* Colores para celdas de Error % (E%) segn rangos */
        .vi-spreadsheet .vi-e-ok {
          color: #198754; /* verde: dentro de tolerancia */
        }
        .vi-spreadsheet .vi-e-warn {
          color: #fd7e14; /* naranja intenso: advertencia */
        }
        .vi-spreadsheet .vi-e-error {
          color: #b02a37; /* rojo oscuro: error fuerte */
        }

        /* Resaltado suave de la celda enfocada (no agresivo) */
        .vi-spreadsheet input.form-control:focus,
        .vi-spreadsheet select.form-select:focus,
        .vi-spreadsheet .table-active input.form-control:focus,
        .vi-spreadsheet .table-active select.form-select:focus {
          background-color: #d6e7ff !important; /* azul ms visible al enfocar */
          box-shadow: 0 0 0 0.18rem rgba(13, 110, 253, 0.3) !important;
        }

        /* FIX: mantener visible el resaltado rojo de celdas con error */
        .vi-spreadsheet input.vi-error-cell {
          border-color: #dc3545 !important;
          background-color: #f8d7da !important;
          box-shadow: 0 0 0 0.15rem rgba(220, 53, 69, 0.25) !important;
        }

        /* -----------------------------
           Tamao de fuente del grid (filas) y ancho adaptable
           ----------------------------- */

        /* Variables base de fuente y ancho maximo de celda */
        .vi-spreadsheet {
          --vi-grid-font-size: 0.75rem;          /* tamano base de filas */
          --vi-grid-cell-max-width: 110px;       /* aprox. ancho actual maximo por columna */
          font-size: var(--vi-grid-font-size);
          table-layout: auto;
        }

        /* Escalones de tamano de fuente para las FILAS (no afecta titulos ni botones) */
        .vi-spreadsheet.vi-grid-font-0 { --vi-grid-font-size: 0.75rem; }
        .vi-spreadsheet.vi-grid-font-1 { --vi-grid-font-size: 0.8rem; }
        .vi-spreadsheet.vi-grid-font-2 { --vi-grid-font-size: 0.85rem; }
        .vi-spreadsheet.vi-grid-font-3 { --vi-grid-font-size: 0.9rem; }
        .vi-spreadsheet.vi-grid-font-4 { --vi-grid-font-size: 0.95rem; }
        .vi-spreadsheet.vi-grid-font-5 { --vi-grid-font-size: 1.0rem; }

        /* Encabezados y celdas (excepto ndice y medidor fijo):
           minimo igual al ttulo, pero pueden crecer hasta el ancho maximo actual */
        .vi-spreadsheet th:not(.vi-row-index):not(.vi-sticky-medidor),
        .vi-spreadsheet td:not(.vi-row-index):not(.vi-sticky-medidor) {
          white-space: nowrap;
          min-width: 64px;
          max-width: var(--vi-grid-cell-max-width);
        }

        /* Inputs y selects del grid: usan la fuente variable y se adaptan en alto.
           El ancho lo gobierna la celda (th/td), as pueden crecer con el contenido
           hasta el maximo definido arriba. */
        .vi-spreadsheet input.form-control {
          font-size: var(--vi-grid-font-size);
          height: calc(var(--vi-grid-font-size) * 2.3);
          width: 100%;
        }

        .vi-spreadsheet select.form-select {
          font-size: var(--vi-grid-font-size);
          width: 100%;
        }

        /* Valores de Q y E% siempre +2px respecto al resto de la fila */
        .vi-spreadsheet .vi-qe-value {
          font-size: calc(1em + 2px);
        }
        `}),i.jsx("div",{className:"modal-dialog modal-fluid",style:{maxWidth:"98vw",margin:"1vw"},children:i.jsx("div",{className:"modal-content",children:i.jsxs("form",{onSubmit:J(we),children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{className:"modal-title",children:a}),i.jsx("button",{type:"button",className:"btn-close",onClick:Fn,"aria-label":"Close"})]}),i.jsx("fieldset",{disabled:_,children:i.jsxs("div",{className:"modal-body p-2",children:[!C&&i.jsx("div",{className:"alert alert-warning py-1 mb-2",children:"Sin conexion. Los cambios se guardaran localmente hasta que vuelva la red."}),i.jsxs("div",{className:"row g-2 mb-2 align-items-end",children:[i.jsxs("div",{className:"col-auto",style:{maxWidth:"130px"},children:[i.jsx("label",{className:"form-label mb-1",children:"Filas"}),i.jsx("input",{type:"number",className:"form-control form-control-sm text-end",min:1,max:50,style:{maxWidth:"90px"},...L,ref:Y=>{Te.current=Y,L.ref(Y)},onBlur:Un,onKeyDown:Zt})]}),i.jsxs("div",{className:"col-md-4 d-flex flex-wrap gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:Ra,children:"+ Agregar Fila"}),i.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:rt,children:"- Quitar ltima fila"}),i.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:Kn,children:"Limpiar Todo"})]}),i.jsxs("div",{className:"col-md-4 d-flex justify-content-end gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:Se,children:"Aumentar tamao"}),i.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:w,children:"Reducir tamao"})]}),i.jsxs("div",{className:"col-md-2 text-end text-muted small",children:["Fila activa: #",he+1,". Desplaza el cursor o enfoca la fila para seleccionarla (Fila 1 se replica al resto)."]})]}),i.jsx("div",{className:"table-responsive border rounded",style:{maxHeight:"70vh",overflowY:"auto",overflowX:"auto"},children:i.jsxs("table",{className:`table table-bordered table-sm mb-0 align-middle text-center vi-spreadsheet vi-grid-font-${U}`,children:[i.jsxs("thead",{className:"table-light sticky-top z-1",children:[i.jsxs("tr",{children:[i.jsx("th",{className:"vi-row-index",style:{width:"30px"},children:"#"}),i.jsx("th",{className:"vi-sticky-medidor",style:{width:"120px"},children:"# Medidor"}),i.jsx("th",{style:{width:"90px"},children:"Estado"}),i.jsx("th",{className:"table-primary border-start border-dark",colSpan:9,children:"Q3"}),i.jsx("th",{className:"table-primary border-start border-dark",colSpan:9,children:"Q2"}),i.jsx("th",{className:"table-primary border-start border-dark",colSpan:9,children:"Q1"}),i.jsx("th",{className:"bg-warning text-dark border-start border-dark vi-header-at",style:{width:"100px"},children:"Conformidad"}),i.jsx("th",{className:"bg-light text-dark vi-header-quitar",style:{width:"40px"},children:"Quitar"})]}),i.jsxs("tr",{style:{fontSize:"0.75rem"},children:[i.jsx("th",{className:"vi-row-index"}),i.jsx("th",{className:"vi-sticky-medidor"}),i.jsx("th",{}),i.jsx("th",{className:"vi-min-width",title:"J",children:"Temp"}),i.jsx("th",{className:"vi-min-width",title:"K",children:"P.Ent"}),i.jsx("th",{className:"vi-min-width",title:"L",children:"P.Sal"}),i.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"M",children:"L.I."}),i.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"N",children:"L.F."}),i.jsx("th",{className:"vi-min-width",title:"O",children:"Vol"}),i.jsx("th",{className:"vi-min-width",title:"P",children:"Tpo"}),i.jsx("th",{title:"T (Caudal)",className:"bg-light border-start text-primary fw-bold vi-min-width",children:"Q3"}),i.jsx("th",{title:"U (Error %)",className:"bg-light text-danger  fw-bold vi-min-width",children:"E%"}),i.jsx("th",{className:"vi-min-width border-start border-dark",title:"V",children:"Temp"}),i.jsx("th",{className:"vi-min-width",title:"W",children:"P.Ent"}),i.jsx("th",{className:"vi-min-width",title:"X",children:"P.Sal"}),i.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"Y",children:"L.I."}),i.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"Z",children:"L.F."}),i.jsx("th",{className:"vi-min-width",title:"AA",children:"Vol"}),i.jsx("th",{className:"vi-min-width",title:"AB",children:"Tpo"}),i.jsx("th",{title:"AF (Caudal)",className:"bg-light border-start text-primary fw-bold vi-min-width",children:"Q2"}),i.jsx("th",{title:"AG (Error %)",className:"bg-light text-danger  fw-bold vi-min-width",children:"E%"}),i.jsx("th",{className:"vi-min-width border-start border-dark",title:"AH",children:"Temp"}),i.jsx("th",{className:"vi-min-width",title:"AI",children:"P.Ent"}),i.jsx("th",{className:"vi-min-width",title:"AJ",children:"P.Sal"}),i.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"AK",children:"L.I."}),i.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"AL",children:"L.F."}),i.jsx("th",{className:"vi-min-width",title:"AM",children:"Vol"}),i.jsx("th",{className:"vi-min-width",title:"AN",children:"Tpo"}),i.jsx("th",{title:"AR (Caudal)",className:"bg-light border-start text-primary fw-bold vi-min-width",children:"Q1"}),i.jsx("th",{title:"AS (Error %)",className:"bg-light text-danger  fw-bold vi-min-width",children:"E%"}),i.jsx("th",{title:"AT (Conformidad)",className:"bg-warning text-dark vi-header-at",children:"Estado"}),i.jsx("th",{className:"vi-header-quitar"})]})]}),i.jsx("tbody",{onKeyDown:ze,children:W.map((Y,K)=>{const je=K===0,Ve=Ft?.[K]||{},st=ie[K]||{},ot=Number(Ve.estado??0),Ke=ot>=1&&ot<=4,Nt=Ve.q3?.c6,Lt=Ve.q3?.c7_seconds,Dt=Ve.q3?.c4,xn=Ve.q3?.c5,Tt=Zf(Nt,Lt),ft=Gf(Dt,xn,Nt),bt=Ve.q2?.c6,Ht=Ve.q2?.c7_seconds,pn=Ve.q2?.c4,Tn=Ve.q2?.c5,rn=Zf(bt,Ht),Wt=Gf(pn,Tn,bt),jt=Ve.q1?.c6,Ln=Ve.q1?.c7_seconds,dn=Ve.q1?.c4,Sn=Ve.q1?.c5,Bn=Zf(jt,Ln),Gt=Gf(dn,Sn,jt),zt=VR(Ve.estado,ft,Wt,Gt),ps=[je?"vi-base-row":"",he===K?"table-active":""].filter(Boolean).join(" "),xa=q(`rowsData.${K}.medidor`),Nn=FR(Ve.medidor??""),Xn=Nn?h?.[Nn]?.message:"",Ga=st.medidor_format||st.medidor_dup||Xn||"",Us=!!Ga,Pa=(zt||"").toUpperCase(),gs=Pa==="NO CONFORME"?"vi-at-valor--fail":Pa==="CONFORME"?"vi-at-valor--ok":"";return i.jsxs("tr",{className:ps,onMouseEnter:()=>Ne(K),onClick:()=>Ne(K),onFocusCapture:()=>Ne(K),children:[i.jsx("td",{className:"small vi-row-index",children:K+1}),i.jsx("td",{className:"vi-sticky-medidor",children:i.jsx("input",{"data-row":K,"data-row-id":Y.id,...xa,size:1,style:{minWidth:"100%"},disabled:Ke,onInput:hn,className:["form-control form-control-sm p-1 text-center vi-medidor-input",Us?"vi-error-cell":""].filter(Boolean).join(" "),title:Ga||"",onChange:ln=>{const Sa=Z(`rowsData.${K}.medidor`);if(xa.onChange(ln),g?.(Sa),K===0)return;const Jn=ln.currentTarget.value.trim();if(!Jn){Le.current.delete(Y.id);return}const on=mv(et?.medidor??"",K,f);on&&on===Jn?Le.current.delete(Y.id):Le.current.set(Y.id,!0)}})}),i.jsx("td",{children:i.jsxs("select",{className:"form-select form-select-sm p-0 px-1",style:{fontSize:"0.75rem",height:"24px"},...q(`rowsData.${K}.estado`,{valueAsNumber:!0}),children:[i.jsx("option",{value:0,children:"0"}),i.jsx("option",{value:1,children:"1"}),i.jsx("option",{value:2,children:"2"}),i.jsx("option",{value:3,children:"3"}),i.jsx("option",{value:4,children:"4"}),i.jsx("option",{value:5,children:"5"})]})}),i.jsx("td",{className:"border-start border-dark",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!je||Ke,...q(`rowsData.${K}.q3.c1`,{setValueAs:In})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!je||Ke,...q(`rowsData.${K}.q3.c2`,{setValueAs:In})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!je||Ke,...q(`rowsData.${K}.q3.c3`,{setValueAs:In})})}),i.jsx("td",{className:"bg-white",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:hn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(st.q3_li?" vi-error-cell":""),title:st.q3_li||"",...q(`rowsData.${K}.q3.c4`,{setValueAs:In})})}),i.jsx("td",{className:"bg-white",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:hn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(st.q3_lf?" vi-error-cell":""),title:st.q3_lf||"",...q(`rowsData.${K}.q3.c5`,{setValueAs:In})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!je||Ke,...q(`rowsData.${K}.q3.c6`,{setValueAs:In})})}),i.jsx("td",{children:i.jsx("input",{type:"text",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!je||Ke,...q(`rowsData.${K}.q3.c7`),placeholder:"m,ss,ms"})}),i.jsx(Tl,{val:Tt}),i.jsx(Tl,{val:ft,isErr:!0,warnThreshold:2,failThreshold:5}),i.jsx("td",{className:"border-start border-dark",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!je||Ke,...q(`rowsData.${K}.q2.c1`,{setValueAs:In})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!je||Ke,...q(`rowsData.${K}.q2.c2`,{setValueAs:In})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!je||Ke,...q(`rowsData.${K}.q2.c3`,{setValueAs:In})})}),i.jsx("td",{className:"bg-white",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:hn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(st.q2_li?" vi-error-cell":""),title:st.q2_li||"",...q(`rowsData.${K}.q2.c4`,{setValueAs:In})})}),i.jsx("td",{className:"bg-white",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:hn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(st.q2_lf?" vi-error-cell":""),title:st.q2_lf||"",...q(`rowsData.${K}.q2.c5`,{setValueAs:In})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!je||Ke,...q(`rowsData.${K}.q2.c6`,{setValueAs:In})})}),i.jsx("td",{children:i.jsx("input",{type:"text",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!je||Ke,...q(`rowsData.${K}.q2.c7`),placeholder:"m,ss,ms"})}),i.jsx(Tl,{val:rn}),i.jsx(Tl,{val:Wt,isErr:!0,warnThreshold:2,failThreshold:5}),i.jsx("td",{className:"border-start border-dark",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!je||Ke,...q(`rowsData.${K}.q1.c1`,{setValueAs:In})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!je||Ke,...q(`rowsData.${K}.q1.c2`,{setValueAs:In})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!je||Ke,...q(`rowsData.${K}.q1.c3`,{setValueAs:In})})}),i.jsx("td",{className:"bg-white",children:i.jsx("input",{type:"text",inputMode:"decimal",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:hn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(st.q1_li?" vi-error-cell":""),title:st.q1_li||"",...q(`rowsData.${K}.q1.c4`,{setValueAs:In})})}),i.jsx("td",{className:"bg-white",children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Ke,onInput:hn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(st.q1_lf?" vi-error-cell":""),title:st.q1_lf||"",...q(`rowsData.${K}.q1.c5`,{setValueAs:In})})}),i.jsx("td",{children:i.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!je||Ke,...q(`rowsData.${K}.q1.c6`,{setValueAs:In})})}),i.jsx("td",{children:i.jsx("input",{type:"text",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!je||Ke,...q(`rowsData.${K}.q1.c7`),placeholder:"m,ss,ms"})}),i.jsx(Tl,{val:Bn}),i.jsx(Tl,{val:Gt,isErr:!0,warnThreshold:5,failThreshold:5}),i.jsx("td",{className:`bg-light border-start fw-bold small text-center vi-at-valor ${gs}`,children:zt}),i.jsx("td",{className:"text-center align-middle bg-light",children:i.jsx("button",{type:"button",className:"btn btn-danger btn-sm p-0",style:{width:"20px",height:"20px",lineHeight:"1"},onClick:ln=>{ln.stopPropagation(),sn(K)},disabled:W.length<=1,title:"Eliminar esta fila",children:""})})]},Y.id)})})]})})]})}),i.jsxs("div",{className:"modal-footer py-1",children:[i.jsx("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:Fn,children:"Cancelar"}),i.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",ref:P,disabled:Hn||_,children:I&&C?"Reintentar guardar":"Guardar Bancada"})]})]})})})]}),i.jsx("div",{className:"modal-backdrop show vi-backdrop"})]}):null}function gu({show:e,title:a="Contrasea para proteger Excel",confirmLabel:s="Generar Excel",helpText:l="Se usar para proteger estructura y escritura del libro. No habr contrasea de apertura.",onClose:c,onConfirm:d}){const[f,h]=b.useState(""),g=b.useRef(null),p=f.trim().length>0;if(b.useEffect(()=>{e&&(h(""),setTimeout(()=>g.current?.focus(),0))},[e]),b.useEffect(()=>{if(!e)return;const x=N=>{N.key==="Escape"&&c()};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,c]),!e)return null;const v=x=>{x.preventDefault(),p&&d(f.trim())};return i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"pwdModalTitle",onClick:x=>{x.target===x.currentTarget&&c()},children:i.jsx("div",{className:"modal-dialog",children:i.jsxs("form",{className:"modal-content",onSubmit:v,children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{id:"pwdModalTitle",className:"modal-title",children:a}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:c})]}),i.jsx("div",{className:"modal-body",children:i.jsxs("div",{className:"mb-3",children:[i.jsx(Ji,{label:"Contrasea",inputId:"pwd",value:f,onChange:x=>h(x.target.value),inputRef:g,minLength:1,required:!0}),i.jsx("div",{className:"form-text",children:l})]})}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:c,children:"Cancelar"}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!p,children:s})]})]})})})}async function GR(e,a){try{const{data:s}=await Ye.put(`/oi/${e}`,a);return s}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo actualizar la OI",c=new Error(l);throw c.status=s?.response?.status,c}}async function PR(e,a){try{const{data:s}=await Ye.patch(`/oi/${e}/code`,{code:a});return s}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo actualizar el codigo de la OI",c=new Error(l);throw c.status=s?.response?.status,c}}async function QR(e,a){try{const{data:s}=await Ye.patch(`/oi/${e}/restore-updated-at`,a);return s}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo restaurar la fecha de la OI",c=new Error(l);throw c.status=s?.response?.status,c}}async function YR(e){try{const{data:a}=await Ye.post("/oi",e);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo crear el OI";throw new Error(s)}}async function hv(e,a){try{const{data:s}=await Ye.post(`/oi/${e}/bancadas`,a);return s}catch(s){const l=s?.response?.data?.detail;let c=s?.message??"No se puedo agregar la bancada";typeof l=="string"?c=l:l&&typeof l=="object"&&(c=l.message??l.detail??c);const d=s?.response?.data?.duplicates??(l&&typeof l=="object"?l.duplicates:void 0),f=new Error(c);throw f.status=s?.response?.status,Array.isArray(d)&&(f.duplicates=d),f}}async function KR(e,a){try{const{data:s}=await Ye.put(`/oi/bancadas/${e}`,a);return s}catch(s){const l=s?.response?.data?.detail;let c=s?.message??"No se pudo actualizar la bancada";typeof l=="string"?c=l:l&&typeof l=="object"&&(c=l.message??l.detail??c);const d=s?.response?.data?.duplicates??(l&&typeof l=="object"?l.duplicates:void 0),f=new Error(c);throw f.status=s?.response?.status,Array.isArray(d)&&(f.duplicates=d),f}}async function XR(e,a){try{const{data:s}=await Ye.patch(`/oi/bancadas/${e}/saved_at`,a);return s}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo actualizar la fecha de la bancada",c=new Error(l);throw c.status=s?.response?.status,c}}async function JR(e,a){try{const{data:s}=await Ye.put(`/oi/bancadas/${e}/restore`,a);return s}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo restaurar la bancada",c=new Error(l);throw c.status=s?.response?.status,c}}async function pv(e){try{await Ye.delete(`/oi/bancadas/${e}`)}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo eliminar la bancada";throw new Error(s)}}async function A0(e,a){let s;try{s=await Ye.post(`/oi/${e}/excel`,{password:a},{responseType:"blob"})}catch(p){let v=p?.message??"No se pudo generar el Excel";const x=p?.response?.data;if(x instanceof Blob)try{const N=await x.text();try{const j=JSON.parse(N)?.detail;typeof j=="string"?v=j:Array.isArray(j)&&j.length>0?v=j.map(_=>String(_?.msg??"")).filter(Boolean).join(", "):N&&(v=N)}catch{N&&(v=N)}}catch{}else v=p?.response?.data?.detail??v;throw new Error(v)}const l=s.data,f=s.headers["content-disposition"]?.match(/filename="(.+?)"/i)?.[1]??`OI-${e}.xlsx`,h=URL.createObjectURL(l),g=document.createElement("a");g.href=h,g.download=f,document.body.appendChild(g),g.click(),URL.revokeObjectURL(h),g.remove()}async function WR(e){await Ye.delete(`/oi/${e}`)}async function eT(e){try{const{data:a}=await Ye.post(`/oi/${e}/lock`);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo bloquear la OI",l=new Error(s);throw l.status=a?.response?.status,l}}async function Ac(e,a){try{const s=a?{params:{reason:a}}:void 0,{data:l}=await Ye.delete(`/oi/${e}/lock`,s);return l}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo liberar la OI",c=new Error(l);throw c.status=s?.response?.status,c}}async function tT(e,a){try{const{data:s}=await Ye.patch(`/oi/${e}/saved_at`,a);return s}catch(s){const l=s?.response?.data?.detail??s?.message??"No se pudo actualizar la fecha de guardado",c=new Error(l);throw c.status=s?.response?.status,c}}async function Pf(e){try{const{data:a}=await Ye.get(`/oi/${e}/full`);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se puedo cargar el OI";throw new Error(s)}}async function nT(e){try{const{data:a}=await Ye.get("/oi",{params:{q:e.q||void 0,date_from:e.dateFrom||void 0,date_to:e.dateTo||void 0,limit:e.limit,offset:e.offset,responsable_tech_number:e.responsableTechNumber||void 0},headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo obtener el listado de OI";throw new Error(s)}}async function aT(e){let a;try{a=await Ye.get("/oi/export/csv",{params:{q:e.q||void 0,date_from:e.dateFrom||void 0,date_to:e.dateTo||void 0,responsable_tech_number:e.responsableTechNumber||void 0},responseType:"blob"})}catch(f){let h=f?.message??"No se pudo exportar el CSV";const g=f?.response?.data;if(g instanceof Blob)try{const v=await g.text();try{const N=JSON.parse(v)?.detail;typeof N=="string"?h=N:Array.isArray(N)&&N.length>0?h=N.map(I=>String(I?.msg??"")).filter(Boolean).join(", "):v&&(h=v)}catch{v&&(h=v)}}catch{}else h=f?.response?.data?.detail??h;const p=new Error(h);throw p.status=f?.response?.status,p}const s=a.data,d=a.headers["content-disposition"]?.match(/filename="(.+?)"/i)?.[1]??"oi_list.csv";return{blob:s,filename:d}}async function sT(){try{const{data:e}=await Ye.get("/oi/responsables");return e}catch(e){const a=e?.response?.data?.detail??e?.message??"No se pudo obtener responsables";throw new Error(a)}}async function Qf(e){try{const{data:a}=await Ye.get(`/oi/${e}`);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo obtener el OI";throw new Error(s)}}const ih="vi.currentOI";function Pi(e){sessionStorage.setItem(ih,JSON.stringify(e))}function gv(){const e=sessionStorage.getItem(ih);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function Em(){sessionStorage.removeItem(ih)}const Yf=e=>{if(e)return{c1:e.c1??null,c2:e.c2??null,c3:e.c3??null,c4:e.c4??null,c5:e.c5??null,c6:e.c6??null,c7:e.c7??"",c7_seconds:e.c7_seconds??null,caudal:e.caudal??null,error:e.error??null}},Kf=e=>{if(e)return{c1:e.c1??null,c2:e.c2??null,c3:e.c3??null,c4:e.c4??null,c5:e.c5??null,c6:e.c6??null,c7:e.c7??null,c7_seconds:e.c7_seconds??null,caudal:e.caudal??null,error:e.error??null}},rT=e=>({medidor:e.medidor??"",estado:e.estado??0,q3:Yf(e.q3),q2:Yf(e.q2),q1:Yf(e.q1)}),lT=e=>({medidor:e.medidor??"",estado:e.estado??0,q3:Kf(e.q3),q2:Kf(e.q2),q1:Kf(e.q1)}),C0=e=>e.rows_data&&e.rows_data.length>0?e.rows_data:Array.from({length:e.rows}).map((a,s)=>({medidor:s===0?e.medidor??"":"",estado:e.estado,q3:s===0?e.q3??void 0:void 0,q2:s===0?e.q2??void 0:void 0,q1:s===0?e.q1??void 0:void 0})),iT=e=>e.reduce((a,s)=>a+(s.rows??0),0),oT=e=>JSON.parse(JSON.stringify(e)),bv=e=>JSON.stringify({medidor:e.medidor??null,estado:e.estado??0,rows:e.rows??0,rows_data:e.rows_data??null,q1:e.q1??null,q2:e.q2??null,q3:e.q3??null}),yv=e=>e.rows_data&&e.rows_data.length>0?e.rows_data:C0(e),cT=(e,a)=>e==="view"&&a?"view":"edit",vv=e=>{if(!e)return"";const s=/([zZ]|[+-]\d{2}:?\d{2})$/.test(e)?e:`${e}Z`,l=new Date(s);if(Number.isNaN(l.getTime()))return"";const c=d=>d.toString().padStart(2,"0");return`${l.getFullYear()}-${c(l.getMonth()+1)}-${c(l.getDate())}T${c(l.getHours())}:${c(l.getMinutes())}`},uT=e=>{if(!e)return"";const a=new Date(e);return Number.isNaN(a.getTime())?"":a.toISOString().replace("Z","")},O0=e=>(e??"").trim().toUpperCase(),dT=e=>{const a={};e.forEach(l=>{const c=O0(l.medidor);c&&(a[c]||(a[c]={items:[],ids:[]}),l.bancada_item!=null&&!a[c].items.includes(l.bancada_item)&&a[c].items.push(l.bancada_item),l.bancada_id!=null&&!a[c].ids.includes(l.bancada_id)&&a[c].ids.push(l.bancada_id))});const s={};return Object.entries(a).forEach(([l,c])=>{let d="Este medidor existe en otra bancada de esta misma OI.";c.items.length>0&&(d=`Este medidor existe en la bancada #${[...c.items].sort((h,g)=>h-g).join(", ")} de esta misma OI.`),s[l]={message:d,bancadaItem:c.items[0],bancadaId:c.ids[0]}}),s},fT="Tienes una OI abierta en edicion. Cierra la OI antes de salir. Deseas salir de todas formas?",mT=(e,a=!0)=>{const l=b.useContext(Ha)?.navigator;b.useEffect(()=>{if(!a||!l||typeof l.block!="function")return;const c=l.block(d=>{const f={...d,retry(){c(),d.retry()}};e(f)});return c},[l,e,a])},hT=e=>{const a=Ye.defaults.baseURL??(typeof window<"u"?window.location.origin:"");return`${String(a).replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`},pT=()=>{const[e,a]=b.useState(typeof navigator<"u"?navigator.onLine:!0);return b.useEffect(()=>{const s=()=>a(!0),l=()=>a(!1);return window.addEventListener("online",s),window.addEventListener("offline",l),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",l)}},[]),e},Cc=e=>{if(e?.status??e?.response?.status)return!1;const s=e?.code??e?.name;return s==="ERR_NETWORK"||s==="ECONNABORTED"?!0:!e?.response};function xv(){const{toast:e}=Qr(),a=Pr(),s=la(),{oiId:l}=jw(),[c,d]=Pv(),f=pT(),{data:h}=Hr({queryKey:["catalogs"],queryFn:Wm}),{register:g,handleSubmit:p,watch:v,formState:{errors:x},reset:N,getValues:I}=eu({resolver:_O(BR),defaultValues:{oi:`OI-0001-${new Date().getFullYear()}`,numeration_type:"correlativo",pma:16,q3:2.5,alcance:80}}),j=kn(),_=j?.userId??null,C=j?.bancoId??Xi(),q=$a(j?.role,j?.username)!=="technician",T=gv(),J=l?Number(l):null,D=Number.isFinite(J)?J:null,R=D!=null||(T?.id??null)!=null,Z=(c.get("mode")||"").toLowerCase(),L=cT(Z,R),W=L==="view",ue=L==="edit",[Ae,xe]=b.useState(!1),[he,Ne]=b.useState(!1),[ke,Te]=b.useState(null),[U,$]=b.useState(null),[X,ye]=b.useState(!1),Se=he||W,[w,P]=b.useState(!1),[ie,M]=b.useState(null),[ce,pe]=b.useState(null),[De,$e]=b.useState(null),[fe,Le]=b.useState(!1),[Ie,Ge]=b.useState(""),[dt,ze]=b.useState(null),[Ze,me]=b.useState("bancada"),[Fe,Ce]=b.useState(!1),[Je,A]=b.useState(!1),[V,O]=b.useState(null),Q=b.useRef([]),G=b.useRef(null),se=b.useRef(!1),Oe=b.useRef(!1),Be=b.useRef(!1),ae=b.useRef(null),Me=b.useRef(!1),He=b.useRef(f),at=b.useRef(!1),Jt=b.useRef(!1),[we,et]=b.useState(null),[Ft,Et]=b.useState(null),[Rn,$n]=b.useState([]),[Ra,sn]=b.useState(!1),[rt,Kn]=b.useState(null),[Un,Zt]=b.useState(!1),[Fn,Hn]=b.useState(null),[Y,K]=b.useState(0),[je,Ve]=b.useState({}),[st,ot]=b.useState({}),Ke=s.state?.returnTo,Nt=()=>typeof Ke=="string"&&Ke?Ke:"/oi/list",Lt=E=>{const H=new URLSearchParams(c);H.set("mode",E),d(H,{replace:!0})},Dt="new",xn=15,Tt=E=>E?`bancada-${E.id}`:Dt,ft=E=>E==null?!1:typeof E=="string"?E.trim()!=="":typeof E=="number"?Number.isFinite(E):!0,bt=E=>E==="c7_seconds"||E==="caudal"||E==="error",Ht=E=>E?Object.entries(E).some(([H,ge])=>bt(H)?!1:ft(ge)):!1,pn=E=>!E||!Array.isArray(E.rowsData)?!1:E.rowsData.some(H=>{if(!H)return!1;if(Number(H.estado??0)!==0)return!0;const Ue=H.medidor;return typeof Ue=="string"&&Ue.trim()!==""?!0:Ht(H.q3)||Ht(H.q2)||Ht(H.q1)}),Tn=(E=xn)=>Array.from({length:E}).map(()=>({medidor:"",estado:0,q3:{},q2:{},q1:{}})),rn=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`draft-${Date.now()}`,Wt=E=>({draftId:rn(),draftCreatedAt:new Date().toISOString(),estado:0,rows:xn,rowsData:Tn(),version:null}),jt=E=>{const H=new URLSearchParams(s.search);H.set("mode","edit");const ge=s.pathname==="/oi"||s.pathname==="/oi/"?E?`/oi/${E}`:"/oi":s.pathname,Ue=H.toString();return Ue?`${ge}?${Ue}`:ge},Ln=(E,H)=>!E||!_||C==null?null:{version:1,ts:new Date().toISOString(),userId:_,bankId:C,oiId:E,oiCode:I("oi")??null,returnTo:jt(E),mode:"edit",modal:H},dn=()=>{if(Ra)return rt?{type:"bancada",bancadaId:rt.id}:{type:"bancada",isNew:!0}},Sn=E=>Lf({userId:_,bankId:C,oiId:E,type:"bancada",isNew:!0}),Bn=E=>{const H=Sn(E);if(!H)return null;const ge=Bf(H);if(!ge||!_||C==null||!E||ge.userId!==_||ge.bankId!==C||ge.oiId!==E)return null;const Ue=ge?.data??null;return pn(Ue)?Ue:(ur(H),null)},Gt=(E,H)=>{const ge=Sn(E);if(!ge)return;if(!H||!pn(H)){ur(ge);return}if(!_||C==null||!E)return;const Ue={version:1,ts:new Date().toISOString(),userId:_,bankId:C,oiId:E,isNew:!0,data:H},lt=Ln(E,{type:"bancada",isNew:!0});Gi(ge,Ue,lt)},zt=E=>Lf({userId:_,bankId:C,oiId:E,type:"header"}),ps=E=>{if(!E)return null;const H=Bf(E);return!H||!_||C==null||H.userId!==_||H.bankId!==C||we!=null&&H.oiId!==we?null:H?.data??null},xa=(E,H)=>{if(!E||!_||C==null)return;const ge=we??0,Ue={version:1,ts:new Date().toISOString(),userId:_,bankId:C,oiId:ge,data:H},lt=Ln(we,dn());Gi(E,Ue,lt)},Nn=E=>{E&&ur(E)},Xn=E=>{const H={};return E.q3!=null&&(H.q3=Number(E.q3)),E.alcance!=null&&(H.alcance=Number(E.alcance)),E.pma!=null&&(H.pma=Number(E.pma)),E.numeration_type&&(H.numeration_type=E.numeration_type),H},Ga=(E,H)=>Lf({userId:_,bankId:C,oiId:E,type:"bancada",bancadaId:H}),Us=(E,H)=>{const ge=Ga(E,H);if(!ge)return null;const Ue=Bf(ge);if(!Ue||!_||C==null||!E||!H||Ue.userId!==_||Ue.bankId!==C||Ue.oiId!==E)return null;const lt=Ue?.data??null;return pn(lt)?lt:(ur(ge),null)},Pa=(E,H,ge)=>{const Ue=Ga(E,H);if(!Ue)return;if(!pn(ge)){ur(Ue);return}if(!_||C==null||!E||!H)return;const lt={version:1,ts:new Date().toISOString(),userId:_,bankId:C,oiId:E,bancadaId:H,data:ge},Ot=Ln(E,{type:"bancada",bancadaId:H});Gi(Ue,lt,Ot)},gs=(E,H)=>{const ge=Ga(E,H);ge&&ur(ge)},ln=zt(we);b.useEffect(()=>{h&&N(E=>({...E,q3:h.q3[0],alcance:h.alcance[0],pma:16}))},[h,N]),b.useEffect(()=>{const E=gv(),H=D??E?.id??null;if(!H){et(null),$n([]),Q.current=[],G.current=null,Hn(null),K(0),Et(null),pe(null),$e(null),P(!1),Ne(!1),Te(null),$(null),ye(!1),M(null);return}(async()=>{try{const ge=await Pf(H);et(ge.id),Pi({id:ge.id,code:ge.code}),$n(ge.bancadas??[]),Q.current=oT(ge.bancadas??[]),G.current=ge.updated_at??null,Hn(ge.medidores_usuario??null),K(ge.medidores_total_code??0),pe(ge.saved_at??null),$e(ge.created_at??null),Et(ge.updated_at??ge.created_at);const Ue={oi:ge.code,q3:ge.q3,alcance:ge.alcance,pma:ge.pma,numeration_type:ge.numeration_type??"correlativo"};N(Ue),P(!1),Ne(ge.read_only_for_current_user??!1),Te(ge.locked_by_full_name??null),$(ge.locked_by_user_id??null),ye((ge.locked_by_user_id??null)===_),M(Ue)}catch{Em()}})()},[N,_,D]),b.useEffect(()=>{if(!we||st[Dt])return;const E=Bn(we);E&&(ot(H=>({...H,[Dt]:E})),e({kind:"info",message:"Se restauro un borrador local."}))},[we,st,e]),b.useEffect(()=>{if(!we||!_||!ue)return;let E=!1;return(async()=>{const H=ge=>{Ne(ge?.read_only_for_current_user??!1),Te(ge?.locked_by_full_name??null),$(ge?.locked_by_user_id??null),ye((ge?.locked_by_user_id??null)===_)};try{const ge=await eT(we);if(E)return;H(ge)}catch(ge){if(E)return;const Ue=ge?.status??ge?.response?.status;let lt=null;try{const pt=await Pf(we);if(E)return;lt=pt.locked_by_full_name??null,H({read_only_for_current_user:!0,locked_by_full_name:lt,locked_by_user_id:pt.locked_by_user_id??null})}catch{Ne(!0),ye(!1)}const Ot=lt?`La OI est? siendo editada por ${lt}. Se abre en modo lectura.`:ge?.message??"La OI est? siendo editada por otro usuario. Int?ntelo m?s tarde.";e({kind:Ue===423||Ue===409?"warning":"error",title:Ue===423||Ue===409?"OI bloqueada":"Error",message:Ot}),Ne(!0),ye(!1),Z!=="view"&&Lt("view")}})(),()=>{E=!0}},[we,_,ue]),b.useEffect(()=>()=>{we&&X&&Ac(we).catch(()=>{})},[we,X]),b.useEffect(()=>{we&&(!X||Se||!ue||uE(we))},[X,we,Se,ue]),b.useEffect(()=>{Oe.current=!1,Be.current=!1,A(!1),Me.current=!1,Jt.current=!1},[we]),b.useEffect(()=>{if(!He.current&&f){if(!!!kn()?.token){e({kind:"warning",message:"Conexion restablecida, pero debes iniciar sesion para guardar."}),He.current=f;return}(Be.current||Je)&&e({kind:"info",message:"Conexion restablecida. Puedes reintentar guardar."})}He.current=f},[f,Je,e]),b.useEffect(()=>{const E=()=>{e({kind:"warning",message:"Sesion expirada. Inicia sesion para guardar. Tu borrador esta guardado."})};return window.addEventListener("medileser:auth-expired",E),()=>window.removeEventListener("medileser:auth-expired",E)},[e]),b.useEffect(()=>{const E=hE();if(!E){O(null),at.current=!1;return}const H=`${s.pathname}${s.search}`,ge=E.route===H,Ue=E.oiId==null||E.oiId===we;if(!ge&&!Ue){O(null),at.current=!1;return}O(E),E.type==="save_bancada"&&A(!0),E.type==="save_oi"&&(Be.current=!0),at.current||(e({kind:"info",message:"Sesion restaurada. Reintenta guardar."}),at.current=!0)},[s.pathname,s.search,we,e]);const Sa=ue&&!Se&&(w||!we);b.useEffect(()=>{if(!Sa||Me.current)return;const E=ps(ln);if(!E)return;const H=I();N({...H,...E,numeration_type:E.numeration_type??H.numeration_type??"correlativo"}),Me.current=!0,e({kind:"info",message:"Se restauro un borrador local."})},[Sa,ln,I,N,e]),b.useEffect(()=>{if(!Sa)return;const E=v(H=>{ae.current&&window.clearTimeout(ae.current),ae.current=window.setTimeout(()=>{xa(ln,Xn(H))},400)});return()=>{E.unsubscribe(),ae.current&&window.clearTimeout(ae.current)}},[v,Sa,ln]);const Jn=b.useMemo(()=>Object.keys(st).length>0,[st]),on=ue&&!Se&&(X||w||Jn);b.useEffect(()=>{if(!on)return;const E=H=>{if(!se.current)return H.preventDefault(),H.returnValue="",""};return window.addEventListener("beforeunload",E),()=>window.removeEventListener("beforeunload",E)},[on]),mT(E=>{if(!on){E.retry();return}if(se.current){E.retry();return}if(E.location.pathname===s.pathname){E.retry();return}window.confirm(fT)&&E.retry()},on),b.useEffect(()=>{if(!we||!X||Se||!ue)return;const E=()=>{if(se.current||Oe.current)return;Oe.current=!0;const ge=kn()?.token,Ue=hT(`/oi/${we}/close`);fetch(Ue,{method:"POST",headers:ge?{Authorization:`Bearer ${ge}`}:void 0,keepalive:!0}).catch(()=>{})},H=()=>{E()};return window.addEventListener("pagehide",H),()=>window.removeEventListener("pagehide",H)},[we,X,Se,ue]);const Vn=v("pma"),pr=b.useMemo(()=>IR(Number(Vn)),[Vn]),ns=v("numeration_type")??"correlativo",ia=async E=>{try{xe(!0);const H=kn();if(!H)throw new Error("Sesin no vlida");const ge=H.bancoId;if(ge==null)throw new Error("Debe seleccionar un banco para crear una OI.");const Ue={code:E.oi,q3:Number(E.q3),alcance:Number(E.alcance),pma:Number(E.pma),banco_id:ge,tech_number:H.techNumber,numeration_type:E.numeration_type??"correlativo"},lt=await YR(Ue);return et(lt.id),Et(lt.updated_at??lt.created_at),Hn(lt.medidores_usuario??0),K(lt.medidores_total_code??0),pe(lt.saved_at??null),$e(lt.created_at??null),Pi({id:lt.id,code:lt.code}),M(E),Be.current=!1,Nn(zt(null)),Nn(zt(lt.id)),Ol(),O(null),e({kind:"success",title:"OI creada",message:`${lt.code} (#${lt.id})`}),!0}catch(H){return Cc(H)?(Be.current=!0,xa(ln,Xn(E)),e({kind:"warning",title:"Sin conexion",message:"Sin conexion. Cambios guardados localmente. Reintenta al reconectar."}),!1):Zi(H)?(Be.current=!0,xa(ln,Xn(E)),!1):(e({kind:"error",title:"Error",message:H?.message??"Error creando OI"}),!1)}finally{xe(!1)}},Qa=async E=>{if(!we)return!1;if(Se)return e({kind:"warning",title:"Solo lectura",message:"La OI est bloqueada por otro usuario."}),!1;try{if(xe(!0),!we)throw new Error("No hay OI seleccionada para actualizar.");const H=E.oi?.trim(),ge=E.numeration_type??"correlativo",Ue=ie?.numeration_type??"correlativo",lt=!ie||Number(E.q3)!==Number(ie.q3)||Number(E.alcance)!==Number(ie.alcance)||Number(E.pma)!==Number(ie.pma)||ge!==Ue,Ot=q&&!!H&&H!==(ie?.oi??""),pt=!Ot||lt,wn=_t=>{Et(_t.updated_at??_t.created_at),pe(_t.saved_at??null),$e(_t.created_at??null),_t.code&&Pi({id:_t.id,code:_t.code}),$(_t.locked_by_user_id??null),Te(_t.locked_by_full_name??null),Ne(_t.read_only_for_current_user??!1),ye((_t.locked_by_user_id??null)===_)};let oa=null;if(pt){if(!Ft)throw new Error("No se pudo determinar la version actual de la OI. Recargue la pagina e intentelo de nuevo.");const _t={q3:Number(E.q3),alcance:Number(E.alcance),pma:Number(E.pma),numeration_type:ge,updated_at:Ft};oa=await GR(we,_t),wn(oa)}if(Ot&&H)try{const _t=await PR(we,H);oa=_t,wn(_t)}catch(_t){if(Cc(_t)||Zi(_t))throw _t;const Jr=_t?.status??_t?.response?.status;return e(Jr===409?{kind:"error",title:"Conflicto",message:"Ya existe una OI con ese codigo."}:Jr===403?{kind:"error",title:"No autorizado",message:"No autorizado."}:Jr===422||Jr===400?{kind:"error",title:"Formato",message:"Formato de OI invalido. Debe ser OI-####-YYYY."}:{kind:"error",title:"Error",message:_t?.message??"Error actualizando OI"}),!1}return oa?(M({...E,oi:oa.code,numeration_type:ge}),P(!1),Be.current=!1,Nn(ln),Ol(),O(null),e({kind:"success",title:"OI actualizada",message:oa.code??E.oi}),!0):(P(!1),Be.current=!1,Nn(ln),Ol(),O(null),e({kind:"success",title:"OI actualizada",message:E.oi}),!0)}catch(H){if(Cc(H))return Be.current=!0,xa(ln,Xn(E)),e({kind:"warning",title:"Sin conexion",message:"Sin conexion. Cambios guardados localmente. Reintenta al reconectar."}),!1;if(Zi(H))return Be.current=!0,xa(ln,Xn(E)),!1;const ge=H?.status??H?.response?.status;return e(ge===409?{kind:"error",title:"Conflicto",message:"La OI fue modificada por otro usuario. Recargue la pgina y vuelva a intentar."}:{kind:"error",title:"Error",message:H?.message??"Error actualizando OI"}),!1}finally{xe(!1)}},gr=!!we&&w&&!Se,gn=()=>Ve({}),br=E=>{const H=O0(E);H&&Ve(ge=>{if(!ge[H])return ge;const Ue={...ge};return delete Ue[H],Ue})},as=()=>{if(Se){e({kind:"warning",title:"Solo lectura",message:"No puede agregar bancadas mientras la OI est bloqueada."});return}if(!we)return;gn(),A(!1);const E=Bn(we),H=E??Wt();ot(ge=>({...ge,[Dt]:H})),Gt(we,H),E&&e({kind:"info",message:"Se restauro un borrador local."}),Kn(null),sn(!0)},bs=E=>{if(Se&&!W){e({kind:"warning",title:"Solo lectura",message:"No puede editar bancadas mientras la OI est? bloqueada."});return}gn(),A(!1);const H=Us(we,E.id);if(H){const ge=Tt(E);ot(Ue=>({...Ue,[ge]:H})),e({kind:"info",message:"Se restauro un borrador local."})}Kn(E),sn(!0)};b.useEffect(()=>{if(!we||Jt.current)return;const E=aE();if(E&&!(!_||C==null)&&!(E.userId!==_||E.bankId!==C)&&E.oiId===we){if(E.modal?.type==="bancada"){if(E.modal.isNew){Jt.current=!0,qf(),as();return}if(E.modal.bancadaId){const H=Rn.find(ge=>ge.id===E.modal?.bancadaId);if(!H)return;Jt.current=!0,qf(),bs(H);return}}Jt.current=!0,qf()}},[_,C,Rn,we,as,bs]);const ss=b.useMemo(()=>{const E=Tt(rt),H=st[E];if(H){const lt=H.version??rt?.updated_at??rt?.created_at??null;return{...H,version:lt}}if(!rt)return;const Ue=C0(rt).map(rT);return{estado:rt.estado,rows:Ue.length||rt.rows,rowsData:Ue,version:rt.updated_at??rt.created_at??null}},[rt,st]),rs=async E=>{if(we){if(Se){e({kind:"warning",title:"Solo lectura",message:"No puede guardar bancadas mientras la OI est bloqueada."});return}gn(),A(!1);try{xe(!0);const H=E.draftCreatedAt??st[Dt]?.draftCreatedAt,ge={estado:Number(E.estado??0),rows:Number(E.rowsData.length),rows_data:E.rowsData.map(lT)};if(rt){const Ue=E.version??rt.updated_at??rt.created_at??null;if(!Ue)throw new Error("No se pudo determinar la versin actual de la bancada. Recargue y vuelva a intentar.");const lt={...ge,updated_at:Ue},Ot=await KR(rt.id,lt);$n(pt=>pt.map(wn=>wn.id===Ot.id?Ot:wn)),Et(Ot.updated_at??Ot.created_at??Ft),Hn(null),gs(we,rt.id),ot(pt=>{const wn=`bancada-${rt.id}`,{[wn]:oa,..._t}=pt;return _t}),e({kind:"success",message:"Bancada actualizada"})}else{H&&(ge.draft_created_at=H);const Ue=await hv(we,ge);$n(lt=>[...lt,Ue]),Et(Ue.updated_at??Ue.created_at??Ft),Hn(null),ot(lt=>{const{new:Ot,...pt}=lt;return pt}),Gt(we,null),e({kind:"success",message:"Bancada agregada"})}try{const Ue=await Qf(we);Hn(Ue.medidores_usuario??null),K(Ue.medidores_total_code??Y),pe(Ue.saved_at??null),$e(Ue.created_at??null)}catch{}$(j?.userId??U),Te(j?.fullName??ke),ye(_!==null),Ne(!1),sn(!1),Kn(null),Ol(),O(null),A(!1)}catch(H){if(Cc(H)){rt?Pa(we,rt.id,E):Gt(we,E),A(!0),e({kind:"warning",title:"Sin conexion",message:"Sin conexion. La bancada se guardo localmente. Reintenta cuando vuelva la red."});return}if(Zi(H)){rt?Pa(we,rt.id,E):Gt(we,E),A(!0);return}const ge=H?.status??H?.response?.status;if(ge===409)e({kind:"error",title:"Conflicto",message:"La bancada fue modificada por otro usuario. Recargue la pgina y vuelva a intentar."});else if(ge===400){const Ue=Array.isArray(H?.duplicates)?H.duplicates:Array.isArray(H?.response?.data?.duplicates)?H.response.data.duplicates:[];Ue.length>0&&Ve(dT(Ue)),e({kind:"warning",title:"Validacion",message:H?.message??"Error guardando bancada"})}else e({kind:"error",title:"Error",message:H?.message??"Error guardando bancada"})}finally{xe(!1)}}},Xr=async E=>{if(confirm(`Eliminar bancada #${E.item}?`)){if(Se){e({kind:"warning",title:"Solo lectura",message:"No puede eliminar bancadas mientras la OI est bloqueada."});return}try{if(xe(!0),!we)throw new Error("No hay OI cargada.");await pv(E.id),$n(ge=>ge.filter(Ue=>Ue.id!==E.id)),Hn(null),ot(ge=>{const Ue=`bancada-${E.id}`,{[Ue]:lt,...Ot}=ge;return Ot}),gs(we,E.id);const H=await Qf(we);Et(H.updated_at??H.created_at??null),pe(H.saved_at??null),$e(H.created_at??null),$(H.locked_by_user_id??null),Te(H.locked_by_full_name??null),Ne(H.read_only_for_current_user??!1),ye((H.locked_by_user_id??null)===_),Hn(H.medidores_usuario??null),K(H.medidores_total_code??Y),e({kind:"success",message:`Bancada #${E.item} eliminada`})}catch(H){e({kind:"error",title:"Error",message:H?.message??"Error eliminando bancada"})}finally{xe(!1)}}},ls=()=>{if(!we){e({kind:"warning",message:"Primero guarda el OI."});return}Zt(!0)},k=async E=>{if(we)try{xe(!0),await A0(we,E),e({kind:"success",message:"Excel generado"})}catch(H){e({kind:"error",title:"Error",message:H?.message??"Error generando Excel"})}finally{xe(!1)}},oe=()=>{if(!we||!q)return;const E=ce??De;me("oi"),ze(null),Ge(vv(E)),Le(!0)},_e=E=>{if(!q)return;me("bancada"),ze(E);const H=E.saved_at??E.created_at??ce??De;Ge(vv(H)),Le(!0)},Re=async()=>{if(!we||!q)return;const E=uT(Ie);if(!E){e({kind:"warning",title:"Fecha",message:"Ingrese una fecha valida."});return}if(!(Ze==="bancada"&&!dt))try{xe(!0),Ze==="oi"?await tT(we,{saved_at:E,propagate_to_bancadas:!0}):dt&&await XR(dt.id,{saved_at:E});const H=await Pf(we);if($n(H.bancadas??[]),Hn(H.medidores_usuario??null),K(H.medidores_total_code??0),pe(H.saved_at??null),$e(H.created_at??null),Et(H.updated_at??H.created_at),Te(H.locked_by_full_name??null),$(H.locked_by_user_id??null),Ne(H.read_only_for_current_user??!1),ye((H.locked_by_user_id??null)===_),!w){const ge={oi:H.code,q3:H.q3,alcance:H.alcance,pma:H.pma,numeration_type:H.numeration_type??"correlativo"};N(ge),M(ge)}Le(!1),ze(null),Ge(""),me("bancada"),e({kind:"success",message:"Fecha guardada actualizada"})}catch(H){e({kind:"error",title:"Error",message:H?.message??"Error actualizando fecha"})}finally{xe(!1)}},We=E=>{gn(),A(!1);const H=Tt(rt);let ge={...E};if(!rt){const Ue=st[Dt];ge.draftCreatedAt||(ge.draftCreatedAt=Ue?.draftCreatedAt??new Date().toISOString()),ge.draftId||(ge.draftId=Ue?.draftId??rn())}ot(Ue=>({...Ue,[H]:ge})),rt?Pa(we,rt.id,ge):Gt(we,ge),sn(!1)},Qt=()=>{if(Se){e({kind:"warning",title:"Solo lectura",message:"La OI est bloqueada por otro usuario."});return}const E=I();M({...E,numeration_type:E.numeration_type??"correlativo"}),P(!0)},Bt=()=>{!we||ue||Lt("edit")},Zn=()=>{ie&&N(ie),P(!1),Be.current=!1,Nn(ln),Ol(),O(null)},na=()=>{we&&(Gt(we,null),Object.keys(st).forEach(E=>{if(!E.startsWith("bancada-"))return;const H=Number(E.replace("bancada-",""));Number.isFinite(H)&&gs(we,H)})),Nn(zt(we)),Nn(zt(null)),eE(),Be.current=!1,A(!1),Ol(),O(null),Em(),Px(),et(null),$n([]),Q.current=[],ot({}),P(!1),M(null),Et(null),pe(null),$e(null),Ne(!1),Te(null),$(null),ye(!1),Hn(null),K(0),sn(!1),Kn(null),Zt(!1),Le(!1),Ce(!1),Ge(""),ze(null),me("bancada"),N({oi:`OI-0001-${new Date().getFullYear()}`,q3:h?.q3[0]??2.5,alcance:h?.alcance[0]??80,pma:16,numeration_type:"correlativo"})},is=()=>{Oe.current=!0,se.current=!0,na(),a(Nt())},Ls=async()=>{if(!we)return!0;const E=Q.current??[];if(E.length===0&&Rn.length===0)return!0;const H=new Map(E.map(Ue=>[Ue.id,Ue])),ge=new Map(Rn.map(Ue=>[Ue.id,Ue]));try{for(const Ot of Rn)H.has(Ot.id)||await pv(Ot.id);for(const Ot of Rn){const pt=H.get(Ot.id);if(!pt||bv(pt)===bv(Ot))continue;const wn=yv(pt),oa=wn.length||pt.rows||1,_t=Ot.updated_at??Ot.created_at??pt.updated_at??pt.created_at;if(!_t)throw new Error("No se pudo determinar la version de la bancada para revertir cambios.");await JR(Ot.id,{medidor:pt.medidor??null,estado:pt.estado??0,rows:oa,rows_data:wn,current_updated_at:_t,restore_updated_at:pt.updated_at??null,restore_saved_at:pt.saved_at??null})}for(const Ot of E)if(!ge.has(Ot.id)){const pt=yv(Ot),wn=pt.length||Ot.rows||1;await hv(we,{estado:Ot.estado??0,rows:wn,rows_data:pt})}const Ue=await Qf(we),lt=Ue.updated_at??Ue.created_at;await QR(we,{current_updated_at:lt,restore_updated_at:G.current})}catch(Ue){return e({kind:"error",title:"Error",message:Ue?.message??"No se pudo descartar los cambios en bancadas."}),!1}return!0},Bs=()=>{Ae||Ce(!0)},ho=async()=>{if(!Ae){Ce(!1),xe(!0);try{if(!await Ls())return;we&&X&&await Ac(we,"cancel")}catch{}finally{xe(!1)}Oe.current=!0,se.current=!0,na(),e({kind:"info",message:"Edicion cancelada"}),a(Nt())}},Xl=async()=>{if(Ae)return;Ce(!1);let E=!0;if((w||!we)&&(E=!1,await p(async ge=>{E=we?await Qa(ge):await ia(ge)})()),!!E){xe(!0);try{we&&X&&await Ac(we)}catch{}finally{xe(!1)}Oe.current=!0,se.current=!0,na(),e({kind:"info",message:"Cambios guardados"}),a(Nt())}},po=async()=>{if(!Ae){xe(!0);try{we&&X&&await Ac(we)}catch{}finally{xe(!1)}Oe.current=!0,se.current=!0,na(),e({kind:"info",message:"OI cerrada"}),a(Nt())}},yr=b.useMemo(()=>iT(Rn),[Rn]),Ya=Fn??yr,vr=E=>{if(!E)return"-";const ge=/([zZ]|[+-]\d{2}:?\d{2})$/.test(E)?E:`${E}Z`,Ue=new Date(ge);return Number.isNaN(Ue.getTime())?E:new Intl.DateTimeFormat("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"America/Lima"}).format(Ue)},xr=rt?Ga(we,rt.id):Sn(we),os=_&&C!=null&&we?{userId:_,bankId:C,oiId:we,bancadaId:rt?.id??null,isNew:!rt,returnTo:jt(we),oiCode:I("oi")??null}:null;return i.jsxs("div",{className:"oi-page vi-oi-light",children:[i.jsx(Ql,{show:Ae}),!f&&i.jsx("div",{className:"alert alert-warning py-1 mt-2 mb-2",children:"Sin conexion. Los cambios se guardaran localmente hasta que vuelva la red."}),V&&i.jsx("div",{className:"alert alert-info py-1 mt-2 mb-2",children:"Sesion restaurada. Reintenta guardar."}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsx("h1",{className:"h3",children:"Formulario OI"}),i.jsxs("div",{className:"d-flex gap-2",children:[we&&q&&i.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:oe,disabled:Ae,children:"Editar fecha guardado"}),we&&W&&i.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:Bt,disabled:Ae,children:"Editar"})]})]}),Se&&i.jsx("div",{className:"alert alert-warning mt-2",children:W?"Modo lectura. Use Editar para modificar.":ke?`Esta OI est siendo editada por ${ke}. Se abre en modo lectura.`:"Esta OI est en modo lectura. No se pueden realizar cambios."}),i.jsxs("form",{onSubmit:p(gr?Qa:ia),className:`row g-3 mt-1 ${gr?"vi-form-editing":"vi-form-readonly"}`,children:[i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{htmlFor:"oi",className:"form-label",children:"OI (OI-####-YYYY)"}),i.jsx("input",{id:"oi",className:`form-control ${we&&!(q&&w&&!Se)?"vi-locked":""}`,...g("oi"),disabled:we?!(q&&w&&!Se):!1}),x.oi&&i.jsx("div",{className:"text-danger small",children:x.oi.message}),q?null:i.jsx("div",{className:"form-text",children:"Solo administradores pueden cambiar el codigo de OI."})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{htmlFor:"q3",className:"form-label",children:"Q3 (m/h)"}),i.jsx("select",{id:"q3",className:"form-select",...g("q3",{valueAsNumber:!0}),disabled:!!we&&!w||Se,children:h?.q3.map(E=>i.jsx("option",{value:E,children:E},E))})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{htmlFor:"alcance",className:"form-label",children:"Alcance Q3/Q1"}),i.jsx("select",{id:"alcance",className:"form-select",...g("alcance",{valueAsNumber:!0}),disabled:!!we&&!w||Se,children:h?.alcance.map(E=>i.jsx("option",{value:E,children:E},E))})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{htmlFor:"pma",className:"form-label",children:"PMA (bar)"}),i.jsx("select",{id:"pma",className:"form-select",...g("pma",{valueAsNumber:!0}),disabled:!!we&&!w||Se,children:h?.pma.map(E=>i.jsx("option",{value:E,children:E},E))}),i.jsx("div",{className:"form-text",children:"Solo en formulario; calcula Presin (bar)."})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{htmlFor:"presion",className:"form-label",children:"Presin (bar)"}),i.jsx("input",{id:"presion",className:"form-control",value:isNaN(pr)?"":pr,disabled:!0})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{htmlFor:"numeration_type",className:"form-label",children:"Tipo de numeracin (# Medidor)"}),i.jsxs("select",{id:"numeration_type",className:"form-select",...g("numeration_type"),disabled:!!we&&!w||Se,children:[i.jsx("option",{value:"correlativo",children:"Correlativo"}),i.jsx("option",{value:"no correlativo",children:"No Correlativo"})]}),i.jsx("div",{className:"form-text",children:"Define cmo se completa la columna # Medidor en el Grid."})]}),i.jsxs("div",{className:"col-12 d-flex align-items-center gap-2",children:[i.jsx("button",{className:"btn btn-primary",disabled:Ae||!!we&&(!w||Se),children:we?gr?"Guardar cambios":"OI guardada":"Guardar OI"}),we&&!w&&ue&&i.jsx("button",{type:"button",className:"btn btn-outline-warning",onClick:Qt,disabled:Ae||Se,children:"Editar OI"}),we&&w&&ue&&i.jsx("button",{type:"button",className:"btn btn-outline-warning",onClick:Zn,disabled:Ae,children:"Cancelar edicion"}),W&&i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:is,disabled:Ae,children:"Volver al listado"}),i.jsx("button",{type:"button",className:"btn btn-outline-success",onClick:ls,disabled:!we||Ae||w,children:"Generar Excel"}),ue&&i.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:po,disabled:!we||w||Ae,children:"Cerrar OI"}),ue&&i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:Bs,disabled:Ae,children:"Cancelar"})]})]}),i.jsx("hr",{className:"my-4"}),i.jsxs("div",{className:"card vi-card-table mt-3",children:[i.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"h6 mb-0",children:"Bancadas"}),i.jsxs("small",{className:"text-muted",children:["Medidores (mi registro): ",Ya," | Total OI: ",Y]})]}),i.jsx("button",{className:"btn btn-primary",onClick:as,disabled:!we||Ae||w||Se,children:"Agregar Bancada"})]}),i.jsx("div",{className:"card-body p-0",children:i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-hover table-striped table-sm align-middle mb-0",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"vi-col-60",children:"Item"}),i.jsx("th",{children:"# Medidor"}),i.jsx("th",{children:"Medidores"}),i.jsx("th",{className:"vi-col-160",children:"Fecha creacin"}),i.jsx("th",{className:"vi-col-160",children:"Fecha guardado"}),i.jsx("th",{className:"vi-col-160",children:"ltima fecha mod."}),i.jsx("th",{className:"vi-col-160 text-end",children:"Acciones"})]})}),i.jsxs("tbody",{children:[Rn.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"text-muted text-center py-3",children:"Sin bancadas. Agrega la primera."})}),Rn.map(E=>{const H=E.rows_data?.[0]?.medidor||E.medidor||"",ge=E.rows_data?.[(E.rows_data?.length||0)-1]?.medidor||"",Ue=H&&ge&&H!==ge?`${H} ... ${ge}`:H;return i.jsxs("tr",{children:[i.jsx("td",{children:E.item}),i.jsx("td",{children:Ue}),i.jsx("td",{children:E.rows}),i.jsx("td",{children:vr(E.created_at)}),i.jsx("td",{children:vr(E.saved_at)}),i.jsx("td",{children:vr(E.updated_at??E.created_at)}),i.jsxs("td",{className:"text-end",children:[q?i.jsx("button",{className:"btn btn-sm btn-outline-secondary me-2",onClick:()=>_e(E),disabled:Ae||w||he,"aria-label":`Editar fecha guardado bancada #${E.item}`,title:"Editar fecha guardado",children:"Editar fecha guardado"}):null,i.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>bs(E),disabled:Ae||w||!W&&Se,"aria-label":`${W?"Ver":"Editar"} bancada #${E.item}`,title:W?"Ver":"Editar",children:W?"Ver":"Editar"}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>Xr(E),disabled:Ae||w||Se,"aria-label":`Eliminar bancada #${E.item}`,title:"Eliminar",children:""})]})]},E.id)})]})]})})})]}),Ra&&i.jsx(ZR,{show:Ra,title:rt?`Editar bancada #${rt.item}`:"Nueva bancada",initial:ss,onClose:()=>{gn(),sn(!1)},onSubmit:rs,onCancelWithDraft:We,numerationType:ns,readOnly:Se,duplicateMap:je,onClearDuplicate:br,draftStorageKey:xr,draftMeta:os,isOnline:f,showRetry:Je}),Fe&&i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"cancelTitle",onClick:E=>{E.target===E.currentTarget&&Ce(!1)},children:i.jsx("div",{className:"modal-dialog",children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{id:"cancelTitle",className:"modal-title",children:"Confirmar cancelacion"}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>Ce(!1)})]}),i.jsx("div",{className:"modal-body",children:i.jsx("p",{children:"Estas seguro de descartar cambios?"})}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:ho,disabled:Ae,children:"Descartar cambios"}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:Xl,disabled:Ae,children:"Guardar cambios y volver al listado"})]})]})})}),fe&&i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"savedAtTitle",onClick:E=>{E.target===E.currentTarget&&(Le(!1),ze(null),me("bancada"))},children:i.jsx("div",{className:"modal-dialog",children:i.jsxs("form",{className:"modal-content",onSubmit:E=>{E.preventDefault(),Re()},children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{id:"savedAtTitle",className:"modal-title",children:"Editar fecha guardado"}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>{Le(!1),ze(null),me("bancada")}})]}),i.jsx("div",{className:"modal-body",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{htmlFor:"savedAtInput",className:"form-label",children:"Fecha guardado"}),i.jsx("input",{id:"savedAtInput",type:"datetime-local",className:"form-control",value:Ie,onChange:E=>Ge(E.target.value),required:!0}),i.jsx("div",{className:"form-text",children:Ze==="oi"?"Se aplicar a todas las bancadas de la OI.":"Se aplica a la bancada seleccionada."})]})}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{Le(!1),ze(null),me("bancada")},children:"Cancelar"}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Ae||!Ie,children:"Guardar"})]})]})})}),i.jsx(gu,{show:Un,title:"Contrasea para proteger Excel",onClose:()=>Zt(!1),onConfirm:E=>{Zt(!1),k(E)}})]})}function gT(e){return e==="/home"?null:e==="/oi"?"oi_formulario":e==="/oi/list"?"oi_listado":e==="/oi/tools/vima-to-lista"?"tools_vima_lista":e==="/oi/tools/actualizacion-base"?"tools_actualizacion_bases":e==="/oi/tools/formato-ac/history"?"tools_historial_ac":e==="/oi/tools/consolidacion/correlativo"?"tools_consol_correlativo":e==="/oi/tools/consolidacion/no-correlativo"?"tools_consol_no_correlativo":e==="/logistica/log01/history"?"logistica_history":e==="/logistica/log01/excel"?"logistica":e==="/logistica/log02/pdfs"?"logistica_pdfs":e.startsWith("/logistica/")?"logistica":e.startsWith("/oi/")?"oi_formulario":e==="/users"?"users_admin":e==="/admin/permisos"?"admin_permisos":null}function bT(){const e=kn(),a=la(),s=e?.token??null,[l,c]=b.useState(()=>!!s);if(b.useEffect(()=>{if(!s){c(!1);return}let N=!1;return c(!0),Ye.get("/auth/me").then(()=>{N||c(!1)}).catch(async I=>{if(N)return;if(I?.response?.status===401){await Xx();return}c(!1)}),()=>{N=!0}},[s]),!s)return i.jsx(dr,{to:"/login",replace:!0});if(l)return i.jsx(Ql,{show:!0});const d=e,f=$a(d.role,d.username),h=eh(d),g=ql(f),p=Xi(),v=a.pathname==="/oi"||a.pathname.startsWith("/oi/");if(g&&v&&!(p&&p>0)&&a.pathname!=="/home")return i.jsx(dr,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Banco",message:"Debe seleccionar un banco para continuar."}}});if(a.pathname==="/admin/permisos"&&!h)return i.jsx(dr,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Permisos",message:"Solo el superusuario puede acceder a este mdulo."}}});if(a.pathname==="/users"&&!(f==="admin"||f==="administrator"))return i.jsx(dr,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Usuarios",message:"No tiene permiso para acceder a este mdulo."}}});if(!h){const N=gT(a.pathname),I=d.allowedModules;if(N&&Array.isArray(I)&&!I.includes(N))return i.jsx(dr,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Permisos",message:"No tiene permiso para acceder a este mdulo."}}})}return i.jsx(Iv,{})}const yT=({isActive:e})=>"vi-sidebar-link d-flex align-items-center"+(e?" active":""),vT=.9;function oh(e,a){if(!(a||e<=0))return{paddingLeft:`calc(0.75rem + ${e*vT}rem)`}}function ha({to:e,icon:a,label:s,depth:l,collapsed:c}){return i.jsx("li",{className:"vi-sidebar-item",children:i.jsxs(Zv,{to:e,end:!0,className:yT,style:oh(l,c),title:s,"aria-label":s,children:[i.jsx("i",{className:`ti ${a} vi-sidebar-icon`}),i.jsx("span",{className:"vi-sidebar-text vi-sidebar-label",children:s})]})})}function Sv({icon:e,label:a,depth:s,collapsed:l}){return i.jsx("li",{className:"vi-sidebar-item",children:i.jsxs("button",{type:"button",className:"vi-sidebar-link vi-sidebar-link--disabled d-flex align-items-center w-100 border-0 bg-transparent",style:oh(s,l),title:a,"aria-label":a,"aria-disabled":"true",disabled:!0,children:[i.jsx("i",{className:`ti ${e} vi-sidebar-icon`}),i.jsx("span",{className:"vi-sidebar-text vi-sidebar-label",children:a})]})})}function Ur({groupKey:e,icon:a,label:s,depth:l,collapsed:c,open:d,active:f,onToggle:h,children:g}){const p=`sidebar-group-${e}`,v=d?"ti-angle-down":"ti-angle-right";return i.jsxs("li",{className:"vi-sidebar-item",children:[i.jsxs("button",{type:"button",className:"vi-sidebar-link d-flex align-items-center w-100 border-0 bg-transparent"+(f?" active":""),style:oh(l,c),onClick:()=>{c||h(e)},"aria-expanded":!c&&d,"aria-controls":p,title:s,children:[i.jsx("i",{className:`ti ${a} vi-sidebar-icon`}),i.jsx("span",{className:"vi-sidebar-text vi-sidebar-label flex-grow-1",children:s}),i.jsx("span",{className:"vi-sidebar-text vi-sidebar-caret ms-auto",children:i.jsx("i",{className:`ti ${v}`})})]}),!c&&d&&i.jsx("ul",{id:p,className:"list-unstyled mb-0",children:g})]})}function xT({collapsed:e,onToggleSidebar:a}){const s=la(),l=kn(),c=!!l,d=$a(l?.role,l?.username),f=eh(l),h=d==="admin"||d==="administrator",g=l?.allowedModules,p=ye=>f||!Array.isArray(g)||g.includes(ye),v=c&&p("tools_vima_lista"),x=c&&p("tools_actualizacion_bases"),N=c&&p("tools_historial_ac"),I=c&&p("tools_consol_correlativo"),j=c&&p("tools_consol_no_correlativo"),_=c&&p("oi_formulario"),C=c&&p("oi_listado"),q=c&&h&&p("users_admin"),T=c&&p("future_ot"),J=c&&p("logistica"),D=c&&p("logistica_history"),R=c&&p("logistica_pdfs"),Z=J||D||R,L=c&&p("future_smart"),W=I||j,ue=v||x||N,Ae=_||C||T,xe=ue||Ae||W,he=b.useMemo(()=>({oi:!0,oi_formato_ac:!0,oi_consolidacion:!0,oi_verificacion:!0,logistica:!0,usuarios:!1,administrar:!1}),[]),[Ne,ke]=b.useState(()=>{const ye=localStorage.getItem("medileser.sidebar.openGroups")??localStorage.getItem("vi.sidebar.openGroups");if(!ye)return he;try{const Se=JSON.parse(ye),w={...he};return Object.keys(w).forEach(P=>{typeof Se[P]=="boolean"&&(w[P]=Se[P])}),w}catch{return he}}),Te=s.pathname;b.useEffect(()=>{localStorage.setItem("medileser.sidebar.openGroups",JSON.stringify(Ne))},[Ne]);const U=b.useMemo(()=>{const ye=Se=>!!Yi({path:Se,end:!0},Te);return{vimaToLista:ye("/oi/tools/vima-to-lista"),actualizacionBases:ye("/oi/tools/actualizacion-base"),formatoAcHistory:ye("/oi/tools/formato-ac/history"),consolidacionCorrelativo:ye("/oi/tools/consolidacion/correlativo"),consolidacionNoCorrelativo:ye("/oi/tools/consolidacion/no-correlativo"),registroOi:ye("/oi"),listadoOi:ye("/oi/list"),users:ye("/users"),password:ye("/password"),permisos:ye("/admin/permisos"),log01Excel:ye("/logistica/log01/excel"),log01History:ye("/logistica/log01/history"),log02Pdfs:ye("/logistica/log02/pdfs")}},[Te]),$=b.useMemo(()=>({oi_consolidacion:U.consolidacionCorrelativo||U.consolidacionNoCorrelativo,oi_formato_ac:U.vimaToLista||U.actualizacionBases||U.formatoAcHistory,oi_verificacion:U.registroOi||U.listadoOi,oi:U.vimaToLista||U.actualizacionBases||U.formatoAcHistory||U.consolidacionCorrelativo||U.consolidacionNoCorrelativo||U.registroOi||U.listadoOi,usuarios:U.users||U.password,logistica:U.log01Excel||U.log01History||U.log02Pdfs,administrar:U.permisos}),[U]);function X(ye){ke(Se=>({...Se,[ye]:!Se[ye]}))}return i.jsxs("aside",{className:`vi-sidebar ${e?"vi-sidebar--collapsed":""}`,children:[i.jsxs("div",{className:"vi-sidebar__header",children:[i.jsxs("div",{className:"vi-sidebar__brand",children:[i.jsx("img",{className:"vi-brand-logo",src:"/medileser/logo-vertical.jpg",alt:"Medileser",draggable:!1}),i.jsx("span",{className:"vi-brand-text",children:"MEDILESER APP"})]}),a&&i.jsx("button",{type:"button",className:"vi-sidebar-toggle","aria-label":e?"Expandir men":"Contraer men",onClick:a,children:i.jsx("i",{className:`ti ${e?"ti-angle-right":"ti-angle-left"}`})})]}),i.jsxs("ul",{className:"vi-sidebar-menu list-unstyled mb-0",children:[!c&&i.jsx(ha,{to:"/login",icon:"ti-login",label:"Login",depth:0,collapsed:e}),xe&&i.jsxs(Ur,{groupKey:"oi",icon:"ti-panel",label:"OI",depth:0,collapsed:e,open:Ne.oi,active:$.oi,onToggle:X,children:[ue&&i.jsxs(Ur,{groupKey:"oi_formato_ac",icon:"ti-folder",label:"FORMATO A-C",depth:1,collapsed:e,open:Ne.oi_formato_ac,active:$.oi_formato_ac,onToggle:X,children:[v&&i.jsx(ha,{to:"/oi/tools/vima-to-lista",icon:"ti-exchange-vertical",label:"VIMA  LISTA",depth:2,collapsed:e}),x&&i.jsx(ha,{to:"/oi/tools/actualizacion-base",icon:"ti-reload",label:"ACTUALIZACIN DE BASES",depth:2,collapsed:e}),N&&i.jsx(ha,{to:"/oi/tools/formato-ac/history",icon:"ti-view-list-alt",label:"HISTORIAL A-C",depth:2,collapsed:e})]}),W&&i.jsxs(Ur,{groupKey:"oi_consolidacion",icon:"ti-layers",label:"CONSOLIDACIN DE BASES ORIGINALES",depth:1,collapsed:e,open:Ne.oi_consolidacion,active:$.oi_consolidacion,onToggle:X,children:[I&&i.jsx(ha,{to:"/oi/tools/consolidacion/correlativo",icon:"ti-list",label:"CORRELATIVO",depth:3,collapsed:e}),j&&i.jsx(ha,{to:"/oi/tools/consolidacion/no-correlativo",icon:"ti-layout-list-thumb",label:"NO CORRELATIVO",depth:3,collapsed:e})]}),Ae&&i.jsxs(Ur,{groupKey:"oi_verificacion",icon:"ti-clipboard",label:"VERIFICACIN INICIAL",depth:1,collapsed:e,open:Ne.oi_verificacion,active:$.oi_verificacion,onToggle:X,children:[T&&i.jsx(Sv,{icon:"ti-briefcase",label:"ORDEN DE TRABAJO (FUTURO)",depth:2,collapsed:e}),_&&i.jsx(ha,{to:"/oi",icon:"ti-layout-grid2",label:"REGISTRO OI",depth:2,collapsed:e}),C&&i.jsx(ha,{to:"/oi/list",icon:"ti-view-list-alt",label:"LISTADO OI",depth:2,collapsed:e})]})]}),Z&&i.jsxs(Ur,{groupKey:"logistica",icon:"ti-package",label:"LOGSTICA",depth:0,collapsed:e,open:Ne.logistica,active:$.logistica,onToggle:X,children:[J&&i.jsx(ha,{to:"/logistica/log01/excel",icon:"ti-files",label:"Consolidacion Excel",depth:1,collapsed:e}),D&&i.jsx(ha,{to:"/logistica/log01/history",icon:"ti-view-list-alt",label:"Historial de consolidaciones",depth:1,collapsed:e}),R&&i.jsx(ha,{to:"/logistica/log02/pdfs",icon:"ti-filter",label:"Filtrado de Cert.PDFs",depth:1,collapsed:e})]}),L&&i.jsx(Sv,{icon:"ti-bar-chart",label:"SMART (FUTURO)",depth:0,collapsed:e}),i.jsxs(Ur,{groupKey:"usuarios",icon:"ti-user",label:"USUARIOS",depth:0,collapsed:e,open:Ne.usuarios,active:$.usuarios,onToggle:X,children:[q&&i.jsx(ha,{to:"/users",icon:"ti-user",label:"GESTIN DE USUARIOS",depth:1,collapsed:e}),c&&i.jsx(ha,{to:"/password",icon:"ti-key",label:"CAMBIAR CONTRASEA",depth:1,collapsed:e})]}),f&&i.jsx(Ur,{groupKey:"administrar",icon:"ti-settings",label:"ADMINISTRAR",depth:0,collapsed:e,open:Ne.administrar,active:$.administrar,onToggle:X,children:i.jsx(ha,{to:"/admin/permisos",icon:"ti-lock",label:"PERMISOS",depth:1,collapsed:e})})]})]})}function ST({sidebarCollapsed:e,onToggleSidebar:a}){const s=kn(),l=s?.username??s?.user??"",c=s?ql(s.role):!1,[d,f]=b.useState(()=>Xi());b.useEffect(()=>xE(()=>f(Xi())),[]);const h=d&&d>0?`Banco ${d}`:"Banco sin seleccionar",g=async()=>{try{await wE()}finally{location.assign("/login")}};return i.jsxs("header",{className:"navbar navbar-expand bg-white border-bottom sticky-top vi-topbar px-3",children:[a&&i.jsx("button",{type:"button",className:"btn btn-link text-secondary me-2 vi-sidebar-toggle","aria-label":e?"Expandir men":"Contraer men",onClick:a,children:i.jsx("i",{className:`ti ${e?"ti-menu-alt":"ti-menu"}`})}),i.jsx("div",{className:"me-auto"}),i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[s&&i.jsxs("span",{className:"text-muted small text-truncate",style:{maxWidth:"360px"},children:["Usuario: ",i.jsx("strong",{children:l||"?"}),c&&i.jsxs(i.Fragment,{children:["  ",h,s.techNumber?i.jsxs(i.Fragment,{children:["  ","Tcnico ",s.techNumber]}):null]})]}),s&&i.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:g,children:"Cerrar sesin"})]})]})}function NT(){const a=la().pathname==="/home",[s,l]=b.useState(()=>{try{return(localStorage.getItem("medileser.sidebar.collapsed")??localStorage.getItem("vi.sidebar.collapsed"))==="true"}catch{return!1}}),c=()=>l(d=>!d);return b.useEffect(()=>{try{localStorage.setItem("medileser.sidebar.collapsed",String(s))}catch{}},[s]),i.jsxs("div",{className:`vi-layout ${s?"vi-layout--collapsed":""}`,children:[i.jsx(xT,{collapsed:s,onToggleSidebar:c}),i.jsxs("div",{className:"vi-main",children:[i.jsx(ST,{sidebarCollapsed:s,onToggleSidebar:c}),i.jsx("main",{className:`vi-content${a?" vi-content--home":""}`,children:i.jsx(Iv,{})})]})]})}function wT(){const{toast:e}=Qr(),a=Pr(),s=la(),[,l]=Pv(),[c,d]=b.useState(()=>new URLSearchParams(s.search).get("q")??""),[f,h]=b.useState(()=>(new URLSearchParams(s.search).get("q")??"").trim()),[g,p]=b.useState(()=>new URLSearchParams(s.search).get("dateFrom")??""),[v,x]=b.useState(()=>new URLSearchParams(s.search).get("dateTo")??""),[N,I]=b.useState(()=>{const ae=new URLSearchParams(s.search).get("pageSize"),Me=ae?Number(ae):20;return Number.isFinite(Me)&&Me>0?Me:20}),[j,_]=b.useState(()=>{const ae=new URLSearchParams(s.search).get("page"),Me=ae?Number(ae):1;return Number.isFinite(Me)&&Me>0?Math.floor(Me):1}),[C,q]=b.useState(()=>new URLSearchParams(s.search).get("responsableTech")??""),T=(j-1)*N,J=b.useRef(!1);b.useEffect(()=>{if(!J.current){J.current=!0;return}const ae=setTimeout(()=>{h(c.trim()),_(1)},300);return()=>clearTimeout(ae)},[c]),b.useEffect(()=>{const ae=new URLSearchParams,Me=c.trim();Me&&ae.set("q",Me),g&&ae.set("dateFrom",g),v&&ae.set("dateTo",v),C&&ae.set("responsableTech",C),j!==1&&ae.set("page",String(j)),N!==20&&ae.set("pageSize",String(N));const He=s.search.startsWith("?")?s.search.slice(1):s.search;ae.toString()!==He&&l(ae,{replace:!0})},[g,v,s.search,j,N,C,c,l]);const{data:D,isLoading:R,isError:Z,error:L,refetch:W,isFetching:ue}=Hr({queryKey:["oi","list",{search:f,dateFrom:g,dateTo:v,responsableTech:C,pageSize:N,offset:T}],queryFn:()=>nT({q:f||void 0,dateFrom:g||void 0,dateTo:v||void 0,responsableTechNumber:C?Number(C):void 0,limit:N,offset:T}),placeholderData:ae=>ae}),Ae=kn(),xe=$a(Ae?.role,Ae?.username)!=="technician",{data:he=[],isFetching:Ne,isError:ke,error:Te}=Hr({queryKey:["oi","responsables"],queryFn:sT,enabled:xe,staleTime:6e4,retry:!1}),U=ke?Te?.message??"No se pudo cargar responsables":"",$=ae=>{if(!ae)return"-";const Me=ae.endsWith("Z")?ae:`${ae}Z`,He=new Date(Me),at=Jt=>Jt.toString().padStart(2,"0");return`${at(He.getDate())}/${at(He.getMonth()+1)}/${He.getFullYear()} ${at(He.getHours())}:${at(He.getMinutes())}`},ye=D?.items??[],Se=D?.summary??{medidores_resultado:0,oi_unicas:0,medidores_total_oi_unicas:0},w=D?.total??0,P=D?.limit??N,ie=P>0?Math.ceil(w/P):1,M=10;let ce=1,pe=ie;if(ie>M){const ae=Math.floor(M/2);ce=Math.max(1,j-ae),pe=ce+M-1,pe>ie&&(pe=ie,ce=Math.max(1,pe-M+1))}const[De,$e]=b.useState(!1),[fe,Le]=b.useState(null),[Ie,Ge]=b.useState(!1),[dt,ze]=b.useState(!1),Ze=R||ue||Ie||dt,me=()=>`${s.pathname}${s.search}`,Fe=(ae,Me)=>{try{Pi({id:ae,code:Me}),e({kind:"success",message:`OI ${Me} cargada`}),a(`/oi/${ae}?mode=view`,{state:{returnTo:me()}})}catch(He){e({kind:"error",title:"Error",message:He?.message??"No se pudo abrir el OI"})}},Ce=(ae,Me)=>{try{Pi({id:ae,code:Me}),e({kind:"success",message:`OI ${Me} cargada`}),a(`/oi/${ae}?mode=edit`,{state:{returnTo:me()}})}catch(He){e({kind:"error",title:"Error",message:He?.message??"No se pudo abrir el OI"})}},Je=async()=>{try{await uo()}finally{Em(),a("/oi?mode=edit",{state:{returnTo:me()}})}},A=async(ae,Me)=>{if(confirm(`Ests seguro de ELIMINAR la ${Me}?
Esta accin borrar todas sus bancadas y no se puede deshacer.`))try{await WR(ae),e({kind:"success",title:"Eliminado",message:`Se elimin ${Me} correctamente.`}),W()}catch(He){e({kind:"error",title:"Error",message:He.message||"No se pudo eliminar la OI"})}},V=ae=>{Le(ae),$e(!0)},O=async ae=>{if(fe)try{Ge(!0),await A0(fe,ae),e({kind:"success",message:"Excel generado"})}catch(Me){e({kind:"error",title:"Error",message:Me?.message??"No se pudo generar el Excel"})}finally{Ge(!1)}},Q=async()=>{try{ze(!0);const{blob:ae,filename:Me}=await aT({q:f||void 0,dateFrom:g||void 0,dateTo:v||void 0,responsableTechNumber:C?Number(C):void 0}),He=URL.createObjectURL(ae),at=document.createElement("a");at.href=He,at.download=Me,document.body.appendChild(at),at.click(),URL.revokeObjectURL(He),at.remove()}catch(ae){const Me=ae?.status,He=ae?.message??"No se pudo exportar el CSV";e(Me===403?{kind:"error",title:"No autorizado",message:He}:{kind:"error",title:"Error",message:He})}finally{ze(!1)}},G=()=>{d(""),h(""),p(""),x(""),_(1),q("")},se=w===0?0:T+1,Oe=w===0?0:Math.min(T+ye.length,w),Be=w===0?"0 registros":`Mostrando ${se}-${Oe} de ${w} registros`;return i.jsxs("div",{children:[i.jsx(Ql,{show:Ze}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("button",{className:"btn btn-primary",onClick:Je,disabled:Ze,title:"Nueva OI",children:"Nueva OI"}),i.jsx("h1",{className:"h3 mb-0",children:"Listado de OI"})]}),i.jsxs("div",{className:"d-flex gap-2",children:[xe&&i.jsx("button",{className:"btn btn-outline-secondary",onClick:Q,disabled:Ze,children:dt?"Exportando...":"Exportar CSV"}),i.jsx("button",{className:"btn btn-outline-secondary",onClick:G,disabled:Ze,children:"Limpiar filtros"}),i.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>W(),disabled:Ze,children:"Recargar"})]})]}),Z&&i.jsx("div",{className:"alert alert-danger",children:L?.message??"Error cargando listado"}),i.jsxs("div",{className:"card vi-card-table",children:[i.jsxs("div",{className:"card-header d-flex flex-wrap align-items-center justify-content-between gap-2",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"h6 mb-0",children:"Registros"}),i.jsxs("small",{className:"text-muted",children:["Medidores (resultados): ",Se.medidores_resultado," | OI unicas: ",Se.oi_unicas," | Medidores (Total OI): ",Se.medidores_total_oi_unicas]})]}),i.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[i.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Buscar OI o medidor...",value:c,onChange:ae=>{d(ae.target.value),_(1)},"aria-label":"Buscar por codigo de OI o medidor"}),i.jsx("input",{type:"date",className:"form-control form-control-sm",value:g,onChange:ae=>{p(ae.target.value),_(1)},"aria-label":"Filtrar desde fecha"}),i.jsx("input",{type:"date",className:"form-control form-control-sm",value:v,onChange:ae=>{x(ae.target.value),_(1)},"aria-label":"Filtrar hasta fecha"}),xe&&i.jsxs("div",{className:"d-flex flex-column",children:[i.jsxs("select",{className:"form-select form-select-sm",value:C,onChange:ae=>{q(ae.target.value),_(1)},disabled:Ze||Ne,"aria-label":"Filtrar por responsable",title:"Responsable",children:[i.jsx("option",{value:"",children:"Responsable: Todos"}),he.map(ae=>i.jsx("option",{value:String(ae.tech_number),children:ae.full_name},ae.tech_number))]}),U?i.jsx("small",{className:"text-danger",children:U}):null]}),i.jsxs("div",{className:"d-flex align-items-center",children:[i.jsx("span",{className:"me-1 small",children:"Mostrar"}),i.jsxs("select",{className:"form-select form-select-sm",value:N,onChange:ae=>{const Me=Number(ae.target.value)||20;I(Me),_(1)},"aria-label":"Registros por pgina",children:[i.jsx("option",{value:10,children:"10"}),i.jsx("option",{value:20,children:"20"}),i.jsx("option",{value:50,children:"50"})]})]})]})]}),i.jsxs("div",{className:"card-body p-0",children:[i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-hover table-striped table-sm align-middle mb-0",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"ID"}),i.jsx("th",{children:"OI"}),i.jsx("th",{children:"Medidores"}),i.jsx("th",{children:"Q3"}),i.jsx("th",{children:"Alcance"}),i.jsx("th",{children:"PMA"}),i.jsx("th",{children:"Banco"}),i.jsx("th",{children:"Tcnico"}),i.jsx("th",{children:"Responsable"}),i.jsx("th",{children:"Creacin"}),i.jsx("th",{children:"Guardado"}),i.jsx("th",{children:"lt. mod."}),i.jsx("th",{className:"text-end",children:"Acciones"})]})}),i.jsxs("tbody",{children:[!Ze&&ye.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:13,className:"text-center text-muted py-3",children:w>0?"No hay registros que coincidan con los filtros.":"Sin registros."})}),ye.map(ae=>i.jsxs("tr",{children:[i.jsx("td",{children:ae.id}),i.jsx("td",{children:ae.code}),i.jsx("td",{title:"Mi registro / Total OI",children:`${ae.medidores_usuario??0} / ${ae.medidores_total_code??0}`}),i.jsx("td",{children:ae.q3}),i.jsx("td",{children:ae.alcance}),i.jsx("td",{children:ae.pma}),i.jsx("td",{children:ae.banco_id}),i.jsx("td",{children:ae.tech_number}),i.jsx("td",{children:ae.creator_name}),i.jsx("td",{children:$(ae.created_at)}),i.jsx("td",{children:$(ae.saved_at)}),i.jsx("td",{children:$(ae.updated_at)}),i.jsxs("td",{className:"text-end",children:[i.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>Fe(ae.id,ae.code),disabled:Ze,title:"Ver OI","aria-label":`Ver OI ${ae.code}`,children:"Ver"}),i.jsx("button",{className:"btn btn-sm btn-outline-warning me-2",onClick:()=>Ce(ae.id,ae.code),disabled:Ze,title:"Editar OI","aria-label":`Editar OI ${ae.code}`,children:"Editar"}),i.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:()=>V(ae.id),disabled:Ze,title:"Descargar Excel","aria-label":`Descargar Excel ${ae.code}`,children:"Excel"}),xe&&i.jsx("button",{className:"btn btn-sm btn-outline-danger ms-2",onClick:()=>A(ae.id,ae.code),disabled:Ze,title:"Eliminar OI (Solo Admin)",children:""})]})]},ae.id))]})]})}),ie>1&&i.jsx("nav",{className:"px-3 py-2 d-flex justify-content-center",children:i.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[i.jsx("li",{className:`page-item ${j===1?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>_(ae=>Math.max(1,ae-1)),disabled:j===1,children:""})}),Array.from({length:pe-ce+1},(ae,Me)=>{const He=ce+Me;return i.jsx("li",{className:`page-item ${He===j?"active":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>_(He),children:He})},He)}),i.jsx("li",{className:`page-item ${j===ie?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>_(ae=>Math.min(ie,ae+1)),disabled:j===ie,children:"Siguiente"})})]})})]})]}),i.jsx("div",{className:"px-3 py-2 d-flex justify-content-end",children:i.jsx("small",{className:"text-muted",children:Be})}),i.jsx(gu,{show:De,title:"Contrasea para proteger Excel",onClose:()=>{$e(!1),Le(null)},onConfirm:ae=>{$e(!1),O(ae)}})]})}async function jT(e){return(await Ye.get("/auth/users/paged",{params:{q:e.q||void 0,role:e.role||void 0,limit:e.limit,offset:e.offset}})).data}function _T(){const{toast:e}=Qr(),a=kn(),s=$a(a?.role,a?.username),l=s==="admin"||s==="administrator",c=eh(a),[d,f]=b.useState(!1),[h,g]=b.useState(null),[p,v]=b.useState(!1),[x,N]=b.useState(""),[I,j]=b.useState(""),[_,C]=b.useState(""),[q,T]=b.useState(20),[J,D]=b.useState(1),R=(J-1)*q,Z=b.useRef(!1);b.useEffect(()=>{if(!Z.current){Z.current=!0;return}const Ce=setTimeout(()=>{j(x.trim()),D(1)},250);return()=>clearTimeout(Ce)},[x]);const{data:L,refetch:W,isLoading:ue,isFetching:Ae,error:xe}=Hr({queryKey:["users",{search:I,roleFilter:_,pageSize:q,offset:R}],queryFn:()=>jT({q:I||void 0,role:_||void 0,limit:q,offset:R}),enabled:l,placeholderData:Ce=>Ce}),{register:he,handleSubmit:Ne,reset:ke}=eu(),Te=()=>{g(null),ke({username:"",password:"",first_name:"",last_name:"",role:"technician",tech_number:0}),f(!0)},U=Ce=>{g(Ce),ke({username:Ce.username,password:"",first_name:Ce.first_name,last_name:Ce.last_name,role:$a(Ce.role,Ce.username),tech_number:Ce.tech_number}),f(!0)},$=()=>{f(!1),g(null),ke()},X=async Ce=>{try{v(!0),await Ye.post("/auth/users",{...Ce,tech_number:Number(Ce.tech_number)}),e({kind:"success",message:"Usuario creado correctamente"}),$(),W()}catch(Je){e({kind:"error",title:"Error",message:Je.response?.data?.detail||"Error al crear"})}finally{v(!1)}},ye=async Ce=>{if(!h)return;const Je=String(Ce.password||"").trim();try{if(v(!0),c){const A={username:String(Ce.username||"").trim(),first_name:String(Ce.first_name||"").trim(),last_name:String(Ce.last_name||"").trim(),role:Ce.role,tech_number:Number(Ce.tech_number)};Je&&(A.password=Je),await Ye.put(`/auth/users/${h.id}`,A),e({kind:"success",message:"Usuario actualizado correctamente"})}else{if(!Je){e({kind:"error",message:"Debe ingresar una nueva contrasea"});return}await Ye.put(`/auth/users/${h.id}/password`,{new_password:Je}),e({kind:"success",message:`Contrasea de ${h.username} actualizada`})}$(),W()}catch(A){const V=A?.response?.data?.detail||A?.message||"Error actualizando usuario";e({kind:"error",title:"Error",message:V})}finally{v(!1)}},Se=async Ce=>{if(confirm(`Eliminar usuario? ${Ce.username}?
Esto solo es posible si no tiene registros.`))try{v(!0),await Ye.delete(`/auth/users/${Ce.id}`),e({kind:"success",message:"Usuario eliminado"}),W()}catch(Je){e({kind:"error",title:"No se puede eliminar",message:Je.response?.data?.detail||Je.message})}finally{v(!1)}},w=b.useMemo(()=>L?.items??[],[L]),P=L?.total??0,ie=L?.limit??q,M=ie>0?Math.ceil(P/ie):1,ce=10;let pe=1,De=M;if(M>ce){const Ce=Math.floor(ce/2);pe=Math.max(1,J-Ce),De=pe+ce-1,De>M&&(De=M,pe=Math.max(1,De-ce+1))}const $e=P===0?0:R+1,fe=P===0?0:Math.min(R+w.length,P),Le=P===0?"0 registros":`Mostrando ${$e}-${fe} de ${P} registros`,Ie=ue||Ae||p,Ge=()=>{N(""),j(""),C(""),D(1),T(20)},dt=!!h,ze=dt&&!c,Ze=!dt||!c,me=(h?.username??"").toLowerCase()==="admin",Fe=dt?c?"Dejar en blanco para mantener la actual.":"Ingrese una nueva contrasea.":void 0;return l?i.jsxs("div",{className:"container-fluid p-4 vi-oi-light",children:[i.jsx(Ql,{show:Ie}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx("h2",{className:"h4 m-0",children:"Gestin de Usuarios"}),i.jsx("button",{className:"btn btn-primary",onClick:Te,disabled:Ie,children:"+ Nuevo Usuario"})]}),i.jsxs("div",{className:"d-flex flex-wrap align-items-end gap-2 mb-3",children:[i.jsxs("div",{style:{minWidth:260},children:[i.jsx("label",{className:"form-label small mb-1",children:"Buscar"}),i.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Usuario o rol...",value:x,onChange:Ce=>{N(Ce.target.value),D(1)}})]}),i.jsxs("div",{style:{minWidth:220},children:[i.jsx("label",{className:"form-label small mb-1",children:"Rol"}),i.jsxs("select",{className:"form-select form-select-sm",value:_,onChange:Ce=>{C(Ce.target.value),D(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"admin",children:"admin"}),i.jsx("option",{value:"administrator",children:"administrator"}),i.jsx("option",{value:"technician",children:"technician"}),i.jsx("option",{value:"standard",children:"standard"}),i.jsx("option",{value:"user",children:"user (legacy)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"form-label small mb-1",children:"Mostrar"}),i.jsxs("select",{className:"form-select form-select-sm",value:q,onChange:Ce=>{const Je=Number(Ce.target.value)||20;T(Je),D(1)},children:[i.jsx("option",{value:20,children:"20"}),i.jsx("option",{value:50,children:"50"}),i.jsx("option",{value:100,children:"100"})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:Ge,disabled:Ie,children:"Limpiar filtros"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>W(),disabled:Ie,children:"Recargar"})]})]}),xe?i.jsx("div",{className:"alert alert-danger",role:"alert",children:"No se pudo cargar la lista de usuarios."}):null,i.jsx("div",{className:"card shadow-sm",children:i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-hover align-middle mb-0",children:[i.jsx("thead",{className:"table-light",children:i.jsxs("tr",{children:[i.jsx("th",{children:"Usuario"}),i.jsx("th",{children:"Nombre"}),i.jsx("th",{children:"Rol"}),i.jsx("th",{children:"N Tcnico"}),i.jsx("th",{className:"text-end",children:"Acciones"})]})}),i.jsxs("tbody",{children:[w.map(Ce=>i.jsxs("tr",{children:[i.jsx("td",{className:"fw-bold",children:Ce.username}),i.jsxs("td",{children:[Ce.first_name," ",Ce.last_name]}),i.jsx("td",{children:(()=>{const Je=$a(Ce.role,Ce.username),A=Ce.username.toLowerCase()==="admin"?"Superusuario":Je==="administrator"?"Administrador":Je==="technician"?"Tcnico":"Estndar",V=Ce.username.toLowerCase()==="admin"?"bg-danger":Je==="administrator"?"bg-warning text-dark":Je==="technician"?"bg-info text-dark":"bg-secondary";return i.jsx("span",{className:`badge ${V}`,children:A})})()}),i.jsx("td",{children:Ce.tech_number}),i.jsxs("td",{className:"text-end",children:[i.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",title:"Actualizar usuario","aria-label":`Actualizar ${Ce.username}`,disabled:Ie||Ce.username==="admin"||!c&&$a(Ce.role,Ce.username)==="administrator",onClick:()=>U(Ce),children:i.jsx("i",{className:"ti ti-edit"})}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",title:"Eliminar usuario","aria-label":`Eliminar ${Ce.username}`,disabled:Ie||Ce.username==="admin"||!c&&$a(Ce.role,Ce.username)==="administrator",onClick:()=>Se(Ce),children:i.jsx("i",{className:"ti ti-trash"})})]})]},Ce.id)),w.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"text-center py-4",children:"No hay usuarios registrados"})})]})]})})}),M>1&&i.jsx("nav",{className:"px-3 py-2 d-flex justify-content-center",children:i.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[i.jsx("li",{className:`page-item ${J===1?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>D(Ce=>Math.max(1,Ce-1)),disabled:J===1,children:"Anterior"})}),Array.from({length:De-pe+1},(Ce,Je)=>{const A=pe+Je;return i.jsx("li",{className:`page-item ${A===J?"active":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>D(A),children:A})},A)}),i.jsx("li",{className:`page-item ${J===M?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>D(Ce=>Math.min(M,Ce+1)),disabled:J===M,children:"Siguiente"})})]})}),i.jsx("div",{className:"px-3 py-2 d-flex justify-content-end",children:i.jsx("small",{className:"text-muted",children:Le})}),d&&i.jsx("div",{className:"modal d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:i.jsx("div",{className:"modal-dialog",children:i.jsxs("form",{className:"modal-content",onSubmit:Ne(dt?ye:X),children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{className:"modal-title",children:dt?"Actualizar Usuario":"Nuevo Usuario"}),i.jsx("button",{type:"button",className:"btn-close",onClick:$})]}),i.jsxs("div",{className:"modal-body row g-3",children:[i.jsxs("div",{className:"col-6",children:[i.jsx("label",{className:"form-label",children:"Usuario"}),i.jsx("input",{className:"form-control",disabled:ze,...he("username",{required:!0})})]}),i.jsx("div",{className:"col-6",children:i.jsx(Ji,{label:"Contrasea",...he("password",{required:Ze}),autoComplete:"new-password",helpText:Fe})}),i.jsxs("div",{className:"col-6",children:[i.jsx("label",{className:"form-label",children:"Nombre"}),i.jsx("input",{className:"form-control",disabled:ze,...he("first_name",{required:!0})})]}),i.jsxs("div",{className:"col-6",children:[i.jsx("label",{className:"form-label",children:"Apellido"}),i.jsx("input",{className:"form-control",disabled:ze,...he("last_name",{required:!0})})]}),i.jsxs("div",{className:"col-6",children:[i.jsx("label",{className:"form-label",children:"Rol"}),i.jsxs("select",{className:"form-select",disabled:ze,...he("role"),children:[me?i.jsx("option",{value:"admin",children:"Superusuario"}):null,i.jsx("option",{value:"technician",children:"Tecnico"}),i.jsx("option",{value:"standard",children:"Estandar"}),c?i.jsx("option",{value:"administrator",children:"Administrador"}):null]})]}),i.jsxs("div",{className:"col-6",children:[i.jsx("label",{className:"form-label",children:"N Tecnico"}),i.jsx("input",{type:"number",className:"form-control",disabled:ze,...he("tech_number",{required:!0})}),i.jsx("div",{className:"form-text small",children:"Use 0 si no aplica (admin/estandar)"})]})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:$,disabled:Ie,children:"Cancelar"}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Ie,children:dt?"Actualizar":"Guardar"})]})]})})})]}):i.jsx("div",{className:"p-4 text-danger",children:"Acceso no autorizado"})}function ET(){const{toast:e}=Qr(),[a,s]=b.useState(""),[l,c]=b.useState(""),[d,f]=b.useState(!1),h=a.trim().length>0&&l.trim().length>0,g=async p=>{if(p.preventDefault(),!!h)try{f(!0),await SE(a.trim(),l.trim()),e({kind:"success",message:"Contrasea actualizada"}),s(""),c("")}catch(v){e({kind:"error",title:"Error",message:v?.message??"No se pudo cambiar la contrasea"})}finally{f(!1)}};return i.jsx("div",{className:"container py-4",children:i.jsx("div",{className:"row justify-content-center",children:i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"card shadow-sm",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:"Cambiar mi contrasea"})}),i.jsxs("form",{onSubmit:g,children:[i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"mb-3",children:i.jsx(Ji,{label:"Contrasea actual",inputId:"oldPwd",value:a,onChange:p=>s(p.target.value),required:!0,autoComplete:"current-password"})}),i.jsx("div",{className:"mb-3",children:i.jsx(Ji,{label:"Nueva contrasea",inputId:"newPwd",value:l,onChange:p=>c(p.target.value),required:!0,autoComplete:"new-password",helpText:"Usa una contrasea segura y que recuerdes."})})]}),i.jsxs("div",{className:"card-footer d-flex justify-content-end gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{s(""),c("")},disabled:d,children:"Limpiar"}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!h||d,children:"Guardar"})]})]})]})})})})}async function AT(e){return(await Ye.get("/admin/permisos/paged",{params:{q:e.q||void 0,role:e.role||void 0,limit:e.limit,offset:e.offset}})).data}async function CT(e,a){const{data:s}=await Ye.put(`/admin/permisos/${e}`,{allowedModules:a});return s}const Am=[{id:"oi_formulario",label:"Registro OI",path:"/oi"},{id:"oi_listado",label:"Listado OI",path:"/oi/list"},{id:"tools_vima_lista",label:"VIMA  LISTA",path:"/oi/tools/vima-to-lista"},{id:"tools_actualizacion_bases",label:"Actualizacin de Bases",path:"/oi/tools/actualizacion-base"},{id:"tools_historial_ac",label:"Historial A-C",path:"/oi/tools/formato-ac/history"},{id:"tools_consol_correlativo",label:"Consolidacin (Correlativo)",path:"/oi/tools/consolidacion/correlativo"},{id:"tools_consol_no_correlativo",label:"Consolidacin (No Correlativo)",path:"/oi/tools/consolidacion/no-correlativo"},{id:"future_ot",label:"Orden de Trabajo (FUTURO)",path:"FUTURO"},{id:"logistica",label:"Logstica",path:"/logistica/log01/excel"},{id:"logistica_history",label:"Historial de consolidaciones",path:"/logistica/log01/history"},{id:"logistica_pdfs",label:"Filtrado de Cert.PDFs",path:"/logistica/log02/pdfs"},{id:"future_smart",label:"Smart (FUTURO)",path:"FUTURO"},{id:"users_admin",label:"Gestin de usuarios",path:"/users"},{id:"admin_permisos",label:"Permisos",path:"/admin/permisos"}],Nv=[{id:"oi",label:"OI",moduleIds:["oi_formulario","oi_listado","tools_vima_lista","tools_actualizacion_bases","tools_historial_ac","tools_consol_correlativo","tools_consol_no_correlativo","future_ot"]},{id:"logistica",label:"Logstica",moduleIds:["logistica","logistica_history","logistica_pdfs"]},{id:"smart",label:"Smart (FUTURO)",moduleIds:["future_smart"]},{id:"usuarios",label:"Usuarios",moduleIds:["users_admin"]},{id:"administrar",label:"Administrar",moduleIds:["admin_permisos"]}];function wv(e){const a=new Set(Am.map(c=>c.id)),s=new Set,l=[];for(const c of e){const d=c==="future_logistica"?"logistica":c;!a.has(d)||s.has(d)||(s.add(d),l.push(d))}return l}const jv="admin_permisos:collapsed_groups";function OT(){const e=$m(),{toast:a}=Qr(),[s,l]=b.useState(""),[c,d]=b.useState(""),[f,h]=b.useState(""),[g,p]=b.useState(20),[v,x]=b.useState(1),N=(v-1)*g,I=b.useRef(!1);b.useEffect(()=>{if(!I.current){I.current=!0;return}const M=setTimeout(()=>{d(s.trim()),x(1)},250);return()=>clearTimeout(M)},[s]);const{data:j,isLoading:_,error:C,refetch:q}=Hr({queryKey:["admin","permisos",{search:c,roleFilter:f,pageSize:g,offset:N}],queryFn:()=>AT({q:c||void 0,role:f||void 0,limit:g,offset:N}),placeholderData:M=>M}),[T,J]=b.useState(null),[D,R]=b.useState([]),Z=(T?.username??"").toLowerCase()==="admin",[L,W]=b.useState(()=>{const M=Object.fromEntries(Nv.map(ce=>[ce.id,!0]));try{const ce=localStorage.getItem(jv);if(!ce)return M;const pe=JSON.parse(ce);return!pe||typeof pe!="object"?M:{...M,...pe}}catch{return M}}),ue=(M,ce)=>{W(pe=>{const De={...pe,[M]:ce};try{localStorage.setItem(jv,JSON.stringify(De))}catch{}return De})},Ae=M=>{J(M),R(wv(M.allowedModules??[]))},xe=()=>{J(null),R([])},he=Wj({mutationFn:async M=>CT(M.userId,M.allowedModules),onSuccess:async()=>{await e.invalidateQueries({queryKey:["admin","permisos"]}),a({kind:"success",title:"Permisos",message:"Permisos actualizados."}),xe()},onError:M=>{const ce=M?.response?.data?.detail??M?.message??"No se pudieron actualizar los permisos.";a({kind:"error",title:"Permisos",message:String(ce)})}}),Ne=b.useMemo(()=>j?.items??[],[j]),ke=j?.total??0,Te=j?.limit??g,U=Te>0?Math.ceil(ke/Te):1,$=ke===0?0:N+1,X=ke===0?0:Math.min(N+Ne.length,ke),ye=ke===0?"0 registros":`Mostrando ${$}-${X} de ${ke} registros`,Se=M=>{R(ce=>{const pe=new Set(ce);return pe.has(M)?pe.delete(M):pe.add(M),Array.from(pe)})},w=M=>{R(ce=>{const pe=new Set(ce),De=M.moduleIds.filter(fe=>Am.some(Le=>Le.id===fe));if(De.length>0&&De.every(fe=>pe.has(fe)))for(const fe of De)pe.delete(fe);else for(const fe of De)pe.add(fe);return Array.from(pe)})},P=()=>{T&&he.mutate({userId:T.id,allowedModules:wv(D)})},ie=()=>{l(""),d(""),h(""),x(1),p(20)};return i.jsxs("div",{className:"container-fluid",children:[i.jsx(Ql,{show:he.isPending,label:"Guardando permisos..."}),i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Administrar  Permisos"}),i.jsx("p",{className:"text-muted mB-20",children:"Define qu mdulos puede ver cada usuario (el acceso por URL tambin se bloquea)."}),i.jsxs("div",{className:"d-flex flex-wrap align-items-end gap-2 mb-3",children:[i.jsxs("div",{style:{minWidth:260},children:[i.jsx("label",{className:"form-label small mb-1",children:"Buscar"}),i.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Usuario, nombre o rol...",value:s,onChange:M=>{l(M.target.value),x(1)}})]}),i.jsxs("div",{style:{minWidth:220},children:[i.jsx("label",{className:"form-label small mb-1",children:"Rol"}),i.jsxs("select",{className:"form-select form-select-sm",value:f,onChange:M=>{h(M.target.value),x(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"admin",children:"admin"}),i.jsx("option",{value:"administrator",children:"administrator"}),i.jsx("option",{value:"technician",children:"technician"}),i.jsx("option",{value:"standard",children:"standard"}),i.jsx("option",{value:"user",children:"user (legacy)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"form-label small mb-1",children:"Mostrar"}),i.jsxs("select",{className:"form-select form-select-sm",value:g,onChange:M=>{const ce=Number(M.target.value)||20;p(ce),x(1)},children:[i.jsx("option",{value:20,children:"20"}),i.jsx("option",{value:50,children:"50"}),i.jsx("option",{value:100,children:"100"})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:ie,disabled:_||he.isPending,children:"Limpiar filtros"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>q(),disabled:_||he.isPending,children:"Recargar"})]})]}),_?i.jsx("div",{className:"text-muted",children:"Cargando usuarios..."}):C?i.jsx("div",{className:"alert alert-danger",role:"alert",children:"No se pudo cargar la lista de usuarios."}):i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm align-middle",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Usuario"}),i.jsx("th",{children:"Rol"}),i.jsx("th",{className:"text-end",children:"Acciones"})]})}),i.jsxs("tbody",{children:[Ne.map(M=>i.jsxs("tr",{children:[i.jsx("td",{children:M.username}),i.jsx("td",{children:M.role}),i.jsx("td",{className:"text-end",children:i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>Ae(M),disabled:(M.username??"").toLowerCase()==="admin",children:"Editar"})})]},M.id)),Ne.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"text-muted",children:"No hay usuarios."})}):null]})]})}),i.jsx("div",{className:"d-flex justify-content-end mt-2",children:i.jsx("small",{className:"text-muted",children:ye})}),U>1&&i.jsx("nav",{className:"mt-2 d-flex justify-content-center",children:i.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[i.jsx("li",{className:`page-item ${v===1?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>x(M=>Math.max(1,M-1)),disabled:v===1,children:""})}),i.jsx("li",{className:"page-item disabled",children:i.jsxs("span",{className:"page-link",children:["Pgina ",v," / ",U]})}),i.jsx("li",{className:`page-item ${v===U?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>x(M=>Math.min(U,M+1)),disabled:v===U,children:"Siguiente"})})]})})]})})}),T&&i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"permsModalTitle",onClick:M=>{M.target===M.currentTarget&&xe()},children:i.jsx("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsxs("h5",{id:"permsModalTitle",className:"modal-title",children:["Permisos de ",T.username]}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:xe})]}),i.jsxs("div",{className:"modal-body",children:[Z?i.jsxs("div",{className:"alert alert-info",role:"alert",children:["El superusuario ",i.jsx("b",{children:"admin"})," siempre tiene acceso total y no se puede limitar por permisos."]}):null,Nv.map(M=>{const ce=M.moduleIds.map(Le=>Am.find(Ie=>Ie.id===Le)).filter(Boolean),pe=ce.filter(Le=>D.includes(Le.id)).length,De=ce.length>0&&pe===ce.length,$e=pe>0&&!De,fe=!!L[M.id];return i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{className:"form-check mb-0",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:`grp-${T.id}-${M.id}`,checked:De,ref:Le=>{Le&&(Le.indeterminate=$e)},onChange:()=>w(M),disabled:he.isPending||Z}),i.jsxs("label",{className:"form-check-label fw-semibold",htmlFor:`grp-${T.id}-${M.id}`,children:[M.label,i.jsxs("span",{className:"text-muted ms-2 small",children:["(",pe,"/",ce.length,")"]})]})]}),i.jsx("div",{className:"btn-group btn-group-sm",role:"group","aria-label":`Acciones ${M.label}`,children:i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>ue(M.id,!fe),disabled:he.isPending,children:fe?"Expandir":"Contraer"})})]}),!fe&&i.jsx("div",{className:"mt-2 ms-4 ps-3 border-start border-2 border-light",children:i.jsx("div",{className:"row",children:ce.map(Le=>i.jsx("div",{className:"col-md-6 mb-2",children:i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:`perm-${T.id}-${Le.id}`,checked:D.includes(Le.id),onChange:()=>Se(Le.id),disabled:he.isPending||Z}),i.jsxs("label",{className:"form-check-label",htmlFor:`perm-${T.id}-${Le.id}`,children:[Le.label," ",i.jsxs("span",{className:"text-muted",children:["(",Le.path,")"]})]})]})},Le.id))})})]},M.id)}),i.jsx("div",{className:"form-text mt-2",children:"Nota: Cambiar contrasea y Home siempre estn disponibles para todos."})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:xe,disabled:he.isPending,children:"Cancelar"}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:P,disabled:he.isPending||Z,children:"Guardar"})]})]})})})]})}function RT(e){const a=Ye.defaults.baseURL??window.location.origin;return`${String(a).replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`}async function TT(e,a){return Ye.post("/integrations/vima-to-lista/dry-run-upload",e,{signal:a})}async function DT(e,a){return Ye.post("/integrations/vima-to-lista/upload",e,{responseType:"blob",signal:a})}async function _v(e,a,s){const l=RT(`/integrations/vima-to-lista/progress/${e}`),c=kn()?.token,d=await fetch(l,{method:"GET",headers:c?{Authorization:`Bearer ${c}`}:void 0,signal:s});if(!d.ok||!d.body)throw new Error(`No se pudo abrir el stream de progreso (${d.status})`);const f=d.body.getReader(),h=new TextDecoder("utf-8");let g="";for(;;){const{value:p,done:v}=await f.read();if(v)break;g+=h.decode(p,{stream:!0});let x;for(;(x=g.indexOf(`
`))>=0;){const N=g.slice(0,x).trim();if(g=g.slice(x+1),!!N)try{a(JSON.parse(N))}catch{}}}}function R0(e){return`${e.name}::${e.size}::${e.lastModified}`}function zT(e){return e.normalize("NFKC").trim().replace(/\s+/g,"").toLowerCase()}function Qc(e){return zT(e.name)}function kT(e){if(!e)return null;const a=e.split(",").map(s=>s.trim().toLowerCase()).filter(Boolean);return a.length===0?null:a}function ch(e,a){const s=kT(a);if(!s)return e;const l=s.filter(c=>c.startsWith("."));return l.length===0?e:e.filter(c=>l.some(d=>c.name.toLowerCase().endsWith(d)))}function MT(e,a){if(a.length===0)return{merged:e,added:[],duplicates:[]};const s=[...e],l=[],c=[],d=new Set(e.map(Qc));for(const f of a){const h=Qc(f);if(d.has(h)){c.push(f);continue}d.add(h),s.push(f),l.push(f)}return{merged:s,added:l,duplicates:c}}function to({label:e,accept:a,disabled:s=!1,file:l,onChange:c}){const d=b.useRef(null),f=b.useRef(0),[h,g]=b.useState(!1),p=()=>{s||d.current?.click()},v=()=>{s||(d.current&&(d.current.value=""),c(null))},x=C=>{c(C.target.files?.[0]??null),C.currentTarget.value=""},N=C=>{C.preventDefault(),C.stopPropagation(),!s&&(f.current+=1,g(!0))},I=C=>{C.preventDefault(),C.stopPropagation()},j=C=>{C.preventDefault(),C.stopPropagation(),!s&&(f.current=Math.max(0,f.current-1),f.current===0&&g(!1))},_=C=>{if(C.preventDefault(),C.stopPropagation(),f.current=0,g(!1),s)return;const q=C.dataTransfer?.files?Array.from(C.dataTransfer.files):[],J=ch(q,a)[0]??null;J&&(d.current&&(d.current.value=""),c(J))};return i.jsxs("div",{children:[i.jsx("label",{className:"form-label",children:e}),i.jsx("input",{ref:d,className:"d-none",type:"file",accept:a,onChange:x,disabled:s}),i.jsx("div",{className:`vi-file-drop-target${h?" is-dragover":""}`,onDragEnter:N,onDragOver:I,onDragLeave:j,onDrop:_,"aria-disabled":s?"true":"false",children:i.jsxs("div",{className:"input-group",children:[i.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:p,disabled:s,children:"Examinar"}),i.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:v,disabled:s||!l,children:"Eliminar"}),i.jsx("input",{className:"form-control",type:"text",readOnly:!0,value:l?l.name:"No se ha seleccionado ningn archivo."})]})})]})}const UT={status:"estado",progress:"progreso",complete:"completado",error:"error"},LT={file:"archivo",file_done:"archivo procesado",file_error:"archoivo con error",render:"generando",failed:"fallido",received:"recibido",loading:"cargando",upload:"subida",analysis:"anlisis",init:"iniciando",processing:"procesamiento",opening:"abriendo",reading:"leyendo",writing:"escribiendo",saving:"guardando",cancelled:"cancelado",canceled:"cancelado",copied:"copiado",skipped:"omitido",skipped_incremental:"omitido (incremental)",stopped_blank:"detenido (en blanco)",complete:"completado",done:"finalizado",error:"error"},BT=[[/\bcomplete(d)?\b/gi,"completado"],[/\bstopped_blank\b/gi,"detenido (en blanco)"],[/\bskipped_incremental\b/gi,"omitido (incremental)"],[/\bskipped\b/gi,"omitido"],[/\bprocessing\b/gi,"procesando"],[/\bopening\b/gi,"abriendo"],[/\breading\b/gi,"leyendo"],[/\bwriting\b/gi,"escribiendo"],[/\bsaving\b/gi,"guardando"],[/\breceived\b/gi,"recibido"],[/\bloading\b/gi,"cargando"],[/\bupload(ing)?\b/gi,"subiendo"],[/\bdownload(ing)?\b/gi,"descargando"],[/\bmerge(s|d|ing)?\b/gi,"consolidando"]];function T0(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function Il(e){if(!e)return"";const a=e.toLowerCase();return T0(UT[a]??e)}function mo(e){if(!e)return"";const a=e.trim().toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),s=e.trim().replace(/[_-]+/g," ");return T0(LT[a]??Yl(s))}function Yl(e){if(!e)return"";let a=e;for(const[s,l]of BT)a=a.replace(s,l);return a}function qT(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function IT(e,a){const s=URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=a,document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(s)}function $T(){const[e,a]=b.useState(null),[s,l]=b.useState(null),[c,d]=b.useState(""),[f,h]=b.useState(11),[g,p]=b.useState(11),[v,x]=b.useState(!0),[N,I]=b.useState(!0),[j,_]=b.useState(!0),[C,q]=b.useState(!0),[T,J]=b.useState(!1),[D,R]=b.useState(""),[Z,L]=b.useState(null),[W,ue]=b.useState(null),[Ae,xe]=b.useState(null),[he,Ne]=b.useState([]),[ke,Te]=b.useState(""),U=b.useRef(null),$=b.useRef(null),[X,ye]=b.useState(!1),[Se,w]=b.useState(!1),[P,ie]=b.useState("Ingresa la contrasea de apertura del archivo y vuelve a intentar."),M=b.useMemo(()=>!!e&&!!s&&!Z,[e,s,Z]);function ce(ze){Ne(me=>[ze,...me].slice(0,200));const Ze=typeof ze.percent=="number"?ze.percent:typeof ze.progress=="number"?ze.progress:null;Ze!=null&&Number.isFinite(Ze)&&xe(Math.max(0,Math.min(100,Ze)))}function pe(){U.current?.abort(),U.current=null}function De(){Z&&pe()}function $e(ze,Ze){if(!e||!s)throw new Error("Faltan archivos");const me=new FormData;me.append("vima_file",e),me.append("lista_file",s);const Fe=(Ze??c).trim();return Fe&&me.append("vima_password",Fe),me.append("vima_start_row",String(f)),me.append("lista_start_row",String(g)),me.append("require_all_g_to_n",v?"true":"false"),me.append("incremental",N?"true":"false"),me.append("strict_incremental",j?"true":"false"),me.append("replicate_merges",C?"true":"false"),me.append("update_existing_periodo",T?"true":"false"),D.trim()&&me.append("oi_pattern",D.trim()),me.append("operation_id",ze),me}function fe(){$.current=null,w(!1)}function Le(ze,Ze){$.current=ze,ie(Ze),w(!0)}function Ie(ze,Ze){if(!gt.isAxiosError(ze)){Te(String(ze));return}const me=ze;if(me.code==="ERR_CANCELED")return;const Fe=me.response?.headers?.["x-code"],Ce=me.response?.data?.detail??me.message;if(Fe==="PASSWORD_REQUIRED"){Te(""),Le(Ze,"El archivo VIMA est protegido. Ingresa la contrasea de apertura para continuar.");return}if(Fe==="WRONG_PASSWORD"){Te(""),Le(Ze,"Contrasea incorrecta. Intenta nuevamente.");return}Te(String(Ce))}async function Ge(ze){Te(""),ue(null),Ne([]),xe(0);const Ze=crypto.randomUUID();U.current=new AbortController,_v(Ze,ce,U.current.signal).catch(()=>{}),L("dry");try{const me=$e(Ze,ze?.passwordOverride),Fe=await TT(me,U.current.signal);ue(Fe.data)}catch(me){Ie(me,"dry")}finally{pe(),L(null)}}async function dt(ze){Te(""),Ne([]),xe(0);const Ze=crypto.randomUUID();U.current=new AbortController,_v(Ze,ce,U.current.signal).catch(()=>{}),L("upload");try{const me=$e(Ze,ze?.passwordOverride),Fe=await DT(me,U.current.signal),Ce=Fe.headers?.["content-disposition"],Je=qT(Ce)??"LISTA_SALIDA.xlsx";IT(Fe.data,Je)}catch(me){Ie(me,"upload")}finally{pe(),L(null)}}return i.jsxs("div",{className:"container-fluid",children:[i.jsxs("div",{className:"row gap-20",children:[i.jsx("div",{className:"col-md-7",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsx("h4",{className:"c-grey-900 mB-20",children:"Integracin VIMA  LISTA"}),i.jsx("div",{className:"mB-15",children:i.jsx(to,{label:"Archivo VIMA (.xlsm)",accept:".xlsm,.xlsx",file:e,onChange:a,disabled:!!Z})}),i.jsx("div",{className:"mB-15",children:i.jsx(to,{label:"Archivo LISTA (.xlsx)",accept:".xlsx,.xlsm",file:s,onChange:l,disabled:!!Z})}),i.jsxs("div",{className:"mB-15",children:[i.jsx("label",{className:"form-label",children:"Contrasea VIMA (si aplica)"}),i.jsx("input",{className:"form-control",type:"password",value:c,onChange:ze=>d(ze.target.value),placeholder:"(opcional)"})]}),X?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label",children:"Fila inicio VIMA"}),i.jsx("input",{className:"form-control",type:"number",value:f,onChange:ze=>h(Number(ze.target.value))})]}),i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label",children:"Fila inicio LISTA"}),i.jsx("input",{className:"form-control",type:"number",value:g,onChange:ze=>p(Number(ze.target.value))})]})]}),i.jsxs("div",{className:"mB-15",children:[i.jsx("label",{className:"form-label",children:"Patrn OI (regex, opcional)"}),i.jsx("input",{className:"form-control",value:D,onChange:ze=>R(ze.target.value),placeholder:"Ej: OI-(\\\\d{4})-(\\\\d+)"}),i.jsx("small",{className:"text-muted",children:"Nota: si pegas barras invertidas, el backend ya normaliza doble backslash."})]}),i.jsxs("div",{className:"row mT-10",children:[i.jsx("div",{className:"col-md-6 mB-10",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"requireAll",checked:v,onChange:ze=>x(ze.target.checked)}),i.jsx("label",{className:"form-check-label",htmlFor:"requireAll",children:"Requerir GN completos"})]})}),i.jsx("div",{className:"col-md-6 mB-10",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateMerges",checked:C,onChange:ze=>q(ze.target.checked)}),i.jsx("label",{className:"form-check-label",htmlFor:"replicateMerges",children:"Replicar merges"})]})}),i.jsx("div",{className:"col-md-6 mB-10",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"incremental",checked:N,onChange:ze=>I(ze.target.checked)}),i.jsx("label",{className:"form-check-label",htmlFor:"incremental",children:"Incremental"})]})}),i.jsx("div",{className:"col-md-6 mB-10",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"strictIncremental",checked:j,onChange:ze=>_(ze.target.checked),disabled:!N}),i.jsx("label",{className:"form-check-label",htmlFor:"strictIncremental",children:"Incremental estricto"})]})}),i.jsx("div",{className:"col-md-6 mB-10",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"updateExistingPeriodo",checked:T,onChange:ze=>J(ze.target.checked),disabled:!N}),i.jsx("label",{className:"form-check-label",htmlFor:"updateExistingPeriodo",children:"Actualizar periodo en OIs existentes"})]})})]})]}):null,ke&&i.jsx("div",{className:"alert alert-danger mT-15",role:"alert",children:ke}),i.jsx("div",{className:"d-flex justify-content-end mT-10",children:i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>ye(ze=>!ze),disabled:!!Z,children:X?"Menos Opciones":"Ms Opciones"})}),i.jsxs("div",{className:"d-flex gap-10 mT-20",children:[i.jsx("button",{className:"btn btn-primary",disabled:!M,onClick:()=>void dt(),children:Z==="upload"?"Procesando...":"Procesar y Descargar"}),i.jsx("button",{className:"btn btn-outline-danger",disabled:!Z,onClick:De,children:"Cancelar"}),i.jsx("button",{className:"btn btn-outline-primary",disabled:!M,onClick:()=>void Ge(),children:Z==="dry"?"Analizando...":"Analizar"})]}),W&&i.jsxs("div",{className:"mT-20",children:[i.jsx("h5",{className:"c-grey-900",children:"Resumen"}),i.jsxs("ul",{className:"mB-0",children:[i.jsxs("li",{children:["Filas a copiar: ",i.jsx("b",{children:W.would_copy})]}),i.jsxs("li",{children:["Fila inicio escritura (LISTA): ",i.jsx("b",{children:W.start_write_row})]}),i.jsxs("li",{children:["ltimo OI en LISTA: ",i.jsx("b",{children:String(W.last_oi_in_lista??"-")})]}),i.jsxs("li",{children:["Primer OI a copiar: ",i.jsx("b",{children:String(W.first_oi_to_copy??"-")})]}),i.jsxs("li",{children:["ltimo OI a copiar: ",i.jsx("b",{children:String(W.last_oi_to_copy??"-")})]})]})]})]})}),i.jsx("div",{className:"col-md-5",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[i.jsx("span",{children:"Progreso"}),Z?i.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),i.jsx("div",{className:"progress mB-15",style:{height:12},children:i.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${Ae??0}%`},"aria-valuenow":Ae??0,"aria-valuemin":0,"aria-valuemax":100})}),i.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:he.length===0?i.jsx("div",{className:"text-muted",children:"Sin eventos an."}):i.jsx("ul",{className:"list-unstyled mB-0",children:he.map((ze,Ze)=>i.jsxs("li",{className:"mB-10",children:[i.jsxs("div",{children:[i.jsx("b",{children:Il(ze.type)})," ",ze.stage?i.jsxs("span",{className:"text-muted",children:["[",mo(ze.stage),"]"]}):null,typeof ze.percent=="number"?i.jsxs("span",{className:"text-muted",children:["  ",ze.percent.toFixed(1),"%"]}):null]}),i.jsx("div",{className:"text-muted",children:Yl(ze.message??ze.detail??"")}),ze.code?i.jsxs("div",{className:"text-muted",children:["Cdigo: ",ze.code]}):null]},Ze))})})]})})]}),i.jsx(gu,{show:Se,title:"Archivo protegido",confirmLabel:"Continuar",helpText:P,onClose:fe,onConfirm:ze=>{d(ze),w(!1);const Ze=$.current;$.current=null,Ze&&(Ze==="dry"?Ge({passwordOverride:ze}):dt({passwordOverride:ze}))}})]})}function Yc(e){const a=e,s=String(a?.name||""),l=String(a?.message||a||"");return s==="AbortError"||/aborted/i.test(l)||/abort/i.test(l)}function Kl(e){const a=Ye.defaults.baseURL??window.location.origin;return`${String(a).replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`}async function uh(e,a){if(!e.body)return;const s=e.body.getReader(),l=new TextDecoder("utf-8");let c="";try{for(;;){let f;try{f=await s.read()}catch(v){if(Yc(v))return;throw v}const{value:h,done:g}=f;if(g)break;if(!h||h.length===0)continue;c+=l.decode(h,{stream:!0});let p;for(;(p=c.indexOf(`
`))>=0;){const v=c.slice(0,p).trim();if(c=c.slice(p+1),!!v)try{const x=JSON.parse(v);x&&x.progress!=null&&x.percent==null&&(x.percent=x.progress),x&&x.percent!=null&&x.progress==null&&(x.progress=x.percent),a(x)}catch{}}}const d=c.trim();if(d)try{const f=JSON.parse(d);f&&f.progress!=null&&f.percent==null&&(f.percent=f.progress),f&&f.percent!=null&&f.progress==null&&(f.progress=f.percent),a(f)}catch{}}catch(d){if(Yc(d))return;throw d}}function mr(e,a,s){const l=new Error(e);return a!=null&&(l.status=a),s&&(l.code=s),l}async function dh(e,a,s){const l=Kl(`/integrations/vima-to-lista/progress/${e}`),c=kn()?.token,d=await fetch(l,{method:"GET",headers:{...c?{Authorization:`Bearer ${c}`}:{},Accept:"application/x-ndjson","Cache-Control":"no-cache"},signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw mr(`No se pudo abrir el stream (${d.status})`,d.status,f)}await uh(d,a)}async function FT(e,a,s){const l=Kl(`/logistica/log01/progress/${e}`),c=kn()?.token,d=await fetch(l,{method:"GET",headers:{...c?{Authorization:`Bearer ${c}`}:{},Accept:"application/x-ndjson","Cache-Control":"no-cache"},signal:s});if(!d.ok){const v=d.headers.get("X-Code")??void 0;throw mr(`No se pudo abrir el stream (${d.status})`,d.status,v)}if(!(d.headers.get("Content-Type")??"").includes("application/x-ndjson"))throw mr("Stream no es NDJSON",d.status);if(!d.body)throw mr("Stream sin body",d.status);const h=d.body.getReader(),g=new TextDecoder("utf-8");let p="";try{for(;;){let x;try{x=await h.read()}catch(_){if(Yc(_))return;throw _}const{value:N,done:I}=x;if(I)break;if(!N||N.length===0)continue;p+=g.decode(N,{stream:!0});let j;for(;(j=p.indexOf(`
`))>=0;){const _=p.slice(0,j).trim();if(p=p.slice(j+1),!!_)try{a(JSON.parse(_))}catch{}}}const v=p.trim();if(v)try{a(JSON.parse(v))}catch{}}catch(v){if(Yc(v))return;throw v}}async function HT(e,a,s){const l=Kl("/bases/actualizar/dry-run-upload"),c=kn()?.token,d=await fetch(l,{method:"POST",headers:c?{Authorization:`Bearer ${c}`}:void 0,body:e,signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;let h=`Error (${d.status})`;try{const g=await d.json();g?.detail&&(h=String(g.detail))}catch{}throw mr(h,d.status,f)}await uh(d,a)}async function VT(e,a){return Ye.post("/bases/actualizar/upload",e,{responseType:"blob",signal:a})}async function ZT(e,a){return Ye.post("/logistica/log01/start",e,{signal:a})}async function GT(e,a,s){const l=Kl(`/logistica/log01/poll/${e}?cursor=${encodeURIComponent(a)}`),c=kn()?.token,d=await fetch(l,{method:"GET",headers:c?{Authorization:`Bearer ${c}`}:void 0,signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw mr(`No se pudo hacer poll (${d.status})`,d.status,f)}return await d.json()}async function PT(e,a){return Ye.get(`/logistica/log01/result/${encodeURIComponent(e)}`,{responseType:"blob",signal:a,validateStatus:s=>s===200})}async function QT(e){await Ye.post(`/logistica/log01/cancel/${encodeURIComponent(e)}`)}async function Cm(e={}){const{limit:a=20,offset:s=0,include_deleted:l=!1,q:c,dateFrom:d,dateTo:f,source:h,status:g}=e,p={limit:a,offset:s,include_deleted:l};c&&c.trim()&&(p.q=c.trim()),d&&d.trim()&&(p.dateFrom=d.trim()),f&&f.trim()&&(p.dateTo=f.trim()),h&&h.trim()&&(p.source=h.trim()),g&&g.trim()&&(p.status=g.trim());const{data:v}=await Ye.get("/logistica/log01/history",{params:p});return v}async function YT(e,a,s){return Ye.get(`/logistica/log01/history/${encodeURIComponent(String(e))}/artifact/${encodeURIComponent(a)}`,{responseType:"blob",signal:s,validateStatus:l=>l===200})}async function KT(e,a){await Ye.delete(`/logistica/log01/history/${encodeURIComponent(String(e))}`,{data:void 0})}async function XT(){return(await Ye.get("/logistica/log02/explorador/roots")).data}async function JT(e){return(await Ye.get("/logistica/log02/explorador/listar",{params:{path:e}})).data}async function WT(e){return(await Ye.post("/logistica/log02/validar-rutas-unc",e)).data}async function e2(e,a){return(await Ye.post("/logistica/log02/copiar-conformes/start",e,{signal:a})).data}async function t2(e,a,s){const l=Kl(`/logistica/log02/copiar-conformes/progress/${e}`),c=kn()?.token,d=await fetch(l,{method:"GET",headers:{...c?{Authorization:`Bearer ${c}`}:{},Accept:"application/x-ndjson","Cache-Control":"no-cache"},signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw mr(`No se pudo abrir el stream (${d.status})`,d.status,f)}await uh(d,a)}async function n2(e,a,s){const l=Kl(`/logistica/log02/copiar-conformes/poll/${e}?cursor=${encodeURIComponent(a)}`),c=kn()?.token,d=await fetch(l,{method:"GET",headers:c?{Authorization:`Bearer ${c}`}:void 0,signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw mr(`No se pudo hacer poll (${d.status})`,d.status,f)}return await d.json()}async function a2(e){await Ye.post(`/logistica/log02/copiar-conformes/cancel/${encodeURIComponent(e)}`)}async function s2(e={}){const{limit:a=20,offset:s=0,q:l,dateFrom:c,dateTo:d,origin:f}=e,h={limit:a,offset:s};l&&l.trim()&&(h.q=l.trim()),c&&c.trim()&&(h.dateFrom=c.trim()),d&&d.trim()&&(h.dateTo=d.trim()),f&&f.trim()&&(h.origin=f.trim());const{data:g}=await Ye.get("/oi/tools/formato-ac/history",{params:h});return g}async function r2(e,a){return Ye.get(`/oi/tools/formato-ac/history/${encodeURIComponent(String(e))}/artifact`,{responseType:"blob",signal:a,validateStatus:s=>s===200})}async function D0(){const{data:e}=await Ye.get("/merge/config/upload-limits");return e}async function z0(e,a,s){return Ye.post(`/merge/?mode=${encodeURIComponent(a)}`,e,{responseType:"blob",signal:s})}async function k0(e){await Ye.post(`/merge/cancel/${encodeURIComponent(e)}`)}async function l2(e){const{data:a}=await Ye.post("/tools/files/upload",e);return a}async function i2(e){const{data:a}=await Ye.post("/tools/excel/inspect",e);return a}async function o2(e){const{data:a}=await Ye.post("/tools/excel/update",e);return a}async function c2(e){const{data:a}=await Ye.post("/tools/excel/change-password",e);return a}async function u2(e){const{data:a}=await Ye.post("/tools/excel/validate",e);return a}function d2({show:e,disabled:a=!1,title:s,accept:l,files:c,onClose:d,onAddFiles:f,onRemoveFile:h,onRemoveAll:g}){const p=b.useRef(null),v=b.useRef(0),[x,N]=b.useState(!1),[I,j]=b.useState("");b.useEffect(()=>{if(!e)return;const L=W=>{W.key==="Escape"&&d()};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[e,d]),b.useEffect(()=>{e||N(!1)},[e]),b.useEffect(()=>{e&&j("")},[e]);const _=b.useCallback(L=>{const W=ch(L,l);if(W.length===0)return;const ue=new Set(c.map(Qc)),Ae=new Set(ue),xe=[],he=[];for(const Ne of W){const ke=Qc(Ne);if(Ae.has(ke)){he.push(Ne);continue}Ae.add(ke),xe.push(Ne)}if(he.length>0){const Ne=Array.from(new Set(he.map(Te=>Te.name))),ke=he.length;if(Ne.length===1){const Te=ke===1?"Se omiti 1 archivo duplicado":`Se omitieron ${ke} archivos duplicados`;j(`${Te}: "${Ne[0]}".`)}else j(`Se omitieron ${ke} archivos duplicados: ${Ne.join(", ")}.`)}xe.length>0&&f(xe)},[l,c,f]);if(b.useEffect(()=>{if(!e)return;const L=ue=>{ue.preventDefault(),ue.stopPropagation()},W=ue=>{if(ue.preventDefault(),ue.stopPropagation(),a)return;const Ae=ue.dataTransfer?.files?Array.from(ue.dataTransfer.files):[];_(Ae)};return window.addEventListener("dragover",L,!0),window.addEventListener("drop",W,!0),()=>{window.removeEventListener("dragover",L,!0),window.removeEventListener("drop",W,!0)}},[e,a,_]),!e)return null;const C=()=>{a||p.current?.click()},q=L=>{const W=L.target.files?Array.from(L.target.files):[];_(W),L.currentTarget.value=""},T=()=>{a||(p.current&&(p.current.value=""),g())},J=L=>{L.preventDefault(),L.stopPropagation(),!a&&(v.current+=1,N(!0))},D=L=>{L.preventDefault(),L.stopPropagation()},R=L=>{L.preventDefault(),L.stopPropagation(),!a&&(v.current=Math.max(0,v.current-1),v.current===0&&N(!1))},Z=L=>{if(L.preventDefault(),L.stopPropagation(),v.current=0,N(!1),a)return;const W=L.dataTransfer?.files?Array.from(L.dataTransfer.files):[];_(W)};return i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"filePickerModalTitle",onClick:L=>{L.target===L.currentTarget&&d()},children:i.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered",children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{id:"filePickerModalTitle",className:"modal-title",children:s}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:d})]}),i.jsxs("div",{className:"modal-body",children:[i.jsx("input",{ref:p,className:"d-none",type:"file",accept:l,multiple:!0,onChange:q,disabled:a}),I?i.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between",role:"alert",children:[i.jsx("div",{children:I}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>j("")})]}):null,i.jsxs("div",{className:`vi-dropzone${x?" is-dragover":""}`,onDragEnter:J,onDragOver:D,onDragLeave:R,onDrop:Z,"aria-disabled":a?"true":"false",children:[i.jsxs("div",{className:"text-muted",children:["Arrastra y suelta archivos aqu, o"," ",i.jsx("button",{type:"button",className:"btn btn-link p-0 align-baseline",onClick:C,disabled:a,children:"selecciona desde tu equipo"}),"."]}),l?i.jsxs("div",{className:"form-text",children:["Tipos permitidos: ",l]}):null]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mT-15 mB-10",children:[i.jsx("div",{className:"text-muted",children:c.length===0?"No se han seleccionado archivos.":c.length===1?"1 archivo seleccionado":`${c.length} archivos seleccionados`}),i.jsxs("div",{className:"d-flex gap-10",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:C,disabled:a,children:"Agregar ms"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-danger",onClick:T,disabled:a||c.length===0,children:"Eliminar todos"})]})]}),c.length===0?null:i.jsx("div",{style:{maxHeight:320,overflow:"auto"},children:i.jsx("ul",{className:"list-group",children:c.map(L=>{const W=R0(L);return i.jsxs("li",{className:"list-group-item d-flex align-items-center justify-content-between gap-10",children:[i.jsx("div",{className:"text-truncate",style:{minWidth:0},children:L.name}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>h(W),disabled:a,children:"Eliminar"})]},W)})})})]}),i.jsx("div",{className:"modal-footer",children:i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:d,children:"Cerrar"})})]})})})}function f2(e){if(e.length===0)return"";const a=Array.from(new Set(e.map(l=>l.name))),s=e.length;return a.length===1?`${s===1?"Se omiti 1 archivo duplicado":`Se omitieron ${s} archivos duplicados`}: "${a[0]}".`:`Se omitieron ${s} archivos duplicados: ${a.join(", ")}.`}function bu({label:e,title:a,accept:s,disabled:l=!1,fullDropArea:c=!1,files:d,setFiles:f}){const[h,g]=b.useState(!1),[p,v]=b.useState(!1),[x,N]=b.useState(""),I=b.useRef(0),j=b.useMemo(()=>d.length===0?"No se han seleccionado archivos.":d.length===1?"1 archivo seleccionado":`${d.length} archivos seleccionados`,[d.length]),_=d.length===0?"Agregar archivos":"Modificar/agregar archivos",C=Z=>{const L=ch(Z,s);L.length!==0&&f(W=>{const{merged:ue,duplicates:Ae}=MT(W,L);return Ae.length>0&&N(f2(Ae)),ue})},q=Z=>{Z.preventDefault(),Z.stopPropagation(),!l&&(I.current+=1,v(!0))},T=Z=>{Z.preventDefault(),Z.stopPropagation()},J=Z=>{Z.preventDefault(),Z.stopPropagation(),!l&&(I.current=Math.max(0,I.current-1),I.current===0&&v(!1))},D=Z=>{if(Z.preventDefault(),Z.stopPropagation(),I.current=0,v(!1),l)return;const L=Z.dataTransfer?.files?Array.from(Z.dataTransfer.files):[];C(L)},R=i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"form-label",children:e}),i.jsxs("div",{className:"input-group",children:[i.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>g(!0),disabled:l,children:_}),i.jsx("input",{className:"form-control",type:"text",readOnly:!0,value:j})]}),x?i.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between mT-10",role:"alert",children:[i.jsx("div",{children:x}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>N("")})]}):null]});return i.jsxs(i.Fragment,{children:[c?i.jsx("div",{className:`vi-file-drop-target${p?" is-dragover":""}`,onDragEnter:q,onDragOver:T,onDragLeave:J,onDrop:D,"aria-disabled":l?"true":"false",children:R}):i.jsxs("div",{children:[i.jsx("label",{className:"form-label",children:e}),i.jsx("div",{className:`vi-file-drop-target${p?" is-dragover":""}`,onDragEnter:q,onDragOver:T,onDragLeave:J,onDrop:D,"aria-disabled":l?"true":"false",children:i.jsxs("div",{className:"input-group",children:[i.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>g(!0),disabled:l,children:_}),i.jsx("input",{className:"form-control",type:"text",readOnly:!0,value:j})]})}),x?i.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between mT-10",role:"alert",children:[i.jsx("div",{children:x}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>N("")})]}):null]}),i.jsx(d2,{show:h,disabled:l,title:a,accept:s,files:d,onClose:()=>g(!1),onAddFiles:C,onRemoveFile:Z=>f(L=>L.filter(W=>R0(W)!==Z)),onRemoveAll:()=>f([])})]})}function m2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function h2(e,a){const s=URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=a,document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(s)}async function p2(e){if(!gt.isAxiosError(e))return{detail:String(e)};const a=e,s=a.response?.headers?.["x-code"]??void 0,l=a.response?.data;if(l instanceof Blob)try{const d=await l.text(),f=JSON.parse(d);return{detail:String(f?.detail??d??a.message),code:s}}catch{return{detail:a.message,code:s}}const c=l?.detail??a.message;return{detail:String(c),code:s}}function g2(){const[e,a]=b.useState(null),[s,l]=b.useState([]),[c,d]=b.useState(""),[f,h]=b.useState(""),[g,p]=b.useState("^OI-(\\d+)-(\\d{4})$"),[v,x]=b.useState(9),[N,I]=b.useState("ERROR FINAL"),[j,_]=b.useState(!0),[C,q]=b.useState(!1),[T,J]=b.useState(!1),[D,R]=b.useState(null),[Z,L]=b.useState(null),[W,ue]=b.useState([]),[Ae,xe]=b.useState(""),he=b.useRef(null),Ne=b.useRef(null),[ke,Te]=b.useState(!1),[U,$]=b.useState(!1),[X,ye]=b.useState("Ingresa la contrasea de apertura del archivo y vuelve a intentar."),Se=b.useMemo(()=>!!e&&s.length>0&&!D,[e,s,D]);function w(fe){ue(Ie=>[fe,...Ie].slice(0,200));const Le=typeof fe.percent=="number"?fe.percent:typeof fe.progress=="number"?fe.progress:null;Le!=null&&Number.isFinite(Le)&&L(Math.max(0,Math.min(100,Le)))}function P(){he.current?.abort(),he.current=null}function ie(){D&&P()}function M(fe,Le){if(!e)throw new Error("Falta el archivo Base");if(s.length===0)throw new Error("Faltan archivos OI");const Ie=new FormData;Ie.append("base_file",e);for(const dt of s)Ie.append("oi_files",dt);const Ge=(Le??c).trim();return Ge&&Ie.append("default_password",Ge),f.trim()&&Ie.append("per_file_passwords_json",f.trim()),g.trim()&&Ie.append("oi_pattern",g.trim()),Ie.append("oi_start_row",String(v)),N.trim()&&Ie.append("base_sheet",N.trim()),fe&&Ie.append("operation_id",fe),Ie}function ce(){Ne.current=null,$(!1)}function pe(fe,Le){Ne.current=fe,ye(Le),$(!0)}async function De(fe){xe(""),ue([]),L(0),he.current=new AbortController,R("dry");try{const Le=M(void 0,fe?.passwordOverride);await HT(Le,w,he.current.signal)}catch(Le){if(Le?.name==="AbortError")return;const Ie=Le?.code,Ge=String(Le?.message??Le);if(Ie==="PASSWORD_REQUIRED"){xe(""),pe("dry","Algn archivo est protegido. Ingresa la contrasea de apertura para continuar.");return}else if(Ie==="WRONG_PASSWORD"){xe(""),pe("dry","Contrasea incorrecta. Intenta nuevamente.");return}else xe(Ge)}finally{P(),R(null)}}async function $e(fe){xe(""),ue([]),L(0);const Le=crypto.randomUUID();he.current=new AbortController,dh(Le,w,he.current.signal).catch(()=>{}),R("upload");try{const Ie=M(Le,fe?.passwordOverride);Ie.append("replicate_merges",j?"true":"false"),Ie.append("replicate_row_heights",C?"true":"false"),Ie.append("replicate_col_widths",T?"true":"false");const Ge=await VT(Ie,he.current.signal),dt=Ge.headers["content-disposition"],ze=Ge.headers["x-file-name"],Ze=m2(dt)??ze??"base_actualizada.xlsx";h2(Ge.data,Ze)}catch(Ie){if(gt.isAxiosError(Ie)&&Ie.code==="ERR_CANCELED")return;const{detail:Ge,code:dt}=await p2(Ie);if(dt==="PASSWORD_REQUIRED"){xe(""),pe("upload","Algn archivo est protegido. Ingresa la contrasea de apertura para continuar.");return}else if(dt==="WRONG_PASSWORD"){xe(""),pe("upload","Contrasea incorrecta. Intenta nuevamente.");return}else xe(Ge)}finally{P(),R(null)}}return i.jsxs("div",{className:"container-fluid",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-7",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Actualizacin de Bases"}),i.jsx("p",{className:"text-muted mB-20",children:"Integra mltiples OIs en una Base (hoja ERROR FINAL). Soporta dry-run (NDJSON) y ejecucin con descarga."}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12 mB-15",children:i.jsx(to,{label:"Base (xlsx)",accept:".xlsx",file:e,onChange:a,disabled:!!D})}),i.jsx("div",{className:"col-12 mB-15",children:i.jsx(bu,{label:"Archivos OI (xlsx/xlsm)",title:"Archivos OI",accept:".xlsx,.xlsm",files:s,setFiles:l,disabled:!!D})}),i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label",children:"Contrasea por defecto (opcional)"}),i.jsx("input",{className:"form-control",type:"password",value:c,onChange:fe=>d(fe.target.value),disabled:!!D})]}),i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label",children:"Hoja Base (opcional)"}),i.jsx("input",{className:"form-control",value:N,onChange:fe=>I(fe.target.value),disabled:!!D})]}),ke?i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label",children:"Regex OI (opcional)"}),i.jsx("input",{className:"form-control",value:g,onChange:fe=>p(fe.target.value),disabled:!!D})]}):null,i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label",children:"Fila inicio OI"}),i.jsx("input",{className:"form-control",type:"number",min:1,value:v,onChange:fe=>x(Number(fe.target.value||9)),disabled:!!D})]}),i.jsxs("div",{className:"col-12 mB-15",children:[i.jsx("label",{className:"form-label",children:"Contraseas por archivo (opcional)"}),i.jsx("textarea",{className:"form-control",rows:4,value:f,onChange:fe=>h(fe.target.value),disabled:!!D,placeholder:`Ej:
OI-0001-2025.xlsx: clave1
OI-0002-2025.xlsx: clave2

O JSON:
{"OI-0001-2025.xlsx":"clave1"}`})]}),ke?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"col-md-4 mB-15",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateMerges",checked:j,onChange:fe=>_(fe.target.checked),disabled:!!D}),i.jsx("label",{className:"form-check-label",htmlFor:"replicateMerges",children:"Replicar merges"})]})}),i.jsx("div",{className:"col-md-4 mB-15",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateRowHeights",checked:C,onChange:fe=>q(fe.target.checked),disabled:!!D}),i.jsx("label",{className:"form-check-label",htmlFor:"replicateRowHeights",children:"Replicar alto filas"})]})}),i.jsx("div",{className:"col-md-4 mB-15",children:i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateColWidths",checked:T,onChange:fe=>J(fe.target.checked),disabled:!!D}),i.jsx("label",{className:"form-check-label",htmlFor:"replicateColWidths",children:"Replicar ancho cols"})]})})]}):null]}),Ae&&i.jsx("div",{className:"alert alert-danger mT-10",role:"alert",children:Ae}),i.jsx("div",{className:"d-flex justify-content-end mT-10",children:i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>Te(fe=>!fe),disabled:!!D,children:ke?"Menos Opciones":"Ms Opciones"})}),i.jsxs("div",{className:"d-flex gap-10 mT-15",children:[i.jsx("button",{className:"btn btn-primary",disabled:!Se,onClick:()=>void $e(),children:D==="upload"?"Procesando...":"Procesar y Descargar"}),i.jsx("button",{className:"btn btn-outline-danger",disabled:!D,onClick:ie,children:"Cancelar"}),i.jsx("button",{className:"btn btn-outline-primary",disabled:!Se,onClick:()=>void De(),children:D==="dry"?"Analizando...":"Analizar"})]})]})}),i.jsx("div",{className:"col-md-5",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[i.jsx("span",{children:"Progreso"}),D?i.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),i.jsx("div",{className:"progress mB-15",style:{height:12},children:i.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${Z??0}%`},"aria-valuenow":Z??0,"aria-valuemin":0,"aria-valuemax":100})}),i.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:W.length===0?i.jsx("div",{className:"text-muted",children:"Sin eventos an."}):i.jsx("ul",{className:"list-unstyled mB-0",children:W.map((fe,Le)=>i.jsxs("li",{className:"mB-10",children:[i.jsxs("div",{children:[i.jsx("b",{children:Il(fe.type)})," ",fe.stage?i.jsxs("span",{className:"text-muted",children:["[",mo(fe.stage),"]"]}):null,typeof fe.percent=="number"?i.jsxs("span",{className:"text-muted",children:["  ",fe.percent.toFixed(1),"%"]}):null]}),i.jsx("div",{className:"text-muted",children:Yl(fe.message??fe.detail??"")}),fe.code?i.jsxs("div",{className:"text-muted",children:["Cdigo: ",fe.code]}):null]},Le))})})]})})]}),i.jsx(gu,{show:U,title:"Archivo protegido",confirmLabel:"Continuar",helpText:X,onClose:ce,onConfirm:fe=>{d(fe),$(!1);const Le=Ne.current;Ne.current=null,Le&&(Le==="dry"?De({passwordOverride:fe}):$e({passwordOverride:fe}))}})]})}const b2="America/Lima";function y2(e){if(!e)return null;const a=/filename\*=UTF-8''([^;]+)|filename="([^"]+)"/i.exec(e),s=a?.[1]??a?.[2];if(!s)return null;try{return decodeURIComponent(s)}catch{return s}}function v2(e,a){const s=window.URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=a,document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(s)}function x2(e){if(!e)return"N/D";const s=/[zZ]$/.test(e)||/[+-]\d{2}:\d{2}$/.test(e)||/[+-]\d{4}$/.test(e)?e:`${e}Z`,l=new Date(s);if(Number.isNaN(l.getTime()))return String(e);const d=new Intl.DateTimeFormat("es-PE",{timeZone:b2,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(l),f=h=>d.find(g=>g.type===h)?.value||"";return`${f("day")}/${f("month")}/${f("year")} ${f("hour")}:${f("minute")}`}function S2(e){const a=(e||"").toUpperCase();return a==="COMPLETADO"?"badge bg-success":a==="ERROR"?"badge bg-danger":"badge bg-secondary"}function N2(e){const a=(e||"").toUpperCase();return a==="VIMA_LISTA"?"VIMA LISTA":a==="ACTUALIZACION_BASES"?"ACTUALIZACION BASES":e||"N/D"}function w2(){const[e,a]=b.useState([]),[s,l]=b.useState(0),[c,d]=b.useState(!1),[f,h]=b.useState(""),[g,p]=b.useState(0),[v,x]=b.useState(""),[N,I]=b.useState(""),[j,_]=b.useState(""),[C,q]=b.useState(""),[T,J]=b.useState(20),[D,R]=b.useState(1),[Z,L]=b.useState(()=>({q:"",dateFrom:"",dateTo:"",origin:""})),W=b.useMemo(()=>(D-1)*T,[D,T]);b.useEffect(()=>{let $=!1;return d(!0),h(""),s2({limit:T,offset:W,q:Z.q||void 0,dateFrom:Z.dateFrom||void 0,dateTo:Z.dateTo||void 0,origin:Z.origin||void 0}).then(X=>{$||(a(Array.isArray(X?.items)?X.items:[]),l(typeof X?.total=="number"?X.total:0))}).catch(X=>{if($)return;const ye=X,Se=ye.response?.data?.detail||ye.message||"No se pudo cargar historial.";h(Se)}).finally(()=>{$||d(!1)}),()=>{$=!0}},[Z,W,T,g]);const ue=()=>{L({q:v.trim(),dateFrom:N.trim(),dateTo:j.trim(),origin:C.trim()}),R(1)},Ae=()=>{x(""),I(""),_(""),q(""),L({q:"",dateFrom:"",dateTo:"",origin:""}),R(1),p($=>$+1)},xe=()=>p($=>$+1),he=async $=>{try{h("");const X=await r2($),ye=X.headers["content-disposition"],Se=X.headers["x-file-name"],w=y2(ye)??Se??"formato_ac.xlsx";v2(X.data,w)}catch(X){const ye=X;if(gt.isCancel(ye))return;const Se=ye.response?.data?.detail||ye.message||"No se pudo descargar.";h(Se)}},Ne=s===0?0:W+1,ke=s===0?0:Math.min(W+e.length,s),Te=D>1,U=W+e.length<s;return i.jsx("div",{className:"container-fluid",children:i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[i.jsx("div",{className:"d-flex flex-wrap align-items-center justify-content-between mB-10 gap-10",children:i.jsx("h4",{className:"c-grey-900 mB-0",children:"Historial A-C"})}),f?i.jsx("div",{className:"alert alert-danger",role:"alert",children:f}):null,i.jsxs("form",{className:"row g-2 align-items-end",onSubmit:$=>{$.preventDefault(),ue()},children:[i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:"Buscar"}),i.jsx("input",{className:"form-control form-control-sm",value:v,onChange:$=>x($.target.value),onKeyDown:$=>{$.key==="Enter"&&ue()},placeholder:"Operacion o usuario..."})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Fecha desde"}),i.jsx("input",{type:"date",className:"form-control form-control-sm",value:N,onChange:$=>I($.target.value)})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Fecha hasta"}),i.jsx("input",{type:"date",className:"form-control form-control-sm",value:j,onChange:$=>_($.target.value)})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Origen"}),i.jsxs("select",{className:"form-select form-select-sm",value:C,onChange:$=>q($.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"VIMA_LISTA",children:"VIMA LISTA"}),i.jsx("option",{value:"ACTUALIZACION_BASES",children:"ACTUALIZACION BASES"})]})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Mostrar"}),i.jsxs("select",{className:"form-select form-select-sm",value:T,onChange:$=>{const X=Number($.target.value);J(Number.isFinite(X)?X:20),R(1)},children:[i.jsx("option",{value:20,children:"20"}),i.jsx("option",{value:50,children:"50"}),i.jsx("option",{value:100,children:"100"})]})]}),i.jsxs("div",{className:"col-12 d-flex flex-wrap gap-10 mT-5",children:[i.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:c,children:"Buscar"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:Ae,children:"Limpiar filtros"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:xe,children:"Recargar"})]})]}),i.jsxs("div",{className:"mT-15",children:[c?i.jsx("div",{className:"text-muted",children:"Cargando historial..."}):i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Operacion"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Fecha"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Usuario"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Origen"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Estado"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Acciones"})]})}),i.jsx("tbody",{children:e.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"text-muted small",children:"Sin registros."})}):e.map($=>{const X=$.created_by_full_name||$.created_by_username||"N/D";return i.jsxs("tr",{className:"small",children:[i.jsx("td",{style:{whiteSpace:"nowrap"},children:$.operation_id}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:x2($.created_at)}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:X}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:N2($.origin)}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("span",{className:S2($.status),children:$.status})}),i.jsx("td",{children:i.jsx("div",{className:"d-flex gap-1 flex-wrap justify-content-end",children:i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-success",onClick:()=>void he($.id),children:"Descargar"})})})]},$.id)})})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mT-10",children:[i.jsxs("div",{className:"small text-muted",children:["Mostrando ",Ne,"-",ke," de ",s," registros"]}),i.jsxs("div",{className:"d-flex gap-10",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>R($=>Math.max(1,$-1)),disabled:!Te||c,children:"Anterior"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>R($=>$+1),disabled:!U||c,children:"Siguiente"})]})]})]})]})})})})}function j2(){return i.jsx("div",{className:"container-fluid",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin de Bases Originales"}),i.jsx("p",{className:"text-muted mB-20",children:"Selecciona el modo de consolidacin. Cada modo genera un archivo consolidado para descarga."}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6 mB-15",children:i.jsx("div",{className:"card h-100",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h5",{className:"card-title",children:"Correlativo"}),i.jsx("p",{className:"card-text text-muted",children:"Ordena por la columna G (correlativo) al consolidar."}),i.jsx(kc,{className:"btn btn-primary",to:"/oi/tools/consolidacion/correlativo",children:"Abrir"})]})})}),i.jsx("div",{className:"col-md-6 mB-15",children:i.jsx("div",{className:"card h-100",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h5",{className:"card-title",children:"No correlativo"}),i.jsx("p",{className:"card-text text-muted",children:"Mantiene el orden original de los archivos al consolidar."}),i.jsx(kc,{className:"btn btn-primary",to:"/oi/tools/consolidacion/no-correlativo",children:"Abrir"})]})})})]})]})})}function _2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function E2(e,a){const s=URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=a,document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(s)}async function A2(e){if(!gt.isAxiosError(e))return String(e);const a=e,s=a.response?.data;if(s instanceof Blob)try{const l=await s.text(),c=JSON.parse(l);return String(c?.detail??l??a.message)}catch{return a.message}return String(s?.detail??a.message)}function C2(){const[e,a]=b.useState(null),[s,l]=b.useState(null),[c,d]=b.useState([]),[f,h]=b.useState(!1),[g,p]=b.useState(""),[v,x]=b.useState(null),[N,I]=b.useState([]),j=b.useRef(null),_=b.useRef(null),C=b.useMemo(()=>!!s&&c.length>0&&!f,[s,c,f]);b.useEffect(()=>{D0().then(a).catch(()=>a(null))},[]);function q(R){I(L=>[R,...L].slice(0,200));const Z=typeof R.percent=="number"?R.percent:typeof R.progress=="number"?R.progress:null;Z!=null&&Number.isFinite(Z)&&x(Math.max(0,Math.min(100,Z)))}function T(){j.current?.abort(),j.current=null}function J(){if(!f)return;const R=_.current;R&&k0(R).catch(()=>{}),q({type:"status",stage:"cancelled",message:"Cancelacin solicitada"}),T()}async function D(){if(p(""),I([]),x(0),!s){p("Selecciona el archivo maestro.");return}if(c.length===0){p("Selecciona al menos un archivo de tcnico.");return}const R=new FormData;R.append("master",s);for(const L of c)R.append("technicians",L);const Z=crypto.randomUUID();_.current=Z,R.append("operation_id",Z),j.current=new AbortController,h(!0);try{const L=j.current?.signal;dh(Z,q,L).catch(()=>{});const W=await z0(R,"correlativo",L),ue=W.headers["content-disposition"],Ae=_2(ue)??"consolidado_correlativo.xlsx";E2(W.data,Ae)}catch(L){if(gt.isAxiosError(L)&&L.code==="ERR_CANCELED"||gt.isAxiosError(L)&&(L.response?.headers?.["x-code"]??void 0)?.toUpperCase()==="CANCELLED")return;const W=await A2(L);q({type:"error",stage:"error",detail:W}),p(W)}finally{_.current=null,h(!1),T()}}return i.jsx("div",{className:"container-fluid",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-7",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin  Correlativo"}),i.jsx("p",{className:"text-muted mB-20",children:"Genera un consolidado ordenando por correlativo (columna G)."}),e&&i.jsxs("div",{className:"alert alert-info",role:"alert",children:["Lmite por archivo: ",i.jsxs("b",{children:[e.max_file_mb,"MB"]}),"  Mx. archivos tcnico:"," ",i.jsx("b",{children:e.max_tech_files})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12 mB-15",children:i.jsx(to,{label:"Archivo maestro (xlsx)",accept:".xlsx",file:s,onChange:l,disabled:f})}),i.jsx("div",{className:"col-12 mB-15",children:i.jsx(bu,{label:"Archivos de tcnicos (xlsx)",title:"Archivos de tcnicos",accept:".xlsx",files:c,setFiles:d,disabled:f})})]}),g&&i.jsx("div",{className:"alert alert-danger mT-10",role:"alert",children:g}),i.jsxs("div",{className:"d-flex gap-10 mT-20",children:[i.jsx("button",{className:"btn btn-primary mT-10",disabled:!C,onClick:D,children:f?"Procesando...":"Procesar y Descargar"}),i.jsx("button",{className:"btn btn-outline-danger mT-10",disabled:!f,onClick:J,children:"Cancelar"})]})]})}),i.jsx("div",{className:"col-md-5",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[i.jsx("span",{children:"Progreso"}),f?i.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),i.jsx("div",{className:"progress mB-15",style:{height:12},children:i.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${v??0}%`},"aria-valuenow":v??0,"aria-valuemin":0,"aria-valuemax":100})}),i.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:N.length===0?i.jsx("div",{className:"text-muted",children:"Sin eventos an."}):i.jsx("ul",{className:"list-unstyled mB-0",children:N.map((R,Z)=>i.jsxs("li",{className:"mB-10",children:[i.jsxs("div",{children:[i.jsx("b",{children:Il(R.type)})," ",R.stage?i.jsxs("span",{className:"text-muted",children:["[",mo(R.stage),"]"]}):null]}),i.jsx("div",{className:"text-muted",children:Yl(R.message??R.detail??"")})]},Z))})})]})})]})})}function O2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function R2(e,a){const s=URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=a,document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(s)}async function T2(e){if(!gt.isAxiosError(e))return String(e);const a=e,s=a.response?.data;if(s instanceof Blob)try{const l=await s.text(),c=JSON.parse(l);return String(c?.detail??l??a.message)}catch{return a.message}return String(s?.detail??a.message)}function D2(){const[e,a]=b.useState(null),[s,l]=b.useState(null),[c,d]=b.useState([]),[f,h]=b.useState(!1),[g,p]=b.useState(""),[v,x]=b.useState(null),[N,I]=b.useState([]),j=b.useRef(null),_=b.useRef(null),C=b.useMemo(()=>!!s&&c.length>0&&!f,[s,c,f]);b.useEffect(()=>{D0().then(a).catch(()=>a(null))},[]);function q(R){I(L=>[R,...L].slice(0,200));const Z=typeof R.percent=="number"?R.percent:typeof R.progress=="number"?R.progress:null;Z!=null&&Number.isFinite(Z)&&x(Math.max(0,Math.min(100,Z)))}function T(){j.current?.abort(),j.current=null}function J(){if(!f)return;const R=_.current;R&&k0(R).catch(()=>{}),q({type:"status",stage:"cancelled",message:"Cancelacin solicitada"}),T()}async function D(){if(p(""),I([]),x(0),!s){p("Selecciona el archivo maestro.");return}if(c.length===0){p("Selecciona al menos un archivo de tcnico.");return}const R=new FormData;R.append("master",s);for(const L of c)R.append("technicians",L);const Z=crypto.randomUUID();_.current=Z,R.append("operation_id",Z),j.current=new AbortController,h(!0);try{const L=j.current?.signal;dh(Z,q,L).catch(()=>{});const W=await z0(R,"no-correlativo",L),ue=W.headers["content-disposition"],Ae=O2(ue)??"consolidado_no_correlativo.xlsx";R2(W.data,Ae)}catch(L){if(gt.isAxiosError(L)&&L.code==="ERR_CANCELED"||gt.isAxiosError(L)&&(L.response?.headers?.["x-code"]??void 0)?.toUpperCase()==="CANCELLED")return;const W=await T2(L);q({type:"error",stage:"error",detail:W}),p(W)}finally{_.current=null,h(!1),T()}}return i.jsx("div",{className:"container-fluid",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-7",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin  No correlativo"}),i.jsx("p",{className:"text-muted mB-20",children:"Genera un consolidado sin ordenar por correlativo (respeta el orden original)."}),e&&i.jsxs("div",{className:"alert alert-info",role:"alert",children:["Lmite por archivo: ",i.jsxs("b",{children:[e.max_file_mb,"MB"]}),"  Mx. archivos tcnico:"," ",i.jsx("b",{children:e.max_tech_files})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12 mB-15",children:i.jsx(to,{label:"Archivo maestro (xlsx)",accept:".xlsx",file:s,onChange:l,disabled:f})}),i.jsx("div",{className:"col-12 mB-15",children:i.jsx(bu,{label:"Archivos de tcnicos (xlsx)",title:"Archivos de tcnicos",accept:".xlsx",files:c,setFiles:d,disabled:f})})]}),g&&i.jsx("div",{className:"alert alert-danger mT-10",role:"alert",children:g}),i.jsxs("div",{className:"d-flex gap-10 mT-20",children:[i.jsx("button",{className:"btn btn-primary mT-10",disabled:!C,onClick:D,children:f?"Procesando...":"Procesar y Descargar"}),i.jsx("button",{className:"btn btn-outline-danger mT-10",disabled:!f,onClick:J,children:"Cancelar"})]})]})}),i.jsx("div",{className:"col-md-5",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[i.jsx("span",{children:"Progreso"}),f?i.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),i.jsx("div",{className:"progress mB-15",style:{height:12},children:i.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${v??0}%`},"aria-valuenow":v??0,"aria-valuemin":0,"aria-valuemax":100})}),i.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:N.length===0?i.jsx("div",{className:"text-muted",children:"Sin eventos an."}):i.jsx("ul",{className:"list-unstyled mB-0",children:N.map((R,Z)=>i.jsxs("li",{className:"mB-10",children:[i.jsxs("div",{children:[i.jsx("b",{children:Il(R.type)})," ",R.stage?i.jsxs("span",{className:"text-muted",children:["[",mo(R.stage),"]"]}):null]}),i.jsx("div",{className:"text-muted",children:Yl(R.message??R.detail??"")})]},Z))})})]})})]})})}async function Fi(e){if(!gt.isAxiosError(e))return String(e);const a=e,s=a.response?.data;if(s instanceof Blob)try{const l=await s.text(),c=JSON.parse(l);return String(c?.detail??l??a.message)}catch{return a.message}return String(s?.detail??a.message)}function z2(){const[e,a]=b.useState(null),[s,l]=b.useState(""),[c,d]=b.useState(""),[f,h]=b.useState(""),[g,p]=b.useState("ERROR FINAL"),[v,x]=b.useState(""),[N,I]=b.useState("same_password"),[j,_]=b.useState(""),[C,q]=b.useState([{cell:"A1",value:""}]),[T,J]=b.useState(""),[D,R]=b.useState("no_password"),[Z,L]=b.useState(""),[W,ue]=b.useState("ERROR FINAL"),[Ae,xe]=b.useState(1),[he,Ne]=b.useState(""),[ke,Te]=b.useState(""),[U,$]=b.useState(""),[X,ye]=b.useState(null),[Se,w]=b.useState(""),[P,ie]=b.useState(null),[M,ce]=b.useState([]),[pe,De]=b.useState(null),$e=b.useMemo(()=>c.trim().length>0,[c]);function fe(me){ce(Fe=>[me,...Fe].slice(0,200))}function Le(){w(""),ce([]),ie(0),De(null)}async function Ie(){if(Le(),!e){w("Selecciona un archivo para subir.");return}ye("upload");try{fe({type:"status",stage:"upload",message:"Subiendo archivo..."}),ie(30);const me=new FormData;me.append("file",e),s.trim()&&me.append("suggested_name",s.trim());const Fe=await l2(me);d(Fe.relative_path),De(Fe),fe({type:"complete",stage:"upload",message:"Archivo subido."}),ie(100)}catch(me){const Fe=await Fi(me);w(Fe),fe({type:"error",stage:"upload",detail:Fe})}finally{ye(null)}}async function Ge(){if(Le(),!$e){w("Ingresa o sube un archivo para obtener file_path.");return}ye("inspect");try{fe({type:"status",stage:"inspect",message:"Inspeccionando..."}),ie(50);const me=await i2({file_path:c.trim(),open_password:f.trim()||null});De(me),fe({type:"complete",stage:"inspect",message:"Inspeccin completada."}),ie(100)}catch(me){const Fe=await Fi(me);w(Fe),fe({type:"error",stage:"inspect",detail:Fe})}finally{ye(null)}}async function dt(){if(Le(),!$e){w("Ingresa o sube un archivo para obtener file_path.");return}if(!g.trim()){w("Ingresa el nombre de la hoja.");return}const me=C.map(Fe=>({cell:Fe.cell.trim(),value:Fe.value})).filter(Fe=>Fe.cell);if(me.length===0){w("Agrega al menos una edicin.");return}ye("update");try{fe({type:"status",stage:"update",message:"Aplicando ediciones..."}),ie(50);const Fe=await o2({file_path:c.trim(),edits:me.map(Ce=>({sheet:g.trim(),cell:Ce.cell,value:Ce.value})),open_password:v.trim()||null,save_mode:N,new_password:N==="new_password"&&j.trim()||null});De(Fe),fe({type:"complete",stage:"update",message:"Actualizacin completada."}),ie(100)}catch(Fe){const Ce=await Fi(Fe);w(Ce),fe({type:"error",stage:"update",detail:Ce})}finally{ye(null)}}async function ze(){if(Le(),!$e){w("Ingresa o sube un archivo para obtener file_path.");return}if(!T.trim()){w("Ingresa la contrasea de apertura (open_password).");return}if(D==="new_password"&&!Z.trim()){w("Ingresa la nueva contrasea.");return}ye("change-password");try{fe({type:"status",stage:"change-password",message:"Cambiando contrasea..."}),ie(50);const me=await c2({file_path:c.trim(),open_password:T.trim(),mode:D,new_password:D==="new_password"?Z.trim():null});De(me),fe({type:"complete",stage:"change-password",message:"Cambio de contrasea completado."}),ie(100)}catch(me){const Fe=await Fi(me);w(Fe),fe({type:"error",stage:"change-password",detail:Fe})}finally{ye(null)}}async function Ze(){if(Le(),!$e){w("Ingresa o sube un archivo para obtener file_path.");return}let me={};if(ke.trim())try{me=JSON.parse(ke)}catch{w("type_rules debe ser JSON vlido.");return}const Fe=he.split(",").map(Ce=>Ce.trim()).filter(Boolean);ye("validate");try{fe({type:"status",stage:"validate",message:"Validando..."}),ie(50);const Ce=await u2({file_path:c.trim(),sheet:W.trim()||null,header_row:Ae,required_columns:Fe,type_rules:me,open_password:U.trim()||null});De(Ce),fe({type:"complete",stage:"validate",message:"Validacin completada."}),ie(100)}catch(Ce){const Je=await Fi(Ce);w(Je),fe({type:"error",stage:"validate",detail:Je})}finally{ye(null)}}return i.jsx("div",{className:"container-fluid",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-7",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Herramientas Excel"}),i.jsx("p",{className:"text-muted mB-20",children:"Subir archivos, inspeccionar, editar celdas, cambiar contrasea y validar."}),i.jsx("div",{className:"card mB-15",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"card-title",children:"1) Subir archivo (recomendado)"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8 mB-10",children:i.jsx("input",{className:"form-control",type:"file",accept:".xlsx,.xlsm",disabled:!!X,onChange:me=>a(me.target.files?.[0]??null)})}),i.jsx("div",{className:"col-md-4 mB-10",children:i.jsx("input",{className:"form-control",placeholder:"Nombre sugerido (opcional)",value:s,disabled:!!X,onChange:me=>l(me.target.value)})})]}),i.jsx("button",{className:"btn btn-outline-primary",disabled:!!X||!e,onClick:Ie,children:X==="upload"?"Subiendo...":"Subir"})]})}),i.jsxs("div",{className:"mB-15",children:[i.jsx("label",{className:"form-label",children:"file_path"}),i.jsx("input",{className:"form-control",value:c,disabled:!!X,onChange:me=>d(me.target.value),placeholder:"Ruta del archivo en el servidor (o la devuelta por Upload)"}),i.jsx("div",{className:"form-text",children:"Si subes el archivo, se llenar automticamente. Tambin puedes pegar una ruta local/red accesible por el servidor."})]}),i.jsx("div",{className:"card mB-15",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"card-title",children:"2) Inspect"}),i.jsxs("div",{className:"row align-items-end",children:[i.jsxs("div",{className:"col-md-8 mB-10",children:[i.jsx("label",{className:"form-label",children:"open_password (opcional)"}),i.jsx("input",{className:"form-control",type:"password",value:f,disabled:!!X,onChange:me=>h(me.target.value)})]}),i.jsx("div",{className:"col-md-4 mB-10",children:i.jsx("button",{className:"btn btn-primary w-100",disabled:!!X||!$e,onClick:Ge,children:X==="inspect"?"Inspeccionando...":"Inspect"})})]})]})}),i.jsx("div",{className:"card mB-15",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"card-title",children:"3) Update (editar celdas)"}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"Hoja"}),i.jsx("input",{className:"form-control",value:g,disabled:!!X,onChange:me=>p(me.target.value)})]}),i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"open_password (opcional)"}),i.jsx("input",{className:"form-control",type:"password",value:v,disabled:!!X,onChange:me=>x(me.target.value)})]}),i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"save_mode"}),i.jsxs("select",{className:"form-select",value:N,disabled:!!X,onChange:me=>I(me.target.value),children:[i.jsx("option",{value:"same_password",children:"same_password"}),i.jsx("option",{value:"no_password",children:"no_password"}),i.jsx("option",{value:"new_password",children:"new_password"})]})]}),i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"new_password"}),i.jsx("input",{className:"form-control",type:"password",value:j,disabled:!!X||N!=="new_password",onChange:me=>_(me.target.value),placeholder:N==="new_password"?"Requerido":""})]})]}),i.jsxs("div",{className:"mT-10",children:[i.jsx("label",{className:"form-label",children:"Ediciones"}),C.map((me,Fe)=>i.jsxs("div",{className:"row g-2 mB-10",children:[i.jsx("div",{className:"col-md-3",children:i.jsx("input",{className:"form-control",value:me.cell,disabled:!!X,onChange:Ce=>{const Je=C.slice();Je[Fe]={...Je[Fe],cell:Ce.target.value},q(Je)},placeholder:"Celda (A1)"})}),i.jsx("div",{className:"col-md-7",children:i.jsx("input",{className:"form-control",value:me.value,disabled:!!X,onChange:Ce=>{const Je=C.slice();Je[Fe]={...Je[Fe],value:Ce.target.value},q(Je)},placeholder:"Valor"})}),i.jsxs("div",{className:"col-md-2 d-flex gap-10",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary w-100",disabled:!!X,onClick:()=>q(Ce=>[...Ce,{cell:"A1",value:""}]),children:"+"}),i.jsx("button",{type:"button",className:"btn btn-outline-danger w-100",disabled:!!X||C.length===1,onClick:()=>q(Ce=>Ce.filter((Je,A)=>A!==Fe)),children:""})]})]},Fe))]}),i.jsx("button",{className:"btn btn-primary",disabled:!!X||!$e,onClick:dt,children:X==="update"?"Actualizando...":"Update"})]})}),i.jsx("div",{className:"card mB-15",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"card-title",children:"4) Change password"}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"open_password"}),i.jsx("input",{className:"form-control",type:"password",value:T,disabled:!!X,onChange:me=>J(me.target.value)})]}),i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"mode"}),i.jsxs("select",{className:"form-select",value:D,disabled:!!X,onChange:me=>R(me.target.value),children:[i.jsx("option",{value:"no_password",children:"no_password"}),i.jsx("option",{value:"new_password",children:"new_password"})]})]}),i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"new_password"}),i.jsx("input",{className:"form-control",type:"password",value:Z,disabled:!!X||D!=="new_password",onChange:me=>L(me.target.value),placeholder:D==="new_password"?"Requerido":""})]}),i.jsx("div",{className:"col-md-6 mB-10 d-flex align-items-end",children:i.jsx("button",{className:"btn btn-primary w-100",disabled:!!X||!$e,onClick:ze,children:X==="change-password"?"Procesando...":"Change password"})})]})]})}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"card-title",children:"5) Validate"}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6 mB-10",children:[i.jsx("label",{className:"form-label",children:"sheet (opcional)"}),i.jsx("input",{className:"form-control",value:W,disabled:!!X,onChange:me=>ue(me.target.value)})]}),i.jsxs("div",{className:"col-md-3 mB-10",children:[i.jsx("label",{className:"form-label",children:"header_row"}),i.jsx("input",{className:"form-control",type:"number",min:1,value:Ae,disabled:!!X,onChange:me=>xe(Number(me.target.value||1))})]}),i.jsxs("div",{className:"col-md-3 mB-10",children:[i.jsx("label",{className:"form-label",children:"open_password (opcional)"}),i.jsx("input",{className:"form-control",type:"password",value:U,disabled:!!X,onChange:me=>$(me.target.value)})]}),i.jsxs("div",{className:"col-12 mB-10",children:[i.jsx("label",{className:"form-label",children:"required_columns (coma separada)"}),i.jsx("input",{className:"form-control",value:he,disabled:!!X,onChange:me=>Ne(me.target.value),placeholder:"ColA, ColB, ColC"})]}),i.jsxs("div",{className:"col-12 mB-10",children:[i.jsx("label",{className:"form-label",children:"type_rules (JSON, opcional)"}),i.jsx("textarea",{className:"form-control",rows:3,value:ke,disabled:!!X,onChange:me=>Te(me.target.value),placeholder:'{"ColA":"int","ColB":"float"}'})]})]}),i.jsx("button",{className:"btn btn-primary",disabled:!!X||!$e,onClick:Ze,children:X==="validate"?"Validando...":"Validate"})]})}),Se&&i.jsx("div",{className:"alert alert-danger mT-15",role:"alert",children:Se})]})}),i.jsx("div",{className:"col-md-5",children:i.jsxs("div",{className:"bgc-white p-20 bd",children:[i.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[i.jsx("span",{children:"Progreso"}),X?i.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),i.jsx("div",{className:"progress mB-15",style:{height:12},children:i.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${P??0}%`},"aria-valuenow":P??0,"aria-valuemin":0,"aria-valuemax":100})}),i.jsx("div",{style:{maxHeight:220,overflow:"auto"},children:M.length===0?i.jsx("div",{className:"text-muted",children:"Sin eventos an."}):i.jsx("ul",{className:"list-unstyled mB-0",children:M.map((me,Fe)=>i.jsxs("li",{className:"mB-10",children:[i.jsxs("div",{children:[i.jsx("b",{children:me.type})," ",me.stage?i.jsxs("span",{className:"text-muted",children:["[",me.stage,"]"]}):null]}),i.jsx("div",{className:"text-muted",children:me.message??me.detail??""})]},Fe))})}),i.jsx("hr",{className:"mY-15"}),i.jsx("h6",{className:"c-grey-900 mB-10",children:"Resultado"}),pe?i.jsx("pre",{className:"bg-light p-10",style:{maxHeight:360,overflow:"auto"},children:JSON.stringify(pe,null,2)}):i.jsx("div",{className:"text-muted",children:"Sin resultado an."})]})})]})})}function k2(){const e=la(),a=Pr(),{toast:s}=Qr(),l=kn(),c=ql(l?.role),d=Xi(),f=c&&!(d&&d>0),{data:h,isLoading:g,error:p}=Hr({queryKey:["catalogs"],queryFn:Wm,enabled:f}),v=h?.bancos??[],[x,N]=b.useState(()=>d&&d>0?d:0),[I,j]=b.useState(!1),_=b.useMemo(()=>v.find(J=>J.id===x)?.name??null,[v,x]);b.useEffect(()=>{const T=e.state;T?.toast&&(s({kind:T.toast.kind??"info",title:T.toast.title,message:T.toast.message}),a(e.pathname,{replace:!0,state:{}}))},[e.pathname,e.state,a,s]),b.useEffect(()=>{f&&(x>0||v.length>0&&N(v[0].id))},[x,v,f]);const C=x>0&&!I,q=async()=>{if(C)try{j(!0);const T=await e0(x),J=bm(T.userId,T.bancoId??x);if(J.target){a(J.target,{replace:!0});return}s({kind:"success",title:"Banco",message:_?`Banco seleccionado: ${_}`:"Banco seleccionado."})}catch(T){const J=T?.response?.data?.detail??T?.message??"No se pudo guardar el banco.";s({kind:"error",title:"Banco",message:String(J)})}finally{j(!1)}};return i.jsxs("div",{className:"vi-home",children:[i.jsx("div",{className:"vi-home__banner",style:{backgroundImage:'url("/medileser/banner.jpg")'},role:"img","aria-label":"Medileser"}),f&&i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:i.jsx("div",{className:"modal-dialog modal-dialog-centered",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("div",{className:"modal-header",children:i.jsx("h5",{className:"modal-title",children:"Seleccionar banco"})}),i.jsxs("div",{className:"modal-body",children:[i.jsx("p",{className:"text-muted mb-3",children:"Seleccione el banco de trabajo para continuar."}),i.jsx("label",{className:"form-label",htmlFor:"bankId",children:"Banco"}),i.jsx("select",{id:"bankId",className:"form-select",value:x||"",onChange:T=>N(Number(T.target.value)),disabled:g||I,children:v.map(T=>i.jsx("option",{value:T.id,children:T.name},T.id))}),p?i.jsx("div",{className:"alert alert-danger mt-3 mb-0",role:"alert",children:"No se pudieron cargar los bancos."}):null]}),i.jsx("div",{className:"modal-footer",children:i.jsx("button",{type:"button",className:"btn btn-primary",disabled:!C,onClick:q,children:I?"Guardando...":"Continuar"})})]})})})]})}const Hi=(...e)=>{};function M2(e){if(!e)return null;const a=/filename\*=UTF-8''([^;]+)|filename="([^"]+)"/i.exec(e),s=a?.[1]??a?.[2];if(!s)return null;try{return decodeURIComponent(s)}catch{return s}}function U2(e,a){const s=window.URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=a,document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(s)}async function L2(e,a){let s=null,l=!1;const c=new Promise(d=>{s=window.setTimeout(()=>{l=!0,d()},a)});try{await Promise.race([e,c])}catch{return!1}finally{s!=null&&window.clearTimeout(s)}return!l}function B2(){const[e,a]=b.useState([]),[s,l]=b.useState(""),[c,d]=b.useState([]),[f,h]=b.useState(0),[g,p]=b.useState("Listo para procesar"),[v,x]=b.useState(!1),[N,I]=b.useState(""),[j,_]=b.useState(!1),[C,q]=b.useState(null),[T,J]=b.useState(null),[D,R]=b.useState(!1);function Z(O){const Q=O?.series_duplicates_eliminated??O?.detail?.series_duplicates_eliminated??O?.series_duplcates_eliminated;return typeof Q=="number"?Q:null}const L={MISSING_HEADERS:"Faltan cabeceras requeridas",FILE_INVALID:"Archivo invlido",INVALID_OI_FILENAME:"Nombre de archivo invlido",EMPTY_FILE:"Archivo vaco"};function W(O){const Q=String(O??"").trim().toUpperCase();return Q?L[Q]??Q:""}function ue(O){if(!O)return"";let Q=Yl(O);Q=Q.replace(/\bERROR\b/gi,"Error");for(const[G,se]of Object.entries(L))Q=Q.replace(new RegExp(`\\b${G}\\b`,"g"),se);return Q}function Ae(O,Q){const G=W(O),se=ue(Q);return se?G&&!se.toLowerCase().includes(G.toLowerCase())?`${G}: ${se}`:se:G||"N/D"}function xe(O,Q,G){const se=String(G??"").trim();if(se)return se;const Oe=Number(O);if(!Number.isFinite(Oe)||Oe<=0)return"N/D";const Be=Number(Q);return Number.isFinite(Be)&&Be>0?`OI-${String(Oe).padStart(4,"0")}-${String(Be).padStart(4,"0")}`:`OI-${String(Oe).padStart(4,"0")}`}function he(O){const Q=O?.rows_total_read??O?.totals_input?.rows_read;return typeof Q=="number"?Q:null}const Ne=b.useMemo(()=>(Array.isArray(T?.audit_by_oi)?T.audit_by_oi:[]).filter(Q=>Q?.status==="OK"&&String(Q?.source??"").toUpperCase()==="BASES").slice().sort((Q,G)=>{const se=Number(Q?.oi_year),Oe=Number(G?.oi_year),Be=Number.isFinite(se)&&se>0,ae=Number.isFinite(Oe)&&Oe>0;if(Be&&ae&&se!==Oe)return se-Oe;if(Be&&!ae)return-1;if(!Be&&ae)return 1;const Me=Number(Q?.oi_num),He=Number(G?.oi_num),at=Number.isFinite(Me),Jt=Number.isFinite(He);if(at&&Jt&&Me!==He)return Me-He;if(at&&!Jt)return-1;if(!at&&Jt)return 1;const we=String(Q?.oi_tag??Q?.oi??Q?.oi_num??"").toUpperCase(),et=String(G?.oi_tag??G?.oi??G?.oi_num??"").toUpperCase();return we.localeCompare(et)}),[T]),ke=b.useMemo(()=>(Array.isArray(T?.files_rejected)?T.files_rejected:[]).slice().sort((Q,G)=>{const se=String(Q?.oi??Q?.filename??"").toUpperCase(),Oe=String(G?.oi??G?.filename??"").toUpperCase();return se.localeCompare(Oe)}),[T]),Te=b.useMemo(()=>{const O=()=>({files_total:0,files_ok:0,files_error:0,rows_read:0,conformes:0,no_conformes:0,rows_ignored_invalid_estado:0}),Q=T?.by_source;if(Q&&typeof Q=="object")return Q;const G={BASES:O(),GASELAG:O()},se=Array.isArray(T?.audit_by_oi)?T.audit_by_oi:[];for(const Be of se){if(Be?.status!=="OK")continue;const Me=String(Be?.source??"").toUpperCase()==="GASELAG"?"GASELAG":"BASES";G[Me].files_ok+=1,G[Me].rows_read+=Number(Be?.rows_read??0)||0,G[Me].conformes+=Number(Be?.conformes??0)||0,G[Me].no_conformes+=Number(Be?.no_conformes??0)||0,G[Me].rows_ignored_invalid_estado+=Number(Be?.rows_ignored_invalid_estado??0)||0}const Oe=Array.isArray(T?.files_rejected)?T.files_rejected:[];for(const Be of Oe){const Me=String(Be?.source??"").toUpperCase()==="GASELAG"?"GASELAG":"BASES";G[Me].files_error+=1}for(const Be of["BASES","GASELAG"])G[Be].files_total=G[Be].files_ok+G[Be].files_error;return G},[T]),U=b.useRef(null),$=b.useRef(null),X=b.useRef(null),ye=b.useRef(!1),Se=b.useRef(null),w=b.useRef(null),P=b.useRef(null),ie=b.useRef(!1),M=b.useRef(!1),ce=b.useRef(-1),pe=b.useRef(-1),De=b.useRef(!1);function $e(){return Se.current||(Se.current=crypto.randomUUID()),Se.current}function fe(O){const Q=`${Il(O.type)}  ${mo(O.stage)}  ${ue(O.message??O.detail??"")}`;if(p(Q),d(G=>{const se=[O,...G];if(!De.current&&O.stage==="cancelled"){De.current=!0;const Oe=se.filter(He=>He.stage==="file_done"||He.stage==="file_error").length,Be=se.filter(He=>He.stage==="file_done").length,ae=se.filter(He=>He.stage==="file_error").length;return[{type:"status",stage:"cancelled",message:`Cancelacin aplicada. Archivos procesados hasta el momento: ${Oe} (OK: ${Be}, Rechazados: ${ae}). No se gener resultado final.`},...se]}return se}),O.type==="complete"){const G=O.result??null;J(G)}typeof O.progress=="number"&&h(Math.round(O.progress)),typeof O.percent=="number"&&h(Math.round(O.percent)),!ye.current&&(O.type==="complete"||O.stage==="cancelled"||O.stage==="failed")&&(ye.current=!0,O.type==="complete"?(_(!0),q(Se.current)):(_(!1),q(null),Se.current=null),x(!1),dt("terminal_event"),ze())}function Le(O){return typeof O.cursor!="number"?!1:O.cursor<=pe.current?!0:(pe.current=O.cursor,O.cursor>ce.current&&(ce.current=O.cursor),!1)}function Ie(O){ye.current||Le(O)||fe(O)}function Ge(O,Q){const G=new FormData;G.append("operation_id",O),G.append("source","AUTO"),s.trim()&&G.append("output_filename",s.trim());for(const se of Q)G.append("files",se);return G}function dt(O){$.current&&(X.current=O,$.current.abort(),$.current=null)}function ze(O){M.current&&(M.current=!1,w.current!=null&&(window.clearTimeout(w.current),w.current=null),P.current?.abort(),P.current=null,ie.current=!1)}function Ze(O){M.current&&(w.current!=null&&window.clearTimeout(w.current),w.current=window.setTimeout(()=>{me()},O))}async function me(){if(!M.current||ie.current)return;const O=Se.current;if(!O){ze();return}ie.current=!0;try{const Q=await GT(O,ce.current,P.current?.signal);Hi("[LOG01] poll cursor =",ce.current,"->",Q.cursor_next),ce.current=Q.cursor_next;for(const G of Q.events)Ie(G);if(Q.done&&Q.events.length===0){ze("done");return}}catch(Q){Q?.name}finally{ie.current=!1,M.current&&Ze(350)}}function Fe(O){M.current||(M.current=!0,P.current=new AbortController,Ze(0))}function Ce(){U.current?.abort(),U.current=null}async function Je(){if(!v)return;const O=Se.current;if(O)try{await QT(O)}catch(Q){const G=Q;gt.isCancel(G)||I(G.response?.data?.detail||G.message||"No se pudo cancelar la operacion")}Ce()}async function A(){I(""),d([]),J(null),h(0),p("Listo para procesar"),_(!1),q(null),X.current=null,ye.current=!1,De.current=!1,ce.current=-1,pe.current=-1,ze();const O=[...e];if(!O.length){I("Debes seleccionar al menos 1 Excel.");return}Se.current=null;const Q=$e();let G=null,se=null;const Oe=new Promise((Me,He)=>{G=Me,se=He});$.current=new AbortController,U.current=new AbortController,FT(Q,Me=>{if(Me.type==="hello"){G&&(G(),G=null);return}Ie(Me)},$.current.signal).then(()=>{ye.current||Fe()}).catch(Me=>{Me?.name==="AbortError"?Hi("[LOG01] progress stream aborted (reason) =",X.current):(se&&(se(Me),se=null),Fe())}),x(!0);try{await L2(Oe,1800)?Hi("[LOG01] hello received"):Fe("hello_timeout");const He=Ge(Q,O);Hi("[LOG01] operation_id(start) =",Q),await ZT(He,U.current.signal)}catch(Me){const He=Me;if(gt.isCancel(He))return;const at=He.response?.data?.detail||He.message||"Error inesperado";I(at),x(!1),Ce(),dt("start_failed"),ze(),Se.current=null}finally{Ce()}}async function V(){const O=C??Se.current;if(!O){I("No hay resultado disponible.");return}try{I(""),Hi("[LOG01] operation_id(result) =",O);const Q=await PT(O),G=Q.headers["content-disposition"],se=Q.headers["x-file-name"],Oe=M2(G)??se??"BD_CONSOLIDADO.xlsx";U2(Q.data,Oe)}catch(Q){const G=Q;if(gt.isCancel(G))return;const se=G.response?.data?.detail||G.message||"No se pudo descargar.";I(se)}}return i.jsx("div",{className:"container-fluid",children:i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin Excel"}),N&&i.jsx("div",{className:"alert alert-danger",role:"alert",children:N}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-12 mB-15",children:[i.jsx(bu,{label:"Archivos Excel (Bases Comerciales / GASELAG) (xlsx)",title:"Archivos Excel",accept:".xlsx",files:e,setFiles:a,fullDropArea:!0,disabled:v}),i.jsx("div",{className:"small text-muted mT-5",children:"Nota: el sistema identifica el tipo de archivo por cabeceras/contenido (AUTO). No depende del nombre."})]}),i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label mB-0",children:"Nombre de salida (opcional)"}),i.jsx("input",{className:"form-control",value:s,onChange:O=>l(O.target.value),placeholder:"BD_<SERIE_INI>_AL_<SERIE_FIN>.xlsx",disabled:v})]}),i.jsxs("div",{className:"col-md-6 mB-15",children:[i.jsx("label",{className:"form-label mB-0 invisible",children:"Acciones"}),i.jsxs("div",{className:"vi-log01-actions",children:[i.jsx("button",{className:"btn btn-primary btn-sm vi-log01-btn-primary",onClick:A,disabled:v,children:v?"Procesando...":"Consolidar"}),v?i.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>void Je(),children:"Cancelar"}):null,!v&&j?i.jsx(i.Fragment,{children:i.jsx("button",{className:"btn btn-outline-success btn-sm",onClick:()=>void V(),children:"Descargar Excel"})}):null]})]})]}),i.jsxs("div",{className:"mT-10",children:[i.jsxs("h6",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[i.jsx("span",{children:"Progreso"}),v?i.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),i.jsx("div",{className:"progress",children:i.jsxs("div",{className:"progress-bar",role:"progressbar",style:{width:`${f}%`},"aria-valuenow":f,"aria-valuemin":0,"aria-valuemax":100,children:[f,"%"]})}),i.jsx("div",{className:"mT-10 text-muted",children:g})]}),!v&&T?i.jsxs("div",{className:"mT-20",children:[i.jsx("h6",{className:"c-grey-900",children:"Reporte de auditora"}),i.jsx("div",{className:"bd p-10",children:i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("div",{className:"small text-muted",children:"Archivos"}),i.jsxs("div",{className:"small",children:["Total: ",i.jsx("strong",{children:T.files_total??"N/D"}),"  OK:"," ",i.jsx("strong",{children:T.files_ok??"N/D"}),"  Rechazados:"," ",i.jsx("strong",{children:T.files_error??"N/D"})]}),i.jsx("div",{className:"mT-10 small text-muted",children:"Totales por tipo (origen)"}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Tipo"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Archivos"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ledos"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ignorados"})]})}),i.jsx("tbody",{children:["BASES","GASELAG"].map(O=>{const Q=Te?.[O]??{},G=Q?.files_total??Number(Q?.files_ok??0)+Number(Q?.files_error??0);return i.jsxs("tr",{className:"small",children:[i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:O})}),i.jsxs("td",{style:{whiteSpace:"nowrap"},children:[i.jsx("strong",{children:G??0})," ",i.jsxs("span",{className:"text-muted",children:["(OK: ",Q?.files_ok??0,"  Rech: ",Q?.files_error??0,")"]})]}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:Q?.rows_read??0})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:Q?.conformes??0})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:Q?.no_conformes??0})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:Q?.rows_ignored_invalid_estado??0})})]},O)})})]})}),i.jsx("div",{className:"mT-10 small text-muted",children:"No conformes por OI (origen)  BASES"}),Ne.length>0?i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{style:{whiteSpace:"nowrap"},children:"OI"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ledos"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"})]})}),i.jsx("tbody",{children:Ne.map((O,Q)=>i.jsxs("tr",{className:"small",children:[i.jsx("td",{style:{whiteSpace:"nowrap"},children:xe(O?.oi_num,O?.oi_year,O?.oi_tag??O?.oi)}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:O?.rows_read??0})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:O?.conformes??0})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:O?.no_conformes??0})})]},Q))})]})}):i.jsx("div",{className:"small text-muted",children:"N/D"}),Number(Te?.GASELAG?.rows_read??0)>0?i.jsxs("div",{className:"mT-10 small",children:[i.jsx("span",{className:"text-muted",children:"GASELAG (origen):"})," ","Ledos: ",i.jsx("strong",{children:Te.GASELAG.rows_read??0}),"  Conformes:"," ",i.jsx("strong",{children:Te.GASELAG.conformes??0}),"  No conformes:"," ",i.jsx("strong",{children:Te.GASELAG.no_conformes??0}),"  Ignorados(estado):"," ",i.jsx("strong",{children:Te.GASELAG.rows_ignored_invalid_estado??0})]}):null,i.jsxs("div",{className:"col-12 mT-10 p-0",children:[i.jsx("div",{className:"small text-muted",children:"Totales (origen)"}),i.jsxs("div",{className:"small",children:["Registros ledos:"," ",i.jsx("strong",{children:T.totals_input?.rows_read??"N/D"}),"  Conformes:"," ",i.jsx("strong",{children:T.totals_input?.conformes??"N/D"}),"  No conformes:"," ",i.jsx("strong",{children:T.totals_input?.no_conformes??"N/D"})]})]})]}),i.jsxs("div",{className:"col-md-6 mT-10 mT-md-0",children:[ke.length>0?i.jsxs("div",{className:"mT-15",children:[i.jsx("div",{className:"small text-muted",children:"Archivos rechazados"}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{style:{whiteSpace:"nowrap"},children:"OI / Archivo"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Motivo"})]})}),i.jsx("tbody",{children:ke.map((O,Q)=>{const G=Ae(O?.code,O?.detail),se=String(O?.source??"").toUpperCase();let Oe=O?.filename??"N/D";if(se==="BASES"){const Be=Number(O?.oi_num),ae=xe(Be,O?.oi_year,O?.oi_tag??O?.oi);ae!=="N/D"&&(Oe=`${ae} / ${Oe}`)}else se==="GASELAG"&&(Oe=`GASELAG / ${Oe}`);return i.jsxs("tr",{className:"small",children:[i.jsx("td",{style:{whiteSpace:"nowrap"},children:Oe}),i.jsx("td",{children:G})]},Q)})})]})})]}):null,i.jsx("div",{className:"small text-muted",children:"Resultado final (post-dedupe)"}),i.jsxs("div",{className:"small",children:["nicas (post-dedupe):"," ",i.jsx("strong",{children:T.series_total_dedup??"N/D"}),"  Conformes finales:"," ",i.jsx("strong",{children:T.series_conformes??"N/D"}),"  No conformes finales:"," ",i.jsx("strong",{children:T.series_no_conformes_final??"N/D"})]}),i.jsx("div",{className:"mT-10",children:i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>R(O=>!O),children:D?"Ocultar detalle tcnico":"Ver detalle tcnico"})}),D?i.jsxs("div",{className:"mT-10",children:[i.jsx("div",{className:"small text-muted",children:"Detalle tcnico (soporte)"}),i.jsxs("div",{className:"small",children:["Registros ledos (total):"," ",i.jsx("strong",{children:he(T)??"N/D"})," "," Duplicados eliminados:"," ",i.jsx("strong",{children:Z(T)??"N/D"})," "," nicas = Ledos  Duplicados:"," ",i.jsx("strong",{children:(()=>{const O=he(T),Q=Z(T);if(typeof O=="number"&&typeof Q=="number")return O-Q;const G=T.series_total_dedup;return typeof G=="number"?G:"N/D"})()})]})]}):null]})]})})]}):null,c.length>0&&i.jsxs("div",{className:"mT-20",children:[i.jsx("h6",{className:"c-grey-900",children:"Eventos"}),i.jsx("div",{className:"bd p-10",style:{maxHeight:240,overflow:"auto"},children:c.map((O,Q)=>{const G=String(O.message??""),se=String(O.code??""),Oe=String(O.detail??""),Be=ue(G||Oe||""),ae=Be.toLowerCase(),Me=W(se),He=ue(Oe),at=[];Me&&!ae.includes(Me.toLowerCase())&&at.push(Me),He&&!ae.includes(He.toLowerCase())&&at.push(He);const Jt=at.join("  ");return i.jsxs("div",{className:"small",children:[Il(O.type),"  ",Be,Jt?i.jsxs("span",{className:"text-muted",children:[" (",Jt,")"]}):null]},Q)})})]})]})})})})}const q2="America/Lima";function I2(e){if(!e)return null;const a=/filename\*=UTF-8''([^;]+)|filename="([^"]+)"/i.exec(e),s=a?.[1]??a?.[2];if(!s)return null;try{return decodeURIComponent(s)}catch{return s}}function $2(e,a){const s=window.URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=a,document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(s)}function F2(e){if(!e)return"N/D";const s=/[zZ]$/.test(e)||/[+-]\d{2}:\d{2}$/.test(e)||/[+-]\d{4}$/.test(e)?e:`${e}Z`,l=new Date(s);if(Number.isNaN(l.getTime()))return String(e);const d=new Intl.DateTimeFormat("es-PE",{timeZone:q2,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(l),f=h=>d.find(g=>g.type===h)?.value||"";return`${f("day")}/${f("month")}/${f("year")} ${f("hour")}:${f("minute")}`}function Xf(e,a){const s=e?.[a];return typeof s=="number"?String(s):"N/D"}function Ev(e,a){const s=e?.[a];return typeof s=="string"&&s.trim()?s.trim():"N/D"}function H2(e){const a=(e||"").toUpperCase();return a==="COMPLETADO"?"badge bg-success":a==="ERROR"?"badge bg-danger":a==="CANCELADO"?"badge bg-warning text-dark":"badge bg-secondary"}function V2(){const e=Pr(),a=kn(),s=$a(a?.role,a?.username),l=s==="admin"||s==="administrator",[c,d]=b.useState([]),[f,h]=b.useState(0),[g,p]=b.useState(!1),[v,x]=b.useState(""),[N,I]=b.useState(0),[j,_]=b.useState(""),[C,q]=b.useState(""),[T,J]=b.useState(""),[D,R]=b.useState(""),[Z,L]=b.useState(""),[W,ue]=b.useState(20),[Ae,xe]=b.useState(1),[he,Ne]=b.useState(()=>({q:"",dateFrom:"",dateTo:"",source:"",status:""})),ke=b.useMemo(()=>(Ae-1)*W,[Ae,W]);b.useEffect(()=>{let M=!1;return p(!0),x(""),Cm({limit:W,offset:ke,include_deleted:!1,q:he.q||void 0,dateFrom:he.dateFrom||void 0,dateTo:he.dateTo||void 0,source:he.source||void 0,status:he.status||void 0}).then(ce=>{M||(d(Array.isArray(ce?.items)?ce.items:[]),h(typeof ce?.total=="number"?ce.total:0))}).catch(ce=>{if(M)return;const pe=ce,De=pe.response?.data?.detail||pe.message||"No se pudo cargar historial.";x(De)}).finally(()=>{M||p(!1)}),()=>{M=!0}},[he,ke,W,N]);const Te=()=>{Ne({q:j.trim(),dateFrom:C.trim(),dateTo:T.trim(),source:D.trim(),status:Z.trim()}),xe(1)},U=()=>{_(""),q(""),J(""),R(""),L(""),Ne({q:"",dateFrom:"",dateTo:"",source:"",status:""}),xe(1),I(M=>M+1)},$=()=>I(M=>M+1),X=async(M,ce)=>{try{x("");const pe=await YT(M,ce),De=pe.headers["content-disposition"],$e=pe.headers["x-file-name"],fe=I2(De)??$e??`${ce}.bin`;$2(pe.data,fe)}catch(pe){const De=pe;if(gt.isCancel(De))return;const $e=De.response?.data?.detail||De.message||"No se pudo descargar.";x($e)}},ye=async M=>{if(l&&window.confirm("Eliminar la corrida del historial?"))try{x(""),await KT(M),$()}catch(ce){const pe=ce;if(gt.isCancel(pe))return;const De=pe.response?.data?.detail||pe.message||"No se pudo eliminar.";x(De)}},Se=f===0?0:ke+1,w=f===0?0:Math.min(ke+c.length,f),P=Ae>1,ie=ke+c.length<f;return i.jsx("div",{className:"container-fluid",children:i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[i.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between mB-10 gap-10",children:[i.jsx("h4",{className:"c-grey-900 mB-0",children:"Historial de consolidaciones LOG-01"}),i.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>e("/logistica/log01/excel"),children:"Nueva consolidacin"})]}),v?i.jsx("div",{className:"alert alert-danger",role:"alert",children:v}):null,i.jsxs("form",{className:"row g-2 align-items-end",onSubmit:M=>{M.preventDefault(),Te()},children:[i.jsxs("div",{className:"col-md-3",children:[i.jsx("label",{className:"form-label",children:"Buscar"}),i.jsx("input",{className:"form-control form-control-sm",value:j,onChange:M=>_(M.target.value),onKeyDown:M=>{M.key==="Enter"&&Te()},placeholder:"Usuario, serie inicial, serie final..."})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Fecha desde"}),i.jsx("input",{type:"date",className:"form-control form-control-sm",value:C,onChange:M=>q(M.target.value)})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Fecha hasta"}),i.jsx("input",{type:"date",className:"form-control form-control-sm",value:T,onChange:M=>J(M.target.value)})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Origen"}),i.jsxs("select",{className:"form-select form-select-sm",value:D,onChange:M=>R(M.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"AUTO",children:"AUTO"}),i.jsx("option",{value:"BASES",children:"BASES"}),i.jsx("option",{value:"GASELAG",children:"GASELAG"})]})]}),i.jsxs("div",{className:"col-md-2",children:[i.jsx("label",{className:"form-label",children:"Estado"}),i.jsxs("select",{className:"form-select form-select-sm",value:Z,onChange:M=>L(M.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"COMPLETADO",children:"COMPLETADO"}),i.jsx("option",{value:"CANCELADO",children:"CANCELADO"}),i.jsx("option",{value:"ERROR",children:"ERROR"})]})]}),i.jsxs("div",{className:"col-md-1",children:[i.jsx("label",{className:"form-label",children:"Mostrar"}),i.jsxs("select",{className:"form-select form-select-sm",value:W,onChange:M=>{const ce=Number(M.target.value);ue(Number.isFinite(ce)?ce:20),xe(1)},children:[i.jsx("option",{value:10,children:"10"}),i.jsx("option",{value:20,children:"20"}),i.jsx("option",{value:50,children:"50"}),i.jsx("option",{value:100,children:"100"})]})]}),i.jsxs("div",{className:"col-12 d-flex flex-wrap gap-10 mT-5",children:[i.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:g,children:"Buscar"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:U,children:"Limpiar filtros"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:$,children:"Recargar"})]})]}),i.jsxs("div",{className:"mT-15",children:[g?i.jsx("div",{className:"text-muted",children:"Cargando historial..."}):i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Fecha"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Usuario"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Estado"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:" Serie inic"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:" Serie fin "}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"nicas"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Acciones"})]})}),i.jsx("tbody",{children:c.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"text-muted small",children:"Sin registros."})}):c.map(M=>{const ce=M.summary_json,pe=Ev(ce,"serie_ini"),De=Ev(ce,"serie_fin"),$e=Xf(ce,"series_total_dedup"),fe=Xf(ce,"series_conformes"),Le=Xf(ce,"series_no_conformes_final"),Ie=M.created_by_full_name||M.created_by_username||"N/D";return i.jsxs("tr",{className:"small",children:[i.jsx("td",{style:{whiteSpace:"nowrap"},children:F2(M.created_at)}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:Ie}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("span",{className:H2(M.status),children:M.status})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:pe}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:De}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:$e})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:fe})}),i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:Le})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex gap-1 flex-wrap justify-content-end",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-success",onClick:()=>void X(M.id,"excel"),children:"Excel"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void X(M.id,"no-conforme"),children:"No conforme"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void X(M.id,"manifiesto"),children:"Manifiesto"}),l?i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>void ye(M.id),children:"Eliminar"}):null]})})]},M.id)})})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mT-10",children:[i.jsxs("div",{className:"small text-muted",children:["Mostrando ",Se,"-",w," de ",f]}),i.jsxs("div",{className:"d-flex gap-10",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>xe(M=>Math.max(1,M-1)),disabled:!P||g,children:"Anterior"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>xe(M=>M+1),disabled:!ie||g,children:"Siguiente"})]})]})]})]})})})})}function Dl(e){return e===!0?"badge bg-success":e===!1?"badge bg-danger":"badge bg-secondary"}const Jf="medileser_log02_rutas_v1",Z2="America/Lima",cr=typeof window<"u"&&new URLSearchParams(window.location.search).get("debugProgress")==="1",G2="[log02-copy-progress]",Av=2e3,P2=500;function or(...e){cr&&console.log(G2,...e)}function Cv(e){if(!e)return"N/D";const s=/[zZ]$/.test(e)||/[+-]\d{2}:\d{2}$/.test(e)||/[+-]\d{4}$/.test(e)?e:`${e}Z`,l=new Date(s);if(Number.isNaN(l.getTime()))return String(e);const d=new Intl.DateTimeFormat("es-PE",{timeZone:Z2,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(l),f=h=>d.find(g=>g.type===h)?.value||"";return`${f("day")}/${f("month")}/${f("year")} ${f("hour")}:${f("minute")}`}function Ov(e){const a=e,s=String(a?.name||""),l=String(a?.message||a||"");return s==="AbortError"||/aborted/i.test(l)||/abort/i.test(l)}function Q2(e){const a=e;if(!a)return!1;const s=(a.tagName||"").toLowerCase();return!!(s==="input"||s==="textarea"||s==="select"||a.isContentEditable)}async function Vi(e){const a=(e||"").trim();if(a)try{await navigator.clipboard.writeText(a);return}catch{const s=document.createElement("textarea");s.value=a,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)}}function Y2(){const[e,a]=b.useState([""]),[s,l]=b.useState(""),[c,d]=b.useState(!1),[f,h]=b.useState(""),[g,p]=b.useState(null),[v,x]=b.useState(!1),[N,I]=b.useState(!1),[j,_]=b.useState(!1),[C,q]=b.useState(""),[T,J]=b.useState([]),[D,R]=b.useState(null),[Z,L]=b.useState(""),[W,ue]=b.useState(""),[Ae,xe]=b.useState(""),[he,Ne]=b.useState(""),[ke,Te]=b.useState("COMPLETADO"),[U,$]=b.useState(!1),[X,ye]=b.useState(""),[Se,w]=b.useState(0),[P,ie]=b.useState(""),[M,ce]=b.useState(""),[pe,De]=b.useState(""),[$e,fe]=b.useState([]),[Le,Ie]=b.useState([]),[Ge,dt]=b.useState(null),ze=b.useRef(null),Ze=b.useRef(!1),me=b.useRef(!1),Fe=b.useRef(null),Ce=b.useRef(null),Je=b.useRef(!1),A=b.useRef(!1),V=b.useRef(-1),O=b.useRef(-1),Q=b.useRef(""),G=b.useRef(null),se=b.useRef(!1),Oe=b.useRef(""),Be=b.useRef(0),ae=b.useRef(!0),Me=b.useRef(""),[He,at]=b.useState(!1),[Jt,we]=b.useState("origen"),[et,Ft]=b.useState(null),[Et,Rn]=b.useState([]),[$n,Ra]=b.useState(""),[sn,rt]=b.useState(""),[Kn,Un]=b.useState([]),[Zt,Fn]=b.useState(!1),[Hn,Y]=b.useState(""),[K,je]=b.useState(""),[Ve,st]=b.useState(""),[ot,Ke]=b.useState(""),Nt=b.useMemo(()=>{const k=Ve.trim().toLocaleLowerCase();return k?Kn.filter(oe=>(oe.name||"").toLocaleLowerCase().includes(k)):Kn},[Kn,Ve]);b.useEffect(()=>{if(!He)return;if(!Nt.length){K&&je("");return}K&&Nt.some(oe=>oe.path===K)||je(Nt[0].path)},[He,Nt,K]),b.useEffect(()=>{try{const k=localStorage.getItem(Jf);if(!k)return;const oe=JSON.parse(k),_e=Array.isArray(oe.origenes)?oe.origenes:[],Re=typeof oe?.destino=="string"?oe.destino:"",We=typeof oe?.run_id=="number"?oe.run_id:null;_e.length&&a(_e),Re&&l(Re),We!==null&&R({id:We})}catch{}},[]),b.useEffect(()=>{try{const k={origenes:e,destino:s,run_id:D?.id??null};localStorage.setItem(Jf,JSON.stringify(k))}catch{}},[e,s,D?.id]),b.useEffect(()=>(ae.current=!0,()=>{ae.current=!1,Me.current="",Vn("unmount"),ia("unmount")}),[]);function Lt(){a([""]),l(""),p(null),h(""),x(!1),R(null),dt(null),fe([]),Ie([]),ce(""),ie(""),w(0),De(""),ye("");try{localStorage.removeItem(Jf)}catch{}}function Dt(){a(k=>{const oe=new Set,_e=[];for(const Re of k){const We=(Re||"").trim();if(!We)continue;const Qt=We.toLowerCase();oe.has(Qt)||(oe.add(Qt),_e.push(We))}return _e.length?_e:[""]})}function xn(){x(!0),Ft(null),Bn("origen")}function Tt(k){x(!0),Ft(k),Bn("origen")}function ft(){x(!0),Ft(null),Bn("destino")}async function bt(k=5){q(""),_(!0);try{const oe=await Cm({limit:k,offset:0,include_deleted:!1,status:"COMPLETADO"}),_e=Array.isArray(oe?.items)?oe.items:[];if(J(_e),!D?.id&&_e.length)R(_e[0]);else if(D?.id&&_e.length){const Re=_e.find(We=>We.id===D.id);Re&&R(Re)}}catch(oe){const _e=oe,Re=_e.response?.data?.detail||_e.message||"No se pudo cargar las corridas.";q(Re),J([])}finally{_(!1)}}async function Ht(){q(""),_(!0);try{const k=await Cm({limit:20,offset:0,include_deleted:!1,q:Z.trim()||void 0,dateFrom:W.trim()||void 0,dateTo:Ae.trim()||void 0,source:he.trim()||void 0,status:ke.trim()||void 0}),oe=Array.isArray(k?.items)?k.items:[];J(oe)}catch(k){const oe=k,_e=oe.response?.data?.detail||oe.message||"No se pudo cargar las corridas.";q(_e),J([])}finally{_(!1)}}function pn(){I(!0),bt(5)}function Tn(k){R(k),I(!1)}const rn=b.useMemo(()=>e.map(k=>(k??"").trim()),[e]),Wt=b.useMemo(()=>rn.filter(k=>k),[rn]),jt=b.useMemo(()=>(s??"").trim(),[s]),Ln=b.useMemo(()=>Wt.length>0&&!!jt,[Wt.length,jt]);function dn(k,oe){a(_e=>{const Re=_e.slice();return Re[k]=oe,Re})}function Sn(k){a(oe=>{if(oe.length<=1)return[""];const _e=oe.slice();return _e.splice(k,1),_e})}b.useEffect(()=>{if(!He)return;function k(_e){try{const Re=document.querySelector(`[data-folder-idx="${_e}"]`);Re&&(Re.focus(),Re.scrollIntoView({block:"nearest"}))}catch{}}const oe=_e=>{if(_e.key==="Escape"){_e.preventDefault(),at(!1);return}if(!Q2(_e.target)){if(_e.key==="ArrowDown"||_e.key==="ArrowUp"){if(!Nt.length)return;_e.preventDefault();const Re=Nt.findIndex(Zn=>Zn.path===K),We=Re>=0?Re:0,Qt=_e.key==="ArrowDown"?Math.min(Nt.length-1,We+1):Math.max(0,We-1),Bt=Nt[Qt];if(!Bt)return;je(Bt.path),requestAnimationFrame(()=>k(Qt));return}if(_e.key==="Enter"){if(!K)return;const Re=Nt.find(We=>We.path===K);if(!Re)return;_e.preventDefault(),Gt(Re.path);return}}};return window.addEventListener("keydown",oe),()=>window.removeEventListener("keydown",oe)},[He,K,Zt]);async function Bn(k){we(k),Y(""),at(!0),st("");try{const _e=(await XT()).roots||[];Rn(_e);const Re=_e[0]||"";Ra(Re),rt(Re),Ke(Re),Re?await Gt(Re):(Un([]),Y("No hay rutas raz configuradas para el explorador. Configure VI_LOG02_UNC_ROOTS en el servidor."))}catch(oe){const _e=oe,Re=_e.response?.data?.detail||_e.message||"No se pudo cargar las rutas raz.";Y(Re),Un([])}}async function Gt(k){if(Y(""),!k){Un([]);return}try{Fn(!0),je("");const oe=await JT(k);rt(oe.path),Ke(oe.path);const _e=oe.folders||[];Un(_e),je(_e[0]?.path||"")}catch(oe){const _e=oe,Re=_e.response?.data?.detail||_e.message||"No se pudo listar la carpeta.";Y(Re),Un([])}finally{Fn(!1)}}function zt(k){const oe=(k||"").replace(/[\\\/]+$/,""),_e=oe.startsWith("\\\\"),Re=oe.split("\\").filter(Bt=>Bt.length>0);if(Re.length===0)return[];const We=[];if(_e){const Bt=Re[0]||"",Zn=Re[1]||"";if(Bt){const na=`\\\\${Bt}`;We.push({label:`\\\\${Bt}`,path:na})}if(Bt&&Zn){let na=`\\\\${Bt}\\${Zn}`;We.push({label:Zn,path:na});for(let is=2;is<Re.length;is++)na=`${na}\\${Re[is]}`,We.push({label:Re[is],path:na})}return We}let Qt=Re[0];We.push({label:Re[0],path:Re[0]});for(let Bt=1;Bt<Re.length;Bt++)Qt=`${Qt}\\${Re[Bt]}`,We.push({label:Re[Bt],path:Qt});return We}async function ps(){const k=(ot||"").trim();k&&await Gt(k)}async function xa(){const k=(sn||"").trim();k&&await Vi(k)}function Nn(){const k=(sn||"").replace(/[\\\/]+$/,""),oe=k.lastIndexOf("\\");if(oe<=0)return;const _e=k.slice(0,oe);Gt(_e)}function Xn(k){const oe=(k??sn??"").trim();oe&&(Jt==="destino"?l(oe):a(_e=>{const Re=oe.trim();if(!Re)return _e;const We=_e.slice();return et!==null&&et>=0&&et<We.length?(We[et]=Re,We):We.map(Bt=>(Bt||"").trim().toLowerCase()).includes(Re.toLowerCase())?We:We.length===1&&!(We[0]||"").trim()?[Re]:[...We,Re]}),Ft(null),at(!1))}function Ga(){const k=(K||sn||"").trim();k&&Xn(k)}async function Us(){h(""),p(null),x(!0);const k=jt,oe=Wt;if(!oe.length){h("Debes ingresar al menos una ruta de origen.");return}if(!k){h("Debes ingresar una ruta de destino.");return}try{d(!0);const _e=await WT({rutas_origen:oe,ruta_destino:k});p(_e),_e.ok||h("Validacin incompleta: revisa los detalles de permisos y existencia.")}catch(_e){const Re=_e;if(gt.isCancel(Re))return;const We=Re.response?.data?.detail||Re.message||"No se pudo validar las rutas.";h(We)}finally{d(!1)}}const Pa=b.useMemo(()=>!!g?.ok&&!!D?.id&&!U,[g?.ok,D?.id,U]);function gs(k){const oe=k?.cursor;if(typeof oe=="number"&&Number.isFinite(oe))return oe;if(typeof oe=="string"){const _e=Number(oe);if(Number.isFinite(_e))return _e}return null}function ln(k){return k==null?!1:k<=O.current?!0:(O.current=k,k>V.current&&(V.current=k),!1)}function Sa(k){const oe=k?.progress??k?.percent,_e=typeof oe=="number"?oe:typeof oe=="string"?Number(oe):NaN;if(Number.isFinite(_e)){const Re=Math.max(0,Math.min(100,_e));w(We=>(cr&&We!==Re&&or("setCopyProgress",{prev:We,next:Re}),Re))}}function Jn(k){const oe=String(k?.type||"");if(Sa(k),oe==="status"||oe==="progress"){const _e=k?.stage?String(k.stage):oe;if(_e&&ie(_e),typeof k?.message=="string"&&k.message&&ce(k.message),_e){const Re=_e.toLowerCase();(Re==="cancelado"||Re==="cancelled")&&(Ze.current=!0,Me.current="",$(!1),Vn("cancelled"),ia("cancelled"))}return}if(oe==="oi"){typeof k?.oi=="string"&&De(k.oi);return}if(oe==="oi_warn"){const _e=String(k?.oi||""),Re=String(k?.message||""),We=k?.code?String(k.code):void 0;_e&&Re&&fe(Qt=>[...Qt,{oi:_e,code:We,message:Re}]);return}if(oe==="oi_error"||oe==="file_error"){const _e=k?.oi?String(k.oi):void 0,Re=k?.file?String(k.file):void 0,We=String(k?.message||"Error");Ie(Qt=>[...Qt,{oi:_e,file:Re,message:We}]);return}if(oe==="error"){const _e=String(k?.message||"Fallo en el proceso.");Ie(Re=>[...Re,{message:_e}]),ce(_e),ie("error"),$(!1),Vn("error_event"),ia("error_event");return}if(oe==="complete"){me.current=!0,typeof k?.message=="string"&&ce(k.message),ie("completado"),w(100),dt(k?.audit??null),$(!1),Vn("complete"),ia("complete");return}}function on(k,oe="stream"){const _e=gs(k),Re=String(k?.type||""),We=k?.stage?String(k.stage):"";cr&&or("event",{source:oe,type:Re,stage:We,progress:k?.progress,percent:k?.percent,cursor:_e});const Qt=O.current;if(ln(_e)){cr&&or("skip_event",{source:oe,cursor:_e,lastCursor:Qt});return}Jn(k)}function Vn(k){if(cr&&or("stop_polling",{reason:k,operationId:Q.current}),!!A.current){A.current=!1,Fe.current!=null&&(window.clearTimeout(Fe.current),Fe.current=null);try{Ce.current?.abort()}catch{}Ce.current=null,Je.current=!1,Q.current=""}}function pr(){G.current!=null&&(window.clearTimeout(G.current),G.current=null)}function ns(k){cr&&or("stream_closed",{reason:k,operationId:Oe.current}),se.current=!1,Oe.current="",pr()}function ia(k){cr&&or("stop_stream",{reason:k,operationId:Oe.current}),ns(k);try{ze.current?.abort()}catch{}ze.current=null}function Qa(k){se.current&&(pr(),G.current=window.setTimeout(()=>{if(!se.current)return;const oe=Date.now()-Be.current;if(oe>=Av){or("stream_silent_fallback",{idleMs:oe,operationId:k}),ia("stream_silent"),!me.current&&!Ze.current&&as(k,"stream_silent");return}Qa(k)},Av))}function gr(k){Be.current=Date.now(),se.current&&Qa(k)}function gn(k){A.current&&(Fe.current!=null&&window.clearTimeout(Fe.current),Fe.current=window.setTimeout(()=>{br()},k))}async function br(){if(!A.current||Je.current)return;const k=Q.current;if(!k){Vn("no_operation_id");return}if(Me.current!==k){Vn("operation_mismatch");return}Je.current=!0;try{const oe=await n2(k,V.current,Ce.current?.signal);V.current=oe.cursor_next;for(const _e of oe.events||[])on(_e,"poll");if(oe.done&&(!oe.events||oe.events.length===0)){Vn("done");return}}catch(oe){if(Ze.current||me.current)return;if(oe?.name!=="AbortError"){const Re=oe,We=Re.response?.data?.detail||Re.message||"No se pudo leer el progreso.";Ie(Qt=>[...Qt,{message:We}]),ie("error"),ce(We),$(!1),Vn("poll_error")}}finally{Je.current=!1,A.current&&gn(P2)}}function as(k,oe){Me.current===k&&(A.current||(A.current=!0,Q.current=k,Ce.current=new AbortController,V.current=Math.max(V.current,O.current),cr&&or("start_polling",{operationId:k,reason:oe}),gn(0)))}async function bs(){if(h(""),!g?.ok){h("Debes validar rutas correctamente antes de iniciar el copiado.");return}if(!D?.id){h("Debes seleccionar una corrida de LOG-01 (Historial) para usar su manifiesto.");return}const k=Wt,oe=jt;if(!k.length||!oe){h("Completa orgenes y destino antes de iniciar.");return}Ze.current=!1,me.current=!1,Ie([]),fe([]),dt(null),ie("inicio"),ce("Iniciando copiado..."),w(0),De(""),ye(""),ia("reset"),Vn("reset"),Me.current="",V.current=-1,O.current=-1,$(!0);try{const Re=(await e2({run_id:D.id,rutas_origen:k,ruta_destino:oe})).operation_id;ye(Re),Me.current=Re;const We=new AbortController;ze.current=We,se.current=!0,Oe.current=Re,Be.current=Date.now(),Qa(Re),t2(Re,Bt=>{ae.current&&Me.current===Re&&(gr(Re),on(Bt,"stream"))},We.signal).then(()=>{Me.current===Re&&(ns("stream_closed"),!me.current&&!Ze.current&&as(Re,"stream_closed"))}).catch(Bt=>{if(Me.current===Re){if(Ov(Bt)||Ze.current||me.current){ns("stream_aborted");return}ns("stream_error"),as(Re,"stream_error")}})}catch(_e){if(Ze.current||me.current||Ov(_e))return;const Re=_e,We=Re.response?.data?.detail||Re.message||"No se pudo iniciar/leer el progreso.";Ie(Qt=>[...Qt,{message:We}]),ie("error"),ce(We),ia("start_error"),Vn("start_error"),$(!1)}}async function ss(){if(X){Ze.current=!0,Me.current="";try{await a2(X)}catch{}try{ze.current?.abort()}catch{}ia("user_cancel"),Vn("user_cancel"),$(!1),ie("cancelado"),ce("Cancelado por el usuario.")}}const rs=b.useMemo(()=>{if(!g)return null;const k=(g.origenes||[]).filter(Re=>Re.existe&&Re.lectura).length,oe=(g.origenes||[]).length,_e=!!(g.destino?.existe&&g.destino?.es_directorio&&g.destino?.lectura&&g.destino?.escritura);return{okOrigenes:k,totalOrigenes:oe,okDestino:_e}},[g]);async function Xr(){if(!g)return;const k=[];k.push("LOG-02 - Resultado de validacin"),k.push("");for(const Re of g.origenes||[])k.push(`ORIGEN | ${Re.ruta} | existe=${Re.existe?"SI":"NO"} | lectura=${Re.lectura?"SI":"NO"} | detalle=${Re.detalle||""}`);const oe=g.destino;k.push(`DESTINO | ${oe?.ruta||""} | existe=${oe?.existe?"SI":"NO"} | lectura=${oe?.lectura?"SI":"NO"} | escritura=${oe?.escritura?"SI":"NO"} | detalle=${oe?.detalle||""}`);const _e=k.join(`
`);await Vi(_e)}async function ls(){const k=[];k.push("LOG-02 - Estado de copiado (PB-LOG-015)"),k.push(`operation_id: ${X||"N/D"}`),k.push(`progreso: ${Number.isFinite(Se)?Se.toFixed(0):"0"}%`),k.push(`estado: ${P||""}`),pe&&k.push(`OI: ${pe}`),M&&k.push(`mensaje: ${M}`),await Vi(k.join(`
`))}return i.jsxs("div",{className:"container-fluid",children:[i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[i.jsx("h4",{className:"c-grey-900 mB-10",children:"Filtrado de certificados PDF (LOG-02)"}),i.jsxs("div",{className:"text-muted small",children:["Este mdulo se orienta a ",i.jsx("strong",{children:"copiar"})," y ",i.jsx("strong",{children:"filtrar"})," certificados PDF desde una",i.jsx("strong",{children:" carpeta compartida"})," (no ZIP).",i.jsx("br",{}),"Configura las rutas UNC y valida accesos antes de iniciar el filtrado."]}),f?i.jsx("div",{className:"alert alert-danger mT-15",role:"alert",children:f}):null,i.jsxs("div",{className:"mT-15",children:[i.jsx("h6",{className:"c-grey-900 mB-10",children:"Rutas UNC"}),i.jsxs("div",{className:"row g-2",children:[i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:"Rutas origen (UNC)  lectura"}),e.map((k,oe)=>i.jsx("div",{className:"mB-10",children:i.jsxs("div",{className:"d-flex gap-10 align-items-center",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("input",{className:"form-control form-control-sm"+(v&&!rn[oe]?" is-invalid":""),value:k,onChange:_e=>dn(oe,_e.target.value),placeholder:"\\\\\\\\SERVIDOR\\\\Compartido\\\\Certificados",disabled:c}),v&&!rn[oe]?i.jsx("div",{className:"small text-danger mT-5",children:"Requerido"}):null]}),i.jsxs("div",{className:"btn-group",role:"group","aria-label":"Acciones origen",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void Vi((k||"").trim()),disabled:c||!(k||"").trim(),title:"Copiar ruta",style:{minWidth:84},children:"Copiar"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>Tt(oe),disabled:c,title:"Elegir carpeta",style:{minWidth:84},children:(k||"").trim()?"Editar":"Agregar"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>Sn(oe),disabled:c,title:"Quitar ruta",style:{minWidth:52},children:""})]})]})},oe)),i.jsxs("div",{className:"d-flex gap-10",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:xn,disabled:c,title:"Agregar origen",children:"Agregar origen"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:Dt,disabled:c,title:"Quitar duplicados (solo UI)",children:"Quitar duplicados"})]}),i.jsxs("div",{className:"small text-muted",children:["Nota: estas rutas deben ser accesibles ",i.jsx("strong",{children:"desde el servidor"})," donde corre el backend."]})]}),i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:"Ruta destino (UNC)  lectura y escritura"}),i.jsxs("div",{className:"d-flex gap-10 mB-10",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("input",{className:"form-control form-control-sm "+(v&&!jt?"is-invalid":""),value:s,onChange:k=>l(k.target.value),placeholder:"\\\\\\\\SERVIDOR\\\\Compartido\\\\Salida_LOG02",disabled:c}),v&&!jt?i.jsx("div",{className:"small text-danger mT-5",children:"Destino requerido."}):null]}),i.jsxs("div",{className:"btn-group",role:"group","aria-label":"Acciones destino",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void Vi(jt),disabled:c||!jt,title:"Copiar ruta",style:{minWidth:84},children:"Copiar"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:ft,disabled:c,title:"Elegir carpeta",style:{minWidth:84},children:jt?"Editar":"Agregar"})]})]}),i.jsxs("div",{className:"mT-5",children:[i.jsx("div",{className:"small text-muted mB-5",children:Ln?"Listo para validar.":"Completa orgenes y destino."}),i.jsxs("div",{className:"d-flex gap-10",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>void Us(),disabled:c||!Ln,children:c?"Validando...":"Validar"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:Lt,disabled:c,title:"Limpia orgenes y destino",children:"Limpiar rutas"})]})]})]})]})]}),g?i.jsxs("div",{className:"mT-20",children:[i.jsx("h6",{className:"c-grey-900 mB-10",children:"Resultado de validacin"}),rs?i.jsxs("div",{className:"d-flex flex-wrap gap-10 align-items-center mB-10",children:[i.jsxs("span",{className:"badge bg-light text-dark",children:["Orgenes OK: ",i.jsx("strong",{children:rs.okOrigenes})," / ",rs.totalOrigenes]}),i.jsxs("span",{className:rs.okDestino?"badge bg-success":"badge bg-danger",children:["Destino: ",rs.okDestino?"OK":"No OK"]}),g.ok?null:i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void Xr(),children:"Copiar detalle"})]}):null,i.jsxs("div",{className:"mT-25",children:[i.jsx("h6",{className:"c-grey-900 mB-10",children:"Copiado de PDFs conformes por OI (PB-LOG-015)"}),i.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between gap-10",children:[i.jsxs("div",{className:"small text-muted",children:["Corrida LOG-01 seleccionada:"," ",D?.id?i.jsxs("span",{className:"badge bg-light text-dark",children:["#",D.id,D?.created_at?`  ${Cv(D.created_at)}`:"",D?.source?`  ${D.source}`:"",D?.status?`  ${D.status}`:""]}):i.jsx("span",{className:"badge bg-warning text-dark",children:"No seleccionada"})]}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:pn,disabled:U,children:D?.id?"Cambiar corrida":"Elegir corrida"})]}),D?.id?null:i.jsx("div",{className:"alert alert-warning mT-10",role:"alert",children:"Debes seleccionar una corrida de LOG-01 (historial) para usar su manifiesto y NO CONFORME."}),i.jsxs("div",{className:"d-flex flex-wrap gap-10 mT-10",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>void bs(),disabled:!Pa,children:U?"Copiando...":"Iniciar copiado"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>void ss(),disabled:!U||!X,children:"Cancelar"})]}),i.jsxs("div",{className:"mT-10",children:[i.jsxs("h6",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[i.jsx("span",{children:"Progreso"}),U?i.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null,X?i.jsxs("span",{className:"badge bg-light text-dark",children:["op: ",i.jsx("strong",{children:X})]}):null,i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary ms-auto",onClick:()=>void ls(),disabled:!P&&!M&&!X,title:"Copiar estado del progreso",children:"Copiar estado"})]}),P||M?i.jsxs("div",{className:"small text-muted",children:[i.jsx("strong",{children:"Estado:"})," ",P||"",pe?i.jsxs("span",{children:[" "," ",i.jsx("strong",{children:"OI:"})," ",pe]}):null,M?i.jsxs("span",{children:["  ",M]}):null]}):null,i.jsx("div",{className:"progress",style:{height:10},children:i.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${Math.max(0,Math.min(100,Se))}%`},"aria-valuenow":Se,"aria-valuemin":0,"aria-valuemax":100})}),i.jsxs("div",{className:"small text-muted mT-5",children:[Se.toFixed(0),"%"]})]}),Le.length?i.jsxs("div",{className:"alert alert-danger mT-10",role:"alert",children:[i.jsx("strong",{children:"Se detectaron errores:"}),i.jsx("ul",{className:"mB-0 mT-5",children:Le.slice(-8).map((k,oe)=>i.jsxs("li",{children:[k.oi?`[${k.oi}] `:"",k.file?`${k.file}: `:"",k.message]},`ce-${oe}`))})]}):null,$e.length?i.jsxs("div",{className:"alert alert-warning mT-10",role:"alert",children:[i.jsx("strong",{children:"Advertencias:"}),i.jsx("ul",{className:"mB-0 mT-5",children:$e.slice(-8).map((k,oe)=>i.jsxs("li",{children:["[",k.oi,"] ",k.code?`${k.code}: `:"",k.message]},`cw-${oe}`))})]}):null,Ge?i.jsxs("div",{className:"mT-15",children:[i.jsx("h6",{className:"c-grey-900 mB-10",children:"Auditora de copiado"}),i.jsxs("div",{className:"row g-2",children:[i.jsx("div",{className:"col-12 col-md-4",children:i.jsxs("div",{className:"alert alert-light mB-0",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Total OIs:"})," ",Ge?.total_ois??"N/D"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"OIs OK:"})," ",Ge?.ois_ok??"N/D"]})]})}),i.jsx("div",{className:"col-12 col-md-8",children:i.jsx("div",{className:"alert alert-light mB-0",children:i.jsxs("div",{className:"d-flex flex-wrap gap-10",children:[i.jsxs("span",{children:[i.jsx("strong",{children:"PDF detectados:"})," ",Ge?.archivos?.pdf_detectados??"N/D"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"PDF copiados:"})," ",Ge?.archivos?.pdf_copiados??"N/D"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"Omitidos NO CONFORME:"})," ",Ge?.archivos?.pdf_omitidos_no_conforme??"N/D"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"No PDF omitidos:"})," ",Ge?.archivos?.archivos_no_pdf_omitidos??"N/D"]})]})})})]}),Ge?.ois_faltantes?.length||Ge?.ois_duplicadas?.length||Ge?.destinos_duplicados?.length?i.jsxs("div",{className:"mT-10",children:[Ge?.ois_faltantes?.length?i.jsxs("div",{className:"alert alert-warning",role:"alert",children:[i.jsx("strong",{children:"OIs sin carpeta:"}),i.jsx("ul",{className:"mB-0 mT-5",children:Ge.ois_faltantes.slice(0,10).map((k,oe)=>i.jsxs("li",{children:[k?.oi,"  ",k?.detalle||""]},`of-${oe}`))})]}):null,Ge?.ois_duplicadas?.length?i.jsxs("div",{className:"alert alert-warning",role:"alert",children:[i.jsx("strong",{children:"OIs con mltiples carpetas (duplicadas):"}),i.jsx("ul",{className:"mB-0 mT-5",children:Ge.ois_duplicadas.slice(0,10).map((k,oe)=>i.jsxs("li",{children:[k?.oi,"  ",Array.isArray(k?.carpetas)?k.carpetas.join(" | "):""]},`od-${oe}`))})]}):null,Ge?.destinos_duplicados?.length?i.jsxs("div",{className:"alert alert-warning",role:"alert",children:[i.jsx("strong",{children:"Destinos ya existentes:"}),i.jsx("ul",{className:"mB-0 mT-5",children:Ge.destinos_duplicados.slice(0,10).map((k,oe)=>i.jsxs("li",{children:[k?.oi,"  ",k?.destino||""]},`dd-${oe}`))})]}):null]}):null]}):null,N?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:i.jsx("div",{className:"modal-dialog modal-lg",role:"document",children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{className:"modal-title",children:"Seleccionar corrida de LOG-01 (Historial)"}),i.jsx("button",{type:"button",className:"close","aria-label":"Close",onClick:()=>I(!1),children:i.jsx("span",{"aria-hidden":"true",children:""})})]}),i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{className:"text-muted small mB-10",children:["Por defecto se cargan las ",i.jsx("strong",{children:"ltimas 5 corridas completadas"}),". Puedes usar filtros si lo necesitas."]}),C?i.jsx("div",{className:"alert alert-danger",role:"alert",children:C}):null,i.jsxs("form",{className:"row g-2 align-items-end",onSubmit:k=>{k.preventDefault(),Ht()},children:[i.jsxs("div",{className:"col-12 col-md-4",children:[i.jsx("label",{className:"form-label",children:"Buscar"}),i.jsx("input",{className:"form-control form-control-sm",value:Z,onChange:k=>L(k.target.value),placeholder:"Serie / OI / usuario..."})]}),i.jsxs("div",{className:"col-6 col-md-2",children:[i.jsx("label",{className:"form-label",children:"Desde"}),i.jsx("input",{className:"form-control form-control-sm",type:"date",value:W,onChange:k=>ue(k.target.value)})]}),i.jsxs("div",{className:"col-6 col-md-2",children:[i.jsx("label",{className:"form-label",children:"Hasta"}),i.jsx("input",{className:"form-control form-control-sm",type:"date",value:Ae,onChange:k=>xe(k.target.value)})]}),i.jsxs("div",{className:"col-6 col-md-2",children:[i.jsx("label",{className:"form-label",children:"Origen"}),i.jsx("input",{className:"form-control form-control-sm",value:he,onChange:k=>Ne(k.target.value),placeholder:"AUTO/BASES/..."})]}),i.jsxs("div",{className:"col-6 col-md-2",children:[i.jsx("label",{className:"form-label",children:"Estado"}),i.jsx("input",{className:"form-control form-control-sm",value:ke,onChange:k=>Te(k.target.value),placeholder:"COMPLETADO"})]}),i.jsxs("div",{className:"col-12 d-flex gap-10",children:[i.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:j,children:j?"Buscando...":"Aplicar filtros"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>{L(""),ue(""),xe(""),Ne(""),Te("COMPLETADO"),bt(5)},disabled:j,children:"Ver ltimas 5 exitosas"})]})]}),i.jsx("hr",{}),j?i.jsx("div",{className:"text-muted small",children:"Cargando corridas..."}):i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{style:{width:90},children:"ID"}),i.jsx("th",{children:"Creado"}),i.jsx("th",{style:{width:120},children:"Origen"}),i.jsx("th",{style:{width:140},children:"Estado"}),i.jsx("th",{style:{width:120}})]})}),i.jsx("tbody",{children:T.length?T.map(k=>i.jsxs("tr",{className:"small",children:[i.jsx("td",{children:i.jsxs("strong",{children:["#",k.id]})}),i.jsx("td",{children:Cv(k.created_at)}),i.jsx("td",{children:k.source||"N/D"}),i.jsx("td",{children:k.status||"N/D"}),i.jsx("td",{children:i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>Tn(k),children:"Usar"})})]},k.id)):i.jsx("tr",{className:"small",children:i.jsx("td",{colSpan:5,className:"text-muted",children:"Sin resultados."})})})]})})]}),i.jsx("div",{className:"modal-footer",children:i.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>I(!1),children:"Cerrar"})})]})})}),i.jsx("div",{className:"modal-backdrop fade show"})]}):null]}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Tipo"}),i.jsx("th",{children:"Ruta"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Existe"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Lectura"}),i.jsx("th",{style:{whiteSpace:"nowrap"},children:"Escritura"}),i.jsx("th",{children:"Detalle"})]})}),i.jsxs("tbody",{children:[g.origenes.map((k,oe)=>i.jsxs("tr",{className:"small",children:[i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:"Origen"})}),i.jsx("td",{style:{wordBreak:"break-all"},children:k.ruta||"N/D"}),i.jsx("td",{children:i.jsx("span",{className:Dl(k.existe),children:k.existe?"S":"No"})}),i.jsx("td",{children:i.jsx("span",{className:Dl(k.lectura),children:k.lectura?"S":"No"})}),i.jsx("td",{children:i.jsx("span",{className:Dl(null),children:""})}),i.jsx("td",{children:k.detalle||""})]},`o-${oe}`)),i.jsxs("tr",{className:"small",children:[i.jsx("td",{style:{whiteSpace:"nowrap"},children:i.jsx("strong",{children:"Destino"})}),i.jsx("td",{style:{wordBreak:"break-all"},children:g.destino.ruta||"N/D"}),i.jsx("td",{children:i.jsx("span",{className:Dl(g.destino.existe),children:g.destino.existe?"S":"No"})}),i.jsx("td",{children:i.jsx("span",{className:Dl(g.destino.lectura),children:g.destino.lectura?"S":"No"})}),i.jsx("td",{children:i.jsx("span",{className:Dl(!!g.destino.escritura),children:g.destino.escritura?"S":"No"})}),i.jsx("td",{children:g.destino.detalle||""})]})]})]})}),g.ok?i.jsx("div",{className:"alert alert-success mT-15",role:"alert",children:"Rutas validadas correctamente. Puedes continuar con la siguiente fase."}):i.jsx("div",{className:"alert alert-warning mT-15",role:"alert",children:"Hay rutas con problemas. Corrige existencia/permisos y vuelve a validar."})]}):null]})})}),He?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:i.jsx("div",{className:"modal-dialog modal-lg",role:"document",children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{className:"modal-title",children:Jt==="destino"?"Elegir carpeta de destino":"Elegir carpeta de origen"}),i.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>at(!1)})]}),i.jsxs("div",{className:"modal-body",children:[Hn?i.jsx("div",{className:"alert alert-danger",role:"alert",children:Hn}):null,i.jsxs("div",{className:"row g-2",children:[i.jsxs("div",{className:"col-12 col-md-6",children:[i.jsx("label",{className:"form-label",children:"Raz"}),i.jsx("select",{className:"form-control form-control-sm",value:$n,onChange:k=>{const oe=k.target.value;Ra(oe),Gt(oe)},disabled:!Et.length,children:Et.length?Et.map(k=>i.jsx("option",{value:k,children:k},k)):i.jsx("option",{value:"",children:"Sin races"})})]}),i.jsxs("div",{className:"col-12 col-md-6",children:[i.jsx("label",{className:"form-label",children:"Carpeta actual"}),i.jsx("input",{className:"form-control form-control-sm",value:sn,readOnly:!0})]})]}),i.jsxs("div",{className:"mT-10",children:[i.jsx("label",{className:"form-label mB-5",children:"Navegacin"}),i.jsxs("div",{className:"p-10",style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:6},children:[i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-10",children:zt(sn).map((k,oe,_e)=>i.jsxs("span",{className:"small d-inline-flex align-items-center",children:[i.jsx("button",{type:"button",className:"btn btn-link p-0 align-baseline",onClick:()=>void Gt(k.path),disabled:Zt,title:`Ir a: ${k.path}`,children:k.label}),oe<_e.length-1?i.jsx("span",{className:"text-muted mX-5",children:"/"}):null]},`${k.path}-${oe}`))}),i.jsx("div",{className:"small text-muted mT-5",children:"Tip: Click en una seccin para saltar a esa carpeta."})]})]}),i.jsxs("div",{className:"row g-2 mT-10",children:[i.jsxs("div",{className:"col-12 col-md-8",children:[i.jsx("label",{className:"form-label",children:"Ir a ruta"}),i.jsxs("div",{className:"input-group input-group-sm",children:[i.jsx("input",{className:"form-control",value:ot,onChange:k=>Ke(k.target.value),onKeyDown:k=>{k.key==="Enter"&&(k.preventDefault(),ps())},placeholder:"Pega una ruta (UNC o local) dentro de las races permitidas",disabled:Zt}),i.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>void ps(),disabled:Zt||!ot.trim(),children:"Ir"})]})]}),i.jsxs("div",{className:"col-12 col-md-4",children:[i.jsx("label",{className:"form-label",children:"Acciones"}),i.jsx("div",{className:"d-flex align-items-end",style:{minHeight:31},children:i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void xa(),disabled:!sn||Zt,title:"Copiar la ruta actual al portapapeles",children:"Copiar ruta"})})]})]}),i.jsxs("div",{className:"d-flex gap-10 mT-10",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:Nn,disabled:!sn||Zt,children:"Subir nivel"}),i.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:Ga,disabled:!sn&&!K||Zt,children:K?"Seleccionar carpeta seleccionada":"Seleccionar esta carpeta"})]}),i.jsx("hr",{}),i.jsx("div",{className:"row g-2 mB-10",children:i.jsxs("div",{className:"col-12 col-md-8",children:[i.jsx("label",{className:"form-label",children:"Buscar subcarpeta"}),i.jsx("input",{className:"form-control form-control-sm",value:Ve,onChange:k=>st(k.target.value),placeholder:"Filtrar por nombre",disabled:Zt}),i.jsxs("div",{className:"form-text",children:["Mostrando ",Nt.length," de ",Kn.length]})]})}),Zt?i.jsx("div",{className:"text-muted small",children:"Cargando carpetas..."}):i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-sm mB-0",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"small",children:[i.jsx("th",{children:"Subcarpetas"}),i.jsx("th",{style:{width:120}})]})}),i.jsx("tbody",{children:Nt.length?Nt.map((k,oe)=>i.jsxs("tr",{className:"small"+(K===k.path?" table-active":""),role:"button",tabIndex:0,"data-folder-idx":oe,title:"Click para seleccionar  Doble click para entrar",style:{cursor:Zt?"default":"pointer"},onClick:_e=>{Zt||(je(k.path),_e.currentTarget.focus())},onDoubleClick:()=>{Zt||Gt(k.path)},onKeyDown:_e=>{if(!Zt){if(_e.key==="Enter"){_e.preventDefault(),Gt(k.path);return}if(_e.key===" "||_e.key==="Spacebar"){_e.preventDefault(),je(k.path);return}}},children:[i.jsx("td",{style:{wordBreak:"break-all"},children:k.name}),i.jsx("td",{children:i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:_e=>{_e.stopPropagation(),Gt(k.path)},disabled:Zt,children:"Entrar"})})]},k.path)):i.jsx("tr",{className:"small",children:i.jsx("td",{colSpan:2,className:"text-muted",children:"Sin resultados para el filtro, o sin subcarpetas/permisos para listar."})})})]})})]}),i.jsx("div",{className:"modal-footer",children:i.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>at(!1),children:"Cerrar"})})]})})}),i.jsx("div",{className:"modal-backdrop fade show",onClick:()=>at(!1)})]}):null]})}function K2(){const e=kn();return i.jsx(i.Fragment,{children:i.jsxs(qw,{children:[i.jsx(cn,{path:"/login",element:e?.token?i.jsx(dr,{to:"/home",replace:!0}):i.jsx(EE,{})}),i.jsx(cn,{element:i.jsx(bT,{}),children:i.jsxs(cn,{element:i.jsx(NT,{}),children:[i.jsx(cn,{path:"/",element:i.jsx(dr,{to:"/home",replace:!0})}),i.jsx(cn,{path:"/home",element:i.jsx(k2,{})}),i.jsx(cn,{path:"/oi",element:i.jsx(xv,{})}),i.jsx(cn,{path:"/oi/:oiId",element:i.jsx(xv,{})}),i.jsx(cn,{path:"/oi/list",element:i.jsx(wT,{})}),i.jsx(cn,{path:"/users",element:i.jsx(_T,{})}),i.jsx(cn,{path:"/password",element:i.jsx(ET,{})}),i.jsx(cn,{path:"/admin/permisos",element:i.jsx(OT,{})}),i.jsx(cn,{path:"/logistica/log01/excel",element:i.jsx(B2,{})}),i.jsx(cn,{path:"/logistica/log01/history",element:i.jsx(V2,{})}),i.jsx(cn,{path:"/logistica/log02/pdfs",element:i.jsx(Y2,{})}),i.jsx(cn,{path:"/oi/tools/vima-to-lista",element:i.jsx($T,{})}),i.jsx(cn,{path:"/oi/tools/actualizacion-base",element:i.jsx(g2,{})}),i.jsx(cn,{path:"/oi/tools/formato-ac/history",element:i.jsx(w2,{})}),i.jsx(cn,{path:"/oi/tools/consolidacion",element:i.jsx(j2,{})}),i.jsx(cn,{path:"/oi/tools/consolidacion/correlativo",element:i.jsx(C2,{})}),i.jsx(cn,{path:"/oi/tools/consolidacion/no-correlativo",element:i.jsx(D2,{})}),i.jsx(cn,{path:"/oi/tools/excel",element:i.jsx(z2,{})})]})}),i.jsx(cn,{path:"*",element:i.jsx(dr,{to:e?.token?"/home":"/login",replace:!0})})]})})}const X2=new Ij;GN.createRoot(document.getElementById("root")).render(i.jsx(ht.StrictMode,{children:i.jsx($j,{client:X2,children:i.jsx(cj,{children:i.jsx(_E,{children:i.jsx(K2,{})})})})}));
