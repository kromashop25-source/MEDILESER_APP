(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(c){if(c.ep)return;c.ep=!0;const d=s(c);fetch(c.href,d)}})();function Dv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bf={exports:{}},qi={};var Fb;function BS(){if(Fb)return qi;Fb=1;var e=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function s(i,c,d){var f=null;if(d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),"key"in c){d={};for(var h in c)h!=="key"&&(d[h]=c[h])}else d=c;return c=d.ref,{$$typeof:e,type:i,key:f,ref:c!==void 0?c:null,props:d}}return qi.Fragment=a,qi.jsx=s,qi.jsxs=s,qi}var Hb;function qS(){return Hb||(Hb=1,bf.exports=BS()),bf.exports}var l=qS(),yf={exports:{}},ct={};var Vb;function $S(){if(Vb)return ct;Vb=1;var e=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),S=Symbol.iterator;function $(j){return j===null||typeof j!="object"?null:(j=S&&j[S]||j["@@iterator"],typeof j=="function"?j:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,O={};function q(j,Z,ce){this.props=j,this.context=Z,this.refs=O,this.updater=ce||_}q.prototype.isReactComponent={},q.prototype.setState=function(j,Z){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Z,"setState")},q.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function D(){}D.prototype=q.prototype;function J(j,Z,ce){this.props=j,this.context=Z,this.refs=O,this.updater=ce||_}var z=J.prototype=new D;z.constructor=J,E(z,q.prototype),z.isPureReactComponent=!0;var T=Array.isArray;function G(){}var L={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function de(j,Z,ce){var U=ce.ref;return{$$typeof:e,type:j,key:Z,ref:U!==void 0?U:null,props:ce}}function Ae(j,Z){return de(j.type,Z,j.props)}function je(j){return typeof j=="object"&&j!==null&&j.$$typeof===e}function ge(j){var Z={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ce){return Z[ce]})}var we=/\/+/g;function Me(j,Z){return typeof j=="object"&&j!==null&&j.key!=null?ge(""+j.key):Z.toString(36)}function Te(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(G,G):(j.status="pending",j.then(function(Z){j.status==="pending"&&(j.status="fulfilled",j.value=Z)},function(Z){j.status==="pending"&&(j.status="rejected",j.reason=Z)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function M(j,Z,ce,U,ue){var be=typeof j;(be==="undefined"||be==="boolean")&&(j=null);var ze=!1;if(j===null)ze=!0;else switch(be){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(j.$$typeof){case e:case a:ze=!0;break;case v:return ze=j._init,M(ze(j._payload),Z,ce,U,ue)}}if(ze)return ue=ue(j),ze=U===""?"."+Me(j,0):U,T(ue)?(ce="",ze!=null&&(ce=ze.replace(we,"$&/")+"/"),M(ue,Z,ce,"",function(Le){return Le})):ue!=null&&(je(ue)&&(ue=Ae(ue,ce+(ue.key==null||j&&j.key===ue.key?"":(""+ue.key).replace(we,"$&/")+"/")+ze)),Z.push(ue)),1;ze=0;var $e=U===""?".":U+":";if(T(j))for(var he=0;he<j.length;he++)U=j[he],be=$e+Me(U,he),ze+=M(U,Z,ce,be,ue);else if(he=$(j),typeof he=="function")for(j=he.call(j),he=0;!(U=j.next()).done;)U=U.value,be=$e+Me(U,he++),ze+=M(U,Z,ce,be,ue);else if(be==="object"){if(typeof j.then=="function")return M(Te(j),Z,ce,U,ue);throw Z=String(j),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ze}function I(j,Z,ce){if(j==null)return j;var U=[],ue=0;return M(j,U,"","",function(be){return Z.call(ce,be,ue++)}),U}function K(j){if(j._status===-1){var Z=j._result;Z=Z(),Z.then(function(ce){(j._status===0||j._status===-1)&&(j._status=1,j._result=ce)},function(ce){(j._status===0||j._status===-1)&&(j._status=2,j._result=ce)}),j._status===-1&&(j._status=0,j._result=Z)}if(j._status===1)return j._result.default;throw j._result}var xe=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Se={map:I,forEach:function(j,Z,ce){I(j,function(){Z.apply(this,arguments)},ce)},count:function(j){var Z=0;return I(j,function(){Z++}),Z},toArray:function(j){return I(j,function(Z){return Z})||[]},only:function(j){if(!je(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return ct.Activity=x,ct.Children=Se,ct.Component=q,ct.Fragment=s,ct.Profiler=c,ct.PureComponent=J,ct.StrictMode=i,ct.Suspense=g,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,ct.__COMPILER_RUNTIME={__proto__:null,c:function(j){return L.H.useMemoCache(j)}},ct.cache=function(j){return function(){return j.apply(null,arguments)}},ct.cacheSignal=function(){return null},ct.cloneElement=function(j,Z,ce){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var U=E({},j.props),ue=j.key;if(Z!=null)for(be in Z.key!==void 0&&(ue=""+Z.key),Z)!W.call(Z,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&Z.ref===void 0||(U[be]=Z[be]);var be=arguments.length-2;if(be===1)U.children=ce;else if(1<be){for(var ze=Array(be),$e=0;$e<be;$e++)ze[$e]=arguments[$e+2];U.children=ze}return de(j.type,ue,U)},ct.createContext=function(j){return j={$$typeof:f,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:d,_context:j},j},ct.createElement=function(j,Z,ce){var U,ue={},be=null;if(Z!=null)for(U in Z.key!==void 0&&(be=""+Z.key),Z)W.call(Z,U)&&U!=="key"&&U!=="__self"&&U!=="__source"&&(ue[U]=Z[U]);var ze=arguments.length-2;if(ze===1)ue.children=ce;else if(1<ze){for(var $e=Array(ze),he=0;he<ze;he++)$e[he]=arguments[he+2];ue.children=$e}if(j&&j.defaultProps)for(U in ze=j.defaultProps,ze)ue[U]===void 0&&(ue[U]=ze[U]);return de(j,be,ue)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(j){return{$$typeof:h,render:j}},ct.isValidElement=je,ct.lazy=function(j){return{$$typeof:v,_payload:{_status:-1,_result:j},_init:K}},ct.memo=function(j,Z){return{$$typeof:p,type:j,compare:Z===void 0?null:Z}},ct.startTransition=function(j){var Z=L.T,ce={};L.T=ce;try{var U=j(),ue=L.S;ue!==null&&ue(ce,U),typeof U=="object"&&U!==null&&typeof U.then=="function"&&U.then(G,xe)}catch(be){xe(be)}finally{Z!==null&&ce.types!==null&&(Z.types=ce.types),L.T=Z}},ct.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},ct.use=function(j){return L.H.use(j)},ct.useActionState=function(j,Z,ce){return L.H.useActionState(j,Z,ce)},ct.useCallback=function(j,Z){return L.H.useCallback(j,Z)},ct.useContext=function(j){return L.H.useContext(j)},ct.useDebugValue=function(){},ct.useDeferredValue=function(j,Z){return L.H.useDeferredValue(j,Z)},ct.useEffect=function(j,Z){return L.H.useEffect(j,Z)},ct.useEffectEvent=function(j){return L.H.useEffectEvent(j)},ct.useId=function(){return L.H.useId()},ct.useImperativeHandle=function(j,Z,ce){return L.H.useImperativeHandle(j,Z,ce)},ct.useInsertionEffect=function(j,Z){return L.H.useInsertionEffect(j,Z)},ct.useLayoutEffect=function(j,Z){return L.H.useLayoutEffect(j,Z)},ct.useMemo=function(j,Z){return L.H.useMemo(j,Z)},ct.useOptimistic=function(j,Z){return L.H.useOptimistic(j,Z)},ct.useReducer=function(j,Z,ce){return L.H.useReducer(j,Z,ce)},ct.useRef=function(j){return L.H.useRef(j)},ct.useState=function(j){return L.H.useState(j)},ct.useSyncExternalStore=function(j,Z,ce){return L.H.useSyncExternalStore(j,Z,ce)},ct.useTransition=function(){return L.H.useTransition()},ct.version="19.2.0",ct}var Zb;function Tm(){return Zb||(Zb=1,yf.exports=$S()),yf.exports}var b=Tm();const gt=Dv(b);var vf={exports:{}},$i={},xf={exports:{}},Nf={};var Gb;function IS(){return Gb||(Gb=1,(function(e){function a(M,I){var K=M.length;M.push(I);e:for(;0<K;){var xe=K-1>>>1,Se=M[xe];if(0<c(Se,I))M[xe]=I,M[K]=Se,K=xe;else break e}}function s(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var I=M[0],K=M.pop();if(K!==I){M[0]=K;e:for(var xe=0,Se=M.length,j=Se>>>1;xe<j;){var Z=2*(xe+1)-1,ce=M[Z],U=Z+1,ue=M[U];if(0>c(ce,K))U<Se&&0>c(ue,ce)?(M[xe]=ue,M[U]=K,xe=U):(M[xe]=ce,M[Z]=K,xe=Z);else if(U<Se&&0>c(ue,K))M[xe]=ue,M[U]=K,xe=U;else break e}}return I}function c(M,I){var K=M.sortIndex-I.sortIndex;return K!==0?K:M.id-I.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var f=Date,h=f.now();e.unstable_now=function(){return f.now()-h}}var g=[],p=[],v=1,x=null,S=3,$=!1,_=!1,E=!1,O=!1,q=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function z(M){for(var I=s(p);I!==null;){if(I.callback===null)i(p);else if(I.startTime<=M)i(p),I.sortIndex=I.expirationTime,a(g,I);else break;I=s(p)}}function T(M){if(E=!1,z(M),!_)if(s(g)!==null)_=!0,G||(G=!0,ge());else{var I=s(p);I!==null&&Te(T,I.startTime-M)}}var G=!1,L=-1,W=5,de=-1;function Ae(){return O?!0:!(e.unstable_now()-de<W)}function je(){if(O=!1,G){var M=e.unstable_now();de=M;var I=!0;try{e:{_=!1,E&&(E=!1,D(L),L=-1),$=!0;var K=S;try{t:{for(z(M),x=s(g);x!==null&&!(x.expirationTime>M&&Ae());){var xe=x.callback;if(typeof xe=="function"){x.callback=null,S=x.priorityLevel;var Se=xe(x.expirationTime<=M);if(M=e.unstable_now(),typeof Se=="function"){x.callback=Se,z(M),I=!0;break t}x===s(g)&&i(g),z(M)}else i(g);x=s(g)}if(x!==null)I=!0;else{var j=s(p);j!==null&&Te(T,j.startTime-M),I=!1}}break e}finally{x=null,S=K,$=!1}I=void 0}}finally{I?ge():G=!1}}}var ge;if(typeof J=="function")ge=function(){J(je)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Me=we.port2;we.port1.onmessage=je,ge=function(){Me.postMessage(null)}}else ge=function(){q(je,0)};function Te(M,I){L=q(function(){M(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_next=function(M){switch(S){case 1:case 2:case 3:var I=3;break;default:I=S}var K=S;S=I;try{return M()}finally{S=K}},e.unstable_requestPaint=function(){O=!0},e.unstable_runWithPriority=function(M,I){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var K=S;S=M;try{return I()}finally{S=K}},e.unstable_scheduleCallback=function(M,I,K){var xe=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?xe+K:xe):K=xe,M){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=K+Se,M={id:v++,callback:I,priorityLevel:M,startTime:K,expirationTime:Se,sortIndex:-1},K>xe?(M.sortIndex=K,a(p,M),s(g)===null&&M===s(p)&&(E?(D(L),L=-1):E=!0,Te(T,K-xe))):(M.sortIndex=Se,a(g,M),_||$||(_=!0,G||(G=!0,ge()))),M},e.unstable_shouldYield=Ae,e.unstable_wrapCallback=function(M){var I=S;return function(){var K=S;S=I;try{return M.apply(this,arguments)}finally{S=K}}}})(Nf)),Nf}var Pb;function FS(){return Pb||(Pb=1,xf.exports=IS()),xf.exports}var Sf={exports:{}},ea={};var Qb;function HS(){if(Qb)return ea;Qb=1;var e=Tm();function a(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(g,p,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:x==null?null:""+x,children:g,containerInfo:p,implementation:v}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ea.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ea.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return d(g,p,null,v)},ea.flushSync=function(g){var p=f.T,v=i.p;try{if(f.T=null,i.p=2,g)return g()}finally{f.T=p,i.p=v,i.d.f()}},ea.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(g,p))},ea.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},ea.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,x=h(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,$=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:S,fetchPriority:$}):v==="script"&&i.d.X(g,{crossOrigin:x,integrity:S,fetchPriority:$,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ea.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);i.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(g)},ea.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,x=h(v,p.crossOrigin);i.d.L(g,v,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ea.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=h(p.as,p.crossOrigin);i.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(g)},ea.requestFormReset=function(g){i.d.r(g)},ea.unstable_batchedUpdates=function(g,p){return g(p)},ea.useFormState=function(g,p,v){return f.H.useFormState(g,p,v)},ea.useFormStatus=function(){return f.H.useHostTransitionStatus()},ea.version="19.2.0",ea}var Yb;function VS(){if(Yb)return Sf.exports;Yb=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(a){console.error(a)}}return e(),Sf.exports=HS(),Sf.exports}var Kb;function ZS(){if(Kb)return $i;Kb=1;var e=FS(),a=Tm(),s=VS();function i(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function h(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(d(t)!==t)throw Error(i(188))}function p(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(i(188));return n!==t?null:t}for(var r=t,o=n;;){var u=r.return;if(u===null)break;var m=u.alternate;if(m===null){if(o=u.return,o!==null){r=o;continue}break}if(u.child===m.child){for(m=u.child;m;){if(m===r)return g(u),t;if(m===o)return g(u),n;m=m.sibling}throw Error(i(188))}if(r.return!==o.return)r=u,o=m;else{for(var y=!1,N=u.child;N;){if(N===r){y=!0,r=u,o=m;break}if(N===o){y=!0,o=u,r=m;break}N=N.sibling}if(!y){for(N=m.child;N;){if(N===r){y=!0,r=m,o=u;break}if(N===o){y=!0,o=m,r=u;break}N=N.sibling}if(!y)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?t:n}function v(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=v(t),n!==null)return n;t=t.sibling}return null}var x=Object.assign,S=Symbol.for("react.element"),$=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),J=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),de=Symbol.for("react.activity"),Ae=Symbol.for("react.memo_cache_sentinel"),je=Symbol.iterator;function ge(t){return t===null||typeof t!="object"?null:(t=je&&t[je]||t["@@iterator"],typeof t=="function"?t:null)}var we=Symbol.for("react.client.reference");function Me(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===we?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case E:return"Fragment";case q:return"Profiler";case O:return"StrictMode";case T:return"Suspense";case G:return"SuspenseList";case de:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case _:return"Portal";case J:return t.displayName||"Context";case D:return(t._context.displayName||"Context")+".Consumer";case z:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case L:return n=t.displayName||null,n!==null?n:Me(t.type)||"Memo";case W:n=t._payload,t=t._init;try{return Me(t(n))}catch{}}return null}var Te=Array.isArray,M=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},xe=[],Se=-1;function j(t){return{current:t}}function Z(t){0>Se||(t.current=xe[Se],xe[Se]=null,Se--)}function ce(t,n){Se++,xe[Se]=t.current,t.current=n}var U=j(null),ue=j(null),be=j(null),ze=j(null);function $e(t,n){switch(ce(be,n),ce(ue,t),ce(U,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?db(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=db(n),t=fb(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Z(U),ce(U,t)}function he(){Z(U),Z(ue),Z(be)}function Le(t){t.memoizedState!==null&&ce(ze,t);var n=U.current,r=fb(n,t.type);n!==r&&(ce(ue,t),ce(U,r))}function Ie(t){ue.current===t&&(Z(U),Z(ue)),ze.current===t&&(Z(ze),Mi._currentValue=K)}var Ze,mt;function ke(t){if(Ze===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Ze=n&&n[1]||"",mt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ze+t+mt}var Ge=!1;function pe(t,n){if(!t||Ge)return"";Ge=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(oe){var ae=oe}Reflect.construct(t,[],Ne)}else{try{Ne.call()}catch(oe){ae=oe}t.call(Ne.prototype)}}else{try{throw Error()}catch(oe){ae=oe}(Ne=t())&&typeof Ne.catch=="function"&&Ne.catch(function(){})}}catch(oe){if(oe&&ae&&typeof oe.stack=="string")return[oe.stack,ae.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),y=m[0],N=m[1];if(y&&N){var k=y.split(`
`),te=N.split(`
`);for(u=o=0;o<k.length&&!k[o].includes("DetermineComponentFrameRoot");)o++;for(;u<te.length&&!te[u].includes("DetermineComponentFrameRoot");)u++;if(o===k.length||u===te.length)for(o=k.length-1,u=te.length-1;1<=o&&0<=u&&k[o]!==te[u];)u--;for(;1<=o&&0<=u;o--,u--)if(k[o]!==te[u]){if(o!==1||u!==1)do if(o--,u--,0>u||k[o]!==te[u]){var me=`
`+k[o].replace(" at new "," at ");return t.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",t.displayName)),me}while(1<=o&&0<=u);break}}}finally{Ge=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?ke(r):""}function Fe(t,n){switch(t.tag){case 26:case 27:case 5:return ke(t.type);case 16:return ke("Lazy");case 13:return t.child!==n&&n!==null?ke("Suspense Fallback"):ke("Suspense");case 19:return ke("SuspenseList");case 0:case 15:return pe(t.type,!1);case 11:return pe(t.type.render,!1);case 1:return pe(t.type,!0);case 31:return ke("Activity");default:return""}}function Oe(t){try{var n="",r=null;do n+=Fe(t,r),r=t,t=t.return;while(t);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var We=Object.prototype.hasOwnProperty,A=e.unstable_scheduleCallback,V=e.unstable_cancelCallback,R=e.unstable_shouldYield,Q=e.unstable_requestPaint,P=e.unstable_now,re=e.unstable_getCurrentPriorityLevel,Re=e.unstable_ImmediatePriority,Be=e.unstable_UserBlockingPriority,se=e.unstable_NormalPriority,Ue=e.unstable_LowPriority,He=e.unstable_IdlePriority,st=e.log,Xt=e.unstable_setDisableYieldValue,_e=null,et=null;function Ft(t){if(typeof st=="function"&&Xt(t),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(_e,t)}catch{}}var At=Math.clz32?Math.clz32:Ra,Rn=Math.log,Hn=Math.LN2;function Ra(t){return t>>>=0,t===0?32:31-(Rn(t)/Hn|0)|0}var an=256,it=262144,Xn=4194304;function qn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Gt(t,n,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,m=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var N=o&134217727;return N!==0?(o=N&~m,o!==0?u=qn(o):(y&=N,y!==0?u=qn(y):r||(r=N&~t,r!==0&&(u=qn(r))))):(N=o&~m,N!==0?u=qn(N):y!==0?u=qn(y):r||(r=o&~t,r!==0&&(u=qn(r)))),u===0?0:n!==0&&n!==u&&(n&m)===0&&(m=u&-u,r=n&-n,m>=r||m===32&&(r&4194048)!==0)?n:u}function Vn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Zn(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y(){var t=Xn;return Xn<<=1,(Xn&62914560)===0&&(Xn=4194304),t}function X(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function Ee(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ve(t,n,r,o,u,m){var y=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var N=t.entanglements,k=t.expirationTimes,te=t.hiddenUpdates;for(r=y&~r;0<r;){var me=31-At(r),Ne=1<<me;N[me]=0,k[me]=-1;var ae=te[me];if(ae!==null)for(te[me]=null,me=0;me<ae.length;me++){var oe=ae[me];oe!==null&&(oe.lane&=-536870913)}r&=~Ne}o!==0&&rt(t,o,0),m!==0&&u===0&&t.tag!==0&&(t.suspendedLanes|=m&~(y&~n))}function rt(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-At(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|r&261930}function ut(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var o=31-At(r),u=1<<o;u&n|t[o]&n&&(t[o]|=n),r&=~u}}function Xe(t,n){var r=n&-n;return r=(r&42)!==0?1:Ot(r),(r&(t.suspendedLanes|n))!==0?0:r}function Ot(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Rt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function kt(){var t=I.p;return t!==0?t:(t=window.event,t===void 0?32:Mb(t.type))}function sn(t,n){var r=I.p;try{return I.p=t,n()}finally{I.p=r}}var Nt=Math.random().toString(36).slice(2),ot="__reactFiber$"+Nt,lt="__reactProps$"+Nt,Ht="__reactContainer$"+Nt,pn="__reactEvents$"+Nt,Tn="__reactListeners$"+Nt,Nn="__reactHandles$"+Nt,gn="__reactResources$"+Nt,Vt="__reactMarker$"+Nt;function Gn(t){delete t[ot],delete t[lt],delete t[pn],delete t[Tn],delete t[Nn]}function cn(t){var n=t[ot];if(n)return n;for(var r=t.parentNode;r;){if(n=r[Ht]||r[ot]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=vb(t);t!==null;){if(r=t[ot])return r;t=vb(t)}return n}t=r,r=t.parentNode}return null}function Sn(t){if(t=t[ot]||t[Ht]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function Dn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(i(33))}function bn(t){var n=t[gn];return n||(n=t[gn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function yt(t){t[Vt]=!0}var ds=new Set,xa={};function jn(t,n){$n(t,n),$n(t+"Capture",n)}function $n(t,n){for(xa[t]=n,t=0;t<n.length;t++)ds.add(n[t])}var zn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ds={},Ta={};function fs(t){return We.call(Ta,t)?!0:We.call(Ds,t)?!1:zn.test(t)?Ta[t]=!0:(Ds[t]=!0,!1)}function rn(t,n,r){if(fs(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function Na(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function Jn(t,n,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+o)}}function un(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fr(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Xr(t,n,r){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,m=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return u.call(this)},set:function(y){r=""+y,m.call(this,y)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(y){r=""+y},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function mr(t){if(!t._valueTracker){var n=fr(t)?"checked":"value";t._valueTracker=Xr(t,n,""+t[n])}}function hr(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return t&&(o=fr(t)?t.checked?"true":"false":t.value),t=o,t!==r?(n.setValue(t),!0):!1}function ms(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zs=/[\n"\\]/g;function Mt(t){return t.replace(zs,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ks(t,n,r,o,u,m,y,N){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),n!=null?y==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+un(n)):t.value!==""+un(n)&&(t.value=""+un(n)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),n!=null?Wn(t,y,un(n)):r!=null?Wn(t,y,un(r)):o!=null&&t.removeAttribute("value"),u==null&&m!=null&&(t.defaultChecked=!!m),u!=null&&(t.checked=u&&typeof u!="function"&&typeof u!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?t.name=""+un(N):t.removeAttribute("name")}function Ya(t,n,r,o,u,m,y,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),n!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){mr(t);return}r=r!=null?""+un(r):"",n=n!=null?""+un(n):r,N||n===t.value||(t.value=n),t.defaultValue=n}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=N?t.checked:!!o,t.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y),mr(t)}function Wn(t,n,r){n==="number"&&ms(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Da(t,n,r,o){if(t=t.options,n){n={};for(var u=0;u<r.length;u++)n["$"+r[u]]=!0;for(r=0;r<t.length;r++)u=n.hasOwnProperty("$"+t[r].value),t[r].selected!==u&&(t[r].selected=u),u&&o&&(t[r].defaultSelected=!0)}else{for(r=""+un(r),n=null,u=0;u<t.length;u++){if(t[u].value===r){t[u].selected=!0,o&&(t[u].defaultSelected=!0);return}n!==null||t[u].disabled||(n=t[u])}n!==null&&(n.selected=!0)}}function Jr(t,n,r){if(n!=null&&(n=""+un(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+un(r):""}function pr(t,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(i(92));if(Te(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=un(n),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o),mr(t)}function ss(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var gr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wr(t,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,r):typeof r!="number"||r===0||gr.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function br(t,n,r){if(n!=null&&typeof n!="object")throw Error(i(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var u in n)o=n[u],n.hasOwnProperty(u)&&r[u]!==o&&Wr(t,u,o)}else for(var m in n)n.hasOwnProperty(m)&&Wr(t,m,n[m])}function Ka(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ei=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ms(t){return ei.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Jt(){}var za=null;function yr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var aa=null,sa=null;function Xa(t){var n=Sn(t);if(n&&(t=n.stateNode)){var r=t[lt]||null;e:switch(t=n.stateNode,n.type){case"input":if(ks(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Mt(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==t&&o.form===t.form){var u=o[lt]||null;if(!u)throw Error(i(90));ks(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===t.form&&hr(o)}break e;case"textarea":Jr(t,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&Da(t,!!r.multiple,n,!1)}}}var vr=!1;function C(t,n,r){if(vr)return t(n,r);vr=!0;try{var o=t(n);return o}finally{if(vr=!1,(aa!==null||sa!==null)&&(Jo(),aa&&(n=aa,t=sa,sa=aa=null,Xa(n),t)))for(n=0;n<t.length;n++)Xa(t[n])}}function ne(t,n){var r=t.stateNode;if(r===null)return null;var o=r[lt]||null;if(o===null)return null;r=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(i(231,n,typeof r));return r}var ie=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ye=!1;if(ie)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){ye=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch{ye=!1}var _t=null,w=null,F=null;function fe(){if(F)return F;var t,n=w,r=n.length,o,u="value"in _t?_t.value:_t.textContent,m=u.length;for(t=0;t<r&&n[t]===u[t];t++);var y=r-t;for(o=1;o<=y&&n[r-o]===u[m-o];o++);return F=u.slice(t,1<o?1-o:void 0)}function De(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function at(){return!0}function Et(){return!1}function ht(t){function n(r,o,u,m,y){this._reactName=r,this._targetInst=u,this.type=o,this.nativeEvent=m,this.target=y,this.currentTarget=null;for(var N in t)t.hasOwnProperty(N)&&(r=t[N],this[N]=r?r(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?at:Et,this.isPropagationStopped=Et,this}return x(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=at)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=at)},persist:function(){},isPersistent:at}),n}var dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kn=ht(dn),Ct=x({},dn,{view:0,detail:0}),el=ht(Ct),yu,vu,ti,go=x({},Ct,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ti&&(ti&&t.type==="mousemove"?(yu=t.screenX-ti.screenX,vu=t.screenY-ti.screenY):vu=yu=0,ti=t),yu)},movementY:function(t){return"movementY"in t?t.movementY:vu}}),hh=ht(go),L0=x({},go,{dataTransfer:0}),B0=ht(L0),q0=x({},Ct,{relatedTarget:0}),xu=ht(q0),$0=x({},dn,{animationName:0,elapsedTime:0,pseudoElement:0}),I0=ht($0),F0=x({},dn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),H0=ht(F0),V0=x({},dn,{data:0}),ph=ht(V0),Z0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q0(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=P0[t])?!!n[t]:!1}function Nu(){return Q0}var Y0=x({},Ct,{key:function(t){if(t.key){var n=Z0[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=De(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?G0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nu,charCode:function(t){return t.type==="keypress"?De(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?De(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),K0=ht(Y0),X0=x({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gh=ht(X0),J0=x({},Ct,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nu}),W0=ht(J0),eN=x({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),tN=ht(eN),nN=x({},go,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aN=ht(nN),sN=x({},dn,{newState:0,oldState:0}),rN=ht(sN),lN=[9,13,27,32],Su=ie&&"CompositionEvent"in window,ni=null;ie&&"documentMode"in document&&(ni=document.documentMode);var iN=ie&&"TextEvent"in window&&!ni,bh=ie&&(!Su||ni&&8<ni&&11>=ni),yh=" ",vh=!1;function xh(t,n){switch(t){case"keyup":return lN.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tl=!1;function oN(t,n){switch(t){case"compositionend":return Nh(n);case"keypress":return n.which!==32?null:(vh=!0,yh);case"textInput":return t=n.data,t===yh&&vh?null:t;default:return null}}function cN(t,n){if(tl)return t==="compositionend"||!Su&&xh(t,n)?(t=fe(),F=w=_t=null,tl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return bh&&n.locale!=="ko"?null:n.data;default:return null}}var uN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!uN[t.type]:n==="textarea"}function jh(t,n,r,o){aa?sa?sa.push(o):sa=[o]:aa=o,n=rc(n,"onChange"),0<n.length&&(r=new kn("onChange","change",null,r,o),t.push({event:r,listeners:n}))}var ai=null,si=null;function dN(t){rb(t,0)}function bo(t){var n=Dn(t);if(hr(n))return t}function wh(t,n){if(t==="change")return n}var _h=!1;if(ie){var ju;if(ie){var wu="oninput"in document;if(!wu){var Eh=document.createElement("div");Eh.setAttribute("oninput","return;"),wu=typeof Eh.oninput=="function"}ju=wu}else ju=!1;_h=ju&&(!document.documentMode||9<document.documentMode)}function Ch(){ai&&(ai.detachEvent("onpropertychange",Ah),si=ai=null)}function Ah(t){if(t.propertyName==="value"&&bo(si)){var n=[];jh(n,si,t,yr(t)),C(dN,n)}}function fN(t,n,r){t==="focusin"?(Ch(),ai=n,si=r,ai.attachEvent("onpropertychange",Ah)):t==="focusout"&&Ch()}function mN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bo(si)}function hN(t,n){if(t==="click")return bo(n)}function pN(t,n){if(t==="input"||t==="change")return bo(n)}function gN(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Sa=typeof Object.is=="function"?Object.is:gN;function ri(t,n){if(Sa(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var u=r[o];if(!We.call(n,u)||!Sa(t[u],n[u]))return!1}return!0}function Oh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rh(t,n){var r=Oh(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=n&&o>=n)return{node:r,offset:n-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Oh(r)}}function Th(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Th(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Dh(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=ms(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=ms(t.document)}return n}function _u(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var bN=ie&&"documentMode"in document&&11>=document.documentMode,nl=null,Eu=null,li=null,Cu=!1;function zh(t,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Cu||nl==null||nl!==ms(o)||(o=nl,"selectionStart"in o&&_u(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),li&&ri(li,o)||(li=o,o=rc(Eu,"onSelect"),0<o.length&&(n=new kn("onSelect","select",null,n,r),t.push({event:n,listeners:o}),n.target=nl)))}function xr(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var al={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionrun:xr("Transition","TransitionRun"),transitionstart:xr("Transition","TransitionStart"),transitioncancel:xr("Transition","TransitionCancel"),transitionend:xr("Transition","TransitionEnd")},Au={},kh={};ie&&(kh=document.createElement("div").style,"AnimationEvent"in window||(delete al.animationend.animation,delete al.animationiteration.animation,delete al.animationstart.animation),"TransitionEvent"in window||delete al.transitionend.transition);function Nr(t){if(Au[t])return Au[t];if(!al[t])return t;var n=al[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in kh)return Au[t]=n[r];return t}var Mh=Nr("animationend"),Uh=Nr("animationiteration"),Lh=Nr("animationstart"),yN=Nr("transitionrun"),vN=Nr("transitionstart"),xN=Nr("transitioncancel"),Bh=Nr("transitionend"),qh=new Map,Ou="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ou.push("scrollEnd");function Ja(t,n){qh.set(t,n),jn(n,[t])}var yo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ka=[],sl=0,Ru=0;function vo(){for(var t=sl,n=Ru=sl=0;n<t;){var r=ka[n];ka[n++]=null;var o=ka[n];ka[n++]=null;var u=ka[n];ka[n++]=null;var m=ka[n];if(ka[n++]=null,o!==null&&u!==null){var y=o.pending;y===null?u.next=u:(u.next=y.next,y.next=u),o.pending=u}m!==0&&$h(r,u,m)}}function xo(t,n,r,o){ka[sl++]=t,ka[sl++]=n,ka[sl++]=r,ka[sl++]=o,Ru|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Tu(t,n,r,o){return xo(t,n,r,o),No(t)}function Sr(t,n){return xo(t,null,null,n),No(t)}function $h(t,n,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var u=!1,m=t.return;m!==null;)m.childLanes|=r,o=m.alternate,o!==null&&(o.childLanes|=r),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(u=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,u&&n!==null&&(u=31-At(r),t=m.hiddenUpdates,o=t[u],o===null?t[u]=[n]:o.push(n),n.lane=r|536870912),m):null}function No(t){if(50<Ai)throw Ai=0,$d=null,Error(i(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var rl={};function NN(t,n,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ja(t,n,r,o){return new NN(t,n,r,o)}function Du(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hs(t,n){var r=t.alternate;return r===null?(r=ja(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function Ih(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function So(t,n,r,o,u,m){var y=0;if(o=t,typeof t=="function")Du(t)&&(y=1);else if(typeof t=="string")y=ES(t,r,U.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case de:return t=ja(31,r,n,u),t.elementType=de,t.lanes=m,t;case E:return jr(r.children,u,m,n);case O:y=8,u|=24;break;case q:return t=ja(12,r,n,u|2),t.elementType=q,t.lanes=m,t;case T:return t=ja(13,r,n,u),t.elementType=T,t.lanes=m,t;case G:return t=ja(19,r,n,u),t.elementType=G,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J:y=10;break e;case D:y=9;break e;case z:y=11;break e;case L:y=14;break e;case W:y=16,o=null;break e}y=29,r=Error(i(130,t===null?"null":typeof t,"")),o=null}return n=ja(y,r,n,u),n.elementType=t,n.type=o,n.lanes=m,n}function jr(t,n,r,o){return t=ja(7,t,o,n),t.lanes=r,t}function zu(t,n,r){return t=ja(6,t,null,n),t.lanes=r,t}function Fh(t){var n=ja(18,null,null,0);return n.stateNode=t,n}function ku(t,n,r){return n=ja(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Hh=new WeakMap;function Ma(t,n){if(typeof t=="object"&&t!==null){var r=Hh.get(t);return r!==void 0?r:(n={value:t,source:n,stack:Oe(n)},Hh.set(t,n),n)}return{value:t,source:n,stack:Oe(n)}}var ll=[],il=0,jo=null,ii=0,Ua=[],La=0,Us=null,rs=1,ls="";function ps(t,n){ll[il++]=ii,ll[il++]=jo,jo=t,ii=n}function Vh(t,n,r){Ua[La++]=rs,Ua[La++]=ls,Ua[La++]=Us,Us=t;var o=rs;t=ls;var u=32-At(o)-1;o&=~(1<<u),r+=1;var m=32-At(n)+u;if(30<m){var y=u-u%5;m=(o&(1<<y)-1).toString(32),o>>=y,u-=y,rs=1<<32-At(n)+u|r<<u|o,ls=m+t}else rs=1<<m|r<<u|o,ls=t}function Mu(t){t.return!==null&&(ps(t,1),Vh(t,1,0))}function Uu(t){for(;t===jo;)jo=ll[--il],ll[il]=null,ii=ll[--il],ll[il]=null;for(;t===Us;)Us=Ua[--La],Ua[La]=null,ls=Ua[--La],Ua[La]=null,rs=Ua[--La],Ua[La]=null}function Zh(t,n){Ua[La++]=rs,Ua[La++]=ls,Ua[La++]=Us,rs=n.id,ls=n.overflow,Us=t}var Pn=null,Qt=null,wt=!1,Ls=null,Ba=!1,Lu=Error(i(519));function Bs(t){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oi(Ma(n,t)),Lu}function Gh(t){var n=t.stateNode,r=t.type,o=t.memoizedProps;switch(n[ot]=t,n[lt]=o,r){case"dialog":xt("cancel",n),xt("close",n);break;case"iframe":case"object":case"embed":xt("load",n);break;case"video":case"audio":for(r=0;r<Ri.length;r++)xt(Ri[r],n);break;case"source":xt("error",n);break;case"img":case"image":case"link":xt("error",n),xt("load",n);break;case"details":xt("toggle",n);break;case"input":xt("invalid",n),Ya(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":xt("invalid",n);break;case"textarea":xt("invalid",n),pr(n,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||cb(n.textContent,r)?(o.popover!=null&&(xt("beforetoggle",n),xt("toggle",n)),o.onScroll!=null&&xt("scroll",n),o.onScrollEnd!=null&&xt("scrollend",n),o.onClick!=null&&(n.onclick=Jt),n=!0):n=!1,n||Bs(t,!0)}function Ph(t){for(Pn=t.return;Pn;)switch(Pn.tag){case 5:case 31:case 13:Ba=!1;return;case 27:case 3:Ba=!0;return;default:Pn=Pn.return}}function ol(t){if(t!==Pn)return!1;if(!wt)return Ph(t),wt=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||tf(t.type,t.memoizedProps)),r=!r),r&&Qt&&Bs(t),Ph(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Qt=yb(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Qt=yb(t)}else n===27?(n=Qt,Js(t.type)?(t=lf,lf=null,Qt=t):Qt=n):Qt=Pn?$a(t.stateNode.nextSibling):null;return!0}function wr(){Qt=Pn=null,wt=!1}function Bu(){var t=Ls;return t!==null&&(fa===null?fa=t:fa.push.apply(fa,t),Ls=null),t}function oi(t){Ls===null?Ls=[t]:Ls.push(t)}var qu=j(null),_r=null,gs=null;function qs(t,n,r){ce(qu,n._currentValue),n._currentValue=r}function bs(t){t._currentValue=qu.current,Z(qu)}function $u(t,n,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===r)break;t=t.return}}function Iu(t,n,r,o){var u=t.child;for(u!==null&&(u.return=t);u!==null;){var m=u.dependencies;if(m!==null){var y=u.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=u;for(var k=0;k<n.length;k++)if(N.context===n[k]){m.lanes|=r,N=m.alternate,N!==null&&(N.lanes|=r),$u(m.return,r,t),o||(y=null);break e}m=N.next}}else if(u.tag===18){if(y=u.return,y===null)throw Error(i(341));y.lanes|=r,m=y.alternate,m!==null&&(m.lanes|=r),$u(y,r,t),y=null}else y=u.child;if(y!==null)y.return=u;else for(y=u;y!==null;){if(y===t){y=null;break}if(u=y.sibling,u!==null){u.return=y.return,y=u;break}y=y.return}u=y}}function cl(t,n,r,o){t=null;for(var u=n,m=!1;u!==null;){if(!m){if((u.flags&524288)!==0)m=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var y=u.alternate;if(y===null)throw Error(i(387));if(y=y.memoizedProps,y!==null){var N=u.type;Sa(u.pendingProps.value,y.value)||(t!==null?t.push(N):t=[N])}}else if(u===ze.current){if(y=u.alternate,y===null)throw Error(i(387));y.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(t!==null?t.push(Mi):t=[Mi])}u=u.return}t!==null&&Iu(n,t,r,o),n.flags|=262144}function wo(t){for(t=t.firstContext;t!==null;){if(!Sa(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Er(t){_r=t,gs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qn(t){return Qh(_r,t)}function _o(t,n){return _r===null&&Er(t),Qh(t,n)}function Qh(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},gs===null){if(t===null)throw Error(i(308));gs=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else gs=gs.next=n;return r}var SN=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},jN=e.unstable_scheduleCallback,wN=e.unstable_NormalPriority,wn={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fu(){return{controller:new SN,data:new Map,refCount:0}}function ci(t){t.refCount--,t.refCount===0&&jN(wN,function(){t.controller.abort()})}var ui=null,Hu=0,ul=0,dl=null;function _N(t,n){if(ui===null){var r=ui=[];Hu=0,ul=Gd(),dl={status:"pending",value:void 0,then:function(o){r.push(o)}}}return Hu++,n.then(Yh,Yh),n}function Yh(){if(--Hu===0&&ui!==null){dl!==null&&(dl.status="fulfilled");var t=ui;ui=null,ul=0,dl=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function EN(t,n){var r=[],o={status:"pending",value:null,reason:null,then:function(u){r.push(u)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var u=0;u<r.length;u++)(0,r[u])(n)},function(u){for(o.status="rejected",o.reason=u,u=0;u<r.length;u++)(0,r[u])(void 0)}),o}var Kh=M.S;M.S=function(t,n){zg=P(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&_N(t,n),Kh!==null&&Kh(t,n)};var Cr=j(null);function Vu(){var t=Cr.current;return t!==null?t:Zt.pooledCache}function Eo(t,n){n===null?ce(Cr,Cr.current):ce(Cr,n.pool)}function Xh(){var t=Vu();return t===null?null:{parent:wn._currentValue,pool:t}}var fl=Error(i(460)),Zu=Error(i(474)),Co=Error(i(542)),Ao={then:function(){}};function Jh(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Wh(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(Jt,Jt),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,tp(t),t;default:if(typeof n.status=="string")n.then(Jt,Jt);else{if(t=Zt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=o}},function(o){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,tp(t),t}throw Or=n,fl}}function Ar(t){try{var n=t._init;return n(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Or=r,fl):r}}var Or=null;function ep(){if(Or===null)throw Error(i(459));var t=Or;return Or=null,t}function tp(t){if(t===fl||t===Co)throw Error(i(483))}var ml=null,di=0;function Oo(t){var n=di;return di+=1,ml===null&&(ml=[]),Wh(ml,t,n)}function fi(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Ro(t,n){throw n.$$typeof===S?Error(i(525)):(t=Object.prototype.toString.call(n),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function np(t){function n(H,B){if(t){var ee=H.deletions;ee===null?(H.deletions=[B],H.flags|=16):ee.push(B)}}function r(H,B){if(!t)return null;for(;B!==null;)n(H,B),B=B.sibling;return null}function o(H){for(var B=new Map;H!==null;)H.key!==null?B.set(H.key,H):B.set(H.index,H),H=H.sibling;return B}function u(H,B){return H=hs(H,B),H.index=0,H.sibling=null,H}function m(H,B,ee){return H.index=ee,t?(ee=H.alternate,ee!==null?(ee=ee.index,ee<B?(H.flags|=67108866,B):ee):(H.flags|=67108866,B)):(H.flags|=1048576,B)}function y(H){return t&&H.alternate===null&&(H.flags|=67108866),H}function N(H,B,ee,ve){return B===null||B.tag!==6?(B=zu(ee,H.mode,ve),B.return=H,B):(B=u(B,ee),B.return=H,B)}function k(H,B,ee,ve){var Je=ee.type;return Je===E?me(H,B,ee.props.children,ve,ee.key):B!==null&&(B.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===W&&Ar(Je)===B.type)?(B=u(B,ee.props),fi(B,ee),B.return=H,B):(B=So(ee.type,ee.key,ee.props,null,H.mode,ve),fi(B,ee),B.return=H,B)}function te(H,B,ee,ve){return B===null||B.tag!==4||B.stateNode.containerInfo!==ee.containerInfo||B.stateNode.implementation!==ee.implementation?(B=ku(ee,H.mode,ve),B.return=H,B):(B=u(B,ee.children||[]),B.return=H,B)}function me(H,B,ee,ve,Je){return B===null||B.tag!==7?(B=jr(ee,H.mode,ve,Je),B.return=H,B):(B=u(B,ee),B.return=H,B)}function Ne(H,B,ee){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=zu(""+B,H.mode,ee),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case $:return ee=So(B.type,B.key,B.props,null,H.mode,ee),fi(ee,B),ee.return=H,ee;case _:return B=ku(B,H.mode,ee),B.return=H,B;case W:return B=Ar(B),Ne(H,B,ee)}if(Te(B)||ge(B))return B=jr(B,H.mode,ee,null),B.return=H,B;if(typeof B.then=="function")return Ne(H,Oo(B),ee);if(B.$$typeof===J)return Ne(H,_o(H,B),ee);Ro(H,B)}return null}function ae(H,B,ee,ve){var Je=B!==null?B.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Je!==null?null:N(H,B,""+ee,ve);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case $:return ee.key===Je?k(H,B,ee,ve):null;case _:return ee.key===Je?te(H,B,ee,ve):null;case W:return ee=Ar(ee),ae(H,B,ee,ve)}if(Te(ee)||ge(ee))return Je!==null?null:me(H,B,ee,ve,null);if(typeof ee.then=="function")return ae(H,B,Oo(ee),ve);if(ee.$$typeof===J)return ae(H,B,_o(H,ee),ve);Ro(H,ee)}return null}function oe(H,B,ee,ve,Je){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return H=H.get(ee)||null,N(B,H,""+ve,Je);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case $:return H=H.get(ve.key===null?ee:ve.key)||null,k(B,H,ve,Je);case _:return H=H.get(ve.key===null?ee:ve.key)||null,te(B,H,ve,Je);case W:return ve=Ar(ve),oe(H,B,ee,ve,Je)}if(Te(ve)||ge(ve))return H=H.get(ee)||null,me(B,H,ve,Je,null);if(typeof ve.then=="function")return oe(H,B,ee,Oo(ve),Je);if(ve.$$typeof===J)return oe(H,B,ee,_o(B,ve),Je);Ro(B,ve)}return null}function Qe(H,B,ee,ve){for(var Je=null,Tt=null,Ye=B,pt=B=0,jt=null;Ye!==null&&pt<ee.length;pt++){Ye.index>pt?(jt=Ye,Ye=null):jt=Ye.sibling;var Dt=ae(H,Ye,ee[pt],ve);if(Dt===null){Ye===null&&(Ye=jt);break}t&&Ye&&Dt.alternate===null&&n(H,Ye),B=m(Dt,B,pt),Tt===null?Je=Dt:Tt.sibling=Dt,Tt=Dt,Ye=jt}if(pt===ee.length)return r(H,Ye),wt&&ps(H,pt),Je;if(Ye===null){for(;pt<ee.length;pt++)Ye=Ne(H,ee[pt],ve),Ye!==null&&(B=m(Ye,B,pt),Tt===null?Je=Ye:Tt.sibling=Ye,Tt=Ye);return wt&&ps(H,pt),Je}for(Ye=o(Ye);pt<ee.length;pt++)jt=oe(Ye,H,pt,ee[pt],ve),jt!==null&&(t&&jt.alternate!==null&&Ye.delete(jt.key===null?pt:jt.key),B=m(jt,B,pt),Tt===null?Je=jt:Tt.sibling=jt,Tt=jt);return t&&Ye.forEach(function(ar){return n(H,ar)}),wt&&ps(H,pt),Je}function nt(H,B,ee,ve){if(ee==null)throw Error(i(151));for(var Je=null,Tt=null,Ye=B,pt=B=0,jt=null,Dt=ee.next();Ye!==null&&!Dt.done;pt++,Dt=ee.next()){Ye.index>pt?(jt=Ye,Ye=null):jt=Ye.sibling;var ar=ae(H,Ye,Dt.value,ve);if(ar===null){Ye===null&&(Ye=jt);break}t&&Ye&&ar.alternate===null&&n(H,Ye),B=m(ar,B,pt),Tt===null?Je=ar:Tt.sibling=ar,Tt=ar,Ye=jt}if(Dt.done)return r(H,Ye),wt&&ps(H,pt),Je;if(Ye===null){for(;!Dt.done;pt++,Dt=ee.next())Dt=Ne(H,Dt.value,ve),Dt!==null&&(B=m(Dt,B,pt),Tt===null?Je=Dt:Tt.sibling=Dt,Tt=Dt);return wt&&ps(H,pt),Je}for(Ye=o(Ye);!Dt.done;pt++,Dt=ee.next())Dt=oe(Ye,H,pt,Dt.value,ve),Dt!==null&&(t&&Dt.alternate!==null&&Ye.delete(Dt.key===null?pt:Dt.key),B=m(Dt,B,pt),Tt===null?Je=Dt:Tt.sibling=Dt,Tt=Dt);return t&&Ye.forEach(function(LS){return n(H,LS)}),wt&&ps(H,pt),Je}function It(H,B,ee,ve){if(typeof ee=="object"&&ee!==null&&ee.type===E&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case $:e:{for(var Je=ee.key;B!==null;){if(B.key===Je){if(Je=ee.type,Je===E){if(B.tag===7){r(H,B.sibling),ve=u(B,ee.props.children),ve.return=H,H=ve;break e}}else if(B.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===W&&Ar(Je)===B.type){r(H,B.sibling),ve=u(B,ee.props),fi(ve,ee),ve.return=H,H=ve;break e}r(H,B);break}else n(H,B);B=B.sibling}ee.type===E?(ve=jr(ee.props.children,H.mode,ve,ee.key),ve.return=H,H=ve):(ve=So(ee.type,ee.key,ee.props,null,H.mode,ve),fi(ve,ee),ve.return=H,H=ve)}return y(H);case _:e:{for(Je=ee.key;B!==null;){if(B.key===Je)if(B.tag===4&&B.stateNode.containerInfo===ee.containerInfo&&B.stateNode.implementation===ee.implementation){r(H,B.sibling),ve=u(B,ee.children||[]),ve.return=H,H=ve;break e}else{r(H,B);break}else n(H,B);B=B.sibling}ve=ku(ee,H.mode,ve),ve.return=H,H=ve}return y(H);case W:return ee=Ar(ee),It(H,B,ee,ve)}if(Te(ee))return Qe(H,B,ee,ve);if(ge(ee)){if(Je=ge(ee),typeof Je!="function")throw Error(i(150));return ee=Je.call(ee),nt(H,B,ee,ve)}if(typeof ee.then=="function")return It(H,B,Oo(ee),ve);if(ee.$$typeof===J)return It(H,B,_o(H,ee),ve);Ro(H,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,B!==null&&B.tag===6?(r(H,B.sibling),ve=u(B,ee),ve.return=H,H=ve):(r(H,B),ve=zu(ee,H.mode,ve),ve.return=H,H=ve),y(H)):r(H,B)}return function(H,B,ee,ve){try{di=0;var Je=It(H,B,ee,ve);return ml=null,Je}catch(Ye){if(Ye===fl||Ye===Co)throw Ye;var Tt=ja(29,Ye,null,H.mode);return Tt.lanes=ve,Tt.return=H,Tt}finally{}}}var Rr=np(!0),ap=np(!1),$s=!1;function Gu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pu(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Is(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(t,n,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(zt&2)!==0){var u=o.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),o.pending=n,n=No(t),$h(t,null,r),n}return xo(t,o,n,r),No(t)}function mi(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,ut(t,r)}}function Qu(t,n){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var u=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var y={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?u=m=y:m=m.next=y,r=r.next}while(r!==null);m===null?u=m=n:m=m.next=n}else u=m=n;r={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var Yu=!1;function hi(){if(Yu){var t=dl;if(t!==null)throw t}}function pi(t,n,r,o){Yu=!1;var u=t.updateQueue;$s=!1;var m=u.firstBaseUpdate,y=u.lastBaseUpdate,N=u.shared.pending;if(N!==null){u.shared.pending=null;var k=N,te=k.next;k.next=null,y===null?m=te:y.next=te,y=k;var me=t.alternate;me!==null&&(me=me.updateQueue,N=me.lastBaseUpdate,N!==y&&(N===null?me.firstBaseUpdate=te:N.next=te,me.lastBaseUpdate=k))}if(m!==null){var Ne=u.baseState;y=0,me=te=k=null,N=m;do{var ae=N.lane&-536870913,oe=ae!==N.lane;if(oe?(St&ae)===ae:(o&ae)===ae){ae!==0&&ae===ul&&(Yu=!0),me!==null&&(me=me.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Qe=t,nt=N;ae=n;var It=r;switch(nt.tag){case 1:if(Qe=nt.payload,typeof Qe=="function"){Ne=Qe.call(It,Ne,ae);break e}Ne=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=nt.payload,ae=typeof Qe=="function"?Qe.call(It,Ne,ae):Qe,ae==null)break e;Ne=x({},Ne,ae);break e;case 2:$s=!0}}ae=N.callback,ae!==null&&(t.flags|=64,oe&&(t.flags|=8192),oe=u.callbacks,oe===null?u.callbacks=[ae]:oe.push(ae))}else oe={lane:ae,tag:N.tag,payload:N.payload,callback:N.callback,next:null},me===null?(te=me=oe,k=Ne):me=me.next=oe,y|=ae;if(N=N.next,N===null){if(N=u.shared.pending,N===null)break;oe=N,N=oe.next,oe.next=null,u.lastBaseUpdate=oe,u.shared.pending=null}}while(!0);me===null&&(k=Ne),u.baseState=k,u.firstBaseUpdate=te,u.lastBaseUpdate=me,m===null&&(u.shared.lanes=0),Ps|=y,t.lanes=y,t.memoizedState=Ne}}function sp(t,n){if(typeof t!="function")throw Error(i(191,t));t.call(n)}function rp(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)sp(r[t],n)}var hl=j(null),To=j(0);function lp(t,n){t=Es,ce(To,t),ce(hl,n),Es=t|n.baseLanes}function Ku(){ce(To,Es),ce(hl,hl.current)}function Xu(){Es=To.current,Z(hl),Z(To)}var wa=j(null),qa=null;function Hs(t){var n=t.alternate;ce(yn,yn.current&1),ce(wa,t),qa===null&&(n===null||hl.current!==null||n.memoizedState!==null)&&(qa=t)}function Ju(t){ce(yn,yn.current),ce(wa,t),qa===null&&(qa=t)}function ip(t){t.tag===22?(ce(yn,yn.current),ce(wa,t),qa===null&&(qa=t)):Vs()}function Vs(){ce(yn,yn.current),ce(wa,wa.current)}function _a(t){Z(wa),qa===t&&(qa=null),Z(yn)}var yn=j(0);function Do(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||sf(r)||rf(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ys=0,dt=null,qt=null,_n=null,zo=!1,pl=!1,Tr=!1,ko=0,gi=0,gl=null,CN=0;function fn(){throw Error(i(321))}function Wu(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!Sa(t[r],n[r]))return!1;return!0}function ed(t,n,r,o,u,m){return ys=m,dt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,M.H=t===null||t.memoizedState===null?Vp:pd,Tr=!1,m=r(o,u),Tr=!1,pl&&(m=cp(n,r,o,u)),op(t),m}function op(t){M.H=vi;var n=qt!==null&&qt.next!==null;if(ys=0,_n=qt=dt=null,zo=!1,gi=0,gl=null,n)throw Error(i(300));t===null||En||(t=t.dependencies,t!==null&&wo(t)&&(En=!0))}function cp(t,n,r,o){dt=t;var u=0;do{if(pl&&(gl=null),gi=0,pl=!1,25<=u)throw Error(i(301));if(u+=1,_n=qt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}M.H=Zp,m=n(r,o)}while(pl);return m}function AN(){var t=M.H,n=t.useState()[0];return n=typeof n.then=="function"?bi(n):n,t=t.useState()[0],(qt!==null?qt.memoizedState:null)!==t&&(dt.flags|=1024),n}function td(){var t=ko!==0;return ko=0,t}function nd(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function ad(t){if(zo){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}zo=!1}ys=0,_n=qt=dt=null,pl=!1,gi=ko=0,gl=null}function ra(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?dt.memoizedState=_n=t:_n=_n.next=t,_n}function vn(){if(qt===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=qt.next;var n=_n===null?dt.memoizedState:_n.next;if(n!==null)_n=n,qt=t;else{if(t===null)throw dt.alternate===null?Error(i(467)):Error(i(310));qt=t,t={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},_n===null?dt.memoizedState=_n=t:_n=_n.next=t}return _n}function Mo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bi(t){var n=gi;return gi+=1,gl===null&&(gl=[]),t=Wh(gl,t,n),n=dt,(_n===null?n.memoizedState:_n.next)===null&&(n=n.alternate,M.H=n===null||n.memoizedState===null?Vp:pd),t}function Uo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return bi(t);if(t.$$typeof===J)return Qn(t)}throw Error(i(438,String(t)))}function sd(t){var n=null,r=dt.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=dt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Mo(),dt.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),o=0;o<t;o++)r[o]=Ae;return n.index++,r}function vs(t,n){return typeof n=="function"?n(t):n}function Lo(t){var n=vn();return rd(n,qt,t)}function rd(t,n,r){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=t.baseQueue,m=o.pending;if(m!==null){if(u!==null){var y=u.next;u.next=m.next,m.next=y}n.baseQueue=u=m,o.pending=null}if(m=t.baseState,u===null)t.memoizedState=m;else{n=u.next;var N=y=null,k=null,te=n,me=!1;do{var Ne=te.lane&-536870913;if(Ne!==te.lane?(St&Ne)===Ne:(ys&Ne)===Ne){var ae=te.revertLane;if(ae===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),Ne===ul&&(me=!0);else if((ys&ae)===ae){te=te.next,ae===ul&&(me=!0);continue}else Ne={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},k===null?(N=k=Ne,y=m):k=k.next=Ne,dt.lanes|=ae,Ps|=ae;Ne=te.action,Tr&&r(m,Ne),m=te.hasEagerState?te.eagerState:r(m,Ne)}else ae={lane:Ne,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},k===null?(N=k=ae,y=m):k=k.next=ae,dt.lanes|=Ne,Ps|=Ne;te=te.next}while(te!==null&&te!==n);if(k===null?y=m:k.next=N,!Sa(m,t.memoizedState)&&(En=!0,me&&(r=dl,r!==null)))throw r;t.memoizedState=m,t.baseState=y,t.baseQueue=k,o.lastRenderedState=m}return u===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function ld(t){var n=vn(),r=n.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=t;var o=r.dispatch,u=r.pending,m=n.memoizedState;if(u!==null){r.pending=null;var y=u=u.next;do m=t(m,y.action),y=y.next;while(y!==u);Sa(m,n.memoizedState)||(En=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),r.lastRenderedState=m}return[m,o]}function up(t,n,r){var o=dt,u=vn(),m=wt;if(m){if(r===void 0)throw Error(i(407));r=r()}else r=n();var y=!Sa((qt||u).memoizedState,r);if(y&&(u.memoizedState=r,En=!0),u=u.queue,cd(mp.bind(null,o,u,t),[t]),u.getSnapshot!==n||y||_n!==null&&_n.memoizedState.tag&1){if(o.flags|=2048,bl(9,{destroy:void 0},fp.bind(null,o,u,r,n),null),Zt===null)throw Error(i(349));m||(ys&127)!==0||dp(o,n,r)}return r}function dp(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=dt.updateQueue,n===null?(n=Mo(),dt.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function fp(t,n,r,o){n.value=r,n.getSnapshot=o,hp(n)&&pp(t)}function mp(t,n,r){return r(function(){hp(n)&&pp(t)})}function hp(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!Sa(t,r)}catch{return!0}}function pp(t){var n=Sr(t,2);n!==null&&ma(n,t,2)}function id(t){var n=ra();if(typeof t=="function"){var r=t;if(t=r(),Tr){Ft(!0);try{r()}finally{Ft(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:t},n}function gp(t,n,r,o){return t.baseState=r,rd(t,qt,typeof o=="function"?o:vs)}function ON(t,n,r,o,u){if($o(t))throw Error(i(485));if(t=n.action,t!==null){var m={payload:u,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){m.listeners.push(y)}};M.T!==null?r(!0):m.isTransition=!1,o(m),r=n.pending,r===null?(m.next=n.pending=m,bp(n,m)):(m.next=r.next,n.pending=r.next=m)}}function bp(t,n){var r=n.action,o=n.payload,u=t.state;if(n.isTransition){var m=M.T,y={};M.T=y;try{var N=r(u,o),k=M.S;k!==null&&k(y,N),yp(t,n,N)}catch(te){od(t,n,te)}finally{m!==null&&y.types!==null&&(m.types=y.types),M.T=m}}else try{m=r(u,o),yp(t,n,m)}catch(te){od(t,n,te)}}function yp(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){vp(t,n,o)},function(o){return od(t,n,o)}):vp(t,n,r)}function vp(t,n,r){n.status="fulfilled",n.value=r,xp(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,bp(t,r)))}function od(t,n,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,xp(n),n=n.next;while(n!==o)}t.action=null}function xp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Np(t,n){return n}function Sp(t,n){if(wt){var r=Zt.formState;if(r!==null){e:{var o=dt;if(wt){if(Qt){t:{for(var u=Qt,m=Ba;u.nodeType!==8;){if(!m){u=null;break t}if(u=$a(u.nextSibling),u===null){u=null;break t}}m=u.data,u=m==="F!"||m==="F"?u:null}if(u){Qt=$a(u.nextSibling),o=u.data==="F!";break e}}Bs(o)}o=!1}o&&(n=r[0])}}return r=ra(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Np,lastRenderedState:n},r.queue=o,r=Ip.bind(null,dt,o),o.dispatch=r,o=id(!1),m=hd.bind(null,dt,!1,o.queue),o=ra(),u={state:n,dispatch:null,action:t,pending:null},o.queue=u,r=ON.bind(null,dt,u,m,r),u.dispatch=r,o.memoizedState=t,[n,r,!1]}function jp(t){var n=vn();return wp(n,qt,t)}function wp(t,n,r){if(n=rd(t,n,Np)[0],t=Lo(vs)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=bi(n)}catch(y){throw y===fl?Co:y}else o=n;n=vn();var u=n.queue,m=u.dispatch;return r!==n.memoizedState&&(dt.flags|=2048,bl(9,{destroy:void 0},RN.bind(null,u,r),null)),[o,m,t]}function RN(t,n){t.action=n}function _p(t){var n=vn(),r=qt;if(r!==null)return wp(n,r,t);vn(),n=n.memoizedState,r=vn();var o=r.queue.dispatch;return r.memoizedState=t,[n,o,!1]}function bl(t,n,r,o){return t={tag:t,create:r,deps:o,inst:n,next:null},n=dt.updateQueue,n===null&&(n=Mo(),dt.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,n.lastEffect=t),t}function Ep(){return vn().memoizedState}function Bo(t,n,r,o){var u=ra();dt.flags|=t,u.memoizedState=bl(1|n,{destroy:void 0},r,o===void 0?null:o)}function qo(t,n,r,o){var u=vn();o=o===void 0?null:o;var m=u.memoizedState.inst;qt!==null&&o!==null&&Wu(o,qt.memoizedState.deps)?u.memoizedState=bl(n,m,r,o):(dt.flags|=t,u.memoizedState=bl(1|n,m,r,o))}function Cp(t,n){Bo(8390656,8,t,n)}function cd(t,n){qo(2048,8,t,n)}function TN(t){dt.flags|=4;var n=dt.updateQueue;if(n===null)n=Mo(),dt.updateQueue=n,n.events=[t];else{var r=n.events;r===null?n.events=[t]:r.push(t)}}function Ap(t){var n=vn().memoizedState;return TN({ref:n,nextImpl:t}),function(){if((zt&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function Op(t,n){return qo(4,2,t,n)}function Rp(t,n){return qo(4,4,t,n)}function Tp(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Dp(t,n,r){r=r!=null?r.concat([t]):null,qo(4,4,Tp.bind(null,n,t),r)}function ud(){}function zp(t,n){var r=vn();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&Wu(n,o[1])?o[0]:(r.memoizedState=[t,n],t)}function kp(t,n){var r=vn();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&Wu(n,o[1]))return o[0];if(o=t(),Tr){Ft(!0);try{t()}finally{Ft(!1)}}return r.memoizedState=[o,n],o}function dd(t,n,r){return r===void 0||(ys&1073741824)!==0&&(St&261930)===0?t.memoizedState=n:(t.memoizedState=r,t=Mg(),dt.lanes|=t,Ps|=t,r)}function Mp(t,n,r,o){return Sa(r,n)?r:hl.current!==null?(t=dd(t,r,o),Sa(t,n)||(En=!0),t):(ys&42)===0||(ys&1073741824)!==0&&(St&261930)===0?(En=!0,t.memoizedState=r):(t=Mg(),dt.lanes|=t,Ps|=t,n)}function Up(t,n,r,o,u){var m=I.p;I.p=m!==0&&8>m?m:8;var y=M.T,N={};M.T=N,hd(t,!1,n,r);try{var k=u(),te=M.S;if(te!==null&&te(N,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var me=EN(k,o);yi(t,n,me,Aa(t))}else yi(t,n,o,Aa(t))}catch(Ne){yi(t,n,{then:function(){},status:"rejected",reason:Ne},Aa())}finally{I.p=m,y!==null&&N.types!==null&&(y.types=N.types),M.T=y}}function DN(){}function fd(t,n,r,o){if(t.tag!==5)throw Error(i(476));var u=Lp(t).queue;Up(t,u,n,K,r===null?DN:function(){return Bp(t),r(o)})}function Lp(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:K},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Bp(t){var n=Lp(t);n.next===null&&(n=t.alternate.memoizedState),yi(t,n.next.queue,{},Aa())}function md(){return Qn(Mi)}function qp(){return vn().memoizedState}function $p(){return vn().memoizedState}function zN(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=Aa();t=Is(r);var o=Fs(n,t,r);o!==null&&(ma(o,n,r),mi(o,n,r)),n={cache:Fu()},t.payload=n;return}n=n.return}}function kN(t,n,r){var o=Aa();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},$o(t)?Fp(n,r):(r=Tu(t,n,r,o),r!==null&&(ma(r,t,o),Hp(r,n,o)))}function Ip(t,n,r){var o=Aa();yi(t,n,r,o)}function yi(t,n,r,o){var u={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if($o(t))Fp(n,u);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var y=n.lastRenderedState,N=m(y,r);if(u.hasEagerState=!0,u.eagerState=N,Sa(N,y))return xo(t,n,u,0),Zt===null&&vo(),!1}catch{}finally{}if(r=Tu(t,n,u,o),r!==null)return ma(r,t,o),Hp(r,n,o),!0}return!1}function hd(t,n,r,o){if(o={lane:2,revertLane:Gd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},$o(t)){if(n)throw Error(i(479))}else n=Tu(t,r,o,2),n!==null&&ma(n,t,2)}function $o(t){var n=t.alternate;return t===dt||n!==null&&n===dt}function Fp(t,n){pl=zo=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function Hp(t,n,r){if((r&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,ut(t,r)}}var vi={readContext:Qn,use:Uo,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useLayoutEffect:fn,useInsertionEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useSyncExternalStore:fn,useId:fn,useHostTransitionStatus:fn,useFormState:fn,useActionState:fn,useOptimistic:fn,useMemoCache:fn,useCacheRefresh:fn};vi.useEffectEvent=fn;var Vp={readContext:Qn,use:Uo,useCallback:function(t,n){return ra().memoizedState=[t,n===void 0?null:n],t},useContext:Qn,useEffect:Cp,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,Bo(4194308,4,Tp.bind(null,n,t),r)},useLayoutEffect:function(t,n){return Bo(4194308,4,t,n)},useInsertionEffect:function(t,n){Bo(4,2,t,n)},useMemo:function(t,n){var r=ra();n=n===void 0?null:n;var o=t();if(Tr){Ft(!0);try{t()}finally{Ft(!1)}}return r.memoizedState=[o,n],o},useReducer:function(t,n,r){var o=ra();if(r!==void 0){var u=r(n);if(Tr){Ft(!0);try{r(n)}finally{Ft(!1)}}}else u=n;return o.memoizedState=o.baseState=u,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:u},o.queue=t,t=t.dispatch=kN.bind(null,dt,t),[o.memoizedState,t]},useRef:function(t){var n=ra();return t={current:t},n.memoizedState=t},useState:function(t){t=id(t);var n=t.queue,r=Ip.bind(null,dt,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:ud,useDeferredValue:function(t,n){var r=ra();return dd(r,t,n)},useTransition:function(){var t=id(!1);return t=Up.bind(null,dt,t.queue,!0,!1),ra().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var o=dt,u=ra();if(wt){if(r===void 0)throw Error(i(407));r=r()}else{if(r=n(),Zt===null)throw Error(i(349));(St&127)!==0||dp(o,n,r)}u.memoizedState=r;var m={value:r,getSnapshot:n};return u.queue=m,Cp(mp.bind(null,o,m,t),[t]),o.flags|=2048,bl(9,{destroy:void 0},fp.bind(null,o,m,r,n),null),r},useId:function(){var t=ra(),n=Zt.identifierPrefix;if(wt){var r=ls,o=rs;r=(o&~(1<<32-At(o)-1)).toString(32)+r,n="_"+n+"R_"+r,r=ko++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=CN++,n="_"+n+"r_"+r.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:md,useFormState:Sp,useActionState:Sp,useOptimistic:function(t){var n=ra();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=hd.bind(null,dt,!0,r),r.dispatch=n,[t,n]},useMemoCache:sd,useCacheRefresh:function(){return ra().memoizedState=zN.bind(null,dt)},useEffectEvent:function(t){var n=ra(),r={impl:t};return n.memoizedState=r,function(){if((zt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},pd={readContext:Qn,use:Uo,useCallback:zp,useContext:Qn,useEffect:cd,useImperativeHandle:Dp,useInsertionEffect:Op,useLayoutEffect:Rp,useMemo:kp,useReducer:Lo,useRef:Ep,useState:function(){return Lo(vs)},useDebugValue:ud,useDeferredValue:function(t,n){var r=vn();return Mp(r,qt.memoizedState,t,n)},useTransition:function(){var t=Lo(vs)[0],n=vn().memoizedState;return[typeof t=="boolean"?t:bi(t),n]},useSyncExternalStore:up,useId:qp,useHostTransitionStatus:md,useFormState:jp,useActionState:jp,useOptimistic:function(t,n){var r=vn();return gp(r,qt,t,n)},useMemoCache:sd,useCacheRefresh:$p};pd.useEffectEvent=Ap;var Zp={readContext:Qn,use:Uo,useCallback:zp,useContext:Qn,useEffect:cd,useImperativeHandle:Dp,useInsertionEffect:Op,useLayoutEffect:Rp,useMemo:kp,useReducer:ld,useRef:Ep,useState:function(){return ld(vs)},useDebugValue:ud,useDeferredValue:function(t,n){var r=vn();return qt===null?dd(r,t,n):Mp(r,qt.memoizedState,t,n)},useTransition:function(){var t=ld(vs)[0],n=vn().memoizedState;return[typeof t=="boolean"?t:bi(t),n]},useSyncExternalStore:up,useId:qp,useHostTransitionStatus:md,useFormState:_p,useActionState:_p,useOptimistic:function(t,n){var r=vn();return qt!==null?gp(r,qt,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:sd,useCacheRefresh:$p};Zp.useEffectEvent=Ap;function gd(t,n,r,o){n=t.memoizedState,r=r(o,n),r=r==null?n:x({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var bd={enqueueSetState:function(t,n,r){t=t._reactInternals;var o=Aa(),u=Is(o);u.payload=n,r!=null&&(u.callback=r),n=Fs(t,u,o),n!==null&&(ma(n,t,o),mi(n,t,o))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var o=Aa(),u=Is(o);u.tag=1,u.payload=n,r!=null&&(u.callback=r),n=Fs(t,u,o),n!==null&&(ma(n,t,o),mi(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=Aa(),o=Is(r);o.tag=2,n!=null&&(o.callback=n),n=Fs(t,o,r),n!==null&&(ma(n,t,r),mi(n,t,r))}};function Gp(t,n,r,o,u,m,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,y):n.prototype&&n.prototype.isPureReactComponent?!ri(r,o)||!ri(u,m):!0}function Pp(t,n,r,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==t&&bd.enqueueReplaceState(n,n.state,null)}function Dr(t,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(t=t.defaultProps){r===n&&(r=x({},r));for(var u in t)r[u]===void 0&&(r[u]=t[u])}return r}function Qp(t){yo(t)}function Yp(t){console.error(t)}function Kp(t){yo(t)}function Io(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Xp(t,n,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function yd(t,n,r){return r=Is(r),r.tag=3,r.payload={element:null},r.callback=function(){Io(t,n)},r}function Jp(t){return t=Is(t),t.tag=3,t}function Wp(t,n,r,o){var u=r.type.getDerivedStateFromError;if(typeof u=="function"){var m=o.value;t.payload=function(){return u(m)},t.callback=function(){Xp(n,r,o)}}var y=r.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){Xp(n,r,o),typeof u!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var N=o.stack;this.componentDidCatch(o.value,{componentStack:N!==null?N:""})})}function MN(t,n,r,o,u){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&cl(n,r,u,!0),r=wa.current,r!==null){switch(r.tag){case 31:case 13:return qa===null?Wo():r.alternate===null&&mn===0&&(mn=3),r.flags&=-257,r.flags|=65536,r.lanes=u,o===Ao?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),Hd(t,o,u)),!1;case 22:return r.flags|=65536,o===Ao?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),Hd(t,o,u)),!1}throw Error(i(435,r.tag))}return Hd(t,o,u),Wo(),!1}if(wt)return n=wa.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,o!==Lu&&(t=Error(i(422),{cause:o}),oi(Ma(t,r)))):(o!==Lu&&(n=Error(i(423),{cause:o}),oi(Ma(n,r))),t=t.current.alternate,t.flags|=65536,u&=-u,t.lanes|=u,o=Ma(o,r),u=yd(t.stateNode,o,u),Qu(t,u),mn!==4&&(mn=2)),!1;var m=Error(i(520),{cause:o});if(m=Ma(m,r),Ci===null?Ci=[m]:Ci.push(m),mn!==4&&(mn=2),n===null)return!0;o=Ma(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=u&-u,r.lanes|=t,t=yd(r.stateNode,o,t),Qu(r,t),!1;case 1:if(n=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Qs===null||!Qs.has(m))))return r.flags|=65536,u&=-u,r.lanes|=u,u=Jp(u),Wp(u,t,r,o),Qu(r,u),!1}r=r.return}while(r!==null);return!1}var vd=Error(i(461)),En=!1;function Yn(t,n,r,o){n.child=t===null?ap(n,null,r,o):Rr(n,t.child,r,o)}function eg(t,n,r,o,u){r=r.render;var m=n.ref;if("ref"in o){var y={};for(var N in o)N!=="ref"&&(y[N]=o[N])}else y=o;return Er(n),o=ed(t,n,r,y,m,u),N=td(),t!==null&&!En?(nd(t,n,u),xs(t,n,u)):(wt&&N&&Mu(n),n.flags|=1,Yn(t,n,o,u),n.child)}function tg(t,n,r,o,u){if(t===null){var m=r.type;return typeof m=="function"&&!Du(m)&&m.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=m,ng(t,n,m,o,u)):(t=So(r.type,null,o,n,n.mode,u),t.ref=n.ref,t.return=n,n.child=t)}if(m=t.child,!Cd(t,u)){var y=m.memoizedProps;if(r=r.compare,r=r!==null?r:ri,r(y,o)&&t.ref===n.ref)return xs(t,n,u)}return n.flags|=1,t=hs(m,o),t.ref=n.ref,t.return=n,n.child=t}function ng(t,n,r,o,u){if(t!==null){var m=t.memoizedProps;if(ri(m,o)&&t.ref===n.ref)if(En=!1,n.pendingProps=o=m,Cd(t,u))(t.flags&131072)!==0&&(En=!0);else return n.lanes=t.lanes,xs(t,n,u)}return xd(t,n,r,o,u)}function ag(t,n,r,o){var u=o.children,m=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,t!==null){for(o=n.child=t.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~m}else o=0,n.child=null;return sg(t,n,m,r,o)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Eo(n,m!==null?m.cachePool:null),m!==null?lp(n,m):Ku(),ip(n);else return o=n.lanes=536870912,sg(t,n,m!==null?m.baseLanes|r:r,r,o)}else m!==null?(Eo(n,m.cachePool),lp(n,m),Vs(),n.memoizedState=null):(t!==null&&Eo(n,null),Ku(),Vs());return Yn(t,n,u,r),n.child}function xi(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function sg(t,n,r,o,u){var m=Vu();return m=m===null?null:{parent:wn._currentValue,pool:m},n.memoizedState={baseLanes:r,cachePool:m},t!==null&&Eo(n,null),Ku(),ip(n),t!==null&&cl(t,n,o,!0),n.childLanes=u,null}function Fo(t,n){return n=Vo({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function rg(t,n,r){return Rr(n,t.child,null,r),t=Fo(n,n.pendingProps),t.flags|=2,_a(n),n.memoizedState=null,t}function UN(t,n,r){var o=n.pendingProps,u=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(wt){if(o.mode==="hidden")return t=Fo(n,o),n.lanes=536870912,xi(null,t);if(Ju(n),(t=Qt)?(t=bb(t,Ba),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Us!==null?{id:rs,overflow:ls}:null,retryLane:536870912,hydrationErrors:null},r=Fh(t),r.return=n,n.child=r,Pn=n,Qt=null)):t=null,t===null)throw Bs(n);return n.lanes=536870912,null}return Fo(n,o)}var m=t.memoizedState;if(m!==null){var y=m.dehydrated;if(Ju(n),u)if(n.flags&256)n.flags&=-257,n=rg(t,n,r);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(i(558));else if(En||cl(t,n,r,!1),u=(r&t.childLanes)!==0,En||u){if(o=Zt,o!==null&&(y=Xe(o,r),y!==0&&y!==m.retryLane))throw m.retryLane=y,Sr(t,y),ma(o,t,y),vd;Wo(),n=rg(t,n,r)}else t=m.treeContext,Qt=$a(y.nextSibling),Pn=n,wt=!0,Ls=null,Ba=!1,t!==null&&Zh(n,t),n=Fo(n,o),n.flags|=4096;return n}return t=hs(t.child,{mode:o.mode,children:o.children}),t.ref=n.ref,n.child=t,t.return=n,t}function Ho(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function xd(t,n,r,o,u){return Er(n),r=ed(t,n,r,o,void 0,u),o=td(),t!==null&&!En?(nd(t,n,u),xs(t,n,u)):(wt&&o&&Mu(n),n.flags|=1,Yn(t,n,r,u),n.child)}function lg(t,n,r,o,u,m){return Er(n),n.updateQueue=null,r=cp(n,o,r,u),op(t),o=td(),t!==null&&!En?(nd(t,n,m),xs(t,n,m)):(wt&&o&&Mu(n),n.flags|=1,Yn(t,n,r,m),n.child)}function ig(t,n,r,o,u){if(Er(n),n.stateNode===null){var m=rl,y=r.contextType;typeof y=="object"&&y!==null&&(m=Qn(y)),m=new r(o,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=bd,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=o,m.state=n.memoizedState,m.refs={},Gu(n),y=r.contextType,m.context=typeof y=="object"&&y!==null?Qn(y):rl,m.state=n.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(gd(n,r,y,o),m.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(y=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),y!==m.state&&bd.enqueueReplaceState(m,m.state,null),pi(n,o,m,u),hi(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){m=n.stateNode;var N=n.memoizedProps,k=Dr(r,N);m.props=k;var te=m.context,me=r.contextType;y=rl,typeof me=="object"&&me!==null&&(y=Qn(me));var Ne=r.getDerivedStateFromProps;me=typeof Ne=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=n.pendingProps!==N,me||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||te!==y)&&Pp(n,m,o,y),$s=!1;var ae=n.memoizedState;m.state=ae,pi(n,o,m,u),hi(),te=n.memoizedState,N||ae!==te||$s?(typeof Ne=="function"&&(gd(n,r,Ne,o),te=n.memoizedState),(k=$s||Gp(n,r,k,o,ae,te,y))?(me||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=te),m.props=o,m.state=te,m.context=y,o=k):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{m=n.stateNode,Pu(t,n),y=n.memoizedProps,me=Dr(r,y),m.props=me,Ne=n.pendingProps,ae=m.context,te=r.contextType,k=rl,typeof te=="object"&&te!==null&&(k=Qn(te)),N=r.getDerivedStateFromProps,(te=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(y!==Ne||ae!==k)&&Pp(n,m,o,k),$s=!1,ae=n.memoizedState,m.state=ae,pi(n,o,m,u),hi();var oe=n.memoizedState;y!==Ne||ae!==oe||$s||t!==null&&t.dependencies!==null&&wo(t.dependencies)?(typeof N=="function"&&(gd(n,r,N,o),oe=n.memoizedState),(me=$s||Gp(n,r,me,o,ae,oe,k)||t!==null&&t.dependencies!==null&&wo(t.dependencies))?(te||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,oe,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,oe,k)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||y===t.memoizedProps&&ae===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&ae===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=oe),m.props=o,m.state=oe,m.context=k,o=me):(typeof m.componentDidUpdate!="function"||y===t.memoizedProps&&ae===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&ae===t.memoizedState||(n.flags|=1024),o=!1)}return m=o,Ho(t,n),o=(n.flags&128)!==0,m||o?(m=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,t!==null&&o?(n.child=Rr(n,t.child,null,u),n.child=Rr(n,null,r,u)):Yn(t,n,r,u),n.memoizedState=m.state,t=n.child):t=xs(t,n,u),t}function og(t,n,r,o){return wr(),n.flags|=256,Yn(t,n,r,o),n.child}var Nd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sd(t){return{baseLanes:t,cachePool:Xh()}}function jd(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=Ca),t}function cg(t,n,r){var o=n.pendingProps,u=!1,m=(n.flags&128)!==0,y;if((y=m)||(y=t!==null&&t.memoizedState===null?!1:(yn.current&2)!==0),y&&(u=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,t===null){if(wt){if(u?Hs(n):Vs(),(t=Qt)?(t=bb(t,Ba),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Us!==null?{id:rs,overflow:ls}:null,retryLane:536870912,hydrationErrors:null},r=Fh(t),r.return=n,n.child=r,Pn=n,Qt=null)):t=null,t===null)throw Bs(n);return rf(t)?n.lanes=32:n.lanes=536870912,null}var N=o.children;return o=o.fallback,u?(Vs(),u=n.mode,N=Vo({mode:"hidden",children:N},u),o=jr(o,u,r,null),N.return=n,o.return=n,N.sibling=o,n.child=N,o=n.child,o.memoizedState=Sd(r),o.childLanes=jd(t,y,r),n.memoizedState=Nd,xi(null,o)):(Hs(n),wd(n,N))}var k=t.memoizedState;if(k!==null&&(N=k.dehydrated,N!==null)){if(m)n.flags&256?(Hs(n),n.flags&=-257,n=_d(t,n,r)):n.memoizedState!==null?(Vs(),n.child=t.child,n.flags|=128,n=null):(Vs(),N=o.fallback,u=n.mode,o=Vo({mode:"visible",children:o.children},u),N=jr(N,u,r,null),N.flags|=2,o.return=n,N.return=n,o.sibling=N,n.child=o,Rr(n,t.child,null,r),o=n.child,o.memoizedState=Sd(r),o.childLanes=jd(t,y,r),n.memoizedState=Nd,n=xi(null,o));else if(Hs(n),rf(N)){if(y=N.nextSibling&&N.nextSibling.dataset,y)var te=y.dgst;y=te,o=Error(i(419)),o.stack="",o.digest=y,oi({value:o,source:null,stack:null}),n=_d(t,n,r)}else if(En||cl(t,n,r,!1),y=(r&t.childLanes)!==0,En||y){if(y=Zt,y!==null&&(o=Xe(y,r),o!==0&&o!==k.retryLane))throw k.retryLane=o,Sr(t,o),ma(y,t,o),vd;sf(N)||Wo(),n=_d(t,n,r)}else sf(N)?(n.flags|=192,n.child=t.child,n=null):(t=k.treeContext,Qt=$a(N.nextSibling),Pn=n,wt=!0,Ls=null,Ba=!1,t!==null&&Zh(n,t),n=wd(n,o.children),n.flags|=4096);return n}return u?(Vs(),N=o.fallback,u=n.mode,k=t.child,te=k.sibling,o=hs(k,{mode:"hidden",children:o.children}),o.subtreeFlags=k.subtreeFlags&65011712,te!==null?N=hs(te,N):(N=jr(N,u,r,null),N.flags|=2),N.return=n,o.return=n,o.sibling=N,n.child=o,xi(null,o),o=n.child,N=t.child.memoizedState,N===null?N=Sd(r):(u=N.cachePool,u!==null?(k=wn._currentValue,u=u.parent!==k?{parent:k,pool:k}:u):u=Xh(),N={baseLanes:N.baseLanes|r,cachePool:u}),o.memoizedState=N,o.childLanes=jd(t,y,r),n.memoizedState=Nd,xi(t.child,o)):(Hs(n),r=t.child,t=r.sibling,r=hs(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,t!==null&&(y=n.deletions,y===null?(n.deletions=[t],n.flags|=16):y.push(t)),n.child=r,n.memoizedState=null,r)}function wd(t,n){return n=Vo({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Vo(t,n){return t=ja(22,t,null,n),t.lanes=0,t}function _d(t,n,r){return Rr(n,t.child,null,r),t=wd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function ug(t,n,r){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),$u(t.return,n,r)}function Ed(t,n,r,o,u,m){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:u,treeForkCount:m}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=r,y.tailMode=u,y.treeForkCount=m)}function dg(t,n,r){var o=n.pendingProps,u=o.revealOrder,m=o.tail;o=o.children;var y=yn.current,N=(y&2)!==0;if(N?(y=y&1|2,n.flags|=128):y&=1,ce(yn,y),Yn(t,n,o,r),o=wt?ii:0,!N&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ug(t,r,n);else if(t.tag===19)ug(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(u){case"forwards":for(r=n.child,u=null;r!==null;)t=r.alternate,t!==null&&Do(t)===null&&(u=r),r=r.sibling;r=u,r===null?(u=n.child,n.child=null):(u=r.sibling,r.sibling=null),Ed(n,!1,u,r,m,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,u=n.child,n.child=null;u!==null;){if(t=u.alternate,t!==null&&Do(t)===null){n.child=u;break}t=u.sibling,u.sibling=r,r=u,u=t}Ed(n,!0,r,null,m,o);break;case"together":Ed(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function xs(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),Ps|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(cl(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(i(153));if(n.child!==null){for(t=n.child,r=hs(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=hs(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Cd(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&wo(t)))}function LN(t,n,r){switch(n.tag){case 3:$e(n,n.stateNode.containerInfo),qs(n,wn,t.memoizedState.cache),wr();break;case 27:case 5:Le(n);break;case 4:$e(n,n.stateNode.containerInfo);break;case 10:qs(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Ju(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Hs(n),n.flags|=128,null):(r&n.child.childLanes)!==0?cg(t,n,r):(Hs(n),t=xs(t,n,r),t!==null?t.sibling:null);Hs(n);break;case 19:var u=(t.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(cl(t,n,r,!1),o=(r&n.childLanes)!==0),u){if(o)return dg(t,n,r);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),ce(yn,yn.current),o)break;return null;case 22:return n.lanes=0,ag(t,n,r,n.pendingProps);case 24:qs(n,wn,t.memoizedState.cache)}return xs(t,n,r)}function fg(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)En=!0;else{if(!Cd(t,r)&&(n.flags&128)===0)return En=!1,LN(t,n,r);En=(t.flags&131072)!==0}else En=!1,wt&&(n.flags&1048576)!==0&&Vh(n,ii,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(t=Ar(n.elementType),n.type=t,typeof t=="function")Du(t)?(o=Dr(t,o),n.tag=1,n=ig(null,n,t,o,r)):(n.tag=0,n=xd(null,n,t,o,r));else{if(t!=null){var u=t.$$typeof;if(u===z){n.tag=11,n=eg(null,n,t,o,r);break e}else if(u===L){n.tag=14,n=tg(null,n,t,o,r);break e}}throw n=Me(t)||t,Error(i(306,n,""))}}return n;case 0:return xd(t,n,n.type,n.pendingProps,r);case 1:return o=n.type,u=Dr(o,n.pendingProps),ig(t,n,o,u,r);case 3:e:{if($e(n,n.stateNode.containerInfo),t===null)throw Error(i(387));o=n.pendingProps;var m=n.memoizedState;u=m.element,Pu(t,n),pi(n,o,null,r);var y=n.memoizedState;if(o=y.cache,qs(n,wn,o),o!==m.cache&&Iu(n,[wn],r,!0),hi(),o=y.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=og(t,n,o,r);break e}else if(o!==u){u=Ma(Error(i(424)),n),oi(u),n=og(t,n,o,r);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Qt=$a(t.firstChild),Pn=n,wt=!0,Ls=null,Ba=!0,r=ap(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(wr(),o===u){n=xs(t,n,r);break e}Yn(t,n,o,r)}n=n.child}return n;case 26:return Ho(t,n),t===null?(r=jb(n.type,null,n.pendingProps,null))?n.memoizedState=r:wt||(r=n.type,t=n.pendingProps,o=lc(be.current).createElement(r),o[ot]=n,o[lt]=t,Kn(o,r,t),yt(o),n.stateNode=o):n.memoizedState=jb(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Le(n),t===null&&wt&&(o=n.stateNode=xb(n.type,n.pendingProps,be.current),Pn=n,Ba=!0,u=Qt,Js(n.type)?(lf=u,Qt=$a(o.firstChild)):Qt=u),Yn(t,n,n.pendingProps.children,r),Ho(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&wt&&((u=o=Qt)&&(o=mS(o,n.type,n.pendingProps,Ba),o!==null?(n.stateNode=o,Pn=n,Qt=$a(o.firstChild),Ba=!1,u=!0):u=!1),u||Bs(n)),Le(n),u=n.type,m=n.pendingProps,y=t!==null?t.memoizedProps:null,o=m.children,tf(u,m)?o=null:y!==null&&tf(u,y)&&(n.flags|=32),n.memoizedState!==null&&(u=ed(t,n,AN,null,null,r),Mi._currentValue=u),Ho(t,n),Yn(t,n,o,r),n.child;case 6:return t===null&&wt&&((t=r=Qt)&&(r=hS(r,n.pendingProps,Ba),r!==null?(n.stateNode=r,Pn=n,Qt=null,t=!0):t=!1),t||Bs(n)),null;case 13:return cg(t,n,r);case 4:return $e(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=Rr(n,null,o,r):Yn(t,n,o,r),n.child;case 11:return eg(t,n,n.type,n.pendingProps,r);case 7:return Yn(t,n,n.pendingProps,r),n.child;case 8:return Yn(t,n,n.pendingProps.children,r),n.child;case 12:return Yn(t,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,qs(n,n.type,o.value),Yn(t,n,o.children,r),n.child;case 9:return u=n.type._context,o=n.pendingProps.children,Er(n),u=Qn(u),o=o(u),n.flags|=1,Yn(t,n,o,r),n.child;case 14:return tg(t,n,n.type,n.pendingProps,r);case 15:return ng(t,n,n.type,n.pendingProps,r);case 19:return dg(t,n,r);case 31:return UN(t,n,r);case 22:return ag(t,n,r,n.pendingProps);case 24:return Er(n),o=Qn(wn),t===null?(u=Vu(),u===null&&(u=Zt,m=Fu(),u.pooledCache=m,m.refCount++,m!==null&&(u.pooledCacheLanes|=r),u=m),n.memoizedState={parent:o,cache:u},Gu(n),qs(n,wn,u)):((t.lanes&r)!==0&&(Pu(t,n),pi(n,null,null,r),hi()),u=t.memoizedState,m=n.memoizedState,u.parent!==o?(u={parent:o,cache:o},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),qs(n,wn,o)):(o=m.cache,qs(n,wn,o),o!==u.cache&&Iu(n,[wn],r,!0))),Yn(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function Ns(t){t.flags|=4}function Ad(t,n,r,o,u){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(u&335544128)===u)if(t.stateNode.complete)t.flags|=8192;else if(qg())t.flags|=8192;else throw Or=Ao,Zu}else t.flags&=-16777217}function mg(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ab(n))if(qg())t.flags|=8192;else throw Or=Ao,Zu}function Zo(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Y():536870912,t.lanes|=n,Nl|=n)}function Ni(t,n){if(!wt)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Yt(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(n)for(var u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=o,t.childLanes=r,n}function BN(t,n,r){var o=n.pendingProps;switch(Uu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(n),null;case 1:return Yt(n),null;case 3:return r=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),bs(wn),he(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ol(n)?Ns(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Bu())),Yt(n),null;case 26:var u=n.type,m=n.memoizedState;return t===null?(Ns(n),m!==null?(Yt(n),mg(n,m)):(Yt(n),Ad(n,u,null,o,r))):m?m!==t.memoizedState?(Ns(n),Yt(n),mg(n,m)):(Yt(n),n.flags&=-16777217):(t=t.memoizedProps,t!==o&&Ns(n),Yt(n),Ad(n,u,t,o,r)),null;case 27:if(Ie(n),r=be.current,u=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Ns(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return Yt(n),null}t=U.current,ol(n)?Gh(n):(t=xb(u,o,r),n.stateNode=t,Ns(n))}return Yt(n),null;case 5:if(Ie(n),u=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Ns(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return Yt(n),null}if(m=U.current,ol(n))Gh(n);else{var y=lc(be.current);switch(m){case 1:m=y.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:m=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":m=y.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":m=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":m=y.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?y.createElement(u,{is:o.is}):y.createElement(u)}}m[ot]=n,m[lt]=o;e:for(y=n.child;y!==null;){if(y.tag===5||y.tag===6)m.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}n.stateNode=m;e:switch(Kn(m,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ns(n)}}return Yt(n),Ad(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,r),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&Ns(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(i(166));if(t=be.current,ol(n)){if(t=n.stateNode,r=n.memoizedProps,o=null,u=Pn,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}t[ot]=n,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||cb(t.nodeValue,r)),t||Bs(n,!0)}else t=lc(t).createTextNode(o),t[ot]=n,n.stateNode=t}return Yt(n),null;case 31:if(r=n.memoizedState,t===null||t.memoizedState!==null){if(o=ol(n),r!==null){if(t===null){if(!o)throw Error(i(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[ot]=n}else wr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Yt(n),t=!1}else r=Bu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return n.flags&256?(_a(n),n):(_a(n),null);if((n.flags&128)!==0)throw Error(i(558))}return Yt(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(u=ol(n),o!==null&&o.dehydrated!==null){if(t===null){if(!u)throw Error(i(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));u[ot]=n}else wr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Yt(n),u=!1}else u=Bu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(_a(n),n):(_a(n),null)}return _a(n),(n.flags&128)!==0?(n.lanes=r,n):(r=o!==null,t=t!==null&&t.memoizedState!==null,r&&(o=n.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==u&&(o.flags|=2048)),r!==t&&r&&(n.child.flags|=8192),Zo(n,n.updateQueue),Yt(n),null);case 4:return he(),t===null&&Kd(n.stateNode.containerInfo),Yt(n),null;case 10:return bs(n.type),Yt(n),null;case 19:if(Z(yn),o=n.memoizedState,o===null)return Yt(n),null;if(u=(n.flags&128)!==0,m=o.rendering,m===null)if(u)Ni(o,!1);else{if(mn!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(m=Do(t),m!==null){for(n.flags|=128,Ni(o,!1),t=m.updateQueue,n.updateQueue=t,Zo(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)Ih(r,t),r=r.sibling;return ce(yn,yn.current&1|2),wt&&ps(n,o.treeForkCount),n.child}t=t.sibling}o.tail!==null&&P()>Ko&&(n.flags|=128,u=!0,Ni(o,!1),n.lanes=4194304)}else{if(!u)if(t=Do(m),t!==null){if(n.flags|=128,u=!0,t=t.updateQueue,n.updateQueue=t,Zo(n,t),Ni(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!wt)return Yt(n),null}else 2*P()-o.renderingStartTime>Ko&&r!==536870912&&(n.flags|=128,u=!0,Ni(o,!1),n.lanes=4194304);o.isBackwards?(m.sibling=n.child,n.child=m):(t=o.last,t!==null?t.sibling=m:n.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=P(),t.sibling=null,r=yn.current,ce(yn,u?r&1|2:r&1),wt&&ps(n,o.treeForkCount),t):(Yt(n),null);case 22:case 23:return _a(n),Xu(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(Yt(n),n.subtreeFlags&6&&(n.flags|=8192)):Yt(n),r=n.updateQueue,r!==null&&Zo(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),t!==null&&Z(Cr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),bs(wn),Yt(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function qN(t,n){switch(Uu(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return bs(wn),he(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Ie(n),null;case 31:if(n.memoizedState!==null){if(_a(n),n.alternate===null)throw Error(i(340));wr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(_a(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(i(340));wr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Z(yn),null;case 4:return he(),null;case 10:return bs(n.type),null;case 22:case 23:return _a(n),Xu(),t!==null&&Z(Cr),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return bs(wn),null;case 25:return null;default:return null}}function hg(t,n){switch(Uu(n),n.tag){case 3:bs(wn),he();break;case 26:case 27:case 5:Ie(n);break;case 4:he();break;case 31:n.memoizedState!==null&&_a(n);break;case 13:_a(n);break;case 19:Z(yn);break;case 10:bs(n.type);break;case 22:case 23:_a(n),Xu(),t!==null&&Z(Cr);break;case 24:bs(wn)}}function Si(t,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var u=o.next;r=u;do{if((r.tag&t)===t){o=void 0;var m=r.create,y=r.inst;o=m(),y.destroy=o}r=r.next}while(r!==u)}}catch(N){Lt(n,n.return,N)}}function Zs(t,n,r){try{var o=n.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&t)===t){var y=o.inst,N=y.destroy;if(N!==void 0){y.destroy=void 0,u=n;var k=r,te=N;try{te()}catch(me){Lt(u,k,me)}}}o=o.next}while(o!==m)}}catch(me){Lt(n,n.return,me)}}function pg(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{rp(n,r)}catch(o){Lt(t,t.return,o)}}}function gg(t,n,r){r.props=Dr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){Lt(t,n,o)}}function ji(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(u){Lt(t,n,u)}}function is(t,n){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(u){Lt(t,n,u)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(u){Lt(t,n,u)}else r.current=null}function bg(t){var n=t.type,r=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(u){Lt(t,t.return,u)}}function Od(t,n,r){try{var o=t.stateNode;iS(o,t.type,r,n),o[lt]=n}catch(u){Lt(t,t.return,u)}}function yg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Js(t.type)||t.tag===4}function Rd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Js(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Td(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Jt));else if(o!==4&&(o===27&&Js(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(Td(t,n,r),t=t.sibling;t!==null;)Td(t,n,r),t=t.sibling}function Go(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(o!==4&&(o===27&&Js(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Go(t,n,r),t=t.sibling;t!==null;)Go(t,n,r),t=t.sibling}function vg(t){var n=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);Kn(n,o,r),n[ot]=t,n[lt]=r}catch(m){Lt(t,t.return,m)}}var Ss=!1,Cn=!1,Dd=!1,xg=typeof WeakSet=="function"?WeakSet:Set,In=null;function $N(t,n){if(t=t.containerInfo,Wd=mc,t=Dh(t),_u(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var u=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var y=0,N=-1,k=-1,te=0,me=0,Ne=t,ae=null;t:for(;;){for(var oe;Ne!==r||u!==0&&Ne.nodeType!==3||(N=y+u),Ne!==m||o!==0&&Ne.nodeType!==3||(k=y+o),Ne.nodeType===3&&(y+=Ne.nodeValue.length),(oe=Ne.firstChild)!==null;)ae=Ne,Ne=oe;for(;;){if(Ne===t)break t;if(ae===r&&++te===u&&(N=y),ae===m&&++me===o&&(k=y),(oe=Ne.nextSibling)!==null)break;Ne=ae,ae=Ne.parentNode}Ne=oe}r=N===-1||k===-1?null:{start:N,end:k}}else r=null}r=r||{start:0,end:0}}else r=null;for(ef={focusedElem:t,selectionRange:r},mc=!1,In=n;In!==null;)if(n=In,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,In=t;else for(;In!==null;){switch(n=In,m=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)u=t[r],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,r=n,u=m.memoizedProps,m=m.memoizedState,o=r.stateNode;try{var Qe=Dr(r.type,u);t=o.getSnapshotBeforeUpdate(Qe,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(nt){Lt(r,r.return,nt)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)af(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":af(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=n.sibling,t!==null){t.return=n.return,In=t;break}In=n.return}}function Ng(t,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:ws(t,r),o&4&&Si(5,r);break;case 1:if(ws(t,r),o&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(y){Lt(r,r.return,y)}else{var u=Dr(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(u,n,t.__reactInternalSnapshotBeforeUpdate)}catch(y){Lt(r,r.return,y)}}o&64&&pg(r),o&512&&ji(r,r.return);break;case 3:if(ws(t,r),o&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{rp(t,n)}catch(y){Lt(r,r.return,y)}}break;case 27:n===null&&o&4&&vg(r);case 26:case 5:ws(t,r),n===null&&o&4&&bg(r),o&512&&ji(r,r.return);break;case 12:ws(t,r);break;case 31:ws(t,r),o&4&&wg(t,r);break;case 13:ws(t,r),o&4&&_g(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=YN.bind(null,r),pS(t,r))));break;case 22:if(o=r.memoizedState!==null||Ss,!o){n=n!==null&&n.memoizedState!==null||Cn,u=Ss;var m=Cn;Ss=o,(Cn=n)&&!m?_s(t,r,(r.subtreeFlags&8772)!==0):ws(t,r),Ss=u,Cn=m}break;case 30:break;default:ws(t,r)}}function Sg(t){var n=t.alternate;n!==null&&(t.alternate=null,Sg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Gn(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Wt=null,ca=!1;function js(t,n,r){for(r=r.child;r!==null;)jg(t,n,r),r=r.sibling}function jg(t,n,r){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(_e,r)}catch{}switch(r.tag){case 26:Cn||is(r,n),js(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Cn||is(r,n);var o=Wt,u=ca;Js(r.type)&&(Wt=r.stateNode,ca=!1),js(t,n,r),Di(r.stateNode),Wt=o,ca=u;break;case 5:Cn||is(r,n);case 6:if(o=Wt,u=ca,Wt=null,js(t,n,r),Wt=o,ca=u,Wt!==null)if(ca)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(r.stateNode)}catch(m){Lt(r,n,m)}else try{Wt.removeChild(r.stateNode)}catch(m){Lt(r,n,m)}break;case 18:Wt!==null&&(ca?(t=Wt,pb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Ol(t)):pb(Wt,r.stateNode));break;case 4:o=Wt,u=ca,Wt=r.stateNode.containerInfo,ca=!0,js(t,n,r),Wt=o,ca=u;break;case 0:case 11:case 14:case 15:Zs(2,r,n),Cn||Zs(4,r,n),js(t,n,r);break;case 1:Cn||(is(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&gg(r,n,o)),js(t,n,r);break;case 21:js(t,n,r);break;case 22:Cn=(o=Cn)||r.memoizedState!==null,js(t,n,r),Cn=o;break;default:js(t,n,r)}}function wg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ol(t)}catch(r){Lt(n,n.return,r)}}}function _g(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ol(t)}catch(r){Lt(n,n.return,r)}}function IN(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new xg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new xg),n;default:throw Error(i(435,t.tag))}}function Po(t,n){var r=IN(t);n.forEach(function(o){if(!r.has(o)){r.add(o);var u=KN.bind(null,t,o);o.then(u,u)}})}function ua(t,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var u=r[o],m=t,y=n,N=y;e:for(;N!==null;){switch(N.tag){case 27:if(Js(N.type)){Wt=N.stateNode,ca=!1;break e}break;case 5:Wt=N.stateNode,ca=!1;break e;case 3:case 4:Wt=N.stateNode.containerInfo,ca=!0;break e}N=N.return}if(Wt===null)throw Error(i(160));jg(m,y,u),Wt=null,ca=!1,m=u.alternate,m!==null&&(m.return=null),u.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Eg(n,t),n=n.sibling}var Wa=null;function Eg(t,n){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ua(n,t),da(t),o&4&&(Zs(3,t,t.return),Si(3,t),Zs(5,t,t.return));break;case 1:ua(n,t),da(t),o&512&&(Cn||r===null||is(r,r.return)),o&64&&Ss&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var u=Wa;if(ua(n,t),da(t),o&512&&(Cn||r===null||is(r,r.return)),o&4){var m=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){e:{o=t.type,r=t.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":m=u.getElementsByTagName("title")[0],(!m||m[Vt]||m[ot]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=u.createElement(o),u.head.insertBefore(m,u.querySelector("head > title"))),Kn(m,o,r),m[ot]=t,yt(m),o=m;break e;case"link":var y=Eb("link","href",u).get(o+(r.href||""));if(y){for(var N=0;N<y.length;N++)if(m=y[N],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){y.splice(N,1);break t}}m=u.createElement(o),Kn(m,o,r),u.head.appendChild(m);break;case"meta":if(y=Eb("meta","content",u).get(o+(r.content||""))){for(N=0;N<y.length;N++)if(m=y[N],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){y.splice(N,1);break t}}m=u.createElement(o),Kn(m,o,r),u.head.appendChild(m);break;default:throw Error(i(468,o))}m[ot]=t,yt(m),o=m}t.stateNode=o}else Cb(u,t.type,t.stateNode);else t.stateNode=_b(u,o,t.memoizedProps);else m!==o?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,o===null?Cb(u,t.type,t.stateNode):_b(u,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Od(t,t.memoizedProps,r.memoizedProps)}break;case 27:ua(n,t),da(t),o&512&&(Cn||r===null||is(r,r.return)),r!==null&&o&4&&Od(t,t.memoizedProps,r.memoizedProps);break;case 5:if(ua(n,t),da(t),o&512&&(Cn||r===null||is(r,r.return)),t.flags&32){u=t.stateNode;try{ss(u,"")}catch(Qe){Lt(t,t.return,Qe)}}o&4&&t.stateNode!=null&&(u=t.memoizedProps,Od(t,u,r!==null?r.memoizedProps:u)),o&1024&&(Dd=!0);break;case 6:if(ua(n,t),da(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(Qe){Lt(t,t.return,Qe)}}break;case 3:if(cc=null,u=Wa,Wa=ic(n.containerInfo),ua(n,t),Wa=u,da(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Ol(n.containerInfo)}catch(Qe){Lt(t,t.return,Qe)}Dd&&(Dd=!1,Cg(t));break;case 4:o=Wa,Wa=ic(t.stateNode.containerInfo),ua(n,t),da(t),Wa=o;break;case 12:ua(n,t),da(t);break;case 31:ua(n,t),da(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Po(t,o)));break;case 13:ua(n,t),da(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Yo=P()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Po(t,o)));break;case 22:u=t.memoizedState!==null;var k=r!==null&&r.memoizedState!==null,te=Ss,me=Cn;if(Ss=te||u,Cn=me||k,ua(n,t),Cn=me,Ss=te,da(t),o&8192)e:for(n=t.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(r===null||k||Ss||Cn||zr(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){k=r=n;try{if(m=k.stateNode,u)y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{N=k.stateNode;var Ne=k.memoizedProps.style,ae=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null;N.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Qe){Lt(k,k.return,Qe)}}}else if(n.tag===6){if(r===null){k=n;try{k.stateNode.nodeValue=u?"":k.memoizedProps}catch(Qe){Lt(k,k.return,Qe)}}}else if(n.tag===18){if(r===null){k=n;try{var oe=k.stateNode;u?gb(oe,!0):gb(k.stateNode,!1)}catch(Qe){Lt(k,k.return,Qe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,Po(t,r))));break;case 19:ua(n,t),da(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Po(t,o)));break;case 30:break;case 21:break;default:ua(n,t),da(t)}}function da(t){var n=t.flags;if(n&2){try{for(var r,o=t.return;o!==null;){if(yg(o)){r=o;break}o=o.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var u=r.stateNode,m=Rd(t);Go(t,m,u);break;case 5:var y=r.stateNode;r.flags&32&&(ss(y,""),r.flags&=-33);var N=Rd(t);Go(t,N,y);break;case 3:case 4:var k=r.stateNode.containerInfo,te=Rd(t);Td(t,te,k);break;default:throw Error(i(161))}}catch(me){Lt(t,t.return,me)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Cg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Cg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function ws(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Ng(t,n.alternate,n),n=n.sibling}function zr(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Zs(4,n,n.return),zr(n);break;case 1:is(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&gg(n,n.return,r),zr(n);break;case 27:Di(n.stateNode);case 26:case 5:is(n,n.return),zr(n);break;case 22:n.memoizedState===null&&zr(n);break;case 30:zr(n);break;default:zr(n)}t=t.sibling}}function _s(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,u=t,m=n,y=m.flags;switch(m.tag){case 0:case 11:case 15:_s(u,m,r),Si(4,m);break;case 1:if(_s(u,m,r),o=m,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(te){Lt(o,o.return,te)}if(o=m,u=o.updateQueue,u!==null){var N=o.stateNode;try{var k=u.shared.hiddenCallbacks;if(k!==null)for(u.shared.hiddenCallbacks=null,u=0;u<k.length;u++)sp(k[u],N)}catch(te){Lt(o,o.return,te)}}r&&y&64&&pg(m),ji(m,m.return);break;case 27:vg(m);case 26:case 5:_s(u,m,r),r&&o===null&&y&4&&bg(m),ji(m,m.return);break;case 12:_s(u,m,r);break;case 31:_s(u,m,r),r&&y&4&&wg(u,m);break;case 13:_s(u,m,r),r&&y&4&&_g(u,m);break;case 22:m.memoizedState===null&&_s(u,m,r),ji(m,m.return);break;case 30:break;default:_s(u,m,r)}n=n.sibling}}function zd(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&ci(r))}function kd(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&ci(t))}function es(t,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ag(t,n,r,o),n=n.sibling}function Ag(t,n,r,o){var u=n.flags;switch(n.tag){case 0:case 11:case 15:es(t,n,r,o),u&2048&&Si(9,n);break;case 1:es(t,n,r,o);break;case 3:es(t,n,r,o),u&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&ci(t)));break;case 12:if(u&2048){es(t,n,r,o),t=n.stateNode;try{var m=n.memoizedProps,y=m.id,N=m.onPostCommit;typeof N=="function"&&N(y,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){Lt(n,n.return,k)}}else es(t,n,r,o);break;case 31:es(t,n,r,o);break;case 13:es(t,n,r,o);break;case 23:break;case 22:m=n.stateNode,y=n.alternate,n.memoizedState!==null?m._visibility&2?es(t,n,r,o):wi(t,n):m._visibility&2?es(t,n,r,o):(m._visibility|=2,yl(t,n,r,o,(n.subtreeFlags&10256)!==0||!1)),u&2048&&zd(y,n);break;case 24:es(t,n,r,o),u&2048&&kd(n.alternate,n);break;default:es(t,n,r,o)}}function yl(t,n,r,o,u){for(u=u&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=t,y=n,N=r,k=o,te=y.flags;switch(y.tag){case 0:case 11:case 15:yl(m,y,N,k,u),Si(8,y);break;case 23:break;case 22:var me=y.stateNode;y.memoizedState!==null?me._visibility&2?yl(m,y,N,k,u):wi(m,y):(me._visibility|=2,yl(m,y,N,k,u)),u&&te&2048&&zd(y.alternate,y);break;case 24:yl(m,y,N,k,u),u&&te&2048&&kd(y.alternate,y);break;default:yl(m,y,N,k,u)}n=n.sibling}}function wi(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,o=n,u=o.flags;switch(o.tag){case 22:wi(r,o),u&2048&&zd(o.alternate,o);break;case 24:wi(r,o),u&2048&&kd(o.alternate,o);break;default:wi(r,o)}n=n.sibling}}var _i=8192;function vl(t,n,r){if(t.subtreeFlags&_i)for(t=t.child;t!==null;)Og(t,n,r),t=t.sibling}function Og(t,n,r){switch(t.tag){case 26:vl(t,n,r),t.flags&_i&&t.memoizedState!==null&&CS(r,Wa,t.memoizedState,t.memoizedProps);break;case 5:vl(t,n,r);break;case 3:case 4:var o=Wa;Wa=ic(t.stateNode.containerInfo),vl(t,n,r),Wa=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=_i,_i=16777216,vl(t,n,r),_i=o):vl(t,n,r));break;default:vl(t,n,r)}}function Rg(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Ei(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];In=o,Dg(o,t)}Rg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Tg(t),t=t.sibling}function Tg(t){switch(t.tag){case 0:case 11:case 15:Ei(t),t.flags&2048&&Zs(9,t,t.return);break;case 3:Ei(t);break;case 12:Ei(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Qo(t)):Ei(t);break;default:Ei(t)}}function Qo(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];In=o,Dg(o,t)}Rg(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Zs(8,n,n.return),Qo(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,Qo(n));break;default:Qo(n)}t=t.sibling}}function Dg(t,n){for(;In!==null;){var r=In;switch(r.tag){case 0:case 11:case 15:Zs(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ci(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,In=o;else e:for(r=t;In!==null;){o=In;var u=o.sibling,m=o.return;if(Sg(o),o===r){In=null;break e}if(u!==null){u.return=m,In=u;break e}In=m}}}var FN={getCacheForType:function(t){var n=Qn(wn),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r},cacheSignal:function(){return Qn(wn).controller.signal}},HN=typeof WeakMap=="function"?WeakMap:Map,zt=0,Zt=null,vt=null,St=0,Ut=0,Ea=null,Gs=!1,xl=!1,Md=!1,Es=0,mn=0,Ps=0,kr=0,Ud=0,Ca=0,Nl=0,Ci=null,fa=null,Ld=!1,Yo=0,zg=0,Ko=1/0,Xo=null,Qs=null,Mn=0,Ys=null,Sl=null,Cs=0,Bd=0,qd=null,kg=null,Ai=0,$d=null;function Aa(){return(zt&2)!==0&&St!==0?St&-St:M.T!==null?Gd():kt()}function Mg(){if(Ca===0)if((St&536870912)===0||wt){var t=it;it<<=1,(it&3932160)===0&&(it=262144),Ca=t}else Ca=536870912;return t=wa.current,t!==null&&(t.flags|=32),Ca}function ma(t,n,r){(t===Zt&&(Ut===2||Ut===9)||t.cancelPendingCommit!==null)&&(jl(t,0),Ks(t,St,Ca,!1)),Ee(t,r),((zt&2)===0||t!==Zt)&&(t===Zt&&((zt&2)===0&&(kr|=r),mn===4&&Ks(t,St,Ca,!1)),os(t))}function Ug(t,n,r){if((zt&6)!==0)throw Error(i(327));var o=!r&&(n&127)===0&&(n&t.expiredLanes)===0||Vn(t,n),u=o?GN(t,n):Fd(t,n,!0),m=o;do{if(u===0){xl&&!o&&Ks(t,n,0,!1);break}else{if(r=t.current.alternate,m&&!VN(r)){u=Fd(t,n,!1),m=!1;continue}if(u===2){if(m=n,t.errorRecoveryDisabledLanes&m)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var N=t;u=Ci;var k=N.current.memoizedState.isDehydrated;if(k&&(jl(N,y).flags|=256),y=Fd(N,y,!1),y!==2){if(Md&&!k){N.errorRecoveryDisabledLanes|=m,kr|=m,u=4;break e}m=fa,fa=u,m!==null&&(fa===null?fa=m:fa.push.apply(fa,m))}u=y}if(m=!1,u!==2)continue}}if(u===1){jl(t,0),Ks(t,n,0,!0);break}e:{switch(o=t,m=u,m){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:Ks(o,n,Ca,!Gs);break e;case 2:fa=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(u=Yo+300-P(),10<u)){if(Ks(o,n,Ca,!Gs),Gt(o,0,!0)!==0)break e;Cs=n,o.timeoutHandle=mb(Lg.bind(null,o,r,fa,Xo,Ld,n,Ca,kr,Nl,Gs,m,"Throttled",-0,0),u);break e}Lg(o,r,fa,Xo,Ld,n,Ca,kr,Nl,Gs,m,null,-0,0)}}break}while(!0);os(t)}function Lg(t,n,r,o,u,m,y,N,k,te,me,Ne,ae,oe){if(t.timeoutHandle=-1,Ne=n.subtreeFlags,Ne&8192||(Ne&16785408)===16785408){Ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jt},Og(n,m,Ne);var Qe=(m&62914560)===m?Yo-P():(m&4194048)===m?zg-P():0;if(Qe=AS(Ne,Qe),Qe!==null){Cs=m,t.cancelPendingCommit=Qe(Zg.bind(null,t,n,m,r,o,u,y,N,k,me,Ne,null,ae,oe)),Ks(t,m,y,!te);return}}Zg(t,n,m,r,o,u,y,N,k)}function VN(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var u=r[o],m=u.getSnapshot;u=u.value;try{if(!Sa(m(),u))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ks(t,n,r,o){n&=~Ud,n&=~kr,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var u=n;0<u;){var m=31-At(u),y=1<<m;o[m]=-1,u&=~y}r!==0&&rt(t,r,n)}function Jo(){return(zt&6)===0?(Oi(0),!1):!0}function Id(){if(vt!==null){if(Ut===0)var t=vt.return;else t=vt,gs=_r=null,ad(t),ml=null,di=0,t=vt;for(;t!==null;)hg(t.alternate,t),t=t.return;vt=null}}function jl(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,uS(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Cs=0,Id(),Zt=t,vt=r=hs(t.current,null),St=n,Ut=0,Ea=null,Gs=!1,xl=Vn(t,n),Md=!1,Nl=Ca=Ud=kr=Ps=mn=0,fa=Ci=null,Ld=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var u=31-At(o),m=1<<u;n|=t[u],o&=~m}return Es=n,vo(),r}function Bg(t,n){dt=null,M.H=vi,n===fl||n===Co?(n=ep(),Ut=3):n===Zu?(n=ep(),Ut=4):Ut=n===vd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ea=n,vt===null&&(mn=1,Io(t,Ma(n,t.current)))}function qg(){var t=wa.current;return t===null?!0:(St&4194048)===St?qa===null:(St&62914560)===St||(St&536870912)!==0?t===qa:!1}function $g(){var t=M.H;return M.H=vi,t===null?vi:t}function Ig(){var t=M.A;return M.A=FN,t}function Wo(){mn=4,Gs||(St&4194048)!==St&&wa.current!==null||(xl=!0),(Ps&134217727)===0&&(kr&134217727)===0||Zt===null||Ks(Zt,St,Ca,!1)}function Fd(t,n,r){var o=zt;zt|=2;var u=$g(),m=Ig();(Zt!==t||St!==n)&&(Xo=null,jl(t,n)),n=!1;var y=mn;e:do try{if(Ut!==0&&vt!==null){var N=vt,k=Ea;switch(Ut){case 8:Id(),y=6;break e;case 3:case 2:case 9:case 6:wa.current===null&&(n=!0);var te=Ut;if(Ut=0,Ea=null,wl(t,N,k,te),r&&xl){y=0;break e}break;default:te=Ut,Ut=0,Ea=null,wl(t,N,k,te)}}ZN(),y=mn;break}catch(me){Bg(t,me)}while(!0);return n&&t.shellSuspendCounter++,gs=_r=null,zt=o,M.H=u,M.A=m,vt===null&&(Zt=null,St=0,vo()),y}function ZN(){for(;vt!==null;)Fg(vt)}function GN(t,n){var r=zt;zt|=2;var o=$g(),u=Ig();Zt!==t||St!==n?(Xo=null,Ko=P()+500,jl(t,n)):xl=Vn(t,n);e:do try{if(Ut!==0&&vt!==null){n=vt;var m=Ea;t:switch(Ut){case 1:Ut=0,Ea=null,wl(t,n,m,1);break;case 2:case 9:if(Jh(m)){Ut=0,Ea=null,Hg(n);break}n=function(){Ut!==2&&Ut!==9||Zt!==t||(Ut=7),os(t)},m.then(n,n);break e;case 3:Ut=7;break e;case 4:Ut=5;break e;case 7:Jh(m)?(Ut=0,Ea=null,Hg(n)):(Ut=0,Ea=null,wl(t,n,m,7));break;case 5:var y=null;switch(vt.tag){case 26:y=vt.memoizedState;case 5:case 27:var N=vt;if(y?Ab(y):N.stateNode.complete){Ut=0,Ea=null;var k=N.sibling;if(k!==null)vt=k;else{var te=N.return;te!==null?(vt=te,ec(te)):vt=null}break t}}Ut=0,Ea=null,wl(t,n,m,5);break;case 6:Ut=0,Ea=null,wl(t,n,m,6);break;case 8:Id(),mn=6;break e;default:throw Error(i(462))}}PN();break}catch(me){Bg(t,me)}while(!0);return gs=_r=null,M.H=o,M.A=u,zt=r,vt!==null?0:(Zt=null,St=0,vo(),mn)}function PN(){for(;vt!==null&&!R();)Fg(vt)}function Fg(t){var n=fg(t.alternate,t,Es);t.memoizedProps=t.pendingProps,n===null?ec(t):vt=n}function Hg(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=lg(r,n,n.pendingProps,n.type,void 0,St);break;case 11:n=lg(r,n,n.pendingProps,n.type.render,n.ref,St);break;case 5:ad(n);default:hg(r,n),n=vt=Ih(n,Es),n=fg(r,n,Es)}t.memoizedProps=t.pendingProps,n===null?ec(t):vt=n}function wl(t,n,r,o){gs=_r=null,ad(n),ml=null,di=0;var u=n.return;try{if(MN(t,u,n,r,St)){mn=1,Io(t,Ma(r,t.current)),vt=null;return}}catch(m){if(u!==null)throw vt=u,m;mn=1,Io(t,Ma(r,t.current)),vt=null;return}n.flags&32768?(wt||o===1?t=!0:xl||(St&536870912)!==0?t=!1:(Gs=t=!0,(o===2||o===9||o===3||o===6)&&(o=wa.current,o!==null&&o.tag===13&&(o.flags|=16384))),Vg(n,t)):ec(n)}function ec(t){var n=t;do{if((n.flags&32768)!==0){Vg(n,Gs);return}t=n.return;var r=BN(n.alternate,n,Es);if(r!==null){vt=r;return}if(n=n.sibling,n!==null){vt=n;return}vt=n=t}while(n!==null);mn===0&&(mn=5)}function Vg(t,n){do{var r=qN(t.alternate,t);if(r!==null){r.flags&=32767,vt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){vt=t;return}vt=t=r}while(t!==null);mn=6,vt=null}function Zg(t,n,r,o,u,m,y,N,k){t.cancelPendingCommit=null;do tc();while(Mn!==0);if((zt&6)!==0)throw Error(i(327));if(n!==null){if(n===t.current)throw Error(i(177));if(m=n.lanes|n.childLanes,m|=Ru,Ve(t,r,m,y,N,k),t===Zt&&(vt=Zt=null,St=0),Sl=n,Ys=t,Cs=r,Bd=m,qd=u,kg=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,XN(se,function(){return Kg(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=M.T,M.T=null,u=I.p,I.p=2,y=zt,zt|=4;try{$N(t,n,r)}finally{zt=y,I.p=u,M.T=o}}Mn=1,Gg(),Pg(),Qg()}}function Gg(){if(Mn===1){Mn=0;var t=Ys,n=Sl,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=M.T,M.T=null;var o=I.p;I.p=2;var u=zt;zt|=4;try{Eg(n,t);var m=ef,y=Dh(t.containerInfo),N=m.focusedElem,k=m.selectionRange;if(y!==N&&N&&N.ownerDocument&&Th(N.ownerDocument.documentElement,N)){if(k!==null&&_u(N)){var te=k.start,me=k.end;if(me===void 0&&(me=te),"selectionStart"in N)N.selectionStart=te,N.selectionEnd=Math.min(me,N.value.length);else{var Ne=N.ownerDocument||document,ae=Ne&&Ne.defaultView||window;if(ae.getSelection){var oe=ae.getSelection(),Qe=N.textContent.length,nt=Math.min(k.start,Qe),It=k.end===void 0?nt:Math.min(k.end,Qe);!oe.extend&&nt>It&&(y=It,It=nt,nt=y);var H=Rh(N,nt),B=Rh(N,It);if(H&&B&&(oe.rangeCount!==1||oe.anchorNode!==H.node||oe.anchorOffset!==H.offset||oe.focusNode!==B.node||oe.focusOffset!==B.offset)){var ee=Ne.createRange();ee.setStart(H.node,H.offset),oe.removeAllRanges(),nt>It?(oe.addRange(ee),oe.extend(B.node,B.offset)):(ee.setEnd(B.node,B.offset),oe.addRange(ee))}}}}for(Ne=[],oe=N;oe=oe.parentNode;)oe.nodeType===1&&Ne.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<Ne.length;N++){var ve=Ne[N];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}mc=!!Wd,ef=Wd=null}finally{zt=u,I.p=o,M.T=r}}t.current=n,Mn=2}}function Pg(){if(Mn===2){Mn=0;var t=Ys,n=Sl,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=M.T,M.T=null;var o=I.p;I.p=2;var u=zt;zt|=4;try{Ng(t,n.alternate,n)}finally{zt=u,I.p=o,M.T=r}}Mn=3}}function Qg(){if(Mn===4||Mn===3){Mn=0,Q();var t=Ys,n=Sl,r=Cs,o=kg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Mn=5:(Mn=0,Sl=Ys=null,Yg(t,t.pendingLanes));var u=t.pendingLanes;if(u===0&&(Qs=null),Rt(r),n=n.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(_e,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=M.T,u=I.p,I.p=2,M.T=null;try{for(var m=t.onRecoverableError,y=0;y<o.length;y++){var N=o[y];m(N.value,{componentStack:N.stack})}}finally{M.T=n,I.p=u}}(Cs&3)!==0&&tc(),os(t),u=t.pendingLanes,(r&261930)!==0&&(u&42)!==0?t===$d?Ai++:(Ai=0,$d=t):Ai=0,Oi(0)}}function Yg(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,ci(n)))}function tc(){return Gg(),Pg(),Qg(),Kg()}function Kg(){if(Mn!==5)return!1;var t=Ys,n=Bd;Bd=0;var r=Rt(Cs),o=M.T,u=I.p;try{I.p=32>r?32:r,M.T=null,r=qd,qd=null;var m=Ys,y=Cs;if(Mn=0,Sl=Ys=null,Cs=0,(zt&6)!==0)throw Error(i(331));var N=zt;if(zt|=4,Tg(m.current),Ag(m,m.current,y,r),zt=N,Oi(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(_e,m)}catch{}return!0}finally{I.p=u,M.T=o,Yg(t,n)}}function Xg(t,n,r){n=Ma(r,n),n=yd(t.stateNode,n,2),t=Fs(t,n,2),t!==null&&(Ee(t,2),os(t))}function Lt(t,n,r){if(t.tag===3)Xg(t,t,r);else for(;n!==null;){if(n.tag===3){Xg(n,t,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Qs===null||!Qs.has(o))){t=Ma(r,t),r=Jp(2),o=Fs(n,r,2),o!==null&&(Wp(r,o,n,t),Ee(o,2),os(o));break}}n=n.return}}function Hd(t,n,r){var o=t.pingCache;if(o===null){o=t.pingCache=new HN;var u=new Set;o.set(n,u)}else u=o.get(n),u===void 0&&(u=new Set,o.set(n,u));u.has(r)||(Md=!0,u.add(r),t=QN.bind(null,t,n,r),n.then(t,t))}function QN(t,n,r){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Zt===t&&(St&r)===r&&(mn===4||mn===3&&(St&62914560)===St&&300>P()-Yo?(zt&2)===0&&jl(t,0):Ud|=r,Nl===St&&(Nl=0)),os(t)}function Jg(t,n){n===0&&(n=Y()),t=Sr(t,n),t!==null&&(Ee(t,n),os(t))}function YN(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),Jg(t,r)}function KN(t,n){var r=0;switch(t.tag){case 31:case 13:var o=t.stateNode,u=t.memoizedState;u!==null&&(r=u.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(n),Jg(t,r)}function XN(t,n){return A(t,n)}var nc=null,_l=null,Vd=!1,ac=!1,Zd=!1,Xs=0;function os(t){t!==_l&&t.next===null&&(_l===null?nc=_l=t:_l=_l.next=t),ac=!0,Vd||(Vd=!0,WN())}function Oi(t,n){if(!Zd&&ac){Zd=!0;do for(var r=!1,o=nc;o!==null;){if(t!==0){var u=o.pendingLanes;if(u===0)var m=0;else{var y=o.suspendedLanes,N=o.pingedLanes;m=(1<<31-At(42|t)+1)-1,m&=u&~(y&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,nb(o,m))}else m=St,m=Gt(o,o===Zt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||Vn(o,m)||(r=!0,nb(o,m));o=o.next}while(r);Zd=!1}}function JN(){Wg()}function Wg(){ac=Vd=!1;var t=0;Xs!==0&&cS()&&(t=Xs);for(var n=P(),r=null,o=nc;o!==null;){var u=o.next,m=eb(o,n);m===0?(o.next=null,r===null?nc=u:r.next=u,u===null&&(_l=r)):(r=o,(t!==0||(m&3)!==0)&&(ac=!0)),o=u}Mn!==0&&Mn!==5||Oi(t),Xs!==0&&(Xs=0)}function eb(t,n){for(var r=t.suspendedLanes,o=t.pingedLanes,u=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var y=31-At(m),N=1<<y,k=u[y];k===-1?((N&r)===0||(N&o)!==0)&&(u[y]=Zn(N,n)):k<=n&&(t.expiredLanes|=N),m&=~N}if(n=Zt,r=St,r=Gt(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===n&&(Ut===2||Ut===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&V(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Vn(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(o!==null&&V(o),Rt(r)){case 2:case 8:r=Be;break;case 32:r=se;break;case 268435456:r=He;break;default:r=se}return o=tb.bind(null,t),r=A(r,o),t.callbackPriority=n,t.callbackNode=r,n}return o!==null&&o!==null&&V(o),t.callbackPriority=2,t.callbackNode=null,2}function tb(t,n){if(Mn!==0&&Mn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(tc()&&t.callbackNode!==r)return null;var o=St;return o=Gt(t,t===Zt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Ug(t,o,n),eb(t,P()),t.callbackNode!=null&&t.callbackNode===r?tb.bind(null,t):null)}function nb(t,n){if(tc())return null;Ug(t,n,!0)}function WN(){dS(function(){(zt&6)!==0?A(Re,JN):Wg()})}function Gd(){if(Xs===0){var t=ul;t===0&&(t=an,an<<=1,(an&261888)===0&&(an=256)),Xs=t}return Xs}function ab(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ms(""+t)}function sb(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function eS(t,n,r,o,u){if(n==="submit"&&r&&r.stateNode===u){var m=ab((u[lt]||null).action),y=o.submitter;y&&(n=(n=y[lt]||null)?ab(n.formAction):y.getAttribute("formAction"),n!==null&&(m=n,y=null));var N=new kn("action","action",null,o,u);t.push({event:N,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Xs!==0){var k=y?sb(u,y):new FormData(u);fd(r,{pending:!0,data:k,method:u.method,action:m},null,k)}}else typeof m=="function"&&(N.preventDefault(),k=y?sb(u,y):new FormData(u),fd(r,{pending:!0,data:k,method:u.method,action:m},m,k))},currentTarget:u}]})}}for(var Pd=0;Pd<Ou.length;Pd++){var Qd=Ou[Pd],tS=Qd.toLowerCase(),nS=Qd[0].toUpperCase()+Qd.slice(1);Ja(tS,"on"+nS)}Ja(Mh,"onAnimationEnd"),Ja(Uh,"onAnimationIteration"),Ja(Lh,"onAnimationStart"),Ja("dblclick","onDoubleClick"),Ja("focusin","onFocus"),Ja("focusout","onBlur"),Ja(yN,"onTransitionRun"),Ja(vN,"onTransitionStart"),Ja(xN,"onTransitionCancel"),Ja(Bh,"onTransitionEnd"),$n("onMouseEnter",["mouseout","mouseover"]),$n("onMouseLeave",["mouseout","mouseover"]),$n("onPointerEnter",["pointerout","pointerover"]),$n("onPointerLeave",["pointerout","pointerover"]),jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ri));function rb(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],u=o.event;o=o.listeners;e:{var m=void 0;if(n)for(var y=o.length-1;0<=y;y--){var N=o[y],k=N.instance,te=N.currentTarget;if(N=N.listener,k!==m&&u.isPropagationStopped())break e;m=N,u.currentTarget=te;try{m(u)}catch(me){yo(me)}u.currentTarget=null,m=k}else for(y=0;y<o.length;y++){if(N=o[y],k=N.instance,te=N.currentTarget,N=N.listener,k!==m&&u.isPropagationStopped())break e;m=N,u.currentTarget=te;try{m(u)}catch(me){yo(me)}u.currentTarget=null,m=k}}}}function xt(t,n){var r=n[pn];r===void 0&&(r=n[pn]=new Set);var o=t+"__bubble";r.has(o)||(lb(n,t,2,!1),r.add(o))}function Yd(t,n,r){var o=0;n&&(o|=4),lb(r,t,o,n)}var sc="_reactListening"+Math.random().toString(36).slice(2);function Kd(t){if(!t[sc]){t[sc]=!0,ds.forEach(function(r){r!=="selectionchange"&&(aS.has(r)||Yd(r,!1,t),Yd(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[sc]||(n[sc]=!0,Yd("selectionchange",!1,n))}}function lb(t,n,r,o){switch(Mb(n)){case 2:var u=TS;break;case 8:u=DS;break;default:u=ff}r=u.bind(null,n,r,t),u=void 0,!ye||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),o?u!==void 0?t.addEventListener(n,r,{capture:!0,passive:u}):t.addEventListener(n,r,!0):u!==void 0?t.addEventListener(n,r,{passive:u}):t.addEventListener(n,r,!1)}function Xd(t,n,r,o,u){var m=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var N=o.stateNode.containerInfo;if(N===u)break;if(y===4)for(y=o.return;y!==null;){var k=y.tag;if((k===3||k===4)&&y.stateNode.containerInfo===u)return;y=y.return}for(;N!==null;){if(y=cn(N),y===null)return;if(k=y.tag,k===5||k===6||k===26||k===27){o=m=y;continue e}N=N.parentNode}}o=o.return}C(function(){var te=m,me=yr(r),Ne=[];e:{var ae=qh.get(t);if(ae!==void 0){var oe=kn,Qe=t;switch(t){case"keypress":if(De(r)===0)break e;case"keydown":case"keyup":oe=K0;break;case"focusin":Qe="focus",oe=xu;break;case"focusout":Qe="blur",oe=xu;break;case"beforeblur":case"afterblur":oe=xu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=hh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=B0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=W0;break;case Mh:case Uh:case Lh:oe=I0;break;case Bh:oe=tN;break;case"scroll":case"scrollend":oe=el;break;case"wheel":oe=aN;break;case"copy":case"cut":case"paste":oe=H0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=gh;break;case"toggle":case"beforetoggle":oe=rN}var nt=(n&4)!==0,It=!nt&&(t==="scroll"||t==="scrollend"),H=nt?ae!==null?ae+"Capture":null:ae;nt=[];for(var B=te,ee;B!==null;){var ve=B;if(ee=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||ee===null||H===null||(ve=ne(B,H),ve!=null&&nt.push(Ti(B,ve,ee))),It)break;B=B.return}0<nt.length&&(ae=new oe(ae,Qe,null,r,me),Ne.push({event:ae,listeners:nt}))}}if((n&7)===0){e:{if(ae=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",ae&&r!==za&&(Qe=r.relatedTarget||r.fromElement)&&(cn(Qe)||Qe[Ht]))break e;if((oe||ae)&&(ae=me.window===me?me:(ae=me.ownerDocument)?ae.defaultView||ae.parentWindow:window,oe?(Qe=r.relatedTarget||r.toElement,oe=te,Qe=Qe?cn(Qe):null,Qe!==null&&(It=d(Qe),nt=Qe.tag,Qe!==It||nt!==5&&nt!==27&&nt!==6)&&(Qe=null)):(oe=null,Qe=te),oe!==Qe)){if(nt=hh,ve="onMouseLeave",H="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(nt=gh,ve="onPointerLeave",H="onPointerEnter",B="pointer"),It=oe==null?ae:Dn(oe),ee=Qe==null?ae:Dn(Qe),ae=new nt(ve,B+"leave",oe,r,me),ae.target=It,ae.relatedTarget=ee,ve=null,cn(me)===te&&(nt=new nt(H,B+"enter",Qe,r,me),nt.target=ee,nt.relatedTarget=It,ve=nt),It=ve,oe&&Qe)t:{for(nt=sS,H=oe,B=Qe,ee=0,ve=H;ve;ve=nt(ve))ee++;ve=0;for(var Je=B;Je;Je=nt(Je))ve++;for(;0<ee-ve;)H=nt(H),ee--;for(;0<ve-ee;)B=nt(B),ve--;for(;ee--;){if(H===B||B!==null&&H===B.alternate){nt=H;break t}H=nt(H),B=nt(B)}nt=null}else nt=null;oe!==null&&ib(Ne,ae,oe,nt,!1),Qe!==null&&It!==null&&ib(Ne,It,Qe,nt,!0)}}e:{if(ae=te?Dn(te):window,oe=ae.nodeName&&ae.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ae.type==="file")var Tt=wh;else if(Sh(ae))if(_h)Tt=pN;else{Tt=mN;var Ye=fN}else oe=ae.nodeName,!oe||oe.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?te&&Ka(te.elementType)&&(Tt=wh):Tt=hN;if(Tt&&(Tt=Tt(t,te))){jh(Ne,Tt,r,me);break e}Ye&&Ye(t,ae,te),t==="focusout"&&te&&ae.type==="number"&&te.memoizedProps.value!=null&&Wn(ae,"number",ae.value)}switch(Ye=te?Dn(te):window,t){case"focusin":(Sh(Ye)||Ye.contentEditable==="true")&&(nl=Ye,Eu=te,li=null);break;case"focusout":li=Eu=nl=null;break;case"mousedown":Cu=!0;break;case"contextmenu":case"mouseup":case"dragend":Cu=!1,zh(Ne,r,me);break;case"selectionchange":if(bN)break;case"keydown":case"keyup":zh(Ne,r,me)}var pt;if(Su)e:{switch(t){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else tl?xh(t,r)&&(jt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(jt="onCompositionStart");jt&&(bh&&r.locale!=="ko"&&(tl||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&tl&&(pt=fe()):(_t=me,w="value"in _t?_t.value:_t.textContent,tl=!0)),Ye=rc(te,jt),0<Ye.length&&(jt=new ph(jt,t,null,r,me),Ne.push({event:jt,listeners:Ye}),pt?jt.data=pt:(pt=Nh(r),pt!==null&&(jt.data=pt)))),(pt=iN?oN(t,r):cN(t,r))&&(jt=rc(te,"onBeforeInput"),0<jt.length&&(Ye=new ph("onBeforeInput","beforeinput",null,r,me),Ne.push({event:Ye,listeners:jt}),Ye.data=pt)),eS(Ne,t,te,r,me)}rb(Ne,n)})}function Ti(t,n,r){return{instance:t,listener:n,currentTarget:r}}function rc(t,n){for(var r=n+"Capture",o=[];t!==null;){var u=t,m=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||m===null||(u=ne(t,r),u!=null&&o.unshift(Ti(t,u,m)),u=ne(t,n),u!=null&&o.push(Ti(t,u,m))),t.tag===3)return o;t=t.return}return[]}function sS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ib(t,n,r,o,u){for(var m=n._reactName,y=[];r!==null&&r!==o;){var N=r,k=N.alternate,te=N.stateNode;if(N=N.tag,k!==null&&k===o)break;N!==5&&N!==26&&N!==27||te===null||(k=te,u?(te=ne(r,m),te!=null&&y.unshift(Ti(r,te,k))):u||(te=ne(r,m),te!=null&&y.push(Ti(r,te,k)))),r=r.return}y.length!==0&&t.push({event:n,listeners:y})}var rS=/\r\n?/g,lS=/\u0000|\uFFFD/g;function ob(t){return(typeof t=="string"?t:""+t).replace(rS,`
`).replace(lS,"")}function cb(t,n){return n=ob(n),ob(t)===n}function $t(t,n,r,o,u,m){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||ss(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&ss(t,""+o);break;case"className":Na(t,"class",o);break;case"tabIndex":Na(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Na(t,r,o);break;case"style":br(t,o,m);break;case"data":if(n!=="object"){Na(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Ms(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(n!=="input"&&$t(t,n,"name",u.name,u,null),$t(t,n,"formEncType",u.formEncType,u,null),$t(t,n,"formMethod",u.formMethod,u,null),$t(t,n,"formTarget",u.formTarget,u,null)):($t(t,n,"encType",u.encType,u,null),$t(t,n,"method",u.method,u,null),$t(t,n,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Ms(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=Jt);break;case"onScroll":o!=null&&xt("scroll",t);break;case"onScrollEnd":o!=null&&xt("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(u.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=Ms(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":xt("beforetoggle",t),xt("toggle",t),rn(t,"popover",o);break;case"xlinkActuate":Jn(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Jn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Jn(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Jn(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Jn(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Jn(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":rn(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Wl.get(r)||r,rn(t,r,o))}}function Jd(t,n,r,o,u,m){switch(r){case"style":br(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(u.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"children":typeof o=="string"?ss(t,o):(typeof o=="number"||typeof o=="bigint")&&ss(t,""+o);break;case"onScroll":o!=null&&xt("scroll",t);break;case"onScrollEnd":o!=null&&xt("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Jt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xa.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(u=r.endsWith("Capture"),n=r.slice(2,u?r.length-7:void 0),m=t[lt]||null,m=m!=null?m[r]:null,typeof m=="function"&&t.removeEventListener(n,m,u),typeof o=="function")){typeof m!="function"&&m!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,o,u);break e}r in t?t[r]=o:o===!0?t.setAttribute(r,""):rn(t,r,o)}}}function Kn(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",t),xt("load",t);var o=!1,u=!1,m;for(m in r)if(r.hasOwnProperty(m)){var y=r[m];if(y!=null)switch(m){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:$t(t,n,m,y,r,null)}}u&&$t(t,n,"srcSet",r.srcSet,r,null),o&&$t(t,n,"src",r.src,r,null);return;case"input":xt("invalid",t);var N=m=y=u=null,k=null,te=null;for(o in r)if(r.hasOwnProperty(o)){var me=r[o];if(me!=null)switch(o){case"name":u=me;break;case"type":y=me;break;case"checked":k=me;break;case"defaultChecked":te=me;break;case"value":m=me;break;case"defaultValue":N=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(i(137,n));break;default:$t(t,n,o,me,r,null)}}Ya(t,m,N,k,te,y,u,!1);return;case"select":xt("invalid",t),o=y=m=null;for(u in r)if(r.hasOwnProperty(u)&&(N=r[u],N!=null))switch(u){case"value":m=N;break;case"defaultValue":y=N;break;case"multiple":o=N;default:$t(t,n,u,N,r,null)}n=m,r=y,t.multiple=!!o,n!=null?Da(t,!!o,n,!1):r!=null&&Da(t,!!o,r,!0);return;case"textarea":xt("invalid",t),m=u=o=null;for(y in r)if(r.hasOwnProperty(y)&&(N=r[y],N!=null))switch(y){case"value":o=N;break;case"defaultValue":u=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:$t(t,n,y,N,r,null)}pr(t,o,u,m);return;case"option":for(k in r)if(r.hasOwnProperty(k)&&(o=r[k],o!=null))switch(k){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:$t(t,n,k,o,r,null)}return;case"dialog":xt("beforetoggle",t),xt("toggle",t),xt("cancel",t),xt("close",t);break;case"iframe":case"object":xt("load",t);break;case"video":case"audio":for(o=0;o<Ri.length;o++)xt(Ri[o],t);break;case"image":xt("error",t),xt("load",t);break;case"details":xt("toggle",t);break;case"embed":case"source":case"link":xt("error",t),xt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in r)if(r.hasOwnProperty(te)&&(o=r[te],o!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:$t(t,n,te,o,r,null)}return;default:if(Ka(n)){for(me in r)r.hasOwnProperty(me)&&(o=r[me],o!==void 0&&Jd(t,n,me,o,r,void 0));return}}for(N in r)r.hasOwnProperty(N)&&(o=r[N],o!=null&&$t(t,n,N,o,r,null))}function iS(t,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,m=null,y=null,N=null,k=null,te=null,me=null;for(oe in r){var Ne=r[oe];if(r.hasOwnProperty(oe)&&Ne!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":k=Ne;default:o.hasOwnProperty(oe)||$t(t,n,oe,null,o,Ne)}}for(var ae in o){var oe=o[ae];if(Ne=r[ae],o.hasOwnProperty(ae)&&(oe!=null||Ne!=null))switch(ae){case"type":m=oe;break;case"name":u=oe;break;case"checked":te=oe;break;case"defaultChecked":me=oe;break;case"value":y=oe;break;case"defaultValue":N=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,n));break;default:oe!==Ne&&$t(t,n,ae,oe,o,Ne)}}ks(t,y,N,k,te,me,m,u);return;case"select":oe=y=N=ae=null;for(m in r)if(k=r[m],r.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":oe=k;default:o.hasOwnProperty(m)||$t(t,n,m,null,o,k)}for(u in o)if(m=o[u],k=r[u],o.hasOwnProperty(u)&&(m!=null||k!=null))switch(u){case"value":ae=m;break;case"defaultValue":N=m;break;case"multiple":y=m;default:m!==k&&$t(t,n,u,m,o,k)}n=N,r=y,o=oe,ae!=null?Da(t,!!r,ae,!1):!!o!=!!r&&(n!=null?Da(t,!!r,n,!0):Da(t,!!r,r?[]:"",!1));return;case"textarea":oe=ae=null;for(N in r)if(u=r[N],r.hasOwnProperty(N)&&u!=null&&!o.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:$t(t,n,N,null,o,u)}for(y in o)if(u=o[y],m=r[y],o.hasOwnProperty(y)&&(u!=null||m!=null))switch(y){case"value":ae=u;break;case"defaultValue":oe=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(i(91));break;default:u!==m&&$t(t,n,y,u,o,m)}Jr(t,ae,oe);return;case"option":for(var Qe in r)if(ae=r[Qe],r.hasOwnProperty(Qe)&&ae!=null&&!o.hasOwnProperty(Qe))switch(Qe){case"selected":t.selected=!1;break;default:$t(t,n,Qe,null,o,ae)}for(k in o)if(ae=o[k],oe=r[k],o.hasOwnProperty(k)&&ae!==oe&&(ae!=null||oe!=null))switch(k){case"selected":t.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:$t(t,n,k,ae,o,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in r)ae=r[nt],r.hasOwnProperty(nt)&&ae!=null&&!o.hasOwnProperty(nt)&&$t(t,n,nt,null,o,ae);for(te in o)if(ae=o[te],oe=r[te],o.hasOwnProperty(te)&&ae!==oe&&(ae!=null||oe!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,n));break;default:$t(t,n,te,ae,o,oe)}return;default:if(Ka(n)){for(var It in r)ae=r[It],r.hasOwnProperty(It)&&ae!==void 0&&!o.hasOwnProperty(It)&&Jd(t,n,It,void 0,o,ae);for(me in o)ae=o[me],oe=r[me],!o.hasOwnProperty(me)||ae===oe||ae===void 0&&oe===void 0||Jd(t,n,me,ae,o,oe);return}}for(var H in r)ae=r[H],r.hasOwnProperty(H)&&ae!=null&&!o.hasOwnProperty(H)&&$t(t,n,H,null,o,ae);for(Ne in o)ae=o[Ne],oe=r[Ne],!o.hasOwnProperty(Ne)||ae===oe||ae==null&&oe==null||$t(t,n,Ne,ae,o,oe)}function ub(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var u=r[o],m=u.transferSize,y=u.initiatorType,N=u.duration;if(m&&N&&ub(y)){for(y=0,N=u.responseEnd,o+=1;o<r.length;o++){var k=r[o],te=k.startTime;if(te>N)break;var me=k.transferSize,Ne=k.initiatorType;me&&ub(Ne)&&(k=k.responseEnd,y+=me*(k<N?1:(N-te)/(k-te)))}if(--o,n+=8*(m+y)/(u.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Wd=null,ef=null;function lc(t){return t.nodeType===9?t:t.ownerDocument}function db(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fb(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function tf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var nf=null;function cS(){var t=window.event;return t&&t.type==="popstate"?t===nf?!1:(nf=t,!0):(nf=null,!1)}var mb=typeof setTimeout=="function"?setTimeout:void 0,uS=typeof clearTimeout=="function"?clearTimeout:void 0,hb=typeof Promise=="function"?Promise:void 0,dS=typeof queueMicrotask=="function"?queueMicrotask:typeof hb<"u"?function(t){return hb.resolve(null).then(t).catch(fS)}:mb;function fS(t){setTimeout(function(){throw t})}function Js(t){return t==="head"}function pb(t,n){var r=n,o=0;do{var u=r.nextSibling;if(t.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"||r==="/&"){if(o===0){t.removeChild(u),Ol(n);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Di(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Di(r);for(var m=r.firstChild;m;){var y=m.nextSibling,N=m.nodeName;m[Vt]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=y}}else r==="body"&&Di(t.ownerDocument.body);r=u}while(r);Ol(n)}function gb(t,n){var r=t;t=0;do{var o=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=o}while(r)}function af(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":af(r),Gn(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function mS(t,n,r,o){for(;t.nodeType===1;){var u=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Vt])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==u.rel||t.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||t.getAttribute("title")!==(u.title==null?null:u.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(u.src==null?null:u.src)||t.getAttribute("type")!==(u.type==null?null:u.type)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var m=u.name==null?null:""+u.name;if(u.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=$a(t.nextSibling),t===null)break}return null}function hS(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=$a(t.nextSibling),t===null))return null;return t}function bb(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=$a(t.nextSibling),t===null))return null;return t}function sf(t){return t.data==="$?"||t.data==="$~"}function rf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function pS(t,n){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||r.readyState!=="loading")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function $a(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var lf=null;function yb(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(n===0)return $a(t.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}t=t.nextSibling}return null}function vb(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return t;n--}else r!=="/$"&&r!=="/&"||n++}t=t.previousSibling}return null}function xb(t,n,r){switch(n=lc(r),t){case"html":if(t=n.documentElement,!t)throw Error(i(452));return t;case"head":if(t=n.head,!t)throw Error(i(453));return t;case"body":if(t=n.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Di(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Gn(t)}var Ia=new Map,Nb=new Set;function ic(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var As=I.d;I.d={f:gS,r:bS,D:yS,C:vS,L:xS,m:NS,X:jS,S:SS,M:wS};function gS(){var t=As.f(),n=Jo();return t||n}function bS(t){var n=Sn(t);n!==null&&n.tag===5&&n.type==="form"?Bp(n):As.r(t)}var El=typeof document>"u"?null:document;function Sb(t,n,r){var o=El;if(o&&typeof n=="string"&&n){var u=Mt(n);u='link[rel="'+t+'"][href="'+u+'"]',typeof r=="string"&&(u+='[crossorigin="'+r+'"]'),Nb.has(u)||(Nb.add(u),t={rel:t,crossOrigin:r,href:n},o.querySelector(u)===null&&(n=o.createElement("link"),Kn(n,"link",t),yt(n),o.head.appendChild(n)))}}function yS(t){As.D(t),Sb("dns-prefetch",t,null)}function vS(t,n){As.C(t,n),Sb("preconnect",t,n)}function xS(t,n,r){As.L(t,n,r);var o=El;if(o&&t&&n){var u='link[rel="preload"][as="'+Mt(n)+'"]';n==="image"&&r&&r.imageSrcSet?(u+='[imagesrcset="'+Mt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(u+='[imagesizes="'+Mt(r.imageSizes)+'"]')):u+='[href="'+Mt(t)+'"]';var m=u;switch(n){case"style":m=Cl(t);break;case"script":m=Al(t)}Ia.has(m)||(t=x({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),Ia.set(m,t),o.querySelector(u)!==null||n==="style"&&o.querySelector(zi(m))||n==="script"&&o.querySelector(ki(m))||(n=o.createElement("link"),Kn(n,"link",t),yt(n),o.head.appendChild(n)))}}function NS(t,n){As.m(t,n);var r=El;if(r&&t){var o=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+Mt(o)+'"][href="'+Mt(t)+'"]',m=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Al(t)}if(!Ia.has(m)&&(t=x({rel:"modulepreload",href:t},n),Ia.set(m,t),r.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(ki(m)))return}o=r.createElement("link"),Kn(o,"link",t),yt(o),r.head.appendChild(o)}}}function SS(t,n,r){As.S(t,n,r);var o=El;if(o&&t){var u=bn(o).hoistableStyles,m=Cl(t);n=n||"default";var y=u.get(m);if(!y){var N={loading:0,preload:null};if(y=o.querySelector(zi(m)))N.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":n},r),(r=Ia.get(m))&&of(t,r);var k=y=o.createElement("link");yt(k),Kn(k,"link",t),k._p=new Promise(function(te,me){k.onload=te,k.onerror=me}),k.addEventListener("load",function(){N.loading|=1}),k.addEventListener("error",function(){N.loading|=2}),N.loading|=4,oc(y,n,o)}y={type:"stylesheet",instance:y,count:1,state:N},u.set(m,y)}}}function jS(t,n){As.X(t,n);var r=El;if(r&&t){var o=bn(r).hoistableScripts,u=Al(t),m=o.get(u);m||(m=r.querySelector(ki(u)),m||(t=x({src:t,async:!0},n),(n=Ia.get(u))&&cf(t,n),m=r.createElement("script"),yt(m),Kn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(u,m))}}function wS(t,n){As.M(t,n);var r=El;if(r&&t){var o=bn(r).hoistableScripts,u=Al(t),m=o.get(u);m||(m=r.querySelector(ki(u)),m||(t=x({src:t,async:!0,type:"module"},n),(n=Ia.get(u))&&cf(t,n),m=r.createElement("script"),yt(m),Kn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(u,m))}}function jb(t,n,r,o){var u=(u=be.current)?ic(u):null;if(!u)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Cl(r.href),r=bn(u).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Cl(r.href);var m=bn(u).hoistableStyles,y=m.get(t);if(y||(u=u.ownerDocument||u,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,y),(m=u.querySelector(zi(t)))&&!m._p&&(y.instance=m,y.state.loading=5),Ia.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Ia.set(t,r),m||_S(u,t,r,y.state))),n&&o===null)throw Error(i(528,""));return y}if(n&&o!==null)throw Error(i(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Al(r),r=bn(u).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Cl(t){return'href="'+Mt(t)+'"'}function zi(t){return'link[rel="stylesheet"]['+t+"]"}function wb(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function _S(t,n,r,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Kn(n,"link",r),yt(n),t.head.appendChild(n))}function Al(t){return'[src="'+Mt(t)+'"]'}function ki(t){return"script[async]"+t}function _b(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+Mt(r.href)+'"]');if(o)return n.instance=o,yt(o),o;var u=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),yt(o),Kn(o,"style",u),oc(o,r.precedence,t),n.instance=o;case"stylesheet":u=Cl(r.href);var m=t.querySelector(zi(u));if(m)return n.state.loading|=4,n.instance=m,yt(m),m;o=wb(r),(u=Ia.get(u))&&of(o,u),m=(t.ownerDocument||t).createElement("link"),yt(m);var y=m;return y._p=new Promise(function(N,k){y.onload=N,y.onerror=k}),Kn(m,"link",o),n.state.loading|=4,oc(m,r.precedence,t),n.instance=m;case"script":return m=Al(r.src),(u=t.querySelector(ki(m)))?(n.instance=u,yt(u),u):(o=r,(u=Ia.get(m))&&(o=x({},r),cf(o,u)),t=t.ownerDocument||t,u=t.createElement("script"),yt(u),Kn(u,"link",o),t.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,oc(o,r.precedence,t));return n.instance}function oc(t,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,m=u,y=0;y<o.length;y++){var N=o[y];if(N.dataset.precedence===n)m=N;else if(m!==u)break}m?m.parentNode.insertBefore(t,m.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function of(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function cf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var cc=null;function Eb(t,n,r){if(cc===null){var o=new Map,u=cc=new Map;u.set(r,o)}else u=cc,o=u.get(r),o||(o=new Map,u.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),u=0;u<r.length;u++){var m=r[u];if(!(m[Vt]||m[ot]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var y=m.getAttribute(n)||"";y=t+y;var N=o.get(y);N?N.push(m):o.set(y,[m])}}return o}function Cb(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function ES(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Ab(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function CS(t,n,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var u=Cl(o.href),m=n.querySelector(zi(u));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=uc.bind(t),n.then(t,t)),r.state.loading|=4,r.instance=m,yt(m);return}m=n.ownerDocument||n,o=wb(o),(u=Ia.get(u))&&of(o,u),m=m.createElement("link"),yt(m);var y=m;y._p=new Promise(function(N,k){y.onload=N,y.onerror=k}),Kn(m,"link",o),r.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=uc.bind(t),n.addEventListener("load",r),n.addEventListener("error",r))}}var uf=0;function AS(t,n){return t.stylesheets&&t.count===0&&fc(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var o=setTimeout(function(){if(t.stylesheets&&fc(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+n);0<t.imgBytes&&uf===0&&(uf=62500*oS());var u=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&fc(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>uf?50:800)+n);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function uc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var dc=null;function fc(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,dc=new Map,n.forEach(OS,t),dc=null,uc.call(t))}function OS(t,n){if(!(n.state.loading&4)){var r=dc.get(t);if(r)var o=r.get(null);else{r=new Map,dc.set(t,r);for(var u=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<u.length;m++){var y=u[m];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(r.set(y.dataset.precedence,y),o=y)}o&&r.set(null,o)}u=n.instance,y=u.getAttribute("data-precedence"),m=r.get(y)||o,m===o&&r.set(null,u),r.set(y,u),this.count++,o=uc.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),m?m.parentNode.insertBefore(u,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(u,t.firstChild)),n.state.loading|=4}}var Mi={$$typeof:J,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function RS(t,n,r,o,u,m,y,N,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=X(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=X(0),this.hiddenUpdates=X(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=m,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Ob(t,n,r,o,u,m,y,N,k,te,me,Ne){return t=new RS(t,n,r,y,k,te,me,Ne,N),n=1,m===!0&&(n|=24),m=ja(3,null,null,n),t.current=m,m.stateNode=t,n=Fu(),n.refCount++,t.pooledCache=n,n.refCount++,m.memoizedState={element:o,isDehydrated:r,cache:n},Gu(m),t}function Rb(t){return t?(t=rl,t):rl}function Tb(t,n,r,o,u,m){u=Rb(u),o.context===null?o.context=u:o.pendingContext=u,o=Is(n),o.payload={element:r},m=m===void 0?null:m,m!==null&&(o.callback=m),r=Fs(t,o,n),r!==null&&(ma(r,t,n),mi(r,t,n))}function Db(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function df(t,n){Db(t,n),(t=t.alternate)&&Db(t,n)}function zb(t){if(t.tag===13||t.tag===31){var n=Sr(t,67108864);n!==null&&ma(n,t,67108864),df(t,67108864)}}function kb(t){if(t.tag===13||t.tag===31){var n=Aa();n=Ot(n);var r=Sr(t,n);r!==null&&ma(r,t,n),df(t,n)}}var mc=!0;function TS(t,n,r,o){var u=M.T;M.T=null;var m=I.p;try{I.p=2,ff(t,n,r,o)}finally{I.p=m,M.T=u}}function DS(t,n,r,o){var u=M.T;M.T=null;var m=I.p;try{I.p=8,ff(t,n,r,o)}finally{I.p=m,M.T=u}}function ff(t,n,r,o){if(mc){var u=mf(o);if(u===null)Xd(t,n,o,hc,r),Ub(t,o);else if(kS(u,t,n,r,o))o.stopPropagation();else if(Ub(t,o),n&4&&-1<zS.indexOf(t)){for(;u!==null;){var m=Sn(u);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var y=qn(m.pendingLanes);if(y!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;y;){var k=1<<31-At(y);N.entanglements[1]|=k,y&=~k}os(m),(zt&6)===0&&(Ko=P()+500,Oi(0))}}break;case 31:case 13:N=Sr(m,2),N!==null&&ma(N,m,2),Jo(),df(m,2)}if(m=mf(o),m===null&&Xd(t,n,o,hc,r),m===u)break;u=m}u!==null&&o.stopPropagation()}else Xd(t,n,o,null,r)}}function mf(t){return t=yr(t),hf(t)}var hc=null;function hf(t){if(hc=null,t=cn(t),t!==null){var n=d(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=f(n),t!==null)return t;t=null}else if(r===31){if(t=h(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return hc=t,null}function Mb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(re()){case Re:return 2;case Be:return 8;case se:case Ue:return 32;case He:return 268435456;default:return 32}default:return 32}}var pf=!1,Ws=null,er=null,tr=null,Ui=new Map,Li=new Map,nr=[],zS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ub(t,n){switch(t){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":Ui.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(n.pointerId)}}function Bi(t,n,r,o,u,m){return t===null||t.nativeEvent!==m?(t={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:m,targetContainers:[u]},n!==null&&(n=Sn(n),n!==null&&zb(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),t)}function kS(t,n,r,o,u){switch(n){case"focusin":return Ws=Bi(Ws,t,n,r,o,u),!0;case"dragenter":return er=Bi(er,t,n,r,o,u),!0;case"mouseover":return tr=Bi(tr,t,n,r,o,u),!0;case"pointerover":var m=u.pointerId;return Ui.set(m,Bi(Ui.get(m)||null,t,n,r,o,u)),!0;case"gotpointercapture":return m=u.pointerId,Li.set(m,Bi(Li.get(m)||null,t,n,r,o,u)),!0}return!1}function Lb(t){var n=cn(t.target);if(n!==null){var r=d(n);if(r!==null){if(n=r.tag,n===13){if(n=f(r),n!==null){t.blockedOn=n,sn(t.priority,function(){kb(r)});return}}else if(n===31){if(n=h(r),n!==null){t.blockedOn=n,sn(t.priority,function(){kb(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pc(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=mf(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);za=o,r.target.dispatchEvent(o),za=null}else return n=Sn(r),n!==null&&zb(n),t.blockedOn=r,!1;n.shift()}return!0}function Bb(t,n,r){pc(t)&&r.delete(n)}function MS(){pf=!1,Ws!==null&&pc(Ws)&&(Ws=null),er!==null&&pc(er)&&(er=null),tr!==null&&pc(tr)&&(tr=null),Ui.forEach(Bb),Li.forEach(Bb)}function gc(t,n){t.blockedOn===n&&(t.blockedOn=null,pf||(pf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,MS)))}var bc=null;function qb(t){bc!==t&&(bc=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){bc===t&&(bc=null);for(var n=0;n<t.length;n+=3){var r=t[n],o=t[n+1],u=t[n+2];if(typeof o!="function"){if(hf(o||r)===null)continue;break}var m=Sn(r);m!==null&&(t.splice(n,3),n-=3,fd(m,{pending:!0,data:u,method:r.method,action:o},o,u))}}))}function Ol(t){function n(k){return gc(k,t)}Ws!==null&&gc(Ws,t),er!==null&&gc(er,t),tr!==null&&gc(tr,t),Ui.forEach(n),Li.forEach(n);for(var r=0;r<nr.length;r++){var o=nr[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<nr.length&&(r=nr[0],r.blockedOn===null);)Lb(r),r.blockedOn===null&&nr.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var u=r[o],m=r[o+1],y=u[lt]||null;if(typeof m=="function")y||qb(r);else if(y){var N=null;if(m&&m.hasAttribute("formAction")){if(u=m,y=m[lt]||null)N=y.formAction;else if(hf(u)!==null)continue}else N=y.action;typeof N=="function"?r[o+1]=N:(r.splice(o,3),o-=3),qb(r)}}}function $b(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(y){return u=y})},focusReset:"manual",scroll:"manual"})}function n(){u!==null&&(u(),u=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),u!==null&&(u(),u=null)}}}function gf(t){this._internalRoot=t}yc.prototype.render=gf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(i(409));var r=n.current,o=Aa();Tb(r,o,t,n,null,null)},yc.prototype.unmount=gf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Tb(t.current,2,null,t,null,null),Jo(),n[Ht]=null}};function yc(t){this._internalRoot=t}yc.prototype.unstable_scheduleHydration=function(t){if(t){var n=kt();t={blockedOn:null,target:t,priority:n};for(var r=0;r<nr.length&&n!==0&&n<nr[r].priority;r++);nr.splice(r,0,t),r===0&&Lb(t)}};var Ib=a.version;if(Ib!=="19.2.0")throw Error(i(527,Ib,"19.2.0"));I.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=p(n),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var US={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{_e=vc.inject(US),et=vc}catch{}}return $i.createRoot=function(t,n){if(!c(t))throw Error(i(299));var r=!1,o="",u=Qp,m=Yp,y=Kp;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=Ob(t,1,!1,null,null,r,o,null,u,m,y,$b),t[Ht]=n.current,Kd(t),new gf(n)},$i.hydrateRoot=function(t,n,r){if(!c(t))throw Error(i(299));var o=!1,u="",m=Qp,y=Yp,N=Kp,k=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(N=r.onRecoverableError),r.formState!==void 0&&(k=r.formState)),n=Ob(t,1,!0,n,r??null,o,u,k,m,y,N,$b),n.context=Rb(null),r=n.current,o=Aa(),o=Ot(o),u=Is(o),u.callback=null,Fs(r,u,o),r=o,n.current.lanes=r,Ee(n,r),os(n),t[Ht]=n.current,Kd(t),new yc(n)},$i.version="19.2.0",$i}var Xb;function GS(){if(Xb)return vf.exports;Xb=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(a){console.error(a)}}return e(),vf.exports=ZS(),vf.exports}var PS=GS();const QS=Dv(PS);var Jb="popstate";function YS(e={}){function a(i,c){let{pathname:d,search:f,hash:h}=i.location;return em("",{pathname:d,search:f,hash:h},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(i,c){return typeof c=="string"?c:Xi(c)}return XS(a,s,null,e)}function tn(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function Za(e,a){if(!e){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function KS(){return Math.random().toString(36).substring(2,10)}function Wb(e,a){return{usr:e.state,key:e.key,idx:a}}function em(e,a,s=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof a=="string"?Hl(a):a,state:s,key:a&&a.key||i||KS()}}function Xi({pathname:e="/",search:a="",hash:s=""}){return a&&a!=="?"&&(e+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Hl(e){let a={};if(e){let s=e.indexOf("#");s>=0&&(a.hash=e.substring(s),e=e.substring(0,s));let i=e.indexOf("?");i>=0&&(a.search=e.substring(i),e=e.substring(0,i)),e&&(a.pathname=e)}return a}function XS(e,a,s,i={}){let{window:c=document.defaultView,v5Compat:d=!1}=i,f=c.history,h="POP",g=null,p=v();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function v(){return(f.state||{idx:null}).idx}function x(){h="POP";let O=v(),q=O==null?null:O-p;p=O,g&&g({action:h,location:E.location,delta:q})}function S(O,q){h="PUSH";let D=em(E.location,O,q);p=v()+1;let J=Wb(D,p),z=E.createHref(D);try{f.pushState(J,"",z)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;c.location.assign(z)}d&&g&&g({action:h,location:E.location,delta:1})}function $(O,q){h="REPLACE";let D=em(E.location,O,q);p=v();let J=Wb(D,p),z=E.createHref(D);f.replaceState(J,"",z),d&&g&&g({action:h,location:E.location,delta:0})}function _(O){return JS(O)}let E={get action(){return h},get location(){return e(c,f)},listen(O){if(g)throw new Error("A history only accepts one active listener");return c.addEventListener(Jb,x),g=O,()=>{c.removeEventListener(Jb,x),g=null}},createHref(O){return a(c,O)},createURL:_,encodeLocation(O){let q=_(O);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:S,replace:$,go(O){return f.go(O)}};return E}function JS(e,a=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),tn(s,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:Xi(e);return i=i.replace(/ $/,"%20"),!a&&i.startsWith("//")&&(i=s+i),new URL(i,s)}function zv(e,a,s="/"){return WS(e,a,s,!1)}function WS(e,a,s,i){let c=typeof a=="string"?Hl(a):a,d=Ts(c.pathname||"/",s);if(d==null)return null;let f=kv(e);ej(f);let h=null;for(let g=0;h==null&&g<f.length;++g){let p=dj(d);h=cj(f[g],p,i)}return h}function kv(e,a=[],s=[],i="",c=!1){let d=(f,h,g=c,p)=>{let v={relativePath:p===void 0?f.path||"":p,caseSensitive:f.caseSensitive===!0,childrenIndex:h,route:f};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(i)&&g)return;tn(v.relativePath.startsWith(i),`Absolute route path "${v.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(i.length)}let x=Rs([i,v.relativePath]),S=s.concat(v);f.children&&f.children.length>0&&(tn(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),kv(f.children,a,S,x,g)),!(f.path==null&&!f.index)&&a.push({path:x,score:ij(x,f.index),routesMeta:S})};return e.forEach((f,h)=>{if(f.path===""||!f.path?.includes("?"))d(f,h);else for(let g of Mv(f.path))d(f,h,!0,g)}),a}function Mv(e){let a=e.split("/");if(a.length===0)return[];let[s,...i]=a,c=s.endsWith("?"),d=s.replace(/\?$/,"");if(i.length===0)return c?[d,""]:[d];let f=Mv(i.join("/")),h=[];return h.push(...f.map(g=>g===""?d:[d,g].join("/"))),c&&h.push(...f),h.map(g=>e.startsWith("/")&&g===""?"/":g)}function ej(e){e.sort((a,s)=>a.score!==s.score?s.score-a.score:oj(a.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}var tj=/^:[\w-]+$/,nj=3,aj=2,sj=1,rj=10,lj=-2,ey=e=>e==="*";function ij(e,a){let s=e.split("/"),i=s.length;return s.some(ey)&&(i+=lj),a&&(i+=aj),s.filter(c=>!ey(c)).reduce((c,d)=>c+(tj.test(d)?nj:d===""?sj:rj),i)}function oj(e,a){return e.length===a.length&&e.slice(0,-1).every((i,c)=>i===a[c])?e[e.length-1]-a[a.length-1]:0}function cj(e,a,s=!1){let{routesMeta:i}=e,c={},d="/",f=[];for(let h=0;h<i.length;++h){let g=i[h],p=h===i.length-1,v=d==="/"?a:a.slice(d.length)||"/",x=Ji({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},v),S=g.route;if(!x&&p&&s&&!i[i.length-1].route.index&&(x=Ji({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!x)return null;Object.assign(c,x.params),f.push({params:c,pathname:Rs([d,x.pathname]),pathnameBase:pj(Rs([d,x.pathnameBase])),route:S}),x.pathnameBase!=="/"&&(d=Rs([d,x.pathnameBase]))}return f}function Ji(e,a){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,i]=uj(e.path,e.caseSensitive,e.end),c=a.match(s);if(!c)return null;let d=c[0],f=d.replace(/(.)\/+$/,"$1"),h=c.slice(1);return{params:i.reduce((p,{paramName:v,isOptional:x},S)=>{if(v==="*"){let _=h[S]||"";f=d.slice(0,d.length-_.length).replace(/(.)\/+$/,"$1")}const $=h[S];return x&&!$?p[v]=void 0:p[v]=($||"").replace(/%2F/g,"/"),p},{}),pathname:d,pathnameBase:f,pattern:e}}function uj(e,a=!1,s=!0){Za(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,h,g)=>(i.push({paramName:h,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),i]}function dj(e){try{return e.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Za(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),e}}function Ts(e,a){if(a==="/")return e;if(!e.toLowerCase().startsWith(a.toLowerCase()))return null;let s=a.endsWith("/")?a.length-1:a.length,i=e.charAt(s);return i&&i!=="/"?null:e.slice(s)||"/"}function fj(e,a="/"){let{pathname:s,search:i="",hash:c=""}=typeof e=="string"?Hl(e):e;return{pathname:s?s.startsWith("/")?s:mj(s,a):a,search:gj(i),hash:bj(c)}}function mj(e,a){let s=a.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function jf(e,a,s,i){return`Cannot include a '${e}' character in a manually specified \`to.${a}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hj(e){return e.filter((a,s)=>s===0||a.route.path&&a.route.path.length>0)}function Dm(e){let a=hj(e);return a.map((s,i)=>i===a.length-1?s.pathname:s.pathnameBase)}function zm(e,a,s,i=!1){let c;typeof e=="string"?c=Hl(e):(c={...e},tn(!c.pathname||!c.pathname.includes("?"),jf("?","pathname","search",c)),tn(!c.pathname||!c.pathname.includes("#"),jf("#","pathname","hash",c)),tn(!c.search||!c.search.includes("#"),jf("#","search","hash",c)));let d=e===""||c.pathname==="",f=d?"/":c.pathname,h;if(f==null)h=s;else{let x=a.length-1;if(!i&&f.startsWith("..")){let S=f.split("/");for(;S[0]==="..";)S.shift(),x-=1;c.pathname=S.join("/")}h=x>=0?a[x]:"/"}let g=fj(c,h),p=f&&f!=="/"&&f.endsWith("/"),v=(d||f===".")&&s.endsWith("/");return!g.pathname.endsWith("/")&&(p||v)&&(g.pathname+="/"),g}var Rs=e=>e.join("/").replace(/\/\/+/g,"/"),pj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,bj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function yj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Uv=["POST","PUT","PATCH","DELETE"];new Set(Uv);var vj=["GET",...Uv];new Set(vj);var Vl=b.createContext(null);Vl.displayName="DataRouter";var Kc=b.createContext(null);Kc.displayName="DataRouterState";b.createContext(!1);var Lv=b.createContext({isTransitioning:!1});Lv.displayName="ViewTransition";var xj=b.createContext(new Map);xj.displayName="Fetchers";var Nj=b.createContext(null);Nj.displayName="Await";var Ga=b.createContext(null);Ga.displayName="Navigation";var ro=b.createContext(null);ro.displayName="Location";var Pa=b.createContext({outlet:null,matches:[],isDataRoute:!1});Pa.displayName="Route";var km=b.createContext(null);km.displayName="RouteError";function Sj(e,{relative:a}={}){tn(Zl(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:i}=b.useContext(Ga),{hash:c,pathname:d,search:f}=lo(e,{relative:a}),h=d;return s!=="/"&&(h=d==="/"?s:Rs([s,d])),i.createHref({pathname:h,search:f,hash:c})}function Zl(){return b.useContext(ro)!=null}function oa(){return tn(Zl(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(ro).location}var Bv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qv(e){b.useContext(Ga).static||b.useLayoutEffect(e)}function Pr(){let{isDataRoute:e}=b.useContext(Pa);return e?Bj():jj()}function jj(){tn(Zl(),"useNavigate() may be used only in the context of a <Router> component.");let e=b.useContext(Vl),{basename:a,navigator:s}=b.useContext(Ga),{matches:i}=b.useContext(Pa),{pathname:c}=oa(),d=JSON.stringify(Dm(i)),f=b.useRef(!1);return qv(()=>{f.current=!0}),b.useCallback((g,p={})=>{if(Za(f.current,Bv),!f.current)return;if(typeof g=="number"){s.go(g);return}let v=zm(g,JSON.parse(d),c,p.relative==="path");e==null&&a!=="/"&&(v.pathname=v.pathname==="/"?a:Rs([a,v.pathname])),(p.replace?s.replace:s.push)(v,p.state,p)},[a,s,d,c,e])}var wj=b.createContext(null);function _j(e){let a=b.useContext(Pa).outlet;return b.useMemo(()=>a&&b.createElement(wj.Provider,{value:e},a),[a,e])}function Ej(){let{matches:e}=b.useContext(Pa),a=e[e.length-1];return a?a.params:{}}function lo(e,{relative:a}={}){let{matches:s}=b.useContext(Pa),{pathname:i}=oa(),c=JSON.stringify(Dm(s));return b.useMemo(()=>zm(e,JSON.parse(c),i,a==="path"),[e,c,i,a])}function Cj(e,a){return $v(e,a)}function $v(e,a,s,i,c){tn(Zl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=b.useContext(Ga),{matches:f}=b.useContext(Pa),h=f[f.length-1],g=h?h.params:{},p=h?h.pathname:"/",v=h?h.pathnameBase:"/",x=h&&h.route;{let D=x&&x.path||"";Iv(p,!x||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let S=oa(),$;if(a){let D=typeof a=="string"?Hl(a):a;tn(v==="/"||D.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${D.pathname}" was given in the \`location\` prop.`),$=D}else $=S;let _=$.pathname||"/",E=_;if(v!=="/"){let D=v.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(D.length).join("/")}let O=zv(e,{pathname:E});Za(x||O!=null,`No routes matched location "${$.pathname}${$.search}${$.hash}" `),Za(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${$.pathname}${$.search}${$.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=Dj(O&&O.map(D=>Object.assign({},D,{params:Object.assign({},g,D.params),pathname:Rs([v,d.encodeLocation?d.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?v:Rs([v,d.encodeLocation?d.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),f,s,i,c);return a&&q?b.createElement(ro.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...$},navigationType:"POP"}},q):q}function Aj(){let e=Lj(),a=yj(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:i},d={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",e),f=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:d},"ErrorBoundary")," or"," ",b.createElement("code",{style:d},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},a),s?b.createElement("pre",{style:c},s):null,f)}var Oj=b.createElement(Aj,null),Rj=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,a){return a.location!==e.location||a.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:a.error,location:a.location,revalidation:e.revalidation||a.revalidation}}componentDidCatch(e,a){this.props.unstable_onError?this.props.unstable_onError(e,a):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?b.createElement(Pa.Provider,{value:this.props.routeContext},b.createElement(km.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Tj({routeContext:e,match:a,children:s}){let i=b.useContext(Vl);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),b.createElement(Pa.Provider,{value:e},s)}function Dj(e,a=[],s=null,i=null,c=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(a.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let d=e,f=s?.errors;if(f!=null){let p=d.findIndex(v=>v.route.id&&f?.[v.route.id]!==void 0);tn(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),d=d.slice(0,Math.min(d.length,p+1))}let h=!1,g=-1;if(s)for(let p=0;p<d.length;p++){let v=d[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=p),v.route.id){let{loaderData:x,errors:S}=s,$=v.route.loader&&!x.hasOwnProperty(v.route.id)&&(!S||S[v.route.id]===void 0);if(v.route.lazy||$){h=!0,g>=0?d=d.slice(0,g+1):d=[d[0]];break}}}return d.reduceRight((p,v,x)=>{let S,$=!1,_=null,E=null;s&&(S=f&&v.route.id?f[v.route.id]:void 0,_=v.route.errorElement||Oj,h&&(g<0&&x===0?(Iv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),$=!0,E=null):g===x&&($=!0,E=v.route.hydrateFallbackElement||null)));let O=a.concat(d.slice(0,x+1)),q=()=>{let D;return S?D=_:$?D=E:v.route.Component?D=b.createElement(v.route.Component,null):v.route.element?D=v.route.element:D=p,b.createElement(Tj,{match:v,routeContext:{outlet:p,matches:O,isDataRoute:s!=null},children:D})};return s&&(v.route.ErrorBoundary||v.route.errorElement||x===0)?b.createElement(Rj,{location:s.location,revalidation:s.revalidation,component:_,error:S,children:q(),routeContext:{outlet:null,matches:O,isDataRoute:!0},unstable_onError:i}):q()},null)}function Mm(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zj(e){let a=b.useContext(Vl);return tn(a,Mm(e)),a}function kj(e){let a=b.useContext(Kc);return tn(a,Mm(e)),a}function Mj(e){let a=b.useContext(Pa);return tn(a,Mm(e)),a}function Um(e){let a=Mj(e),s=a.matches[a.matches.length-1];return tn(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function Uj(){return Um("useRouteId")}function Lj(){let e=b.useContext(km),a=kj("useRouteError"),s=Um("useRouteError");return e!==void 0?e:a.errors?.[s]}function Bj(){let{router:e}=zj("useNavigate"),a=Um("useNavigate"),s=b.useRef(!1);return qv(()=>{s.current=!0}),b.useCallback(async(c,d={})=>{Za(s.current,Bv),s.current&&(typeof c=="number"?e.navigate(c):await e.navigate(c,{fromRouteId:a,...d}))},[e,a])}var ty={};function Iv(e,a,s){!a&&!ty[e]&&(ty[e]=!0,Za(!1,s))}b.memo(qj);function qj({routes:e,future:a,state:s,unstable_onError:i}){return $v(e,void 0,s,i,a)}function or({to:e,replace:a,state:s,relative:i}){tn(Zl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=b.useContext(Ga);Za(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=b.useContext(Pa),{pathname:f}=oa(),h=Pr(),g=zm(e,Dm(d),f,i==="path"),p=JSON.stringify(g);return b.useEffect(()=>{h(JSON.parse(p),{replace:a,state:s,relative:i})},[h,p,i,a,s]),null}function Fv(e){return _j(e.context)}function ln(e){tn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $j({basename:e="/",children:a=null,location:s,navigationType:i="POP",navigator:c,static:d=!1}){tn(!Zl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),h=b.useMemo(()=>({basename:f,navigator:c,static:d,future:{}}),[f,c,d]);typeof s=="string"&&(s=Hl(s));let{pathname:g="/",search:p="",hash:v="",state:x=null,key:S="default"}=s,$=b.useMemo(()=>{let _=Ts(g,f);return _==null?null:{location:{pathname:_,search:p,hash:v,state:x,key:S},navigationType:i}},[f,g,p,v,x,S,i]);return Za($!=null,`<Router basename="${f}"> is not able to match the URL "${g}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),$==null?null:b.createElement(Ga.Provider,{value:h},b.createElement(ro.Provider,{children:a,value:$}))}function Ij({children:e,location:a}){return Cj(tm(e),a)}function tm(e,a=[]){let s=[];return b.Children.forEach(e,(i,c)=>{if(!b.isValidElement(i))return;let d=[...a,c];if(i.type===b.Fragment){s.push.apply(s,tm(i.props.children,d));return}tn(i.type===ln,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),tn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||d.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=tm(i.props.children,d)),s.push(f)}),s}var Oc="get",Rc="application/x-www-form-urlencoded";function Xc(e){return e!=null&&typeof e.tagName=="string"}function Fj(e){return Xc(e)&&e.tagName.toLowerCase()==="button"}function Hj(e){return Xc(e)&&e.tagName.toLowerCase()==="form"}function Vj(e){return Xc(e)&&e.tagName.toLowerCase()==="input"}function Zj(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Gj(e,a){return e.button===0&&(!a||a==="_self")&&!Zj(e)}function nm(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((a,s)=>{let i=e[s];return a.concat(Array.isArray(i)?i.map(c=>[s,c]):[[s,i]])},[]))}function Pj(e,a){let s=nm(e);return a&&a.forEach((i,c)=>{s.has(c)||a.getAll(c).forEach(d=>{s.append(c,d)})}),s}var xc=null;function Qj(){if(xc===null)try{new FormData(document.createElement("form"),0),xc=!1}catch{xc=!0}return xc}var Yj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wf(e){return e!=null&&!Yj.has(e)?(Za(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rc}"`),null):e}function Kj(e,a){let s,i,c,d,f;if(Hj(e)){let h=e.getAttribute("action");i=h?Ts(h,a):null,s=e.getAttribute("method")||Oc,c=wf(e.getAttribute("enctype"))||Rc,d=new FormData(e)}else if(Fj(e)||Vj(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=e.getAttribute("formaction")||h.getAttribute("action");if(i=g?Ts(g,a):null,s=e.getAttribute("formmethod")||h.getAttribute("method")||Oc,c=wf(e.getAttribute("formenctype"))||wf(h.getAttribute("enctype"))||Rc,d=new FormData(h,e),!Qj()){let{name:p,type:v,value:x}=e;if(v==="image"){let S=p?`${p}.`:"";d.append(`${S}x`,"0"),d.append(`${S}y`,"0")}else p&&d.append(p,x)}}else{if(Xc(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Oc,i=null,c=Rc,f=e}return d&&c==="text/plain"&&(f=d,d=void 0),{action:i,method:s.toLowerCase(),encType:c,formData:d,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Lm(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function Xj(e,a,s){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${s}`:a&&Ts(i.pathname,a)==="/"?i.pathname=`${a.replace(/\/$/,"")}/_root.${s}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${s}`,i}async function Jj(e,a){if(e.id in a)return a[e.id];try{let s=await import(e.module);return a[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Wj(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function ew(e,a,s){let i=await Promise.all(e.map(async c=>{let d=a.routes[c.route.id];if(d){let f=await Jj(d,s);return f.links?f.links():[]}return[]}));return sw(i.flat(1).filter(Wj).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function ny(e,a,s,i,c,d){let f=(g,p)=>s[p]?g.route.id!==s[p].route.id:!0,h=(g,p)=>s[p].pathname!==g.pathname||s[p].route.path?.endsWith("*")&&s[p].params["*"]!==g.params["*"];return d==="assets"?a.filter((g,p)=>f(g,p)||h(g,p)):d==="data"?a.filter((g,p)=>{let v=i.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(f(g,p)||h(g,p))return!0;if(g.route.shouldRevalidate){let x=g.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function tw(e,a,{includeHydrateFallback:s}={}){return nw(e.map(i=>{let c=a.routes[i.route.id];if(!c)return[];let d=[c.module];return c.clientActionModule&&(d=d.concat(c.clientActionModule)),c.clientLoaderModule&&(d=d.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(d=d.concat(c.hydrateFallbackModule)),c.imports&&(d=d.concat(c.imports)),d}).flat(1))}function nw(e){return[...new Set(e)]}function aw(e){let a={},s=Object.keys(e).sort();for(let i of s)a[i]=e[i];return a}function sw(e,a){let s=new Set;return new Set(a),e.reduce((i,c)=>{let d=JSON.stringify(aw(c));return s.has(d)||(s.add(d),i.push({key:d,link:c})),i},[])}function Hv(){let e=b.useContext(Vl);return Lm(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function rw(){let e=b.useContext(Kc);return Lm(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Bm=b.createContext(void 0);Bm.displayName="FrameworkContext";function Vv(){let e=b.useContext(Bm);return Lm(e,"You must render this element inside a <HydratedRouter> element"),e}function lw(e,a){let s=b.useContext(Bm),[i,c]=b.useState(!1),[d,f]=b.useState(!1),{onFocus:h,onBlur:g,onMouseEnter:p,onMouseLeave:v,onTouchStart:x}=a,S=b.useRef(null);b.useEffect(()=>{if(e==="render"&&f(!0),e==="viewport"){let E=q=>{q.forEach(D=>{f(D.isIntersecting)})},O=new IntersectionObserver(E,{threshold:.5});return S.current&&O.observe(S.current),()=>{O.disconnect()}}},[e]),b.useEffect(()=>{if(i){let E=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(E)}}},[i]);let $=()=>{c(!0)},_=()=>{c(!1),f(!1)};return s?e!=="intent"?[d,S,{}]:[d,S,{onFocus:Ii(h,$),onBlur:Ii(g,_),onMouseEnter:Ii(p,$),onMouseLeave:Ii(v,_),onTouchStart:Ii(x,$)}]:[!1,S,{}]}function Ii(e,a){return s=>{e&&e(s),s.defaultPrevented||a(s)}}function iw({page:e,...a}){let{router:s}=Hv(),i=b.useMemo(()=>zv(s.routes,e,s.basename),[s.routes,e,s.basename]);return i?b.createElement(cw,{page:e,matches:i,...a}):null}function ow(e){let{manifest:a,routeModules:s}=Vv(),[i,c]=b.useState([]);return b.useEffect(()=>{let d=!1;return ew(e,a,s).then(f=>{d||c(f)}),()=>{d=!0}},[e,a,s]),i}function cw({page:e,matches:a,...s}){let i=oa(),{manifest:c,routeModules:d}=Vv(),{basename:f}=Hv(),{loaderData:h,matches:g}=rw(),p=b.useMemo(()=>ny(e,a,g,c,i,"data"),[e,a,g,c,i]),v=b.useMemo(()=>ny(e,a,g,c,i,"assets"),[e,a,g,c,i]),x=b.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let _=new Set,E=!1;if(a.forEach(q=>{let D=c.routes[q.route.id];!D||!D.hasLoader||(!p.some(J=>J.route.id===q.route.id)&&q.route.id in h&&d[q.route.id]?.shouldRevalidate||D.hasClientLoader?E=!0:_.add(q.route.id))}),_.size===0)return[];let O=Xj(e,f,"data");return E&&_.size>0&&O.searchParams.set("_routes",a.filter(q=>_.has(q.route.id)).map(q=>q.route.id).join(",")),[O.pathname+O.search]},[f,h,i,c,p,a,e,d]),S=b.useMemo(()=>tw(v,c),[v,c]),$=ow(v);return b.createElement(b.Fragment,null,x.map(_=>b.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...s})),S.map(_=>b.createElement("link",{key:_,rel:"modulepreload",href:_,...s})),$.map(({key:_,link:E})=>b.createElement("link",{key:_,nonce:s.nonce,...E})))}function uw(...e){return a=>{e.forEach(s=>{typeof s=="function"?s(a):s!=null&&(s.current=a)})}}var Zv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Zv&&(window.__reactRouterVersion="7.9.5")}catch{}function dw({basename:e,children:a,window:s}){let i=b.useRef();i.current==null&&(i.current=YS({window:s,v5Compat:!0}));let c=i.current,[d,f]=b.useState({action:c.action,location:c.location}),h=b.useCallback(g=>{b.startTransition(()=>f(g))},[f]);return b.useLayoutEffect(()=>c.listen(h),[c,h]),b.createElement($j,{basename:e,children:a,location:d.location,navigationType:d.action,navigator:c})}var Gv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kc=b.forwardRef(function({onClick:a,discover:s="render",prefetch:i="none",relative:c,reloadDocument:d,replace:f,state:h,target:g,to:p,preventScrollReset:v,viewTransition:x,...S},$){let{basename:_}=b.useContext(Ga),E=typeof p=="string"&&Gv.test(p),O,q=!1;if(typeof p=="string"&&E&&(O=p,Zv))try{let de=new URL(window.location.href),Ae=p.startsWith("//")?new URL(de.protocol+p):new URL(p),je=Ts(Ae.pathname,_);Ae.origin===de.origin&&je!=null?p=je+Ae.search+Ae.hash:q=!0}catch{Za(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=Sj(p,{relative:c}),[J,z,T]=lw(i,S),G=hw(p,{replace:f,state:h,target:g,preventScrollReset:v,relative:c,viewTransition:x});function L(de){a&&a(de),de.defaultPrevented||G(de)}let W=b.createElement("a",{...S,...T,href:O||D,onClick:q||d?a:L,ref:uw($,z),target:g,"data-discover":!E&&s==="render"?"true":void 0});return J&&!E?b.createElement(b.Fragment,null,W,b.createElement(iw,{page:D})):W});kc.displayName="Link";var Pv=b.forwardRef(function({"aria-current":a="page",caseSensitive:s=!1,className:i="",end:c=!1,style:d,to:f,viewTransition:h,children:g,...p},v){let x=lo(f,{relative:p.relative}),S=oa(),$=b.useContext(Kc),{navigator:_,basename:E}=b.useContext(Ga),O=$!=null&&vw(x)&&h===!0,q=_.encodeLocation?_.encodeLocation(x).pathname:x.pathname,D=S.pathname,J=$&&$.navigation&&$.navigation.location?$.navigation.location.pathname:null;s||(D=D.toLowerCase(),J=J?J.toLowerCase():null,q=q.toLowerCase()),J&&E&&(J=Ts(J,E)||J);const z=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let T=D===q||!c&&D.startsWith(q)&&D.charAt(z)==="/",G=J!=null&&(J===q||!c&&J.startsWith(q)&&J.charAt(q.length)==="/"),L={isActive:T,isPending:G,isTransitioning:O},W=T?a:void 0,de;typeof i=="function"?de=i(L):de=[i,T?"active":null,G?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let Ae=typeof d=="function"?d(L):d;return b.createElement(kc,{...p,"aria-current":W,className:de,ref:v,style:Ae,to:f,viewTransition:h},typeof g=="function"?g(L):g)});Pv.displayName="NavLink";var fw=b.forwardRef(({discover:e="render",fetcherKey:a,navigate:s,reloadDocument:i,replace:c,state:d,method:f=Oc,action:h,onSubmit:g,relative:p,preventScrollReset:v,viewTransition:x,...S},$)=>{let _=bw(),E=yw(h,{relative:p}),O=f.toLowerCase()==="get"?"get":"post",q=typeof h=="string"&&Gv.test(h),D=J=>{if(g&&g(J),J.defaultPrevented)return;J.preventDefault();let z=J.nativeEvent.submitter,T=z?.getAttribute("formmethod")||f;_(z||J.currentTarget,{fetcherKey:a,method:T,navigate:s,replace:c,state:d,relative:p,preventScrollReset:v,viewTransition:x})};return b.createElement("form",{ref:$,method:O,action:E,onSubmit:i?g:D,...S,"data-discover":!q&&e==="render"?"true":void 0})});fw.displayName="Form";function mw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qv(e){let a=b.useContext(Vl);return tn(a,mw(e)),a}function hw(e,{target:a,replace:s,state:i,preventScrollReset:c,relative:d,viewTransition:f}={}){let h=Pr(),g=oa(),p=lo(e,{relative:d});return b.useCallback(v=>{if(Gj(v,a)){v.preventDefault();let x=s!==void 0?s:Xi(g)===Xi(p);h(e,{replace:x,state:i,preventScrollReset:c,relative:d,viewTransition:f})}},[g,h,p,s,i,a,e,c,d,f])}function Yv(e){Za(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=b.useRef(nm(e)),s=b.useRef(!1),i=oa(),c=b.useMemo(()=>Pj(i.search,s.current?null:a.current),[i.search]),d=Pr(),f=b.useCallback((h,g)=>{const p=nm(typeof h=="function"?h(new URLSearchParams(c)):h);s.current=!0,d("?"+p,g)},[d,c]);return[c,f]}var pw=0,gw=()=>`__${String(++pw)}__`;function bw(){let{router:e}=Qv("useSubmit"),{basename:a}=b.useContext(Ga),s=Uj();return b.useCallback(async(i,c={})=>{let{action:d,method:f,encType:h,formData:g,body:p}=Kj(i,a);if(c.navigate===!1){let v=c.fetcherKey||gw();await e.fetch(v,s,c.action||d,{preventScrollReset:c.preventScrollReset,formData:g,body:p,formMethod:c.method||f,formEncType:c.encType||h,flushSync:c.flushSync})}else await e.navigate(c.action||d,{preventScrollReset:c.preventScrollReset,formData:g,body:p,formMethod:c.method||f,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:s,flushSync:c.flushSync,viewTransition:c.viewTransition})},[e,a,s])}function yw(e,{relative:a}={}){let{basename:s}=b.useContext(Ga),i=b.useContext(Pa);tn(i,"useFormAction must be used inside a RouteContext");let[c]=i.matches.slice(-1),d={...lo(e||".",{relative:a})},f=oa();if(e==null){d.search=f.search;let h=new URLSearchParams(d.search),g=h.getAll("index");if(g.some(v=>v==="")){h.delete("index"),g.filter(x=>x).forEach(x=>h.append("index",x));let v=h.toString();d.search=v?`?${v}`:""}}return(!e||e===".")&&c.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(d.pathname=d.pathname==="/"?s:Rs([s,d.pathname])),Xi(d)}function vw(e,{relative:a}={}){let s=b.useContext(Lv);tn(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Qv("useViewTransitionState"),c=lo(e,{relative:a});if(!s.isTransitioning)return!1;let d=Ts(s.currentLocation.pathname,i)||s.currentLocation.pathname,f=Ts(s.nextLocation.pathname,i)||s.nextLocation.pathname;return Ji(c.pathname,f)!=null||Ji(c.pathname,d)!=null}var Gl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},xw={setTimeout:(e,a)=>setTimeout(e,a),clearTimeout:e=>clearTimeout(e),setInterval:(e,a)=>setInterval(e,a),clearInterval:e=>clearInterval(e)},Nw=class{#e=xw;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,a){return this.#e.setTimeout(e,a)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,a){return this.#e.setInterval(e,a)}clearInterval(e){this.#e.clearInterval(e)}},Ur=new Nw;function Sw(e){setTimeout(e,0)}var $r=typeof window>"u"||"Deno"in globalThis;function ia(){}function jw(e,a){return typeof e=="function"?e(a):e}function am(e){return typeof e=="number"&&e>=0&&e!==1/0}function Kv(e,a){return Math.max(e+(a||0)-Date.now(),0)}function cr(e,a){return typeof e=="function"?e(a):e}function Fa(e,a){return typeof e=="function"?e(a):e}function ay(e,a){const{type:s="all",exact:i,fetchStatus:c,predicate:d,queryKey:f,stale:h}=e;if(f){if(i){if(a.queryHash!==qm(f,a.options))return!1}else if(!Wi(a.queryKey,f))return!1}if(s!=="all"){const g=a.isActive();if(s==="active"&&!g||s==="inactive"&&g)return!1}return!(typeof h=="boolean"&&a.isStale()!==h||c&&c!==a.state.fetchStatus||d&&!d(a))}function sy(e,a){const{exact:s,status:i,predicate:c,mutationKey:d}=e;if(d){if(!a.options.mutationKey)return!1;if(s){if(Ir(a.options.mutationKey)!==Ir(d))return!1}else if(!Wi(a.options.mutationKey,d))return!1}return!(i&&a.state.status!==i||c&&!c(a))}function qm(e,a){return(a?.queryKeyHashFn||Ir)(e)}function Ir(e){return JSON.stringify(e,(a,s)=>sm(s)?Object.keys(s).sort().reduce((i,c)=>(i[c]=s[c],i),{}):s)}function Wi(e,a){return e===a?!0:typeof e!=typeof a?!1:e&&a&&typeof e=="object"&&typeof a=="object"?Object.keys(a).every(s=>Wi(e[s],a[s])):!1}var ww=Object.prototype.hasOwnProperty;function Xv(e,a){if(e===a)return e;const s=ry(e)&&ry(a);if(!s&&!(sm(e)&&sm(a)))return a;const c=(s?e:Object.keys(e)).length,d=s?a:Object.keys(a),f=d.length,h=s?new Array(f):{};let g=0;for(let p=0;p<f;p++){const v=s?p:d[p],x=e[v],S=a[v];if(x===S){h[v]=x,(s?p<c:ww.call(e,v))&&g++;continue}if(x===null||S===null||typeof x!="object"||typeof S!="object"){h[v]=S;continue}const $=Xv(x,S);h[v]=$,$===x&&g++}return c===f&&g===c?e:h}function Mc(e,a){if(!a||Object.keys(e).length!==Object.keys(a).length)return!1;for(const s in e)if(e[s]!==a[s])return!1;return!0}function ry(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function sm(e){if(!ly(e))return!1;const a=e.constructor;if(a===void 0)return!0;const s=a.prototype;return!(!ly(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ly(e){return Object.prototype.toString.call(e)==="[object Object]"}function _w(e){return new Promise(a=>{Ur.setTimeout(a,e)})}function rm(e,a,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,a):s.structuralSharing!==!1?Xv(e,a):a}function Ew(e,a,s=0){const i=[...e,a];return s&&i.length>s?i.slice(1):i}function Cw(e,a,s=0){const i=[a,...e];return s&&i.length>s?i.slice(0,-1):i}var $m=Symbol();function Jv(e,a){return!e.queryFn&&a?.initialPromise?()=>a.initialPromise:!e.queryFn||e.queryFn===$m?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Wv(e,a){return typeof e=="function"?e(...a):!!e}var Aw=class extends Gl{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!$r&&window.addEventListener){const a=()=>e();return window.addEventListener("visibilitychange",a,!1),()=>{window.removeEventListener("visibilitychange",a)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(a=>{a(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Im=new Aw;function lm(){let e,a;const s=new Promise((c,d)=>{e=c,a=d});s.status="pending",s.catch(()=>{});function i(c){Object.assign(s,c),delete s.resolve,delete s.reject}return s.resolve=c=>{i({status:"fulfilled",value:c}),e(c)},s.reject=c=>{i({status:"rejected",reason:c}),a(c)},s}var Ow=Sw;function Rw(){let e=[],a=0,s=h=>{h()},i=h=>{h()},c=Ow;const d=h=>{a?e.push(h):c(()=>{s(h)})},f=()=>{const h=e;e=[],h.length&&c(()=>{i(()=>{h.forEach(g=>{s(g)})})})};return{batch:h=>{let g;a++;try{g=h()}finally{a--,a||f()}return g},batchCalls:h=>(...g)=>{d(()=>{h(...g)})},schedule:d,setNotifyFunction:h=>{s=h},setBatchNotifyFunction:h=>{i=h},setScheduler:h=>{c=h}}}var Un=Rw(),Tw=class extends Gl{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!$r&&window.addEventListener){const a=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",a,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#e}},Uc=new Tw;function Dw(e){return Math.min(1e3*2**e,3e4)}function ex(e){return(e??"online")==="online"?Uc.isOnline():!0}var im=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function tx(e){let a=!1,s=0,i;const c=lm(),d=()=>c.status!=="pending",f=E=>{if(!d()){const O=new im(E);S(O),e.onCancel?.(O)}},h=()=>{a=!0},g=()=>{a=!1},p=()=>Im.isFocused()&&(e.networkMode==="always"||Uc.isOnline())&&e.canRun(),v=()=>ex(e.networkMode)&&e.canRun(),x=E=>{d()||(i?.(),c.resolve(E))},S=E=>{d()||(i?.(),c.reject(E))},$=()=>new Promise(E=>{i=O=>{(d()||p())&&E(O)},e.onPause?.()}).then(()=>{i=void 0,d()||e.onContinue?.()}),_=()=>{if(d())return;let E;const O=s===0?e.initialPromise:void 0;try{E=O??e.fn()}catch(q){E=Promise.reject(q)}Promise.resolve(E).then(x).catch(q=>{if(d())return;const D=e.retry??($r?0:3),J=e.retryDelay??Dw,z=typeof J=="function"?J(s,q):J,T=D===!0||typeof D=="number"&&s<D||typeof D=="function"&&D(s,q);if(a||!T){S(q);return}s++,e.onFail?.(s,q),_w(z).then(()=>p()?void 0:$()).then(()=>{a?S(q):_()})})};return{promise:c,status:()=>c.status,cancel:f,continue:()=>(i?.(),c),cancelRetry:h,continueRetry:g,canStart:v,start:()=>(v()?_():$().then(_),c)}}var nx=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),am(this.gcTime)&&(this.#e=Ur.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??($r?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ur.clearTimeout(this.#e),this.#e=void 0)}},zw=class extends nx{#e;#t;#n;#s;#a;#l;#i;constructor(e){super(),this.#i=!1,this.#l=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=oy(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(e){if(this.options={...this.#l,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const a=oy(this.options);a.data!==void 0&&(this.setState(iy(a.data,a.dataUpdatedAt)),this.#e=a)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,a){const s=rm(this.state.data,e,this.options);return this.#r({data:s,type:"success",dataUpdatedAt:a?.updatedAt,manual:a?.manual}),s}setState(e,a){this.#r({type:"setState",state:e,setStateOptions:a})}cancel(e){const a=this.#a?.promise;return this.#a?.cancel(e),a?a.then(ia).catch(ia):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Fa(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$m||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>cr(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Kv(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(a=>a.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(a=>a.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(a=>a!==e),this.observers.length||(this.#a&&(this.#i?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}async fetch(e,a){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&a?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(g=>g.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(this.#i=!0,s.signal)})},c=()=>{const h=Jv(this.options,a),p=(()=>{const v={client:this.#s,queryKey:this.queryKey,meta:this.meta};return i(v),v})();return this.#i=!1,this.options.persister?this.options.persister(h,p,this):h(p)},f=(()=>{const h={fetchOptions:a,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:c};return i(h),h})();this.options.behavior?.onFetch(f,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==f.fetchOptions?.meta)&&this.#r({type:"fetch",meta:f.fetchOptions?.meta}),this.#a=tx({initialPromise:a?.initialPromise,fn:f.fetchFn,onCancel:h=>{h instanceof im&&h.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(h,g)=>{this.#r({type:"failed",failureCount:h,error:g})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0});try{const h=await this.#a.start();if(h===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(h),this.#n.config.onSuccess?.(h,this),this.#n.config.onSettled?.(h,this.state.error,this),h}catch(h){if(h instanceof im){if(h.silent)return this.#a.promise;if(h.revert){if(this.state.data===void 0)throw h;return this.state.data}}throw this.#r({type:"error",error:h}),this.#n.config.onError?.(h,this),this.#n.config.onSettled?.(this.state.data,h,this),h}finally{this.scheduleGc()}}#r(e){const a=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...ax(s.data,this.options),fetchMeta:e.meta??null};case"success":const i={...s,...iy(e.data,e.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?i:void 0,i;case"error":const c=e.error;return{...s,error:c,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=a(this.state),Un.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function ax(e,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ex(a.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function iy(e,a){return{data:e,dataUpdatedAt:a??Date.now(),error:null,isInvalidated:!1,status:"success"}}function oy(e){const a=typeof e.initialData=="function"?e.initialData():e.initialData,s=a!==void 0,i=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:s?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var kw=class extends Gl{constructor(e,a){super(),this.options=a,this.#e=e,this.#r=null,this.#i=lm(),this.bindMethods(),this.setOptions(a)}#e;#t=void 0;#n=void 0;#s=void 0;#a;#l;#i;#r;#p;#f;#m;#c;#u;#o;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),cy(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return om(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return om(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#N(),this.#t.removeObserver(this)}setOptions(e){const a=this.options,s=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Fa(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),a._defaulted&&!Mc(this.options,a)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&uy(this.#t,s,this.options,a)&&this.#d(),this.updateResult(),i&&(this.#t!==s||Fa(this.options.enabled,this.#t)!==Fa(a.enabled,this.#t)||cr(this.options.staleTime,this.#t)!==cr(a.staleTime,this.#t))&&this.#g();const c=this.#b();i&&(this.#t!==s||Fa(this.options.enabled,this.#t)!==Fa(a.enabled,this.#t)||c!==this.#o)&&this.#y(c)}getOptimisticResult(e){const a=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(a,e);return Uw(this,s)&&(this.#s=s,this.#l=this.options,this.#a=this.#t.state),s}getCurrentResult(){return this.#s}trackResult(e,a){return new Proxy(e,{get:(s,i)=>(this.trackProp(i),a?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,i))})}trackProp(e){this.#h.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const a=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,a);return s.fetch().then(()=>this.createResult(s,a))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(e){this.#S();let a=this.#t.fetch(this.options,e);return e?.throwOnError||(a=a.catch(ia)),a}#g(){this.#x();const e=cr(this.options.staleTime,this.#t);if($r||this.#s.isStale||!am(e))return;const s=Kv(this.#s.dataUpdatedAt,e)+1;this.#c=Ur.setTimeout(()=>{this.#s.isStale||this.updateResult()},s)}#b(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#N(),this.#o=e,!($r||Fa(this.options.enabled,this.#t)===!1||!am(this.#o)||this.#o===0)&&(this.#u=Ur.setInterval(()=>{(this.options.refetchIntervalInBackground||Im.isFocused())&&this.#d()},this.#o))}#v(){this.#g(),this.#y(this.#b())}#x(){this.#c&&(Ur.clearTimeout(this.#c),this.#c=void 0)}#N(){this.#u&&(Ur.clearInterval(this.#u),this.#u=void 0)}createResult(e,a){const s=this.#t,i=this.options,c=this.#s,d=this.#a,f=this.#l,g=e!==s?e.state:this.#n,{state:p}=e;let v={...p},x=!1,S;if(a._optimisticResults){const W=this.hasListeners(),de=!W&&cy(e,a),Ae=W&&uy(e,s,a,i);(de||Ae)&&(v={...v,...ax(p.data,e.options)}),a._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:$,errorUpdatedAt:_,status:E}=v;S=v.data;let O=!1;if(a.placeholderData!==void 0&&S===void 0&&E==="pending"){let W;c?.isPlaceholderData&&a.placeholderData===f?.placeholderData?(W=c.data,O=!0):W=typeof a.placeholderData=="function"?a.placeholderData(this.#m?.state.data,this.#m):a.placeholderData,W!==void 0&&(E="success",S=rm(c?.data,W,a),x=!0)}if(a.select&&S!==void 0&&!O)if(c&&S===d?.data&&a.select===this.#p)S=this.#f;else try{this.#p=a.select,S=a.select(S),S=rm(c?.data,S,a),this.#f=S,this.#r=null}catch(W){this.#r=W}this.#r&&($=this.#r,S=this.#f,_=Date.now(),E="error");const q=v.fetchStatus==="fetching",D=E==="pending",J=E==="error",z=D&&q,T=S!==void 0,L={status:E,fetchStatus:v.fetchStatus,isPending:D,isSuccess:E==="success",isError:J,isInitialLoading:z,isLoading:z,data:S,dataUpdatedAt:v.dataUpdatedAt,error:$,errorUpdatedAt:_,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>g.dataUpdateCount||v.errorUpdateCount>g.errorUpdateCount,isFetching:q,isRefetching:q&&!D,isLoadingError:J&&!T,isPaused:v.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:J&&T,isStale:Fm(e,a),refetch:this.refetch,promise:this.#i,isEnabled:Fa(a.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const W=je=>{L.status==="error"?je.reject(L.error):L.data!==void 0&&je.resolve(L.data)},de=()=>{const je=this.#i=L.promise=lm();W(je)},Ae=this.#i;switch(Ae.status){case"pending":e.queryHash===s.queryHash&&W(Ae);break;case"fulfilled":(L.status==="error"||L.data!==Ae.value)&&de();break;case"rejected":(L.status!=="error"||L.error!==Ae.reason)&&de();break}}return L}updateResult(){const e=this.#s,a=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#l=this.options,this.#a.data!==void 0&&(this.#m=this.#t),Mc(a,e))return;this.#s=a;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,c=typeof i=="function"?i():i;if(c==="all"||!c&&!this.#h.size)return!0;const d=new Set(c??this.#h);return this.options.throwOnError&&d.add("error"),Object.keys(this.#s).some(f=>{const h=f;return this.#s[h]!==e[h]&&d.has(h)})};this.#j({listeners:s()})}#S(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const a=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(a?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#j(e){Un.batch(()=>{e.listeners&&this.listeners.forEach(a=>{a(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Mw(e,a){return Fa(a.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&a.retryOnMount===!1)}function cy(e,a){return Mw(e,a)||e.state.data!==void 0&&om(e,a,a.refetchOnMount)}function om(e,a,s){if(Fa(a.enabled,e)!==!1&&cr(a.staleTime,e)!=="static"){const i=typeof s=="function"?s(e):s;return i==="always"||i!==!1&&Fm(e,a)}return!1}function uy(e,a,s,i){return(e!==a||Fa(i.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Fm(e,s)}function Fm(e,a){return Fa(a.enabled,e)!==!1&&e.isStaleByTime(cr(a.staleTime,e))}function Uw(e,a){return!Mc(e.getCurrentResult(),a)}function dy(e){return{onFetch:(a,s)=>{const i=a.options,c=a.fetchOptions?.meta?.fetchMore?.direction,d=a.state.data?.pages||[],f=a.state.data?.pageParams||[];let h={pages:[],pageParams:[]},g=0;const p=async()=>{let v=!1;const x=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(a.signal.aborted?v=!0:a.signal.addEventListener("abort",()=>{v=!0}),a.signal)})},S=Jv(a.options,a.fetchOptions),$=async(_,E,O)=>{if(v)return Promise.reject();if(E==null&&_.pages.length)return Promise.resolve(_);const D=(()=>{const G={client:a.client,queryKey:a.queryKey,pageParam:E,direction:O?"backward":"forward",meta:a.options.meta};return x(G),G})(),J=await S(D),{maxPages:z}=a.options,T=O?Cw:Ew;return{pages:T(_.pages,J,z),pageParams:T(_.pageParams,E,z)}};if(c&&d.length){const _=c==="backward",E=_?Lw:fy,O={pages:d,pageParams:f},q=E(i,O);h=await $(O,q,_)}else{const _=e??d.length;do{const E=g===0?f[0]??i.initialPageParam:fy(i,h);if(g>0&&E==null)break;h=await $(h,E),g++}while(g<_)}return h};a.options.persister?a.fetchFn=()=>a.options.persister?.(p,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},s):a.fetchFn=p}}}function fy(e,{pages:a,pageParams:s}){const i=a.length-1;return a.length>0?e.getNextPageParam(a[i],a,s[i],s):void 0}function Lw(e,{pages:a,pageParams:s}){return a.length>0?e.getPreviousPageParam?.(a[0],a,s[0],s):void 0}var Bw=class extends nx{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||sx(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(a=>a!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const a=()=>{this.#a({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=tx({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(d,f)=>{this.#a({type:"failed",failureCount:d,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:a,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",c=!this.#s.canStart();try{if(i)a();else{this.#a({type:"pending",variables:e,isPaused:c}),await this.#n.config.onMutate?.(e,this,s);const f=await this.options.onMutate?.(e,s);f!==this.state.context&&this.#a({type:"pending",context:f,variables:e,isPaused:c})}const d=await this.#s.start();return await this.#n.config.onSuccess?.(d,e,this.state.context,this,s),await this.options.onSuccess?.(d,e,this.state.context,s),await this.#n.config.onSettled?.(d,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(d,null,e,this.state.context,s),this.#a({type:"success",data:d}),d}catch(d){try{throw await this.#n.config.onError?.(d,e,this.state.context,this,s),await this.options.onError?.(d,e,this.state.context,s),await this.#n.config.onSettled?.(void 0,d,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,d,e,this.state.context,s),d}finally{this.#a({type:"error",error:d})}}finally{this.#n.runNext(this)}}#a(e){const a=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=a(this.state),Un.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function sx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qw=class extends Gl{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,a,s){const i=new Bw({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(a),state:s});return this.add(i),i}add(e){this.#e.add(e);const a=Nc(e);if(typeof a=="string"){const s=this.#t.get(a);s?s.push(e):this.#t.set(a,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const a=Nc(e);if(typeof a=="string"){const s=this.#t.get(a);if(s)if(s.length>1){const i=s.indexOf(e);i!==-1&&s.splice(i,1)}else s[0]===e&&this.#t.delete(a)}}this.notify({type:"removed",mutation:e})}canRun(e){const a=Nc(e);if(typeof a=="string"){const i=this.#t.get(a)?.find(c=>c.state.status==="pending");return!i||i===e}else return!0}runNext(e){const a=Nc(e);return typeof a=="string"?this.#t.get(a)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Un.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const a={exact:!0,...e};return this.getAll().find(s=>sy(a,s))}findAll(e={}){return this.getAll().filter(a=>sy(e,a))}notify(e){Un.batch(()=>{this.listeners.forEach(a=>{a(e)})})}resumePausedMutations(){const e=this.getAll().filter(a=>a.state.isPaused);return Un.batch(()=>Promise.all(e.map(a=>a.continue().catch(ia))))}};function Nc(e){return e.options.scope?.id}var $w=class extends Gl{#e;#t=void 0;#n;#s;constructor(a,s){super(),this.#e=a,this.setOptions(s),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){const s=this.options;this.options=this.#e.defaultMutationOptions(a),Mc(this.options,s)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),s?.mutationKey&&this.options.mutationKey&&Ir(s.mutationKey)!==Ir(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(a){this.#a(),this.#l(a)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#a(),this.#l()}mutate(a,s){return this.#s=s,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(a)}#a(){const a=this.#n?.state??sx();this.#t={...a,isPending:a.status==="pending",isSuccess:a.status==="success",isError:a.status==="error",isIdle:a.status==="idle",mutate:this.mutate,reset:this.reset}}#l(a){Un.batch(()=>{if(this.#s&&this.hasListeners()){const s=this.#t.variables,i=this.#t.context,c={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};a?.type==="success"?(this.#s.onSuccess?.(a.data,s,i,c),this.#s.onSettled?.(a.data,null,s,i,c)):a?.type==="error"&&(this.#s.onError?.(a.error,s,i,c),this.#s.onSettled?.(void 0,a.error,s,i,c))}this.listeners.forEach(s=>{s(this.#t)})})}},Iw=class extends Gl{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,a,s){const i=a.queryKey,c=a.queryHash??qm(i,a);let d=this.get(c);return d||(d=new zw({client:e,queryKey:i,queryHash:c,options:e.defaultQueryOptions(a),state:s,defaultOptions:e.getQueryDefaults(i)}),this.add(d)),d}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const a=this.#e.get(e.queryHash);a&&(e.destroy(),a===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Un.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const a={exact:!0,...e};return this.getAll().find(s=>ay(a,s))}findAll(e={}){const a=this.getAll();return Object.keys(e).length>0?a.filter(s=>ay(e,s)):a}notify(e){Un.batch(()=>{this.listeners.forEach(a=>{a(e)})})}onFocus(){Un.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Un.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Fw=class{#e;#t;#n;#s;#a;#l;#i;#r;constructor(e={}){this.#e=e.queryCache||new Iw,this.#t=e.mutationCache||new qw,this.#n=e.defaultOptions||{},this.#s=new Map,this.#a=new Map,this.#l=0}mount(){this.#l++,this.#l===1&&(this.#i=Im.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#r=Uc.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#l--,this.#l===0&&(this.#i?.(),this.#i=void 0,this.#r?.(),this.#r=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const a=this.defaultQueryOptions({queryKey:e});return this.#e.get(a.queryHash)?.state.data}ensureQueryData(e){const a=this.defaultQueryOptions(e),s=this.#e.build(this,a),i=s.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(cr(a.staleTime,s))&&this.prefetchQuery(a),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:a,state:s})=>{const i=s.data;return[a,i]})}setQueryData(e,a,s){const i=this.defaultQueryOptions({queryKey:e}),d=this.#e.get(i.queryHash)?.state.data,f=jw(a,d);if(f!==void 0)return this.#e.build(this,i).setData(f,{...s,manual:!0})}setQueriesData(e,a,s){return Un.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,a,s)]))}getQueryState(e){const a=this.defaultQueryOptions({queryKey:e});return this.#e.get(a.queryHash)?.state}removeQueries(e){const a=this.#e;Un.batch(()=>{a.findAll(e).forEach(s=>{a.remove(s)})})}resetQueries(e,a){const s=this.#e;return Un.batch(()=>(s.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},a)))}cancelQueries(e,a={}){const s={revert:!0,...a},i=Un.batch(()=>this.#e.findAll(e).map(c=>c.cancel(s)));return Promise.all(i).then(ia).catch(ia)}invalidateQueries(e,a={}){return Un.batch(()=>(this.#e.findAll(e).forEach(s=>{s.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},a)))}refetchQueries(e,a={}){const s={...a,cancelRefetch:a.cancelRefetch??!0},i=Un.batch(()=>this.#e.findAll(e).filter(c=>!c.isDisabled()&&!c.isStatic()).map(c=>{let d=c.fetch(void 0,s);return s.throwOnError||(d=d.catch(ia)),c.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(i).then(ia)}fetchQuery(e){const a=this.defaultQueryOptions(e);a.retry===void 0&&(a.retry=!1);const s=this.#e.build(this,a);return s.isStaleByTime(cr(a.staleTime,s))?s.fetch(a):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ia).catch(ia)}fetchInfiniteQuery(e){return e.behavior=dy(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ia).catch(ia)}ensureInfiniteQueryData(e){return e.behavior=dy(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Uc.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,a){this.#s.set(Ir(e),{queryKey:e,defaultOptions:a})}getQueryDefaults(e){const a=[...this.#s.values()],s={};return a.forEach(i=>{Wi(e,i.queryKey)&&Object.assign(s,i.defaultOptions)}),s}setMutationDefaults(e,a){this.#a.set(Ir(e),{mutationKey:e,defaultOptions:a})}getMutationDefaults(e){const a=[...this.#a.values()],s={};return a.forEach(i=>{Wi(e,i.mutationKey)&&Object.assign(s,i.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const a={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return a.queryHash||(a.queryHash=qm(a.queryKey,a)),a.refetchOnReconnect===void 0&&(a.refetchOnReconnect=a.networkMode!=="always"),a.throwOnError===void 0&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===$m&&(a.enabled=!1),a}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},rx=b.createContext(void 0),Hm=e=>{const a=b.useContext(rx);if(!a)throw new Error("No QueryClient set, use QueryClientProvider to set one");return a},Hw=({client:e,children:a})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),l.jsx(rx.Provider,{value:e,children:a})),lx=b.createContext(!1),Vw=()=>b.useContext(lx);lx.Provider;function Zw(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Gw=b.createContext(Zw()),Pw=()=>b.useContext(Gw),Qw=(e,a)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(a.isReset()||(e.retryOnMount=!1))},Yw=e=>{b.useEffect(()=>{e.clearReset()},[e])},Kw=({result:e,errorResetBoundary:a,throwOnError:s,query:i,suspense:c})=>e.isError&&!a.isReset()&&!e.isFetching&&i&&(c&&e.data===void 0||Wv(s,[e.error,i])),Xw=e=>{if(e.suspense){const s=c=>c==="static"?c:Math.max(c??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...c)=>s(i(...c)):s(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Jw=(e,a)=>e.isLoading&&e.isFetching&&!a,Ww=(e,a)=>e?.suspense&&a.isPending,my=(e,a,s)=>a.fetchOptimistic(e).catch(()=>{s.clearReset()});function e_(e,a,s){const i=Vw(),c=Pw(),d=Hm(),f=d.defaultQueryOptions(e);d.getDefaultOptions().queries?._experimental_beforeQuery?.(f),f._optimisticResults=i?"isRestoring":"optimistic",Xw(f),Qw(f,c),Yw(c);const h=!d.getQueryCache().get(f.queryHash),[g]=b.useState(()=>new a(d,f)),p=g.getOptimisticResult(f),v=!i&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(x=>{const S=v?g.subscribe(Un.batchCalls(x)):ia;return g.updateResult(),S},[g,v]),()=>g.getCurrentResult(),()=>g.getCurrentResult()),b.useEffect(()=>{g.setOptions(f)},[f,g]),Ww(f,p))throw my(f,g,c);if(Kw({result:p,errorResetBoundary:c,throwOnError:f.throwOnError,query:d.getQueryCache().get(f.queryHash),suspense:f.suspense}))throw p.error;return d.getDefaultOptions().queries?._experimental_afterQuery?.(f,p),f.experimental_prefetchInRender&&!$r&&Jw(p,i)&&(h?my(f,g,c):d.getQueryCache().get(f.queryHash)?.promise)?.catch(ia).finally(()=>{g.updateResult()}),f.notifyOnChangeProps?p:g.trackResult(p)}function Fr(e,a){return e_(e,kw)}function t_(e,a){const s=Hm(),[i]=b.useState(()=>new $w(s,e));b.useEffect(()=>{i.setOptions(e)},[i,e]);const c=b.useSyncExternalStore(b.useCallback(f=>i.subscribe(Un.batchCalls(f)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),d=b.useCallback((f,h)=>{i.mutate(f,h).catch(ia)},[i]);if(c.error&&Wv(i.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:d,mutateAsync:c.mutate}}var io=e=>e.type==="checkbox",Lr=e=>e instanceof Date,pa=e=>e==null;const ix=e=>typeof e=="object";var An=e=>!pa(e)&&!Array.isArray(e)&&ix(e)&&!Lr(e),n_=e=>An(e)&&e.target?io(e.target)?e.target.checked:e.target.value:e,a_=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,s_=(e,a)=>e.has(a_(a)),r_=e=>{const a=e.constructor&&e.constructor.prototype;return An(a)&&a.hasOwnProperty("isPrototypeOf")},Vm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function en(e){let a;const s=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)a=new Date(e);else if(!(Vm&&(e instanceof Blob||i))&&(s||An(e)))if(a=s?[]:Object.create(Object.getPrototypeOf(e)),!s&&!r_(e))a=e;else for(const c in e)e.hasOwnProperty(c)&&(a[c]=en(e[c]));else return e;return a}var Jc=e=>/^\w*$/.test(e),Kt=e=>e===void 0,Wc=e=>Array.isArray(e)?e.filter(Boolean):[],Zm=e=>Wc(e.replace(/["|']|\]/g,"").split(/\.|\[/)),qe=(e,a,s)=>{if(!a||!An(e))return s;const i=(Jc(a)?[a]:Zm(a)).reduce((c,d)=>pa(c)?c:c[d],e);return Kt(i)||i===e?Kt(e[a])?s:e[a]:i},us=e=>typeof e=="boolean",Bt=(e,a,s)=>{let i=-1;const c=Jc(a)?[a]:Zm(a),d=c.length,f=d-1;for(;++i<d;){const h=c[i];let g=s;if(i!==f){const p=e[h];g=An(p)||Array.isArray(p)?p:isNaN(+c[i+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;e[h]=g,e=e[h]}};const hy={BLUR:"blur",FOCUS_OUT:"focusout"},Ha={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Os={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ox=gt.createContext(null);ox.displayName="HookFormContext";const cx=()=>gt.useContext(ox);var l_=(e,a,s,i=!0)=>{const c={defaultValues:a._defaultValues};for(const d in e)Object.defineProperty(c,d,{get:()=>{const f=d;return a._proxyFormState[f]!==Ha.all&&(a._proxyFormState[f]=!i||Ha.all),e[f]}});return c};const Gm=typeof window<"u"?gt.useLayoutEffect:gt.useEffect;var Oa=e=>typeof e=="string",cm=(e,a,s,i,c)=>Oa(e)?(i&&a.watch.add(e),qe(s,e,c)):Array.isArray(e)?e.map(d=>(i&&a.watch.add(d),qe(s,d))):(i&&(a.watchAll=!0),s),um=e=>pa(e)||!ix(e);function ts(e,a,s=new WeakSet){if(um(e)||um(a))return e===a;if(Lr(e)&&Lr(a))return e.getTime()===a.getTime();const i=Object.keys(e),c=Object.keys(a);if(i.length!==c.length)return!1;if(s.has(e)||s.has(a))return!0;s.add(e),s.add(a);for(const d of i){const f=e[d];if(!c.includes(d))return!1;if(d!=="ref"){const h=a[d];if(Lr(f)&&Lr(h)||An(f)&&An(h)||Array.isArray(f)&&Array.isArray(h)?!ts(f,h,s):f!==h)return!1}}return!0}function Fi(e){const a=cx(),{control:s=a.control,name:i,defaultValue:c,disabled:d,exact:f,compute:h}=e||{},g=gt.useRef(c),p=gt.useRef(h),v=gt.useRef(void 0),x=gt.useRef(s),S=gt.useRef(i);p.current=h;const[$,_]=gt.useState(()=>{const z=s._getWatch(i,g.current);return p.current?p.current(z):z}),E=gt.useCallback(z=>{const T=cm(i,s._names,z||s._formValues,!1,g.current);return p.current?p.current(T):T},[s._formValues,s._names,i]),O=gt.useCallback(z=>{if(!d){const T=cm(i,s._names,z||s._formValues,!1,g.current);if(p.current){const G=p.current(T);ts(G,v.current)||(_(G),v.current=G)}else _(T)}},[s._formValues,s._names,d,i]);Gm(()=>((x.current!==s||!ts(S.current,i))&&(x.current=s,S.current=i,O()),s._subscribe({name:i,formState:{values:!0},exact:f,callback:z=>{O(z.values)}})),[s,f,i,O]),gt.useEffect(()=>s._removeUnmounted());const q=x.current!==s,D=S.current,J=gt.useMemo(()=>{if(d)return null;const z=!q&&!ts(D,i);return q||z?E():null},[d,q,i,D,E]);return J!==null?J:$}var Pm=(e,a,s,i,c)=>a?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[i]:c||!0}}:{},ga=e=>Array.isArray(e)?e:[e],py=()=>{let e=[];return{get observers(){return e},next:c=>{for(const d of e)d.next&&d.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(d=>d!==c)}}),unsubscribe:()=>{e=[]}}};function ux(e,a){const s={};for(const i in e)if(e.hasOwnProperty(i)){const c=e[i],d=a[i];if(c&&An(c)&&d){const f=ux(c,d);An(f)&&(s[i]=f)}else e[i]&&(s[i]=d)}return s}var ta=e=>An(e)&&!Object.keys(e).length,Qm=e=>e.type==="file",ns=e=>typeof e=="function",Lc=e=>{if(!Vm)return!1;const a=e?e.ownerDocument:0;return e instanceof(a&&a.defaultView?a.defaultView.HTMLElement:HTMLElement)},dx=e=>e.type==="select-multiple",Ym=e=>e.type==="radio",i_=e=>Ym(e)||io(e),_f=e=>Lc(e)&&e.isConnected;function o_(e,a){const s=a.slice(0,-1).length;let i=0;for(;i<s;)e=Kt(e)?i++:e[a[i++]];return e}function c_(e){for(const a in e)if(e.hasOwnProperty(a)&&!Kt(e[a]))return!1;return!0}function xn(e,a){const s=Array.isArray(a)?a:Jc(a)?[a]:Zm(a),i=s.length===1?e:o_(e,s),c=s.length-1,d=s[c];return i&&delete i[d],c!==0&&(An(i)&&ta(i)||Array.isArray(i)&&c_(i))&&xn(e,s.slice(0,-1)),e}var u_=e=>{for(const a in e)if(ns(e[a]))return!0;return!1};function fx(e){return Array.isArray(e)||An(e)&&!u_(e)}function dm(e,a={}){for(const s in e)fx(e[s])?(a[s]=Array.isArray(e[s])?[]:{},dm(e[s],a[s])):Kt(e[s])||(a[s]=!0);return a}function Ml(e,a,s){s||(s=dm(a));for(const i in e)fx(e[i])?Kt(a)||um(s[i])?s[i]=dm(e[i],Array.isArray(e[i])?[]:{}):Ml(e[i],pa(a)?{}:a[i],s[i]):s[i]=!ts(e[i],a[i]);return s}const gy={value:!1,isValid:!1},by={value:!0,isValid:!0};var mx=e=>{if(Array.isArray(e)){if(e.length>1){const a=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:a,isValid:!!a.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Kt(e[0].attributes.value)?Kt(e[0].value)||e[0].value===""?by:{value:e[0].value,isValid:!0}:by:gy}return gy},hx=(e,{valueAsNumber:a,valueAsDate:s,setValueAs:i})=>Kt(e)?e:a?e===""?NaN:e&&+e:s&&Oa(e)?new Date(e):i?i(e):e;const yy={isValid:!1,value:null};var px=e=>Array.isArray(e)?e.reduce((a,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:a,yy):yy;function vy(e){const a=e.ref;return Qm(a)?a.files:Ym(a)?px(e.refs).value:dx(a)?[...a.selectedOptions].map(({value:s})=>s):io(a)?mx(e.refs).value:hx(Kt(a.value)?e.ref.value:a.value,e)}var d_=(e,a,s,i)=>{const c={};for(const d of e){const f=qe(a,d);f&&Bt(c,d,f._f)}return{criteriaMode:s,names:[...e],fields:c,shouldUseNativeValidation:i}},Bc=e=>e instanceof RegExp,Hi=e=>Kt(e)?e:Bc(e)?e.source:An(e)?Bc(e.value)?e.value.source:e.value:e,Ul=e=>({isOnSubmit:!e||e===Ha.onSubmit,isOnBlur:e===Ha.onBlur,isOnChange:e===Ha.onChange,isOnAll:e===Ha.all,isOnTouch:e===Ha.onTouched});const xy="AsyncFunction";var f_=e=>!!e&&!!e.validate&&!!(ns(e.validate)&&e.validate.constructor.name===xy||An(e.validate)&&Object.values(e.validate).find(a=>a.constructor.name===xy)),m_=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),fm=(e,a,s)=>!s&&(a.watchAll||a.watch.has(e)||[...a.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const Bl=(e,a,s,i)=>{for(const c of s||Object.keys(e)){const d=qe(e,c);if(d){const{_f:f,...h}=d;if(f){if(f.refs&&f.refs[0]&&a(f.refs[0],c)&&!i)return!0;if(f.ref&&a(f.ref,f.name)&&!i)return!0;if(Bl(h,a))break}else if(An(h)&&Bl(h,a))break}}};function Ny(e,a,s){const i=qe(e,s);if(i||Jc(s))return{error:i,name:s};const c=s.split(".");for(;c.length;){const d=c.join("."),f=qe(a,d),h=qe(e,d);if(f&&!Array.isArray(f)&&s!==d)return{name:s};if(h&&h.type)return{name:d,error:h};if(h&&h.root&&h.root.type)return{name:`${d}.root`,error:h.root};c.pop()}return{name:s}}var h_=(e,a,s,i)=>{s(e);const{name:c,...d}=e;return ta(d)||Object.keys(d).length>=Object.keys(a).length||Object.keys(d).find(f=>a[f]===(!i||Ha.all))},p_=(e,a,s)=>!e||!a||e===a||ga(e).some(i=>i&&(s?i===a:i.startsWith(a)||a.startsWith(i))),g_=(e,a,s,i,c)=>c.isOnAll?!1:!s&&c.isOnTouch?!(a||e):(s?i.isOnBlur:c.isOnBlur)?!e:(s?i.isOnChange:c.isOnChange)?e:!0,b_=(e,a)=>!Wc(qe(e,a)).length&&xn(e,a),gx=(e,a,s)=>{const i=ga(qe(e,s));return Bt(i,"root",a[s]),Bt(e,s,i),e};function Sy(e,a,s="validate"){if(Oa(e)||Array.isArray(e)&&e.every(Oa)||us(e)&&!e)return{type:s,message:Oa(e)?e:"",ref:a}}var Rl=e=>An(e)&&!Bc(e)?e:{value:e,message:""},mm=async(e,a,s,i,c,d)=>{const{ref:f,refs:h,required:g,maxLength:p,minLength:v,min:x,max:S,pattern:$,validate:_,name:E,valueAsNumber:O,mount:q}=e._f,D=qe(s,E);if(!q||a.has(E))return{};const J=h?h[0]:f,z=ge=>{c&&J.reportValidity&&(J.setCustomValidity(us(ge)?"":ge||""),J.reportValidity())},T={},G=Ym(f),L=io(f),W=G||L,de=(O||Qm(f))&&Kt(f.value)&&Kt(D)||Lc(f)&&f.value===""||D===""||Array.isArray(D)&&!D.length,Ae=Pm.bind(null,E,i,T),je=(ge,we,Me,Te=Os.maxLength,M=Os.minLength)=>{const I=ge?we:Me;T[E]={type:ge?Te:M,message:I,ref:f,...Ae(ge?Te:M,I)}};if(d?!Array.isArray(D)||!D.length:g&&(!W&&(de||pa(D))||us(D)&&!D||L&&!mx(h).isValid||G&&!px(h).isValid)){const{value:ge,message:we}=Oa(g)?{value:!!g,message:g}:Rl(g);if(ge&&(T[E]={type:Os.required,message:we,ref:J,...Ae(Os.required,we)},!i))return z(we),T}if(!de&&(!pa(x)||!pa(S))){let ge,we;const Me=Rl(S),Te=Rl(x);if(!pa(D)&&!isNaN(D)){const M=f.valueAsNumber||D&&+D;pa(Me.value)||(ge=M>Me.value),pa(Te.value)||(we=M<Te.value)}else{const M=f.valueAsDate||new Date(D),I=Se=>new Date(new Date().toDateString()+" "+Se),K=f.type=="time",xe=f.type=="week";Oa(Me.value)&&D&&(ge=K?I(D)>I(Me.value):xe?D>Me.value:M>new Date(Me.value)),Oa(Te.value)&&D&&(we=K?I(D)<I(Te.value):xe?D<Te.value:M<new Date(Te.value))}if((ge||we)&&(je(!!ge,Me.message,Te.message,Os.max,Os.min),!i))return z(T[E].message),T}if((p||v)&&!de&&(Oa(D)||d&&Array.isArray(D))){const ge=Rl(p),we=Rl(v),Me=!pa(ge.value)&&D.length>+ge.value,Te=!pa(we.value)&&D.length<+we.value;if((Me||Te)&&(je(Me,ge.message,we.message),!i))return z(T[E].message),T}if($&&!de&&Oa(D)){const{value:ge,message:we}=Rl($);if(Bc(ge)&&!D.match(ge)&&(T[E]={type:Os.pattern,message:we,ref:f,...Ae(Os.pattern,we)},!i))return z(we),T}if(_){if(ns(_)){const ge=await _(D,s),we=Sy(ge,J);if(we&&(T[E]={...we,...Ae(Os.validate,we.message)},!i))return z(we.message),T}else if(An(_)){let ge={};for(const we in _){if(!ta(ge)&&!i)break;const Me=Sy(await _[we](D,s),J,we);Me&&(ge={...Me,...Ae(we,Me.message)},z(Me.message),i&&(T[E]=ge))}if(!ta(ge)&&(T[E]={ref:J,...ge},!i))return T}}return z(!0),T};const y_={mode:Ha.onSubmit,reValidateMode:Ha.onChange,shouldFocusError:!0};function v_(e={}){let a={...y_,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:ns(a.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1},i={},c=An(a.defaultValues)||An(a.values)?en(a.defaultValues||a.values)||{}:{},d=a.shouldUnregister?{}:en(c),f={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},g,p=0;const v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let x={...v};const S={array:py(),state:py()},$=a.criteriaMode===Ha.all,_=A=>V=>{clearTimeout(p),p=setTimeout(A,V)},E=async A=>{if(!a.disabled&&(v.isValid||x.isValid||A)){const V=a.resolver?ta((await L()).errors):await de(i,!0);V!==s.isValid&&S.state.next({isValid:V})}},O=(A,V)=>{!a.disabled&&(v.isValidating||v.validatingFields||x.isValidating||x.validatingFields)&&((A||Array.from(h.mount)).forEach(R=>{R&&(V?Bt(s.validatingFields,R,V):xn(s.validatingFields,R))}),S.state.next({validatingFields:s.validatingFields,isValidating:!ta(s.validatingFields)}))},q=(A,V=[],R,Q,P=!0,re=!0)=>{if(Q&&R&&!a.disabled){if(f.action=!0,re&&Array.isArray(qe(i,A))){const Re=R(qe(i,A),Q.argA,Q.argB);P&&Bt(i,A,Re)}if(re&&Array.isArray(qe(s.errors,A))){const Re=R(qe(s.errors,A),Q.argA,Q.argB);P&&Bt(s.errors,A,Re),b_(s.errors,A)}if((v.touchedFields||x.touchedFields)&&re&&Array.isArray(qe(s.touchedFields,A))){const Re=R(qe(s.touchedFields,A),Q.argA,Q.argB);P&&Bt(s.touchedFields,A,Re)}(v.dirtyFields||x.dirtyFields)&&(s.dirtyFields=Ml(c,d)),S.state.next({name:A,isDirty:je(A,V),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Bt(d,A,V)},D=(A,V)=>{Bt(s.errors,A,V),S.state.next({errors:s.errors})},J=A=>{s.errors=A,S.state.next({errors:s.errors,isValid:!1})},z=(A,V,R,Q)=>{const P=qe(i,A);if(P){const re=qe(d,A,Kt(R)?qe(c,A):R);Kt(re)||Q&&Q.defaultChecked||V?Bt(d,A,V?re:vy(P._f)):Me(A,re),f.mount&&E()}},T=(A,V,R,Q,P)=>{let re=!1,Re=!1;const Be={name:A};if(!a.disabled){if(!R||Q){(v.isDirty||x.isDirty)&&(Re=s.isDirty,s.isDirty=Be.isDirty=je(),re=Re!==Be.isDirty);const se=ts(qe(c,A),V);Re=!!qe(s.dirtyFields,A),se?xn(s.dirtyFields,A):Bt(s.dirtyFields,A,!0),Be.dirtyFields=s.dirtyFields,re=re||(v.dirtyFields||x.dirtyFields)&&Re!==!se}if(R){const se=qe(s.touchedFields,A);se||(Bt(s.touchedFields,A,R),Be.touchedFields=s.touchedFields,re=re||(v.touchedFields||x.touchedFields)&&se!==R)}re&&P&&S.state.next(Be)}return re?Be:{}},G=(A,V,R,Q)=>{const P=qe(s.errors,A),re=(v.isValid||x.isValid)&&us(V)&&s.isValid!==V;if(a.delayError&&R?(g=_(()=>D(A,R)),g(a.delayError)):(clearTimeout(p),g=null,R?Bt(s.errors,A,R):xn(s.errors,A)),(R?!ts(P,R):P)||!ta(Q)||re){const Re={...Q,...re&&us(V)?{isValid:V}:{},errors:s.errors,name:A};s={...s,...Re},S.state.next(Re)}},L=async A=>{O(A,!0);const V=await a.resolver(d,a.context,d_(A||h.mount,i,a.criteriaMode,a.shouldUseNativeValidation));return O(A),V},W=async A=>{const{errors:V}=await L(A);if(A)for(const R of A){const Q=qe(V,R);Q?Bt(s.errors,R,Q):xn(s.errors,R)}else s.errors=V;return V},de=async(A,V,R={valid:!0})=>{for(const Q in A){const P=A[Q];if(P){const{_f:re,...Re}=P;if(re){const Be=h.array.has(re.name),se=P._f&&f_(P._f);se&&v.validatingFields&&O([re.name],!0);const Ue=await mm(P,h.disabled,d,$,a.shouldUseNativeValidation&&!V,Be);if(se&&v.validatingFields&&O([re.name]),Ue[re.name]&&(R.valid=!1,V))break;!V&&(qe(Ue,re.name)?Be?gx(s.errors,Ue,re.name):Bt(s.errors,re.name,Ue[re.name]):xn(s.errors,re.name))}!ta(Re)&&await de(Re,V,R)}}return R.valid},Ae=()=>{for(const A of h.unMount){const V=qe(i,A);V&&(V._f.refs?V._f.refs.every(R=>!_f(R)):!_f(V._f.ref))&&ze(A)}h.unMount=new Set},je=(A,V)=>!a.disabled&&(A&&V&&Bt(d,A,V),!ts(Se(),c)),ge=(A,V,R)=>cm(A,h,{...f.mount?d:Kt(V)?c:Oa(A)?{[A]:V}:V},R,V),we=A=>Wc(qe(f.mount?d:c,A,a.shouldUnregister?qe(c,A,[]):[])),Me=(A,V,R={})=>{const Q=qe(i,A);let P=V;if(Q){const re=Q._f;re&&(!re.disabled&&Bt(d,A,hx(V,re)),P=Lc(re.ref)&&pa(V)?"":V,dx(re.ref)?[...re.ref.options].forEach(Re=>Re.selected=P.includes(Re.value)):re.refs?io(re.ref)?re.refs.forEach(Re=>{(!Re.defaultChecked||!Re.disabled)&&(Array.isArray(P)?Re.checked=!!P.find(Be=>Be===Re.value):Re.checked=P===Re.value||!!P)}):re.refs.forEach(Re=>Re.checked=Re.value===P):Qm(re.ref)?re.ref.value="":(re.ref.value=P,re.ref.type||S.state.next({name:A,values:en(d)})))}(R.shouldDirty||R.shouldTouch)&&T(A,P,R.shouldTouch,R.shouldDirty,!0),R.shouldValidate&&xe(A)},Te=(A,V,R)=>{for(const Q in V){if(!V.hasOwnProperty(Q))return;const P=V[Q],re=A+"."+Q,Re=qe(i,re);(h.array.has(A)||An(P)||Re&&!Re._f)&&!Lr(P)?Te(re,P,R):Me(re,P,R)}},M=(A,V,R={})=>{const Q=qe(i,A),P=h.array.has(A),re=en(V);Bt(d,A,re),P?(S.array.next({name:A,values:en(d)}),(v.isDirty||v.dirtyFields||x.isDirty||x.dirtyFields)&&R.shouldDirty&&S.state.next({name:A,dirtyFields:Ml(c,d),isDirty:je(A,re)})):Q&&!Q._f&&!pa(re)?Te(A,re,R):Me(A,re,R),fm(A,h)&&S.state.next({...s,name:A}),S.state.next({name:f.mount?A:void 0,values:en(d)})},I=async A=>{f.mount=!0;const V=A.target;let R=V.name,Q=!0;const P=qe(i,R),re=se=>{Q=Number.isNaN(se)||Lr(se)&&isNaN(se.getTime())||ts(se,qe(d,R,se))},Re=Ul(a.mode),Be=Ul(a.reValidateMode);if(P){let se,Ue;const He=V.type?vy(P._f):n_(A),st=A.type===hy.BLUR||A.type===hy.FOCUS_OUT,Xt=!m_(P._f)&&!a.resolver&&!qe(s.errors,R)&&!P._f.deps||g_(st,qe(s.touchedFields,R),s.isSubmitted,Be,Re),_e=fm(R,h,st);Bt(d,R,He),st?(!V||!V.readOnly)&&(P._f.onBlur&&P._f.onBlur(A),g&&g(0)):P._f.onChange&&P._f.onChange(A);const et=T(R,He,st),Ft=!ta(et)||_e;if(!st&&S.state.next({name:R,type:A.type,values:en(d)}),Xt)return(v.isValid||x.isValid)&&(a.mode==="onBlur"?st&&E():st||E()),Ft&&S.state.next({name:R,..._e?{}:et});if(!st&&_e&&S.state.next({...s}),a.resolver){const{errors:At}=await L([R]);if(re(He),Q){const Rn=Ny(s.errors,i,R),Hn=Ny(At,i,Rn.name||R);se=Hn.error,R=Hn.name,Ue=ta(At)}}else O([R],!0),se=(await mm(P,h.disabled,d,$,a.shouldUseNativeValidation))[R],O([R]),re(He),Q&&(se?Ue=!1:(v.isValid||x.isValid)&&(Ue=await de(i,!0)));Q&&(P._f.deps&&(!Array.isArray(P._f.deps)||P._f.deps.length>0)&&xe(P._f.deps),G(R,Ue,se,et))}},K=(A,V)=>{if(qe(s.errors,V)&&A.focus)return A.focus(),1},xe=async(A,V={})=>{let R,Q;const P=ga(A);if(a.resolver){const re=await W(Kt(A)?A:P);R=ta(re),Q=A?!P.some(Re=>qe(re,Re)):R}else A?(Q=(await Promise.all(P.map(async re=>{const Re=qe(i,re);return await de(Re&&Re._f?{[re]:Re}:Re)}))).every(Boolean),!(!Q&&!s.isValid)&&E()):Q=R=await de(i);return S.state.next({...!Oa(A)||(v.isValid||x.isValid)&&R!==s.isValid?{}:{name:A},...a.resolver||!A?{isValid:R}:{},errors:s.errors}),V.shouldFocus&&!Q&&Bl(i,K,A?P:h.mount),Q},Se=(A,V)=>{let R={...f.mount?d:c};return V&&(R=ux(V.dirtyFields?s.dirtyFields:s.touchedFields,R)),Kt(A)?R:Oa(A)?qe(R,A):A.map(Q=>qe(R,Q))},j=(A,V)=>({invalid:!!qe((V||s).errors,A),isDirty:!!qe((V||s).dirtyFields,A),error:qe((V||s).errors,A),isValidating:!!qe(s.validatingFields,A),isTouched:!!qe((V||s).touchedFields,A)}),Z=A=>{A&&ga(A).forEach(V=>xn(s.errors,V)),S.state.next({errors:A?s.errors:{}})},ce=(A,V,R)=>{const Q=(qe(i,A,{_f:{}})._f||{}).ref,P=qe(s.errors,A)||{},{ref:re,message:Re,type:Be,...se}=P;Bt(s.errors,A,{...se,...V,ref:Q}),S.state.next({name:A,errors:s.errors,isValid:!1}),R&&R.shouldFocus&&Q&&Q.focus&&Q.focus()},U=(A,V)=>ns(A)?S.state.subscribe({next:R=>"values"in R&&A(ge(void 0,V),R)}):ge(A,V,!0),ue=A=>S.state.subscribe({next:V=>{p_(A.name,V.name,A.exact)&&h_(V,A.formState||v,Fe,A.reRenderRoot)&&A.callback({values:{...d},...s,...V,defaultValues:c})}}).unsubscribe,be=A=>(f.mount=!0,x={...x,...A.formState},ue({...A,formState:x})),ze=(A,V={})=>{for(const R of A?ga(A):h.mount)h.mount.delete(R),h.array.delete(R),V.keepValue||(xn(i,R),xn(d,R)),!V.keepError&&xn(s.errors,R),!V.keepDirty&&xn(s.dirtyFields,R),!V.keepTouched&&xn(s.touchedFields,R),!V.keepIsValidating&&xn(s.validatingFields,R),!a.shouldUnregister&&!V.keepDefaultValue&&xn(c,R);S.state.next({values:en(d)}),S.state.next({...s,...V.keepDirty?{isDirty:je()}:{}}),!V.keepIsValid&&E()},$e=({disabled:A,name:V})=>{(us(A)&&f.mount||A||h.disabled.has(V))&&(A?h.disabled.add(V):h.disabled.delete(V))},he=(A,V={})=>{let R=qe(i,A);const Q=us(V.disabled)||us(a.disabled);return Bt(i,A,{...R||{},_f:{...R&&R._f?R._f:{ref:{name:A}},name:A,mount:!0,...V}}),h.mount.add(A),R?$e({disabled:us(V.disabled)?V.disabled:a.disabled,name:A}):z(A,!0,V.value),{...Q?{disabled:V.disabled||a.disabled}:{},...a.progressive?{required:!!V.required,min:Hi(V.min),max:Hi(V.max),minLength:Hi(V.minLength),maxLength:Hi(V.maxLength),pattern:Hi(V.pattern)}:{},name:A,onChange:I,onBlur:I,ref:P=>{if(P){he(A,V),R=qe(i,A);const re=Kt(P.value)&&P.querySelectorAll&&P.querySelectorAll("input,select,textarea")[0]||P,Re=i_(re),Be=R._f.refs||[];if(Re?Be.find(se=>se===re):re===R._f.ref)return;Bt(i,A,{_f:{...R._f,...Re?{refs:[...Be.filter(_f),re,...Array.isArray(qe(c,A))?[{}]:[]],ref:{type:re.type,name:A}}:{ref:re}}}),z(A,!1,void 0,re)}else R=qe(i,A,{}),R._f&&(R._f.mount=!1),(a.shouldUnregister||V.shouldUnregister)&&!(s_(h.array,A)&&f.action)&&h.unMount.add(A)}}},Le=()=>a.shouldFocusError&&Bl(i,K,h.mount),Ie=A=>{us(A)&&(S.state.next({disabled:A}),Bl(i,(V,R)=>{const Q=qe(i,R);Q&&(V.disabled=Q._f.disabled||A,Array.isArray(Q._f.refs)&&Q._f.refs.forEach(P=>{P.disabled=Q._f.disabled||A}))},0,!1))},Ze=(A,V)=>async R=>{let Q;R&&(R.preventDefault&&R.preventDefault(),R.persist&&R.persist());let P=en(d);if(S.state.next({isSubmitting:!0}),a.resolver){const{errors:re,values:Re}=await L();s.errors=re,P=en(Re)}else await de(i);if(h.disabled.size)for(const re of h.disabled)xn(P,re);if(xn(s.errors,"root"),ta(s.errors)){S.state.next({errors:{}});try{await A(P,R)}catch(re){Q=re}}else V&&await V({...s.errors},R),Le(),setTimeout(Le);if(S.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ta(s.errors)&&!Q,submitCount:s.submitCount+1,errors:s.errors}),Q)throw Q},mt=(A,V={})=>{qe(i,A)&&(Kt(V.defaultValue)?M(A,en(qe(c,A))):(M(A,V.defaultValue),Bt(c,A,en(V.defaultValue))),V.keepTouched||xn(s.touchedFields,A),V.keepDirty||(xn(s.dirtyFields,A),s.isDirty=V.defaultValue?je(A,en(qe(c,A))):je()),V.keepError||(xn(s.errors,A),v.isValid&&E()),S.state.next({...s}))},ke=(A,V={})=>{const R=A?en(A):c,Q=en(R),P=ta(A),re=P?c:Q;if(V.keepDefaultValues||(c=R),!V.keepValues){if(V.keepDirtyValues){const Re=new Set([...h.mount,...Object.keys(Ml(c,d))]);for(const Be of Array.from(Re))qe(s.dirtyFields,Be)?Bt(re,Be,qe(d,Be)):M(Be,qe(re,Be))}else{if(Vm&&Kt(A))for(const Re of h.mount){const Be=qe(i,Re);if(Be&&Be._f){const se=Array.isArray(Be._f.refs)?Be._f.refs[0]:Be._f.ref;if(Lc(se)){const Ue=se.closest("form");if(Ue){Ue.reset();break}}}}if(V.keepFieldsRef)for(const Re of h.mount)M(Re,qe(re,Re));else i={}}d=a.shouldUnregister?V.keepDefaultValues?en(c):{}:en(re),S.array.next({values:{...re}}),S.state.next({values:{...re}})}h={mount:V.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!v.isValid||!!V.keepIsValid||!!V.keepDirtyValues||!a.shouldUnregister&&!ta(re),f.watch=!!a.shouldUnregister,S.state.next({submitCount:V.keepSubmitCount?s.submitCount:0,isDirty:P?!1:V.keepDirty?s.isDirty:!!(V.keepDefaultValues&&!ts(A,c)),isSubmitted:V.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:P?{}:V.keepDirtyValues?V.keepDefaultValues&&d?Ml(c,d):s.dirtyFields:V.keepDefaultValues&&A?Ml(c,A):V.keepDirty?s.dirtyFields:{},touchedFields:V.keepTouched?s.touchedFields:{},errors:V.keepErrors?s.errors:{},isSubmitSuccessful:V.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:c})},Ge=(A,V)=>ke(ns(A)?A(d):A,V),pe=(A,V={})=>{const R=qe(i,A),Q=R&&R._f;if(Q){const P=Q.refs?Q.refs[0]:Q.ref;P.focus&&(P.focus(),V.shouldSelect&&ns(P.select)&&P.select())}},Fe=A=>{s={...s,...A}},We={control:{register:he,unregister:ze,getFieldState:j,handleSubmit:Ze,setError:ce,_subscribe:ue,_runSchema:L,_focusError:Le,_getWatch:ge,_getDirty:je,_setValid:E,_setFieldArray:q,_setDisabledField:$e,_setErrors:J,_getFieldArray:we,_reset:ke,_resetDefaultValues:()=>ns(a.defaultValues)&&a.defaultValues().then(A=>{Ge(A,a.resetOptions),S.state.next({isLoading:!1})}),_removeUnmounted:Ae,_disableForm:Ie,_subjects:S,_proxyFormState:v,get _fields(){return i},get _formValues(){return d},get _state(){return f},set _state(A){f=A},get _defaultValues(){return c},get _names(){return h},set _names(A){h=A},get _formState(){return s},get _options(){return a},set _options(A){a={...a,...A}}},subscribe:be,trigger:xe,register:he,handleSubmit:Ze,watch:U,setValue:M,getValues:Se,reset:Ge,resetField:mt,clearErrors:Z,unregister:ze,setError:ce,setFocus:pe,getFieldState:j};return{...We,formControl:We}}var sr=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const s=(Math.random()*16+e)%16|0;return(a=="x"?s:s&3|8).toString(16)})},Ef=(e,a,s={})=>s.shouldFocus||Kt(s.shouldFocus)?s.focusName||`${e}.${Kt(s.focusIndex)?a:s.focusIndex}.`:"",Cf=(e,a)=>[...e,...ga(a)],Af=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Of(e,a,s){return[...e.slice(0,a),...ga(s),...e.slice(a)]}var Rf=(e,a,s)=>Array.isArray(e)?(Kt(e[s])&&(e[s]=void 0),e.splice(s,0,e.splice(a,1)[0]),e):[],Tf=(e,a)=>[...ga(a),...ga(e)];function x_(e,a){let s=0;const i=[...e];for(const c of a)i.splice(c-s,1),s++;return Wc(i).length?i:[]}var Df=(e,a)=>Kt(a)?[]:x_(e,ga(a).sort((s,i)=>s-i)),zf=(e,a,s)=>{[e[a],e[s]]=[e[s],e[a]]},jy=(e,a,s)=>(e[a]=s,e);function N_(e){const a=cx(),{control:s=a.control,name:i,keyName:c="id",shouldUnregister:d,rules:f}=e,[h,g]=gt.useState(s._getFieldArray(i)),p=gt.useRef(s._getFieldArray(i).map(sr)),v=gt.useRef(!1);s._names.array.add(i),gt.useMemo(()=>f&&h.length>=0&&s.register(i,f),[s,i,h.length,f]),Gm(()=>s._subjects.array.subscribe({next:({values:z,name:T})=>{if(T===i||!T){const G=qe(z,i);Array.isArray(G)&&(g(G),p.current=G.map(sr))}}}).unsubscribe,[s,i]);const x=gt.useCallback(z=>{v.current=!0,s._setFieldArray(i,z)},[s,i]),S=(z,T)=>{const G=ga(en(z)),L=Cf(s._getFieldArray(i),G);s._names.focus=Ef(i,L.length-1,T),p.current=Cf(p.current,G.map(sr)),x(L),g(L),s._setFieldArray(i,L,Cf,{argA:Af(z)})},$=(z,T)=>{const G=ga(en(z)),L=Tf(s._getFieldArray(i),G);s._names.focus=Ef(i,0,T),p.current=Tf(p.current,G.map(sr)),x(L),g(L),s._setFieldArray(i,L,Tf,{argA:Af(z)})},_=z=>{const T=Df(s._getFieldArray(i),z);p.current=Df(p.current,z),x(T),g(T),!Array.isArray(qe(s._fields,i))&&Bt(s._fields,i,void 0),s._setFieldArray(i,T,Df,{argA:z})},E=(z,T,G)=>{const L=ga(en(T)),W=Of(s._getFieldArray(i),z,L);s._names.focus=Ef(i,z,G),p.current=Of(p.current,z,L.map(sr)),x(W),g(W),s._setFieldArray(i,W,Of,{argA:z,argB:Af(T)})},O=(z,T)=>{const G=s._getFieldArray(i);zf(G,z,T),zf(p.current,z,T),x(G),g(G),s._setFieldArray(i,G,zf,{argA:z,argB:T},!1)},q=(z,T)=>{const G=s._getFieldArray(i);Rf(G,z,T),Rf(p.current,z,T),x(G),g(G),s._setFieldArray(i,G,Rf,{argA:z,argB:T},!1)},D=(z,T)=>{const G=en(T),L=jy(s._getFieldArray(i),z,G);p.current=[...L].map((W,de)=>!W||de===z?sr():p.current[de]),x(L),g([...L]),s._setFieldArray(i,L,jy,{argA:z,argB:G},!0,!1)},J=z=>{const T=ga(en(z));p.current=T.map(sr),x([...T]),g([...T]),s._setFieldArray(i,[...T],G=>G,{},!0,!1)};return gt.useEffect(()=>{if(s._state.action=!1,fm(i,s._names)&&s._subjects.state.next({...s._formState}),v.current&&(!Ul(s._options.mode).isOnSubmit||s._formState.isSubmitted)&&!Ul(s._options.reValidateMode).isOnSubmit)if(s._options.resolver)s._runSchema([i]).then(z=>{const T=qe(z.errors,i),G=qe(s._formState.errors,i);(G?!T&&G.type||T&&(G.type!==T.type||G.message!==T.message):T&&T.type)&&(T?Bt(s._formState.errors,i,T):xn(s._formState.errors,i),s._subjects.state.next({errors:s._formState.errors}))});else{const z=qe(s._fields,i);z&&z._f&&!(Ul(s._options.reValidateMode).isOnSubmit&&Ul(s._options.mode).isOnSubmit)&&mm(z,s._names.disabled,s._formValues,s._options.criteriaMode===Ha.all,s._options.shouldUseNativeValidation,!0).then(T=>!ta(T)&&s._subjects.state.next({errors:gx(s._formState.errors,T,i)}))}s._subjects.state.next({name:i,values:en(s._formValues)}),s._names.focus&&Bl(s._fields,(z,T)=>{if(s._names.focus&&T.startsWith(s._names.focus)&&z.focus)return z.focus(),1}),s._names.focus="",s._setValid(),v.current=!1},[h,i,s]),gt.useEffect(()=>(!qe(s._formValues,i)&&s._setFieldArray(i),()=>{const z=(T,G)=>{const L=qe(s._fields,T);L&&L._f&&(L._f.mount=G)};s._options.shouldUnregister||d?s.unregister(i):z(i,!1)}),[i,s,c,d]),{swap:gt.useCallback(O,[x,i,s]),move:gt.useCallback(q,[x,i,s]),prepend:gt.useCallback($,[x,i,s]),append:gt.useCallback(S,[x,i,s]),remove:gt.useCallback(_,[x,i,s]),insert:gt.useCallback(E,[x,i,s]),update:gt.useCallback(D,[x,i,s]),replace:gt.useCallback(J,[x,i,s]),fields:gt.useMemo(()=>h.map((z,T)=>({...z,[c]:p.current[T]||sr()})),[h,c])}}function eu(e={}){const a=gt.useRef(void 0),s=gt.useRef(void 0),[i,c]=gt.useState({isDirty:!1,isValidating:!1,isLoading:ns(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ns(e.defaultValues)?void 0:e.defaultValues});if(!a.current)if(e.formControl)a.current={...e.formControl,formState:i},e.defaultValues&&!ns(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:f,...h}=v_(e);a.current={...h,formState:i}}const d=a.current.control;return d._options=e,Gm(()=>{const f=d._subscribe({formState:d._proxyFormState,callback:()=>c({...d._formState}),reRenderRoot:!0});return c(h=>({...h,isReady:!0})),d._formState.isReady=!0,f},[d]),gt.useEffect(()=>d._disableForm(e.disabled),[d,e.disabled]),gt.useEffect(()=>{e.mode&&(d._options.mode=e.mode),e.reValidateMode&&(d._options.reValidateMode=e.reValidateMode)},[d,e.mode,e.reValidateMode]),gt.useEffect(()=>{e.errors&&(d._setErrors(e.errors),d._focusError())},[d,e.errors]),gt.useEffect(()=>{e.shouldUnregister&&d._subjects.state.next({values:d._getWatch()})},[d,e.shouldUnregister]),gt.useEffect(()=>{if(d._proxyFormState.isDirty){const f=d._getDirty();f!==i.isDirty&&d._subjects.state.next({isDirty:f})}},[d,i.isDirty]),gt.useEffect(()=>{e.values&&!ts(e.values,s.current)?(d._reset(e.values,{keepFieldsRef:!0,...d._options.resetOptions}),s.current=e.values,c(f=>({...f}))):d._resetDefaultValues()},[d,e.values]),gt.useEffect(()=>{d._state.mount||(d._setValid(),d._state.mount=!0),d._state.watch&&(d._state.watch=!1,d._subjects.state.next({...d._formState})),d._removeUnmounted()}),a.current.formState=l_(i,d),a.current}function bx(e,a){return function(){return e.apply(a,arguments)}}const{toString:S_}=Object.prototype,{getPrototypeOf:Km}=Object,{iterator:tu,toStringTag:yx}=Symbol,nu=(e=>a=>{const s=S_.call(a);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),as=e=>(e=e.toLowerCase(),a=>nu(a)===e),au=e=>a=>typeof a===e,{isArray:Pl}=Array,$l=au("undefined");function oo(e){return e!==null&&!$l(e)&&e.constructor!==null&&!$l(e.constructor)&&ba(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const vx=as("ArrayBuffer");function j_(e){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(e):a=e&&e.buffer&&vx(e.buffer),a}const w_=au("string"),ba=au("function"),xx=au("number"),co=e=>e!==null&&typeof e=="object",__=e=>e===!0||e===!1,Tc=e=>{if(nu(e)!=="object")return!1;const a=Km(e);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(yx in e)&&!(tu in e)},E_=e=>{if(!co(e)||oo(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},C_=as("Date"),A_=as("File"),O_=as("Blob"),R_=as("FileList"),T_=e=>co(e)&&ba(e.pipe),D_=e=>{let a;return e&&(typeof FormData=="function"&&e instanceof FormData||ba(e.append)&&((a=nu(e))==="formdata"||a==="object"&&ba(e.toString)&&e.toString()==="[object FormData]"))},z_=as("URLSearchParams"),[k_,M_,U_,L_]=["ReadableStream","Request","Response","Headers"].map(as),B_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function uo(e,a,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let i,c;if(typeof e!="object"&&(e=[e]),Pl(e))for(i=0,c=e.length;i<c;i++)a.call(null,e[i],i,e);else{if(oo(e))return;const d=s?Object.getOwnPropertyNames(e):Object.keys(e),f=d.length;let h;for(i=0;i<f;i++)h=d[i],a.call(null,e[h],h,e)}}function Nx(e,a){if(oo(e))return null;a=a.toLowerCase();const s=Object.keys(e);let i=s.length,c;for(;i-- >0;)if(c=s[i],a===c.toLowerCase())return c;return null}const Br=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Sx=e=>!$l(e)&&e!==Br;function hm(){const{caseless:e,skipUndefined:a}=Sx(this)&&this||{},s={},i=(c,d)=>{const f=e&&Nx(s,d)||d;Tc(s[f])&&Tc(c)?s[f]=hm(s[f],c):Tc(c)?s[f]=hm({},c):Pl(c)?s[f]=c.slice():(!a||!$l(c))&&(s[f]=c)};for(let c=0,d=arguments.length;c<d;c++)arguments[c]&&uo(arguments[c],i);return s}const q_=(e,a,s,{allOwnKeys:i}={})=>(uo(a,(c,d)=>{s&&ba(c)?e[d]=bx(c,s):e[d]=c},{allOwnKeys:i}),e),$_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),I_=(e,a,s,i)=>{e.prototype=Object.create(a.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:a.prototype}),s&&Object.assign(e.prototype,s)},F_=(e,a,s,i)=>{let c,d,f;const h={};if(a=a||{},e==null)return a;do{for(c=Object.getOwnPropertyNames(e),d=c.length;d-- >0;)f=c[d],(!i||i(f,e,a))&&!h[f]&&(a[f]=e[f],h[f]=!0);e=s!==!1&&Km(e)}while(e&&(!s||s(e,a))&&e!==Object.prototype);return a},H_=(e,a,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=a.length;const i=e.indexOf(a,s);return i!==-1&&i===s},V_=e=>{if(!e)return null;if(Pl(e))return e;let a=e.length;if(!xx(a))return null;const s=new Array(a);for(;a-- >0;)s[a]=e[a];return s},Z_=(e=>a=>e&&a instanceof e)(typeof Uint8Array<"u"&&Km(Uint8Array)),G_=(e,a)=>{const i=(e&&e[tu]).call(e);let c;for(;(c=i.next())&&!c.done;){const d=c.value;a.call(e,d[0],d[1])}},P_=(e,a)=>{let s;const i=[];for(;(s=e.exec(a))!==null;)i.push(s);return i},Q_=as("HTMLFormElement"),Y_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,i,c){return i.toUpperCase()+c}),wy=(({hasOwnProperty:e})=>(a,s)=>e.call(a,s))(Object.prototype),K_=as("RegExp"),jx=(e,a)=>{const s=Object.getOwnPropertyDescriptors(e),i={};uo(s,(c,d)=>{let f;(f=a(c,d,e))!==!1&&(i[d]=f||c)}),Object.defineProperties(e,i)},X_=e=>{jx(e,(a,s)=>{if(ba(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const i=e[s];if(ba(i)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},J_=(e,a)=>{const s={},i=c=>{c.forEach(d=>{s[d]=!0})};return Pl(e)?i(e):i(String(e).split(a)),s},W_=()=>{},e1=(e,a)=>e!=null&&Number.isFinite(e=+e)?e:a;function t1(e){return!!(e&&ba(e.append)&&e[yx]==="FormData"&&e[tu])}const n1=e=>{const a=new Array(10),s=(i,c)=>{if(co(i)){if(a.indexOf(i)>=0)return;if(oo(i))return i;if(!("toJSON"in i)){a[c]=i;const d=Pl(i)?[]:{};return uo(i,(f,h)=>{const g=s(f,c+1);!$l(g)&&(d[h]=g)}),a[c]=void 0,d}}return i};return s(e,0)},a1=as("AsyncFunction"),s1=e=>e&&(co(e)||ba(e))&&ba(e.then)&&ba(e.catch),wx=((e,a)=>e?setImmediate:a?((s,i)=>(Br.addEventListener("message",({source:c,data:d})=>{c===Br&&d===s&&i.length&&i.shift()()},!1),c=>{i.push(c),Br.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",ba(Br.postMessage)),r1=typeof queueMicrotask<"u"?queueMicrotask.bind(Br):typeof process<"u"&&process.nextTick||wx,l1=e=>e!=null&&ba(e[tu]),le={isArray:Pl,isArrayBuffer:vx,isBuffer:oo,isFormData:D_,isArrayBufferView:j_,isString:w_,isNumber:xx,isBoolean:__,isObject:co,isPlainObject:Tc,isEmptyObject:E_,isReadableStream:k_,isRequest:M_,isResponse:U_,isHeaders:L_,isUndefined:$l,isDate:C_,isFile:A_,isBlob:O_,isRegExp:K_,isFunction:ba,isStream:T_,isURLSearchParams:z_,isTypedArray:Z_,isFileList:R_,forEach:uo,merge:hm,extend:q_,trim:B_,stripBOM:$_,inherits:I_,toFlatObject:F_,kindOf:nu,kindOfTest:as,endsWith:H_,toArray:V_,forEachEntry:G_,matchAll:P_,isHTMLForm:Q_,hasOwnProperty:wy,hasOwnProp:wy,reduceDescriptors:jx,freezeMethods:X_,toObjectSet:J_,toCamelCase:Y_,noop:W_,toFiniteNumber:e1,findKey:Nx,global:Br,isContextDefined:Sx,isSpecCompliantForm:t1,toJSONObject:n1,isAsyncFn:a1,isThenable:s1,setImmediate:wx,asap:r1,isIterable:l1};function ft(e,a,s,i,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",a&&(this.code=a),s&&(this.config=s),i&&(this.request=i),c&&(this.response=c,this.status=c.status?c.status:null)}le.inherits(ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:le.toJSONObject(this.config),code:this.code,status:this.status}}});const _x=ft.prototype,Ex={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ex[e]={value:e}});Object.defineProperties(ft,Ex);Object.defineProperty(_x,"isAxiosError",{value:!0});ft.from=(e,a,s,i,c,d)=>{const f=Object.create(_x);le.toFlatObject(e,f,function(v){return v!==Error.prototype},p=>p!=="isAxiosError");const h=e&&e.message?e.message:"Error",g=a==null&&e?e.code:a;return ft.call(f,h,g,s,i,c),e&&f.cause==null&&Object.defineProperty(f,"cause",{value:e,configurable:!0}),f.name=e&&e.name||"Error",d&&Object.assign(f,d),f};const i1=null;function pm(e){return le.isPlainObject(e)||le.isArray(e)}function Cx(e){return le.endsWith(e,"[]")?e.slice(0,-2):e}function _y(e,a,s){return e?e.concat(a).map(function(c,d){return c=Cx(c),!s&&d?"["+c+"]":c}).join(s?".":""):a}function o1(e){return le.isArray(e)&&!e.some(pm)}const c1=le.toFlatObject(le,{},null,function(a){return/^is[A-Z]/.test(a)});function su(e,a,s){if(!le.isObject(e))throw new TypeError("target must be an object");a=a||new FormData,s=le.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,O){return!le.isUndefined(O[E])});const i=s.metaTokens,c=s.visitor||v,d=s.dots,f=s.indexes,g=(s.Blob||typeof Blob<"u"&&Blob)&&le.isSpecCompliantForm(a);if(!le.isFunction(c))throw new TypeError("visitor must be a function");function p(_){if(_===null)return"";if(le.isDate(_))return _.toISOString();if(le.isBoolean(_))return _.toString();if(!g&&le.isBlob(_))throw new ft("Blob is not supported. Use a Buffer instead.");return le.isArrayBuffer(_)||le.isTypedArray(_)?g&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function v(_,E,O){let q=_;if(_&&!O&&typeof _=="object"){if(le.endsWith(E,"{}"))E=i?E:E.slice(0,-2),_=JSON.stringify(_);else if(le.isArray(_)&&o1(_)||(le.isFileList(_)||le.endsWith(E,"[]"))&&(q=le.toArray(_)))return E=Cx(E),q.forEach(function(J,z){!(le.isUndefined(J)||J===null)&&a.append(f===!0?_y([E],z,d):f===null?E:E+"[]",p(J))}),!1}return pm(_)?!0:(a.append(_y(O,E,d),p(_)),!1)}const x=[],S=Object.assign(c1,{defaultVisitor:v,convertValue:p,isVisitable:pm});function $(_,E){if(!le.isUndefined(_)){if(x.indexOf(_)!==-1)throw Error("Circular reference detected in "+E.join("."));x.push(_),le.forEach(_,function(q,D){(!(le.isUndefined(q)||q===null)&&c.call(a,q,le.isString(D)?D.trim():D,E,S))===!0&&$(q,E?E.concat(D):[D])}),x.pop()}}if(!le.isObject(e))throw new TypeError("data must be an object");return $(e),a}function Ey(e){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return a[i]})}function Xm(e,a){this._pairs=[],e&&su(e,this,a)}const Ax=Xm.prototype;Ax.append=function(a,s){this._pairs.push([a,s])};Ax.toString=function(a){const s=a?function(i){return a.call(this,i,Ey)}:Ey;return this._pairs.map(function(c){return s(c[0])+"="+s(c[1])},"").join("&")};function u1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ox(e,a,s){if(!a)return e;const i=s&&s.encode||u1;le.isFunction(s)&&(s={serialize:s});const c=s&&s.serialize;let d;if(c?d=c(a,s):d=le.isURLSearchParams(a)?a.toString():new Xm(a,s).toString(i),d){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class Cy{constructor(){this.handlers=[]}use(a,s,i){return this.handlers.push({fulfilled:a,rejected:s,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){le.forEach(this.handlers,function(i){i!==null&&a(i)})}}const Rx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},d1=typeof URLSearchParams<"u"?URLSearchParams:Xm,f1=typeof FormData<"u"?FormData:null,m1=typeof Blob<"u"?Blob:null,h1={isBrowser:!0,classes:{URLSearchParams:d1,FormData:f1,Blob:m1},protocols:["http","https","file","blob","url","data"]},Jm=typeof window<"u"&&typeof document<"u",gm=typeof navigator=="object"&&navigator||void 0,p1=Jm&&(!gm||["ReactNative","NativeScript","NS"].indexOf(gm.product)<0),g1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",b1=Jm&&window.location.href||"http://localhost",y1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Jm,hasStandardBrowserEnv:p1,hasStandardBrowserWebWorkerEnv:g1,navigator:gm,origin:b1},Symbol.toStringTag,{value:"Module"})),na={...y1,...h1};function v1(e,a){return su(e,new na.classes.URLSearchParams,{visitor:function(s,i,c,d){return na.isNode&&le.isBuffer(s)?(this.append(i,s.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...a})}function x1(e){return le.matchAll(/\w+|\[(\w*)]/g,e).map(a=>a[0]==="[]"?"":a[1]||a[0])}function N1(e){const a={},s=Object.keys(e);let i;const c=s.length;let d;for(i=0;i<c;i++)d=s[i],a[d]=e[d];return a}function Tx(e){function a(s,i,c,d){let f=s[d++];if(f==="__proto__")return!0;const h=Number.isFinite(+f),g=d>=s.length;return f=!f&&le.isArray(c)?c.length:f,g?(le.hasOwnProp(c,f)?c[f]=[c[f],i]:c[f]=i,!h):((!c[f]||!le.isObject(c[f]))&&(c[f]=[]),a(s,i,c[f],d)&&le.isArray(c[f])&&(c[f]=N1(c[f])),!h)}if(le.isFormData(e)&&le.isFunction(e.entries)){const s={};return le.forEachEntry(e,(i,c)=>{a(x1(i),c,s,0)}),s}return null}function S1(e,a,s){if(le.isString(e))try{return(a||JSON.parse)(e),le.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(s||JSON.stringify)(e)}const fo={transitional:Rx,adapter:["xhr","http","fetch"],transformRequest:[function(a,s){const i=s.getContentType()||"",c=i.indexOf("application/json")>-1,d=le.isObject(a);if(d&&le.isHTMLForm(a)&&(a=new FormData(a)),le.isFormData(a))return c?JSON.stringify(Tx(a)):a;if(le.isArrayBuffer(a)||le.isBuffer(a)||le.isStream(a)||le.isFile(a)||le.isBlob(a)||le.isReadableStream(a))return a;if(le.isArrayBufferView(a))return a.buffer;if(le.isURLSearchParams(a))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let h;if(d){if(i.indexOf("application/x-www-form-urlencoded")>-1)return v1(a,this.formSerializer).toString();if((h=le.isFileList(a))||i.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return su(h?{"files[]":a}:a,g&&new g,this.formSerializer)}}return d||c?(s.setContentType("application/json",!1),S1(a)):a}],transformResponse:[function(a){const s=this.transitional||fo.transitional,i=s&&s.forcedJSONParsing,c=this.responseType==="json";if(le.isResponse(a)||le.isReadableStream(a))return a;if(a&&le.isString(a)&&(i&&!this.responseType||c)){const f=!(s&&s.silentJSONParsing)&&c;try{return JSON.parse(a,this.parseReviver)}catch(h){if(f)throw h.name==="SyntaxError"?ft.from(h,ft.ERR_BAD_RESPONSE,this,null,this.response):h}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:na.classes.FormData,Blob:na.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};le.forEach(["delete","get","head","post","put","patch"],e=>{fo.headers[e]={}});const j1=le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),w1=e=>{const a={};let s,i,c;return e&&e.split(`
`).forEach(function(f){c=f.indexOf(":"),s=f.substring(0,c).trim().toLowerCase(),i=f.substring(c+1).trim(),!(!s||a[s]&&j1[s])&&(s==="set-cookie"?a[s]?a[s].push(i):a[s]=[i]:a[s]=a[s]?a[s]+", "+i:i)}),a},Ay=Symbol("internals");function Vi(e){return e&&String(e).trim().toLowerCase()}function Dc(e){return e===!1||e==null?e:le.isArray(e)?e.map(Dc):String(e)}function _1(e){const a=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=s.exec(e);)a[i[1]]=i[2];return a}const E1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function kf(e,a,s,i,c){if(le.isFunction(i))return i.call(this,a,s);if(c&&(a=s),!!le.isString(a)){if(le.isString(i))return a.indexOf(i)!==-1;if(le.isRegExp(i))return i.test(a)}}function C1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,s,i)=>s.toUpperCase()+i)}function A1(e,a){const s=le.toCamelCase(" "+a);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+s,{value:function(c,d,f){return this[i].call(this,a,c,d,f)},configurable:!0})})}let ya=class{constructor(a){a&&this.set(a)}set(a,s,i){const c=this;function d(h,g,p){const v=Vi(g);if(!v)throw new Error("header name must be a non-empty string");const x=le.findKey(c,v);(!x||c[x]===void 0||p===!0||p===void 0&&c[x]!==!1)&&(c[x||g]=Dc(h))}const f=(h,g)=>le.forEach(h,(p,v)=>d(p,v,g));if(le.isPlainObject(a)||a instanceof this.constructor)f(a,s);else if(le.isString(a)&&(a=a.trim())&&!E1(a))f(w1(a),s);else if(le.isObject(a)&&le.isIterable(a)){let h={},g,p;for(const v of a){if(!le.isArray(v))throw TypeError("Object iterator must return a key-value pair");h[p=v[0]]=(g=h[p])?le.isArray(g)?[...g,v[1]]:[g,v[1]]:v[1]}f(h,s)}else a!=null&&d(s,a,i);return this}get(a,s){if(a=Vi(a),a){const i=le.findKey(this,a);if(i){const c=this[i];if(!s)return c;if(s===!0)return _1(c);if(le.isFunction(s))return s.call(this,c,i);if(le.isRegExp(s))return s.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,s){if(a=Vi(a),a){const i=le.findKey(this,a);return!!(i&&this[i]!==void 0&&(!s||kf(this,this[i],i,s)))}return!1}delete(a,s){const i=this;let c=!1;function d(f){if(f=Vi(f),f){const h=le.findKey(i,f);h&&(!s||kf(i,i[h],h,s))&&(delete i[h],c=!0)}}return le.isArray(a)?a.forEach(d):d(a),c}clear(a){const s=Object.keys(this);let i=s.length,c=!1;for(;i--;){const d=s[i];(!a||kf(this,this[d],d,a,!0))&&(delete this[d],c=!0)}return c}normalize(a){const s=this,i={};return le.forEach(this,(c,d)=>{const f=le.findKey(i,d);if(f){s[f]=Dc(c),delete s[d];return}const h=a?C1(d):String(d).trim();h!==d&&delete s[d],s[h]=Dc(c),i[h]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const s=Object.create(null);return le.forEach(this,(i,c)=>{i!=null&&i!==!1&&(s[c]=a&&le.isArray(i)?i.join(", "):i)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,s])=>a+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...s){const i=new this(a);return s.forEach(c=>i.set(c)),i}static accessor(a){const i=(this[Ay]=this[Ay]={accessors:{}}).accessors,c=this.prototype;function d(f){const h=Vi(f);i[h]||(A1(c,f),i[h]=!0)}return le.isArray(a)?a.forEach(d):d(a),this}};ya.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);le.reduceDescriptors(ya.prototype,({value:e},a)=>{let s=a[0].toUpperCase()+a.slice(1);return{get:()=>e,set(i){this[s]=i}}});le.freezeMethods(ya);function Mf(e,a){const s=this||fo,i=a||s,c=ya.from(i.headers);let d=i.data;return le.forEach(e,function(h){d=h.call(s,d,c.normalize(),a?a.status:void 0)}),c.normalize(),d}function Dx(e){return!!(e&&e.__CANCEL__)}function Ql(e,a,s){ft.call(this,e??"canceled",ft.ERR_CANCELED,a,s),this.name="CanceledError"}le.inherits(Ql,ft,{__CANCEL__:!0});function zx(e,a,s){const i=s.config.validateStatus;!s.status||!i||i(s.status)?e(s):a(new ft("Request failed with status code "+s.status,[ft.ERR_BAD_REQUEST,ft.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function O1(e){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return a&&a[1]||""}function R1(e,a){e=e||10;const s=new Array(e),i=new Array(e);let c=0,d=0,f;return a=a!==void 0?a:1e3,function(g){const p=Date.now(),v=i[d];f||(f=p),s[c]=g,i[c]=p;let x=d,S=0;for(;x!==c;)S+=s[x++],x=x%e;if(c=(c+1)%e,c===d&&(d=(d+1)%e),p-f<a)return;const $=v&&p-v;return $?Math.round(S*1e3/$):void 0}}function T1(e,a){let s=0,i=1e3/a,c,d;const f=(p,v=Date.now())=>{s=v,c=null,d&&(clearTimeout(d),d=null),e(...p)};return[(...p)=>{const v=Date.now(),x=v-s;x>=i?f(p,v):(c=p,d||(d=setTimeout(()=>{d=null,f(c)},i-x)))},()=>c&&f(c)]}const qc=(e,a,s=3)=>{let i=0;const c=R1(50,250);return T1(d=>{const f=d.loaded,h=d.lengthComputable?d.total:void 0,g=f-i,p=c(g),v=f<=h;i=f;const x={loaded:f,total:h,progress:h?f/h:void 0,bytes:g,rate:p||void 0,estimated:p&&h&&v?(h-f)/p:void 0,event:d,lengthComputable:h!=null,[a?"download":"upload"]:!0};e(x)},s)},Oy=(e,a)=>{const s=e!=null;return[i=>a[0]({lengthComputable:s,total:e,loaded:i}),a[1]]},Ry=e=>(...a)=>le.asap(()=>e(...a)),D1=na.hasStandardBrowserEnv?((e,a)=>s=>(s=new URL(s,na.origin),e.protocol===s.protocol&&e.host===s.host&&(a||e.port===s.port)))(new URL(na.origin),na.navigator&&/(msie|trident)/i.test(na.navigator.userAgent)):()=>!0,z1=na.hasStandardBrowserEnv?{write(e,a,s,i,c,d,f){if(typeof document>"u")return;const h=[`${e}=${encodeURIComponent(a)}`];le.isNumber(s)&&h.push(`expires=${new Date(s).toUTCString()}`),le.isString(i)&&h.push(`path=${i}`),le.isString(c)&&h.push(`domain=${c}`),d===!0&&h.push("secure"),le.isString(f)&&h.push(`SameSite=${f}`),document.cookie=h.join("; ")},read(e){if(typeof document>"u")return null;const a=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return a?decodeURIComponent(a[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function k1(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function M1(e,a){return a?e.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):e}function kx(e,a,s){let i=!k1(a);return e&&(i||s==!1)?M1(e,a):a}const Ty=e=>e instanceof ya?{...e}:e;function Hr(e,a){a=a||{};const s={};function i(p,v,x,S){return le.isPlainObject(p)&&le.isPlainObject(v)?le.merge.call({caseless:S},p,v):le.isPlainObject(v)?le.merge({},v):le.isArray(v)?v.slice():v}function c(p,v,x,S){if(le.isUndefined(v)){if(!le.isUndefined(p))return i(void 0,p,x,S)}else return i(p,v,x,S)}function d(p,v){if(!le.isUndefined(v))return i(void 0,v)}function f(p,v){if(le.isUndefined(v)){if(!le.isUndefined(p))return i(void 0,p)}else return i(void 0,v)}function h(p,v,x){if(x in a)return i(p,v);if(x in e)return i(void 0,p)}const g={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:h,headers:(p,v,x)=>c(Ty(p),Ty(v),x,!0)};return le.forEach(Object.keys({...e,...a}),function(v){const x=g[v]||c,S=x(e[v],a[v],v);le.isUndefined(S)&&x!==h||(s[v]=S)}),s}const Mx=e=>{const a=Hr({},e);let{data:s,withXSRFToken:i,xsrfHeaderName:c,xsrfCookieName:d,headers:f,auth:h}=a;if(a.headers=f=ya.from(f),a.url=Ox(kx(a.baseURL,a.url,a.allowAbsoluteUrls),e.params,e.paramsSerializer),h&&f.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),le.isFormData(s)){if(na.hasStandardBrowserEnv||na.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(le.isFunction(s.getHeaders)){const g=s.getHeaders(),p=["content-type","content-length"];Object.entries(g).forEach(([v,x])=>{p.includes(v.toLowerCase())&&f.set(v,x)})}}if(na.hasStandardBrowserEnv&&(i&&le.isFunction(i)&&(i=i(a)),i||i!==!1&&D1(a.url))){const g=c&&d&&z1.read(d);g&&f.set(c,g)}return a},U1=typeof XMLHttpRequest<"u",L1=U1&&function(e){return new Promise(function(s,i){const c=Mx(e);let d=c.data;const f=ya.from(c.headers).normalize();let{responseType:h,onUploadProgress:g,onDownloadProgress:p}=c,v,x,S,$,_;function E(){$&&$(),_&&_(),c.cancelToken&&c.cancelToken.unsubscribe(v),c.signal&&c.signal.removeEventListener("abort",v)}let O=new XMLHttpRequest;O.open(c.method.toUpperCase(),c.url,!0),O.timeout=c.timeout;function q(){if(!O)return;const J=ya.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),T={data:!h||h==="text"||h==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:J,config:e,request:O};zx(function(L){s(L),E()},function(L){i(L),E()},T),O=null}"onloadend"in O?O.onloadend=q:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(q)},O.onabort=function(){O&&(i(new ft("Request aborted",ft.ECONNABORTED,e,O)),O=null)},O.onerror=function(z){const T=z&&z.message?z.message:"Network Error",G=new ft(T,ft.ERR_NETWORK,e,O);G.event=z||null,i(G),O=null},O.ontimeout=function(){let z=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const T=c.transitional||Rx;c.timeoutErrorMessage&&(z=c.timeoutErrorMessage),i(new ft(z,T.clarifyTimeoutError?ft.ETIMEDOUT:ft.ECONNABORTED,e,O)),O=null},d===void 0&&f.setContentType(null),"setRequestHeader"in O&&le.forEach(f.toJSON(),function(z,T){O.setRequestHeader(T,z)}),le.isUndefined(c.withCredentials)||(O.withCredentials=!!c.withCredentials),h&&h!=="json"&&(O.responseType=c.responseType),p&&([S,_]=qc(p,!0),O.addEventListener("progress",S)),g&&O.upload&&([x,$]=qc(g),O.upload.addEventListener("progress",x),O.upload.addEventListener("loadend",$)),(c.cancelToken||c.signal)&&(v=J=>{O&&(i(!J||J.type?new Ql(null,e,O):J),O.abort(),O=null)},c.cancelToken&&c.cancelToken.subscribe(v),c.signal&&(c.signal.aborted?v():c.signal.addEventListener("abort",v)));const D=O1(c.url);if(D&&na.protocols.indexOf(D)===-1){i(new ft("Unsupported protocol "+D+":",ft.ERR_BAD_REQUEST,e));return}O.send(d||null)})},B1=(e,a)=>{const{length:s}=e=e?e.filter(Boolean):[];if(a||s){let i=new AbortController,c;const d=function(p){if(!c){c=!0,h();const v=p instanceof Error?p:this.reason;i.abort(v instanceof ft?v:new Ql(v instanceof Error?v.message:v))}};let f=a&&setTimeout(()=>{f=null,d(new ft(`timeout ${a} of ms exceeded`,ft.ETIMEDOUT))},a);const h=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(d):p.removeEventListener("abort",d)}),e=null)};e.forEach(p=>p.addEventListener("abort",d));const{signal:g}=i;return g.unsubscribe=()=>le.asap(h),g}},q1=function*(e,a){let s=e.byteLength;if(s<a){yield e;return}let i=0,c;for(;i<s;)c=i+a,yield e.slice(i,c),i=c},$1=async function*(e,a){for await(const s of I1(e))yield*q1(s,a)},I1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const a=e.getReader();try{for(;;){const{done:s,value:i}=await a.read();if(s)break;yield i}}finally{await a.cancel()}},Dy=(e,a,s,i)=>{const c=$1(e,a);let d=0,f,h=g=>{f||(f=!0,i&&i(g))};return new ReadableStream({async pull(g){try{const{done:p,value:v}=await c.next();if(p){h(),g.close();return}let x=v.byteLength;if(s){let S=d+=x;s(S)}g.enqueue(new Uint8Array(v))}catch(p){throw h(p),p}},cancel(g){return h(g),c.return()}},{highWaterMark:2})},zy=64*1024,{isFunction:Sc}=le,F1=(({Request:e,Response:a})=>({Request:e,Response:a}))(le.global),{ReadableStream:ky,TextEncoder:My}=le.global,Uy=(e,...a)=>{try{return!!e(...a)}catch{return!1}},H1=e=>{e=le.merge.call({skipUndefined:!0},F1,e);const{fetch:a,Request:s,Response:i}=e,c=a?Sc(a):typeof fetch=="function",d=Sc(s),f=Sc(i);if(!c)return!1;const h=c&&Sc(ky),g=c&&(typeof My=="function"?(_=>E=>_.encode(E))(new My):async _=>new Uint8Array(await new s(_).arrayBuffer())),p=d&&h&&Uy(()=>{let _=!1;const E=new s(na.origin,{body:new ky,method:"POST",get duplex(){return _=!0,"half"}}).headers.has("Content-Type");return _&&!E}),v=f&&h&&Uy(()=>le.isReadableStream(new i("").body)),x={stream:v&&(_=>_.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(_=>{!x[_]&&(x[_]=(E,O)=>{let q=E&&E[_];if(q)return q.call(E);throw new ft(`Response type '${_}' is not supported`,ft.ERR_NOT_SUPPORT,O)})});const S=async _=>{if(_==null)return 0;if(le.isBlob(_))return _.size;if(le.isSpecCompliantForm(_))return(await new s(na.origin,{method:"POST",body:_}).arrayBuffer()).byteLength;if(le.isArrayBufferView(_)||le.isArrayBuffer(_))return _.byteLength;if(le.isURLSearchParams(_)&&(_=_+""),le.isString(_))return(await g(_)).byteLength},$=async(_,E)=>{const O=le.toFiniteNumber(_.getContentLength());return O??S(E)};return async _=>{let{url:E,method:O,data:q,signal:D,cancelToken:J,timeout:z,onDownloadProgress:T,onUploadProgress:G,responseType:L,headers:W,withCredentials:de="same-origin",fetchOptions:Ae}=Mx(_),je=a||fetch;L=L?(L+"").toLowerCase():"text";let ge=B1([D,J&&J.toAbortSignal()],z),we=null;const Me=ge&&ge.unsubscribe&&(()=>{ge.unsubscribe()});let Te;try{if(G&&p&&O!=="get"&&O!=="head"&&(Te=await $(W,q))!==0){let j=new s(E,{method:"POST",body:q,duplex:"half"}),Z;if(le.isFormData(q)&&(Z=j.headers.get("content-type"))&&W.setContentType(Z),j.body){const[ce,U]=Oy(Te,qc(Ry(G)));q=Dy(j.body,zy,ce,U)}}le.isString(de)||(de=de?"include":"omit");const M=d&&"credentials"in s.prototype,I={...Ae,signal:ge,method:O.toUpperCase(),headers:W.normalize().toJSON(),body:q,duplex:"half",credentials:M?de:void 0};we=d&&new s(E,I);let K=await(d?je(we,Ae):je(E,I));const xe=v&&(L==="stream"||L==="response");if(v&&(T||xe&&Me)){const j={};["status","statusText","headers"].forEach(ue=>{j[ue]=K[ue]});const Z=le.toFiniteNumber(K.headers.get("content-length")),[ce,U]=T&&Oy(Z,qc(Ry(T),!0))||[];K=new i(Dy(K.body,zy,ce,()=>{U&&U(),Me&&Me()}),j)}L=L||"text";let Se=await x[le.findKey(x,L)||"text"](K,_);return!xe&&Me&&Me(),await new Promise((j,Z)=>{zx(j,Z,{data:Se,headers:ya.from(K.headers),status:K.status,statusText:K.statusText,config:_,request:we})})}catch(M){throw Me&&Me(),M&&M.name==="TypeError"&&/Load failed|fetch/i.test(M.message)?Object.assign(new ft("Network Error",ft.ERR_NETWORK,_,we),{cause:M.cause||M}):ft.from(M,M&&M.code,_,we)}}},V1=new Map,Ux=e=>{let a=e&&e.env||{};const{fetch:s,Request:i,Response:c}=a,d=[i,c,s];let f=d.length,h=f,g,p,v=V1;for(;h--;)g=d[h],p=v.get(g),p===void 0&&v.set(g,p=h?new Map:H1(a)),v=p;return p};Ux();const Wm={http:i1,xhr:L1,fetch:{get:Ux}};le.forEach(Wm,(e,a)=>{if(e){try{Object.defineProperty(e,"name",{value:a})}catch{}Object.defineProperty(e,"adapterName",{value:a})}});const Ly=e=>`- ${e}`,Z1=e=>le.isFunction(e)||e===null||e===!1;function G1(e,a){e=le.isArray(e)?e:[e];const{length:s}=e;let i,c;const d={};for(let f=0;f<s;f++){i=e[f];let h;if(c=i,!Z1(i)&&(c=Wm[(h=String(i)).toLowerCase()],c===void 0))throw new ft(`Unknown adapter '${h}'`);if(c&&(le.isFunction(c)||(c=c.get(a))))break;d[h||"#"+f]=c}if(!c){const f=Object.entries(d).map(([g,p])=>`adapter ${g} `+(p===!1?"is not supported by the environment":"is not available in the build"));let h=s?f.length>1?`since :
`+f.map(Ly).join(`
`):" "+Ly(f[0]):"as no adapter specified";throw new ft("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return c}const Lx={getAdapter:G1,adapters:Wm};function Uf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ql(null,e)}function By(e){return Uf(e),e.headers=ya.from(e.headers),e.data=Mf.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Lx.getAdapter(e.adapter||fo.adapter,e)(e).then(function(i){return Uf(e),i.data=Mf.call(e,e.transformResponse,i),i.headers=ya.from(i.headers),i},function(i){return Dx(i)||(Uf(e),i&&i.response&&(i.response.data=Mf.call(e,e.transformResponse,i.response),i.response.headers=ya.from(i.response.headers))),Promise.reject(i)})}const Bx="1.13.2",ru={};["object","boolean","number","function","string","symbol"].forEach((e,a)=>{ru[e]=function(i){return typeof i===e||"a"+(a<1?"n ":" ")+e}});const qy={};ru.transitional=function(a,s,i){function c(d,f){return"[Axios v"+Bx+"] Transitional option '"+d+"'"+f+(i?". "+i:"")}return(d,f,h)=>{if(a===!1)throw new ft(c(f," has been removed"+(s?" in "+s:"")),ft.ERR_DEPRECATED);return s&&!qy[f]&&(qy[f]=!0,console.warn(c(f," has been deprecated since v"+s+" and will be removed in the near future"))),a?a(d,f,h):!0}};ru.spelling=function(a){return(s,i)=>(console.warn(`${i} is likely a misspelling of ${a}`),!0)};function P1(e,a,s){if(typeof e!="object")throw new ft("options must be an object",ft.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let c=i.length;for(;c-- >0;){const d=i[c],f=a[d];if(f){const h=e[d],g=h===void 0||f(h,d,e);if(g!==!0)throw new ft("option "+d+" must be "+g,ft.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new ft("Unknown option "+d,ft.ERR_BAD_OPTION)}}const zc={assertOptions:P1,validators:ru},cs=zc.validators;let qr=class{constructor(a){this.defaults=a||{},this.interceptors={request:new Cy,response:new Cy}}async request(a,s){try{return await this._request(a,s)}catch(i){if(i instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const d=c.stack?c.stack.replace(/^.+\n/,""):"";try{i.stack?d&&!String(i.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+d):i.stack=d}catch{}}throw i}}_request(a,s){typeof a=="string"?(s=s||{},s.url=a):s=a||{},s=Hr(this.defaults,s);const{transitional:i,paramsSerializer:c,headers:d}=s;i!==void 0&&zc.assertOptions(i,{silentJSONParsing:cs.transitional(cs.boolean),forcedJSONParsing:cs.transitional(cs.boolean),clarifyTimeoutError:cs.transitional(cs.boolean)},!1),c!=null&&(le.isFunction(c)?s.paramsSerializer={serialize:c}:zc.assertOptions(c,{encode:cs.function,serialize:cs.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),zc.assertOptions(s,{baseUrl:cs.spelling("baseURL"),withXsrfToken:cs.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let f=d&&le.merge(d.common,d[s.method]);d&&le.forEach(["delete","get","head","post","put","patch","common"],_=>{delete d[_]}),s.headers=ya.concat(f,d);const h=[];let g=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(s)===!1||(g=g&&E.synchronous,h.unshift(E.fulfilled,E.rejected))});const p=[];this.interceptors.response.forEach(function(E){p.push(E.fulfilled,E.rejected)});let v,x=0,S;if(!g){const _=[By.bind(this),void 0];for(_.unshift(...h),_.push(...p),S=_.length,v=Promise.resolve(s);x<S;)v=v.then(_[x++],_[x++]);return v}S=h.length;let $=s;for(;x<S;){const _=h[x++],E=h[x++];try{$=_($)}catch(O){E.call(this,O);break}}try{v=By.call(this,$)}catch(_){return Promise.reject(_)}for(x=0,S=p.length;x<S;)v=v.then(p[x++],p[x++]);return v}getUri(a){a=Hr(this.defaults,a);const s=kx(a.baseURL,a.url,a.allowAbsoluteUrls);return Ox(s,a.params,a.paramsSerializer)}};le.forEach(["delete","get","head","options"],function(a){qr.prototype[a]=function(s,i){return this.request(Hr(i||{},{method:a,url:s,data:(i||{}).data}))}});le.forEach(["post","put","patch"],function(a){function s(i){return function(d,f,h){return this.request(Hr(h||{},{method:a,headers:i?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}qr.prototype[a]=s(),qr.prototype[a+"Form"]=s(!0)});let Q1=class qx{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(d){s=d});const i=this;this.promise.then(c=>{if(!i._listeners)return;let d=i._listeners.length;for(;d-- >0;)i._listeners[d](c);i._listeners=null}),this.promise.then=c=>{let d;const f=new Promise(h=>{i.subscribe(h),d=h}).then(c);return f.cancel=function(){i.unsubscribe(d)},f},a(function(d,f,h){i.reason||(i.reason=new Ql(d,f,h),s(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const s=this._listeners.indexOf(a);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const a=new AbortController,s=i=>{a.abort(i)};return this.subscribe(s),a.signal.unsubscribe=()=>this.unsubscribe(s),a.signal}static source(){let a;return{token:new qx(function(c){a=c}),cancel:a}}};function Y1(e){return function(s){return e.apply(null,s)}}function K1(e){return le.isObject(e)&&e.isAxiosError===!0}const bm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(bm).forEach(([e,a])=>{bm[a]=e});function $x(e){const a=new qr(e),s=bx(qr.prototype.request,a);return le.extend(s,qr.prototype,a,{allOwnKeys:!0}),le.extend(s,a,null,{allOwnKeys:!0}),s.create=function(c){return $x(Hr(e,c))},s}const bt=$x(fo);bt.Axios=qr;bt.CanceledError=Ql;bt.CancelToken=Q1;bt.isCancel=Dx;bt.VERSION=Bx;bt.toFormData=su;bt.AxiosError=ft;bt.Cancel=bt.CanceledError;bt.all=function(a){return Promise.all(a)};bt.spread=Y1;bt.isAxiosError=K1;bt.mergeConfig=Hr;bt.AxiosHeaders=ya;bt.formToJSON=e=>Tx(le.isHTMLForm(e)?new FormData(e):e);bt.getAdapter=Lx.getAdapter;bt.HttpStatusCode=bm;bt.default=bt;const{Axios:nD,AxiosError:aD,CanceledError:sD,isCancel:rD,CancelToken:lD,VERSION:iD,all:oD,Cancel:cD,isAxiosError:uD,spread:dD,toFormData:fD,AxiosHeaders:mD,HttpStatusCode:hD,formToJSON:pD,getAdapter:gD,mergeConfig:bD}=bt,X1="medileser:draft:v1",$c="medileser:recovery:v1",Ic="medileser:recovery:intent",J1="vi.auth",W1="vi_auth",eE="medileser.selectedBank",tE=1440*60*1e3,eh=e=>{if(!e)return!1;const a=Date.parse(e);return Number.isNaN(a)?!1:Date.now()-a>tE},Lf=e=>{const{userId:a,bankId:s,oiId:i,type:c,bancadaId:d,isNew:f}=e;if(!a||s==null)return null;const h=i!=null?String(i):"new",g=`${X1}:u${a}:b${s}:oi:${h}`;if(c==="header")return`${g}:header`;const p=f?"new":d;return p==null?null:`${g}:bancada:${p}`},Yi=(e,a,s)=>{try{localStorage.setItem(e,JSON.stringify(a))}catch{}s&&Ix(s)},Bf=e=>{try{const a=localStorage.getItem(e);if(!a)return null;const s=JSON.parse(a);return!s||typeof s!="object"?null:eh(s.ts)?(localStorage.removeItem(e),null):s}catch{return null}},ir=e=>{try{localStorage.removeItem(e)}catch{}},Ix=e=>{try{localStorage.setItem($c,JSON.stringify(e))}catch{}},Fx=()=>{try{const e=localStorage.getItem($c);if(!e)return null;const a=JSON.parse(e);return!a||typeof a!="object"?null:eh(a.ts)?(localStorage.removeItem($c),null):a}catch{return null}},nE=()=>{try{localStorage.removeItem($c)}catch{}},aE=e=>{const a=e.userId??null,s=e.bankId??null,i=e.oiId??null;if(!a||s==null||!i)return;const c=Fx(),d={version:1,ts:new Date().toISOString(),userId:a,bankId:s,oiId:i,oiCode:e.oiCode??c?.oiCode??null,returnTo:e.returnTo??c?.returnTo??`/oi/${i}?mode=edit`,mode:"edit",modal:e.modal??c?.modal};Ix(d)},sE=e=>{const a={version:1,ts:new Date().toISOString(),userId:e.userId,bankId:e.bankId,oiId:e.oiId,modal:e.modal,returnTo:e.returnTo};try{sessionStorage.setItem(Ic,JSON.stringify(a))}catch{}},rE=()=>{try{const e=sessionStorage.getItem(Ic);if(!e)return null;const a=JSON.parse(e);return!a||typeof a!="object"?null:eh(a.ts)?(sessionStorage.removeItem(Ic),null):a}catch{return null}},qf=()=>{try{sessionStorage.removeItem(Ic)}catch{}},lE=()=>{try{const e=localStorage.getItem(J1)??localStorage.getItem(W1);if(!e)return{userId:null,bankId:null};const a=JSON.parse(e),s=Number(a.userId??a.id),i=a.bancoId!=null?Number(a.bancoId):null;return{userId:Number.isFinite(s)?s:null,bankId:i!=null&&Number.isFinite(i)?i:null}}catch{}return{userId:null,bankId:null}},iE=()=>{try{const e=localStorage.getItem(eE);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}},ym=(e,a)=>{const s=Fx();if(!s)return{target:null};if(!e||s.userId!==e)return{target:"/home",reason:"user"};if(a==null||s.bankId!==a)return{target:"/home",reason:"bank"};const i=s.returnTo||`/oi/${s.oiId}?mode=edit`,c=i==="/oi"||i==="/oi/"?`/oi/${s.oiId}?mode=edit`:i;return sE(s),{target:c,recovery:s}},$y="http://127.0.0.1:8000",Yl="openOiId",lu="vi.currentOI",Hx="vi.auth",Vx="vi_auth",oE="medileser.selectedBank",cE="medileser:selectedBank",vm="medileser.pendingToast",mo="medileser.pendingAction",uE="medileser:auth-expired",xm="medileser.sessionUserId",Nm="medileser.sessionBankId",Zx=()=>typeof window<"u"?window.location.port==="5173"?$y:window.location.origin:$y,Ke=bt.create({baseURL:Zx()}),Gx=bt.create({baseURL:Zx()}),Px=e=>{try{const a=localStorage.getItem(Hx)??localStorage.getItem(Vx);if(a){const{token:s}=JSON.parse(a);s&&(e.headers&&typeof e.headers.set=="function"?e.headers.set("Authorization",`Bearer ${s}`):e.headers={...e.headers||{},Authorization:`Bearer ${s}`})}}catch{}return e};Ke.interceptors.request.use(Px);Gx.interceptors.request.use(Px);function dE(){try{const e=sessionStorage.getItem(Yl);if(!e)return null;const a=Number(e);return Number.isFinite(a)&&a>0?a:null}catch{return null}}const Qx=()=>{try{const e=sessionStorage.getItem(lu);if(!e)return null;const a=JSON.parse(e),s=Number(a?.id);return Number.isFinite(s)&&s>0?s:null}catch{return null}};function fE(e){try{sessionStorage.setItem(Yl,String(e))}catch{}}function Yx(){try{sessionStorage.removeItem(Yl)}catch{}}async function ho(){const e=dE();if(e)try{await Gx.post(`/oi/${e}/close`)}catch{}finally{Yx()}}function mE(e){try{sessionStorage.setItem(vm,e)}catch{}}function hE(){try{const e=sessionStorage.getItem(vm);return e?(sessionStorage.removeItem(vm),e):null}catch{return null}}function pE(e){try{sessionStorage.setItem(mo,JSON.stringify(e))}catch{}}function gE(){try{const e=sessionStorage.getItem(mo);return e?JSON.parse(e):null}catch{return null}}function Tl(){try{sessionStorage.removeItem(mo)}catch{}}function Kx(){try{const e=sessionStorage.getItem(xm);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}}function Iy(e){try{e==null?sessionStorage.removeItem(xm):sessionStorage.setItem(xm,String(e))}catch{}}function Xx(){try{const e=sessionStorage.getItem(Nm);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}}function Fc(e){try{e==null?sessionStorage.removeItem(Nm):sessionStorage.setItem(Nm,String(e))}catch{}}function Jx(e){const a=Kx();if(e==null)return!1;if(a===null||a===e)return Iy(e),!1;try{const s=[];for(let i=0;i<sessionStorage.length;i+=1){const c=sessionStorage.key(i);c&&(c.startsWith("oi:")||c===Yl||c===lu||c===mo)&&s.push(c)}s.forEach(i=>sessionStorage.removeItem(i))}catch{}return Iy(e),Fc(null),!0}function bE(e){const a=Xx();if(e==null)return!1;if(a===null||a===e)return Fc(e),!1;try{const s=[];for(let i=0;i<sessionStorage.length;i+=1){const c=sessionStorage.key(i);c&&(c.startsWith("oi:")||c===Yl||c===lu||c===mo)&&s.push(c)}s.forEach(i=>sessionStorage.removeItem(i))}catch{}return Fc(e),!0}function yE(){try{localStorage.removeItem(Hx),localStorage.removeItem(Vx),localStorage.removeItem(oE)}catch{}finally{try{window.dispatchEvent(new Event(cE))}catch{}}try{sessionStorage.removeItem(lu),sessionStorage.removeItem(Yl)}catch{}}let Fy=!1;async function Wx(e){if(!Fy){Fy=!0;try{await ho()}finally{yE();const a=e?.pending?"Sesion expirada. Inicia sesion para guardar. Tu borrador esta guardado.":"Sesion invalida o expirada";if(mE(a),typeof window<"u"&&window.location.pathname!=="/login"){const s=e?.returnTo,i=s?`?returnTo=${encodeURIComponent(s)}${e?.pending?"&pending=1":""}`:"";window.location.replace(`/login${i}`)}}}}const Qi=e=>{const a=e?.response?.status,s=String(e?.response?.headers?.["x-code"]??"").toUpperCase();if(s==="PASSWORD_REQUIRED"||s==="WRONG_PASSWORD")return!1;if(a===401)return!0;const i=e?.response?.data?.detail;return!!(typeof i=="string"&&/token requerido/i.test(i))},$f=(e,a)=>{const s=a.match(e);if(!s)return null;const i=Number(s[1]);return Number.isFinite(i)?i:null},vE=e=>{if(typeof window>"u")return null;const a=String(e?.config?.method??"").toUpperCase(),s=String(e?.config?.url??""),i=`${window.location.pathname}${window.location.search}`;return a==="PUT"&&/\/oi\/\d+$/.test(s)?{type:"save_oi",route:i,oiId:$f(/\/oi\/(\d+)$/,s),ts:new Date().toISOString()}:a==="POST"&&s==="/oi"?{type:"save_oi",route:i,oiId:null,ts:new Date().toISOString()}:a==="POST"&&/\/oi\/\d+\/bancadas$/.test(s)?{type:"save_bancada",route:i,oiId:$f(/\/oi\/(\d+)\/bancadas$/,s),ts:new Date().toISOString()}:a==="PUT"&&/\/oi\/bancadas\/\d+$/.test(s)?{type:"save_bancada",route:i,bancadaId:$f(/\/oi\/bancadas\/(\d+)$/,s),ts:new Date().toISOString()}:null},xE=e=>{if(typeof window>"u")return;const{pathname:a,search:s,hash:i}=window.location,c=new URLSearchParams(s);(a==="/oi"||a.startsWith("/oi/"))&&c.set("mode","edit");const f=c.toString(),h=p=>`${p}${f?`?${f}`:""}${i??""}`;let g=h(a);if(a==="/oi"||a==="/oi/"){const p=e?.oiId??Qx();p&&(g=h(`/oi/${p}`))}return g},NE=(e,a,s,i,c)=>{try{window.dispatchEvent(new CustomEvent(uE,{detail:{status:a,detail:e,url:s,method:i,pending:c}}))}catch{}};Ke.interceptors.response.use(e=>e,async e=>{const a=e?.response?.status,s=String(e?.config?.url??""),i=e?.response?.data?.detail,c=String(e?.config?.method??"").toUpperCase();if(!s.includes("/auth/login")&&Qi(e)){const f=vE(e);f&&pE(f),NE(i,a,s,c,f);const h=xE(f),g=lE(),p=g.bankId??iE(),v=f?.oiId??Qx();if(g.userId&&p!=null&&v){const x=f?.type==="save_bancada"?{type:"bancada",bancadaId:f.bancadaId??null,isNew:f.bancadaId==null}:void 0;aE({userId:g.userId,bankId:p,oiId:v,returnTo:h,modal:x})}await Wx({returnTo:h,pending:!!f})}return Promise.reject(e)});const th=async()=>{const{data:e}=await Ke.get("/catalogs");return e},iu="medileser.selectedBank",Hc="medileser:selectedBank";function Va(e,a){if((a??"").toLowerCase()==="admin")return"admin";const i=(e??"").toLowerCase();return i==="admin"||i==="administrator"||i==="administrador"?"administrator":i==="technician"||i==="user"||i==="tecnico"||i==="tcnico"?"technician":"standard"}function Il(e){return Va(e)==="technician"}function nh(e){return(e?.username??e?.user??"").toLowerCase()==="admin"}function eo(){try{const e=localStorage.getItem(iu);if(!e)return null;const a=Number(e);return Number.isFinite(a)?a:null}catch{return null}}function e0(e){try{localStorage.setItem(iu,String(e))}finally{window.dispatchEvent(new Event(Hc))}}function t0(){try{localStorage.removeItem(iu)}finally{window.dispatchEvent(new Event(Hc))}}function SE(e){const a=()=>e(),s=i=>{i.key===iu&&e()};return window.addEventListener(Hc,a),window.addEventListener("storage",s),()=>{window.removeEventListener(Hc,a),window.removeEventListener("storage",s)}}async function jE(e,a){try{await Ke.put("/auth/password",{old_password:e,new_password:a})}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo actualizar la contrasea";throw new Error(i)}}async function wE(e){try{await ho();const{data:a}=await Ke.post("/auth/login",e);return localStorage.setItem("vi.auth",JSON.stringify(a)),Jx(a.userId??null),!Il(a.role)&&a.bancoId!=null&&Fc(a.bancoId),Il(a.role)?t0():e0(0),a}catch(a){const s=a?.response?.status,i=a?.response?.data?.detail,c=s===401?"Credenciales invlidas":i??a?.message??"Error de autenticacin";throw new Error(c)}}function Ln(){const e=localStorage.getItem("vi.auth")??localStorage.getItem("vi_auth");if(!e)return null;try{const a=JSON.parse(e),s=a.username??a.user??"",i=[a.firstName,a.lastName].filter(Boolean).join(" ")||void 0,c={user:a.user??a.username??"",userId:a.userId??a.id??0,username:s,firstName:a.firstName??"",lastName:a.lastName??"",fullName:a.fullName??i??s,bancoId:a.bancoId??null,token:a.token,techNumber:a.techNumber,role:Va(a.role,s),allowedModules:Array.isArray(a.allowedModules)?a.allowedModules.map(d=>d==="future_logistica"?"logistica":d):void 0};return c.username&&c.token?c:null}catch{return null}}async function n0(e){await ho();const{data:a}=await Ke.put("/auth/banco",{bancoId:e});return localStorage.setItem("vi.auth",JSON.stringify(a)),Jx(a.userId??null),bE(e),e0(e),a}function a0(){localStorage.removeItem("vi.auth"),localStorage.removeItem("vi_auth"),t0();try{sessionStorage.removeItem("vi.currentOI"),sessionStorage.removeItem("openOiId")}catch{}}async function _E(){await ho(),a0()}function to({label:e,inputId:a,className:s="",inputRef:i,helpText:c,...d}){const[f,h]=b.useState(!1),g=a||d.name||void 0,{ref:p,...v}=d,x=i??p;return l.jsxs("div",{className:s,children:[e&&l.jsx("label",{className:"form-label",htmlFor:g,children:e}),l.jsxs("div",{className:"input-group",children:[l.jsx("input",{...v,id:g,type:f?"text":"password",className:"form-control",ref:x}),l.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>h(S=>!S),tabIndex:-1,"aria-label":f?"Ocultar contrasea":"Mostrar contrasea",children:l.jsx("i",{className:`ti ${f?"ti-eye-off":"ti-eye"}`})})]}),c&&l.jsx("div",{className:"form-text",children:c})]})}function Kl({show:e=!0,label:a="Cargando..."}){return e?l.jsxs("div",{className:"vi-spinner-overlay",role:"status","aria-live":"polite","aria-label":a,children:[l.jsx("img",{className:"vi-spinner-logo",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"","aria-hidden":"true"}),l.jsx("span",{className:"visually-hidden",children:a})]}):null}const s0=b.createContext(null);function EE(e){return e==="success"?"success":e==="error"?"danger":e==="warning"?"warning":"secondary"}function CE({children:e}){const[a,s]=b.useState([]),i=b.useCallback(d=>{const f=Date.now()+Math.random(),{kind:h="info",duration:g=3500,...p}=d,v={id:f,kind:h,duration:g,...p};s(x=>[...x,v]),window.setTimeout(()=>{s(x=>x.filter(S=>S.id!==f))},g)},[]),c=d=>s(f=>f.filter(h=>h.id!==d));return l.jsxs(s0.Provider,{value:{push:i},children:[e,l.jsx("div",{className:"vi-toast-container position-fixed top-0 end-0 p-3",children:a.map(d=>l.jsx("div",{className:`toast show align-items-center text-bg-${EE(d.kind)} border-0 mb-2`,role:"alert",children:l.jsxs("div",{className:"d-flex",children:[l.jsxs("div",{className:"toast-body",children:[d.title&&l.jsx("strong",{className:"me-2",children:d.title}),d.message]}),l.jsx("button",{className:"btn-close btn-close-white me-2 m-auto","aria-label":"Close",onClick:()=>c(d.id)})]})},d.id))})]})}function Qr(){const e=b.useContext(s0);if(!e)throw new Error("useToast must be used inside <ToastProvider>");return{toast:e.push}}function AE(){const{register:e,handleSubmit:a}=eu({defaultValues:{username:"",password:""}}),{toast:s}=Qr(),i=new URLSearchParams(window.location.search),c=i.get("returnTo")??"",d=c.startsWith("/")?c:"/home",f=i.get("pending")==="1",[h,g]=b.useState(!1),p=b.useRef(d),[v,x]=b.useState(!1),[S,$]=b.useState(0),[_,E]=b.useState(!1),{data:O,isLoading:q,error:D,refetch:J}=Fr({queryKey:["catalogs"],queryFn:th,enabled:v}),z=O?.bancos??[];b.useEffect(()=>{const de=hE();de&&s({kind:"error",message:de})},[s]),b.useEffect(()=>{v&&(S>0||z.length>0&&$(z[0].id))},[S,z,v]);const T=async de=>{try{g(!0);const Ae=Kx(),je=await wE(de),ge=Ae!=null&&je.userId&&Ae!==je.userId,we=ym(je.userId,je.bancoId??0);if(we.target?p.current=we.target:f||ge?p.current="/home":p.current=d,Il(je.role)){x(!0),s({kind:"info",title:"Banco",message:"Seleccione el banco para continuar."});return}window.location.replace(p.current)}catch(Ae){const je=Ae?.message??Ae?.response?.data?.detail??(typeof Ae=="string"?Ae:"Error de autenticacin");s({kind:"error",title:"Login",message:String(je)})}finally{g(!1)}},G=S>0&&!_&&!q,L=async()=>{if(G)try{E(!0);const de=Xx(),Ae=de!=null&&de!==S,je=await n0(S),ge=ym(je.userId,je.bancoId??S);ge.target?p.current=ge.target:(f||Ae)&&(p.current="/home"),window.location.replace(p.current)}catch(de){const Ae=de?.response?.data?.detail??de?.message??"No se pudo guardar el banco.";s({kind:"error",title:"Banco",message:String(Ae)})}finally{E(!1)}},W=()=>{a0(),x(!1),$(0)};return l.jsxs("div",{className:"vi-login",children:[l.jsx(Kl,{show:h||_,label:_?"Guardando banco...":"Validando credenciales..."}),l.jsxs("div",{className:"vi-login__split",children:[l.jsx("section",{className:"vi-login__left",children:l.jsx("div",{className:"text-center text-md-start",children:l.jsx("h1",{className:"vi-title display-6 mb-0",children:"ACCESO AL SISTEMA MEDILESER APP"})})}),l.jsx("section",{className:"vi-login__right",children:l.jsx("div",{className:"card shadow-sm vi-login__card",children:l.jsxs("div",{className:"card-body p-4 p-md-5",children:[l.jsx("h2",{className:"h4 text-center mb-4",children:"Bienvenido"}),l.jsxs("form",{onSubmit:a(T),className:"row g-3",children:[l.jsxs("div",{className:"col-md-6",children:[l.jsx("label",{htmlFor:"username",className:"form-label",children:"Usuario"}),l.jsx("input",{id:"username",className:"form-control",autoFocus:!0,autoComplete:"username",...e("username",{required:!0})})]}),l.jsx("div",{className:"col-md-6",children:l.jsx(to,{label:"Contrasea",inputId:"password",autoComplete:"current-password",...e("password",{required:!0})})}),l.jsx("div",{className:"col-12 d-grid",children:l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h||v,"aria-busy":h?"true":"false",children:h?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Ingresando..."]}):"Ingresar"})})]})]})})})]}),v&&l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:l.jsx("div",{className:"modal-dialog modal-dialog-centered",children:l.jsxs("div",{className:"modal-content",children:[l.jsx("div",{className:"modal-header",children:l.jsx("h5",{className:"modal-title",children:"Seleccionar banco"})}),l.jsxs("div",{className:"modal-body",children:[l.jsx("p",{className:"text-muted mb-3",children:"Seleccione el banco de trabajo para continuar."}),l.jsx("label",{className:"form-label",htmlFor:"bankId",children:"Banco"}),l.jsx("select",{id:"bankId",className:"form-select",value:S||"",onChange:de=>$(Number(de.target.value)),disabled:q||_,children:z.map(de=>l.jsx("option",{value:de.id,children:de.name},de.id))}),D?l.jsxs("div",{className:"alert alert-danger mt-3 mb-0",role:"alert",children:["No se pudieron cargar los bancos.",l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger ms-2",onClick:()=>J(),children:"Reintentar"})]}):null]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:W,disabled:_,children:"Cancelar"}),l.jsx("button",{type:"button",className:"btn btn-primary",disabled:!G,onClick:L,children:_?"Guardando...":"Continuar"})]})]})})})]})}const Hy=(e,a,s)=>{if(e&&"reportValidity"in e){const i=qe(s,a);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},Sm=(e,a)=>{for(const s in a.fields){const i=a.fields[s];i&&i.ref&&"reportValidity"in i.ref?Hy(i.ref,s,e):i&&i.refs&&i.refs.forEach(c=>Hy(c,s,e))}},Vy=(e,a)=>{a.shouldUseNativeValidation&&Sm(e,a);const s={};for(const i in e){const c=qe(a.fields,i),d=Object.assign(e[i]||{},{ref:c&&c.ref});if(OE(a.names||Object.keys(e),i)){const f=Object.assign({},qe(s,i));Bt(f,"root",d),Bt(s,i,f)}else Bt(s,i,d)}return s},OE=(e,a)=>{const s=Zy(a);return e.some(i=>Zy(i).match(`^${s}\\.\\d+`))};function Zy(e){return e.replace(/\]|\[/g,"")}function Ce(e,a,s){function i(h,g){var p;Object.defineProperty(h,"_zod",{value:h._zod??{},enumerable:!1}),(p=h._zod).traits??(p.traits=new Set),h._zod.traits.add(e),a(h,g);for(const v in f.prototype)v in h||Object.defineProperty(h,v,{value:f.prototype[v].bind(h)});h._zod.constr=f,h._zod.def=g}const c=s?.Parent??Object;class d extends c{}Object.defineProperty(d,"name",{value:e});function f(h){var g;const p=s?.Parent?new d:this;i(p,h),(g=p._zod).deferred??(g.deferred=[]);for(const v of p._zod.deferred)v();return p}return Object.defineProperty(f,"init",{value:i}),Object.defineProperty(f,Symbol.hasInstance,{value:h=>s?.Parent&&h instanceof s.Parent?!0:h?._zod?.traits?.has(e)}),Object.defineProperty(f,"name",{value:e}),f}class ql extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class r0 extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}const l0={};function Vr(e){return l0}function RE(e){const a=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,c])=>a.indexOf(+i)===-1).map(([i,c])=>c)}function jm(e,a){return typeof a=="bigint"?a.toString():a}function ah(e){return{get value(){{const a=e();return Object.defineProperty(this,"value",{value:a}),a}}}}function sh(e){return e==null}function rh(e){const a=e.startsWith("^")?1:0,s=e.endsWith("$")?e.length-1:e.length;return e.slice(a,s)}function TE(e,a){const s=(e.toString().split(".")[1]||"").length,i=a.toString();let c=(i.split(".")[1]||"").length;if(c===0&&/\d?e-\d?/.test(i)){const g=i.match(/\d?e-(\d?)/);g?.[1]&&(c=Number.parseInt(g[1]))}const d=s>c?s:c,f=Number.parseInt(e.toFixed(d).replace(".","")),h=Number.parseInt(a.toFixed(d).replace(".",""));return f%h/10**d}const Gy=Symbol("evaluating");function Pt(e,a,s){let i;Object.defineProperty(e,a,{get(){if(i!==Gy)return i===void 0&&(i=Gy,i=s()),i},set(c){Object.defineProperty(e,a,{value:c})},configurable:!0})}function Yr(e,a,s){Object.defineProperty(e,a,{value:s,writable:!0,enumerable:!0,configurable:!0})}function Kr(...e){const a={};for(const s of e){const i=Object.getOwnPropertyDescriptors(s);Object.assign(a,i)}return Object.defineProperties({},a)}function Py(e){return JSON.stringify(e)}const i0="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Vc(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const DE=ah(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function no(e){if(Vc(e)===!1)return!1;const a=e.constructor;if(a===void 0)return!0;const s=a.prototype;return!(Vc(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}function o0(e){return no(e)?{...e}:Array.isArray(e)?[...e]:e}const zE=new Set(["string","number","symbol"]);function ou(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function dr(e,a,s){const i=new e._zod.constr(a??e._zod.def);return(!a||s?.parent)&&(i._zod.parent=e),i}function tt(e){const a=e;if(!a)return{};if(typeof a=="string")return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");a.error=a.message}return delete a.message,typeof a.error=="string"?{...a,error:()=>a.error}:a}function kE(e){return Object.keys(e).filter(a=>e[a]._zod.optin==="optional"&&e[a]._zod.optout==="optional")}const ME={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function UE(e,a){const s=e._zod.def,i=Kr(e._zod.def,{get shape(){const c={};for(const d in a){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);a[d]&&(c[d]=s.shape[d])}return Yr(this,"shape",c),c},checks:[]});return dr(e,i)}function LE(e,a){const s=e._zod.def,i=Kr(e._zod.def,{get shape(){const c={...e._zod.def.shape};for(const d in a){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);a[d]&&delete c[d]}return Yr(this,"shape",c),c},checks:[]});return dr(e,i)}function BE(e,a){if(!no(a))throw new Error("Invalid input to extend: expected a plain object");const s=e._zod.def.checks;if(s&&s.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const c=Kr(e._zod.def,{get shape(){const d={...e._zod.def.shape,...a};return Yr(this,"shape",d),d},checks:[]});return dr(e,c)}function qE(e,a){if(!no(a))throw new Error("Invalid input to safeExtend: expected a plain object");const s={...e._zod.def,get shape(){const i={...e._zod.def.shape,...a};return Yr(this,"shape",i),i},checks:e._zod.def.checks};return dr(e,s)}function $E(e,a){const s=Kr(e._zod.def,{get shape(){const i={...e._zod.def.shape,...a._zod.def.shape};return Yr(this,"shape",i),i},get catchall(){return a._zod.def.catchall},checks:[]});return dr(e,s)}function IE(e,a,s){const i=Kr(a._zod.def,{get shape(){const c=a._zod.def.shape,d={...c};if(s)for(const f in s){if(!(f in c))throw new Error(`Unrecognized key: "${f}"`);s[f]&&(d[f]=e?new e({type:"optional",innerType:c[f]}):c[f])}else for(const f in c)d[f]=e?new e({type:"optional",innerType:c[f]}):c[f];return Yr(this,"shape",d),d},checks:[]});return dr(a,i)}function FE(e,a,s){const i=Kr(a._zod.def,{get shape(){const c=a._zod.def.shape,d={...c};if(s)for(const f in s){if(!(f in d))throw new Error(`Unrecognized key: "${f}"`);s[f]&&(d[f]=new e({type:"nonoptional",innerType:c[f]}))}else for(const f in c)d[f]=new e({type:"nonoptional",innerType:c[f]});return Yr(this,"shape",d),d},checks:[]});return dr(a,i)}function Ll(e,a=0){if(e.aborted===!0)return!0;for(let s=a;s<e.issues.length;s++)if(e.issues[s]?.continue!==!0)return!0;return!1}function c0(e,a){return a.map(s=>{var i;return(i=s).path??(i.path=[]),s.path.unshift(e),s})}function jc(e){return typeof e=="string"?e:e?.message}function Zr(e,a,s){const i={...e,path:e.path??[]};if(!e.message){const c=jc(e.inst?._zod.def?.error?.(e))??jc(a?.error?.(e))??jc(s.customError?.(e))??jc(s.localeError?.(e))??"Invalid input";i.message=c}return delete i.inst,delete i.continue,a?.reportInput||delete i.input,i}function lh(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function ao(...e){const[a,s,i]=e;return typeof a=="string"?{message:a,code:"custom",input:s,inst:i}:{...a}}const u0=(e,a)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:a,enumerable:!1}),e.message=JSON.stringify(a,jm,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},ih=Ce("$ZodError",u0),cu=Ce("$ZodError",u0,{Parent:Error});function HE(e,a=s=>s.message){const s={},i=[];for(const c of e.issues)c.path.length>0?(s[c.path[0]]=s[c.path[0]]||[],s[c.path[0]].push(a(c))):i.push(a(c));return{formErrors:i,fieldErrors:s}}function VE(e,a=s=>s.message){const s={_errors:[]},i=c=>{for(const d of c.issues)if(d.code==="invalid_union"&&d.errors.length)d.errors.map(f=>i({issues:f}));else if(d.code==="invalid_key")i({issues:d.issues});else if(d.code==="invalid_element")i({issues:d.issues});else if(d.path.length===0)s._errors.push(a(d));else{let f=s,h=0;for(;h<d.path.length;){const g=d.path[h];h===d.path.length-1?(f[g]=f[g]||{_errors:[]},f[g]._errors.push(a(d))):f[g]=f[g]||{_errors:[]},f=f[g],h++}}};return i(e),s}const uu=e=>(a,s,i,c)=>{const d=i?Object.assign(i,{async:!1}):{async:!1},f=a._zod.run({value:s,issues:[]},d);if(f instanceof Promise)throw new ql;if(f.issues.length){const h=new(c?.Err??e)(f.issues.map(g=>Zr(g,d,Vr())));throw i0(h,c?.callee),h}return f.value},ZE=uu(cu),du=e=>async(a,s,i,c)=>{const d=i?Object.assign(i,{async:!0}):{async:!0};let f=a._zod.run({value:s,issues:[]},d);if(f instanceof Promise&&(f=await f),f.issues.length){const h=new(c?.Err??e)(f.issues.map(g=>Zr(g,d,Vr())));throw i0(h,c?.callee),h}return f.value},GE=du(cu),fu=e=>(a,s,i)=>{const c=i?{...i,async:!1}:{async:!1},d=a._zod.run({value:s,issues:[]},c);if(d instanceof Promise)throw new ql;return d.issues.length?{success:!1,error:new(e??ih)(d.issues.map(f=>Zr(f,c,Vr())))}:{success:!0,data:d.value}},PE=fu(cu),mu=e=>async(a,s,i)=>{const c=i?Object.assign(i,{async:!0}):{async:!0};let d=a._zod.run({value:s,issues:[]},c);return d instanceof Promise&&(d=await d),d.issues.length?{success:!1,error:new e(d.issues.map(f=>Zr(f,c,Vr())))}:{success:!0,data:d.value}},QE=mu(cu),YE=e=>(a,s,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return uu(e)(a,s,c)},KE=e=>(a,s,i)=>uu(e)(a,s,i),XE=e=>async(a,s,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return du(e)(a,s,c)},JE=e=>async(a,s,i)=>du(e)(a,s,i),WE=e=>(a,s,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return fu(e)(a,s,c)},eC=e=>(a,s,i)=>fu(e)(a,s,i),tC=e=>async(a,s,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return mu(e)(a,s,c)},nC=e=>async(a,s,i)=>mu(e)(a,s,i),aC=/^[cC][^\s-]{8,}$/,sC=/^[0-9a-z]+$/,rC=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,lC=/^[0-9a-vA-V]{20}$/,iC=/^[A-Za-z0-9]{27}$/,oC=/^[a-zA-Z0-9_-]{21}$/,cC=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,uC=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Qy=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,dC=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,fC="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function mC(){return new RegExp(fC,"u")}const hC=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,pC=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,gC=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,bC=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,yC=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,d0=/^[A-Za-z0-9_-]*$/,vC=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,xC=/^\+(?:[0-9]){6,14}[0-9]$/,f0="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",NC=new RegExp(`^${f0}$`);function m0(e){const a="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${a}`:e.precision===0?`${a}:[0-5]\\d`:`${a}:[0-5]\\d\\.\\d{${e.precision}}`:`${a}(?::[0-5]\\d(?:\\.\\d+)?)?`}function SC(e){return new RegExp(`^${m0(e)}$`)}function jC(e){const a=m0({precision:e.precision}),s=["Z"];e.local&&s.push(""),e.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${a}(?:${s.join("|")})`;return new RegExp(`^${f0}T(?:${i})$`)}const wC=e=>{const a=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${a}$`)},_C=/^-?\d+$/,EC=/^-?\d+(?:\.\d+)?/,CC=/^[^A-Z]*$/,AC=/^[^a-z]*$/,va=Ce("$ZodCheck",(e,a)=>{var s;e._zod??(e._zod={}),e._zod.def=a,(s=e._zod).onattach??(s.onattach=[])}),h0={number:"number",bigint:"bigint",object:"date"},p0=Ce("$ZodCheckLessThan",(e,a)=>{va.init(e,a);const s=h0[typeof a.value];e._zod.onattach.push(i=>{const c=i._zod.bag,d=(a.inclusive?c.maximum:c.exclusiveMaximum)??Number.POSITIVE_INFINITY;a.value<d&&(a.inclusive?c.maximum=a.value:c.exclusiveMaximum=a.value)}),e._zod.check=i=>{(a.inclusive?i.value<=a.value:i.value<a.value)||i.issues.push({origin:s,code:"too_big",maximum:a.value,input:i.value,inclusive:a.inclusive,inst:e,continue:!a.abort})}}),g0=Ce("$ZodCheckGreaterThan",(e,a)=>{va.init(e,a);const s=h0[typeof a.value];e._zod.onattach.push(i=>{const c=i._zod.bag,d=(a.inclusive?c.minimum:c.exclusiveMinimum)??Number.NEGATIVE_INFINITY;a.value>d&&(a.inclusive?c.minimum=a.value:c.exclusiveMinimum=a.value)}),e._zod.check=i=>{(a.inclusive?i.value>=a.value:i.value>a.value)||i.issues.push({origin:s,code:"too_small",minimum:a.value,input:i.value,inclusive:a.inclusive,inst:e,continue:!a.abort})}}),OC=Ce("$ZodCheckMultipleOf",(e,a)=>{va.init(e,a),e._zod.onattach.push(s=>{var i;(i=s._zod.bag).multipleOf??(i.multipleOf=a.value)}),e._zod.check=s=>{if(typeof s.value!=typeof a.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof s.value=="bigint"?s.value%a.value===BigInt(0):TE(s.value,a.value)===0)||s.issues.push({origin:typeof s.value,code:"not_multiple_of",divisor:a.value,input:s.value,inst:e,continue:!a.abort})}}),RC=Ce("$ZodCheckNumberFormat",(e,a)=>{va.init(e,a),a.format=a.format||"float64";const s=a.format?.includes("int"),i=s?"int":"number",[c,d]=ME[a.format];e._zod.onattach.push(f=>{const h=f._zod.bag;h.format=a.format,h.minimum=c,h.maximum=d,s&&(h.pattern=_C)}),e._zod.check=f=>{const h=f.value;if(s){if(!Number.isInteger(h)){f.issues.push({expected:i,format:a.format,code:"invalid_type",continue:!1,input:h,inst:e});return}if(!Number.isSafeInteger(h)){h>0?f.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,continue:!a.abort}):f.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,continue:!a.abort});return}}h<c&&f.issues.push({origin:"number",input:h,code:"too_small",minimum:c,inclusive:!0,inst:e,continue:!a.abort}),h>d&&f.issues.push({origin:"number",input:h,code:"too_big",maximum:d,inst:e})}}),TC=Ce("$ZodCheckMaxLength",(e,a)=>{var s;va.init(e,a),(s=e._zod.def).when??(s.when=i=>{const c=i.value;return!sh(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag.maximum??Number.POSITIVE_INFINITY;a.maximum<c&&(i._zod.bag.maximum=a.maximum)}),e._zod.check=i=>{const c=i.value;if(c.length<=a.maximum)return;const f=lh(c);i.issues.push({origin:f,code:"too_big",maximum:a.maximum,inclusive:!0,input:c,inst:e,continue:!a.abort})}}),DC=Ce("$ZodCheckMinLength",(e,a)=>{var s;va.init(e,a),(s=e._zod.def).when??(s.when=i=>{const c=i.value;return!sh(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;a.minimum>c&&(i._zod.bag.minimum=a.minimum)}),e._zod.check=i=>{const c=i.value;if(c.length>=a.minimum)return;const f=lh(c);i.issues.push({origin:f,code:"too_small",minimum:a.minimum,inclusive:!0,input:c,inst:e,continue:!a.abort})}}),zC=Ce("$ZodCheckLengthEquals",(e,a)=>{var s;va.init(e,a),(s=e._zod.def).when??(s.when=i=>{const c=i.value;return!sh(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag;c.minimum=a.length,c.maximum=a.length,c.length=a.length}),e._zod.check=i=>{const c=i.value,d=c.length;if(d===a.length)return;const f=lh(c),h=d>a.length;i.issues.push({origin:f,...h?{code:"too_big",maximum:a.length}:{code:"too_small",minimum:a.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!a.abort})}}),hu=Ce("$ZodCheckStringFormat",(e,a)=>{var s,i;va.init(e,a),e._zod.onattach.push(c=>{const d=c._zod.bag;d.format=a.format,a.pattern&&(d.patterns??(d.patterns=new Set),d.patterns.add(a.pattern))}),a.pattern?(s=e._zod).check??(s.check=c=>{a.pattern.lastIndex=0,!a.pattern.test(c.value)&&c.issues.push({origin:"string",code:"invalid_format",format:a.format,input:c.value,...a.pattern?{pattern:a.pattern.toString()}:{},inst:e,continue:!a.abort})}):(i=e._zod).check??(i.check=()=>{})}),kC=Ce("$ZodCheckRegex",(e,a)=>{hu.init(e,a),e._zod.check=s=>{a.pattern.lastIndex=0,!a.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:a.pattern.toString(),inst:e,continue:!a.abort})}}),MC=Ce("$ZodCheckLowerCase",(e,a)=>{a.pattern??(a.pattern=CC),hu.init(e,a)}),UC=Ce("$ZodCheckUpperCase",(e,a)=>{a.pattern??(a.pattern=AC),hu.init(e,a)}),LC=Ce("$ZodCheckIncludes",(e,a)=>{va.init(e,a);const s=ou(a.includes),i=new RegExp(typeof a.position=="number"?`^.{${a.position}}${s}`:s);a.pattern=i,e._zod.onattach.push(c=>{const d=c._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(i)}),e._zod.check=c=>{c.value.includes(a.includes,a.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:a.includes,input:c.value,inst:e,continue:!a.abort})}}),BC=Ce("$ZodCheckStartsWith",(e,a)=>{va.init(e,a);const s=new RegExp(`^${ou(a.prefix)}.*`);a.pattern??(a.pattern=s),e._zod.onattach.push(i=>{const c=i._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(s)}),e._zod.check=i=>{i.value.startsWith(a.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:a.prefix,input:i.value,inst:e,continue:!a.abort})}}),qC=Ce("$ZodCheckEndsWith",(e,a)=>{va.init(e,a);const s=new RegExp(`.*${ou(a.suffix)}$`);a.pattern??(a.pattern=s),e._zod.onattach.push(i=>{const c=i._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(s)}),e._zod.check=i=>{i.value.endsWith(a.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:a.suffix,input:i.value,inst:e,continue:!a.abort})}}),$C=Ce("$ZodCheckOverwrite",(e,a)=>{va.init(e,a),e._zod.check=s=>{s.value=a.tx(s.value)}});class IC{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if(typeof a=="function"){a(this,{execution:"sync"}),a(this,{execution:"async"});return}const i=a.split(`
`).filter(f=>f),c=Math.min(...i.map(f=>f.length-f.trimStart().length)),d=i.map(f=>f.slice(c)).map(f=>" ".repeat(this.indent*2)+f);for(const f of d)this.content.push(f)}compile(){const a=Function,s=this?.args,c=[...(this?.content??[""]).map(d=>`  ${d}`)];return new a(...s,c.join(`
`))}}const FC={major:4,minor:1,patch:12},On=Ce("$ZodType",(e,a)=>{var s;e??(e={}),e._zod.def=a,e._zod.bag=e._zod.bag||{},e._zod.version=FC;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const c of i)for(const d of c._zod.onattach)d(e);if(i.length===0)(s=e._zod).deferred??(s.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const c=(f,h,g)=>{let p=Ll(f),v;for(const x of h){if(x._zod.def.when){if(!x._zod.def.when(f))continue}else if(p)continue;const S=f.issues.length,$=x._zod.check(f);if($ instanceof Promise&&g?.async===!1)throw new ql;if(v||$ instanceof Promise)v=(v??Promise.resolve()).then(async()=>{await $,f.issues.length!==S&&(p||(p=Ll(f,S)))});else{if(f.issues.length===S)continue;p||(p=Ll(f,S))}}return v?v.then(()=>f):f},d=(f,h,g)=>{if(Ll(f))return f.aborted=!0,f;const p=c(h,i,g);if(p instanceof Promise){if(g.async===!1)throw new ql;return p.then(v=>e._zod.parse(v,g))}return e._zod.parse(p,g)};e._zod.run=(f,h)=>{if(h.skipChecks)return e._zod.parse(f,h);if(h.direction==="backward"){const p=e._zod.parse({value:f.value,issues:[]},{...h,skipChecks:!0});return p instanceof Promise?p.then(v=>d(v,f,h)):d(p,f,h)}const g=e._zod.parse(f,h);if(g instanceof Promise){if(h.async===!1)throw new ql;return g.then(p=>c(p,i,h))}return c(g,i,h)}}e["~standard"]={validate:c=>{try{const d=PE(e,c);return d.success?{value:d.data}:{issues:d.error?.issues}}catch{return QE(e,c).then(f=>f.success?{value:f.data}:{issues:f.error?.issues})}},vendor:"zod",version:1}}),oh=Ce("$ZodString",(e,a)=>{On.init(e,a),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??wC(e._zod.bag),e._zod.parse=(s,i)=>{if(a.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),nn=Ce("$ZodStringFormat",(e,a)=>{hu.init(e,a),oh.init(e,a)}),HC=Ce("$ZodGUID",(e,a)=>{a.pattern??(a.pattern=uC),nn.init(e,a)}),VC=Ce("$ZodUUID",(e,a)=>{if(a.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[a.version];if(i===void 0)throw new Error(`Invalid UUID version: "${a.version}"`);a.pattern??(a.pattern=Qy(i))}else a.pattern??(a.pattern=Qy());nn.init(e,a)}),ZC=Ce("$ZodEmail",(e,a)=>{a.pattern??(a.pattern=dC),nn.init(e,a)}),GC=Ce("$ZodURL",(e,a)=>{nn.init(e,a),e._zod.check=s=>{try{const i=s.value.trim(),c=new URL(i);a.hostname&&(a.hostname.lastIndex=0,a.hostname.test(c.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:vC.source,input:s.value,inst:e,continue:!a.abort})),a.protocol&&(a.protocol.lastIndex=0,a.protocol.test(c.protocol.endsWith(":")?c.protocol.slice(0,-1):c.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:a.protocol.source,input:s.value,inst:e,continue:!a.abort})),a.normalize?s.value=c.href:s.value=i;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:e,continue:!a.abort})}}}),PC=Ce("$ZodEmoji",(e,a)=>{a.pattern??(a.pattern=mC()),nn.init(e,a)}),QC=Ce("$ZodNanoID",(e,a)=>{a.pattern??(a.pattern=oC),nn.init(e,a)}),YC=Ce("$ZodCUID",(e,a)=>{a.pattern??(a.pattern=aC),nn.init(e,a)}),KC=Ce("$ZodCUID2",(e,a)=>{a.pattern??(a.pattern=sC),nn.init(e,a)}),XC=Ce("$ZodULID",(e,a)=>{a.pattern??(a.pattern=rC),nn.init(e,a)}),JC=Ce("$ZodXID",(e,a)=>{a.pattern??(a.pattern=lC),nn.init(e,a)}),WC=Ce("$ZodKSUID",(e,a)=>{a.pattern??(a.pattern=iC),nn.init(e,a)}),eA=Ce("$ZodISODateTime",(e,a)=>{a.pattern??(a.pattern=jC(a)),nn.init(e,a)}),tA=Ce("$ZodISODate",(e,a)=>{a.pattern??(a.pattern=NC),nn.init(e,a)}),nA=Ce("$ZodISOTime",(e,a)=>{a.pattern??(a.pattern=SC(a)),nn.init(e,a)}),aA=Ce("$ZodISODuration",(e,a)=>{a.pattern??(a.pattern=cC),nn.init(e,a)}),sA=Ce("$ZodIPv4",(e,a)=>{a.pattern??(a.pattern=hC),nn.init(e,a),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format="ipv4"})}),rA=Ce("$ZodIPv6",(e,a)=>{a.pattern??(a.pattern=pC),nn.init(e,a),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format="ipv6"}),e._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:e,continue:!a.abort})}}}),lA=Ce("$ZodCIDRv4",(e,a)=>{a.pattern??(a.pattern=gC),nn.init(e,a)}),iA=Ce("$ZodCIDRv6",(e,a)=>{a.pattern??(a.pattern=bC),nn.init(e,a),e._zod.check=s=>{const i=s.value.split("/");try{if(i.length!==2)throw new Error;const[c,d]=i;if(!d)throw new Error;const f=Number(d);if(`${f}`!==d)throw new Error;if(f<0||f>128)throw new Error;new URL(`http://[${c}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:e,continue:!a.abort})}}});function b0(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const oA=Ce("$ZodBase64",(e,a)=>{a.pattern??(a.pattern=yC),nn.init(e,a),e._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64"}),e._zod.check=s=>{b0(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:e,continue:!a.abort})}});function cA(e){if(!d0.test(e))return!1;const a=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),s=a.padEnd(Math.ceil(a.length/4)*4,"=");return b0(s)}const uA=Ce("$ZodBase64URL",(e,a)=>{a.pattern??(a.pattern=d0),nn.init(e,a),e._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64url"}),e._zod.check=s=>{cA(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:e,continue:!a.abort})}}),dA=Ce("$ZodE164",(e,a)=>{a.pattern??(a.pattern=xC),nn.init(e,a)});function fA(e,a=null){try{const s=e.split(".");if(s.length!==3)return!1;const[i]=s;if(!i)return!1;const c=JSON.parse(atob(i));return!("typ"in c&&c?.typ!=="JWT"||!c.alg||a&&(!("alg"in c)||c.alg!==a))}catch{return!1}}const mA=Ce("$ZodJWT",(e,a)=>{nn.init(e,a),e._zod.check=s=>{fA(s.value,a.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:e,continue:!a.abort})}}),y0=Ce("$ZodNumber",(e,a)=>{On.init(e,a),e._zod.pattern=e._zod.bag.pattern??EC,e._zod.parse=(s,i)=>{if(a.coerce)try{s.value=Number(s.value)}catch{}const c=s.value;if(typeof c=="number"&&!Number.isNaN(c)&&Number.isFinite(c))return s;const d=typeof c=="number"?Number.isNaN(c)?"NaN":Number.isFinite(c)?void 0:"Infinity":void 0;return s.issues.push({expected:"number",code:"invalid_type",input:c,inst:e,...d?{received:d}:{}}),s}}),hA=Ce("$ZodNumber",(e,a)=>{RC.init(e,a),y0.init(e,a)}),pA=Ce("$ZodUnknown",(e,a)=>{On.init(e,a),e._zod.parse=s=>s}),gA=Ce("$ZodNever",(e,a)=>{On.init(e,a),e._zod.parse=(s,i)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:e}),s)});function Yy(e,a,s){e.issues.length&&a.issues.push(...c0(s,e.issues)),a.value[s]=e.value}const bA=Ce("$ZodArray",(e,a)=>{On.init(e,a),e._zod.parse=(s,i)=>{const c=s.value;if(!Array.isArray(c))return s.issues.push({expected:"array",code:"invalid_type",input:c,inst:e}),s;s.value=Array(c.length);const d=[];for(let f=0;f<c.length;f++){const h=c[f],g=a.element._zod.run({value:h,issues:[]},i);g instanceof Promise?d.push(g.then(p=>Yy(p,s,f))):Yy(g,s,f)}return d.length?Promise.all(d).then(()=>s):s}});function Zc(e,a,s,i){e.issues.length&&a.issues.push(...c0(s,e.issues)),e.value===void 0?s in i&&(a.value[s]=void 0):a.value[s]=e.value}function v0(e){const a=Object.keys(e.shape);for(const i of a)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const s=kE(e.shape);return{...e,keys:a,keySet:new Set(a),numKeys:a.length,optionalKeys:new Set(s)}}function x0(e,a,s,i,c,d){const f=[],h=c.keySet,g=c.catchall._zod,p=g.def.type;for(const v of Object.keys(a)){if(h.has(v))continue;if(p==="never"){f.push(v);continue}const x=g.run({value:a[v],issues:[]},i);x instanceof Promise?e.push(x.then(S=>Zc(S,s,v,a))):Zc(x,s,v,a)}return f.length&&s.issues.push({code:"unrecognized_keys",keys:f,input:a,inst:d}),e.length?Promise.all(e).then(()=>s):s}const yA=Ce("$ZodObject",(e,a)=>{if(On.init(e,a),!Object.getOwnPropertyDescriptor(a,"shape")?.get){const h=a.shape;Object.defineProperty(a,"shape",{get:()=>{const g={...h};return Object.defineProperty(a,"shape",{value:g}),g}})}const i=ah(()=>v0(a));Pt(e._zod,"propValues",()=>{const h=a.shape,g={};for(const p in h){const v=h[p]._zod;if(v.values){g[p]??(g[p]=new Set);for(const x of v.values)g[p].add(x)}}return g});const c=Vc,d=a.catchall;let f;e._zod.parse=(h,g)=>{f??(f=i.value);const p=h.value;if(!c(p))return h.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),h;h.value={};const v=[],x=f.shape;for(const S of f.keys){const _=x[S]._zod.run({value:p[S],issues:[]},g);_ instanceof Promise?v.push(_.then(E=>Zc(E,h,S,p))):Zc(_,h,S,p)}return d?x0(v,p,h,g,i.value,e):v.length?Promise.all(v).then(()=>h):h}}),vA=Ce("$ZodObjectJIT",(e,a)=>{yA.init(e,a);const s=e._zod.parse,i=ah(()=>v0(a)),c=S=>{const $=new IC(["shape","payload","ctx"]),_=i.value,E=J=>{const z=Py(J);return`shape[${z}]._zod.run({ value: input[${z}], issues: [] }, ctx)`};$.write("const input = payload.value;");const O=Object.create(null);let q=0;for(const J of _.keys)O[J]=`key_${q++}`;$.write("const newResult = {};");for(const J of _.keys){const z=O[J],T=Py(J);$.write(`const ${z} = ${E(J)};`),$.write(`
        if (${z}.issues.length) {
          payload.issues = payload.issues.concat(${z}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${T}, ...iss.path] : [${T}]
          })));
        }
        
        
        if (${z}.value === undefined) {
          if (${T} in input) {
            newResult[${T}] = undefined;
          }
        } else {
          newResult[${T}] = ${z}.value;
        }
        
      `)}$.write("payload.value = newResult;"),$.write("return payload;");const D=$.compile();return(J,z)=>D(S,J,z)};let d;const f=Vc,h=!l0.jitless,p=h&&DE.value,v=a.catchall;let x;e._zod.parse=(S,$)=>{x??(x=i.value);const _=S.value;return f(_)?h&&p&&$?.async===!1&&$.jitless!==!0?(d||(d=c(a.shape)),S=d(S,$),v?x0([],_,S,$,x,e):S):s(S,$):(S.issues.push({expected:"object",code:"invalid_type",input:_,inst:e}),S)}});function Ky(e,a,s,i){for(const d of e)if(d.issues.length===0)return a.value=d.value,a;const c=e.filter(d=>!Ll(d));return c.length===1?(a.value=c[0].value,c[0]):(a.issues.push({code:"invalid_union",input:a.value,inst:s,errors:e.map(d=>d.issues.map(f=>Zr(f,i,Vr())))}),a)}const xA=Ce("$ZodUnion",(e,a)=>{On.init(e,a),Pt(e._zod,"optin",()=>a.options.some(c=>c._zod.optin==="optional")?"optional":void 0),Pt(e._zod,"optout",()=>a.options.some(c=>c._zod.optout==="optional")?"optional":void 0),Pt(e._zod,"values",()=>{if(a.options.every(c=>c._zod.values))return new Set(a.options.flatMap(c=>Array.from(c._zod.values)))}),Pt(e._zod,"pattern",()=>{if(a.options.every(c=>c._zod.pattern)){const c=a.options.map(d=>d._zod.pattern);return new RegExp(`^(${c.map(d=>rh(d.source)).join("|")})$`)}});const s=a.options.length===1,i=a.options[0]._zod.run;e._zod.parse=(c,d)=>{if(s)return i(c,d);let f=!1;const h=[];for(const g of a.options){const p=g._zod.run({value:c.value,issues:[]},d);if(p instanceof Promise)h.push(p),f=!0;else{if(p.issues.length===0)return p;h.push(p)}}return f?Promise.all(h).then(g=>Ky(g,c,e,d)):Ky(h,c,e,d)}}),NA=Ce("$ZodIntersection",(e,a)=>{On.init(e,a),e._zod.parse=(s,i)=>{const c=s.value,d=a.left._zod.run({value:c,issues:[]},i),f=a.right._zod.run({value:c,issues:[]},i);return d instanceof Promise||f instanceof Promise?Promise.all([d,f]).then(([g,p])=>Xy(s,g,p)):Xy(s,d,f)}});function wm(e,a){if(e===a)return{valid:!0,data:e};if(e instanceof Date&&a instanceof Date&&+e==+a)return{valid:!0,data:e};if(no(e)&&no(a)){const s=Object.keys(a),i=Object.keys(e).filter(d=>s.indexOf(d)!==-1),c={...e,...a};for(const d of i){const f=wm(e[d],a[d]);if(!f.valid)return{valid:!1,mergeErrorPath:[d,...f.mergeErrorPath]};c[d]=f.data}return{valid:!0,data:c}}if(Array.isArray(e)&&Array.isArray(a)){if(e.length!==a.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let i=0;i<e.length;i++){const c=e[i],d=a[i],f=wm(c,d);if(!f.valid)return{valid:!1,mergeErrorPath:[i,...f.mergeErrorPath]};s.push(f.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function Xy(e,a,s){if(a.issues.length&&e.issues.push(...a.issues),s.issues.length&&e.issues.push(...s.issues),Ll(e))return e;const i=wm(a.value,s.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const SA=Ce("$ZodEnum",(e,a)=>{On.init(e,a);const s=RE(a.entries),i=new Set(s);e._zod.values=i,e._zod.pattern=new RegExp(`^(${s.filter(c=>zE.has(typeof c)).map(c=>typeof c=="string"?ou(c):c.toString()).join("|")})$`),e._zod.parse=(c,d)=>{const f=c.value;return i.has(f)||c.issues.push({code:"invalid_value",values:s,input:f,inst:e}),c}}),jA=Ce("$ZodTransform",(e,a)=>{On.init(e,a),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new r0(e.constructor.name);const c=a.transform(s.value,s);if(i.async)return(c instanceof Promise?c:Promise.resolve(c)).then(f=>(s.value=f,s));if(c instanceof Promise)throw new ql;return s.value=c,s}});function Jy(e,a){return e.issues.length&&a===void 0?{issues:[],value:void 0}:e}const wA=Ce("$ZodOptional",(e,a)=>{On.init(e,a),e._zod.optin="optional",e._zod.optout="optional",Pt(e._zod,"values",()=>a.innerType._zod.values?new Set([...a.innerType._zod.values,void 0]):void 0),Pt(e._zod,"pattern",()=>{const s=a.innerType._zod.pattern;return s?new RegExp(`^(${rh(s.source)})?$`):void 0}),e._zod.parse=(s,i)=>{if(a.innerType._zod.optin==="optional"){const c=a.innerType._zod.run(s,i);return c instanceof Promise?c.then(d=>Jy(d,s.value)):Jy(c,s.value)}return s.value===void 0?s:a.innerType._zod.run(s,i)}}),_A=Ce("$ZodNullable",(e,a)=>{On.init(e,a),Pt(e._zod,"optin",()=>a.innerType._zod.optin),Pt(e._zod,"optout",()=>a.innerType._zod.optout),Pt(e._zod,"pattern",()=>{const s=a.innerType._zod.pattern;return s?new RegExp(`^(${rh(s.source)}|null)$`):void 0}),Pt(e._zod,"values",()=>a.innerType._zod.values?new Set([...a.innerType._zod.values,null]):void 0),e._zod.parse=(s,i)=>s.value===null?s:a.innerType._zod.run(s,i)}),EA=Ce("$ZodDefault",(e,a)=>{On.init(e,a),e._zod.optin="optional",Pt(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return a.innerType._zod.run(s,i);if(s.value===void 0)return s.value=a.defaultValue,s;const c=a.innerType._zod.run(s,i);return c instanceof Promise?c.then(d=>Wy(d,a)):Wy(c,a)}});function Wy(e,a){return e.value===void 0&&(e.value=a.defaultValue),e}const CA=Ce("$ZodPrefault",(e,a)=>{On.init(e,a),e._zod.optin="optional",Pt(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(s,i)=>(i.direction==="backward"||s.value===void 0&&(s.value=a.defaultValue),a.innerType._zod.run(s,i))}),AA=Ce("$ZodNonOptional",(e,a)=>{On.init(e,a),Pt(e._zod,"values",()=>{const s=a.innerType._zod.values;return s?new Set([...s].filter(i=>i!==void 0)):void 0}),e._zod.parse=(s,i)=>{const c=a.innerType._zod.run(s,i);return c instanceof Promise?c.then(d=>ev(d,e)):ev(c,e)}});function ev(e,a){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:a}),e}const OA=Ce("$ZodCatch",(e,a)=>{On.init(e,a),Pt(e._zod,"optin",()=>a.innerType._zod.optin),Pt(e._zod,"optout",()=>a.innerType._zod.optout),Pt(e._zod,"values",()=>a.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return a.innerType._zod.run(s,i);const c=a.innerType._zod.run(s,i);return c instanceof Promise?c.then(d=>(s.value=d.value,d.issues.length&&(s.value=a.catchValue({...s,error:{issues:d.issues.map(f=>Zr(f,i,Vr()))},input:s.value}),s.issues=[]),s)):(s.value=c.value,c.issues.length&&(s.value=a.catchValue({...s,error:{issues:c.issues.map(d=>Zr(d,i,Vr()))},input:s.value}),s.issues=[]),s)}}),RA=Ce("$ZodPipe",(e,a)=>{On.init(e,a),Pt(e._zod,"values",()=>a.in._zod.values),Pt(e._zod,"optin",()=>a.in._zod.optin),Pt(e._zod,"optout",()=>a.out._zod.optout),Pt(e._zod,"propValues",()=>a.in._zod.propValues),e._zod.parse=(s,i)=>{if(i.direction==="backward"){const d=a.out._zod.run(s,i);return d instanceof Promise?d.then(f=>wc(f,a.in,i)):wc(d,a.in,i)}const c=a.in._zod.run(s,i);return c instanceof Promise?c.then(d=>wc(d,a.out,i)):wc(c,a.out,i)}});function wc(e,a,s){return e.issues.length?(e.aborted=!0,e):a._zod.run({value:e.value,issues:e.issues},s)}const TA=Ce("$ZodReadonly",(e,a)=>{On.init(e,a),Pt(e._zod,"propValues",()=>a.innerType._zod.propValues),Pt(e._zod,"values",()=>a.innerType._zod.values),Pt(e._zod,"optin",()=>a.innerType._zod.optin),Pt(e._zod,"optout",()=>a.innerType._zod.optout),e._zod.parse=(s,i)=>{if(i.direction==="backward")return a.innerType._zod.run(s,i);const c=a.innerType._zod.run(s,i);return c instanceof Promise?c.then(tv):tv(c)}});function tv(e){return e.value=Object.freeze(e.value),e}const DA=Ce("$ZodCustom",(e,a)=>{va.init(e,a),On.init(e,a),e._zod.parse=(s,i)=>s,e._zod.check=s=>{const i=s.value,c=a.fn(i);if(c instanceof Promise)return c.then(d=>nv(d,s,i,e));nv(c,s,i,e)}});function nv(e,a,s,i){if(!e){const c={code:"custom",input:s,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(c.params=i._zod.def.params),a.issues.push(ao(c))}}class zA{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...s){const i=s[0];if(this._map.set(a,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,a)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){const s=this._map.get(a);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(a),this}get(a){const s=a._zod.parent;if(s){const i={...this.get(s)??{}};delete i.id;const c={...i,...this._map.get(a)};return Object.keys(c).length?c:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}function kA(){return new zA}const _c=kA();function MA(e,a){return new e({type:"string",...tt(a)})}function UA(e,a){return new e({type:"string",format:"email",check:"string_format",abort:!1,...tt(a)})}function av(e,a){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...tt(a)})}function LA(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...tt(a)})}function BA(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...tt(a)})}function qA(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...tt(a)})}function $A(e,a){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...tt(a)})}function IA(e,a){return new e({type:"string",format:"url",check:"string_format",abort:!1,...tt(a)})}function FA(e,a){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...tt(a)})}function HA(e,a){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...tt(a)})}function VA(e,a){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...tt(a)})}function ZA(e,a){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...tt(a)})}function GA(e,a){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...tt(a)})}function PA(e,a){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...tt(a)})}function QA(e,a){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...tt(a)})}function YA(e,a){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...tt(a)})}function KA(e,a){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...tt(a)})}function XA(e,a){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...tt(a)})}function JA(e,a){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...tt(a)})}function WA(e,a){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...tt(a)})}function eO(e,a){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...tt(a)})}function tO(e,a){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...tt(a)})}function nO(e,a){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...tt(a)})}function aO(e,a){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...tt(a)})}function sO(e,a){return new e({type:"string",format:"date",check:"string_format",...tt(a)})}function rO(e,a){return new e({type:"string",format:"time",check:"string_format",precision:null,...tt(a)})}function lO(e,a){return new e({type:"string",format:"duration",check:"string_format",...tt(a)})}function iO(e,a){return new e({type:"number",checks:[],...tt(a)})}function oO(e,a){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...tt(a)})}function cO(e){return new e({type:"unknown"})}function uO(e,a){return new e({type:"never",...tt(a)})}function sv(e,a){return new p0({check:"less_than",...tt(a),value:e,inclusive:!1})}function If(e,a){return new p0({check:"less_than",...tt(a),value:e,inclusive:!0})}function rv(e,a){return new g0({check:"greater_than",...tt(a),value:e,inclusive:!1})}function Ff(e,a){return new g0({check:"greater_than",...tt(a),value:e,inclusive:!0})}function lv(e,a){return new OC({check:"multiple_of",...tt(a),value:e})}function N0(e,a){return new TC({check:"max_length",...tt(a),maximum:e})}function Gc(e,a){return new DC({check:"min_length",...tt(a),minimum:e})}function S0(e,a){return new zC({check:"length_equals",...tt(a),length:e})}function dO(e,a){return new kC({check:"string_format",format:"regex",...tt(a),pattern:e})}function fO(e){return new MC({check:"string_format",format:"lowercase",...tt(e)})}function mO(e){return new UC({check:"string_format",format:"uppercase",...tt(e)})}function hO(e,a){return new LC({check:"string_format",format:"includes",...tt(a),includes:e})}function pO(e,a){return new BC({check:"string_format",format:"starts_with",...tt(a),prefix:e})}function gO(e,a){return new qC({check:"string_format",format:"ends_with",...tt(a),suffix:e})}function po(e){return new $C({check:"overwrite",tx:e})}function bO(e){return po(a=>a.normalize(e))}function yO(){return po(e=>e.trim())}function vO(){return po(e=>e.toLowerCase())}function xO(){return po(e=>e.toUpperCase())}function NO(e,a,s){return new e({type:"array",element:a,...tt(s)})}function SO(e,a,s){return new e({type:"custom",check:"custom",fn:a,...tt(s)})}function jO(e){const a=wO(s=>(s.addIssue=i=>{if(typeof i=="string")s.issues.push(ao(i,s.value,a._zod.def));else{const c=i;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=s.value),c.inst??(c.inst=a),c.continue??(c.continue=!a._zod.def.abort),s.issues.push(ao(c))}},e(s.value,s)));return a}function wO(e,a){const s=new va({check:"custom",...tt(a)});return s._zod.check=e,s}function iv(e,a){try{var s=e()}catch(i){return a(i)}return s&&s.then?s.then(void 0,a):s}function _O(e,a){for(var s={};e.length;){var i=e[0],c=i.code,d=i.message,f=i.path.join(".");if(!s[f])if("unionErrors"in i){var h=i.unionErrors[0].errors[0];s[f]={message:h.message,type:h.code}}else s[f]={message:d,type:c};if("unionErrors"in i&&i.unionErrors.forEach(function(v){return v.errors.forEach(function(x){return e.push(x)})}),a){var g=s[f].types,p=g&&g[i.code];s[f]=Pm(f,a,s,c,p?[].concat(p,i.message):i.message)}e.shift()}return s}function EO(e,a){for(var s={};e.length;){var i=e[0],c=i.code,d=i.message,f=i.path.join(".");if(!s[f])if(i.code==="invalid_union"&&i.errors.length>0){var h=i.errors[0][0];s[f]={message:h.message,type:h.code}}else s[f]={message:d,type:c};if(i.code==="invalid_union"&&i.errors.forEach(function(v){return v.forEach(function(x){return e.push(x)})}),a){var g=s[f].types,p=g&&g[i.code];s[f]=Pm(f,a,s,c,p?[].concat(p,i.message):i.message)}e.shift()}return s}function CO(e,a,s){if(s===void 0&&(s={}),(function(i){return"_def"in i&&typeof i._def=="object"&&"typeName"in i._def})(e))return function(i,c,d){try{return Promise.resolve(iv(function(){return Promise.resolve(e[s.mode==="sync"?"parse":"parseAsync"](i,a)).then(function(f){return d.shouldUseNativeValidation&&Sm({},d),{errors:{},values:s.raw?Object.assign({},i):f}})},function(f){if((function(h){return Array.isArray(h?.issues)})(f))return{values:{},errors:Vy(_O(f.errors,!d.shouldUseNativeValidation&&d.criteriaMode==="all"),d)};throw f}))}catch(f){return Promise.reject(f)}};if((function(i){return"_zod"in i&&typeof i._zod=="object"})(e))return function(i,c,d){try{return Promise.resolve(iv(function(){return Promise.resolve((s.mode==="sync"?ZE:GE)(e,i,a)).then(function(f){return d.shouldUseNativeValidation&&Sm({},d),{errors:{},values:s.raw?Object.assign({},i):f}})},function(f){if((function(h){return h instanceof ih})(f))return{values:{},errors:Vy(EO(f.issues,!d.shouldUseNativeValidation&&d.criteriaMode==="all"),d)};throw f}))}catch(f){return Promise.reject(f)}};throw new Error("Invalid input: not a Zod schema")}const AO=Ce("ZodISODateTime",(e,a)=>{eA.init(e,a),on.init(e,a)});function OO(e){return aO(AO,e)}const RO=Ce("ZodISODate",(e,a)=>{tA.init(e,a),on.init(e,a)});function TO(e){return sO(RO,e)}const DO=Ce("ZodISOTime",(e,a)=>{nA.init(e,a),on.init(e,a)});function zO(e){return rO(DO,e)}const kO=Ce("ZodISODuration",(e,a)=>{aA.init(e,a),on.init(e,a)});function MO(e){return lO(kO,e)}const UO=(e,a)=>{ih.init(e,a),e.name="ZodError",Object.defineProperties(e,{format:{value:s=>VE(e,s)},flatten:{value:s=>HE(e,s)},addIssue:{value:s=>{e.issues.push(s),e.message=JSON.stringify(e.issues,jm,2)}},addIssues:{value:s=>{e.issues.push(...s),e.message=JSON.stringify(e.issues,jm,2)}},isEmpty:{get(){return e.issues.length===0}}})},Qa=Ce("ZodError",UO,{Parent:Error}),LO=uu(Qa),BO=du(Qa),qO=fu(Qa),$O=mu(Qa),IO=YE(Qa),FO=KE(Qa),HO=XE(Qa),VO=JE(Qa),ZO=WE(Qa),GO=eC(Qa),PO=tC(Qa),QO=nC(Qa),Bn=Ce("ZodType",(e,a)=>(On.init(e,a),e.def=a,e.type=a.type,Object.defineProperty(e,"_def",{value:a}),e.check=(...s)=>e.clone(Kr(a,{checks:[...a.checks??[],...s.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),e.clone=(s,i)=>dr(e,s,i),e.brand=()=>e,e.register=((s,i)=>(s.add(e,i),e)),e.parse=(s,i)=>LO(e,s,i,{callee:e.parse}),e.safeParse=(s,i)=>qO(e,s,i),e.parseAsync=async(s,i)=>BO(e,s,i,{callee:e.parseAsync}),e.safeParseAsync=async(s,i)=>$O(e,s,i),e.spa=e.safeParseAsync,e.encode=(s,i)=>IO(e,s,i),e.decode=(s,i)=>FO(e,s,i),e.encodeAsync=async(s,i)=>HO(e,s,i),e.decodeAsync=async(s,i)=>VO(e,s,i),e.safeEncode=(s,i)=>ZO(e,s,i),e.safeDecode=(s,i)=>GO(e,s,i),e.safeEncodeAsync=async(s,i)=>PO(e,s,i),e.safeDecodeAsync=async(s,i)=>QO(e,s,i),e.refine=(s,i)=>e.check(LR(s,i)),e.superRefine=s=>e.check(BR(s)),e.overwrite=s=>e.check(po(s)),e.optional=()=>dv(e),e.nullable=()=>fv(e),e.nullish=()=>dv(fv(e)),e.nonoptional=s=>RR(e,s),e.array=()=>_0(e),e.or=s=>xR([e,s]),e.and=s=>SR(e,s),e.transform=s=>mv(e,wR(s)),e.default=s=>CR(e,s),e.prefault=s=>OR(e,s),e.catch=s=>DR(e,s),e.pipe=s=>mv(e,s),e.readonly=()=>MR(e),e.describe=s=>{const i=e.clone();return _c.add(i,{description:s}),i},Object.defineProperty(e,"description",{get(){return _c.get(e)?.description},configurable:!0}),e.meta=(...s)=>{if(s.length===0)return _c.get(e);const i=e.clone();return _c.add(i,s[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),j0=Ce("_ZodString",(e,a)=>{oh.init(e,a),Bn.init(e,a);const s=e._zod.bag;e.format=s.format??null,e.minLength=s.minimum??null,e.maxLength=s.maximum??null,e.regex=(...i)=>e.check(dO(...i)),e.includes=(...i)=>e.check(hO(...i)),e.startsWith=(...i)=>e.check(pO(...i)),e.endsWith=(...i)=>e.check(gO(...i)),e.min=(...i)=>e.check(Gc(...i)),e.max=(...i)=>e.check(N0(...i)),e.length=(...i)=>e.check(S0(...i)),e.nonempty=(...i)=>e.check(Gc(1,...i)),e.lowercase=i=>e.check(fO(i)),e.uppercase=i=>e.check(mO(i)),e.trim=()=>e.check(yO()),e.normalize=(...i)=>e.check(bO(...i)),e.toLowerCase=()=>e.check(vO()),e.toUpperCase=()=>e.check(xO())}),YO=Ce("ZodString",(e,a)=>{oh.init(e,a),j0.init(e,a),e.email=s=>e.check(UA(KO,s)),e.url=s=>e.check(IA(XO,s)),e.jwt=s=>e.check(nO(fR,s)),e.emoji=s=>e.check(FA(JO,s)),e.guid=s=>e.check(av(ov,s)),e.uuid=s=>e.check(LA(Ec,s)),e.uuidv4=s=>e.check(BA(Ec,s)),e.uuidv6=s=>e.check(qA(Ec,s)),e.uuidv7=s=>e.check($A(Ec,s)),e.nanoid=s=>e.check(HA(WO,s)),e.guid=s=>e.check(av(ov,s)),e.cuid=s=>e.check(VA(eR,s)),e.cuid2=s=>e.check(ZA(tR,s)),e.ulid=s=>e.check(GA(nR,s)),e.base64=s=>e.check(WA(cR,s)),e.base64url=s=>e.check(eO(uR,s)),e.xid=s=>e.check(PA(aR,s)),e.ksuid=s=>e.check(QA(sR,s)),e.ipv4=s=>e.check(YA(rR,s)),e.ipv6=s=>e.check(KA(lR,s)),e.cidrv4=s=>e.check(XA(iR,s)),e.cidrv6=s=>e.check(JA(oR,s)),e.e164=s=>e.check(tO(dR,s)),e.datetime=s=>e.check(OO(s)),e.date=s=>e.check(TO(s)),e.time=s=>e.check(zO(s)),e.duration=s=>e.check(MO(s))});function Pc(e){return MA(YO,e)}const on=Ce("ZodStringFormat",(e,a)=>{nn.init(e,a),j0.init(e,a)}),KO=Ce("ZodEmail",(e,a)=>{ZC.init(e,a),on.init(e,a)}),ov=Ce("ZodGUID",(e,a)=>{HC.init(e,a),on.init(e,a)}),Ec=Ce("ZodUUID",(e,a)=>{VC.init(e,a),on.init(e,a)}),XO=Ce("ZodURL",(e,a)=>{GC.init(e,a),on.init(e,a)}),JO=Ce("ZodEmoji",(e,a)=>{PC.init(e,a),on.init(e,a)}),WO=Ce("ZodNanoID",(e,a)=>{QC.init(e,a),on.init(e,a)}),eR=Ce("ZodCUID",(e,a)=>{YC.init(e,a),on.init(e,a)}),tR=Ce("ZodCUID2",(e,a)=>{KC.init(e,a),on.init(e,a)}),nR=Ce("ZodULID",(e,a)=>{XC.init(e,a),on.init(e,a)}),aR=Ce("ZodXID",(e,a)=>{JC.init(e,a),on.init(e,a)}),sR=Ce("ZodKSUID",(e,a)=>{WC.init(e,a),on.init(e,a)}),rR=Ce("ZodIPv4",(e,a)=>{sA.init(e,a),on.init(e,a)}),lR=Ce("ZodIPv6",(e,a)=>{rA.init(e,a),on.init(e,a)}),iR=Ce("ZodCIDRv4",(e,a)=>{lA.init(e,a),on.init(e,a)}),oR=Ce("ZodCIDRv6",(e,a)=>{iA.init(e,a),on.init(e,a)}),cR=Ce("ZodBase64",(e,a)=>{oA.init(e,a),on.init(e,a)}),uR=Ce("ZodBase64URL",(e,a)=>{uA.init(e,a),on.init(e,a)}),dR=Ce("ZodE164",(e,a)=>{dA.init(e,a),on.init(e,a)}),fR=Ce("ZodJWT",(e,a)=>{mA.init(e,a),on.init(e,a)}),w0=Ce("ZodNumber",(e,a)=>{y0.init(e,a),Bn.init(e,a),e.gt=(i,c)=>e.check(rv(i,c)),e.gte=(i,c)=>e.check(Ff(i,c)),e.min=(i,c)=>e.check(Ff(i,c)),e.lt=(i,c)=>e.check(sv(i,c)),e.lte=(i,c)=>e.check(If(i,c)),e.max=(i,c)=>e.check(If(i,c)),e.int=i=>e.check(cv(i)),e.safe=i=>e.check(cv(i)),e.positive=i=>e.check(rv(0,i)),e.nonnegative=i=>e.check(Ff(0,i)),e.negative=i=>e.check(sv(0,i)),e.nonpositive=i=>e.check(If(0,i)),e.multipleOf=(i,c)=>e.check(lv(i,c)),e.step=(i,c)=>e.check(lv(i,c)),e.finite=()=>e;const s=e._zod.bag;e.minValue=Math.max(s.minimum??Number.NEGATIVE_INFINITY,s.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(s.maximum??Number.POSITIVE_INFINITY,s.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(s.format??"").includes("int")||Number.isSafeInteger(s.multipleOf??.5),e.isFinite=!0,e.format=s.format??null});function la(e){return iO(w0,e)}const mR=Ce("ZodNumberFormat",(e,a)=>{hA.init(e,a),w0.init(e,a)});function cv(e){return oO(mR,e)}const hR=Ce("ZodUnknown",(e,a)=>{pA.init(e,a),Bn.init(e,a)});function uv(){return cO(hR)}const pR=Ce("ZodNever",(e,a)=>{gA.init(e,a),Bn.init(e,a)});function gR(e){return uO(pR,e)}const bR=Ce("ZodArray",(e,a)=>{bA.init(e,a),Bn.init(e,a),e.element=a.element,e.min=(s,i)=>e.check(Gc(s,i)),e.nonempty=s=>e.check(Gc(1,s)),e.max=(s,i)=>e.check(N0(s,i)),e.length=(s,i)=>e.check(S0(s,i)),e.unwrap=()=>e.element});function _0(e,a){return NO(bR,e,a)}const yR=Ce("ZodObject",(e,a)=>{vA.init(e,a),Bn.init(e,a),Pt(e,"shape",()=>a.shape),e.keyof=()=>E0(Object.keys(e._zod.def.shape)),e.catchall=s=>e.clone({...e._zod.def,catchall:s}),e.passthrough=()=>e.clone({...e._zod.def,catchall:uv()}),e.loose=()=>e.clone({...e._zod.def,catchall:uv()}),e.strict=()=>e.clone({...e._zod.def,catchall:gR()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=s=>BE(e,s),e.safeExtend=s=>qE(e,s),e.merge=s=>$E(e,s),e.pick=s=>UE(e,s),e.omit=s=>LE(e,s),e.partial=(...s)=>IE(C0,e,s[0]),e.required=(...s)=>FE(A0,e,s[0])});function pu(e,a){const s={type:"object",shape:e??{},...tt(a)};return new yR(s)}const vR=Ce("ZodUnion",(e,a)=>{xA.init(e,a),Bn.init(e,a),e.options=a.options});function xR(e,a){return new vR({type:"union",options:e,...tt(a)})}const NR=Ce("ZodIntersection",(e,a)=>{NA.init(e,a),Bn.init(e,a)});function SR(e,a){return new NR({type:"intersection",left:e,right:a})}const _m=Ce("ZodEnum",(e,a)=>{SA.init(e,a),Bn.init(e,a),e.enum=a.entries,e.options=Object.values(a.entries);const s=new Set(Object.keys(a.entries));e.extract=(i,c)=>{const d={};for(const f of i)if(s.has(f))d[f]=a.entries[f];else throw new Error(`Key ${f} not found in enum`);return new _m({...a,checks:[],...tt(c),entries:d})},e.exclude=(i,c)=>{const d={...a.entries};for(const f of i)if(s.has(f))delete d[f];else throw new Error(`Key ${f} not found in enum`);return new _m({...a,checks:[],...tt(c),entries:d})}});function E0(e,a){const s=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new _m({type:"enum",entries:s,...tt(a)})}const jR=Ce("ZodTransform",(e,a)=>{jA.init(e,a),Bn.init(e,a),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new r0(e.constructor.name);s.addIssue=d=>{if(typeof d=="string")s.issues.push(ao(d,s.value,a));else{const f=d;f.fatal&&(f.continue=!1),f.code??(f.code="custom"),f.input??(f.input=s.value),f.inst??(f.inst=e),s.issues.push(ao(f))}};const c=a.transform(s.value,s);return c instanceof Promise?c.then(d=>(s.value=d,s)):(s.value=c,s)}});function wR(e){return new jR({type:"transform",transform:e})}const C0=Ce("ZodOptional",(e,a)=>{wA.init(e,a),Bn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function dv(e){return new C0({type:"optional",innerType:e})}const _R=Ce("ZodNullable",(e,a)=>{_A.init(e,a),Bn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function fv(e){return new _R({type:"nullable",innerType:e})}const ER=Ce("ZodDefault",(e,a)=>{EA.init(e,a),Bn.init(e,a),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function CR(e,a){return new ER({type:"default",innerType:e,get defaultValue(){return typeof a=="function"?a():o0(a)}})}const AR=Ce("ZodPrefault",(e,a)=>{CA.init(e,a),Bn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function OR(e,a){return new AR({type:"prefault",innerType:e,get defaultValue(){return typeof a=="function"?a():o0(a)}})}const A0=Ce("ZodNonOptional",(e,a)=>{AA.init(e,a),Bn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function RR(e,a){return new A0({type:"nonoptional",innerType:e,...tt(a)})}const TR=Ce("ZodCatch",(e,a)=>{OA.init(e,a),Bn.init(e,a),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function DR(e,a){return new TR({type:"catch",innerType:e,catchValue:typeof a=="function"?a:()=>a})}const zR=Ce("ZodPipe",(e,a)=>{RA.init(e,a),Bn.init(e,a),e.in=a.in,e.out=a.out});function mv(e,a){return new zR({type:"pipe",in:e,out:a})}const kR=Ce("ZodReadonly",(e,a)=>{TA.init(e,a),Bn.init(e,a),e.unwrap=()=>e._zod.def.innerType});function MR(e){return new kR({type:"readonly",innerType:e})}const UR=Ce("ZodCustom",(e,a)=>{DA.init(e,a),Bn.init(e,a)});function LR(e,a={}){return SO(UR,e,a)}function BR(e){return jO(e)}const qR=["correlativo","no correlativo"],$R=pu({oi:Pc().regex(/^OI-\d{4}-\d{4}$/,"Formato OI-####-YYYY"),q3:la(),alcance:la(),pma:la().refine(e=>e===10||e===16,{message:"PMA invlido"}),numeration_type:E0(qR).default("correlativo")}),Hf=pu({c1:la().optional().nullable(),c2:la().optional().nullable(),c3:la().optional().nullable(),c4:la().optional().nullable(),c5:la().optional().nullable(),c6:la().optional().nullable(),c7:Pc().optional().nullable(),c7_seconds:la().optional().nullable(),caudal:la().optional().nullable(),error:la().optional().nullable()}),IR=pu({medidor:Pc().optional(),estado:la().int().min(0).max(5).default(0),q3:Hf.optional(),q2:Hf.optional(),q1:Hf.optional(),conformidad:Pc().optional()});pu({estado:la().int().min(0).optional(),rows:la().int().min(1).default(15),rowsData:_0(IR)});function FR(e){return e===16?25.6:e===10?16:NaN}const HR=/^[A-Za-z0-9]{10}$/,VR=e=>(e??"").trim().toUpperCase(),hn=e=>{const a=e.currentTarget;a.size=Math.max(1,a.value.length)},Dl=["medidor","estado","q3.c1","q3.c2","q3.c3","q3.c4","q3.c5","q3.c6","q3.c7","q2.c1","q2.c2","q2.c3","q2.c4","q2.c5","q2.c6","q2.c7","q1.c1","q1.c2","q1.c3","q1.c4","q1.c5","q1.c6","q1.c7"],Em=e=>{e&&(e.focus(),(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&e.select())},hv=(e,a)=>{if(a){if(e==="medidor"){a.focus();return}Em(a)}},Fn=e=>{if(e===""||e===null||e===void 0)return null;const a=String(e).replace(",","."),s=Number(a);return Number.isNaN(s)?null:s};function ZR(e,a){if(!e)return"";const s=e.match(/^(.*?)(\d+)$/);if(!s)return e;const i=s[1],c=s[2],d=parseInt(c,10)+a;return`${i}${d.toString().padStart(c.length,"0")}`}function pv(e,a,s){return e?s==="no correlativo"?e.slice(0,4):ZR(e,a):""}function Vf(e){if(!e)return 0;const a=String(e).trim(),s=a.split(/[:,\.]/).map(c=>parseFloat(c)).filter(c=>!isNaN(c));let i=0;if(s.length>=3){const c=s[0]||0,d=s[1]||0,f=s[2]||0;i=c*60+d+f/1e3}else if(s.length===2)i=s[0]*60+(s[1]||0);else if(s.length===1)i=s[0];else{const c=parseFloat(a.replace(",","."));if(!isNaN(c)){const d=Math.floor(c),f=(c-d)*100;i=d*60+f}}return i}function Zf(e,a){if(!e||!a)return null;const s=a>0?a/3600:0;return s===0?null:e/s}function Gf(e,a,s){return e===void 0||a===void 0||!s?null:(Number(a)-Number(e)-Number(s))/Number(s)*100}function GR(e,a,s,i){if(e&&e>=1)return"NO CONFORME";if(a==null||s==null||i==null)return"";const c=Math.abs(a),d=Math.abs(s),f=Math.abs(i),h=!(c>2.05||d>2.05||f>5.05),g=c<1.05||d<1.05||f<2.55,p=Math.sign(a),v=Math.sign(s),x=Math.sign(i),S=p>=0&&v>=0&&x>=0||p<=0&&v<=0&&x<=0,$=h&&g;return S?$?"CONFORME":"NO CONFORME":h?"CONFORME":"NO CONFORME"}const zl=({val:e,isErr:a,warnThreshold:s,failThreshold:i})=>{const c=p=>{const v=Number(p.toFixed(1));return Object.is(v,-0)?"0.0":v.toFixed(1)};if(!a)return l.jsx("td",{className:"bg-light",children:e==null||isNaN(e)?l.jsx("span",{className:"text-muted",children:"-"}):l.jsx("span",{className:"vi-qe-value text-primary fw-semibold",children:e.toFixed(2)})});const d=Math.abs(e??0),f=s??i??0,h=i??s??0;let g="vi-e-ok";return e==null||isNaN(e)?g="":h>0&&d>h?g="vi-e-error":f>0&&d>f&&(g="vi-e-warn"),l.jsx("td",{className:"bg-light",children:e==null||isNaN(e)?l.jsx("span",{className:"text-muted",children:"-"}):l.jsx("span",{className:`vi-qe-value fw-bold ${g}`,children:c(e)})})};function PR({show:e,title:a,initial:s,onClose:i,onSubmit:c,onCancelWithDraft:d,numerationType:f,duplicateMap:h,onClearDuplicate:g,readOnly:p,draftStorageKey:v,draftMeta:x,isOnline:S,showRetry:$}){const _={estado:s?.estado??0,rows:s?.rows??15,version:s?.version??null,draftCreatedAt:s?.draftCreatedAt??null,draftId:s?.draftId??null,rowsData:s?.rowsData??Array.from({length:15}).map(()=>({medidor:"",estado:0,q3:{},q2:{},q1:{}}))},E=p===!0,O=S!==!1,{register:q,control:D,handleSubmit:J,reset:z,setValue:T,getValues:G}=eu({defaultValues:_}),L=q("rows",{valueAsNumber:!0}),{fields:W,replace:de,append:Ae,remove:je}=N_({control:D,name:"rowsData"}),[ge,we]=b.useState(0),Me=b.useRef(0),Te=b.useRef(null),[M,I]=b.useState(0),K=0,xe=5,Se=()=>{if(M>=xe){alert("Ya estas en el tamano maximo de fuente permitido para las filas (+5).");return}I(Y=>Math.min(Y+1,xe))},j=()=>{if(M<=K){alert("Ya estas en el tamano minimo de fuente permitido para las filas.");return}I(Y=>Math.max(Y-1,K))},Z=b.useRef(null),[ce,U]=b.useState([]),ue=!!s?.version,be=b.useRef("rows"),ze=b.useRef(null),$e=b.useRef(null),he=b.useRef(null),Le=b.useRef(new Map),Ie=["c1","c2","c3","c4","c5","c6","c7"];b.useEffect(()=>{s?.rowsData?.length&&W.forEach((Y,X)=>{if(X===0)return;s.rowsData[X]?.medidor&&Le.current.set(Y.id,!0)})},[s,W]);const Ze=b.useCallback(Y=>{const X=Y<0?0:Y;we(X),requestAnimationFrame(()=>{const Ee=document.querySelector(`input.vi-medidor-input[data-row="${X}"]`);Ee&&(Ee.focus(),Ee.select())})},[]),mt=()=>(G("rowsData")??[]).slice(0,W.length);b.useEffect(()=>{Me.current=ge},[ge]);const ke=Y=>{const X=Y.target;if(!X)return;const Ee=X.tagName;if(Ee!=="INPUT"&&Ee!=="SELECT"&&Ee!=="TEXTAREA")return;const Ve=Y.key;if(Ve==="Escape"){Y.preventDefault(),Vn();return}if(Ve==="ArrowUp"||Ve==="ArrowDown"||Ve==="ArrowLeft"||Ve==="ArrowRight"||Ve==="Enter"){const sn=X.name;if(!sn||!sn.startsWith("rowsData."))return;const Nt=sn.match(/^rowsData\.(\d+)\.(.+)$/);if(!Nt)return;const ot=parseInt(Nt[1],10),lt=Nt[2],Ht=Y.currentTarget,pn=W.length-1,Tn=(Nn,gn)=>{let Vt=Nn+gn;for(;Vt>=0&&Vt<=pn;){const Gn=`[name="rowsData.${Vt}.${lt}"]`,cn=Ht.querySelector(Gn);if(cn&&!cn.disabled)return{index:Vt,el:cn};Vt+=gn}return null};if(Ve==="ArrowUp"||Ve==="ArrowDown"){Y.preventDefault();const gn=Tn(ot,Ve==="ArrowUp"?-1:1);gn&&hv(lt,gn.el);return}if(Ve==="ArrowLeft"||Ve==="ArrowRight"){Y.preventDefault();const Nn=Dl.indexOf(lt);if(Nn===-1)return;const Vt=Nn+(Ve==="ArrowRight"?1:-1);if(Vt<0||Vt>=Dl.length)return;const Gn=Dl[Vt],cn=`[name="rowsData.${ot}.${Gn}"]`,Sn=Ht.querySelector(cn);Sn&&!Sn.disabled&&Em(Sn);return}if(Ve==="Enter"){Y.preventDefault();const Nn=Dl.indexOf(lt);if(Nn===-1)return;const gn=Tn(ot,1);if(gn){hv(lt,gn.el);return}const Vt=Nn+1;if(Vt<Dl.length){const Gn=Dl[Vt];for(let cn=0;cn<=pn;cn++){const Sn=`[name="rowsData.${cn}.${Gn}"]`,Dn=Ht.querySelector(Sn);if(Dn&&!Dn.disabled){Em(Dn);return}}}Z.current&&Z.current.focus();return}}if(Ve!=="Tab")return;const rt=Y.currentTarget,ut=Array.from(rt.querySelectorAll("input, select, textarea")).filter(kt=>!kt.hasAttribute("disabled")),Xe=ut.indexOf(X);if(Xe===-1)return;if(Ve==="Tab"&&Y.shiftKey){Xe>0&&(Y.preventDefault(),ut[Xe-1].focus());return}const Rt=Xe+1;if(Rt<ut.length){Y.preventDefault(),ut[Rt].focus();return}Z.current&&(Y.preventDefault(),Z.current.focus())},Ge=(Y,X)=>{de(Y),T("rows",Y.length),we(Ee=>Y.length===0?0:typeof X=="number"?Math.max(0,Math.min(X,Y.length-1)):Math.min(Ee,Y.length-1))},pe=()=>({medidor:"",estado:0,q3:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:"",c7_seconds:null},q2:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:"",c7_seconds:null},q1:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:"",c7_seconds:null}}),Fe=Y=>Y==null?"":typeof Y=="number"?Y:typeof Y=="string"?Y.replace(",","."):Y,Oe=Y=>{if(!Y)return{};const X={...Y};return["c1","c2","c3","c4","c5","c6"].forEach(Ee=>{X[Ee]=Fe(X[Ee])}),X},We=()=>{const Y=s?.rowsData?.length??s?.rows??15,X=(s?.rowsData&&s.rowsData.length>0?s.rowsData:Array.from({length:Y}).map(()=>({medidor:"",estado:0,q3:{},q2:{},q1:{}}))).map(Ee=>({medidor:Ee.medidor??"",estado:Ee.estado??0,q3:Oe(Ee.q3),q2:Oe(Ee.q2),q1:Oe(Ee.q1)}));return{rows:X.length,rowsData:X,version:s?.version??null,estado:s?.estado??0,draftCreatedAt:s?.draftCreatedAt??null,draftId:s?.draftId??null}},A=b.useCallback(()=>{const Y=G(),X=Y.rowsData??[];return{estado:Y.estado??0,rows:Number(Y.rows??X.length),version:Y.version??s?.version??null,rowsData:X,draftCreatedAt:Y.draftCreatedAt??s?.draftCreatedAt??null,draftId:Y.draftId??s?.draftId??null}},[G,s?.version,s?.draftCreatedAt,s?.draftId]),V=Y=>x?{version:1,ts:new Date().toISOString(),userId:x.userId,bankId:x.bankId,oiId:x.oiId,bancadaId:x.bancadaId??null,isNew:x.isNew,data:Y}:null,R=()=>x?{version:1,ts:new Date().toISOString(),userId:x.userId,bankId:x.bankId,oiId:x.oiId,oiCode:x.oiCode??null,returnTo:x.returnTo??`/oi/${x.oiId}?mode=edit`,mode:"edit",modal:{type:"bancada",bancadaId:x.bancadaId??null,isNew:x.isNew}}:null,Q=Y=>Y==null||Y===""||typeof Y=="number"&&Number.isNaN(Y),P=Y=>Y?Number(Y.estado??0)!==0||Y.medidor&&Y.medidor.toString().trim()!==""?!0:Re(Y):!1,re=Y=>(Y.rowsData??[]).some(Ee=>P(Ee)),Re=Y=>{const X=[Y.q3,Y.q2,Y.q1];for(const Ee of X)if(Ee){for(const Ve of Ie)if(!Q(Ee[Ve]))return!0}return!1},Be=Y=>Y?{...Y,c4:null,c5:null}:{c4:null,c5:null},se=Y=>{if(!Y)return Y;const X={...Y};return Q(X.c4)&&(X.c4=null),Q(X.c5)&&(X.c5=null),X},Ue=Y=>{for(let X=0;X<Y.length;X++){const Ee=Y[X],Ve=Number(Ee.estado??0),rt=Ve!==0;if(!P(Ee))continue;if(!Ee.medidor||Ee.medidor.toString().trim()==="")return`La fila ${X+1} tiene datos pero el campo "# Medidor (G)" est vaco. Completa el valor o elimina la fila.`;const Xe=[{name:"Q3 (Nominal)",block:Ee.q3},{name:"Q2 (Transicin)",block:Ee.q2},{name:"Q1 (Mnimo)",block:Ee.q1}],Ot=Xe.some(({block:Rt})=>Rt&&Ie.some(kt=>!Q(Rt[kt])));if(Ve===0&&!Ot)return`La fila ${X+1} no tiene lecturas. Ingresa datos en Q3/Q2/Q1 o elimina la fila.`;if(!rt)for(const{name:Rt,block:kt}of Xe){if(!kt||!Ie.some(ot=>!Q(kt[ot])))continue;if(Ie.some(ot=>Q(kt[ot])))return`La fila ${X+1} tiene datos incompletos en el bloque ${Rt}. Completa todos los campos o elimina la fila.`}}return null},He=Y=>Y==null||Y===""?null:String(Y).replace(/\./g,","),st=Y=>{if(!Y)return{};const X={...Y};return["c1","c2","c3","c4","c5","c6","c7"].forEach(Ee=>{X[Ee]=He(X[Ee])}),X},Xt=Y=>{const X=[];let Ee=null;const Ve=(ut,Xe,Ot)=>{X[ut]||(X[ut]={}),X[ut][Xe]=Ot,Ee||(Ee=`Fila ${ut+1}: ${Ot}`)},rt={};return Y.forEach(ut=>{const Xe=(ut.medidor??"").trim();Xe&&(rt[Xe]=(rt[Xe]??0)+1)}),Y.forEach((ut,Xe)=>{const Ot=ut.q3||{},Rt=ut.q2||{},kt=ut.q1||{},sn=Ot.c4,Nt=Ot.c5,ot=Rt.c4,lt=Rt.c5,Ht=kt.c4,pn=kt.c5;sn!=null&&Nt!=null&&!Number.isNaN(sn)&&!Number.isNaN(Nt)&&Nt<sn&&Ve(Xe,"q3_lf","En Q3 L.F debe ser mayor o igual que L.I."),ot!=null&&lt!=null&&!Number.isNaN(ot)&&!Number.isNaN(lt)&&lt<ot&&Ve(Xe,"q2_lf","En Q2 L.F debe ser mayor o igual que L.I."),Ht!=null&&pn!=null&&!Number.isNaN(Ht)&&!Number.isNaN(pn)&&pn<Ht&&Ve(Xe,"q1_lf","En Q1 L.F debe ser mayor o igual que L.I."),Nt!=null&&ot!=null&&!Number.isNaN(Nt)&&!Number.isNaN(ot)&&ot<Nt&&Ve(Xe,"q2_li","L.I de Q2 debe ser mayor o igual que L.F de Q3."),lt!=null&&Ht!=null&&!Number.isNaN(lt)&&!Number.isNaN(Ht)&&Ht<lt&&Ve(Xe,"q1_li","L.I de Q1 debe ser mayor o igual que L.F de Q2.");const Tn=(ut.medidor??"").trim();Tn&&rt[Tn]>1&&Ve(Xe,"medidor_dup","Serie de medidor repetida."),Tn&&!HR.test(Tn)&&Ve(Xe,"medidor_format","La serie del medidor debe tener 10 caracteres alfanumricos.")}),{rowErrors:X,firstMessage:Ee}},_e=Y=>{if(E)return;const X=(Y.rowsData??[]).slice(0,W.length),Ee=Ue(X);if(Ee){alert(Ee);return}const{rowErrors:Ve,firstMessage:rt}=Xt(X);if(U(Ve),rt){alert(rt);return}const Xe=X.filter(P).map(Rt=>{const kt=Number(Rt.estado??0),sn=kt>=1&&kt<=4,Nt=kt===5&&!Re(Rt),ot=sn||Nt,lt=se(Rt.q3),Ht=se(Rt.q2),pn=se(Rt.q1),Tn=Nn=>{if(ot){const gn=Be(Nn);return st(gn)}return st(Nn)};return{...Rt,q3:Tn(lt),q2:Tn(Ht),q1:Tn(pn)}}),Ot={...Y,rows:Xe.length,rowsData:Xe,version:Y.version??s?.version??null};c(Ot)},et=Fi({control:D,name:"rowsData.0"}),Ft=Fi({control:D,name:"rowsData"}),At=Fi({control:D,name:"rowsData.0.q3.c7"}),Rn=Fi({control:D,name:"rowsData.0.q2.c7"}),Hn=Fi({control:D,name:"rowsData.0.q1.c7"});b.useEffect(()=>{W[0]&&(T("rowsData.0.q3.c7_seconds",Vf(At)),T("rowsData.0.q2.c7_seconds",Vf(Rn)),T("rowsData.0.q1.c7_seconds",Vf(Hn)))},[At,Rn,Hn,T,W]),b.useEffect(()=>{const Y=Ft??[],{rowErrors:X}=Xt(Y);U(X)},[Ft]),b.useEffect(()=>{if(!et||W.length<=1)return;const Y=Ft??[];W.forEach((X,Ee)=>{if(Ee===0)return;const Ve=X.id;(Le.current.get(Ve)??!1)||T(`rowsData.${Ee}.medidor`,pv(et.medidor||"",Ee,f));const ut=Y[Ee]?.estado;(ut==null||Number.isNaN(ut))&&T(`rowsData.${Ee}.estado`,et.estado),T(`rowsData.${Ee}.q3.c1`,et.q3?.c1??null),T(`rowsData.${Ee}.q3.c2`,et.q3?.c2??null),T(`rowsData.${Ee}.q3.c3`,et.q3?.c3??null),T(`rowsData.${Ee}.q3.c6`,et.q3?.c6??null),T(`rowsData.${Ee}.q3.c7`,et.q3?.c7??""),T(`rowsData.${Ee}.q3.c7_seconds`,et.q3?.c7_seconds??null),T(`rowsData.${Ee}.q2.c1`,et.q2?.c1??null),T(`rowsData.${Ee}.q2.c2`,et.q2?.c2??null),T(`rowsData.${Ee}.q2.c3`,et.q2?.c3??null),T(`rowsData.${Ee}.q2.c6`,et.q2?.c6??null),T(`rowsData.${Ee}.q2.c7`,et.q2?.c7??""),T(`rowsData.${Ee}.q2.c7_seconds`,et.q2?.c7_seconds??null),T(`rowsData.${Ee}.q1.c1`,et.q1?.c1??null),T(`rowsData.${Ee}.q1.c2`,et.q1?.c2??null),T(`rowsData.${Ee}.q1.c3`,et.q1?.c3??null),T(`rowsData.${Ee}.q1.c6`,et.q1?.c6??null),T(`rowsData.${Ee}.q1.c7`,et.q1?.c7??""),T(`rowsData.${Ee}.q1.c7_seconds`,et.q1?.c7_seconds??null)})},[et,Ft,W,T,f]),b.useEffect(()=>{we(Y=>{const X=Math.max(W.length-1,0);return Y>X?X:Y})},[W.length]);const Ra=()=>{if(W.length>=50){if(T("rows",50),Ze(0),!confirm("El maximo de filas es 50. Quieres fijar la lista en 50 filas?")){Te.current&&(Te.current.focus(),Te.current.select());return}return}Ae(pe()),T("rows",W.length+1),Ze(W.length)},an=Y=>{if(W.length<=1)return;const X=Math.max(0,Math.min(Y,W.length-1));je(X),T("rows",Math.max(W.length-1,1)),Ze(Math.max(0,X-(X===W.length-1?1:0)))},it=()=>{W.length<=1||(je(W.length-1),T("rows",Math.max(W.length-1,1)),Ze(Math.max(0,W.length-2)))},Xn=()=>{if(!confirm("Ests seguro de limpiar todos los datos de la bancada?"))return;const Y=mt();if(!Y.length)return;const X=Y.map(()=>pe());Ge(X,0),Ze(0)},qn=()=>{let Y=Number(G("rows"));if((!Number.isFinite(Y)||Y<1)&&(Y=1),Y>50){const Ve=mt();if(!confirm("El maximo de filas es 50. Quieres usar 50 filas?")){T("rows",Ve.length),Te.current&&(Te.current.focus(),Te.current.select());return}Y=50}const X=mt();if(Y!==X.length&&!confirm(`La lista tendr ${Y} filas. Quieres continuar?`)){T("rows",X.length),Te.current&&(Te.current.focus(),Te.current.select());return}if(Y===X.length){T("rows",Y);return}if(Y>X.length){const Ve=Math.min(Y,50)-X.length;if(Ve>0){const rt=Array.from({length:Ve},()=>pe()),ut=[...X,...rt];Ge(ut,ge),Ze(X.length)}else T("rows",X.length);return}const Ee=X.slice(0,Y);Ge(Ee,Math.min(ge,Y-1))},Gt=Y=>{Y.key==="Enter"&&(Y.preventDefault(),qn(),Ze(0))},Vn=()=>{const Y=G(),X=document.activeElement;if(Te.current&&X===Te.current)be.current="rows",ze.current="rows";else if(X&&X instanceof HTMLElement){const Ee=X.getAttribute("name");Ee&&Ee.startsWith("rowsData.")?(be.current="grid",ze.current=Ee):(be.current="grid",ze.current=null)}else be.current="grid",ze.current=null;if(v){const Ee=A();if(!re(Ee))ir(v),he.current=null;else{const Ve=V(Ee);if(Ve){const rt=JSON.stringify(Ve);Yi(v,Ve,R()),he.current=rt}}}d&&d(Y),i()};b.useEffect(()=>{if(!e)return;const Y=X=>{if(X.key==="Escape"){X.preventDefault(),Vn();return}if((X.key==="+"||X.key==="=")&&X.ctrlKey){X.preventDefault(),Ra();return}(X.key==="-"||X.key==="_")&&X.ctrlKey&&(X.preventDefault(),it())};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[e,Ra,it,Vn]),b.useEffect(()=>{const Y=We();z(Y),Ge(Y.rowsData,0),Le.current.clear(),requestAnimationFrame(()=>{if(ue)Ze(0);else if(ze.current){const X=document.querySelector(`[name="${ze.current}"]`);if(X){X.focus(),"select"in X&&X.select?.();return}Ze(Me.current||0)}else Te.current&&(Te.current.focus(),Te.current.select())})},[s,z,de,Ze,ue]),b.useEffect(()=>{if(!e||!v)return;const Y=A();if(!re(Y)){ir(v),he.current=null;return}const X=V(Y);if(!X)return;const Ee=JSON.stringify(X);if(Ee!==he.current)return $e.current&&window.clearTimeout($e.current),$e.current=window.setTimeout(()=>{Yi(v,X,R()),he.current=Ee},400),()=>{$e.current&&window.clearTimeout($e.current)}},[e,v,Ft,A]),b.useEffect(()=>{e&&requestAnimationFrame(()=>{if(ue)Ze(0);else if(ze.current){const Y=document.querySelector(`[name="${ze.current}"]`);if(Y){Y.focus(),"select"in Y&&Y.select?.();return}Ze(Me.current||0)}else Te.current&&(Te.current.focus(),Te.current.select())})},[e,Ze,ue]);const Zn=ce.some(Y=>Y&&Object.values(Y).some(Boolean));return e?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"modal d-block",tabIndex:-1,role:"dialog",onClick:Y=>{Y.target===Y.currentTarget&&Vn()},children:[l.jsx("style",{children:`        /* Ocultar flechas de inputs numricos para limpiar la vista */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
        input[type=number] {
          -moz-appearance: textfield;
        }

        /* Ancho minimo para columnas compactas (Temp, P.Ent, etc.) */
        .vi-min-width {
          min-width: 70px;
        }

        /* Estilo spreadsheet tipo Excel (modo claro) */
        .vi-spreadsheet {
          background-color: #ffffff;
          color: #212529;
          font-size: 0.75rem;
          table-layout: auto;
          width: max-content;
        }

        .vi-spreadsheet th,
        .vi-spreadsheet td {
          white-space: nowrap;
        }

        .vi-spreadsheet thead th {
          background-color: #e6f3ff;
          color: #0c2b4d;
          vertical-align: middle;
          padding: 0.25rem 0.35rem;
        }

        .vi-spreadsheet thead th.vi-header-at,
        .vi-spreadsheet thead th.vi-header-quitar,
        .vi-spreadsheet td.vi-at-valor {
          color: #212529 !important;
        }

                .vi-spreadsheet td.vi-row-index,
        .vi-spreadsheet th.vi-row-index {
          color: #0c2b4d;
        }

        /* Columna ndice (#) fija al hacer scroll horizontal */
        .vi-spreadsheet th.vi-row-index {
          position: sticky;
          left: 0;
          z-index: 3;
          background-color: #e6f3ff; /* mismo fondo que otros headers */
        }

        .vi-spreadsheet td.vi-row-index {
          position: sticky;
          left: 0;
          z-index: 2;
          background-color: inherit;
        }

        /* Columna # Medidor (G) fija, justo despus del ndice de fila */
        .vi-spreadsheet th.vi-sticky-medidor,
        .vi-spreadsheet td.vi-sticky-medidor {
          position: sticky;
          left: 30px; /* coincide con width:"30px" de la columna # */
        }

        .vi-spreadsheet thead th.vi-sticky-medidor {
          z-index: 3;
          background-color: #e6f3ff;
        }

        .vi-spreadsheet tbody td.vi-sticky-medidor {
          z-index: 2;
          background-color: inherit;
        }


        .vi-spreadsheet tr.vi-base-row td.vi-row-index {
          background-color: #d6e9ff !important;
          color: #0c2b4d !important;
          font-weight: 600;
        }

        .vi-spreadsheet td.vi-at-valor {
          transition: color 0.15s ease-in-out;
        }

        .vi-spreadsheet td.vi-at-valor:hover {
          color: #0a58ca !important;
        }

        .vi-spreadsheet tr.table-active td.vi-at-valor {
          color: #0c2b4d !important;
        }

        .vi-spreadsheet tbody td {
          padding: 0.15rem 0.25rem;
        }

        .vi-spreadsheet tr.table-active > td {
          background-color: #d9ecff !important;
          color: #0c2b4d !important;
        }

        .vi-spreadsheet tr.table-active input.form-control {
          background-color: #ffffff;
          color: #0c2b4d;
          border-color: #b6d4fe;
        }

        .vi-spreadsheet tr.vi-base-row.table-active > td {
          background-color: #d9ecff !important;
          color: #0c2b4d !important;
        }

        .vi-spreadsheet.table-hover tbody tr:not(.table-active):hover > td {
          background-color: inherit;
          color: inherit;
        }

        .vi-spreadsheet input.form-control {
          background-color: #ffffff;
          border-color: #ced4da;
          color: #212529;
          font-size: 0.75rem;
          padding: 0.05rem 0.25rem;
          height: 1.7rem;
        }

        .vi-spreadsheet input.form-control:disabled,
        .vi-spreadsheet input.form-control[readonly] {
          background-color: #e9ecef;
          color: #6c757d;
          opacity: 1;
        }

        /* Resaltado de fila BASE solo en columna ndice */
        .vi-spreadsheet tr.vi-base-row > td {
          background-color: transparent;
        }

        /* PUNTO E - colores de la columna de conformidad */
        .vi-spreadsheet td.vi-at-valor.vi-at-valor--fail {
          color: #b02a37 !important;
          background-color: #f8d7da;
        }
        .vi-spreadsheet td.vi-at-valor.vi-at-valor--ok {
          color: #0f9d58 !important;
        }

        /* Colores para celdas de Error % (E%) segn rangos */
        .vi-spreadsheet .vi-e-ok {
          color: #198754; /* verde: dentro de tolerancia */
        }
        .vi-spreadsheet .vi-e-warn {
          color: #fd7e14; /* naranja intenso: advertencia */
        }
        .vi-spreadsheet .vi-e-error {
          color: #b02a37; /* rojo oscuro: error fuerte */
        }

        /* Resaltado suave de la celda enfocada (no agresivo) */
        .vi-spreadsheet input.form-control:focus,
        .vi-spreadsheet select.form-select:focus,
        .vi-spreadsheet .table-active input.form-control:focus,
        .vi-spreadsheet .table-active select.form-select:focus {
          background-color: #d6e7ff !important; /* azul ms visible al enfocar */
          box-shadow: 0 0 0 0.18rem rgba(13, 110, 253, 0.3) !important;
        }

        /* FIX: mantener visible el resaltado rojo de celdas con error */
        .vi-spreadsheet input.vi-error-cell {
          border-color: #dc3545 !important;
          background-color: #f8d7da !important;
          box-shadow: 0 0 0 0.15rem rgba(220, 53, 69, 0.25) !important;
        }

        /* -----------------------------
           Tamao de fuente del grid (filas) y ancho adaptable
           ----------------------------- */

        /* Variables base de fuente y ancho maximo de celda */
        .vi-spreadsheet {
          --vi-grid-font-size: 0.75rem;          /* tamano base de filas */
          --vi-grid-cell-max-width: 110px;       /* aprox. ancho actual maximo por columna */
          font-size: var(--vi-grid-font-size);
          table-layout: auto;
        }

        /* Escalones de tamano de fuente para las FILAS (no afecta titulos ni botones) */
        .vi-spreadsheet.vi-grid-font-0 { --vi-grid-font-size: 0.75rem; }
        .vi-spreadsheet.vi-grid-font-1 { --vi-grid-font-size: 0.8rem; }
        .vi-spreadsheet.vi-grid-font-2 { --vi-grid-font-size: 0.85rem; }
        .vi-spreadsheet.vi-grid-font-3 { --vi-grid-font-size: 0.9rem; }
        .vi-spreadsheet.vi-grid-font-4 { --vi-grid-font-size: 0.95rem; }
        .vi-spreadsheet.vi-grid-font-5 { --vi-grid-font-size: 1.0rem; }

        /* Encabezados y celdas (excepto ndice y medidor fijo):
           minimo igual al ttulo, pero pueden crecer hasta el ancho maximo actual */
        .vi-spreadsheet th:not(.vi-row-index):not(.vi-sticky-medidor),
        .vi-spreadsheet td:not(.vi-row-index):not(.vi-sticky-medidor) {
          white-space: nowrap;
          min-width: 64px;
          max-width: var(--vi-grid-cell-max-width);
        }

        /* Inputs y selects del grid: usan la fuente variable y se adaptan en alto.
           El ancho lo gobierna la celda (th/td), as pueden crecer con el contenido
           hasta el maximo definido arriba. */
        .vi-spreadsheet input.form-control {
          font-size: var(--vi-grid-font-size);
          height: calc(var(--vi-grid-font-size) * 2.3);
          width: 100%;
        }

        .vi-spreadsheet select.form-select {
          font-size: var(--vi-grid-font-size);
          width: 100%;
        }

        /* Valores de Q y E% siempre +2px respecto al resto de la fila */
        .vi-spreadsheet .vi-qe-value {
          font-size: calc(1em + 2px);
        }
        `}),l.jsx("div",{className:"modal-dialog modal-fluid",style:{maxWidth:"98vw",margin:"1vw"},children:l.jsx("div",{className:"modal-content",children:l.jsxs("form",{onSubmit:J(_e),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{className:"modal-title",children:a}),l.jsx("button",{type:"button",className:"btn-close",onClick:Vn,"aria-label":"Close"})]}),l.jsx("fieldset",{disabled:E,children:l.jsxs("div",{className:"modal-body p-2",children:[!O&&l.jsx("div",{className:"alert alert-warning py-1 mb-2",children:"Sin conexion. Los cambios se guardaran localmente hasta que vuelva la red."}),l.jsxs("div",{className:"row g-2 mb-2 align-items-end",children:[l.jsxs("div",{className:"col-auto",style:{maxWidth:"130px"},children:[l.jsx("label",{className:"form-label mb-1",children:"Filas"}),l.jsx("input",{type:"number",className:"form-control form-control-sm text-end",min:1,max:50,style:{maxWidth:"90px"},...L,ref:Y=>{Te.current=Y,L.ref(Y)},onBlur:qn,onKeyDown:Gt})]}),l.jsxs("div",{className:"col-md-4 d-flex flex-wrap gap-2",children:[l.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:Ra,children:"+ Agregar Fila"}),l.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:it,children:"- Quitar ltima fila"}),l.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:Xn,children:"Limpiar Todo"})]}),l.jsxs("div",{className:"col-md-4 d-flex justify-content-end gap-2",children:[l.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:Se,children:"Aumentar tamao"}),l.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:j,children:"Reducir tamao"})]}),l.jsxs("div",{className:"col-md-2 text-end text-muted small",children:["Fila activa: #",ge+1,". Desplaza el cursor o enfoca la fila para seleccionarla (Fila 1 se replica al resto)."]})]}),l.jsx("div",{className:"table-responsive border rounded",style:{maxHeight:"70vh",overflowY:"auto",overflowX:"auto"},children:l.jsxs("table",{className:`table table-bordered table-sm mb-0 align-middle text-center vi-spreadsheet vi-grid-font-${M}`,children:[l.jsxs("thead",{className:"table-light sticky-top z-1",children:[l.jsxs("tr",{children:[l.jsx("th",{className:"vi-row-index",style:{width:"30px"},children:"#"}),l.jsx("th",{className:"vi-sticky-medidor",style:{width:"120px"},children:"# Medidor"}),l.jsx("th",{style:{width:"90px"},children:"Estado"}),l.jsx("th",{className:"table-primary border-start border-dark",colSpan:9,children:"Q3"}),l.jsx("th",{className:"table-primary border-start border-dark",colSpan:9,children:"Q2"}),l.jsx("th",{className:"table-primary border-start border-dark",colSpan:9,children:"Q1"}),l.jsx("th",{className:"bg-warning text-dark border-start border-dark vi-header-at",style:{width:"100px"},children:"Conformidad"}),l.jsx("th",{className:"bg-light text-dark vi-header-quitar",style:{width:"40px"},children:"Quitar"})]}),l.jsxs("tr",{style:{fontSize:"0.75rem"},children:[l.jsx("th",{className:"vi-row-index"}),l.jsx("th",{className:"vi-sticky-medidor"}),l.jsx("th",{}),l.jsx("th",{className:"vi-min-width",title:"J",children:"Temp"}),l.jsx("th",{className:"vi-min-width",title:"K",children:"P.Ent"}),l.jsx("th",{className:"vi-min-width",title:"L",children:"P.Sal"}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"M",children:"L.I."}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"N",children:"L.F."}),l.jsx("th",{className:"vi-min-width",title:"O",children:"Vol"}),l.jsx("th",{className:"vi-min-width",title:"P",children:"Tpo"}),l.jsx("th",{title:"T (Caudal)",className:"bg-light border-start text-primary fw-bold vi-min-width",children:"Q3"}),l.jsx("th",{title:"U (Error %)",className:"bg-light text-danger  fw-bold vi-min-width",children:"E%"}),l.jsx("th",{className:"vi-min-width border-start border-dark",title:"V",children:"Temp"}),l.jsx("th",{className:"vi-min-width",title:"W",children:"P.Ent"}),l.jsx("th",{className:"vi-min-width",title:"X",children:"P.Sal"}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"Y",children:"L.I."}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"Z",children:"L.F."}),l.jsx("th",{className:"vi-min-width",title:"AA",children:"Vol"}),l.jsx("th",{className:"vi-min-width",title:"AB",children:"Tpo"}),l.jsx("th",{title:"AF (Caudal)",className:"bg-light border-start text-primary fw-bold vi-min-width",children:"Q2"}),l.jsx("th",{title:"AG (Error %)",className:"bg-light text-danger  fw-bold vi-min-width",children:"E%"}),l.jsx("th",{className:"vi-min-width border-start border-dark",title:"AH",children:"Temp"}),l.jsx("th",{className:"vi-min-width",title:"AI",children:"P.Ent"}),l.jsx("th",{className:"vi-min-width",title:"AJ",children:"P.Sal"}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"AK",children:"L.I."}),l.jsx("th",{className:"vi-min-width text-primary fw-bold",title:"AL",children:"L.F."}),l.jsx("th",{className:"vi-min-width",title:"AM",children:"Vol"}),l.jsx("th",{className:"vi-min-width",title:"AN",children:"Tpo"}),l.jsx("th",{title:"AR (Caudal)",className:"bg-light border-start text-primary fw-bold vi-min-width",children:"Q1"}),l.jsx("th",{title:"AS (Error %)",className:"bg-light text-danger  fw-bold vi-min-width",children:"E%"}),l.jsx("th",{title:"AT (Conformidad)",className:"bg-warning text-dark vi-header-at",children:"Estado"}),l.jsx("th",{className:"vi-header-quitar"})]})]}),l.jsx("tbody",{onKeyDown:ke,children:W.map((Y,X)=>{const Ee=X===0,Ve=Ft?.[X]||{},rt=ce[X]||{},ut=Number(Ve.estado??0),Xe=ut>=1&&ut<=4,Ot=Ve.q3?.c6,Rt=Ve.q3?.c7_seconds,kt=Ve.q3?.c4,sn=Ve.q3?.c5,Nt=Zf(Ot,Rt),ot=Gf(kt,sn,Ot),lt=Ve.q2?.c6,Ht=Ve.q2?.c7_seconds,pn=Ve.q2?.c4,Tn=Ve.q2?.c5,Nn=Zf(lt,Ht),gn=Gf(pn,Tn,lt),Vt=Ve.q1?.c6,Gn=Ve.q1?.c7_seconds,cn=Ve.q1?.c4,Sn=Ve.q1?.c5,Dn=Zf(Vt,Gn),bn=Gf(cn,Sn,Vt),yt=GR(Ve.estado,ot,gn,bn),ds=[Ee?"vi-base-row":"",ge===X?"table-active":""].filter(Boolean).join(" "),xa=q(`rowsData.${X}.medidor`),jn=VR(Ve.medidor??""),$n=jn?h?.[jn]?.message:"",zn=rt.medidor_format||rt.medidor_dup||$n||"",Ds=!!zn,Ta=(yt||"").toUpperCase(),fs=Ta==="NO CONFORME"?"vi-at-valor--fail":Ta==="CONFORME"?"vi-at-valor--ok":"";return l.jsxs("tr",{className:ds,onMouseEnter:()=>we(X),onClick:()=>we(X),onFocusCapture:()=>we(X),children:[l.jsx("td",{className:"small vi-row-index",children:X+1}),l.jsx("td",{className:"vi-sticky-medidor",children:l.jsx("input",{"data-row":X,"data-row-id":Y.id,...xa,size:1,style:{minWidth:"100%"},disabled:Xe,onInput:hn,className:["form-control form-control-sm p-1 text-center vi-medidor-input",Ds?"vi-error-cell":""].filter(Boolean).join(" "),title:zn||"",onChange:rn=>{const Na=G(`rowsData.${X}.medidor`);if(xa.onChange(rn),g?.(Na),X===0)return;const Jn=rn.currentTarget.value.trim();if(!Jn){Le.current.delete(Y.id);return}const un=pv(et?.medidor??"",X,f);un&&un===Jn?Le.current.delete(Y.id):Le.current.set(Y.id,!0)}})}),l.jsx("td",{children:l.jsxs("select",{className:"form-select form-select-sm p-0 px-1",style:{fontSize:"0.75rem",height:"24px"},...q(`rowsData.${X}.estado`,{valueAsNumber:!0}),children:[l.jsx("option",{value:0,children:"0"}),l.jsx("option",{value:1,children:"1"}),l.jsx("option",{value:2,children:"2"}),l.jsx("option",{value:3,children:"3"}),l.jsx("option",{value:4,children:"4"}),l.jsx("option",{value:5,children:"5"})]})}),l.jsx("td",{className:"border-start border-dark",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!Ee||Xe,...q(`rowsData.${X}.q3.c1`,{setValueAs:Fn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!Ee||Xe,...q(`rowsData.${X}.q3.c2`,{setValueAs:Fn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!Ee||Xe,...q(`rowsData.${X}.q3.c3`,{setValueAs:Fn})})}),l.jsx("td",{className:"bg-white",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Xe,onInput:hn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(rt.q3_li?" vi-error-cell":""),title:rt.q3_li||"",...q(`rowsData.${X}.q3.c4`,{setValueAs:Fn})})}),l.jsx("td",{className:"bg-white",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Xe,onInput:hn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(rt.q3_lf?" vi-error-cell":""),title:rt.q3_lf||"",...q(`rowsData.${X}.q3.c5`,{setValueAs:Fn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!Ee||Xe,...q(`rowsData.${X}.q3.c6`,{setValueAs:Fn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!Ee||Xe,...q(`rowsData.${X}.q3.c7`),placeholder:"m,ss,ms"})}),l.jsx(zl,{val:Nt}),l.jsx(zl,{val:ot,isErr:!0,warnThreshold:2,failThreshold:5}),l.jsx("td",{className:"border-start border-dark",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!Ee||Xe,...q(`rowsData.${X}.q2.c1`,{setValueAs:Fn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!Ee||Xe,...q(`rowsData.${X}.q2.c2`,{setValueAs:Fn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!Ee||Xe,...q(`rowsData.${X}.q2.c3`,{setValueAs:Fn})})}),l.jsx("td",{className:"bg-white",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Xe,onInput:hn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(rt.q2_li?" vi-error-cell":""),title:rt.q2_li||"",...q(`rowsData.${X}.q2.c4`,{setValueAs:Fn})})}),l.jsx("td",{className:"bg-white",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Xe,onInput:hn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(rt.q2_lf?" vi-error-cell":""),title:rt.q2_lf||"",...q(`rowsData.${X}.q2.c5`,{setValueAs:Fn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!Ee||Xe,...q(`rowsData.${X}.q2.c6`,{setValueAs:Fn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!Ee||Xe,...q(`rowsData.${X}.q2.c7`),placeholder:"m,ss,ms"})}),l.jsx(zl,{val:Nn}),l.jsx(zl,{val:gn,isErr:!0,warnThreshold:2,failThreshold:5}),l.jsx("td",{className:"border-start border-dark",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!Ee||Xe,...q(`rowsData.${X}.q1.c1`,{setValueAs:Fn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!Ee||Xe,...q(`rowsData.${X}.q1.c2`,{setValueAs:Fn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!Ee||Xe,...q(`rowsData.${X}.q1.c3`,{setValueAs:Fn})})}),l.jsx("td",{className:"bg-white",children:l.jsx("input",{type:"text",inputMode:"decimal",size:1,style:{minWidth:"100%"},disabled:Xe,onInput:hn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(rt.q1_li?" vi-error-cell":""),title:rt.q1_li||"",...q(`rowsData.${X}.q1.c4`,{setValueAs:Fn})})}),l.jsx("td",{className:"bg-white",children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",size:1,style:{minWidth:"100%"},disabled:Xe,onInput:hn,className:"form-control form-control-sm px-1 text-center fw-bold text-primary"+(rt.q1_lf?" vi-error-cell":""),title:rt.q1_lf||"",...q(`rowsData.${X}.q1.c5`,{setValueAs:Fn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!Ee||Xe,...q(`rowsData.${X}.q1.c6`,{setValueAs:Fn})})}),l.jsx("td",{children:l.jsx("input",{type:"text",className:"form-control form-control-sm px-1 text-center",size:1,style:{minWidth:"100%"},onInput:hn,disabled:!Ee||Xe,...q(`rowsData.${X}.q1.c7`),placeholder:"m,ss,ms"})}),l.jsx(zl,{val:Dn}),l.jsx(zl,{val:bn,isErr:!0,warnThreshold:5,failThreshold:5}),l.jsx("td",{className:`bg-light border-start fw-bold small text-center vi-at-valor ${fs}`,children:yt}),l.jsx("td",{className:"text-center align-middle bg-light",children:l.jsx("button",{type:"button",className:"btn btn-danger btn-sm p-0",style:{width:"20px",height:"20px",lineHeight:"1"},onClick:rn=>{rn.stopPropagation(),an(X)},disabled:W.length<=1,title:"Eliminar esta fila",children:""})})]},Y.id)})})]})})]})}),l.jsxs("div",{className:"modal-footer py-1",children:[l.jsx("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:Vn,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",ref:Z,disabled:Zn||E,children:$&&O?"Reintentar guardar":"Guardar Bancada"})]})]})})})]}),l.jsx("div",{className:"modal-backdrop show vi-backdrop"})]}):null}function gu({show:e,title:a="Contrasea para proteger Excel",confirmLabel:s="Generar Excel",helpText:i="Se usar para proteger estructura y escritura del libro. No habr contrasea de apertura.",onClose:c,onConfirm:d}){const[f,h]=b.useState(""),g=b.useRef(null),p=f.trim().length>0;if(b.useEffect(()=>{e&&(h(""),setTimeout(()=>g.current?.focus(),0))},[e]),b.useEffect(()=>{if(!e)return;const x=S=>{S.key==="Escape"&&c()};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,c]),!e)return null;const v=x=>{x.preventDefault(),p&&d(f.trim())};return l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"pwdModalTitle",onClick:x=>{x.target===x.currentTarget&&c()},children:l.jsx("div",{className:"modal-dialog",children:l.jsxs("form",{className:"modal-content",onSubmit:v,children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{id:"pwdModalTitle",className:"modal-title",children:a}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:c})]}),l.jsx("div",{className:"modal-body",children:l.jsxs("div",{className:"mb-3",children:[l.jsx(to,{label:"Contrasea",inputId:"pwd",value:f,onChange:x=>h(x.target.value),inputRef:g,minLength:1,required:!0}),l.jsx("div",{className:"form-text",children:i})]})}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:c,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!p,children:s})]})]})})})}async function QR(e,a){try{const{data:s}=await Ke.put(`/oi/${e}`,a);return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo actualizar la OI",c=new Error(i);throw c.status=s?.response?.status,c}}async function YR(e,a){try{const{data:s}=await Ke.patch(`/oi/${e}/code`,{code:a});return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo actualizar el codigo de la OI",c=new Error(i);throw c.status=s?.response?.status,c}}async function KR(e,a){try{const{data:s}=await Ke.patch(`/oi/${e}/restore-updated-at`,a);return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo restaurar la fecha de la OI",c=new Error(i);throw c.status=s?.response?.status,c}}async function XR(e){try{const{data:a}=await Ke.post("/oi",e);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo crear el OI";throw new Error(s)}}async function gv(e,a){try{const{data:s}=await Ke.post(`/oi/${e}/bancadas`,a);return s}catch(s){const i=s?.response?.data?.detail;let c=s?.message??"No se puedo agregar la bancada";typeof i=="string"?c=i:i&&typeof i=="object"&&(c=i.message??i.detail??c);const d=s?.response?.data?.duplicates??(i&&typeof i=="object"?i.duplicates:void 0),f=new Error(c);throw f.status=s?.response?.status,Array.isArray(d)&&(f.duplicates=d),f}}async function JR(e,a){try{const{data:s}=await Ke.put(`/oi/bancadas/${e}`,a);return s}catch(s){const i=s?.response?.data?.detail;let c=s?.message??"No se pudo actualizar la bancada";typeof i=="string"?c=i:i&&typeof i=="object"&&(c=i.message??i.detail??c);const d=s?.response?.data?.duplicates??(i&&typeof i=="object"?i.duplicates:void 0),f=new Error(c);throw f.status=s?.response?.status,Array.isArray(d)&&(f.duplicates=d),f}}async function WR(e,a){try{const{data:s}=await Ke.patch(`/oi/bancadas/${e}/saved_at`,a);return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo actualizar la fecha de la bancada",c=new Error(i);throw c.status=s?.response?.status,c}}async function eT(e,a){try{const{data:s}=await Ke.put(`/oi/bancadas/${e}/restore`,a);return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo restaurar la bancada",c=new Error(i);throw c.status=s?.response?.status,c}}async function bv(e){try{await Ke.delete(`/oi/bancadas/${e}`)}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo eliminar la bancada";throw new Error(s)}}async function O0(e,a){let s;try{s=await Ke.post(`/oi/${e}/excel`,{password:a},{responseType:"blob"})}catch(p){let v=p?.message??"No se pudo generar el Excel";const x=p?.response?.data;if(x instanceof Blob)try{const S=await x.text();try{const _=JSON.parse(S)?.detail;typeof _=="string"?v=_:Array.isArray(_)&&_.length>0?v=_.map(E=>String(E?.msg??"")).filter(Boolean).join(", "):S&&(v=S)}catch{S&&(v=S)}}catch{}else v=p?.response?.data?.detail??v;throw new Error(v)}const i=s.data,f=s.headers["content-disposition"]?.match(/filename="(.+?)"/i)?.[1]??`OI-${e}.xlsx`,h=URL.createObjectURL(i),g=document.createElement("a");g.href=h,g.download=f,document.body.appendChild(g),g.click(),URL.revokeObjectURL(h),g.remove()}async function tT(e){await Ke.delete(`/oi/${e}`)}async function nT(e){try{const{data:a}=await Ke.post(`/oi/${e}/lock`);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo bloquear la OI",i=new Error(s);throw i.status=a?.response?.status,i}}async function Cc(e,a){try{const s=a?{params:{reason:a}}:void 0,{data:i}=await Ke.delete(`/oi/${e}/lock`,s);return i}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo liberar la OI",c=new Error(i);throw c.status=s?.response?.status,c}}async function aT(e,a){try{const{data:s}=await Ke.patch(`/oi/${e}/saved_at`,a);return s}catch(s){const i=s?.response?.data?.detail??s?.message??"No se pudo actualizar la fecha de guardado",c=new Error(i);throw c.status=s?.response?.status,c}}async function Pf(e){try{const{data:a}=await Ke.get(`/oi/${e}/full`);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se puedo cargar el OI";throw new Error(s)}}async function sT(e){try{const{data:a}=await Ke.get("/oi",{params:{q:e.q||void 0,date_from:e.dateFrom||void 0,date_to:e.dateTo||void 0,limit:e.limit,offset:e.offset,responsable_tech_number:e.responsableTechNumber||void 0},headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo obtener el listado de OI";throw new Error(s)}}async function rT(e){let a;try{a=await Ke.get("/oi/export/csv",{params:{q:e.q||void 0,date_from:e.dateFrom||void 0,date_to:e.dateTo||void 0,responsable_tech_number:e.responsableTechNumber||void 0},responseType:"blob"})}catch(f){let h=f?.message??"No se pudo exportar el CSV";const g=f?.response?.data;if(g instanceof Blob)try{const v=await g.text();try{const S=JSON.parse(v)?.detail;typeof S=="string"?h=S:Array.isArray(S)&&S.length>0?h=S.map($=>String($?.msg??"")).filter(Boolean).join(", "):v&&(h=v)}catch{v&&(h=v)}}catch{}else h=f?.response?.data?.detail??h;const p=new Error(h);throw p.status=f?.response?.status,p}const s=a.data,d=a.headers["content-disposition"]?.match(/filename="(.+?)"/i)?.[1]??"oi_list.csv";return{blob:s,filename:d}}async function lT(){try{const{data:e}=await Ke.get("/oi/responsables");return e}catch(e){const a=e?.response?.data?.detail??e?.message??"No se pudo obtener responsables";throw new Error(a)}}async function Qf(e){try{const{data:a}=await Ke.get(`/oi/${e}`);return a}catch(a){const s=a?.response?.data?.detail??a?.message??"No se pudo obtener el OI";throw new Error(s)}}const ch="vi.currentOI";function Ki(e){sessionStorage.setItem(ch,JSON.stringify(e))}function yv(){const e=sessionStorage.getItem(ch);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function Cm(){sessionStorage.removeItem(ch)}const Yf=e=>{if(e)return{c1:e.c1??null,c2:e.c2??null,c3:e.c3??null,c4:e.c4??null,c5:e.c5??null,c6:e.c6??null,c7:e.c7??"",c7_seconds:e.c7_seconds??null,caudal:e.caudal??null,error:e.error??null}},Kf=e=>{if(e)return{c1:e.c1??null,c2:e.c2??null,c3:e.c3??null,c4:e.c4??null,c5:e.c5??null,c6:e.c6??null,c7:e.c7??null,c7_seconds:e.c7_seconds??null,caudal:e.caudal??null,error:e.error??null}},iT=e=>({medidor:e.medidor??"",estado:e.estado??0,q3:Yf(e.q3),q2:Yf(e.q2),q1:Yf(e.q1)}),oT=e=>({medidor:e.medidor??"",estado:e.estado??0,q3:Kf(e.q3),q2:Kf(e.q2),q1:Kf(e.q1)}),R0=e=>e.rows_data&&e.rows_data.length>0?e.rows_data:Array.from({length:e.rows}).map((a,s)=>({medidor:s===0?e.medidor??"":"",estado:e.estado,q3:s===0?e.q3??void 0:void 0,q2:s===0?e.q2??void 0:void 0,q1:s===0?e.q1??void 0:void 0})),cT=e=>e.reduce((a,s)=>a+(s.rows??0),0),uT=e=>JSON.parse(JSON.stringify(e)),vv=e=>JSON.stringify({medidor:e.medidor??null,estado:e.estado??0,rows:e.rows??0,rows_data:e.rows_data??null,q1:e.q1??null,q2:e.q2??null,q3:e.q3??null}),xv=e=>e.rows_data&&e.rows_data.length>0?e.rows_data:R0(e),dT=(e,a)=>e==="view"&&a?"view":"edit",Nv=e=>{if(!e)return"";const s=/([zZ]|[+-]\d{2}:?\d{2})$/.test(e)?e:`${e}Z`,i=new Date(s);if(Number.isNaN(i.getTime()))return"";const c=d=>d.toString().padStart(2,"0");return`${i.getFullYear()}-${c(i.getMonth()+1)}-${c(i.getDate())}T${c(i.getHours())}:${c(i.getMinutes())}`},fT=e=>{if(!e)return"";const a=new Date(e);return Number.isNaN(a.getTime())?"":a.toISOString().replace("Z","")},T0=e=>(e??"").trim().toUpperCase(),mT=e=>{const a={};e.forEach(i=>{const c=T0(i.medidor);c&&(a[c]||(a[c]={items:[],ids:[]}),i.bancada_item!=null&&!a[c].items.includes(i.bancada_item)&&a[c].items.push(i.bancada_item),i.bancada_id!=null&&!a[c].ids.includes(i.bancada_id)&&a[c].ids.push(i.bancada_id))});const s={};return Object.entries(a).forEach(([i,c])=>{let d="Este medidor existe en otra bancada de esta misma OI.";c.items.length>0&&(d=`Este medidor existe en la bancada #${[...c.items].sort((h,g)=>h-g).join(", ")} de esta misma OI.`),s[i]={message:d,bancadaItem:c.items[0],bancadaId:c.ids[0]}}),s},hT="Tienes una OI abierta en edicion. Cierra la OI antes de salir. Deseas salir de todas formas?",pT=(e,a=!0)=>{const i=b.useContext(Ga)?.navigator;b.useEffect(()=>{if(!a||!i||typeof i.block!="function")return;const c=i.block(d=>{const f={...d,retry(){c(),d.retry()}};e(f)});return c},[i,e,a])},gT=e=>{const a=Ke.defaults.baseURL??(typeof window<"u"?window.location.origin:"");return`${String(a).replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`},bT=()=>{const[e,a]=b.useState(typeof navigator<"u"?navigator.onLine:!0);return b.useEffect(()=>{const s=()=>a(!0),i=()=>a(!1);return window.addEventListener("online",s),window.addEventListener("offline",i),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",i)}},[]),e},Ac=e=>{if(e?.status??e?.response?.status)return!1;const s=e?.code??e?.name;return s==="ERR_NETWORK"||s==="ECONNABORTED"?!0:!e?.response};function Sv(){const{toast:e}=Qr(),a=Pr(),s=oa(),{oiId:i}=Ej(),[c,d]=Yv(),f=bT(),{data:h}=Fr({queryKey:["catalogs"],queryFn:th}),{register:g,handleSubmit:p,watch:v,formState:{errors:x},reset:S,getValues:$}=eu({resolver:CO($R),defaultValues:{oi:`OI-0001-${new Date().getFullYear()}`,numeration_type:"correlativo",pma:16,q3:2.5,alcance:80}}),_=Ln(),E=_?.userId??null,O=_?.bancoId??eo(),q=Va(_?.role,_?.username)!=="technician",D=yv(),J=i?Number(i):null,z=Number.isFinite(J)?J:null,T=z!=null||(D?.id??null)!=null,G=(c.get("mode")||"").toLowerCase(),L=dT(G,T),W=L==="view",de=L==="edit",[Ae,je]=b.useState(!1),[ge,we]=b.useState(!1),[Me,Te]=b.useState(null),[M,I]=b.useState(null),[K,xe]=b.useState(!1),Se=ge||W,[j,Z]=b.useState(!1),[ce,U]=b.useState(null),[ue,be]=b.useState(null),[ze,$e]=b.useState(null),[he,Le]=b.useState(!1),[Ie,Ze]=b.useState(""),[mt,ke]=b.useState(null),[Ge,pe]=b.useState("bancada"),[Fe,Oe]=b.useState(!1),[We,A]=b.useState(!1),[V,R]=b.useState(null),Q=b.useRef([]),P=b.useRef(null),re=b.useRef(!1),Re=b.useRef(!1),Be=b.useRef(!1),se=b.useRef(null),Ue=b.useRef(!1),He=b.useRef(f),st=b.useRef(!1),Xt=b.useRef(!1),[_e,et]=b.useState(null),[Ft,At]=b.useState(null),[Rn,Hn]=b.useState([]),[Ra,an]=b.useState(!1),[it,Xn]=b.useState(null),[qn,Gt]=b.useState(!1),[Vn,Zn]=b.useState(null),[Y,X]=b.useState(0),[Ee,Ve]=b.useState({}),[rt,ut]=b.useState({}),Xe=s.state?.returnTo,Ot=()=>typeof Xe=="string"&&Xe?Xe:"/oi/list",Rt=w=>{const F=new URLSearchParams(c);F.set("mode",w),d(F,{replace:!0})},kt="new",sn=15,Nt=w=>w?`bancada-${w.id}`:kt,ot=w=>w==null?!1:typeof w=="string"?w.trim()!=="":typeof w=="number"?Number.isFinite(w):!0,lt=w=>w==="c7_seconds"||w==="caudal"||w==="error",Ht=w=>w?Object.entries(w).some(([F,fe])=>lt(F)?!1:ot(fe)):!1,pn=w=>!w||!Array.isArray(w.rowsData)?!1:w.rowsData.some(F=>{if(!F)return!1;if(Number(F.estado??0)!==0)return!0;const De=F.medidor;return typeof De=="string"&&De.trim()!==""?!0:Ht(F.q3)||Ht(F.q2)||Ht(F.q1)}),Tn=(w=sn)=>Array.from({length:w}).map(()=>({medidor:"",estado:0,q3:{},q2:{},q1:{}})),Nn=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`draft-${Date.now()}`,gn=w=>({draftId:Nn(),draftCreatedAt:new Date().toISOString(),estado:0,rows:sn,rowsData:Tn(),version:null}),Vt=w=>{const F=new URLSearchParams(s.search);F.set("mode","edit");const fe=s.pathname==="/oi"||s.pathname==="/oi/"?w?`/oi/${w}`:"/oi":s.pathname,De=F.toString();return De?`${fe}?${De}`:fe},Gn=(w,F)=>!w||!E||O==null?null:{version:1,ts:new Date().toISOString(),userId:E,bankId:O,oiId:w,oiCode:$("oi")??null,returnTo:Vt(w),mode:"edit",modal:F},cn=()=>{if(Ra)return it?{type:"bancada",bancadaId:it.id}:{type:"bancada",isNew:!0}},Sn=w=>Lf({userId:E,bankId:O,oiId:w,type:"bancada",isNew:!0}),Dn=w=>{const F=Sn(w);if(!F)return null;const fe=Bf(F);if(!fe||!E||O==null||!w||fe.userId!==E||fe.bankId!==O||fe.oiId!==w)return null;const De=fe?.data??null;return pn(De)?De:(ir(F),null)},bn=(w,F)=>{const fe=Sn(w);if(!fe)return;if(!F||!pn(F)){ir(fe);return}if(!E||O==null||!w)return;const De={version:1,ts:new Date().toISOString(),userId:E,bankId:O,oiId:w,isNew:!0,data:F},at=Gn(w,{type:"bancada",isNew:!0});Yi(fe,De,at)},yt=w=>Lf({userId:E,bankId:O,oiId:w,type:"header"}),ds=w=>{if(!w)return null;const F=Bf(w);return!F||!E||O==null||F.userId!==E||F.bankId!==O||_e!=null&&F.oiId!==_e?null:F?.data??null},xa=(w,F)=>{if(!w||!E||O==null)return;const fe=_e??0,De={version:1,ts:new Date().toISOString(),userId:E,bankId:O,oiId:fe,data:F},at=Gn(_e,cn());Yi(w,De,at)},jn=w=>{w&&ir(w)},$n=w=>{const F={};return w.q3!=null&&(F.q3=Number(w.q3)),w.alcance!=null&&(F.alcance=Number(w.alcance)),w.pma!=null&&(F.pma=Number(w.pma)),w.numeration_type&&(F.numeration_type=w.numeration_type),F},zn=(w,F)=>Lf({userId:E,bankId:O,oiId:w,type:"bancada",bancadaId:F}),Ds=(w,F)=>{const fe=zn(w,F);if(!fe)return null;const De=Bf(fe);if(!De||!E||O==null||!w||!F||De.userId!==E||De.bankId!==O||De.oiId!==w)return null;const at=De?.data??null;return pn(at)?at:(ir(fe),null)},Ta=(w,F,fe)=>{const De=zn(w,F);if(!De)return;if(!pn(fe)){ir(De);return}if(!E||O==null||!w||!F)return;const at={version:1,ts:new Date().toISOString(),userId:E,bankId:O,oiId:w,bancadaId:F,data:fe},Et=Gn(w,{type:"bancada",bancadaId:F});Yi(De,at,Et)},fs=(w,F)=>{const fe=zn(w,F);fe&&ir(fe)},rn=yt(_e);b.useEffect(()=>{h&&S(w=>({...w,q3:h.q3[0],alcance:h.alcance[0],pma:16}))},[h,S]),b.useEffect(()=>{const w=yv(),F=z??w?.id??null;if(!F){et(null),Hn([]),Q.current=[],P.current=null,Zn(null),X(0),At(null),be(null),$e(null),Z(!1),we(!1),Te(null),I(null),xe(!1),U(null);return}(async()=>{try{const fe=await Pf(F);et(fe.id),Ki({id:fe.id,code:fe.code}),Hn(fe.bancadas??[]),Q.current=uT(fe.bancadas??[]),P.current=fe.updated_at??null,Zn(fe.medidores_usuario??null),X(fe.medidores_total_code??0),be(fe.saved_at??null),$e(fe.created_at??null),At(fe.updated_at??fe.created_at);const De={oi:fe.code,q3:fe.q3,alcance:fe.alcance,pma:fe.pma,numeration_type:fe.numeration_type??"correlativo"};S(De),Z(!1),we(fe.read_only_for_current_user??!1),Te(fe.locked_by_full_name??null),I(fe.locked_by_user_id??null),xe((fe.locked_by_user_id??null)===E),U(De)}catch{Cm()}})()},[S,E,z]),b.useEffect(()=>{if(!_e||rt[kt])return;const w=Dn(_e);w&&(ut(F=>({...F,[kt]:w})),e({kind:"info",message:"Se restauro un borrador local."}))},[_e,rt,e]),b.useEffect(()=>{if(!_e||!E||!de)return;let w=!1;return(async()=>{const F=fe=>{we(fe?.read_only_for_current_user??!1),Te(fe?.locked_by_full_name??null),I(fe?.locked_by_user_id??null),xe((fe?.locked_by_user_id??null)===E)};try{const fe=await nT(_e);if(w)return;F(fe)}catch(fe){if(w)return;const De=fe?.status??fe?.response?.status;let at=null;try{const ht=await Pf(_e);if(w)return;at=ht.locked_by_full_name??null,F({read_only_for_current_user:!0,locked_by_full_name:at,locked_by_user_id:ht.locked_by_user_id??null})}catch{we(!0),xe(!1)}const Et=at?`La OI est? siendo editada por ${at}. Se abre en modo lectura.`:fe?.message??"La OI est? siendo editada por otro usuario. Int?ntelo m?s tarde.";e({kind:De===423||De===409?"warning":"error",title:De===423||De===409?"OI bloqueada":"Error",message:Et}),we(!0),xe(!1),G!=="view"&&Rt("view")}})(),()=>{w=!0}},[_e,E,de]),b.useEffect(()=>()=>{_e&&K&&Cc(_e).catch(()=>{})},[_e,K]),b.useEffect(()=>{_e&&(!K||Se||!de||fE(_e))},[K,_e,Se,de]),b.useEffect(()=>{Re.current=!1,Be.current=!1,A(!1),Ue.current=!1,Xt.current=!1},[_e]),b.useEffect(()=>{if(!He.current&&f){if(!!!Ln()?.token){e({kind:"warning",message:"Conexion restablecida, pero debes iniciar sesion para guardar."}),He.current=f;return}(Be.current||We)&&e({kind:"info",message:"Conexion restablecida. Puedes reintentar guardar."})}He.current=f},[f,We,e]),b.useEffect(()=>{const w=()=>{e({kind:"warning",message:"Sesion expirada. Inicia sesion para guardar. Tu borrador esta guardado."})};return window.addEventListener("medileser:auth-expired",w),()=>window.removeEventListener("medileser:auth-expired",w)},[e]),b.useEffect(()=>{const w=gE();if(!w){R(null),st.current=!1;return}const F=`${s.pathname}${s.search}`,fe=w.route===F,De=w.oiId==null||w.oiId===_e;if(!fe&&!De){R(null),st.current=!1;return}R(w),w.type==="save_bancada"&&A(!0),w.type==="save_oi"&&(Be.current=!0),st.current||(e({kind:"info",message:"Sesion restaurada. Reintenta guardar."}),st.current=!0)},[s.pathname,s.search,_e,e]);const Na=de&&!Se&&(j||!_e);b.useEffect(()=>{if(!Na||Ue.current)return;const w=ds(rn);if(!w)return;const F=$();S({...F,...w,numeration_type:w.numeration_type??F.numeration_type??"correlativo"}),Ue.current=!0,e({kind:"info",message:"Se restauro un borrador local."})},[Na,rn,$,S,e]),b.useEffect(()=>{if(!Na)return;const w=v(F=>{se.current&&window.clearTimeout(se.current),se.current=window.setTimeout(()=>{xa(rn,$n(F))},400)});return()=>{w.unsubscribe(),se.current&&window.clearTimeout(se.current)}},[v,Na,rn]);const Jn=b.useMemo(()=>Object.keys(rt).length>0,[rt]),un=de&&!Se&&(K||j||Jn);b.useEffect(()=>{if(!un)return;const w=F=>{if(!re.current)return F.preventDefault(),F.returnValue="",""};return window.addEventListener("beforeunload",w),()=>window.removeEventListener("beforeunload",w)},[un]),pT(w=>{if(!un){w.retry();return}if(re.current){w.retry();return}if(w.location.pathname===s.pathname){w.retry();return}window.confirm(hT)&&w.retry()},un),b.useEffect(()=>{if(!_e||!K||Se||!de)return;const w=()=>{if(re.current||Re.current)return;Re.current=!0;const fe=Ln()?.token,De=gT(`/oi/${_e}/close`);fetch(De,{method:"POST",headers:fe?{Authorization:`Bearer ${fe}`}:void 0,keepalive:!0}).catch(()=>{})},F=()=>{w()};return window.addEventListener("pagehide",F),()=>window.removeEventListener("pagehide",F)},[_e,K,Se,de]);const fr=v("pma"),Xr=b.useMemo(()=>FR(Number(fr)),[fr]),mr=v("numeration_type")??"correlativo",hr=async w=>{try{je(!0);const F=Ln();if(!F)throw new Error("Sesin no vlida");const fe=F.bancoId;if(fe==null)throw new Error("Debe seleccionar un banco para crear una OI.");const De={code:w.oi,q3:Number(w.q3),alcance:Number(w.alcance),pma:Number(w.pma),banco_id:fe,tech_number:F.techNumber,numeration_type:w.numeration_type??"correlativo"},at=await XR(De);return et(at.id),At(at.updated_at??at.created_at),Zn(at.medidores_usuario??0),X(at.medidores_total_code??0),be(at.saved_at??null),$e(at.created_at??null),Ki({id:at.id,code:at.code}),U(w),Be.current=!1,jn(yt(null)),jn(yt(at.id)),Tl(),R(null),e({kind:"success",title:"OI creada",message:`${at.code} (#${at.id})`}),!0}catch(F){return Ac(F)?(Be.current=!0,xa(rn,$n(w)),e({kind:"warning",title:"Sin conexion",message:"Sin conexion. Cambios guardados localmente. Reintenta al reconectar."}),!1):Qi(F)?(Be.current=!0,xa(rn,$n(w)),!1):(e({kind:"error",title:"Error",message:F?.message??"Error creando OI"}),!1)}finally{je(!1)}},ms=async w=>{if(!_e)return!1;if(Se)return e({kind:"warning",title:"Solo lectura",message:"La OI est bloqueada por otro usuario."}),!1;try{if(je(!0),!_e)throw new Error("No hay OI seleccionada para actualizar.");const F=w.oi?.trim(),fe=w.numeration_type??"correlativo",De=ce?.numeration_type??"correlativo",at=!ce||Number(w.q3)!==Number(ce.q3)||Number(w.alcance)!==Number(ce.alcance)||Number(w.pma)!==Number(ce.pma)||fe!==De,Et=q&&!!F&&F!==(ce?.oi??""),ht=!Et||at,dn=Ct=>{At(Ct.updated_at??Ct.created_at),be(Ct.saved_at??null),$e(Ct.created_at??null),Ct.code&&Ki({id:Ct.id,code:Ct.code}),I(Ct.locked_by_user_id??null),Te(Ct.locked_by_full_name??null),we(Ct.read_only_for_current_user??!1),xe((Ct.locked_by_user_id??null)===E)};let kn=null;if(ht){if(!Ft)throw new Error("No se pudo determinar la version actual de la OI. Recargue la pagina e intentelo de nuevo.");const Ct={q3:Number(w.q3),alcance:Number(w.alcance),pma:Number(w.pma),numeration_type:fe,updated_at:Ft};kn=await QR(_e,Ct),dn(kn)}if(Et&&F)try{const Ct=await YR(_e,F);kn=Ct,dn(Ct)}catch(Ct){if(Ac(Ct)||Qi(Ct))throw Ct;const el=Ct?.status??Ct?.response?.status;return e(el===409?{kind:"error",title:"Conflicto",message:"Ya existe una OI con ese codigo."}:el===403?{kind:"error",title:"No autorizado",message:"No autorizado."}:el===422||el===400?{kind:"error",title:"Formato",message:"Formato de OI invalido. Debe ser OI-####-YYYY."}:{kind:"error",title:"Error",message:Ct?.message??"Error actualizando OI"}),!1}return kn?(U({...w,oi:kn.code,numeration_type:fe}),Z(!1),Be.current=!1,jn(rn),Tl(),R(null),e({kind:"success",title:"OI actualizada",message:kn.code??w.oi}),!0):(Z(!1),Be.current=!1,jn(rn),Tl(),R(null),e({kind:"success",title:"OI actualizada",message:w.oi}),!0)}catch(F){if(Ac(F))return Be.current=!0,xa(rn,$n(w)),e({kind:"warning",title:"Sin conexion",message:"Sin conexion. Cambios guardados localmente. Reintenta al reconectar."}),!1;if(Qi(F))return Be.current=!0,xa(rn,$n(w)),!1;const fe=F?.status??F?.response?.status;return e(fe===409?{kind:"error",title:"Conflicto",message:"La OI fue modificada por otro usuario. Recargue la pgina y vuelva a intentar."}:{kind:"error",title:"Error",message:F?.message??"Error actualizando OI"}),!1}finally{je(!1)}},zs=!!_e&&j&&!Se,Mt=()=>Ve({}),ks=w=>{const F=T0(w);F&&Ve(fe=>{if(!fe[F])return fe;const De={...fe};return delete De[F],De})},Ya=()=>{if(Se){e({kind:"warning",title:"Solo lectura",message:"No puede agregar bancadas mientras la OI est bloqueada."});return}if(!_e)return;Mt(),A(!1);const w=Dn(_e),F=w??gn();ut(fe=>({...fe,[kt]:F})),bn(_e,F),w&&e({kind:"info",message:"Se restauro un borrador local."}),Xn(null),an(!0)},Wn=w=>{if(Se&&!W){e({kind:"warning",title:"Solo lectura",message:"No puede editar bancadas mientras la OI est? bloqueada."});return}Mt(),A(!1);const F=Ds(_e,w.id);if(F){const fe=Nt(w);ut(De=>({...De,[fe]:F})),e({kind:"info",message:"Se restauro un borrador local."})}Xn(w),an(!0)};b.useEffect(()=>{if(!_e||Xt.current)return;const w=rE();if(w&&!(!E||O==null)&&!(w.userId!==E||w.bankId!==O)&&w.oiId===_e){if(w.modal?.type==="bancada"){if(w.modal.isNew){Xt.current=!0,qf(),Ya();return}if(w.modal.bancadaId){const F=Rn.find(fe=>fe.id===w.modal?.bancadaId);if(!F)return;Xt.current=!0,qf(),Wn(F);return}}Xt.current=!0,qf()}},[E,O,Rn,_e,Ya,Wn]);const Da=b.useMemo(()=>{const w=Nt(it),F=rt[w];if(F){const at=F.version??it?.updated_at??it?.created_at??null;return{...F,version:at}}if(!it)return;const De=R0(it).map(iT);return{estado:it.estado,rows:De.length||it.rows,rowsData:De,version:it.updated_at??it.created_at??null}},[it,rt]),Jr=async w=>{if(_e){if(Se){e({kind:"warning",title:"Solo lectura",message:"No puede guardar bancadas mientras la OI est bloqueada."});return}Mt(),A(!1);try{je(!0);const F=w.draftCreatedAt??rt[kt]?.draftCreatedAt,fe={estado:Number(w.estado??0),rows:Number(w.rowsData.length),rows_data:w.rowsData.map(oT)};if(it){const De=w.version??it.updated_at??it.created_at??null;if(!De)throw new Error("No se pudo determinar la versin actual de la bancada. Recargue y vuelva a intentar.");const at={...fe,updated_at:De},Et=await JR(it.id,at);Hn(ht=>ht.map(dn=>dn.id===Et.id?Et:dn)),At(Et.updated_at??Et.created_at??Ft),Zn(null),fs(_e,it.id),ut(ht=>{const dn=`bancada-${it.id}`,{[dn]:kn,...Ct}=ht;return Ct}),e({kind:"success",message:"Bancada actualizada"})}else{F&&(fe.draft_created_at=F);const De=await gv(_e,fe);Hn(at=>[...at,De]),At(De.updated_at??De.created_at??Ft),Zn(null),ut(at=>{const{new:Et,...ht}=at;return ht}),bn(_e,null),e({kind:"success",message:"Bancada agregada"})}try{const De=await Qf(_e);Zn(De.medidores_usuario??null),X(De.medidores_total_code??Y),be(De.saved_at??null),$e(De.created_at??null)}catch{}I(_?.userId??M),Te(_?.fullName??Me),xe(E!==null),we(!1),an(!1),Xn(null),Tl(),R(null),A(!1)}catch(F){if(Ac(F)){it?Ta(_e,it.id,w):bn(_e,w),A(!0),e({kind:"warning",title:"Sin conexion",message:"Sin conexion. La bancada se guardo localmente. Reintenta cuando vuelva la red."});return}if(Qi(F)){it?Ta(_e,it.id,w):bn(_e,w),A(!0);return}const fe=F?.status??F?.response?.status;if(fe===409)e({kind:"error",title:"Conflicto",message:"La bancada fue modificada por otro usuario. Recargue la pgina y vuelva a intentar."});else if(fe===400){const De=Array.isArray(F?.duplicates)?F.duplicates:Array.isArray(F?.response?.data?.duplicates)?F.response.data.duplicates:[];De.length>0&&Ve(mT(De)),e({kind:"warning",title:"Validacion",message:F?.message??"Error guardando bancada"})}else e({kind:"error",title:"Error",message:F?.message??"Error guardando bancada"})}finally{je(!1)}}},pr=async w=>{if(confirm(`Eliminar bancada #${w.item}?`)){if(Se){e({kind:"warning",title:"Solo lectura",message:"No puede eliminar bancadas mientras la OI est bloqueada."});return}try{if(je(!0),!_e)throw new Error("No hay OI cargada.");await bv(w.id),Hn(fe=>fe.filter(De=>De.id!==w.id)),Zn(null),ut(fe=>{const De=`bancada-${w.id}`,{[De]:at,...Et}=fe;return Et}),fs(_e,w.id);const F=await Qf(_e);At(F.updated_at??F.created_at??null),be(F.saved_at??null),$e(F.created_at??null),I(F.locked_by_user_id??null),Te(F.locked_by_full_name??null),we(F.read_only_for_current_user??!1),xe((F.locked_by_user_id??null)===E),Zn(F.medidores_usuario??null),X(F.medidores_total_code??Y),e({kind:"success",message:`Bancada #${w.item} eliminada`})}catch(F){e({kind:"error",title:"Error",message:F?.message??"Error eliminando bancada"})}finally{je(!1)}}},ss=()=>{if(!_e){e({kind:"warning",message:"Primero guarda el OI."});return}Gt(!0)},gr=async w=>{if(_e)try{je(!0),await O0(_e,w),e({kind:"success",message:"Excel generado"})}catch(F){e({kind:"error",title:"Error",message:F?.message??"Error generando Excel"})}finally{je(!1)}},Wr=()=>{if(!_e||!q)return;const w=ue??ze;pe("oi"),ke(null),Ze(Nv(w)),Le(!0)},br=w=>{if(!q)return;pe("bancada"),ke(w);const F=w.saved_at??w.created_at??ue??ze;Ze(Nv(F)),Le(!0)},Ka=async()=>{if(!_e||!q)return;const w=fT(Ie);if(!w){e({kind:"warning",title:"Fecha",message:"Ingrese una fecha valida."});return}if(!(Ge==="bancada"&&!mt))try{je(!0),Ge==="oi"?await aT(_e,{saved_at:w,propagate_to_bancadas:!0}):mt&&await WR(mt.id,{saved_at:w});const F=await Pf(_e);if(Hn(F.bancadas??[]),Zn(F.medidores_usuario??null),X(F.medidores_total_code??0),be(F.saved_at??null),$e(F.created_at??null),At(F.updated_at??F.created_at),Te(F.locked_by_full_name??null),I(F.locked_by_user_id??null),we(F.read_only_for_current_user??!1),xe((F.locked_by_user_id??null)===E),!j){const fe={oi:F.code,q3:F.q3,alcance:F.alcance,pma:F.pma,numeration_type:F.numeration_type??"correlativo"};S(fe),U(fe)}Le(!1),ke(null),Ze(""),pe("bancada"),e({kind:"success",message:"Fecha guardada actualizada"})}catch(F){e({kind:"error",title:"Error",message:F?.message??"Error actualizando fecha"})}finally{je(!1)}},Wl=w=>{Mt(),A(!1);const F=Nt(it);let fe={...w};if(!it){const De=rt[kt];fe.draftCreatedAt||(fe.draftCreatedAt=De?.draftCreatedAt??new Date().toISOString()),fe.draftId||(fe.draftId=De?.draftId??Nn())}ut(De=>({...De,[F]:fe})),it?Ta(_e,it.id,fe):bn(_e,fe),an(!1)},ei=()=>{if(Se){e({kind:"warning",title:"Solo lectura",message:"La OI est bloqueada por otro usuario."});return}const w=$();U({...w,numeration_type:w.numeration_type??"correlativo"}),Z(!0)},Ms=()=>{!_e||de||Rt("edit")},Jt=()=>{ce&&S(ce),Z(!1),Be.current=!1,jn(rn),Tl(),R(null)},za=()=>{_e&&(bn(_e,null),Object.keys(rt).forEach(w=>{if(!w.startsWith("bancada-"))return;const F=Number(w.replace("bancada-",""));Number.isFinite(F)&&fs(_e,F)})),jn(yt(_e)),jn(yt(null)),nE(),Be.current=!1,A(!1),Tl(),R(null),Cm(),Yx(),et(null),Hn([]),Q.current=[],ut({}),Z(!1),U(null),At(null),be(null),$e(null),we(!1),Te(null),I(null),xe(!1),Zn(null),X(0),an(!1),Xn(null),Gt(!1),Le(!1),Oe(!1),Ze(""),ke(null),pe("bancada"),S({oi:`OI-0001-${new Date().getFullYear()}`,q3:h?.q3[0]??2.5,alcance:h?.alcance[0]??80,pma:16,numeration_type:"correlativo"})},yr=()=>{Re.current=!0,re.current=!0,za(),a(Ot())},aa=async()=>{if(!_e)return!0;const w=Q.current??[];if(w.length===0&&Rn.length===0)return!0;const F=new Map(w.map(De=>[De.id,De])),fe=new Map(Rn.map(De=>[De.id,De]));try{for(const Et of Rn)F.has(Et.id)||await bv(Et.id);for(const Et of Rn){const ht=F.get(Et.id);if(!ht||vv(ht)===vv(Et))continue;const dn=xv(ht),kn=dn.length||ht.rows||1,Ct=Et.updated_at??Et.created_at??ht.updated_at??ht.created_at;if(!Ct)throw new Error("No se pudo determinar la version de la bancada para revertir cambios.");await eT(Et.id,{medidor:ht.medidor??null,estado:ht.estado??0,rows:kn,rows_data:dn,current_updated_at:Ct,restore_updated_at:ht.updated_at??null,restore_saved_at:ht.saved_at??null})}for(const Et of w)if(!fe.has(Et.id)){const ht=xv(Et),dn=ht.length||Et.rows||1;await gv(_e,{estado:Et.estado??0,rows:dn,rows_data:ht})}const De=await Qf(_e),at=De.updated_at??De.created_at;await KR(_e,{current_updated_at:at,restore_updated_at:P.current})}catch(De){return e({kind:"error",title:"Error",message:De?.message??"No se pudo descartar los cambios en bancadas."}),!1}return!0},sa=()=>{Ae||Oe(!0)},Xa=async()=>{if(!Ae){Oe(!1),je(!0);try{if(!await aa())return;_e&&K&&await Cc(_e,"cancel")}catch{}finally{je(!1)}Re.current=!0,re.current=!0,za(),e({kind:"info",message:"Edicion cancelada"}),a(Ot())}},vr=async()=>{if(Ae)return;Oe(!1);let w=!0;if((j||!_e)&&(w=!1,await p(async fe=>{w=_e?await ms(fe):await hr(fe)})()),!!w){je(!0);try{_e&&K&&await Cc(_e)}catch{}finally{je(!1)}Re.current=!0,re.current=!0,za(),e({kind:"info",message:"Cambios guardados"}),a(Ot())}},C=async()=>{if(!Ae){je(!0);try{_e&&K&&await Cc(_e)}catch{}finally{je(!1)}Re.current=!0,re.current=!0,za(),e({kind:"info",message:"OI cerrada"}),a(Ot())}},ne=b.useMemo(()=>cT(Rn),[Rn]),ie=Vn??ne,ye=w=>{if(!w)return"-";const fe=/([zZ]|[+-]\d{2}:?\d{2})$/.test(w)?w:`${w}Z`,De=new Date(fe);return Number.isNaN(De.getTime())?w:new Intl.DateTimeFormat("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"America/Lima"}).format(De)},Pe=it?zn(_e,it.id):Sn(_e),_t=E&&O!=null&&_e?{userId:E,bankId:O,oiId:_e,bancadaId:it?.id??null,isNew:!it,returnTo:Vt(_e),oiCode:$("oi")??null}:null;return l.jsxs("div",{className:"oi-page vi-oi-light",children:[l.jsx(Kl,{show:Ae}),!f&&l.jsx("div",{className:"alert alert-warning py-1 mt-2 mb-2",children:"Sin conexion. Los cambios se guardaran localmente hasta que vuelva la red."}),V&&l.jsx("div",{className:"alert alert-info py-1 mt-2 mb-2",children:"Sesion restaurada. Reintenta guardar."}),l.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[l.jsx("h1",{className:"h3",children:"Formulario OI"}),l.jsxs("div",{className:"d-flex gap-2",children:[_e&&q&&l.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:Wr,disabled:Ae,children:"Editar fecha guardado"}),_e&&W&&l.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:Ms,disabled:Ae,children:"Editar"})]})]}),Se&&l.jsx("div",{className:"alert alert-warning mt-2",children:W?"Modo lectura. Use Editar para modificar.":Me?`Esta OI est siendo editada por ${Me}. Se abre en modo lectura.`:"Esta OI est en modo lectura. No se pueden realizar cambios."}),l.jsxs("form",{onSubmit:p(zs?ms:hr),className:`row g-3 mt-1 ${zs?"vi-form-editing":"vi-form-readonly"}`,children:[l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"oi",className:"form-label",children:"OI (OI-####-YYYY)"}),l.jsx("input",{id:"oi",className:`form-control ${_e&&!(q&&j&&!Se)?"vi-locked":""}`,...g("oi"),disabled:_e?!(q&&j&&!Se):!1}),x.oi&&l.jsx("div",{className:"text-danger small",children:x.oi.message}),q?null:l.jsx("div",{className:"form-text",children:"Solo administradores pueden cambiar el codigo de OI."})]}),l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"q3",className:"form-label",children:"Q3 (m/h)"}),l.jsx("select",{id:"q3",className:"form-select",...g("q3",{valueAsNumber:!0}),disabled:!!_e&&!j||Se,children:h?.q3.map(w=>l.jsx("option",{value:w,children:w},w))})]}),l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"alcance",className:"form-label",children:"Alcance Q3/Q1"}),l.jsx("select",{id:"alcance",className:"form-select",...g("alcance",{valueAsNumber:!0}),disabled:!!_e&&!j||Se,children:h?.alcance.map(w=>l.jsx("option",{value:w,children:w},w))})]}),l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"pma",className:"form-label",children:"PMA (bar)"}),l.jsx("select",{id:"pma",className:"form-select",...g("pma",{valueAsNumber:!0}),disabled:!!_e&&!j||Se,children:h?.pma.map(w=>l.jsx("option",{value:w,children:w},w))}),l.jsx("div",{className:"form-text",children:"Solo en formulario; calcula Presin (bar)."})]}),l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"presion",className:"form-label",children:"Presin (bar)"}),l.jsx("input",{id:"presion",className:"form-control",value:isNaN(Xr)?"":Xr,disabled:!0})]}),l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{htmlFor:"numeration_type",className:"form-label",children:"Tipo de numeracin (# Medidor)"}),l.jsxs("select",{id:"numeration_type",className:"form-select",...g("numeration_type"),disabled:!!_e&&!j||Se,children:[l.jsx("option",{value:"correlativo",children:"Correlativo"}),l.jsx("option",{value:"no correlativo",children:"No Correlativo"})]}),l.jsx("div",{className:"form-text",children:"Define cmo se completa la columna # Medidor en el Grid."})]}),l.jsxs("div",{className:"col-12 d-flex align-items-center gap-2",children:[l.jsx("button",{className:"btn btn-primary",disabled:Ae||!!_e&&(!j||Se),children:_e?zs?"Guardar cambios":"OI guardada":"Guardar OI"}),_e&&!j&&de&&l.jsx("button",{type:"button",className:"btn btn-outline-warning",onClick:ei,disabled:Ae||Se,children:"Editar OI"}),_e&&j&&de&&l.jsx("button",{type:"button",className:"btn btn-outline-warning",onClick:Jt,disabled:Ae,children:"Cancelar edicion"}),W&&l.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:yr,disabled:Ae,children:"Volver al listado"}),l.jsx("button",{type:"button",className:"btn btn-outline-success",onClick:ss,disabled:!_e||Ae||j,children:"Generar Excel"}),de&&l.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:C,disabled:!_e||j||Ae,children:"Cerrar OI"}),de&&l.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:sa,disabled:Ae,children:"Cancelar"})]})]}),l.jsx("hr",{className:"my-4"}),l.jsxs("div",{className:"card vi-card-table mt-3",children:[l.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"h6 mb-0",children:"Bancadas"}),l.jsxs("small",{className:"text-muted",children:["Medidores (mi registro): ",ie," | Total OI: ",Y]})]}),l.jsx("button",{className:"btn btn-primary",onClick:Ya,disabled:!_e||Ae||j||Se,children:"Agregar Bancada"})]}),l.jsx("div",{className:"card-body p-0",children:l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-hover table-striped table-sm align-middle mb-0",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"vi-col-60",children:"Item"}),l.jsx("th",{children:"# Medidor"}),l.jsx("th",{children:"Medidores"}),l.jsx("th",{className:"vi-col-160",children:"Fecha creacin"}),l.jsx("th",{className:"vi-col-160",children:"Fecha guardado"}),l.jsx("th",{className:"vi-col-160",children:"ltima fecha mod."}),l.jsx("th",{className:"vi-col-160 text-end",children:"Acciones"})]})}),l.jsxs("tbody",{children:[Rn.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"text-muted text-center py-3",children:"Sin bancadas. Agrega la primera."})}),Rn.map(w=>{const F=w.rows_data?.[0]?.medidor||w.medidor||"",fe=w.rows_data?.[(w.rows_data?.length||0)-1]?.medidor||"",De=F&&fe&&F!==fe?`${F} ... ${fe}`:F;return l.jsxs("tr",{children:[l.jsx("td",{children:w.item}),l.jsx("td",{children:De}),l.jsx("td",{children:w.rows}),l.jsx("td",{children:ye(w.created_at)}),l.jsx("td",{children:ye(w.saved_at)}),l.jsx("td",{children:ye(w.updated_at??w.created_at)}),l.jsxs("td",{className:"text-end",children:[q?l.jsx("button",{className:"btn btn-sm btn-outline-secondary me-2",onClick:()=>br(w),disabled:Ae||j||ge,"aria-label":`Editar fecha guardado bancada #${w.item}`,title:"Editar fecha guardado",children:"Editar fecha guardado"}):null,l.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>Wn(w),disabled:Ae||j||!W&&Se,"aria-label":`${W?"Ver":"Editar"} bancada #${w.item}`,title:W?"Ver":"Editar",children:W?"Ver":"Editar"}),l.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>pr(w),disabled:Ae||j||Se,"aria-label":`Eliminar bancada #${w.item}`,title:"Eliminar",children:""})]})]},w.id)})]})]})})})]}),Ra&&l.jsx(PR,{show:Ra,title:it?`Editar bancada #${it.item}`:"Nueva bancada",initial:Da,onClose:()=>{Mt(),an(!1)},onSubmit:Jr,onCancelWithDraft:Wl,numerationType:mr,readOnly:Se,duplicateMap:Ee,onClearDuplicate:ks,draftStorageKey:Pe,draftMeta:_t,isOnline:f,showRetry:We}),Fe&&l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"cancelTitle",onClick:w=>{w.target===w.currentTarget&&Oe(!1)},children:l.jsx("div",{className:"modal-dialog",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{id:"cancelTitle",className:"modal-title",children:"Confirmar cancelacion"}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>Oe(!1)})]}),l.jsx("div",{className:"modal-body",children:l.jsx("p",{children:"Estas seguro de descartar cambios?"})}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:Xa,disabled:Ae,children:"Descartar cambios"}),l.jsx("button",{type:"button",className:"btn btn-primary",onClick:vr,disabled:Ae,children:"Guardar cambios y volver al listado"})]})]})})}),he&&l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"savedAtTitle",onClick:w=>{w.target===w.currentTarget&&(Le(!1),ke(null),pe("bancada"))},children:l.jsx("div",{className:"modal-dialog",children:l.jsxs("form",{className:"modal-content",onSubmit:w=>{w.preventDefault(),Ka()},children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{id:"savedAtTitle",className:"modal-title",children:"Editar fecha guardado"}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>{Le(!1),ke(null),pe("bancada")}})]}),l.jsx("div",{className:"modal-body",children:l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{htmlFor:"savedAtInput",className:"form-label",children:"Fecha guardado"}),l.jsx("input",{id:"savedAtInput",type:"datetime-local",className:"form-control",value:Ie,onChange:w=>Ze(w.target.value),required:!0}),l.jsx("div",{className:"form-text",children:Ge==="oi"?"Se aplicar a todas las bancadas de la OI.":"Se aplica a la bancada seleccionada."})]})}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{Le(!1),ke(null),pe("bancada")},children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Ae||!Ie,children:"Guardar"})]})]})})}),l.jsx(gu,{show:qn,title:"Contrasea para proteger Excel",onClose:()=>Gt(!1),onConfirm:w=>{Gt(!1),gr(w)}})]})}function yT(e){return e==="/home"?null:e==="/oi"?"oi_formulario":e==="/oi/list"?"oi_listado":e==="/oi/tools/vima-to-lista"?"tools_vima_lista":e==="/oi/tools/actualizacion-base"?"tools_actualizacion_bases":e==="/oi/tools/formato-ac/history"?"tools_historial_ac":e==="/oi/tools/consolidacion/correlativo"?"tools_consol_correlativo":e==="/oi/tools/consolidacion/no-correlativo"?"tools_consol_no_correlativo":e==="/logistica/log01/history"?"logistica_history":e==="/logistica/log01/excel"?"logistica":e==="/logistica/log02/pdfs"?"logistica_pdfs":e.startsWith("/logistica/")?"logistica":e.startsWith("/oi/")?"oi_formulario":e==="/users"?"users_admin":e==="/admin/permisos"?"admin_permisos":null}function vT(){const e=Ln(),a=oa(),s=e?.token??null,[i,c]=b.useState(()=>!!s);if(b.useEffect(()=>{if(!s){c(!1);return}let S=!1;return c(!0),Ke.get("/auth/me").then(()=>{S||c(!1)}).catch(async $=>{if(S)return;if($?.response?.status===401){await Wx();return}c(!1)}),()=>{S=!0}},[s]),!s)return l.jsx(or,{to:"/login",replace:!0});if(i)return l.jsx(Kl,{show:!0});const d=e,f=Va(d.role,d.username),h=nh(d),g=Il(f),p=eo(),v=a.pathname==="/oi"||a.pathname.startsWith("/oi/");if(g&&v&&!(p&&p>0)&&a.pathname!=="/home")return l.jsx(or,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Banco",message:"Debe seleccionar un banco para continuar."}}});if(a.pathname==="/admin/permisos"&&!h)return l.jsx(or,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Permisos",message:"Solo el superusuario puede acceder a este mdulo."}}});if(a.pathname==="/users"&&!(f==="admin"||f==="administrator"))return l.jsx(or,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Usuarios",message:"No tiene permiso para acceder a este mdulo."}}});if(!h){const S=yT(a.pathname),$=d.allowedModules;if(S&&Array.isArray($)&&!$.includes(S))return l.jsx(or,{to:"/home",replace:!0,state:{toast:{kind:"warning",title:"Permisos",message:"No tiene permiso para acceder a este mdulo."}}})}return l.jsx(Fv,{})}const xT=({isActive:e})=>"vi-sidebar-link d-flex align-items-center"+(e?" active":""),NT=.9;function uh(e,a){if(!(a||e<=0))return{paddingLeft:`calc(0.75rem + ${e*NT}rem)`}}function ha({to:e,icon:a,label:s,depth:i,collapsed:c}){return l.jsx("li",{className:"vi-sidebar-item",children:l.jsxs(Pv,{to:e,end:!0,className:xT,style:uh(i,c),title:s,"aria-label":s,children:[l.jsx("i",{className:`ti ${a} vi-sidebar-icon`}),l.jsx("span",{className:"vi-sidebar-text vi-sidebar-label",children:s})]})})}function jv({icon:e,label:a,depth:s,collapsed:i}){return l.jsx("li",{className:"vi-sidebar-item",children:l.jsxs("button",{type:"button",className:"vi-sidebar-link vi-sidebar-link--disabled d-flex align-items-center w-100 border-0 bg-transparent",style:uh(s,i),title:a,"aria-label":a,"aria-disabled":"true",disabled:!0,children:[l.jsx("i",{className:`ti ${e} vi-sidebar-icon`}),l.jsx("span",{className:"vi-sidebar-text vi-sidebar-label",children:a})]})})}function Mr({groupKey:e,icon:a,label:s,depth:i,collapsed:c,open:d,active:f,onToggle:h,children:g}){const p=`sidebar-group-${e}`,v=d?"ti-angle-down":"ti-angle-right";return l.jsxs("li",{className:"vi-sidebar-item",children:[l.jsxs("button",{type:"button",className:"vi-sidebar-link d-flex align-items-center w-100 border-0 bg-transparent"+(f?" active":""),style:uh(i,c),onClick:()=>{c||h(e)},"aria-expanded":!c&&d,"aria-controls":p,title:s,children:[l.jsx("i",{className:`ti ${a} vi-sidebar-icon`}),l.jsx("span",{className:"vi-sidebar-text vi-sidebar-label flex-grow-1",children:s}),l.jsx("span",{className:"vi-sidebar-text vi-sidebar-caret ms-auto",children:l.jsx("i",{className:`ti ${v}`})})]}),!c&&d&&l.jsx("ul",{id:p,className:"list-unstyled mb-0",children:g})]})}function ST({collapsed:e,onToggleSidebar:a}){const s=oa(),i=Ln(),c=!!i,d=Va(i?.role,i?.username),f=nh(i),h=d==="admin"||d==="administrator",g=i?.allowedModules,p=xe=>f||!Array.isArray(g)||g.includes(xe),v=c&&p("tools_vima_lista"),x=c&&p("tools_actualizacion_bases"),S=c&&p("tools_historial_ac"),$=c&&p("tools_consol_correlativo"),_=c&&p("tools_consol_no_correlativo"),E=c&&p("oi_formulario"),O=c&&p("oi_listado"),q=c&&h&&p("users_admin"),D=c&&p("future_ot"),J=c&&p("logistica"),z=c&&p("logistica_history"),T=c&&p("logistica_pdfs"),G=J||z||T,L=c&&p("future_smart"),W=$||_,de=v||x||S,Ae=E||O||D,je=de||Ae||W,ge=b.useMemo(()=>({oi:!0,oi_formato_ac:!0,oi_consolidacion:!0,oi_verificacion:!0,logistica:!0,usuarios:!1,administrar:!1}),[]),[we,Me]=b.useState(()=>{const xe=localStorage.getItem("medileser.sidebar.openGroups")??localStorage.getItem("vi.sidebar.openGroups");if(!xe)return ge;try{const Se=JSON.parse(xe),j={...ge};return Object.keys(j).forEach(Z=>{typeof Se[Z]=="boolean"&&(j[Z]=Se[Z])}),j}catch{return ge}}),Te=s.pathname;b.useEffect(()=>{localStorage.setItem("medileser.sidebar.openGroups",JSON.stringify(we))},[we]);const M=b.useMemo(()=>{const xe=Se=>!!Ji({path:Se,end:!0},Te);return{vimaToLista:xe("/oi/tools/vima-to-lista"),actualizacionBases:xe("/oi/tools/actualizacion-base"),formatoAcHistory:xe("/oi/tools/formato-ac/history"),consolidacionCorrelativo:xe("/oi/tools/consolidacion/correlativo"),consolidacionNoCorrelativo:xe("/oi/tools/consolidacion/no-correlativo"),registroOi:xe("/oi"),listadoOi:xe("/oi/list"),users:xe("/users"),password:xe("/password"),permisos:xe("/admin/permisos"),log01Excel:xe("/logistica/log01/excel"),log01History:xe("/logistica/log01/history"),log02Pdfs:xe("/logistica/log02/pdfs")}},[Te]),I=b.useMemo(()=>({oi_consolidacion:M.consolidacionCorrelativo||M.consolidacionNoCorrelativo,oi_formato_ac:M.vimaToLista||M.actualizacionBases||M.formatoAcHistory,oi_verificacion:M.registroOi||M.listadoOi,oi:M.vimaToLista||M.actualizacionBases||M.formatoAcHistory||M.consolidacionCorrelativo||M.consolidacionNoCorrelativo||M.registroOi||M.listadoOi,usuarios:M.users||M.password,logistica:M.log01Excel||M.log01History||M.log02Pdfs,administrar:M.permisos}),[M]);function K(xe){Me(Se=>({...Se,[xe]:!Se[xe]}))}return l.jsxs("aside",{className:`vi-sidebar ${e?"vi-sidebar--collapsed":""}`,children:[l.jsxs("div",{className:"vi-sidebar__header",children:[l.jsxs("div",{className:"vi-sidebar__brand",children:[l.jsx("img",{className:"vi-brand-logo",src:"/medileser/logo-vertical.jpg",alt:"Medileser",draggable:!1}),l.jsx("span",{className:"vi-brand-text",children:"MEDILESER APP"})]}),a&&l.jsx("button",{type:"button",className:"vi-sidebar-toggle","aria-label":e?"Expandir men":"Contraer men",onClick:a,children:l.jsx("i",{className:`ti ${e?"ti-angle-right":"ti-angle-left"}`})})]}),l.jsxs("ul",{className:"vi-sidebar-menu list-unstyled mb-0",children:[!c&&l.jsx(ha,{to:"/login",icon:"ti-login",label:"Login",depth:0,collapsed:e}),je&&l.jsxs(Mr,{groupKey:"oi",icon:"ti-panel",label:"OI",depth:0,collapsed:e,open:we.oi,active:I.oi,onToggle:K,children:[de&&l.jsxs(Mr,{groupKey:"oi_formato_ac",icon:"ti-folder",label:"FORMATO A-C",depth:1,collapsed:e,open:we.oi_formato_ac,active:I.oi_formato_ac,onToggle:K,children:[v&&l.jsx(ha,{to:"/oi/tools/vima-to-lista",icon:"ti-exchange-vertical",label:"VIMA  LISTA",depth:2,collapsed:e}),x&&l.jsx(ha,{to:"/oi/tools/actualizacion-base",icon:"ti-reload",label:"ACTUALIZACIN DE BASES",depth:2,collapsed:e}),S&&l.jsx(ha,{to:"/oi/tools/formato-ac/history",icon:"ti-view-list-alt",label:"HISTORIAL A-C",depth:2,collapsed:e})]}),W&&l.jsxs(Mr,{groupKey:"oi_consolidacion",icon:"ti-layers",label:"CONSOLIDACIN DE BASES ORIGINALES",depth:1,collapsed:e,open:we.oi_consolidacion,active:I.oi_consolidacion,onToggle:K,children:[$&&l.jsx(ha,{to:"/oi/tools/consolidacion/correlativo",icon:"ti-list",label:"CORRELATIVO",depth:3,collapsed:e}),_&&l.jsx(ha,{to:"/oi/tools/consolidacion/no-correlativo",icon:"ti-layout-list-thumb",label:"NO CORRELATIVO",depth:3,collapsed:e})]}),Ae&&l.jsxs(Mr,{groupKey:"oi_verificacion",icon:"ti-clipboard",label:"VERIFICACIN INICIAL",depth:1,collapsed:e,open:we.oi_verificacion,active:I.oi_verificacion,onToggle:K,children:[D&&l.jsx(jv,{icon:"ti-briefcase",label:"ORDEN DE TRABAJO (FUTURO)",depth:2,collapsed:e}),E&&l.jsx(ha,{to:"/oi",icon:"ti-layout-grid2",label:"REGISTRO OI",depth:2,collapsed:e}),O&&l.jsx(ha,{to:"/oi/list",icon:"ti-view-list-alt",label:"LISTADO OI",depth:2,collapsed:e})]})]}),G&&l.jsxs(Mr,{groupKey:"logistica",icon:"ti-package",label:"LOGSTICA",depth:0,collapsed:e,open:we.logistica,active:I.logistica,onToggle:K,children:[J&&l.jsx(ha,{to:"/logistica/log01/excel",icon:"ti-files",label:"Consolidacion Excel",depth:1,collapsed:e}),z&&l.jsx(ha,{to:"/logistica/log01/history",icon:"ti-view-list-alt",label:"Historial de consolidaciones",depth:1,collapsed:e}),T&&l.jsx(ha,{to:"/logistica/log02/pdfs",icon:"ti-filter",label:"Filtrado de Cert.PDFs",depth:1,collapsed:e})]}),L&&l.jsx(jv,{icon:"ti-bar-chart",label:"SMART (FUTURO)",depth:0,collapsed:e}),l.jsxs(Mr,{groupKey:"usuarios",icon:"ti-user",label:"USUARIOS",depth:0,collapsed:e,open:we.usuarios,active:I.usuarios,onToggle:K,children:[q&&l.jsx(ha,{to:"/users",icon:"ti-user",label:"GESTIN DE USUARIOS",depth:1,collapsed:e}),c&&l.jsx(ha,{to:"/password",icon:"ti-key",label:"CAMBIAR CONTRASEA",depth:1,collapsed:e})]}),f&&l.jsx(Mr,{groupKey:"administrar",icon:"ti-settings",label:"ADMINISTRAR",depth:0,collapsed:e,open:we.administrar,active:I.administrar,onToggle:K,children:l.jsx(ha,{to:"/admin/permisos",icon:"ti-lock",label:"PERMISOS",depth:1,collapsed:e})})]})]})}function jT({sidebarCollapsed:e,onToggleSidebar:a}){const s=Ln(),i=s?.username??s?.user??"",c=s?Il(s.role):!1,[d,f]=b.useState(()=>eo());b.useEffect(()=>SE(()=>f(eo())),[]);const h=d&&d>0?`Banco ${d}`:"Banco sin seleccionar",g=async()=>{try{await _E()}finally{location.assign("/login")}};return l.jsxs("header",{className:"navbar navbar-expand bg-white border-bottom sticky-top vi-topbar px-3",children:[a&&l.jsx("button",{type:"button",className:"btn btn-link text-secondary me-2 vi-sidebar-toggle","aria-label":e?"Expandir men":"Contraer men",onClick:a,children:l.jsx("i",{className:`ti ${e?"ti-menu-alt":"ti-menu"}`})}),l.jsx("div",{className:"me-auto"}),l.jsxs("div",{className:"d-flex align-items-center gap-3",children:[s&&l.jsxs("span",{className:"text-muted small text-truncate",style:{maxWidth:"360px"},children:["Usuario: ",l.jsx("strong",{children:i||"?"}),c&&l.jsxs(l.Fragment,{children:["  ",h,s.techNumber?l.jsxs(l.Fragment,{children:["  ","Tcnico ",s.techNumber]}):null]})]}),s&&l.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:g,children:"Cerrar sesin"})]})]})}function wT(){const a=oa().pathname==="/home",[s,i]=b.useState(()=>{try{return(localStorage.getItem("medileser.sidebar.collapsed")??localStorage.getItem("vi.sidebar.collapsed"))==="true"}catch{return!1}}),c=()=>i(d=>!d);return b.useEffect(()=>{try{localStorage.setItem("medileser.sidebar.collapsed",String(s))}catch{}},[s]),l.jsxs("div",{className:`vi-layout ${s?"vi-layout--collapsed":""}`,children:[l.jsx(ST,{collapsed:s,onToggleSidebar:c}),l.jsxs("div",{className:"vi-main",children:[l.jsx(jT,{sidebarCollapsed:s,onToggleSidebar:c}),l.jsx("main",{className:`vi-content${a?" vi-content--home":""}`,children:l.jsx(Fv,{})})]})]})}function _T(){const{toast:e}=Qr(),a=Pr(),s=oa(),[,i]=Yv(),[c,d]=b.useState(()=>new URLSearchParams(s.search).get("q")??""),[f,h]=b.useState(()=>(new URLSearchParams(s.search).get("q")??"").trim()),[g,p]=b.useState(()=>new URLSearchParams(s.search).get("dateFrom")??""),[v,x]=b.useState(()=>new URLSearchParams(s.search).get("dateTo")??""),[S,$]=b.useState(()=>{const se=new URLSearchParams(s.search).get("pageSize"),Ue=se?Number(se):20;return Number.isFinite(Ue)&&Ue>0?Ue:20}),[_,E]=b.useState(()=>{const se=new URLSearchParams(s.search).get("page"),Ue=se?Number(se):1;return Number.isFinite(Ue)&&Ue>0?Math.floor(Ue):1}),[O,q]=b.useState(()=>new URLSearchParams(s.search).get("responsableTech")??""),D=(_-1)*S,J=b.useRef(!1);b.useEffect(()=>{if(!J.current){J.current=!0;return}const se=setTimeout(()=>{h(c.trim()),E(1)},300);return()=>clearTimeout(se)},[c]),b.useEffect(()=>{const se=new URLSearchParams,Ue=c.trim();Ue&&se.set("q",Ue),g&&se.set("dateFrom",g),v&&se.set("dateTo",v),O&&se.set("responsableTech",O),_!==1&&se.set("page",String(_)),S!==20&&se.set("pageSize",String(S));const He=s.search.startsWith("?")?s.search.slice(1):s.search;se.toString()!==He&&i(se,{replace:!0})},[g,v,s.search,_,S,O,c,i]);const{data:z,isLoading:T,isError:G,error:L,refetch:W,isFetching:de}=Fr({queryKey:["oi","list",{search:f,dateFrom:g,dateTo:v,responsableTech:O,pageSize:S,offset:D}],queryFn:()=>sT({q:f||void 0,dateFrom:g||void 0,dateTo:v||void 0,responsableTechNumber:O?Number(O):void 0,limit:S,offset:D}),placeholderData:se=>se}),Ae=Ln(),je=Va(Ae?.role,Ae?.username)!=="technician",{data:ge=[],isFetching:we,isError:Me,error:Te}=Fr({queryKey:["oi","responsables"],queryFn:lT,enabled:je,staleTime:6e4,retry:!1}),M=Me?Te?.message??"No se pudo cargar responsables":"",I=se=>{if(!se)return"-";const Ue=se.endsWith("Z")?se:`${se}Z`,He=new Date(Ue),st=Xt=>Xt.toString().padStart(2,"0");return`${st(He.getDate())}/${st(He.getMonth()+1)}/${He.getFullYear()} ${st(He.getHours())}:${st(He.getMinutes())}`},xe=z?.items??[],Se=z?.summary??{medidores_resultado:0,oi_unicas:0,medidores_total_oi_unicas:0},j=z?.total??0,Z=z?.limit??S,ce=Z>0?Math.ceil(j/Z):1,U=10;let ue=1,be=ce;if(ce>U){const se=Math.floor(U/2);ue=Math.max(1,_-se),be=ue+U-1,be>ce&&(be=ce,ue=Math.max(1,be-U+1))}const[ze,$e]=b.useState(!1),[he,Le]=b.useState(null),[Ie,Ze]=b.useState(!1),[mt,ke]=b.useState(!1),Ge=T||de||Ie||mt,pe=()=>`${s.pathname}${s.search}`,Fe=(se,Ue)=>{try{Ki({id:se,code:Ue}),e({kind:"success",message:`OI ${Ue} cargada`}),a(`/oi/${se}?mode=view`,{state:{returnTo:pe()}})}catch(He){e({kind:"error",title:"Error",message:He?.message??"No se pudo abrir el OI"})}},Oe=(se,Ue)=>{try{Ki({id:se,code:Ue}),e({kind:"success",message:`OI ${Ue} cargada`}),a(`/oi/${se}?mode=edit`,{state:{returnTo:pe()}})}catch(He){e({kind:"error",title:"Error",message:He?.message??"No se pudo abrir el OI"})}},We=async()=>{try{await ho()}finally{Cm(),a("/oi?mode=edit",{state:{returnTo:pe()}})}},A=async(se,Ue)=>{if(confirm(`Ests seguro de ELIMINAR la ${Ue}?
Esta accin borrar todas sus bancadas y no se puede deshacer.`))try{await tT(se),e({kind:"success",title:"Eliminado",message:`Se elimin ${Ue} correctamente.`}),W()}catch(He){e({kind:"error",title:"Error",message:He.message||"No se pudo eliminar la OI"})}},V=se=>{Le(se),$e(!0)},R=async se=>{if(he)try{Ze(!0),await O0(he,se),e({kind:"success",message:"Excel generado"})}catch(Ue){e({kind:"error",title:"Error",message:Ue?.message??"No se pudo generar el Excel"})}finally{Ze(!1)}},Q=async()=>{try{ke(!0);const{blob:se,filename:Ue}=await rT({q:f||void 0,dateFrom:g||void 0,dateTo:v||void 0,responsableTechNumber:O?Number(O):void 0}),He=URL.createObjectURL(se),st=document.createElement("a");st.href=He,st.download=Ue,document.body.appendChild(st),st.click(),URL.revokeObjectURL(He),st.remove()}catch(se){const Ue=se?.status,He=se?.message??"No se pudo exportar el CSV";e(Ue===403?{kind:"error",title:"No autorizado",message:He}:{kind:"error",title:"Error",message:He})}finally{ke(!1)}},P=()=>{d(""),h(""),p(""),x(""),E(1),q("")},re=j===0?0:D+1,Re=j===0?0:Math.min(D+xe.length,j),Be=j===0?"0 registros":`Mostrando ${re}-${Re} de ${j} registros`;return l.jsxs("div",{children:[l.jsx(Kl,{show:Ge}),l.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[l.jsxs("div",{className:"d-flex align-items-center gap-2",children:[l.jsx("button",{className:"btn btn-primary",onClick:We,disabled:Ge,title:"Nueva OI",children:"Nueva OI"}),l.jsx("h1",{className:"h3 mb-0",children:"Listado de OI"})]}),l.jsxs("div",{className:"d-flex gap-2",children:[je&&l.jsx("button",{className:"btn btn-outline-secondary",onClick:Q,disabled:Ge,children:mt?"Exportando...":"Exportar CSV"}),l.jsx("button",{className:"btn btn-outline-secondary",onClick:P,disabled:Ge,children:"Limpiar filtros"}),l.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>W(),disabled:Ge,children:"Recargar"})]})]}),G&&l.jsx("div",{className:"alert alert-danger",children:L?.message??"Error cargando listado"}),l.jsxs("div",{className:"card vi-card-table",children:[l.jsxs("div",{className:"card-header d-flex flex-wrap align-items-center justify-content-between gap-2",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"h6 mb-0",children:"Registros"}),l.jsxs("small",{className:"text-muted",children:["Medidores (resultados): ",Se.medidores_resultado," | OI unicas: ",Se.oi_unicas," | Medidores (Total OI): ",Se.medidores_total_oi_unicas]})]}),l.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[l.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Buscar OI o medidor...",value:c,onChange:se=>{d(se.target.value),E(1)},"aria-label":"Buscar por codigo de OI o medidor"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:g,onChange:se=>{p(se.target.value),E(1)},"aria-label":"Filtrar desde fecha"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:v,onChange:se=>{x(se.target.value),E(1)},"aria-label":"Filtrar hasta fecha"}),je&&l.jsxs("div",{className:"d-flex flex-column",children:[l.jsxs("select",{className:"form-select form-select-sm",value:O,onChange:se=>{q(se.target.value),E(1)},disabled:Ge||we,"aria-label":"Filtrar por responsable",title:"Responsable",children:[l.jsx("option",{value:"",children:"Responsable: Todos"}),ge.map(se=>l.jsx("option",{value:String(se.tech_number),children:se.full_name},se.tech_number))]}),M?l.jsx("small",{className:"text-danger",children:M}):null]}),l.jsxs("div",{className:"d-flex align-items-center",children:[l.jsx("span",{className:"me-1 small",children:"Mostrar"}),l.jsxs("select",{className:"form-select form-select-sm",value:S,onChange:se=>{const Ue=Number(se.target.value)||20;$(Ue),E(1)},"aria-label":"Registros por pgina",children:[l.jsx("option",{value:10,children:"10"}),l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:50,children:"50"})]})]})]})]}),l.jsxs("div",{className:"card-body p-0",children:[l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-hover table-striped table-sm align-middle mb-0",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"ID"}),l.jsx("th",{children:"OI"}),l.jsx("th",{children:"Medidores"}),l.jsx("th",{children:"Q3"}),l.jsx("th",{children:"Alcance"}),l.jsx("th",{children:"PMA"}),l.jsx("th",{children:"Banco"}),l.jsx("th",{children:"Tcnico"}),l.jsx("th",{children:"Responsable"}),l.jsx("th",{children:"Creacin"}),l.jsx("th",{children:"Guardado"}),l.jsx("th",{children:"lt. mod."}),l.jsx("th",{className:"text-end",children:"Acciones"})]})}),l.jsxs("tbody",{children:[!Ge&&xe.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:13,className:"text-center text-muted py-3",children:j>0?"No hay registros que coincidan con los filtros.":"Sin registros."})}),xe.map(se=>l.jsxs("tr",{children:[l.jsx("td",{children:se.id}),l.jsx("td",{children:se.code}),l.jsx("td",{title:"Mi registro / Total OI",children:`${se.medidores_usuario??0} / ${se.medidores_total_code??0}`}),l.jsx("td",{children:se.q3}),l.jsx("td",{children:se.alcance}),l.jsx("td",{children:se.pma}),l.jsx("td",{children:se.banco_id}),l.jsx("td",{children:se.tech_number}),l.jsx("td",{children:se.creator_name}),l.jsx("td",{children:I(se.created_at)}),l.jsx("td",{children:I(se.saved_at)}),l.jsx("td",{children:I(se.updated_at)}),l.jsxs("td",{className:"text-end",children:[l.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>Fe(se.id,se.code),disabled:Ge,title:"Ver OI","aria-label":`Ver OI ${se.code}`,children:"Ver"}),l.jsx("button",{className:"btn btn-sm btn-outline-warning me-2",onClick:()=>Oe(se.id,se.code),disabled:Ge,title:"Editar OI","aria-label":`Editar OI ${se.code}`,children:"Editar"}),l.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:()=>V(se.id),disabled:Ge,title:"Descargar Excel","aria-label":`Descargar Excel ${se.code}`,children:"Excel"}),je&&l.jsx("button",{className:"btn btn-sm btn-outline-danger ms-2",onClick:()=>A(se.id,se.code),disabled:Ge,title:"Eliminar OI (Solo Admin)",children:""})]})]},se.id))]})]})}),ce>1&&l.jsx("nav",{className:"px-3 py-2 d-flex justify-content-center",children:l.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[l.jsx("li",{className:`page-item ${_===1?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>E(se=>Math.max(1,se-1)),disabled:_===1,children:""})}),Array.from({length:be-ue+1},(se,Ue)=>{const He=ue+Ue;return l.jsx("li",{className:`page-item ${He===_?"active":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>E(He),children:He})},He)}),l.jsx("li",{className:`page-item ${_===ce?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>E(se=>Math.min(ce,se+1)),disabled:_===ce,children:"Siguiente"})})]})})]})]}),l.jsx("div",{className:"px-3 py-2 d-flex justify-content-end",children:l.jsx("small",{className:"text-muted",children:Be})}),l.jsx(gu,{show:ze,title:"Contrasea para proteger Excel",onClose:()=>{$e(!1),Le(null)},onConfirm:se=>{$e(!1),R(se)}})]})}async function ET(e){return(await Ke.get("/auth/users/paged",{params:{q:e.q||void 0,role:e.role||void 0,limit:e.limit,offset:e.offset}})).data}function CT(){const{toast:e}=Qr(),a=Ln(),s=Va(a?.role,a?.username),i=s==="admin"||s==="administrator",c=nh(a),[d,f]=b.useState(!1),[h,g]=b.useState(null),[p,v]=b.useState(!1),[x,S]=b.useState(""),[$,_]=b.useState(""),[E,O]=b.useState(""),[q,D]=b.useState(20),[J,z]=b.useState(1),T=(J-1)*q,G=b.useRef(!1);b.useEffect(()=>{if(!G.current){G.current=!0;return}const Oe=setTimeout(()=>{_(x.trim()),z(1)},250);return()=>clearTimeout(Oe)},[x]);const{data:L,refetch:W,isLoading:de,isFetching:Ae,error:je}=Fr({queryKey:["users",{search:$,roleFilter:E,pageSize:q,offset:T}],queryFn:()=>ET({q:$||void 0,role:E||void 0,limit:q,offset:T}),enabled:i,placeholderData:Oe=>Oe}),{register:ge,handleSubmit:we,reset:Me}=eu(),Te=()=>{g(null),Me({username:"",password:"",first_name:"",last_name:"",role:"technician",tech_number:0}),f(!0)},M=Oe=>{g(Oe),Me({username:Oe.username,password:"",first_name:Oe.first_name,last_name:Oe.last_name,role:Va(Oe.role,Oe.username),tech_number:Oe.tech_number}),f(!0)},I=()=>{f(!1),g(null),Me()},K=async Oe=>{try{v(!0),await Ke.post("/auth/users",{...Oe,tech_number:Number(Oe.tech_number)}),e({kind:"success",message:"Usuario creado correctamente"}),I(),W()}catch(We){e({kind:"error",title:"Error",message:We.response?.data?.detail||"Error al crear"})}finally{v(!1)}},xe=async Oe=>{if(!h)return;const We=String(Oe.password||"").trim();try{if(v(!0),c){const A={username:String(Oe.username||"").trim(),first_name:String(Oe.first_name||"").trim(),last_name:String(Oe.last_name||"").trim(),role:Oe.role,tech_number:Number(Oe.tech_number)};We&&(A.password=We),await Ke.put(`/auth/users/${h.id}`,A),e({kind:"success",message:"Usuario actualizado correctamente"})}else{if(!We){e({kind:"error",message:"Debe ingresar una nueva contrasea"});return}await Ke.put(`/auth/users/${h.id}/password`,{new_password:We}),e({kind:"success",message:`Contrasea de ${h.username} actualizada`})}I(),W()}catch(A){const V=A?.response?.data?.detail||A?.message||"Error actualizando usuario";e({kind:"error",title:"Error",message:V})}finally{v(!1)}},Se=async Oe=>{if(confirm(`Eliminar usuario? ${Oe.username}?
Esto solo es posible si no tiene registros.`))try{v(!0),await Ke.delete(`/auth/users/${Oe.id}`),e({kind:"success",message:"Usuario eliminado"}),W()}catch(We){e({kind:"error",title:"No se puede eliminar",message:We.response?.data?.detail||We.message})}finally{v(!1)}},j=b.useMemo(()=>L?.items??[],[L]),Z=L?.total??0,ce=L?.limit??q,U=ce>0?Math.ceil(Z/ce):1,ue=10;let be=1,ze=U;if(U>ue){const Oe=Math.floor(ue/2);be=Math.max(1,J-Oe),ze=be+ue-1,ze>U&&(ze=U,be=Math.max(1,ze-ue+1))}const $e=Z===0?0:T+1,he=Z===0?0:Math.min(T+j.length,Z),Le=Z===0?"0 registros":`Mostrando ${$e}-${he} de ${Z} registros`,Ie=de||Ae||p,Ze=()=>{S(""),_(""),O(""),z(1),D(20)},mt=!!h,ke=mt&&!c,Ge=!mt||!c,pe=(h?.username??"").toLowerCase()==="admin",Fe=mt?c?"Dejar en blanco para mantener la actual.":"Ingrese una nueva contrasea.":void 0;return i?l.jsxs("div",{className:"container-fluid p-4 vi-oi-light",children:[l.jsx(Kl,{show:Ie}),l.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[l.jsx("h2",{className:"h4 m-0",children:"Gestin de Usuarios"}),l.jsx("button",{className:"btn btn-primary",onClick:Te,disabled:Ie,children:"+ Nuevo Usuario"})]}),l.jsxs("div",{className:"d-flex flex-wrap align-items-end gap-2 mb-3",children:[l.jsxs("div",{style:{minWidth:260},children:[l.jsx("label",{className:"form-label small mb-1",children:"Buscar"}),l.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Usuario o rol...",value:x,onChange:Oe=>{S(Oe.target.value),z(1)}})]}),l.jsxs("div",{style:{minWidth:220},children:[l.jsx("label",{className:"form-label small mb-1",children:"Rol"}),l.jsxs("select",{className:"form-select form-select-sm",value:E,onChange:Oe=>{O(Oe.target.value),z(1)},children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"admin",children:"admin"}),l.jsx("option",{value:"administrator",children:"administrator"}),l.jsx("option",{value:"technician",children:"technician"}),l.jsx("option",{value:"standard",children:"standard"}),l.jsx("option",{value:"user",children:"user (legacy)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"form-label small mb-1",children:"Mostrar"}),l.jsxs("select",{className:"form-select form-select-sm",value:q,onChange:Oe=>{const We=Number(Oe.target.value)||20;D(We),z(1)},children:[l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"})]})]}),l.jsxs("div",{className:"d-flex gap-2",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:Ze,disabled:Ie,children:"Limpiar filtros"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>W(),disabled:Ie,children:"Recargar"})]})]}),je?l.jsx("div",{className:"alert alert-danger",role:"alert",children:"No se pudo cargar la lista de usuarios."}):null,l.jsx("div",{className:"card shadow-sm",children:l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-hover align-middle mb-0",children:[l.jsx("thead",{className:"table-light",children:l.jsxs("tr",{children:[l.jsx("th",{children:"Usuario"}),l.jsx("th",{children:"Nombre"}),l.jsx("th",{children:"Rol"}),l.jsx("th",{children:"N Tcnico"}),l.jsx("th",{className:"text-end",children:"Acciones"})]})}),l.jsxs("tbody",{children:[j.map(Oe=>l.jsxs("tr",{children:[l.jsx("td",{className:"fw-bold",children:Oe.username}),l.jsxs("td",{children:[Oe.first_name," ",Oe.last_name]}),l.jsx("td",{children:(()=>{const We=Va(Oe.role,Oe.username),A=Oe.username.toLowerCase()==="admin"?"Superusuario":We==="administrator"?"Administrador":We==="technician"?"Tcnico":"Estndar",V=Oe.username.toLowerCase()==="admin"?"bg-danger":We==="administrator"?"bg-warning text-dark":We==="technician"?"bg-info text-dark":"bg-secondary";return l.jsx("span",{className:`badge ${V}`,children:A})})()}),l.jsx("td",{children:Oe.tech_number}),l.jsxs("td",{className:"text-end",children:[l.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",title:"Actualizar usuario","aria-label":`Actualizar ${Oe.username}`,disabled:Ie||Oe.username==="admin"||!c&&Va(Oe.role,Oe.username)==="administrator",onClick:()=>M(Oe),children:l.jsx("i",{className:"ti ti-edit"})}),l.jsx("button",{className:"btn btn-sm btn-outline-danger",title:"Eliminar usuario","aria-label":`Eliminar ${Oe.username}`,disabled:Ie||Oe.username==="admin"||!c&&Va(Oe.role,Oe.username)==="administrator",onClick:()=>Se(Oe),children:l.jsx("i",{className:"ti ti-trash"})})]})]},Oe.id)),j.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"text-center py-4",children:"No hay usuarios registrados"})})]})]})})}),U>1&&l.jsx("nav",{className:"px-3 py-2 d-flex justify-content-center",children:l.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[l.jsx("li",{className:`page-item ${J===1?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>z(Oe=>Math.max(1,Oe-1)),disabled:J===1,children:"Anterior"})}),Array.from({length:ze-be+1},(Oe,We)=>{const A=be+We;return l.jsx("li",{className:`page-item ${A===J?"active":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>z(A),children:A})},A)}),l.jsx("li",{className:`page-item ${J===U?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>z(Oe=>Math.min(U,Oe+1)),disabled:J===U,children:"Siguiente"})})]})}),l.jsx("div",{className:"px-3 py-2 d-flex justify-content-end",children:l.jsx("small",{className:"text-muted",children:Le})}),d&&l.jsx("div",{className:"modal d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:l.jsx("div",{className:"modal-dialog",children:l.jsxs("form",{className:"modal-content",onSubmit:we(mt?xe:K),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{className:"modal-title",children:mt?"Actualizar Usuario":"Nuevo Usuario"}),l.jsx("button",{type:"button",className:"btn-close",onClick:I})]}),l.jsxs("div",{className:"modal-body row g-3",children:[l.jsxs("div",{className:"col-6",children:[l.jsx("label",{className:"form-label",children:"Usuario"}),l.jsx("input",{className:"form-control",disabled:ke,...ge("username",{required:!0})})]}),l.jsx("div",{className:"col-6",children:l.jsx(to,{label:"Contrasea",...ge("password",{required:Ge}),autoComplete:"new-password",helpText:Fe})}),l.jsxs("div",{className:"col-6",children:[l.jsx("label",{className:"form-label",children:"Nombre"}),l.jsx("input",{className:"form-control",disabled:ke,...ge("first_name",{required:!0})})]}),l.jsxs("div",{className:"col-6",children:[l.jsx("label",{className:"form-label",children:"Apellido"}),l.jsx("input",{className:"form-control",disabled:ke,...ge("last_name",{required:!0})})]}),l.jsxs("div",{className:"col-6",children:[l.jsx("label",{className:"form-label",children:"Rol"}),l.jsxs("select",{className:"form-select",disabled:ke,...ge("role"),children:[pe?l.jsx("option",{value:"admin",children:"Superusuario"}):null,l.jsx("option",{value:"technician",children:"Tecnico"}),l.jsx("option",{value:"standard",children:"Estandar"}),c?l.jsx("option",{value:"administrator",children:"Administrador"}):null]})]}),l.jsxs("div",{className:"col-6",children:[l.jsx("label",{className:"form-label",children:"N Tecnico"}),l.jsx("input",{type:"number",className:"form-control",disabled:ke,...ge("tech_number",{required:!0})}),l.jsx("div",{className:"form-text small",children:"Use 0 si no aplica (admin/estandar)"})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:I,disabled:Ie,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Ie,children:mt?"Actualizar":"Guardar"})]})]})})})]}):l.jsx("div",{className:"p-4 text-danger",children:"Acceso no autorizado"})}function AT(){const{toast:e}=Qr(),[a,s]=b.useState(""),[i,c]=b.useState(""),[d,f]=b.useState(!1),h=a.trim().length>0&&i.trim().length>0,g=async p=>{if(p.preventDefault(),!!h)try{f(!0),await jE(a.trim(),i.trim()),e({kind:"success",message:"Contrasea actualizada"}),s(""),c("")}catch(v){e({kind:"error",title:"Error",message:v?.message??"No se pudo cambiar la contrasea"})}finally{f(!1)}};return l.jsx("div",{className:"container py-4",children:l.jsx("div",{className:"row justify-content-center",children:l.jsx("div",{className:"col-md-6",children:l.jsxs("div",{className:"card shadow-sm",children:[l.jsx("div",{className:"card-header",children:l.jsx("h5",{className:"mb-0",children:"Cambiar mi contrasea"})}),l.jsxs("form",{onSubmit:g,children:[l.jsxs("div",{className:"card-body",children:[l.jsx("div",{className:"mb-3",children:l.jsx(to,{label:"Contrasea actual",inputId:"oldPwd",value:a,onChange:p=>s(p.target.value),required:!0,autoComplete:"current-password"})}),l.jsx("div",{className:"mb-3",children:l.jsx(to,{label:"Nueva contrasea",inputId:"newPwd",value:i,onChange:p=>c(p.target.value),required:!0,autoComplete:"new-password",helpText:"Usa una contrasea segura y que recuerdes."})})]}),l.jsxs("div",{className:"card-footer d-flex justify-content-end gap-2",children:[l.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{s(""),c("")},disabled:d,children:"Limpiar"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!h||d,children:"Guardar"})]})]})]})})})})}async function OT(e){return(await Ke.get("/admin/permisos/paged",{params:{q:e.q||void 0,role:e.role||void 0,limit:e.limit,offset:e.offset}})).data}async function RT(e,a){const{data:s}=await Ke.put(`/admin/permisos/${e}`,{allowedModules:a});return s}const Am=[{id:"oi_formulario",label:"Registro OI",path:"/oi"},{id:"oi_listado",label:"Listado OI",path:"/oi/list"},{id:"tools_vima_lista",label:"VIMA  LISTA",path:"/oi/tools/vima-to-lista"},{id:"tools_actualizacion_bases",label:"Actualizacin de Bases",path:"/oi/tools/actualizacion-base"},{id:"tools_historial_ac",label:"Historial A-C",path:"/oi/tools/formato-ac/history"},{id:"tools_consol_correlativo",label:"Consolidacin (Correlativo)",path:"/oi/tools/consolidacion/correlativo"},{id:"tools_consol_no_correlativo",label:"Consolidacin (No Correlativo)",path:"/oi/tools/consolidacion/no-correlativo"},{id:"future_ot",label:"Orden de Trabajo (FUTURO)",path:"FUTURO"},{id:"logistica",label:"Logstica",path:"/logistica/log01/excel"},{id:"logistica_history",label:"Historial de consolidaciones",path:"/logistica/log01/history"},{id:"logistica_pdfs",label:"Filtrado de Cert.PDFs",path:"/logistica/log02/pdfs"},{id:"future_smart",label:"Smart (FUTURO)",path:"FUTURO"},{id:"users_admin",label:"Gestin de usuarios",path:"/users"},{id:"admin_permisos",label:"Permisos",path:"/admin/permisos"}],wv=[{id:"oi",label:"OI",moduleIds:["oi_formulario","oi_listado","tools_vima_lista","tools_actualizacion_bases","tools_historial_ac","tools_consol_correlativo","tools_consol_no_correlativo","future_ot"]},{id:"logistica",label:"Logstica",moduleIds:["logistica","logistica_history","logistica_pdfs"]},{id:"smart",label:"Smart (FUTURO)",moduleIds:["future_smart"]},{id:"usuarios",label:"Usuarios",moduleIds:["users_admin"]},{id:"administrar",label:"Administrar",moduleIds:["admin_permisos"]}];function _v(e){const a=new Set(Am.map(c=>c.id)),s=new Set,i=[];for(const c of e){const d=c==="future_logistica"?"logistica":c;!a.has(d)||s.has(d)||(s.add(d),i.push(d))}return i}const Ev="admin_permisos:collapsed_groups";function TT(){const e=Hm(),{toast:a}=Qr(),[s,i]=b.useState(""),[c,d]=b.useState(""),[f,h]=b.useState(""),[g,p]=b.useState(20),[v,x]=b.useState(1),S=(v-1)*g,$=b.useRef(!1);b.useEffect(()=>{if(!$.current){$.current=!0;return}const U=setTimeout(()=>{d(s.trim()),x(1)},250);return()=>clearTimeout(U)},[s]);const{data:_,isLoading:E,error:O,refetch:q}=Fr({queryKey:["admin","permisos",{search:c,roleFilter:f,pageSize:g,offset:S}],queryFn:()=>OT({q:c||void 0,role:f||void 0,limit:g,offset:S}),placeholderData:U=>U}),[D,J]=b.useState(null),[z,T]=b.useState([]),G=(D?.username??"").toLowerCase()==="admin",[L,W]=b.useState(()=>{const U=Object.fromEntries(wv.map(ue=>[ue.id,!0]));try{const ue=localStorage.getItem(Ev);if(!ue)return U;const be=JSON.parse(ue);return!be||typeof be!="object"?U:{...U,...be}}catch{return U}}),de=(U,ue)=>{W(be=>{const ze={...be,[U]:ue};try{localStorage.setItem(Ev,JSON.stringify(ze))}catch{}return ze})},Ae=U=>{J(U),T(_v(U.allowedModules??[]))},je=()=>{J(null),T([])},ge=t_({mutationFn:async U=>RT(U.userId,U.allowedModules),onSuccess:async()=>{await e.invalidateQueries({queryKey:["admin","permisos"]}),a({kind:"success",title:"Permisos",message:"Permisos actualizados."}),je()},onError:U=>{const ue=U?.response?.data?.detail??U?.message??"No se pudieron actualizar los permisos.";a({kind:"error",title:"Permisos",message:String(ue)})}}),we=b.useMemo(()=>_?.items??[],[_]),Me=_?.total??0,Te=_?.limit??g,M=Te>0?Math.ceil(Me/Te):1,I=Me===0?0:S+1,K=Me===0?0:Math.min(S+we.length,Me),xe=Me===0?"0 registros":`Mostrando ${I}-${K} de ${Me} registros`,Se=U=>{T(ue=>{const be=new Set(ue);return be.has(U)?be.delete(U):be.add(U),Array.from(be)})},j=U=>{T(ue=>{const be=new Set(ue),ze=U.moduleIds.filter(he=>Am.some(Le=>Le.id===he));if(ze.length>0&&ze.every(he=>be.has(he)))for(const he of ze)be.delete(he);else for(const he of ze)be.add(he);return Array.from(be)})},Z=()=>{D&&ge.mutate({userId:D.id,allowedModules:_v(z)})},ce=()=>{i(""),d(""),h(""),x(1),p(20)};return l.jsxs("div",{className:"container-fluid",children:[l.jsx(Kl,{show:ge.isPending,label:"Guardando permisos..."}),l.jsx("div",{className:"row",children:l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Administrar  Permisos"}),l.jsx("p",{className:"text-muted mB-20",children:"Define qu mdulos puede ver cada usuario (el acceso por URL tambin se bloquea)."}),l.jsxs("div",{className:"d-flex flex-wrap align-items-end gap-2 mb-3",children:[l.jsxs("div",{style:{minWidth:260},children:[l.jsx("label",{className:"form-label small mb-1",children:"Buscar"}),l.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Usuario, nombre o rol...",value:s,onChange:U=>{i(U.target.value),x(1)}})]}),l.jsxs("div",{style:{minWidth:220},children:[l.jsx("label",{className:"form-label small mb-1",children:"Rol"}),l.jsxs("select",{className:"form-select form-select-sm",value:f,onChange:U=>{h(U.target.value),x(1)},children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"admin",children:"admin"}),l.jsx("option",{value:"administrator",children:"administrator"}),l.jsx("option",{value:"technician",children:"technician"}),l.jsx("option",{value:"standard",children:"standard"}),l.jsx("option",{value:"user",children:"user (legacy)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"form-label small mb-1",children:"Mostrar"}),l.jsxs("select",{className:"form-select form-select-sm",value:g,onChange:U=>{const ue=Number(U.target.value)||20;p(ue),x(1)},children:[l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"})]})]}),l.jsxs("div",{className:"d-flex gap-2",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:ce,disabled:E||ge.isPending,children:"Limpiar filtros"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>q(),disabled:E||ge.isPending,children:"Recargar"})]})]}),E?l.jsx("div",{className:"text-muted",children:"Cargando usuarios..."}):O?l.jsx("div",{className:"alert alert-danger",role:"alert",children:"No se pudo cargar la lista de usuarios."}):l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm align-middle",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Usuario"}),l.jsx("th",{children:"Rol"}),l.jsx("th",{className:"text-end",children:"Acciones"})]})}),l.jsxs("tbody",{children:[we.map(U=>l.jsxs("tr",{children:[l.jsx("td",{children:U.username}),l.jsx("td",{children:U.role}),l.jsx("td",{className:"text-end",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>Ae(U),disabled:(U.username??"").toLowerCase()==="admin",children:"Editar"})})]},U.id)),we.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"text-muted",children:"No hay usuarios."})}):null]})]})}),l.jsx("div",{className:"d-flex justify-content-end mt-2",children:l.jsx("small",{className:"text-muted",children:xe})}),M>1&&l.jsx("nav",{className:"mt-2 d-flex justify-content-center",children:l.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[l.jsx("li",{className:`page-item ${v===1?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>x(U=>Math.max(1,U-1)),disabled:v===1,children:""})}),l.jsx("li",{className:"page-item disabled",children:l.jsxs("span",{className:"page-link",children:["Pgina ",v," / ",M]})}),l.jsx("li",{className:`page-item ${v===M?"disabled":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>x(U=>Math.min(M,U+1)),disabled:v===M,children:"Siguiente"})})]})})]})})}),D&&l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"permsModalTitle",onClick:U=>{U.target===U.currentTarget&&je()},children:l.jsx("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("h5",{id:"permsModalTitle",className:"modal-title",children:["Permisos de ",D.username]}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:je})]}),l.jsxs("div",{className:"modal-body",children:[G?l.jsxs("div",{className:"alert alert-info",role:"alert",children:["El superusuario ",l.jsx("b",{children:"admin"})," siempre tiene acceso total y no se puede limitar por permisos."]}):null,wv.map(U=>{const ue=U.moduleIds.map(Le=>Am.find(Ie=>Ie.id===Le)).filter(Boolean),be=ue.filter(Le=>z.includes(Le.id)).length,ze=ue.length>0&&be===ue.length,$e=be>0&&!ze,he=!!L[U.id];return l.jsxs("div",{className:"mb-3",children:[l.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[l.jsxs("div",{className:"form-check mb-0",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:`grp-${D.id}-${U.id}`,checked:ze,ref:Le=>{Le&&(Le.indeterminate=$e)},onChange:()=>j(U),disabled:ge.isPending||G}),l.jsxs("label",{className:"form-check-label fw-semibold",htmlFor:`grp-${D.id}-${U.id}`,children:[U.label,l.jsxs("span",{className:"text-muted ms-2 small",children:["(",be,"/",ue.length,")"]})]})]}),l.jsx("div",{className:"btn-group btn-group-sm",role:"group","aria-label":`Acciones ${U.label}`,children:l.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>de(U.id,!he),disabled:ge.isPending,children:he?"Expandir":"Contraer"})})]}),!he&&l.jsx("div",{className:"mt-2 ms-4 ps-3 border-start border-2 border-light",children:l.jsx("div",{className:"row",children:ue.map(Le=>l.jsx("div",{className:"col-md-6 mb-2",children:l.jsxs("div",{className:"form-check",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:`perm-${D.id}-${Le.id}`,checked:z.includes(Le.id),onChange:()=>Se(Le.id),disabled:ge.isPending||G}),l.jsxs("label",{className:"form-check-label",htmlFor:`perm-${D.id}-${Le.id}`,children:[Le.label," ",l.jsxs("span",{className:"text-muted",children:["(",Le.path,")"]})]})]})},Le.id))})})]},U.id)}),l.jsx("div",{className:"form-text mt-2",children:"Nota: Cambiar contrasea y Home siempre estn disponibles para todos."})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:je,disabled:ge.isPending,children:"Cancelar"}),l.jsx("button",{type:"button",className:"btn btn-primary",onClick:Z,disabled:ge.isPending||G,children:"Guardar"})]})]})})})]})}function DT(e){const a=Ke.defaults.baseURL??window.location.origin;return`${String(a).replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`}async function zT(e,a){return Ke.post("/integrations/vima-to-lista/dry-run-upload",e,{signal:a})}async function kT(e,a){return Ke.post("/integrations/vima-to-lista/upload",e,{responseType:"blob",signal:a})}async function Cv(e,a,s){const i=DT(`/integrations/vima-to-lista/progress/${e}`),c=Ln()?.token,d=await fetch(i,{method:"GET",headers:c?{Authorization:`Bearer ${c}`}:void 0,signal:s});if(!d.ok||!d.body)throw new Error(`No se pudo abrir el stream de progreso (${d.status})`);const f=d.body.getReader(),h=new TextDecoder("utf-8");let g="";for(;;){const{value:p,done:v}=await f.read();if(v)break;g+=h.decode(p,{stream:!0});let x;for(;(x=g.indexOf(`
`))>=0;){const S=g.slice(0,x).trim();if(g=g.slice(x+1),!!S)try{a(JSON.parse(S))}catch{}}}}function D0(e){return`${e.name}::${e.size}::${e.lastModified}`}function MT(e){return e.normalize("NFKC").trim().replace(/\s+/g,"").toLowerCase()}function Qc(e){return MT(e.name)}function UT(e){if(!e)return null;const a=e.split(",").map(s=>s.trim().toLowerCase()).filter(Boolean);return a.length===0?null:a}function dh(e,a){const s=UT(a);if(!s)return e;const i=s.filter(c=>c.startsWith("."));return i.length===0?e:e.filter(c=>i.some(d=>c.name.toLowerCase().endsWith(d)))}function LT(e,a){if(a.length===0)return{merged:e,added:[],duplicates:[]};const s=[...e],i=[],c=[],d=new Set(e.map(Qc));for(const f of a){const h=Qc(f);if(d.has(h)){c.push(f);continue}d.add(h),s.push(f),i.push(f)}return{merged:s,added:i,duplicates:c}}function so({label:e,accept:a,disabled:s=!1,file:i,onChange:c}){const d=b.useRef(null),f=b.useRef(0),[h,g]=b.useState(!1),p=()=>{s||d.current?.click()},v=()=>{s||(d.current&&(d.current.value=""),c(null))},x=O=>{c(O.target.files?.[0]??null),O.currentTarget.value=""},S=O=>{O.preventDefault(),O.stopPropagation(),!s&&(f.current+=1,g(!0))},$=O=>{O.preventDefault(),O.stopPropagation()},_=O=>{O.preventDefault(),O.stopPropagation(),!s&&(f.current=Math.max(0,f.current-1),f.current===0&&g(!1))},E=O=>{if(O.preventDefault(),O.stopPropagation(),f.current=0,g(!1),s)return;const q=O.dataTransfer?.files?Array.from(O.dataTransfer.files):[],J=dh(q,a)[0]??null;J&&(d.current&&(d.current.value=""),c(J))};return l.jsxs("div",{children:[l.jsx("label",{className:"form-label",children:e}),l.jsx("input",{ref:d,className:"d-none",type:"file",accept:a,onChange:x,disabled:s}),l.jsx("div",{className:`vi-file-drop-target${h?" is-dragover":""}`,onDragEnter:S,onDragOver:$,onDragLeave:_,onDrop:E,"aria-disabled":s?"true":"false",children:l.jsxs("div",{className:"input-group",children:[l.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:p,disabled:s,children:"Examinar"}),l.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:v,disabled:s||!i,children:"Eliminar"}),l.jsx("input",{className:"form-control",type:"text",readOnly:!0,value:i?i.name:"No se ha seleccionado ningn archivo."})]})})]})}const BT={status:"estado",progress:"progreso",complete:"completado",error:"error"},qT={file:"archivo",file_done:"archivo procesado",file_error:"archoivo con error",render:"generando",failed:"fallido",received:"recibido",loading:"cargando",upload:"subida",analysis:"anlisis",init:"iniciando",processing:"procesamiento",opening:"abriendo",reading:"leyendo",writing:"escribiendo",saving:"guardando",cancelled:"cancelado",canceled:"cancelado",copied:"copiado",skipped:"omitido",skipped_incremental:"omitido (incremental)",stopped_blank:"detenido (en blanco)",complete:"completado",done:"finalizado",error:"error"},$T=[[/\bcomplete(d)?\b/gi,"completado"],[/\bstopped_blank\b/gi,"detenido (en blanco)"],[/\bskipped_incremental\b/gi,"omitido (incremental)"],[/\bskipped\b/gi,"omitido"],[/\bprocessing\b/gi,"procesando"],[/\bopening\b/gi,"abriendo"],[/\breading\b/gi,"leyendo"],[/\bwriting\b/gi,"escribiendo"],[/\bsaving\b/gi,"guardando"],[/\breceived\b/gi,"recibido"],[/\bloading\b/gi,"cargando"],[/\bupload(ing)?\b/gi,"subiendo"],[/\bdownload(ing)?\b/gi,"descargando"],[/\bmerge(s|d|ing)?\b/gi,"consolidando"]];function z0(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function Fl(e){if(!e)return"";const a=e.toLowerCase();return z0(BT[a]??e)}function Gr(e){if(!e)return"";const a=e.trim().toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),s=e.trim().replace(/[_-]+/g," ");return z0(qT[a]??Xl(s))}function Xl(e){if(!e)return"";let a=e;for(const[s,i]of $T)a=a.replace(s,i);return a}function IT(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function FT(e,a){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(s)}function HT(){const[e,a]=b.useState(null),[s,i]=b.useState(null),[c,d]=b.useState(""),[f,h]=b.useState(11),[g,p]=b.useState(11),[v,x]=b.useState(!0),[S,$]=b.useState(!0),[_,E]=b.useState(!0),[O,q]=b.useState(!0),[D,J]=b.useState(!1),[z,T]=b.useState(""),[G,L]=b.useState(null),[W,de]=b.useState(null),[Ae,je]=b.useState(null),[ge,we]=b.useState([]),[Me,Te]=b.useState(""),M=b.useRef(null),I=b.useRef(null),[K,xe]=b.useState(!1),[Se,j]=b.useState(!1),[Z,ce]=b.useState("Ingresa la contrasea de apertura del archivo y vuelve a intentar."),U=b.useMemo(()=>!!e&&!!s&&!G,[e,s,G]);function ue(ke){we(pe=>[ke,...pe].slice(0,200));const Ge=typeof ke.percent=="number"?ke.percent:typeof ke.progress=="number"?ke.progress:null;Ge!=null&&Number.isFinite(Ge)&&je(Math.max(0,Math.min(100,Ge)))}function be(){M.current?.abort(),M.current=null}function ze(){G&&be()}function $e(ke,Ge){if(!e||!s)throw new Error("Faltan archivos");const pe=new FormData;pe.append("vima_file",e),pe.append("lista_file",s);const Fe=(Ge??c).trim();return Fe&&pe.append("vima_password",Fe),pe.append("vima_start_row",String(f)),pe.append("lista_start_row",String(g)),pe.append("require_all_g_to_n",v?"true":"false"),pe.append("incremental",S?"true":"false"),pe.append("strict_incremental",_?"true":"false"),pe.append("replicate_merges",O?"true":"false"),pe.append("update_existing_periodo",D?"true":"false"),z.trim()&&pe.append("oi_pattern",z.trim()),pe.append("operation_id",ke),pe}function he(){I.current=null,j(!1)}function Le(ke,Ge){I.current=ke,ce(Ge),j(!0)}function Ie(ke,Ge){if(!bt.isAxiosError(ke)){Te(String(ke));return}const pe=ke;if(pe.code==="ERR_CANCELED")return;const Fe=pe.response?.headers?.["x-code"],Oe=pe.response?.data?.detail??pe.message;if(Fe==="PASSWORD_REQUIRED"){Te(""),Le(Ge,"El archivo VIMA est protegido. Ingresa la contrasea de apertura para continuar.");return}if(Fe==="WRONG_PASSWORD"){Te(""),Le(Ge,"Contrasea incorrecta. Intenta nuevamente.");return}Te(String(Oe))}async function Ze(ke){Te(""),de(null),we([]),je(0);const Ge=crypto.randomUUID();M.current=new AbortController,Cv(Ge,ue,M.current.signal).catch(()=>{}),L("dry");try{const pe=$e(Ge,ke?.passwordOverride),Fe=await zT(pe,M.current.signal);de(Fe.data)}catch(pe){Ie(pe,"dry")}finally{be(),L(null)}}async function mt(ke){Te(""),we([]),je(0);const Ge=crypto.randomUUID();M.current=new AbortController,Cv(Ge,ue,M.current.signal).catch(()=>{}),L("upload");try{const pe=$e(Ge,ke?.passwordOverride),Fe=await kT(pe,M.current.signal),Oe=Fe.headers?.["content-disposition"],We=IT(Oe)??"LISTA_SALIDA.xlsx";FT(Fe.data,We)}catch(pe){Ie(pe,"upload")}finally{be(),L(null)}}return l.jsxs("div",{className:"container-fluid",children:[l.jsxs("div",{className:"row gap-20",children:[l.jsx("div",{className:"col-md-7",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-20",children:"Integracin VIMA  LISTA"}),l.jsx("div",{className:"mB-15",children:l.jsx(so,{label:"Archivo VIMA (.xlsm)",accept:".xlsm,.xlsx",file:e,onChange:a,disabled:!!G})}),l.jsx("div",{className:"mB-15",children:l.jsx(so,{label:"Archivo LISTA (.xlsx)",accept:".xlsx,.xlsm",file:s,onChange:i,disabled:!!G})}),l.jsxs("div",{className:"mB-15",children:[l.jsx("label",{className:"form-label",children:"Contrasea VIMA (si aplica)"}),l.jsx("input",{className:"form-control",type:"password",value:c,onChange:ke=>d(ke.target.value),placeholder:"(opcional)"})]}),K?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Fila inicio VIMA"}),l.jsx("input",{className:"form-control",type:"number",value:f,onChange:ke=>h(Number(ke.target.value))})]}),l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Fila inicio LISTA"}),l.jsx("input",{className:"form-control",type:"number",value:g,onChange:ke=>p(Number(ke.target.value))})]})]}),l.jsxs("div",{className:"mB-15",children:[l.jsx("label",{className:"form-label",children:"Patrn OI (regex, opcional)"}),l.jsx("input",{className:"form-control",value:z,onChange:ke=>T(ke.target.value),placeholder:"Ej: OI-(\\\\d{4})-(\\\\d+)"}),l.jsx("small",{className:"text-muted",children:"Nota: si pegas barras invertidas, el backend ya normaliza doble backslash."})]}),l.jsxs("div",{className:"row mT-10",children:[l.jsx("div",{className:"col-md-6 mB-10",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"requireAll",checked:v,onChange:ke=>x(ke.target.checked)}),l.jsx("label",{className:"form-check-label",htmlFor:"requireAll",children:"Requerir GN completos"})]})}),l.jsx("div",{className:"col-md-6 mB-10",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateMerges",checked:O,onChange:ke=>q(ke.target.checked)}),l.jsx("label",{className:"form-check-label",htmlFor:"replicateMerges",children:"Replicar merges"})]})}),l.jsx("div",{className:"col-md-6 mB-10",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"incremental",checked:S,onChange:ke=>$(ke.target.checked)}),l.jsx("label",{className:"form-check-label",htmlFor:"incremental",children:"Incremental"})]})}),l.jsx("div",{className:"col-md-6 mB-10",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"strictIncremental",checked:_,onChange:ke=>E(ke.target.checked),disabled:!S}),l.jsx("label",{className:"form-check-label",htmlFor:"strictIncremental",children:"Incremental estricto"})]})}),l.jsx("div",{className:"col-md-6 mB-10",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"updateExistingPeriodo",checked:D,onChange:ke=>J(ke.target.checked),disabled:!S}),l.jsx("label",{className:"form-check-label",htmlFor:"updateExistingPeriodo",children:"Actualizar periodo en OIs existentes"})]})})]})]}):null,Me&&l.jsx("div",{className:"alert alert-danger mT-15",role:"alert",children:Me}),l.jsx("div",{className:"d-flex justify-content-end mT-10",children:l.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>xe(ke=>!ke),disabled:!!G,children:K?"Menos Opciones":"Ms Opciones"})}),l.jsxs("div",{className:"d-flex gap-10 mT-20",children:[l.jsx("button",{className:"btn btn-primary",disabled:!U,onClick:()=>void mt(),children:G==="upload"?"Procesando...":"Procesar y Descargar"}),l.jsx("button",{className:"btn btn-outline-danger",disabled:!G,onClick:ze,children:"Cancelar"}),l.jsx("button",{className:"btn btn-outline-primary",disabled:!U,onClick:()=>void Ze(),children:G==="dry"?"Analizando...":"Analizar"})]}),W&&l.jsxs("div",{className:"mT-20",children:[l.jsx("h5",{className:"c-grey-900",children:"Resumen"}),l.jsxs("ul",{className:"mB-0",children:[l.jsxs("li",{children:["Filas a copiar: ",l.jsx("b",{children:W.would_copy})]}),l.jsxs("li",{children:["Fila inicio escritura (LISTA): ",l.jsx("b",{children:W.start_write_row})]}),l.jsxs("li",{children:["ltimo OI en LISTA: ",l.jsx("b",{children:String(W.last_oi_in_lista??"-")})]}),l.jsxs("li",{children:["Primer OI a copiar: ",l.jsx("b",{children:String(W.first_oi_to_copy??"-")})]}),l.jsxs("li",{children:["ltimo OI a copiar: ",l.jsx("b",{children:String(W.last_oi_to_copy??"-")})]})]})]})]})}),l.jsx("div",{className:"col-md-5",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),G?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress mB-15",style:{height:12},children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${Ae??0}%`},"aria-valuenow":Ae??0,"aria-valuemin":0,"aria-valuemax":100})}),l.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:ge.length===0?l.jsx("div",{className:"text-muted",children:"Sin eventos an."}):l.jsx("ul",{className:"list-unstyled mB-0",children:ge.map((ke,Ge)=>l.jsxs("li",{className:"mB-10",children:[l.jsxs("div",{children:[l.jsx("b",{children:Fl(ke.type)})," ",ke.stage?l.jsxs("span",{className:"text-muted",children:["[",Gr(ke.stage),"]"]}):null,typeof ke.percent=="number"?l.jsxs("span",{className:"text-muted",children:["  ",ke.percent.toFixed(1),"%"]}):null]}),l.jsx("div",{className:"text-muted",children:Xl(ke.message??ke.detail??"")}),ke.code?l.jsxs("div",{className:"text-muted",children:["Cdigo: ",ke.code]}):null]},Ge))})})]})})]}),l.jsx(gu,{show:Se,title:"Archivo protegido",confirmLabel:"Continuar",helpText:Z,onClose:he,onConfirm:ke=>{d(ke),j(!1);const Ge=I.current;I.current=null,Ge&&(Ge==="dry"?Ze({passwordOverride:ke}):mt({passwordOverride:ke}))}})]})}function Yc(e){const a=e,s=String(a?.name||""),i=String(a?.message||a||"");return s==="AbortError"||/aborted/i.test(i)||/abort/i.test(i)}function Jl(e){const a=Ke.defaults.baseURL??window.location.origin;return`${String(a).replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`}async function fh(e,a){if(!e.body)return;const s=e.body.getReader(),i=new TextDecoder("utf-8");let c="";try{for(;;){let f;try{f=await s.read()}catch(v){if(Yc(v))return;throw v}const{value:h,done:g}=f;if(g)break;if(!h||h.length===0)continue;c+=i.decode(h,{stream:!0});let p;for(;(p=c.indexOf(`
`))>=0;){const v=c.slice(0,p).trim();if(c=c.slice(p+1),!!v)try{const x=JSON.parse(v);x&&x.progress!=null&&x.percent==null&&(x.percent=x.progress),x&&x.percent!=null&&x.progress==null&&(x.progress=x.percent),a(x)}catch{}}}const d=c.trim();if(d)try{const f=JSON.parse(d);f&&f.progress!=null&&f.percent==null&&(f.percent=f.progress),f&&f.percent!=null&&f.progress==null&&(f.progress=f.percent),a(f)}catch{}}catch(d){if(Yc(d))return;throw d}}function ur(e,a,s){const i=new Error(e);return a!=null&&(i.status=a),s&&(i.code=s),i}async function mh(e,a,s){const i=Jl(`/integrations/vima-to-lista/progress/${e}`),c=Ln()?.token,d=await fetch(i,{method:"GET",headers:{...c?{Authorization:`Bearer ${c}`}:{},Accept:"application/x-ndjson","Cache-Control":"no-cache"},signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw ur(`No se pudo abrir el stream (${d.status})`,d.status,f)}await fh(d,a)}async function VT(e,a,s){const i=Jl(`/logistica/log01/progress/${e}`),c=Ln()?.token,d=await fetch(i,{method:"GET",headers:{...c?{Authorization:`Bearer ${c}`}:{},Accept:"application/x-ndjson","Cache-Control":"no-cache"},signal:s});if(!d.ok){const v=d.headers.get("X-Code")??void 0;throw ur(`No se pudo abrir el stream (${d.status})`,d.status,v)}if(!(d.headers.get("Content-Type")??"").includes("application/x-ndjson"))throw ur("Stream no es NDJSON",d.status);if(!d.body)throw ur("Stream sin body",d.status);const h=d.body.getReader(),g=new TextDecoder("utf-8");let p="";try{for(;;){let x;try{x=await h.read()}catch(E){if(Yc(E))return;throw E}const{value:S,done:$}=x;if($)break;if(!S||S.length===0)continue;p+=g.decode(S,{stream:!0});let _;for(;(_=p.indexOf(`
`))>=0;){const E=p.slice(0,_).trim();if(p=p.slice(_+1),!!E)try{a(JSON.parse(E))}catch{}}}const v=p.trim();if(v)try{a(JSON.parse(v))}catch{}}catch(v){if(Yc(v))return;throw v}}async function ZT(e,a,s){const i=Jl("/bases/actualizar/dry-run-upload"),c=Ln()?.token,d=await fetch(i,{method:"POST",headers:c?{Authorization:`Bearer ${c}`}:void 0,body:e,signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;let h=`Error (${d.status})`;try{const g=await d.json();g?.detail&&(h=String(g.detail))}catch{}throw ur(h,d.status,f)}await fh(d,a)}async function GT(e,a){return Ke.post("/bases/actualizar/upload",e,{responseType:"blob",signal:a})}async function PT(e,a){return Ke.post("/logistica/log01/start",e,{signal:a})}async function QT(e,a,s){const i=Jl(`/logistica/log01/poll/${e}?cursor=${encodeURIComponent(a)}`),c=Ln()?.token,d=await fetch(i,{method:"GET",headers:c?{Authorization:`Bearer ${c}`}:void 0,signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw ur(`No se pudo hacer poll (${d.status})`,d.status,f)}return await d.json()}async function YT(e,a){return Ke.get(`/logistica/log01/result/${encodeURIComponent(e)}`,{responseType:"blob",signal:a,validateStatus:s=>s===200})}async function KT(e){await Ke.post(`/logistica/log01/cancel/${encodeURIComponent(e)}`)}async function Om(e={}){const{limit:a=20,offset:s=0,include_deleted:i=!1,q:c,dateFrom:d,dateTo:f,source:h,status:g}=e,p={limit:a,offset:s,include_deleted:i};c&&c.trim()&&(p.q=c.trim()),d&&d.trim()&&(p.dateFrom=d.trim()),f&&f.trim()&&(p.dateTo=f.trim()),h&&h.trim()&&(p.source=h.trim()),g&&g.trim()&&(p.status=g.trim());const{data:v}=await Ke.get("/logistica/log01/history",{params:p});return v}async function XT(e,a,s){return Ke.get(`/logistica/log01/history/${encodeURIComponent(String(e))}/artifact/${encodeURIComponent(a)}`,{responseType:"blob",signal:s,validateStatus:i=>i===200})}async function JT(e,a){await Ke.delete(`/logistica/log01/history/${encodeURIComponent(String(e))}`,{data:void 0})}async function WT(){return(await Ke.get("/logistica/log02/explorador/roots")).data}async function e2(e){return(await Ke.get("/logistica/log02/explorador/listar",{params:{path:e}})).data}async function t2(e){return(await Ke.post("/logistica/log02/validar-rutas-unc",e)).data}async function n2(e,a){return(await Ke.post("/logistica/log02/copiar-conformes/start",e,{signal:a})).data}async function a2(e,a,s){const i=Jl(`/logistica/log02/copiar-conformes/progress/${e}`),c=Ln()?.token,d=await fetch(i,{method:"GET",headers:{...c?{Authorization:`Bearer ${c}`}:{},Accept:"application/x-ndjson","Cache-Control":"no-cache"},signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw ur(`No se pudo abrir el stream (${d.status})`,d.status,f)}await fh(d,a)}async function s2(e,a,s){const i=Jl(`/logistica/log02/copiar-conformes/poll/${e}?cursor=${encodeURIComponent(a)}`),c=Ln()?.token,d=await fetch(i,{method:"GET",headers:c?{Authorization:`Bearer ${c}`}:void 0,signal:s});if(!d.ok){const f=d.headers.get("X-Code")??void 0;throw ur(`No se pudo hacer poll (${d.status})`,d.status,f)}return await d.json()}async function r2(e){await Ke.post(`/logistica/log02/copiar-conformes/cancel/${encodeURIComponent(e)}`)}async function l2(e={}){const{limit:a=20,offset:s=0,q:i,dateFrom:c,dateTo:d,origin:f}=e,h={limit:a,offset:s};i&&i.trim()&&(h.q=i.trim()),c&&c.trim()&&(h.dateFrom=c.trim()),d&&d.trim()&&(h.dateTo=d.trim()),f&&f.trim()&&(h.origin=f.trim());const{data:g}=await Ke.get("/oi/tools/formato-ac/history",{params:h});return g}async function i2(e,a){return Ke.get(`/oi/tools/formato-ac/history/${encodeURIComponent(String(e))}/artifact`,{responseType:"blob",signal:a,validateStatus:s=>s===200})}async function k0(){const{data:e}=await Ke.get("/merge/config/upload-limits");return e}async function M0(e,a,s){return Ke.post(`/merge/?mode=${encodeURIComponent(a)}`,e,{responseType:"blob",signal:s})}async function U0(e){await Ke.post(`/merge/cancel/${encodeURIComponent(e)}`)}async function o2(e){const{data:a}=await Ke.post("/tools/files/upload",e);return a}async function c2(e){const{data:a}=await Ke.post("/tools/excel/inspect",e);return a}async function u2(e){const{data:a}=await Ke.post("/tools/excel/update",e);return a}async function d2(e){const{data:a}=await Ke.post("/tools/excel/change-password",e);return a}async function f2(e){const{data:a}=await Ke.post("/tools/excel/validate",e);return a}function m2({show:e,disabled:a=!1,title:s,accept:i,files:c,onClose:d,onAddFiles:f,onRemoveFile:h,onRemoveAll:g}){const p=b.useRef(null),v=b.useRef(0),[x,S]=b.useState(!1),[$,_]=b.useState("");b.useEffect(()=>{if(!e)return;const L=W=>{W.key==="Escape"&&d()};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[e,d]),b.useEffect(()=>{e||S(!1)},[e]),b.useEffect(()=>{e&&_("")},[e]);const E=b.useCallback(L=>{const W=dh(L,i);if(W.length===0)return;const de=new Set(c.map(Qc)),Ae=new Set(de),je=[],ge=[];for(const we of W){const Me=Qc(we);if(Ae.has(Me)){ge.push(we);continue}Ae.add(Me),je.push(we)}if(ge.length>0){const we=Array.from(new Set(ge.map(Te=>Te.name))),Me=ge.length;if(we.length===1){const Te=Me===1?"Se omiti 1 archivo duplicado":`Se omitieron ${Me} archivos duplicados`;_(`${Te}: "${we[0]}".`)}else _(`Se omitieron ${Me} archivos duplicados: ${we.join(", ")}.`)}je.length>0&&f(je)},[i,c,f]);if(b.useEffect(()=>{if(!e)return;const L=de=>{de.preventDefault(),de.stopPropagation()},W=de=>{if(de.preventDefault(),de.stopPropagation(),a)return;const Ae=de.dataTransfer?.files?Array.from(de.dataTransfer.files):[];E(Ae)};return window.addEventListener("dragover",L,!0),window.addEventListener("drop",W,!0),()=>{window.removeEventListener("dragover",L,!0),window.removeEventListener("drop",W,!0)}},[e,a,E]),!e)return null;const O=()=>{a||p.current?.click()},q=L=>{const W=L.target.files?Array.from(L.target.files):[];E(W),L.currentTarget.value=""},D=()=>{a||(p.current&&(p.current.value=""),g())},J=L=>{L.preventDefault(),L.stopPropagation(),!a&&(v.current+=1,S(!0))},z=L=>{L.preventDefault(),L.stopPropagation()},T=L=>{L.preventDefault(),L.stopPropagation(),!a&&(v.current=Math.max(0,v.current-1),v.current===0&&S(!1))},G=L=>{if(L.preventDefault(),L.stopPropagation(),v.current=0,S(!1),a)return;const W=L.dataTransfer?.files?Array.from(L.dataTransfer.files):[];E(W)};return l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true","aria-labelledby":"filePickerModalTitle",onClick:L=>{L.target===L.currentTarget&&d()},children:l.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{id:"filePickerModalTitle",className:"modal-title",children:s}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:d})]}),l.jsxs("div",{className:"modal-body",children:[l.jsx("input",{ref:p,className:"d-none",type:"file",accept:i,multiple:!0,onChange:q,disabled:a}),$?l.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between",role:"alert",children:[l.jsx("div",{children:$}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>_("")})]}):null,l.jsxs("div",{className:`vi-dropzone${x?" is-dragover":""}`,onDragEnter:J,onDragOver:z,onDragLeave:T,onDrop:G,"aria-disabled":a?"true":"false",children:[l.jsxs("div",{className:"text-muted",children:["Arrastra y suelta archivos aqu, o"," ",l.jsx("button",{type:"button",className:"btn btn-link p-0 align-baseline",onClick:O,disabled:a,children:"selecciona desde tu equipo"}),"."]}),i?l.jsxs("div",{className:"form-text",children:["Tipos permitidos: ",i]}):null]}),l.jsxs("div",{className:"d-flex align-items-center justify-content-between mT-15 mB-10",children:[l.jsx("div",{className:"text-muted",children:c.length===0?"No se han seleccionado archivos.":c.length===1?"1 archivo seleccionado":`${c.length} archivos seleccionados`}),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:O,disabled:a,children:"Agregar ms"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-danger",onClick:D,disabled:a||c.length===0,children:"Eliminar todos"})]})]}),c.length===0?null:l.jsx("div",{style:{maxHeight:320,overflow:"auto"},children:l.jsx("ul",{className:"list-group",children:c.map(L=>{const W=D0(L);return l.jsxs("li",{className:"list-group-item d-flex align-items-center justify-content-between gap-10",children:[l.jsx("div",{className:"text-truncate",style:{minWidth:0},children:L.name}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>h(W),disabled:a,children:"Eliminar"})]},W)})})})]}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:d,children:"Cerrar"})})]})})})}function h2(e){if(e.length===0)return"";const a=Array.from(new Set(e.map(i=>i.name))),s=e.length;return a.length===1?`${s===1?"Se omiti 1 archivo duplicado":`Se omitieron ${s} archivos duplicados`}: "${a[0]}".`:`Se omitieron ${s} archivos duplicados: ${a.join(", ")}.`}function bu({label:e,title:a,accept:s,disabled:i=!1,fullDropArea:c=!1,files:d,setFiles:f}){const[h,g]=b.useState(!1),[p,v]=b.useState(!1),[x,S]=b.useState(""),$=b.useRef(0),_=b.useMemo(()=>d.length===0?"No se han seleccionado archivos.":d.length===1?"1 archivo seleccionado":`${d.length} archivos seleccionados`,[d.length]),E=d.length===0?"Agregar archivos":"Modificar/agregar archivos",O=G=>{const L=dh(G,s);L.length!==0&&f(W=>{const{merged:de,duplicates:Ae}=LT(W,L);return Ae.length>0&&S(h2(Ae)),de})},q=G=>{G.preventDefault(),G.stopPropagation(),!i&&($.current+=1,v(!0))},D=G=>{G.preventDefault(),G.stopPropagation()},J=G=>{G.preventDefault(),G.stopPropagation(),!i&&($.current=Math.max(0,$.current-1),$.current===0&&v(!1))},z=G=>{if(G.preventDefault(),G.stopPropagation(),$.current=0,v(!1),i)return;const L=G.dataTransfer?.files?Array.from(G.dataTransfer.files):[];O(L)},T=l.jsxs(l.Fragment,{children:[l.jsx("label",{className:"form-label",children:e}),l.jsxs("div",{className:"input-group",children:[l.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>g(!0),disabled:i,children:E}),l.jsx("input",{className:"form-control",type:"text",readOnly:!0,value:_})]}),x?l.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between mT-10",role:"alert",children:[l.jsx("div",{children:x}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>S("")})]}):null]});return l.jsxs(l.Fragment,{children:[c?l.jsx("div",{className:`vi-file-drop-target${p?" is-dragover":""}`,onDragEnter:q,onDragOver:D,onDragLeave:J,onDrop:z,"aria-disabled":i?"true":"false",children:T}):l.jsxs("div",{children:[l.jsx("label",{className:"form-label",children:e}),l.jsx("div",{className:`vi-file-drop-target${p?" is-dragover":""}`,onDragEnter:q,onDragOver:D,onDragLeave:J,onDrop:z,"aria-disabled":i?"true":"false",children:l.jsxs("div",{className:"input-group",children:[l.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>g(!0),disabled:i,children:E}),l.jsx("input",{className:"form-control",type:"text",readOnly:!0,value:_})]})}),x?l.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between mT-10",role:"alert",children:[l.jsx("div",{children:x}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>S("")})]}):null]}),l.jsx(m2,{show:h,disabled:i,title:a,accept:s,files:d,onClose:()=>g(!1),onAddFiles:O,onRemoveFile:G=>f(L=>L.filter(W=>D0(W)!==G)),onRemoveAll:()=>f([])})]})}function p2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function g2(e,a){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(s)}async function b2(e){if(!bt.isAxiosError(e))return{detail:String(e)};const a=e,s=a.response?.headers?.["x-code"]??void 0,i=a.response?.data;if(i instanceof Blob)try{const d=await i.text(),f=JSON.parse(d);return{detail:String(f?.detail??d??a.message),code:s}}catch{return{detail:a.message,code:s}}const c=i?.detail??a.message;return{detail:String(c),code:s}}function y2(){const[e,a]=b.useState(null),[s,i]=b.useState([]),[c,d]=b.useState(""),[f,h]=b.useState(""),[g,p]=b.useState("^OI-(\\d+)-(\\d{4})$"),[v,x]=b.useState(9),[S,$]=b.useState("ERROR FINAL"),[_,E]=b.useState(!0),[O,q]=b.useState(!1),[D,J]=b.useState(!1),[z,T]=b.useState(null),[G,L]=b.useState(null),[W,de]=b.useState([]),[Ae,je]=b.useState(""),ge=b.useRef(null),we=b.useRef(null),[Me,Te]=b.useState(!1),[M,I]=b.useState(!1),[K,xe]=b.useState("Ingresa la contrasea de apertura del archivo y vuelve a intentar."),Se=b.useMemo(()=>!!e&&s.length>0&&!z,[e,s,z]);function j(he){de(Ie=>[he,...Ie].slice(0,200));const Le=typeof he.percent=="number"?he.percent:typeof he.progress=="number"?he.progress:null;Le!=null&&Number.isFinite(Le)&&L(Math.max(0,Math.min(100,Le)))}function Z(){ge.current?.abort(),ge.current=null}function ce(){z&&Z()}function U(he,Le){if(!e)throw new Error("Falta el archivo Base");if(s.length===0)throw new Error("Faltan archivos OI");const Ie=new FormData;Ie.append("base_file",e);for(const mt of s)Ie.append("oi_files",mt);const Ze=(Le??c).trim();return Ze&&Ie.append("default_password",Ze),f.trim()&&Ie.append("per_file_passwords_json",f.trim()),g.trim()&&Ie.append("oi_pattern",g.trim()),Ie.append("oi_start_row",String(v)),S.trim()&&Ie.append("base_sheet",S.trim()),he&&Ie.append("operation_id",he),Ie}function ue(){we.current=null,I(!1)}function be(he,Le){we.current=he,xe(Le),I(!0)}async function ze(he){je(""),de([]),L(0),ge.current=new AbortController,T("dry");try{const Le=U(void 0,he?.passwordOverride);await ZT(Le,j,ge.current.signal)}catch(Le){if(Le?.name==="AbortError")return;const Ie=Le?.code,Ze=String(Le?.message??Le);if(Ie==="PASSWORD_REQUIRED"){je(""),be("dry","Algn archivo est protegido. Ingresa la contrasea de apertura para continuar.");return}else if(Ie==="WRONG_PASSWORD"){je(""),be("dry","Contrasea incorrecta. Intenta nuevamente.");return}else je(Ze)}finally{Z(),T(null)}}async function $e(he){je(""),de([]),L(0);const Le=crypto.randomUUID();ge.current=new AbortController,mh(Le,j,ge.current.signal).catch(()=>{}),T("upload");try{const Ie=U(Le,he?.passwordOverride);Ie.append("replicate_merges",_?"true":"false"),Ie.append("replicate_row_heights",O?"true":"false"),Ie.append("replicate_col_widths",D?"true":"false");const Ze=await GT(Ie,ge.current.signal),mt=Ze.headers["content-disposition"],ke=Ze.headers["x-file-name"],Ge=p2(mt)??ke??"base_actualizada.xlsx";g2(Ze.data,Ge)}catch(Ie){if(bt.isAxiosError(Ie)&&Ie.code==="ERR_CANCELED")return;const{detail:Ze,code:mt}=await b2(Ie);if(mt==="PASSWORD_REQUIRED"){je(""),be("upload","Algn archivo est protegido. Ingresa la contrasea de apertura para continuar.");return}else if(mt==="WRONG_PASSWORD"){je(""),be("upload","Contrasea incorrecta. Intenta nuevamente.");return}else je(Ze)}finally{Z(),T(null)}}return l.jsxs("div",{className:"container-fluid",children:[l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-7",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Actualizacin de Bases"}),l.jsx("p",{className:"text-muted mB-20",children:"Integra mltiples OIs en una Base (hoja ERROR FINAL). Soporta dry-run (NDJSON) y ejecucin con descarga."}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-12 mB-15",children:l.jsx(so,{label:"Base (xlsx)",accept:".xlsx",file:e,onChange:a,disabled:!!z})}),l.jsx("div",{className:"col-12 mB-15",children:l.jsx(bu,{label:"Archivos OI (xlsx/xlsm)",title:"Archivos OI",accept:".xlsx,.xlsm",files:s,setFiles:i,disabled:!!z})}),l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Contrasea por defecto (opcional)"}),l.jsx("input",{className:"form-control",type:"password",value:c,onChange:he=>d(he.target.value),disabled:!!z})]}),l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Hoja Base (opcional)"}),l.jsx("input",{className:"form-control",value:S,onChange:he=>$(he.target.value),disabled:!!z})]}),Me?l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Regex OI (opcional)"}),l.jsx("input",{className:"form-control",value:g,onChange:he=>p(he.target.value),disabled:!!z})]}):null,l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label",children:"Fila inicio OI"}),l.jsx("input",{className:"form-control",type:"number",min:1,value:v,onChange:he=>x(Number(he.target.value||9)),disabled:!!z})]}),l.jsxs("div",{className:"col-12 mB-15",children:[l.jsx("label",{className:"form-label",children:"Contraseas por archivo (opcional)"}),l.jsx("textarea",{className:"form-control",rows:4,value:f,onChange:he=>h(he.target.value),disabled:!!z,placeholder:`Ej:
OI-0001-2025.xlsx: clave1
OI-0002-2025.xlsx: clave2

O JSON:
{"OI-0001-2025.xlsx":"clave1"}`})]}),Me?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"col-md-4 mB-15",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateMerges",checked:_,onChange:he=>E(he.target.checked),disabled:!!z}),l.jsx("label",{className:"form-check-label",htmlFor:"replicateMerges",children:"Replicar merges"})]})}),l.jsx("div",{className:"col-md-4 mB-15",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateRowHeights",checked:O,onChange:he=>q(he.target.checked),disabled:!!z}),l.jsx("label",{className:"form-check-label",htmlFor:"replicateRowHeights",children:"Replicar alto filas"})]})}),l.jsx("div",{className:"col-md-4 mB-15",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",id:"replicateColWidths",checked:D,onChange:he=>J(he.target.checked),disabled:!!z}),l.jsx("label",{className:"form-check-label",htmlFor:"replicateColWidths",children:"Replicar ancho cols"})]})})]}):null]}),Ae&&l.jsx("div",{className:"alert alert-danger mT-10",role:"alert",children:Ae}),l.jsx("div",{className:"d-flex justify-content-end mT-10",children:l.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>Te(he=>!he),disabled:!!z,children:Me?"Menos Opciones":"Ms Opciones"})}),l.jsxs("div",{className:"d-flex gap-10 mT-15",children:[l.jsx("button",{className:"btn btn-primary",disabled:!Se,onClick:()=>void $e(),children:z==="upload"?"Procesando...":"Procesar y Descargar"}),l.jsx("button",{className:"btn btn-outline-danger",disabled:!z,onClick:ce,children:"Cancelar"}),l.jsx("button",{className:"btn btn-outline-primary",disabled:!Se,onClick:()=>void ze(),children:z==="dry"?"Analizando...":"Analizar"})]})]})}),l.jsx("div",{className:"col-md-5",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),z?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress mB-15",style:{height:12},children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${G??0}%`},"aria-valuenow":G??0,"aria-valuemin":0,"aria-valuemax":100})}),l.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:W.length===0?l.jsx("div",{className:"text-muted",children:"Sin eventos an."}):l.jsx("ul",{className:"list-unstyled mB-0",children:W.map((he,Le)=>l.jsxs("li",{className:"mB-10",children:[l.jsxs("div",{children:[l.jsx("b",{children:Fl(he.type)})," ",he.stage?l.jsxs("span",{className:"text-muted",children:["[",Gr(he.stage),"]"]}):null,typeof he.percent=="number"?l.jsxs("span",{className:"text-muted",children:["  ",he.percent.toFixed(1),"%"]}):null]}),l.jsx("div",{className:"text-muted",children:Xl(he.message??he.detail??"")}),he.code?l.jsxs("div",{className:"text-muted",children:["Cdigo: ",he.code]}):null]},Le))})})]})})]}),l.jsx(gu,{show:M,title:"Archivo protegido",confirmLabel:"Continuar",helpText:K,onClose:ue,onConfirm:he=>{d(he),I(!1);const Le=we.current;we.current=null,Le&&(Le==="dry"?ze({passwordOverride:he}):$e({passwordOverride:he}))}})]})}const v2="America/Lima";function x2(e){if(!e)return null;const a=/filename\*=UTF-8''([^;]+)|filename="([^"]+)"/i.exec(e),s=a?.[1]??a?.[2];if(!s)return null;try{return decodeURIComponent(s)}catch{return s}}function N2(e,a){const s=window.URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(s)}function S2(e){if(!e)return"N/D";const s=/[zZ]$/.test(e)||/[+-]\d{2}:\d{2}$/.test(e)||/[+-]\d{4}$/.test(e)?e:`${e}Z`,i=new Date(s);if(Number.isNaN(i.getTime()))return String(e);const d=new Intl.DateTimeFormat("es-PE",{timeZone:v2,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(i),f=h=>d.find(g=>g.type===h)?.value||"";return`${f("day")}/${f("month")}/${f("year")} ${f("hour")}:${f("minute")}`}function j2(e){const a=(e||"").toUpperCase();return a==="COMPLETADO"?"badge bg-success":a==="ERROR"?"badge bg-danger":"badge bg-secondary"}function w2(e){const a=(e||"").toUpperCase();return a==="VIMA_LISTA"?"VIMA LISTA":a==="ACTUALIZACION_BASES"?"ACTUALIZACION BASES":e||"N/D"}function _2(){const[e,a]=b.useState([]),[s,i]=b.useState(0),[c,d]=b.useState(!1),[f,h]=b.useState(""),[g,p]=b.useState(0),[v,x]=b.useState(""),[S,$]=b.useState(""),[_,E]=b.useState(""),[O,q]=b.useState(""),[D,J]=b.useState(20),[z,T]=b.useState(1),[G,L]=b.useState(()=>({q:"",dateFrom:"",dateTo:"",origin:""})),W=b.useMemo(()=>(z-1)*D,[z,D]);b.useEffect(()=>{let I=!1;return d(!0),h(""),l2({limit:D,offset:W,q:G.q||void 0,dateFrom:G.dateFrom||void 0,dateTo:G.dateTo||void 0,origin:G.origin||void 0}).then(K=>{I||(a(Array.isArray(K?.items)?K.items:[]),i(typeof K?.total=="number"?K.total:0))}).catch(K=>{if(I)return;const xe=K,Se=xe.response?.data?.detail||xe.message||"No se pudo cargar historial.";h(Se)}).finally(()=>{I||d(!1)}),()=>{I=!0}},[G,W,D,g]);const de=()=>{L({q:v.trim(),dateFrom:S.trim(),dateTo:_.trim(),origin:O.trim()}),T(1)},Ae=()=>{x(""),$(""),E(""),q(""),L({q:"",dateFrom:"",dateTo:"",origin:""}),T(1),p(I=>I+1)},je=()=>p(I=>I+1),ge=async I=>{try{h("");const K=await i2(I),xe=K.headers["content-disposition"],Se=K.headers["x-file-name"],j=x2(xe)??Se??"formato_ac.xlsx";N2(K.data,j)}catch(K){const xe=K;if(bt.isCancel(xe))return;const Se=xe.response?.data?.detail||xe.message||"No se pudo descargar.";h(Se)}},we=s===0?0:W+1,Me=s===0?0:Math.min(W+e.length,s),Te=z>1,M=W+e.length<s;return l.jsx("div",{className:"container-fluid",children:l.jsx("div",{className:"row",children:l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[l.jsx("div",{className:"d-flex flex-wrap align-items-center justify-content-between mB-10 gap-10",children:l.jsx("h4",{className:"c-grey-900 mB-0",children:"Historial A-C"})}),f?l.jsx("div",{className:"alert alert-danger",role:"alert",children:f}):null,l.jsxs("form",{className:"row g-2 align-items-end",onSubmit:I=>{I.preventDefault(),de()},children:[l.jsxs("div",{className:"col-md-4",children:[l.jsx("label",{className:"form-label",children:"Buscar"}),l.jsx("input",{className:"form-control form-control-sm",value:v,onChange:I=>x(I.target.value),onKeyDown:I=>{I.key==="Enter"&&de()},placeholder:"Operacion o usuario..."})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Fecha desde"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:S,onChange:I=>$(I.target.value)})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Fecha hasta"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:_,onChange:I=>E(I.target.value)})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Origen"}),l.jsxs("select",{className:"form-select form-select-sm",value:O,onChange:I=>q(I.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"VIMA_LISTA",children:"VIMA LISTA"}),l.jsx("option",{value:"ACTUALIZACION_BASES",children:"ACTUALIZACION BASES"})]})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Mostrar"}),l.jsxs("select",{className:"form-select form-select-sm",value:D,onChange:I=>{const K=Number(I.target.value);J(Number.isFinite(K)?K:20),T(1)},children:[l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"})]})]}),l.jsxs("div",{className:"col-12 d-flex flex-wrap gap-10 mT-5",children:[l.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:c,children:"Buscar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:Ae,children:"Limpiar filtros"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:je,children:"Recargar"})]})]}),l.jsxs("div",{className:"mT-15",children:[c?l.jsx("div",{className:"text-muted",children:"Cargando historial..."}):l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Operacion"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Fecha"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Usuario"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Origen"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Estado"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Acciones"})]})}),l.jsx("tbody",{children:e.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"text-muted small",children:"Sin registros."})}):e.map(I=>{const K=I.created_by_full_name||I.created_by_username||"N/D";return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:I.operation_id}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:S2(I.created_at)}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:K}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:w2(I.origin)}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("span",{className:j2(I.status),children:I.status})}),l.jsx("td",{children:l.jsx("div",{className:"d-flex gap-1 flex-wrap justify-content-end",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-success",onClick:()=>void ge(I.id),children:"Descargar"})})})]},I.id)})})]})}),l.jsxs("div",{className:"d-flex align-items-center justify-content-between mT-10",children:[l.jsxs("div",{className:"small text-muted",children:["Mostrando ",we,"-",Me," de ",s," registros"]}),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>T(I=>Math.max(1,I-1)),disabled:!Te||c,children:"Anterior"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>T(I=>I+1),disabled:!M||c,children:"Siguiente"})]})]})]})]})})})})}function E2(){return l.jsx("div",{className:"container-fluid",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin de Bases Originales"}),l.jsx("p",{className:"text-muted mB-20",children:"Selecciona el modo de consolidacin. Cada modo genera un archivo consolidado para descarga."}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-6 mB-15",children:l.jsx("div",{className:"card h-100",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h5",{className:"card-title",children:"Correlativo"}),l.jsx("p",{className:"card-text text-muted",children:"Ordena por la columna G (correlativo) al consolidar."}),l.jsx(kc,{className:"btn btn-primary",to:"/oi/tools/consolidacion/correlativo",children:"Abrir"})]})})}),l.jsx("div",{className:"col-md-6 mB-15",children:l.jsx("div",{className:"card h-100",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h5",{className:"card-title",children:"No correlativo"}),l.jsx("p",{className:"card-text text-muted",children:"Mantiene el orden original de los archivos al consolidar."}),l.jsx(kc,{className:"btn btn-primary",to:"/oi/tools/consolidacion/no-correlativo",children:"Abrir"})]})})})]})]})})}function C2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function A2(e,a){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(s)}async function O2(e){if(!bt.isAxiosError(e))return String(e);const a=e,s=a.response?.data;if(s instanceof Blob)try{const i=await s.text(),c=JSON.parse(i);return String(c?.detail??i??a.message)}catch{return a.message}return String(s?.detail??a.message)}function R2(){const[e,a]=b.useState(null),[s,i]=b.useState(null),[c,d]=b.useState([]),[f,h]=b.useState(!1),[g,p]=b.useState(""),[v,x]=b.useState(null),[S,$]=b.useState([]),_=b.useRef(null),E=b.useRef(null),O=b.useMemo(()=>!!s&&c.length>0&&!f,[s,c,f]);b.useEffect(()=>{k0().then(a).catch(()=>a(null))},[]);function q(T){$(L=>[T,...L].slice(0,200));const G=typeof T.percent=="number"?T.percent:typeof T.progress=="number"?T.progress:null;G!=null&&Number.isFinite(G)&&x(Math.max(0,Math.min(100,G)))}function D(){_.current?.abort(),_.current=null}function J(){if(!f)return;const T=E.current;T&&U0(T).catch(()=>{}),q({type:"status",stage:"cancelled",message:"Cancelacin solicitada"}),D()}async function z(){if(p(""),$([]),x(0),!s){p("Selecciona el archivo maestro.");return}if(c.length===0){p("Selecciona al menos un archivo de tcnico.");return}const T=new FormData;T.append("master",s);for(const L of c)T.append("technicians",L);const G=crypto.randomUUID();E.current=G,T.append("operation_id",G),_.current=new AbortController,h(!0);try{const L=_.current?.signal;mh(G,q,L).catch(()=>{});const W=await M0(T,"correlativo",L),de=W.headers["content-disposition"],Ae=C2(de)??"consolidado_correlativo.xlsx";A2(W.data,Ae)}catch(L){if(bt.isAxiosError(L)&&L.code==="ERR_CANCELED"||bt.isAxiosError(L)&&(L.response?.headers?.["x-code"]??void 0)?.toUpperCase()==="CANCELLED")return;const W=await O2(L);q({type:"error",stage:"error",detail:W}),p(W)}finally{E.current=null,h(!1),D()}}return l.jsx("div",{className:"container-fluid",children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-7",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin  Correlativo"}),l.jsx("p",{className:"text-muted mB-20",children:"Genera un consolidado ordenando por correlativo (columna G)."}),e&&l.jsxs("div",{className:"alert alert-info",role:"alert",children:["Lmite por archivo: ",l.jsxs("b",{children:[e.max_file_mb,"MB"]}),"  Mx. archivos tcnico:"," ",l.jsx("b",{children:e.max_tech_files})]}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-12 mB-15",children:l.jsx(so,{label:"Archivo maestro (xlsx)",accept:".xlsx",file:s,onChange:i,disabled:f})}),l.jsx("div",{className:"col-12 mB-15",children:l.jsx(bu,{label:"Archivos de tcnicos (xlsx)",title:"Archivos de tcnicos",accept:".xlsx",files:c,setFiles:d,disabled:f})})]}),g&&l.jsx("div",{className:"alert alert-danger mT-10",role:"alert",children:g}),l.jsxs("div",{className:"d-flex gap-10 mT-20",children:[l.jsx("button",{className:"btn btn-primary mT-10",disabled:!O,onClick:z,children:f?"Procesando...":"Procesar y Descargar"}),l.jsx("button",{className:"btn btn-outline-danger mT-10",disabled:!f,onClick:J,children:"Cancelar"})]})]})}),l.jsx("div",{className:"col-md-5",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),f?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress mB-15",style:{height:12},children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${v??0}%`},"aria-valuenow":v??0,"aria-valuemin":0,"aria-valuemax":100})}),l.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:S.length===0?l.jsx("div",{className:"text-muted",children:"Sin eventos an."}):l.jsx("ul",{className:"list-unstyled mB-0",children:S.map((T,G)=>l.jsxs("li",{className:"mB-10",children:[l.jsxs("div",{children:[l.jsx("b",{children:Fl(T.type)})," ",T.stage?l.jsxs("span",{className:"text-muted",children:["[",Gr(T.stage),"]"]}):null]}),l.jsx("div",{className:"text-muted",children:Xl(T.message??T.detail??"")})]},G))})})]})})]})})}function T2(e){if(!e)return null;const a=/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/i.exec(e);return a?.[2]?decodeURIComponent(a[2]):null}function D2(e,a){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(s)}async function z2(e){if(!bt.isAxiosError(e))return String(e);const a=e,s=a.response?.data;if(s instanceof Blob)try{const i=await s.text(),c=JSON.parse(i);return String(c?.detail??i??a.message)}catch{return a.message}return String(s?.detail??a.message)}function k2(){const[e,a]=b.useState(null),[s,i]=b.useState(null),[c,d]=b.useState([]),[f,h]=b.useState(!1),[g,p]=b.useState(""),[v,x]=b.useState(null),[S,$]=b.useState([]),_=b.useRef(null),E=b.useRef(null),O=b.useMemo(()=>!!s&&c.length>0&&!f,[s,c,f]);b.useEffect(()=>{k0().then(a).catch(()=>a(null))},[]);function q(T){$(L=>[T,...L].slice(0,200));const G=typeof T.percent=="number"?T.percent:typeof T.progress=="number"?T.progress:null;G!=null&&Number.isFinite(G)&&x(Math.max(0,Math.min(100,G)))}function D(){_.current?.abort(),_.current=null}function J(){if(!f)return;const T=E.current;T&&U0(T).catch(()=>{}),q({type:"status",stage:"cancelled",message:"Cancelacin solicitada"}),D()}async function z(){if(p(""),$([]),x(0),!s){p("Selecciona el archivo maestro.");return}if(c.length===0){p("Selecciona al menos un archivo de tcnico.");return}const T=new FormData;T.append("master",s);for(const L of c)T.append("technicians",L);const G=crypto.randomUUID();E.current=G,T.append("operation_id",G),_.current=new AbortController,h(!0);try{const L=_.current?.signal;mh(G,q,L).catch(()=>{});const W=await M0(T,"no-correlativo",L),de=W.headers["content-disposition"],Ae=T2(de)??"consolidado_no_correlativo.xlsx";D2(W.data,Ae)}catch(L){if(bt.isAxiosError(L)&&L.code==="ERR_CANCELED"||bt.isAxiosError(L)&&(L.response?.headers?.["x-code"]??void 0)?.toUpperCase()==="CANCELLED")return;const W=await z2(L);q({type:"error",stage:"error",detail:W}),p(W)}finally{E.current=null,h(!1),D()}}return l.jsx("div",{className:"container-fluid",children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-7",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin  No correlativo"}),l.jsx("p",{className:"text-muted mB-20",children:"Genera un consolidado sin ordenar por correlativo (respeta el orden original)."}),e&&l.jsxs("div",{className:"alert alert-info",role:"alert",children:["Lmite por archivo: ",l.jsxs("b",{children:[e.max_file_mb,"MB"]}),"  Mx. archivos tcnico:"," ",l.jsx("b",{children:e.max_tech_files})]}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-12 mB-15",children:l.jsx(so,{label:"Archivo maestro (xlsx)",accept:".xlsx",file:s,onChange:i,disabled:f})}),l.jsx("div",{className:"col-12 mB-15",children:l.jsx(bu,{label:"Archivos de tcnicos (xlsx)",title:"Archivos de tcnicos",accept:".xlsx",files:c,setFiles:d,disabled:f})})]}),g&&l.jsx("div",{className:"alert alert-danger mT-10",role:"alert",children:g}),l.jsxs("div",{className:"d-flex gap-10 mT-20",children:[l.jsx("button",{className:"btn btn-primary mT-10",disabled:!O,onClick:z,children:f?"Procesando...":"Procesar y Descargar"}),l.jsx("button",{className:"btn btn-outline-danger mT-10",disabled:!f,onClick:J,children:"Cancelar"})]})]})}),l.jsx("div",{className:"col-md-5",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),f?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress mB-15",style:{height:12},children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${v??0}%`},"aria-valuenow":v??0,"aria-valuemin":0,"aria-valuemax":100})}),l.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:S.length===0?l.jsx("div",{className:"text-muted",children:"Sin eventos an."}):l.jsx("ul",{className:"list-unstyled mB-0",children:S.map((T,G)=>l.jsxs("li",{className:"mB-10",children:[l.jsxs("div",{children:[l.jsx("b",{children:Fl(T.type)})," ",T.stage?l.jsxs("span",{className:"text-muted",children:["[",Gr(T.stage),"]"]}):null]}),l.jsx("div",{className:"text-muted",children:Xl(T.message??T.detail??"")})]},G))})})]})})]})})}async function Zi(e){if(!bt.isAxiosError(e))return String(e);const a=e,s=a.response?.data;if(s instanceof Blob)try{const i=await s.text(),c=JSON.parse(i);return String(c?.detail??i??a.message)}catch{return a.message}return String(s?.detail??a.message)}function M2(){const[e,a]=b.useState(null),[s,i]=b.useState(""),[c,d]=b.useState(""),[f,h]=b.useState(""),[g,p]=b.useState("ERROR FINAL"),[v,x]=b.useState(""),[S,$]=b.useState("same_password"),[_,E]=b.useState(""),[O,q]=b.useState([{cell:"A1",value:""}]),[D,J]=b.useState(""),[z,T]=b.useState("no_password"),[G,L]=b.useState(""),[W,de]=b.useState("ERROR FINAL"),[Ae,je]=b.useState(1),[ge,we]=b.useState(""),[Me,Te]=b.useState(""),[M,I]=b.useState(""),[K,xe]=b.useState(null),[Se,j]=b.useState(""),[Z,ce]=b.useState(null),[U,ue]=b.useState([]),[be,ze]=b.useState(null),$e=b.useMemo(()=>c.trim().length>0,[c]);function he(pe){ue(Fe=>[pe,...Fe].slice(0,200))}function Le(){j(""),ue([]),ce(0),ze(null)}async function Ie(){if(Le(),!e){j("Selecciona un archivo para subir.");return}xe("upload");try{he({type:"status",stage:"upload",message:"Subiendo archivo..."}),ce(30);const pe=new FormData;pe.append("file",e),s.trim()&&pe.append("suggested_name",s.trim());const Fe=await o2(pe);d(Fe.relative_path),ze(Fe),he({type:"complete",stage:"upload",message:"Archivo subido."}),ce(100)}catch(pe){const Fe=await Zi(pe);j(Fe),he({type:"error",stage:"upload",detail:Fe})}finally{xe(null)}}async function Ze(){if(Le(),!$e){j("Ingresa o sube un archivo para obtener file_path.");return}xe("inspect");try{he({type:"status",stage:"inspect",message:"Inspeccionando..."}),ce(50);const pe=await c2({file_path:c.trim(),open_password:f.trim()||null});ze(pe),he({type:"complete",stage:"inspect",message:"Inspeccin completada."}),ce(100)}catch(pe){const Fe=await Zi(pe);j(Fe),he({type:"error",stage:"inspect",detail:Fe})}finally{xe(null)}}async function mt(){if(Le(),!$e){j("Ingresa o sube un archivo para obtener file_path.");return}if(!g.trim()){j("Ingresa el nombre de la hoja.");return}const pe=O.map(Fe=>({cell:Fe.cell.trim(),value:Fe.value})).filter(Fe=>Fe.cell);if(pe.length===0){j("Agrega al menos una edicin.");return}xe("update");try{he({type:"status",stage:"update",message:"Aplicando ediciones..."}),ce(50);const Fe=await u2({file_path:c.trim(),edits:pe.map(Oe=>({sheet:g.trim(),cell:Oe.cell,value:Oe.value})),open_password:v.trim()||null,save_mode:S,new_password:S==="new_password"&&_.trim()||null});ze(Fe),he({type:"complete",stage:"update",message:"Actualizacin completada."}),ce(100)}catch(Fe){const Oe=await Zi(Fe);j(Oe),he({type:"error",stage:"update",detail:Oe})}finally{xe(null)}}async function ke(){if(Le(),!$e){j("Ingresa o sube un archivo para obtener file_path.");return}if(!D.trim()){j("Ingresa la contrasea de apertura (open_password).");return}if(z==="new_password"&&!G.trim()){j("Ingresa la nueva contrasea.");return}xe("change-password");try{he({type:"status",stage:"change-password",message:"Cambiando contrasea..."}),ce(50);const pe=await d2({file_path:c.trim(),open_password:D.trim(),mode:z,new_password:z==="new_password"?G.trim():null});ze(pe),he({type:"complete",stage:"change-password",message:"Cambio de contrasea completado."}),ce(100)}catch(pe){const Fe=await Zi(pe);j(Fe),he({type:"error",stage:"change-password",detail:Fe})}finally{xe(null)}}async function Ge(){if(Le(),!$e){j("Ingresa o sube un archivo para obtener file_path.");return}let pe={};if(Me.trim())try{pe=JSON.parse(Me)}catch{j("type_rules debe ser JSON vlido.");return}const Fe=ge.split(",").map(Oe=>Oe.trim()).filter(Boolean);xe("validate");try{he({type:"status",stage:"validate",message:"Validando..."}),ce(50);const Oe=await f2({file_path:c.trim(),sheet:W.trim()||null,header_row:Ae,required_columns:Fe,type_rules:pe,open_password:M.trim()||null});ze(Oe),he({type:"complete",stage:"validate",message:"Validacin completada."}),ce(100)}catch(Oe){const We=await Zi(Oe);j(We),he({type:"error",stage:"validate",detail:We})}finally{xe(null)}}return l.jsx("div",{className:"container-fluid",children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-7",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Herramientas Excel"}),l.jsx("p",{className:"text-muted mB-20",children:"Subir archivos, inspeccionar, editar celdas, cambiar contrasea y validar."}),l.jsx("div",{className:"card mB-15",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h6",{className:"card-title",children:"1) Subir archivo (recomendado)"}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-8 mB-10",children:l.jsx("input",{className:"form-control",type:"file",accept:".xlsx,.xlsm",disabled:!!K,onChange:pe=>a(pe.target.files?.[0]??null)})}),l.jsx("div",{className:"col-md-4 mB-10",children:l.jsx("input",{className:"form-control",placeholder:"Nombre sugerido (opcional)",value:s,disabled:!!K,onChange:pe=>i(pe.target.value)})})]}),l.jsx("button",{className:"btn btn-outline-primary",disabled:!!K||!e,onClick:Ie,children:K==="upload"?"Subiendo...":"Subir"})]})}),l.jsxs("div",{className:"mB-15",children:[l.jsx("label",{className:"form-label",children:"file_path"}),l.jsx("input",{className:"form-control",value:c,disabled:!!K,onChange:pe=>d(pe.target.value),placeholder:"Ruta del archivo en el servidor (o la devuelta por Upload)"}),l.jsx("div",{className:"form-text",children:"Si subes el archivo, se llenar automticamente. Tambin puedes pegar una ruta local/red accesible por el servidor."})]}),l.jsx("div",{className:"card mB-15",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h6",{className:"card-title",children:"2) Inspect"}),l.jsxs("div",{className:"row align-items-end",children:[l.jsxs("div",{className:"col-md-8 mB-10",children:[l.jsx("label",{className:"form-label",children:"open_password (opcional)"}),l.jsx("input",{className:"form-control",type:"password",value:f,disabled:!!K,onChange:pe=>h(pe.target.value)})]}),l.jsx("div",{className:"col-md-4 mB-10",children:l.jsx("button",{className:"btn btn-primary w-100",disabled:!!K||!$e,onClick:Ze,children:K==="inspect"?"Inspeccionando...":"Inspect"})})]})]})}),l.jsx("div",{className:"card mB-15",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h6",{className:"card-title",children:"3) Update (editar celdas)"}),l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"Hoja"}),l.jsx("input",{className:"form-control",value:g,disabled:!!K,onChange:pe=>p(pe.target.value)})]}),l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"open_password (opcional)"}),l.jsx("input",{className:"form-control",type:"password",value:v,disabled:!!K,onChange:pe=>x(pe.target.value)})]}),l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"save_mode"}),l.jsxs("select",{className:"form-select",value:S,disabled:!!K,onChange:pe=>$(pe.target.value),children:[l.jsx("option",{value:"same_password",children:"same_password"}),l.jsx("option",{value:"no_password",children:"no_password"}),l.jsx("option",{value:"new_password",children:"new_password"})]})]}),l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"new_password"}),l.jsx("input",{className:"form-control",type:"password",value:_,disabled:!!K||S!=="new_password",onChange:pe=>E(pe.target.value),placeholder:S==="new_password"?"Requerido":""})]})]}),l.jsxs("div",{className:"mT-10",children:[l.jsx("label",{className:"form-label",children:"Ediciones"}),O.map((pe,Fe)=>l.jsxs("div",{className:"row g-2 mB-10",children:[l.jsx("div",{className:"col-md-3",children:l.jsx("input",{className:"form-control",value:pe.cell,disabled:!!K,onChange:Oe=>{const We=O.slice();We[Fe]={...We[Fe],cell:Oe.target.value},q(We)},placeholder:"Celda (A1)"})}),l.jsx("div",{className:"col-md-7",children:l.jsx("input",{className:"form-control",value:pe.value,disabled:!!K,onChange:Oe=>{const We=O.slice();We[Fe]={...We[Fe],value:Oe.target.value},q(We)},placeholder:"Valor"})}),l.jsxs("div",{className:"col-md-2 d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-outline-secondary w-100",disabled:!!K,onClick:()=>q(Oe=>[...Oe,{cell:"A1",value:""}]),children:"+"}),l.jsx("button",{type:"button",className:"btn btn-outline-danger w-100",disabled:!!K||O.length===1,onClick:()=>q(Oe=>Oe.filter((We,A)=>A!==Fe)),children:""})]})]},Fe))]}),l.jsx("button",{className:"btn btn-primary",disabled:!!K||!$e,onClick:mt,children:K==="update"?"Actualizando...":"Update"})]})}),l.jsx("div",{className:"card mB-15",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h6",{className:"card-title",children:"4) Change password"}),l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"open_password"}),l.jsx("input",{className:"form-control",type:"password",value:D,disabled:!!K,onChange:pe=>J(pe.target.value)})]}),l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"mode"}),l.jsxs("select",{className:"form-select",value:z,disabled:!!K,onChange:pe=>T(pe.target.value),children:[l.jsx("option",{value:"no_password",children:"no_password"}),l.jsx("option",{value:"new_password",children:"new_password"})]})]}),l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"new_password"}),l.jsx("input",{className:"form-control",type:"password",value:G,disabled:!!K||z!=="new_password",onChange:pe=>L(pe.target.value),placeholder:z==="new_password"?"Requerido":""})]}),l.jsx("div",{className:"col-md-6 mB-10 d-flex align-items-end",children:l.jsx("button",{className:"btn btn-primary w-100",disabled:!!K||!$e,onClick:ke,children:K==="change-password"?"Procesando...":"Change password"})})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h6",{className:"card-title",children:"5) Validate"}),l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6 mB-10",children:[l.jsx("label",{className:"form-label",children:"sheet (opcional)"}),l.jsx("input",{className:"form-control",value:W,disabled:!!K,onChange:pe=>de(pe.target.value)})]}),l.jsxs("div",{className:"col-md-3 mB-10",children:[l.jsx("label",{className:"form-label",children:"header_row"}),l.jsx("input",{className:"form-control",type:"number",min:1,value:Ae,disabled:!!K,onChange:pe=>je(Number(pe.target.value||1))})]}),l.jsxs("div",{className:"col-md-3 mB-10",children:[l.jsx("label",{className:"form-label",children:"open_password (opcional)"}),l.jsx("input",{className:"form-control",type:"password",value:M,disabled:!!K,onChange:pe=>I(pe.target.value)})]}),l.jsxs("div",{className:"col-12 mB-10",children:[l.jsx("label",{className:"form-label",children:"required_columns (coma separada)"}),l.jsx("input",{className:"form-control",value:ge,disabled:!!K,onChange:pe=>we(pe.target.value),placeholder:"ColA, ColB, ColC"})]}),l.jsxs("div",{className:"col-12 mB-10",children:[l.jsx("label",{className:"form-label",children:"type_rules (JSON, opcional)"}),l.jsx("textarea",{className:"form-control",rows:3,value:Me,disabled:!!K,onChange:pe=>Te(pe.target.value),placeholder:'{"ColA":"int","ColB":"float"}'})]})]}),l.jsx("button",{className:"btn btn-primary",disabled:!!K||!$e,onClick:Ge,children:K==="validate"?"Validando...":"Validate"})]})}),Se&&l.jsx("div",{className:"alert alert-danger mT-15",role:"alert",children:Se})]})}),l.jsx("div",{className:"col-md-5",children:l.jsxs("div",{className:"bgc-white p-20 bd",children:[l.jsxs("h5",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),K?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress mB-15",style:{height:12},children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${Z??0}%`},"aria-valuenow":Z??0,"aria-valuemin":0,"aria-valuemax":100})}),l.jsx("div",{style:{maxHeight:220,overflow:"auto"},children:U.length===0?l.jsx("div",{className:"text-muted",children:"Sin eventos an."}):l.jsx("ul",{className:"list-unstyled mB-0",children:U.map((pe,Fe)=>l.jsxs("li",{className:"mB-10",children:[l.jsxs("div",{children:[l.jsx("b",{children:pe.type})," ",pe.stage?l.jsxs("span",{className:"text-muted",children:["[",pe.stage,"]"]}):null]}),l.jsx("div",{className:"text-muted",children:pe.message??pe.detail??""})]},Fe))})}),l.jsx("hr",{className:"mY-15"}),l.jsx("h6",{className:"c-grey-900 mB-10",children:"Resultado"}),be?l.jsx("pre",{className:"bg-light p-10",style:{maxHeight:360,overflow:"auto"},children:JSON.stringify(be,null,2)}):l.jsx("div",{className:"text-muted",children:"Sin resultado an."})]})})]})})}function U2(){const e=oa(),a=Pr(),{toast:s}=Qr(),i=Ln(),c=Il(i?.role),d=eo(),f=c&&!(d&&d>0),{data:h,isLoading:g,error:p}=Fr({queryKey:["catalogs"],queryFn:th,enabled:f}),v=h?.bancos??[],[x,S]=b.useState(()=>d&&d>0?d:0),[$,_]=b.useState(!1),E=b.useMemo(()=>v.find(J=>J.id===x)?.name??null,[v,x]);b.useEffect(()=>{const D=e.state;D?.toast&&(s({kind:D.toast.kind??"info",title:D.toast.title,message:D.toast.message}),a(e.pathname,{replace:!0,state:{}}))},[e.pathname,e.state,a,s]),b.useEffect(()=>{f&&(x>0||v.length>0&&S(v[0].id))},[x,v,f]);const O=x>0&&!$,q=async()=>{if(O)try{_(!0);const D=await n0(x),J=ym(D.userId,D.bancoId??x);if(J.target){a(J.target,{replace:!0});return}s({kind:"success",title:"Banco",message:E?`Banco seleccionado: ${E}`:"Banco seleccionado."})}catch(D){const J=D?.response?.data?.detail??D?.message??"No se pudo guardar el banco.";s({kind:"error",title:"Banco",message:String(J)})}finally{_(!1)}};return l.jsxs("div",{className:"vi-home",children:[l.jsx("div",{className:"vi-home__banner",style:{backgroundImage:'url("/medileser/banner.jpg")'},role:"img","aria-label":"Medileser"}),f&&l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:l.jsx("div",{className:"modal-dialog modal-dialog-centered",children:l.jsxs("div",{className:"modal-content",children:[l.jsx("div",{className:"modal-header",children:l.jsx("h5",{className:"modal-title",children:"Seleccionar banco"})}),l.jsxs("div",{className:"modal-body",children:[l.jsx("p",{className:"text-muted mb-3",children:"Seleccione el banco de trabajo para continuar."}),l.jsx("label",{className:"form-label",htmlFor:"bankId",children:"Banco"}),l.jsx("select",{id:"bankId",className:"form-select",value:x||"",onChange:D=>S(Number(D.target.value)),disabled:g||$,children:v.map(D=>l.jsx("option",{value:D.id,children:D.name},D.id))}),p?l.jsx("div",{className:"alert alert-danger mt-3 mb-0",role:"alert",children:"No se pudieron cargar los bancos."}):null]}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{type:"button",className:"btn btn-primary",disabled:!O,onClick:q,children:$?"Guardando...":"Continuar"})})]})})})]})}const Gi=(...e)=>{};function L2(e){if(!e)return null;const a=/filename\*=UTF-8''([^;]+)|filename="([^"]+)"/i.exec(e),s=a?.[1]??a?.[2];if(!s)return null;try{return decodeURIComponent(s)}catch{return s}}function B2(e,a){const s=window.URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(s)}async function q2(e,a){let s=null,i=!1;const c=new Promise(d=>{s=window.setTimeout(()=>{i=!0,d()},a)});try{await Promise.race([e,c])}catch{return!1}finally{s!=null&&window.clearTimeout(s)}return!i}function $2(){const[e,a]=b.useState([]),[s,i]=b.useState(""),[c,d]=b.useState([]),[f,h]=b.useState(0),[g,p]=b.useState("Listo para procesar"),[v,x]=b.useState(!1),[S,$]=b.useState(""),[_,E]=b.useState(!1),[O,q]=b.useState(null),[D,J]=b.useState(null),[z,T]=b.useState(!1);function G(R){const Q=R?.series_duplicates_eliminated??R?.detail?.series_duplicates_eliminated??R?.series_duplcates_eliminated;return typeof Q=="number"?Q:null}const L={MISSING_HEADERS:"Faltan cabeceras requeridas",FILE_INVALID:"Archivo invlido",INVALID_OI_FILENAME:"Nombre de archivo invlido",EMPTY_FILE:"Archivo vaco"};function W(R){const Q=String(R??"").trim().toUpperCase();return Q?L[Q]??Q:""}function de(R){if(!R)return"";let Q=Xl(R);Q=Q.replace(/\bERROR\b/gi,"Error");for(const[P,re]of Object.entries(L))Q=Q.replace(new RegExp(`\\b${P}\\b`,"g"),re);return Q}function Ae(R,Q){const P=W(R),re=de(Q);return re?P&&!re.toLowerCase().includes(P.toLowerCase())?`${P}: ${re}`:re:P||"N/D"}function je(R,Q,P){const re=String(P??"").trim();if(re)return re;const Re=Number(R);if(!Number.isFinite(Re)||Re<=0)return"N/D";const Be=Number(Q);return Number.isFinite(Be)&&Be>0?`OI-${String(Re).padStart(4,"0")}-${String(Be).padStart(4,"0")}`:`OI-${String(Re).padStart(4,"0")}`}function ge(R){const Q=R?.rows_total_read??R?.totals_input?.rows_read;return typeof Q=="number"?Q:null}const we=b.useMemo(()=>(Array.isArray(D?.audit_by_oi)?D.audit_by_oi:[]).filter(Q=>Q?.status==="OK"&&String(Q?.source??"").toUpperCase()==="BASES").slice().sort((Q,P)=>{const re=Number(Q?.oi_year),Re=Number(P?.oi_year),Be=Number.isFinite(re)&&re>0,se=Number.isFinite(Re)&&Re>0;if(Be&&se&&re!==Re)return re-Re;if(Be&&!se)return-1;if(!Be&&se)return 1;const Ue=Number(Q?.oi_num),He=Number(P?.oi_num),st=Number.isFinite(Ue),Xt=Number.isFinite(He);if(st&&Xt&&Ue!==He)return Ue-He;if(st&&!Xt)return-1;if(!st&&Xt)return 1;const _e=String(Q?.oi_tag??Q?.oi??Q?.oi_num??"").toUpperCase(),et=String(P?.oi_tag??P?.oi??P?.oi_num??"").toUpperCase();return _e.localeCompare(et)}),[D]),Me=b.useMemo(()=>(Array.isArray(D?.files_rejected)?D.files_rejected:[]).slice().sort((Q,P)=>{const re=String(Q?.oi??Q?.filename??"").toUpperCase(),Re=String(P?.oi??P?.filename??"").toUpperCase();return re.localeCompare(Re)}),[D]),Te=b.useMemo(()=>{const R=()=>({files_total:0,files_ok:0,files_error:0,rows_read:0,conformes:0,no_conformes:0,rows_ignored_invalid_estado:0}),Q=D?.by_source;if(Q&&typeof Q=="object")return Q;const P={BASES:R(),GASELAG:R()},re=Array.isArray(D?.audit_by_oi)?D.audit_by_oi:[];for(const Be of re){if(Be?.status!=="OK")continue;const Ue=String(Be?.source??"").toUpperCase()==="GASELAG"?"GASELAG":"BASES";P[Ue].files_ok+=1,P[Ue].rows_read+=Number(Be?.rows_read??0)||0,P[Ue].conformes+=Number(Be?.conformes??0)||0,P[Ue].no_conformes+=Number(Be?.no_conformes??0)||0,P[Ue].rows_ignored_invalid_estado+=Number(Be?.rows_ignored_invalid_estado??0)||0}const Re=Array.isArray(D?.files_rejected)?D.files_rejected:[];for(const Be of Re){const Ue=String(Be?.source??"").toUpperCase()==="GASELAG"?"GASELAG":"BASES";P[Ue].files_error+=1}for(const Be of["BASES","GASELAG"])P[Be].files_total=P[Be].files_ok+P[Be].files_error;return P},[D]),M=b.useRef(null),I=b.useRef(null),K=b.useRef(null),xe=b.useRef(!1),Se=b.useRef(null),j=b.useRef(null),Z=b.useRef(null),ce=b.useRef(!1),U=b.useRef(!1),ue=b.useRef(-1),be=b.useRef(-1),ze=b.useRef(!1);function $e(){return Se.current||(Se.current=crypto.randomUUID()),Se.current}function he(R){const Q=`${Fl(R.type)}  ${Gr(R.stage)}  ${de(R.message??R.detail??"")}`;if(p(Q),d(P=>{const re=[R,...P];if(!ze.current&&R.stage==="cancelled"){ze.current=!0;const Re=re.filter(He=>He.stage==="file_done"||He.stage==="file_error").length,Be=re.filter(He=>He.stage==="file_done").length,se=re.filter(He=>He.stage==="file_error").length;return[{type:"status",stage:"cancelled",message:`Cancelacin aplicada. Archivos procesados hasta el momento: ${Re} (OK: ${Be}, Rechazados: ${se}). No se gener resultado final.`},...re]}return re}),R.type==="complete"){const P=R.result??null;J(P)}typeof R.progress=="number"&&h(Math.round(R.progress)),typeof R.percent=="number"&&h(Math.round(R.percent)),!xe.current&&(R.type==="complete"||R.stage==="cancelled"||R.stage==="failed")&&(xe.current=!0,R.type==="complete"?(E(!0),q(Se.current)):(E(!1),q(null),Se.current=null),x(!1),mt("terminal_event"),ke())}function Le(R){return typeof R.cursor!="number"?!1:R.cursor<=be.current?!0:(be.current=R.cursor,R.cursor>ue.current&&(ue.current=R.cursor),!1)}function Ie(R){xe.current||Le(R)||he(R)}function Ze(R,Q){const P=new FormData;P.append("operation_id",R),P.append("source","AUTO"),s.trim()&&P.append("output_filename",s.trim());for(const re of Q)P.append("files",re);return P}function mt(R){I.current&&(K.current=R,I.current.abort(),I.current=null)}function ke(R){U.current&&(U.current=!1,j.current!=null&&(window.clearTimeout(j.current),j.current=null),Z.current?.abort(),Z.current=null,ce.current=!1)}function Ge(R){U.current&&(j.current!=null&&window.clearTimeout(j.current),j.current=window.setTimeout(()=>{pe()},R))}async function pe(){if(!U.current||ce.current)return;const R=Se.current;if(!R){ke();return}ce.current=!0;try{const Q=await QT(R,ue.current,Z.current?.signal);Gi("[LOG01] poll cursor =",ue.current,"->",Q.cursor_next),ue.current=Q.cursor_next;for(const P of Q.events)Ie(P);if(Q.done&&Q.events.length===0){ke("done");return}}catch(Q){Q?.name}finally{ce.current=!1,U.current&&Ge(350)}}function Fe(R){U.current||(U.current=!0,Z.current=new AbortController,Ge(0))}function Oe(){M.current?.abort(),M.current=null}async function We(){if(!v)return;const R=Se.current;if(R)try{await KT(R)}catch(Q){const P=Q;bt.isCancel(P)||$(P.response?.data?.detail||P.message||"No se pudo cancelar la operacion")}Oe()}async function A(){$(""),d([]),J(null),h(0),p("Listo para procesar"),E(!1),q(null),K.current=null,xe.current=!1,ze.current=!1,ue.current=-1,be.current=-1,ke();const R=[...e];if(!R.length){$("Debes seleccionar al menos 1 Excel.");return}Se.current=null;const Q=$e();let P=null,re=null;const Re=new Promise((Ue,He)=>{P=Ue,re=He});I.current=new AbortController,M.current=new AbortController,VT(Q,Ue=>{if(Ue.type==="hello"){P&&(P(),P=null);return}Ie(Ue)},I.current.signal).then(()=>{xe.current||Fe()}).catch(Ue=>{Ue?.name==="AbortError"?Gi("[LOG01] progress stream aborted (reason) =",K.current):(re&&(re(Ue),re=null),Fe())}),x(!0);try{await q2(Re,1800)?Gi("[LOG01] hello received"):Fe("hello_timeout");const He=Ze(Q,R);Gi("[LOG01] operation_id(start) =",Q),await PT(He,M.current.signal)}catch(Ue){const He=Ue;if(bt.isCancel(He))return;const st=He.response?.data?.detail||He.message||"Error inesperado";$(st),x(!1),Oe(),mt("start_failed"),ke(),Se.current=null}finally{Oe()}}async function V(){const R=O??Se.current;if(!R){$("No hay resultado disponible.");return}try{$(""),Gi("[LOG01] operation_id(result) =",R);const Q=await YT(R),P=Q.headers["content-disposition"],re=Q.headers["x-file-name"],Re=L2(P)??re??"BD_CONSOLIDADO.xlsx";B2(Q.data,Re)}catch(Q){const P=Q;if(bt.isCancel(P))return;const re=P.response?.data?.detail||P.message||"No se pudo descargar.";$(re)}}return l.jsx("div",{className:"container-fluid",children:l.jsx("div",{className:"row",children:l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Consolidacin Excel"}),S&&l.jsx("div",{className:"alert alert-danger",role:"alert",children:S}),l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-12 mB-15",children:[l.jsx(bu,{label:"Archivos Excel (Bases Comerciales / GASELAG) (xlsx)",title:"Archivos Excel",accept:".xlsx",files:e,setFiles:a,fullDropArea:!0,disabled:v}),l.jsx("div",{className:"small text-muted mT-5",children:"Nota: el sistema identifica el tipo de archivo por cabeceras/contenido (AUTO). No depende del nombre."})]}),l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label mB-0",children:"Nombre de salida (opcional)"}),l.jsx("input",{className:"form-control",value:s,onChange:R=>i(R.target.value),placeholder:"BD_<SERIE_INI>_AL_<SERIE_FIN>.xlsx",disabled:v})]}),l.jsxs("div",{className:"col-md-6 mB-15",children:[l.jsx("label",{className:"form-label mB-0 invisible",children:"Acciones"}),l.jsxs("div",{className:"vi-log01-actions",children:[l.jsx("button",{className:"btn btn-primary btn-sm vi-log01-btn-primary",onClick:A,disabled:v,children:v?"Procesando...":"Consolidar"}),v?l.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>void We(),children:"Cancelar"}):null,!v&&_?l.jsx(l.Fragment,{children:l.jsx("button",{className:"btn btn-outline-success btn-sm",onClick:()=>void V(),children:"Descargar Excel"})}):null]})]})]}),l.jsxs("div",{className:"mT-10",children:[l.jsxs("h6",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),v?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null]}),l.jsx("div",{className:"progress",children:l.jsxs("div",{className:"progress-bar",role:"progressbar",style:{width:`${f}%`},"aria-valuenow":f,"aria-valuemin":0,"aria-valuemax":100,children:[f,"%"]})}),l.jsx("div",{className:"mT-10 text-muted",children:g})]}),!v&&D?l.jsxs("div",{className:"mT-20",children:[l.jsx("h6",{className:"c-grey-900",children:"Reporte de auditora"}),l.jsx("div",{className:"bd p-10",children:l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-md-6",children:[l.jsx("div",{className:"small text-muted",children:"Archivos"}),l.jsxs("div",{className:"small",children:["Total: ",l.jsx("strong",{children:D.files_total??"N/D"}),"  OK:"," ",l.jsx("strong",{children:D.files_ok??"N/D"}),"  Rechazados:"," ",l.jsx("strong",{children:D.files_error??"N/D"})]}),l.jsx("div",{className:"mT-10 small text-muted",children:"Totales por tipo (origen)"}),l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Tipo"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Archivos"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ledos"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ignorados"})]})}),l.jsx("tbody",{children:["BASES","GASELAG"].map(R=>{const Q=Te?.[R]??{},P=Q?.files_total??Number(Q?.files_ok??0)+Number(Q?.files_error??0);return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:R})}),l.jsxs("td",{style:{whiteSpace:"nowrap"},children:[l.jsx("strong",{children:P??0})," ",l.jsxs("span",{className:"text-muted",children:["(OK: ",Q?.files_ok??0,"  Rech: ",Q?.files_error??0,")"]})]}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:Q?.rows_read??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:Q?.conformes??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:Q?.no_conformes??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:Q?.rows_ignored_invalid_estado??0})})]},R)})})]})}),l.jsx("div",{className:"mT-10 small text-muted",children:"No conformes por OI (origen)  BASES"}),we.length>0?l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"OI"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Ledos"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"})]})}),l.jsx("tbody",{children:we.map((R,Q)=>l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:je(R?.oi_num,R?.oi_year,R?.oi_tag??R?.oi)}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:R?.rows_read??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:R?.conformes??0})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:R?.no_conformes??0})})]},Q))})]})}):l.jsx("div",{className:"small text-muted",children:"N/D"}),Number(Te?.GASELAG?.rows_read??0)>0?l.jsxs("div",{className:"mT-10 small",children:[l.jsx("span",{className:"text-muted",children:"GASELAG (origen):"})," ","Ledos: ",l.jsx("strong",{children:Te.GASELAG.rows_read??0}),"  Conformes:"," ",l.jsx("strong",{children:Te.GASELAG.conformes??0}),"  No conformes:"," ",l.jsx("strong",{children:Te.GASELAG.no_conformes??0}),"  Ignorados(estado):"," ",l.jsx("strong",{children:Te.GASELAG.rows_ignored_invalid_estado??0})]}):null,l.jsxs("div",{className:"col-12 mT-10 p-0",children:[l.jsx("div",{className:"small text-muted",children:"Totales (origen)"}),l.jsxs("div",{className:"small",children:["Registros ledos:"," ",l.jsx("strong",{children:D.totals_input?.rows_read??"N/D"}),"  Conformes:"," ",l.jsx("strong",{children:D.totals_input?.conformes??"N/D"}),"  No conformes:"," ",l.jsx("strong",{children:D.totals_input?.no_conformes??"N/D"})]})]})]}),l.jsxs("div",{className:"col-md-6 mT-10 mT-md-0",children:[Me.length>0?l.jsxs("div",{className:"mT-15",children:[l.jsx("div",{className:"small text-muted",children:"Archivos rechazados"}),l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"OI / Archivo"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Motivo"})]})}),l.jsx("tbody",{children:Me.map((R,Q)=>{const P=Ae(R?.code,R?.detail),re=String(R?.source??"").toUpperCase();let Re=R?.filename??"N/D";if(re==="BASES"){const Be=Number(R?.oi_num),se=je(Be,R?.oi_year,R?.oi_tag??R?.oi);se!=="N/D"&&(Re=`${se} / ${Re}`)}else re==="GASELAG"&&(Re=`GASELAG / ${Re}`);return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:Re}),l.jsx("td",{children:P})]},Q)})})]})})]}):null,l.jsx("div",{className:"small text-muted",children:"Resultado final (post-dedupe)"}),l.jsxs("div",{className:"small",children:["nicas (post-dedupe):"," ",l.jsx("strong",{children:D.series_total_dedup??"N/D"}),"  Conformes finales:"," ",l.jsx("strong",{children:D.series_conformes??"N/D"}),"  No conformes finales:"," ",l.jsx("strong",{children:D.series_no_conformes_final??"N/D"})]}),l.jsx("div",{className:"mT-10",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>T(R=>!R),children:z?"Ocultar detalle tcnico":"Ver detalle tcnico"})}),z?l.jsxs("div",{className:"mT-10",children:[l.jsx("div",{className:"small text-muted",children:"Detalle tcnico (soporte)"}),l.jsxs("div",{className:"small",children:["Registros ledos (total):"," ",l.jsx("strong",{children:ge(D)??"N/D"})," "," Duplicados eliminados:"," ",l.jsx("strong",{children:G(D)??"N/D"})," "," nicas = Ledos  Duplicados:"," ",l.jsx("strong",{children:(()=>{const R=ge(D),Q=G(D);if(typeof R=="number"&&typeof Q=="number")return R-Q;const P=D.series_total_dedup;return typeof P=="number"?P:"N/D"})()})]})]}):null]})]})})]}):null,c.length>0&&l.jsxs("div",{className:"mT-20",children:[l.jsx("h6",{className:"c-grey-900",children:"Eventos"}),l.jsx("div",{className:"bd p-10",style:{maxHeight:240,overflow:"auto"},children:c.map((R,Q)=>{const P=String(R.message??""),re=String(R.code??""),Re=String(R.detail??""),Be=de(P||Re||""),se=Be.toLowerCase(),Ue=W(re),He=de(Re),st=[];Ue&&!se.includes(Ue.toLowerCase())&&st.push(Ue),He&&!se.includes(He.toLowerCase())&&st.push(He);const Xt=st.join("  ");return l.jsxs("div",{className:"small",children:[Fl(R.type),"  ",Be,Xt?l.jsxs("span",{className:"text-muted",children:[" (",Xt,")"]}):null]},Q)})})]})]})})})})}const I2="America/Lima";function F2(e){if(!e)return null;const a=/filename\*=UTF-8''([^;]+)|filename="([^"]+)"/i.exec(e),s=a?.[1]??a?.[2];if(!s)return null;try{return decodeURIComponent(s)}catch{return s}}function H2(e,a){const s=window.URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(s)}function V2(e){if(!e)return"N/D";const s=/[zZ]$/.test(e)||/[+-]\d{2}:\d{2}$/.test(e)||/[+-]\d{4}$/.test(e)?e:`${e}Z`,i=new Date(s);if(Number.isNaN(i.getTime()))return String(e);const d=new Intl.DateTimeFormat("es-PE",{timeZone:I2,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(i),f=h=>d.find(g=>g.type===h)?.value||"";return`${f("day")}/${f("month")}/${f("year")} ${f("hour")}:${f("minute")}`}function Xf(e,a){const s=e?.[a];return typeof s=="number"?String(s):"N/D"}function Av(e,a){const s=e?.[a];return typeof s=="string"&&s.trim()?s.trim():"N/D"}function Z2(e){const a=(e||"").toUpperCase();return a==="COMPLETADO"?"badge bg-success":a==="ERROR"?"badge bg-danger":a==="CANCELADO"?"badge bg-warning text-dark":"badge bg-secondary"}function G2(){const e=Pr(),a=Ln(),s=Va(a?.role,a?.username),i=s==="admin"||s==="administrator",[c,d]=b.useState([]),[f,h]=b.useState(0),[g,p]=b.useState(!1),[v,x]=b.useState(""),[S,$]=b.useState(0),[_,E]=b.useState(""),[O,q]=b.useState(""),[D,J]=b.useState(""),[z,T]=b.useState(""),[G,L]=b.useState(""),[W,de]=b.useState(20),[Ae,je]=b.useState(1),[ge,we]=b.useState(()=>({q:"",dateFrom:"",dateTo:"",source:"",status:""})),Me=b.useMemo(()=>(Ae-1)*W,[Ae,W]);b.useEffect(()=>{let U=!1;return p(!0),x(""),Om({limit:W,offset:Me,include_deleted:!1,q:ge.q||void 0,dateFrom:ge.dateFrom||void 0,dateTo:ge.dateTo||void 0,source:ge.source||void 0,status:ge.status||void 0}).then(ue=>{U||(d(Array.isArray(ue?.items)?ue.items:[]),h(typeof ue?.total=="number"?ue.total:0))}).catch(ue=>{if(U)return;const be=ue,ze=be.response?.data?.detail||be.message||"No se pudo cargar historial.";x(ze)}).finally(()=>{U||p(!1)}),()=>{U=!0}},[ge,Me,W,S]);const Te=()=>{we({q:_.trim(),dateFrom:O.trim(),dateTo:D.trim(),source:z.trim(),status:G.trim()}),je(1)},M=()=>{E(""),q(""),J(""),T(""),L(""),we({q:"",dateFrom:"",dateTo:"",source:"",status:""}),je(1),$(U=>U+1)},I=()=>$(U=>U+1),K=async(U,ue)=>{try{x("");const be=await XT(U,ue),ze=be.headers["content-disposition"],$e=be.headers["x-file-name"],he=F2(ze)??$e??`${ue}.bin`;H2(be.data,he)}catch(be){const ze=be;if(bt.isCancel(ze))return;const $e=ze.response?.data?.detail||ze.message||"No se pudo descargar.";x($e)}},xe=async U=>{if(i&&window.confirm("Eliminar la corrida del historial?"))try{x(""),await JT(U),I()}catch(ue){const be=ue;if(bt.isCancel(be))return;const ze=be.response?.data?.detail||be.message||"No se pudo eliminar.";x(ze)}},Se=f===0?0:Me+1,j=f===0?0:Math.min(Me+c.length,f),Z=Ae>1,ce=Me+c.length<f;return l.jsx("div",{className:"container-fluid",children:l.jsx("div",{className:"row",children:l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[l.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between mB-10 gap-10",children:[l.jsx("h4",{className:"c-grey-900 mB-0",children:"Historial de consolidaciones LOG-01"}),l.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>e("/logistica/log01/excel"),children:"Nueva consolidacin"})]}),v?l.jsx("div",{className:"alert alert-danger",role:"alert",children:v}):null,l.jsxs("form",{className:"row g-2 align-items-end",onSubmit:U=>{U.preventDefault(),Te()},children:[l.jsxs("div",{className:"col-md-3",children:[l.jsx("label",{className:"form-label",children:"Buscar"}),l.jsx("input",{className:"form-control form-control-sm",value:_,onChange:U=>E(U.target.value),onKeyDown:U=>{U.key==="Enter"&&Te()},placeholder:"Usuario, serie inicial, serie final..."})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Fecha desde"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:O,onChange:U=>q(U.target.value)})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Fecha hasta"}),l.jsx("input",{type:"date",className:"form-control form-control-sm",value:D,onChange:U=>J(U.target.value)})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Origen"}),l.jsxs("select",{className:"form-select form-select-sm",value:z,onChange:U=>T(U.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"AUTO",children:"AUTO"}),l.jsx("option",{value:"BASES",children:"BASES"}),l.jsx("option",{value:"GASELAG",children:"GASELAG"})]})]}),l.jsxs("div",{className:"col-md-2",children:[l.jsx("label",{className:"form-label",children:"Estado"}),l.jsxs("select",{className:"form-select form-select-sm",value:G,onChange:U=>L(U.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"COMPLETADO",children:"COMPLETADO"}),l.jsx("option",{value:"CANCELADO",children:"CANCELADO"}),l.jsx("option",{value:"ERROR",children:"ERROR"})]})]}),l.jsxs("div",{className:"col-md-1",children:[l.jsx("label",{className:"form-label",children:"Mostrar"}),l.jsxs("select",{className:"form-select form-select-sm",value:W,onChange:U=>{const ue=Number(U.target.value);de(Number.isFinite(ue)?ue:20),je(1)},children:[l.jsx("option",{value:10,children:"10"}),l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"})]})]}),l.jsxs("div",{className:"col-12 d-flex flex-wrap gap-10 mT-5",children:[l.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:g,children:"Buscar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:M,children:"Limpiar filtros"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:I,children:"Recargar"})]})]}),l.jsxs("div",{className:"mT-15",children:[g?l.jsx("div",{className:"text-muted",children:"Cargando historial..."}):l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Fecha"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Usuario"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Estado"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:" Serie inic"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:" Serie fin "}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"nicas"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"No conformes"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Acciones"})]})}),l.jsx("tbody",{children:c.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"text-muted small",children:"Sin registros."})}):c.map(U=>{const ue=U.summary_json,be=Av(ue,"serie_ini"),ze=Av(ue,"serie_fin"),$e=Xf(ue,"series_total_dedup"),he=Xf(ue,"series_conformes"),Le=Xf(ue,"series_no_conformes_final"),Ie=U.created_by_full_name||U.created_by_username||"N/D";return l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:V2(U.created_at)}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:Ie}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("span",{className:Z2(U.status),children:U.status})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:be}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:ze}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:$e})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:he})}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:Le})}),l.jsx("td",{children:l.jsxs("div",{className:"d-flex gap-1 flex-wrap justify-content-end",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-success",onClick:()=>void K(U.id,"excel"),children:"Excel"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void K(U.id,"no-conforme"),children:"No conforme"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void K(U.id,"manifiesto"),children:"Manifiesto"}),i?l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>void xe(U.id),children:"Eliminar"}):null]})})]},U.id)})})]})}),l.jsxs("div",{className:"d-flex align-items-center justify-content-between mT-10",children:[l.jsxs("div",{className:"small text-muted",children:["Mostrando ",Se,"-",j," de ",f]}),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>je(U=>Math.max(1,U-1)),disabled:!Z||g,children:"Anterior"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>je(U=>U+1),disabled:!ce||g,children:"Siguiente"})]})]})]})]})})})})}function kl(e){return e===!0?"badge bg-success":e===!1?"badge bg-danger":"badge bg-secondary"}const Jf=250,Wf="medileser_log02_rutas_v1",Rm="America/Lima",lr=typeof window<"u"&&new URLSearchParams(window.location.search).get("debugProgress")==="1",P2="[log02-copy-progress]",Ov=2e3,Q2=500;function rr(...e){lr&&console.log(P2,...e)}function Rv(e){if(!e)return"N/D";const s=/[zZ]$/.test(e)||/[+-]\d{2}:\d{2}$/.test(e)||/[+-]\d{4}$/.test(e)?e:`${e}Z`,i=new Date(s);if(Number.isNaN(i.getTime()))return String(e);const d=new Intl.DateTimeFormat("es-PE",{timeZone:Rm,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(i),f=h=>d.find(g=>g.type===h)?.value||"";return`${f("day")}/${f("month")}/${f("year")} ${f("hour")}:${f("minute")}`}function Tv(e){const a=e,s=String(a?.name||""),i=String(a?.message||a||"");return s==="AbortError"||/aborted/i.test(i)||/abort/i.test(i)}function Y2(e){const a=e;if(!a)return!1;const s=(a.tagName||"").toLowerCase();return!!(s==="input"||s==="textarea"||s==="select"||a.isContentEditable)}async function Pi(e){const a=(e||"").trim();if(a)try{await navigator.clipboard.writeText(a);return}catch{const s=document.createElement("textarea");s.value=a,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)}}function K2(){const[e,a]=b.useState([""]),[s,i]=b.useState(""),[c,d]=b.useState(!1),[f,h]=b.useState(""),[g,p]=b.useState(null),[v,x]=b.useState(!1),[S,$]=b.useState(!1),[_,E]=b.useState(!1),[O,q]=b.useState(""),[D,J]=b.useState([]),[z,T]=b.useState(null),[G,L]=b.useState(""),[W,de]=b.useState(""),[Ae,je]=b.useState(""),[ge,we]=b.useState(""),[Me,Te]=b.useState("COMPLETADO"),[M,I]=b.useState(!1),[K,xe]=b.useState(""),[Se,j]=b.useState(0),[Z,ce]=b.useState(""),[U,ue]=b.useState(""),[be,ze]=b.useState(""),[$e,he]=b.useState([]),[Le,Ie]=b.useState([]),[Ze,mt]=b.useState(null),ke=b.useRef(null),Ge=b.useRef(!1),pe=b.useRef(!1),Fe=b.useRef(null),Oe=b.useRef(null),We=b.useRef(!1),A=b.useRef(!1),V=b.useRef(-1),R=b.useRef(-1),Q=b.useRef(""),P=b.useRef(null),re=b.useRef(!1),Re=b.useRef(""),Be=b.useRef(0),se=b.useRef(!0),Ue=b.useRef(""),[He,st]=b.useState(!1),[Xt,_e]=b.useState("origen"),[et,Ft]=b.useState(null),[At,Rn]=b.useState([]),[Hn,Ra]=b.useState(""),[an,it]=b.useState(""),[Xn,qn]=b.useState([]),[Gt,Vn]=b.useState(!1),[Zn,Y]=b.useState(""),[X,Ee]=b.useState(""),[Ve,rt]=b.useState(""),[ut,Xe]=b.useState(""),[Ot,Rt]=b.useState(1),[kt,sn]=b.useState(!1),[Nt,ot]=b.useState([]),lt=b.useMemo(()=>{const C=Ve.trim().toLocaleLowerCase();return C?Xn.filter(ne=>(ne.name||"").toLocaleLowerCase().includes(C)):Xn},[Xn,Ve]);b.useEffect(()=>{if(!He)return;if(!lt.length){X&&Ee("");return}X&&lt.some(ne=>ne.path===X)||Ee(lt[0].path)},[He,lt,X]),b.useEffect(()=>{try{const C=localStorage.getItem(Wf);if(!C)return;const ne=JSON.parse(C),ie=Array.isArray(ne.origenes)?ne.origenes:[],ye=typeof ne?.destino=="string"?ne.destino:"",Pe=typeof ne?.run_id=="number"?ne.run_id:null;ie.length&&a(ie),ye&&i(ye),Pe!==null&&T({id:Pe})}catch{}},[]),b.useEffect(()=>{try{const C={origenes:e,destino:s,run_id:z?.id??null};localStorage.setItem(Wf,JSON.stringify(C))}catch{}},[e,s,z?.id]),b.useEffect(()=>(se.current=!0,()=>{se.current=!1,Ue.current="",Mt("unmount"),Wn("unmount")}),[]);function Ht(){a([""]),i(""),p(null),h(""),x(!1),T(null),mt(null),he([]),Ie([]),ue(""),ce(""),j(0),ze(""),xe(""),Rt(1),ot([]),sn(!1);try{localStorage.removeItem(Wf)}catch{}}function pn(){a(C=>{const ne=new Set,ie=[];for(const ye of C){const Pe=(ye||"").trim();if(!Pe)continue;const _t=Pe.toLowerCase();ne.has(_t)||(ne.add(_t),ie.push(Pe))}return ie.length?ie:[""]})}function Tn(){x(!0),Ft(null),$n("origen")}function Nn(C){x(!0),Ft(C),$n("origen")}function gn(){x(!0),Ft(null),$n("destino")}async function Vt(C=5){q(""),E(!0);try{const ne=await Om({limit:C,offset:0,include_deleted:!1,status:"COMPLETADO"}),ie=Array.isArray(ne?.items)?ne.items:[];if(J(ie),!z?.id&&ie.length)T(ie[0]);else if(z?.id&&ie.length){const ye=ie.find(Pe=>Pe.id===z.id);ye&&T(ye)}}catch(ne){const ie=ne,ye=ie.response?.data?.detail||ie.message||"No se pudo cargar las corridas.";q(ye),J([])}finally{E(!1)}}async function Gn(){q(""),E(!0);try{const C=await Om({limit:20,offset:0,include_deleted:!1,q:G.trim()||void 0,dateFrom:W.trim()||void 0,dateTo:Ae.trim()||void 0,source:ge.trim()||void 0,status:Me.trim()||void 0}),ne=Array.isArray(C?.items)?C.items:[];J(ne)}catch(C){const ne=C,ie=ne.response?.data?.detail||ne.message||"No se pudo cargar las corridas.";q(ie),J([])}finally{E(!1)}}function cn(){$(!0),Vt(5)}function Sn(C){T(C),$(!1),Rt(ne=>ne<3?3:ne)}const Dn=b.useMemo(()=>e.map(C=>(C??"").trim()),[e]),bn=b.useMemo(()=>Dn.filter(C=>C),[Dn]),yt=b.useMemo(()=>(s??"").trim(),[s]),ds=b.useMemo(()=>bn.length>0&&!!yt,[bn.length,yt]);function xa(C,ne){a(ie=>{const ye=ie.slice();return ye[C]=ne,ye})}function jn(C){a(ne=>{if(ne.length<=1)return[""];const ie=ne.slice();return ie.splice(C,1),ie})}b.useEffect(()=>{if(!He)return;function C(ie){try{const ye=document.querySelector(`[data-folder-idx="${ie}"]`);ye&&(ye.focus(),ye.scrollIntoView({block:"nearest"}))}catch{}}const ne=ie=>{if(ie.key==="Escape"){ie.preventDefault(),st(!1);return}if(!Y2(ie.target)){if(ie.key==="ArrowDown"||ie.key==="ArrowUp"){if(!lt.length)return;ie.preventDefault();const ye=lt.findIndex(F=>F.path===X),Pe=ye>=0?ye:0,_t=ie.key==="ArrowDown"?Math.min(lt.length-1,Pe+1):Math.max(0,Pe-1),w=lt[_t];if(!w)return;Ee(w.path),requestAnimationFrame(()=>C(_t));return}if(ie.key==="Enter"){if(!X)return;const ye=lt.find(Pe=>Pe.path===X);if(!ye)return;ie.preventDefault(),zn(ye.path);return}}};return window.addEventListener("keydown",ne),()=>window.removeEventListener("keydown",ne)},[He,X,Gt]);async function $n(C){_e(C),Y(""),st(!0),rt("");try{const ie=(await WT()).roots||[];Rn(ie);const ye=ie[0]||"";Ra(ye),it(ye),Xe(ye),ye?await zn(ye):(qn([]),Y("No hay rutas raz configuradas para el explorador. Configure VI_LOG02_UNC_ROOTS en el servidor."))}catch(ne){const ie=ne,ye=ie.response?.data?.detail||ie.message||"No se pudo cargar las rutas raz.";Y(ye),qn([])}}async function zn(C){if(Y(""),!C){qn([]);return}try{Vn(!0),Ee("");const ne=await e2(C);it(ne.path),Xe(ne.path);const ie=ne.folders||[];qn(ie),Ee(ie[0]?.path||"")}catch(ne){const ie=ne,ye=ie.response?.data?.detail||ie.message||"No se pudo listar la carpeta.";Y(ye),qn([])}finally{Vn(!1)}}function Ds(C){const ne=(C||"").replace(/[\\\/]+$/,""),ie=ne.startsWith("\\\\"),ye=ne.split("\\").filter(w=>w.length>0);if(ye.length===0)return[];const Pe=[];if(ie){const w=ye[0]||"",F=ye[1]||"";if(w){const fe=`\\\\${w}`;Pe.push({label:`\\\\${w}`,path:fe})}if(w&&F){let fe=`\\\\${w}\\${F}`;Pe.push({label:F,path:fe});for(let De=2;De<ye.length;De++)fe=`${fe}\\${ye[De]}`,Pe.push({label:ye[De],path:fe})}return Pe}let _t=ye[0];Pe.push({label:ye[0],path:ye[0]});for(let w=1;w<ye.length;w++)_t=`${_t}\\${ye[w]}`,Pe.push({label:ye[w],path:_t});return Pe}async function Ta(){const C=(ut||"").trim();C&&await zn(C)}async function fs(){const C=(an||"").trim();C&&await Pi(C)}function rn(){const C=(an||"").replace(/[\\\/]+$/,""),ne=C.lastIndexOf("\\");if(ne<=0)return;const ie=C.slice(0,ne);zn(ie)}function Na(C){const ne=(C??an??"").trim();ne&&(Xt==="destino"?i(ne):a(ie=>{const ye=ne.trim();if(!ye)return ie;const Pe=ie.slice();return et!==null&&et>=0&&et<Pe.length?(Pe[et]=ye,Pe):Pe.map(w=>(w||"").trim().toLowerCase()).includes(ye.toLowerCase())?Pe:Pe.length===1&&!(Pe[0]||"").trim()?[ye]:[...Pe,ye]}),Ft(null),st(!1))}function Jn(){const C=(an||"").trim();C&&Na(C)}async function un(){h(""),p(null),x(!0);const C=yt,ne=bn;if(!ne.length){h("Debes ingresar al menos una ruta de origen.");return}if(!C){h("Debes ingresar una ruta de destino.");return}try{d(!0);const ie=await t2({rutas_origen:ne,ruta_destino:C});p(ie),ie.ok?Rt(ye=>ye<2?2:ye):h("Validacin incompleta: revisa los detalles de permisos y existencia.")}catch(ie){const ye=ie;if(bt.isCancel(ye))return;const Pe=ye.response?.data?.detail||ye.message||"No se pudo validar las rutas.";h(Pe)}finally{d(!1)}}const fr=b.useMemo(()=>!!g?.ok&&!!z?.id&&!M,[g?.ok,z?.id,M]);b.useEffect(()=>{Rt(C=>M||g?.ok&&z?.id&&C<3?3:g?.ok&&!z?.id&&C<2?2:C)},[g?.ok,z?.id,M]);function Xr(C){const ne=C?.cursor;if(typeof ne=="number"&&Number.isFinite(ne))return ne;if(typeof ne=="string"){const ie=Number(ne);if(Number.isFinite(ie))return ie}return null}function mr(C){return C==null?!1:C<=R.current?!0:(R.current=C,C>V.current&&(V.current=C),!1)}function hr(C){const ne=C?.progress??C?.percent,ie=typeof ne=="number"?ne:typeof ne=="string"?Number(ne):NaN;if(Number.isFinite(ie)){const ye=Math.max(0,Math.min(100,ie));j(Pe=>(lr&&Pe!==ye&&rr("setCopyProgress",{prev:Pe,next:ye}),ye))}}function ms(C){const ne=String(C?.type||"");if(hr(C),ne==="status"||ne==="progress"){const ie=C?.stage?String(C.stage):ne;if(ie&&ce(ie),typeof C?.message=="string"&&C.message&&ue(C.message),ie){const ye=ie.toLowerCase();(ye==="cancelado"||ye==="cancelled")&&(Ge.current=!0,Ue.current="",I(!1),Mt("cancelled"),Wn("cancelled"))}return}if(ne==="oi"){typeof C?.oi=="string"&&ze(C.oi);return}if(ne==="oi_warn"){const ie=String(C?.oi||""),ye=String(C?.message||""),Pe=C?.code?String(C.code):void 0;ie&&ye&&he(_t=>[..._t,{oi:ie,code:Pe,message:ye}]);return}if(ne==="oi_error"||ne==="file_error"){const ie=C?.oi?String(C.oi):void 0,ye=C?.file?String(C.file):void 0,Pe=String(C?.message||"Error");Ie(_t=>[..._t,{oi:ie,file:ye,message:Pe}]);return}if(ne==="error"){const ie=String(C?.message||"Fallo en el proceso.");Ie(ye=>[...ye,{message:ie}]),ue(ie),ce("error"),I(!1),Mt("error_event"),Wn("error_event");return}if(ne==="complete"){pe.current=!0,typeof C?.message=="string"&&ue(C.message),ce("completado"),j(100),mt(C?.audit??null),I(!1),Mt("complete"),Wn("complete");return}}function zs(C,ne="stream"){const ie=Xr(C),ye=String(C?.type||""),Pe=C?.stage?String(C.stage):"";lr&&rr("event",{source:ne,type:ye,stage:Pe,progress:C?.progress,percent:C?.percent,cursor:ie});const _t=R.current;if(mr(ie)){lr&&rr("skip_event",{source:ne,cursor:ie,lastCursor:_t});return}if(ms(C),ye==="status"||ye==="progress"||ye==="oi"||ye==="oi_warn"||ye==="oi_error"||ye==="file_error"||ye==="error"||ye==="complete"){const F=typeof C?.message=="string"?C.message:void 0,fe=typeof Pe=="string"&&Pe?za(Pe):void 0,De=typeof C?.oi=="string"?C.oi:void 0,at=C?.progress??C?.percent,Et=typeof at=="number"?at:typeof at=="string"?Number(at):NaN,ht=Number.isFinite(Et)?Math.max(0,Math.min(100,Et)):void 0;ot(dn=>{const kn=[...dn,{ts:Date.now(),source:ne,type:ye,stage:fe,message:F,oi:De,progress:ht}];return kn.length>Jf&&kn.splice(0,kn.length-Jf),kn})}}function Mt(C){if(lr&&rr("stop_polling",{reason:C,operationId:Q.current}),!!A.current){A.current=!1,Fe.current!=null&&(window.clearTimeout(Fe.current),Fe.current=null);try{Oe.current?.abort()}catch{}Oe.current=null,We.current=!1,Q.current=""}}function ks(){P.current!=null&&(window.clearTimeout(P.current),P.current=null)}function Ya(C){lr&&rr("stream_closed",{reason:C,operationId:Re.current}),re.current=!1,Re.current="",ks()}function Wn(C){lr&&rr("stop_stream",{reason:C,operationId:Re.current}),Ya(C);try{ke.current?.abort()}catch{}ke.current=null}function Da(C){re.current&&(ks(),P.current=window.setTimeout(()=>{if(!re.current)return;const ne=Date.now()-Be.current;if(ne>=Ov){rr("stream_silent_fallback",{idleMs:ne,operationId:C}),Wn("stream_silent"),!pe.current&&!Ge.current&&gr(C,"stream_silent");return}Da(C)},Ov))}function Jr(C){Be.current=Date.now(),re.current&&Da(C)}function pr(C){A.current&&(Fe.current!=null&&window.clearTimeout(Fe.current),Fe.current=window.setTimeout(()=>{ss()},C))}async function ss(){if(!A.current||We.current)return;const C=Q.current;if(!C){Mt("no_operation_id");return}if(Ue.current!==C){Mt("operation_mismatch");return}We.current=!0;try{const ne=await s2(C,V.current,Oe.current?.signal);V.current=ne.cursor_next;for(const ie of ne.events||[])zs(ie,"poll");if(ne.done&&(!ne.events||ne.events.length===0)){Mt("done");return}}catch(ne){if(Ge.current||pe.current)return;if(ne?.name!=="AbortError"){const ye=ne,Pe=ye.response?.data?.detail||ye.message||"No se pudo leer el progreso.";Ie(_t=>[..._t,{message:Pe}]),ce("error"),ue(Pe),I(!1),Mt("poll_error")}}finally{We.current=!1,A.current&&pr(Q2)}}function gr(C,ne){Ue.current===C&&(A.current||(A.current=!0,Q.current=C,Oe.current=new AbortController,V.current=Math.max(V.current,R.current),lr&&rr("start_polling",{operationId:C,reason:ne}),pr(0)))}async function Wr(){if(h(""),!g?.ok){h("Debes validar rutas correctamente antes de iniciar el copiado.");return}if(!z?.id){h("Debes seleccionar una corrida de LOG-01 (Historial) para usar su manifiesto.");return}const C=bn,ne=yt;if(!C.length||!ne){h("Completa orgenes y destino antes de iniciar.");return}Ge.current=!1,pe.current=!1,Ie([]),he([]),mt(null),ce("inicio"),ue("Iniciando copiado..."),j(0),ze(""),xe(""),ot([]),sn(!1),Wn("reset"),Mt("reset"),Ue.current="",V.current=-1,R.current=-1,I(!0);try{const ye=(await n2({run_id:z.id,rutas_origen:C,ruta_destino:ne})).operation_id;xe(ye),Ue.current=ye;const Pe=new AbortController;ke.current=Pe,re.current=!0,Re.current=ye,Be.current=Date.now(),Da(ye),a2(ye,w=>{se.current&&Ue.current===ye&&(Jr(ye),zs(w,"stream"))},Pe.signal).then(()=>{Ue.current===ye&&(Ya("stream_closed"),!pe.current&&!Ge.current&&gr(ye,"stream_closed"))}).catch(w=>{if(Ue.current===ye){if(Tv(w)||Ge.current||pe.current){Ya("stream_aborted");return}Ya("stream_error"),gr(ye,"stream_error")}})}catch(ie){if(Ge.current||pe.current||Tv(ie))return;const ye=ie,Pe=ye.response?.data?.detail||ye.message||"No se pudo iniciar/leer el progreso.";Ie(_t=>[..._t,{message:Pe}]),ce("error"),ue(Pe),Wn("start_error"),Mt("start_error"),I(!1)}}async function br(){if(K){Ge.current=!0,Ue.current="";try{await r2(K)}catch{}try{ke.current?.abort()}catch{}Wn("user_cancel"),Mt("user_cancel"),I(!1),ce("cancelado"),ue("Cancelado por el usuario.")}}const Ka=b.useMemo(()=>{if(!g)return null;const C=(g.origenes||[]).filter(ye=>ye.existe&&ye.lectura).length,ne=(g.origenes||[]).length,ie=!!(g.destino?.existe&&g.destino?.es_directorio&&g.destino?.lectura&&g.destino?.escritura);return{okOrigenes:C,totalOrigenes:ne,okDestino:ie}},[g]);async function Wl(){if(!g)return;const C=[];C.push("LOG-02 - Resultado de validacin"),C.push("");for(const ye of g.origenes||[])C.push(`ORIGEN | ${ye.ruta} | existe=${ye.existe?"SI":"NO"} | lectura=${ye.lectura?"SI":"NO"} | detalle=${ye.detalle||""}`);const ne=g.destino;C.push(`DESTINO | ${ne?.ruta||""} | existe=${ne?.existe?"SI":"NO"} | lectura=${ne?.lectura?"SI":"NO"} | escritura=${ne?.escritura?"SI":"NO"} | detalle=${ne?.detalle||""}`);const ie=C.join(`
`);await Pi(ie)}async function ei(){const C=[];C.push("LOG-02 - Estado de copiado (PB-LOG-015)"),C.push(`operation_id: ${K||"N/D"}`),C.push(`progreso: ${Number.isFinite(Se)?Se.toFixed(0):"0"}%`),C.push(`estado: ${Z||""}`),be&&C.push(`OI: ${be}`),U&&C.push(`mensaje: ${U}`),await Pi(C.join(`
`))}function Ms(C){const ne=String(C||""),ie=ne.match(/(\d+)\s*\/\s*(\d+)\s*PDFs?/i),ye=ne.match(/(\d+)\s*\/\s*(\d+)\s*(?:OIs?|OI)/i)||ne.match(/\b(\d+)\s*\/\s*(\d+)\b/),Pe=ie?{done:Number(ie[1]),total:Number(ie[2])}:null,_t=ye?{done:Number(ye[1]),total:Number(ye[2])}:null;return{pdf:Pe,oi:_t}}const Jt=b.useMemo(()=>{const C=Ms(U||"");return{pdfDone:C.pdf?.done,pdfTotal:C.pdf?.total,oiDone:C.oi?.done,oiTotal:C.oi?.total}},[U]);function za(C){const ne=(C||"").trim();return ne?Gr?Gr(ne):ne:""}async function yr(){const C=[];C.push("LOG-02 - Detalle en vivo (ltimos eventos)"),C.push("");for(const ie of Nt.slice(-80)){const Pe=new Date(ie.ts).toLocaleString("es-PE",{timeZone:Rm,hour12:!1});C.push(`${Pe} | ${ie.source} | ${ie.type}${ie.stage?` | ${ie.stage}`:""}${ie.oi?` | oi=${ie.oi}`:""}${typeof ie.progress=="number"?` | ${Math.round(ie.progress)}%`:""}${ie.message?` | ${ie.message}`:""}`)}const ne=C.join(`
`);try{await navigator.clipboard.writeText(ne)}catch{try{const ie=document.createElement("textarea");ie.value=ne,document.body.appendChild(ie),ie.select(),document.execCommand("copy"),document.body.removeChild(ie)}catch{}}}const aa=!!g?.ok,sa=!!g?.ok&&!!z?.id;function Xa(C){C===2&&!aa||C===3&&!sa||Rt(C)}const vr=g?.ok?z?.id?"":"Falta seleccionar corrida":"Falta validar rutas";return l.jsxs("div",{className:"container-fluid",children:[l.jsx("div",{className:"row",children:l.jsxs("div",{className:"col-12",children:[l.jsxs("div",{className:"bd bgc-white p-20 mB-20",children:[l.jsx("h4",{className:"c-grey-900 mB-10",children:"Filtrado de certificados PDF (LOG-02)"}),l.jsxs("div",{className:"text-muted small",children:["Este mdulo se orienta a ",l.jsx("strong",{children:"copiar"})," y ",l.jsx("strong",{children:"filtrar"})," certificados PDF desde una",l.jsx("strong",{children:" carpeta compartida"})," (no ZIP).",l.jsx("br",{}),"Configura las rutas UNC y valida accesos antes de iniciar el filtrado."]}),f?l.jsx("div",{className:"alert alert-danger mT-15",role:"alert",children:f}):null,l.jsxs("div",{className:"vi-wizard-header mT-15",children:[l.jsxs("ul",{className:"nav nav-pills vi-stepper",role:"tablist","aria-label":"Flujo LOG-02",children:[l.jsx("li",{className:"nav-item",role:"presentation",children:l.jsxs("button",{type:"button",className:"nav-link "+(Ot===1?"active":""),onClick:()=>Xa(1),children:[l.jsx("span",{className:"vi-step-num",children:"1"})," Rutas"]})}),l.jsx("li",{className:"nav-item",role:"presentation",children:l.jsxs("button",{type:"button",className:"nav-link "+(Ot===2?"active":""),onClick:()=>Xa(2),disabled:!aa,title:aa?"":"Primero valida rutas",children:[l.jsx("span",{className:"vi-step-num",children:"2"})," Corrida LOG-01"]})}),l.jsx("li",{className:"nav-item",role:"presentation",children:l.jsxs("button",{type:"button",className:"nav-link "+(Ot===3?"active":""),onClick:()=>Xa(3),disabled:!sa,title:sa?"":"Falta validar rutas o elegir corrida",children:[l.jsx("span",{className:"vi-step-num",children:"3"})," Ejecucin"]})})]}),l.jsxs("div",{className:"small text-muted mT-5",children:["Flujo recomendado: ",l.jsx("strong",{children:"1) Validar rutas"}),"  ",l.jsx("strong",{children:"2) Elegir corrida"})," "," ",l.jsx("strong",{children:"3) Iniciar copiado"}),"."]})]}),l.jsxs("div",{className:"accordion vi-wizard mT-15",id:"log02Wizard",children:[l.jsxs("div",{className:"accordion-item",children:[l.jsx("h2",{className:"accordion-header",id:"log02Step1Head",children:l.jsx("button",{className:"accordion-button "+(Ot===1?"":"collapsed"),type:"button",onClick:()=>Xa(1),children:l.jsxs("span",{className:"d-inline-flex align-items-center gap-10",children:[l.jsx("span",{className:"vi-step-num",children:"1"}),l.jsx("span",{className:"vi-step-title",children:"Rutas UNC"}),g?.ok?l.jsx("span",{className:"badge bg-success",children:"OK"}):g?l.jsx("span",{className:"badge bg-danger",children:"Revisar"}):l.jsx("span",{className:"badge bg-secondary",children:"Pendiente"})]})})}),l.jsx("div",{id:"log02Step1",className:"accordion-collapse collapse "+(Ot===1?"show":""),"aria-labelledby":"log02Step1Head","data-bs-parent":"#log02Wizard",children:l.jsx("div",{className:"accordion-body",children:l.jsxs("div",{className:"row g-3",children:[l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"vi-card",children:[l.jsx("h6",{className:"c-grey-900 mB-10",children:"Rutas UNC"}),l.jsxs("div",{className:"row g-2",children:[l.jsxs("div",{className:"col-12",children:[l.jsx("label",{className:"form-label",children:"Rutas origen (UNC)  lectura"}),e.map((C,ne)=>l.jsx("div",{className:"mB-10",children:l.jsxs("div",{className:"d-flex gap-10 align-items-center",children:[l.jsxs("div",{className:"flex-grow-1",children:[l.jsx("input",{className:"form-control form-control-sm"+(v&&!Dn[ne]?" is-invalid":""),value:C,onChange:ie=>xa(ne,ie.target.value),placeholder:"\\\\SERVIDOR\\Compartido\\Certificados",disabled:c}),v&&!Dn[ne]?l.jsx("div",{className:"small text-danger mT-5",children:"Requerido"}):null]}),l.jsxs("div",{className:"btn-group",role:"group","aria-label":"Acciones origen",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void Pi((C||"").trim()),disabled:c||!(C||"").trim(),title:"Copiar ruta",style:{minWidth:84},children:"Copiar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>Nn(ne),disabled:c,title:"Elegir carpeta",style:{minWidth:84},children:(C||"").trim()?"Editar":"Agregar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>jn(ne),disabled:c,title:"Quitar ruta",style:{minWidth:52},children:""})]})]})},ne)),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:Tn,disabled:c,title:"Agregar origen",children:"Agregar origen"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:pn,disabled:c,title:"Quitar duplicados (solo UI)",children:"Quitar duplicados"})]}),l.jsxs("div",{className:"small text-muted",children:["Nota: estas rutas deben ser accesibles ",l.jsx("strong",{children:"desde el servidor"})," donde corre el backend."]})]}),l.jsxs("div",{className:"col-12",children:[l.jsx("label",{className:"form-label",children:"Ruta destino (UNC)  lectura y escritura"}),l.jsxs("div",{className:"d-flex gap-10 mB-10",children:[l.jsxs("div",{className:"flex-grow-1",children:[l.jsx("input",{className:"form-control form-control-sm "+(v&&!yt?"is-invalid":""),value:s,onChange:C=>i(C.target.value),placeholder:"\\\\SERVIDOR\\Compartido\\Salida_LOG02",disabled:c}),v&&!yt?l.jsx("div",{className:"small text-danger mT-5",children:"Destino requerido."}):null]}),l.jsxs("div",{className:"btn-group",role:"group","aria-label":"Acciones destino",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void Pi(yt),disabled:c||!yt,title:"Copiar ruta",style:{minWidth:84},children:"Copiar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:gn,disabled:c,title:"Elegir carpeta",style:{minWidth:84},children:yt?"Editar":"Agregar"})]})]}),l.jsxs("div",{className:"mT-5",children:[l.jsx("div",{className:"small text-muted mB-5",children:ds?"Listo para validar.":"Completa orgenes y destino."}),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>void un(),disabled:c||!ds,children:c?"Validando...":"Validar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:Ht,disabled:c,title:"Limpia orgenes y destino",children:"Limpiar rutas"})]})]})]})]})]})}),l.jsx("div",{className:"col-12",children:g?l.jsxs("div",{className:"vi-card",children:[l.jsx("h6",{className:"c-grey-900 mB-10",children:"Resultado de validacin"}),Ka?l.jsxs("div",{className:"d-flex flex-wrap gap-10 align-items-center mB-10",children:[l.jsxs("span",{className:"badge bg-light text-dark",children:["Orgenes OK: ",l.jsx("strong",{children:Ka.okOrigenes})," / ",Ka.totalOrigenes]}),l.jsxs("span",{className:Ka.okDestino?"badge bg-success":"badge bg-danger",children:["Destino: ",Ka.okDestino?"OK":"No OK"]}),g.ok?null:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void Wl(),children:"Copiar detalle"})]}):null,l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Tipo"}),l.jsx("th",{children:"Ruta"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Existe"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Lectura"}),l.jsx("th",{style:{whiteSpace:"nowrap"},children:"Escritura"}),l.jsx("th",{children:"Detalle"})]})}),l.jsxs("tbody",{children:[g.origenes.map((C,ne)=>l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:"Origen"})}),l.jsx("td",{style:{wordBreak:"break-all"},children:C.ruta||"N/D"}),l.jsx("td",{children:l.jsx("span",{className:kl(C.existe),children:C.existe?"S":"No"})}),l.jsx("td",{children:l.jsx("span",{className:kl(C.lectura),children:C.lectura?"S":"No"})}),l.jsx("td",{children:l.jsx("span",{className:kl(null),children:""})}),l.jsx("td",{children:C.detalle||""})]},`o-${ne}`)),l.jsxs("tr",{className:"small",children:[l.jsx("td",{style:{whiteSpace:"nowrap"},children:l.jsx("strong",{children:"Destino"})}),l.jsx("td",{style:{wordBreak:"break-all"},children:g.destino.ruta||"N/D"}),l.jsx("td",{children:l.jsx("span",{className:kl(g.destino.existe),children:g.destino.existe?"S":"No"})}),l.jsx("td",{children:l.jsx("span",{className:kl(g.destino.lectura),children:g.destino.lectura?"S":"No"})}),l.jsx("td",{children:l.jsx("span",{className:kl(!!g.destino.escritura),children:g.destino.escritura?"S":"No"})}),l.jsx("td",{children:g.destino.detalle||""})]})]})]})}),g.ok?l.jsx("div",{className:"alert alert-success mT-15",role:"alert",children:"Rutas validadas correctamente. Puedes continuar con la siguiente fase."}):l.jsx("div",{className:"alert alert-warning mT-15",role:"alert",children:"Hay rutas con problemas. Corrige existencia/permisos y vuelve a validar."})]}):l.jsx("div",{className:"vi-callout small",children:"An no has validado las rutas. Ejecuta Validar para continuar al paso 2."})})]})})})]}),l.jsxs("div",{className:"accordion-item",children:[l.jsx("h2",{className:"accordion-header",id:"log02Step2Head",children:l.jsx("button",{className:"accordion-button "+(Ot===2?"":"collapsed"),type:"button",onClick:()=>Xa(2),disabled:!aa,children:l.jsxs("span",{className:"d-inline-flex align-items-center gap-10",children:[l.jsx("span",{className:"vi-step-num",children:"2"}),l.jsx("span",{className:"vi-step-title",children:"Corrida LOG-01"}),z?.id?l.jsx("span",{className:"badge bg-success",children:"Seleccionada"}):aa?l.jsx("span",{className:"badge bg-warning text-dark",children:"Pendiente"}):l.jsx("span",{className:"badge bg-secondary",children:"Bloqueado"})]})})}),l.jsx("div",{id:"log02Step2",className:"accordion-collapse collapse "+(Ot===2?"show":""),"aria-labelledby":"log02Step2Head","data-bs-parent":"#log02Wizard",children:l.jsx("div",{className:"accordion-body",children:aa?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between gap-10",children:[l.jsxs("div",{className:"vi-card flex-grow-1",children:[l.jsx("div",{className:"small text-muted",children:"Corrida seleccionada"}),z?.id?l.jsx("div",{className:"mT-5",children:l.jsxs("div",{className:"d-flex flex-wrap gap-10 align-items-center",children:[l.jsxs("span",{className:"badge bg-light text-dark",children:["#",z.id]}),z?.created_at?l.jsx("span",{className:"small text-muted",children:Rv(z.created_at)}):null,z?.source?l.jsx("span",{className:"small text-muted",children:z.source}):null,z?.status?l.jsx("span",{className:"small text-muted",children:z.status}):null]})}):l.jsx("div",{className:"text-muted small mT-5",children:"An no se ha elegido una corrida."})]}),l.jsx("div",{className:"d-flex gap-10",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:cn,disabled:M,children:z?.id?"Cambiar corrida":"Elegir corrida"})})]}),z?.id?null:l.jsx("div",{className:"vi-callout mT-10 small",children:"Debes seleccionar una corrida de LOG-01 (historial) para usar su manifiesto y NO CONFORME."})]}):l.jsx("div",{className:"vi-callout small",children:"Valida rutas para habilitar este paso."})})})]}),l.jsxs("div",{className:"accordion-item",children:[l.jsx("h2",{className:"accordion-header",id:"log02Step3Head",children:l.jsx("button",{className:"accordion-button "+(Ot===3?"":"collapsed"),type:"button",onClick:()=>Xa(3),disabled:!sa,children:l.jsxs("span",{className:"d-inline-flex align-items-center gap-10",children:[l.jsx("span",{className:"vi-step-num",children:"3"}),l.jsx("span",{className:"vi-step-title",children:"Ejecucin"}),M?l.jsx("span",{className:"badge bg-primary",children:"En progreso"}):Ze?l.jsx("span",{className:"badge bg-success",children:"Completado"}):sa?l.jsx("span",{className:"badge bg-secondary",children:"Listo"}):l.jsx("span",{className:"badge bg-secondary",children:"Bloqueado"})]})})}),l.jsx("div",{id:"log02Step3",className:"accordion-collapse collapse "+(Ot===3?"show":""),"aria-labelledby":"log02Step3Head","data-bs-parent":"#log02Wizard",children:l.jsx("div",{className:"accordion-body",children:sa?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"d-flex flex-wrap gap-10 mB-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>void Wr(),disabled:!fr,title:vr,children:M?"Copiando...":"Iniciar copiado"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>void br(),disabled:!M||!K,children:"Cancelar"})]}),l.jsxs("div",{className:"mT-10",children:[l.jsxs("h6",{className:"c-grey-900 mB-10 d-flex align-items-center gap-2",children:[l.jsx("span",{children:"Progreso"}),M?l.jsx("img",{className:"vi-progress-spinner",src:"/medileser/Spinner-Logo-Medileser.gif",alt:"Procesando"}):null,K?l.jsxs("span",{className:"badge bg-light text-dark",children:["op: ",l.jsx("strong",{children:K})]}):null,l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary ms-auto",onClick:()=>void ei(),disabled:!Z&&!U&&!K,title:"Copiar estado del progreso",children:"Copiar estado"})]}),l.jsxs("div",{className:"d-flex flex-wrap gap-10 mB-5",children:[l.jsxs("span",{className:"badge bg-light text-dark",children:["PDFs: ",Jt.pdfDone??""," / ",Jt.pdfTotal??""]}),l.jsxs("span",{className:"badge bg-light text-dark",children:["OIs: ",Jt.oiDone??""," / ",Jt.oiTotal??""]}),$e.length?l.jsxs("span",{className:"badge bg-warning text-dark",children:["Advertencias: ",$e.length]}):null,Le.length?l.jsxs("span",{className:"badge bg-danger",children:["Errores: ",Le.length]}):null]}),l.jsxs("div",{className:"small text-muted",children:[l.jsx("strong",{children:Z?za(Z):M?"En progreso":""}),U?l.jsxs("span",{children:["  ",U]}):null]}),l.jsxs("div",{className:"small text-muted",children:[be?`OI actual: ${be}`:"OI actual: ",Jt.pdfDone!=null&&Jt.pdfTotal!=null?l.jsxs("span",{children:["  ",Jt.pdfDone,"/",Jt.pdfTotal," PDFs"]}):null,Jt.oiDone!=null&&Jt.oiTotal!=null?l.jsxs("span",{children:["  ",Jt.oiDone,"/",Jt.oiTotal," OIs"]}):null]}),l.jsx("div",{className:"progress vi-progress",children:l.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${Math.max(0,Math.min(100,Se))}%`},"aria-valuenow":Se,"aria-valuemin":0,"aria-valuemax":100,children:l.jsxs("span",{className:"vi-progress-label",children:[Se.toFixed(0),"%"]})})})]}),l.jsx("div",{className:"accordion mT-10",id:"log02LiveLog",children:l.jsxs("div",{className:"accordion-item",children:[l.jsx("h2",{className:"accordion-header",id:"log02LiveLogHead",children:l.jsxs("button",{className:"accordion-button vi-acc-sm "+(kt?"":"collapsed"),type:"button",onClick:()=>sn(C=>!C),children:["Detalle en vivo ",Nt.length?`(${Nt.length})`:""]})}),l.jsx("div",{id:"log02LiveLogBody",className:"accordion-collapse collapse "+(kt?"show":""),"aria-labelledby":"log02LiveLogHead",children:l.jsxs("div",{className:"accordion-body p-0",children:[l.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between gap-10 p-10",children:[l.jsxs("div",{className:"small text-muted",children:["ltimos eventos (mx ",Jf,")"]}),l.jsxs("div",{className:"d-flex gap-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void yr(),disabled:!Nt.length,children:"Copiar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>ot([]),disabled:!Nt.length,children:"Limpiar"})]})]}),l.jsx("div",{className:"vi-logbox",children:Nt.length?Nt.slice(-80).map((C,ne)=>{const Pe=`${new Date(C.ts).toLocaleString("es-PE",{timeZone:Rm,hour12:!1})} | ${C.source} | ${C.type}${C.stage?` | ${C.stage}`:""}${C.oi?` | oi=${C.oi}`:""}${typeof C.progress=="number"?` | ${Math.round(C.progress)}%`:""}${C.message?` | ${C.message}`:""}`;return l.jsx("div",{className:"vi-logline",children:Pe},`le-${ne}`)}):l.jsx("div",{className:"small text-muted",children:"Sin eventos an."})})]})})]})}),Le.length?l.jsxs("div",{className:"alert alert-danger mT-10",role:"alert",children:[l.jsx("strong",{children:"Se detectaron errores:"}),l.jsx("ul",{className:"mB-0 mT-5",children:Le.slice(-8).map((C,ne)=>l.jsxs("li",{children:[C.oi?`[${C.oi}] `:"",C.file?`${C.file}: `:"",C.message]},`ce-${ne}`))})]}):null,$e.length?l.jsxs("div",{className:"alert alert-warning mT-10",role:"alert",children:[l.jsx("strong",{children:"Advertencias:"}),l.jsx("ul",{className:"mB-0 mT-5",children:$e.slice(-8).map((C,ne)=>l.jsxs("li",{children:["[",C.oi,"] ",C.code?`${C.code}: `:"",C.message]},`cw-${ne}`))})]}):null,Ze?l.jsxs("div",{className:"mT-15",children:[l.jsx("h6",{className:"c-grey-900 mB-10",children:"Auditora de copiado"}),l.jsxs("div",{className:"row g-2",children:[l.jsx("div",{className:"col-12 col-md-4",children:l.jsxs("div",{className:"alert alert-light mB-0",children:[l.jsxs("div",{children:[l.jsx("strong",{children:"Total OIs:"})," ",Ze?.total_ois??"N/D"]}),l.jsxs("div",{children:[l.jsx("strong",{children:"OIs OK:"})," ",Ze?.ois_ok??"N/D"]})]})}),l.jsx("div",{className:"col-12 col-md-8",children:l.jsx("div",{className:"alert alert-light mB-0",children:l.jsxs("div",{className:"d-flex flex-wrap gap-10",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"PDF detectados:"})," ",Ze?.archivos?.pdf_detectados??"N/D"]}),l.jsxs("span",{children:[l.jsx("strong",{children:"PDF copiados:"})," ",Ze?.archivos?.pdf_copiados??"N/D"]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Omitidos NO CONFORME:"})," ",Ze?.archivos?.pdf_omitidos_no_conforme??"N/D"]}),l.jsxs("span",{children:[l.jsx("strong",{children:"No PDF omitidos:"})," ",Ze?.archivos?.archivos_no_pdf_omitidos??"N/D"]})]})})})]}),Ze?.ois_faltantes?.length||Ze?.ois_duplicadas?.length||Ze?.destinos_duplicados?.length?l.jsxs("div",{className:"mT-10",children:[Ze?.ois_faltantes?.length?l.jsxs("div",{className:"alert alert-warning",role:"alert",children:[l.jsx("strong",{children:"OIs sin carpeta:"}),l.jsx("ul",{className:"mB-0 mT-5",children:Ze.ois_faltantes.slice(0,10).map((C,ne)=>l.jsxs("li",{children:[C?.oi,"  ",C?.detalle||""]},`of-${ne}`))})]}):null,Ze?.ois_duplicadas?.length?l.jsxs("div",{className:"alert alert-warning",role:"alert",children:[l.jsx("strong",{children:"OIs con mltiples carpetas (duplicadas):"}),l.jsx("ul",{className:"mB-0 mT-5",children:Ze.ois_duplicadas.slice(0,10).map((C,ne)=>l.jsxs("li",{children:[C?.oi,"  ",Array.isArray(C?.carpetas)?C.carpetas.join(" | "):""]},`od-${ne}`))})]}):null,Ze?.destinos_duplicados?.length?l.jsxs("div",{className:"alert alert-warning",role:"alert",children:[l.jsx("strong",{children:"Destinos ya existentes:"}),l.jsx("ul",{className:"mB-0 mT-5",children:Ze.destinos_duplicados.slice(0,10).map((C,ne)=>l.jsxs("li",{children:[C?.oi,"  ",C?.destino||""]},`dd-${ne}`))})]}):null]}):null]}):null]}):l.jsx("div",{className:"vi-callout small",children:"Valida rutas y selecciona una corrida para habilitar la ejecucin."})})})]})]})]}),M?l.jsx("div",{className:"vi-sticky-actions",children:l.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-10 vi-sticky-actions-row",children:[l.jsxs("div",{className:"small vi-sticky-progress",children:[l.jsx("strong",{children:Z?za(Z):"En progreso"}),be?l.jsxs("span",{children:["  OI: ",be]}):null,l.jsxs("span",{className:"text-muted",children:["  ",Se.toFixed(0),"%"]})]}),l.jsxs("div",{className:"d-flex gap-10 vi-sticky-buttons",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>void br(),disabled:!K,children:"Cancelar"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>sn(!0),children:"Ver detalle"})]})]})}):null]})}),S?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:l.jsx("div",{className:"modal-dialog modal-lg",role:"document",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{className:"modal-title",children:"Seleccionar corrida de LOG-01 (Historial)"}),l.jsx("button",{type:"button",className:"close","aria-label":"Close",onClick:()=>$(!1),children:l.jsx("span",{"aria-hidden":"true",children:""})})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"text-muted small mB-10",children:["Por defecto se cargan las ",l.jsx("strong",{children:"ltimas 5 corridas completadas"}),". Puedes usar filtros si lo necesitas."]}),O?l.jsx("div",{className:"alert alert-danger",role:"alert",children:O}):null,l.jsxs("form",{className:"row g-2 align-items-end",onSubmit:C=>{C.preventDefault(),Gn()},children:[l.jsxs("div",{className:"col-12 col-md-4",children:[l.jsx("label",{className:"form-label",children:"Buscar"}),l.jsx("input",{className:"form-control form-control-sm",value:G,onChange:C=>L(C.target.value),placeholder:"Serie / OI / usuario..."})]}),l.jsxs("div",{className:"col-6 col-md-2",children:[l.jsx("label",{className:"form-label",children:"Desde"}),l.jsx("input",{className:"form-control form-control-sm",type:"date",value:W,onChange:C=>de(C.target.value)})]}),l.jsxs("div",{className:"col-6 col-md-2",children:[l.jsx("label",{className:"form-label",children:"Hasta"}),l.jsx("input",{className:"form-control form-control-sm",type:"date",value:Ae,onChange:C=>je(C.target.value)})]}),l.jsxs("div",{className:"col-6 col-md-2",children:[l.jsx("label",{className:"form-label",children:"Origen"}),l.jsx("input",{className:"form-control form-control-sm",value:ge,onChange:C=>we(C.target.value),placeholder:"AUTO/BASES/..."})]}),l.jsxs("div",{className:"col-6 col-md-2",children:[l.jsx("label",{className:"form-label",children:"Estado"}),l.jsx("input",{className:"form-control form-control-sm",value:Me,onChange:C=>Te(C.target.value),placeholder:"COMPLETADO"})]}),l.jsxs("div",{className:"col-12 d-flex gap-10",children:[l.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:_,children:_?"Buscando...":"Aplicar filtros"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>{L(""),de(""),je(""),we(""),Te("COMPLETADO"),Vt(5)},disabled:_,children:"Ver ltimas 5 exitosas"})]})]}),l.jsx("hr",{}),_?l.jsx("div",{className:"text-muted small",children:"Cargando corridas..."}):l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{style:{width:90},children:"ID"}),l.jsx("th",{children:"Creado"}),l.jsx("th",{style:{width:120},children:"Origen"}),l.jsx("th",{style:{width:140},children:"Estado"}),l.jsx("th",{style:{width:120}})]})}),l.jsx("tbody",{children:D.length?D.map(C=>l.jsxs("tr",{className:"small",children:[l.jsx("td",{children:l.jsxs("strong",{children:["#",C.id]})}),l.jsx("td",{children:Rv(C.created_at)}),l.jsx("td",{children:C.source||"N/D"}),l.jsx("td",{children:C.status||"N/D"}),l.jsx("td",{children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>Sn(C),children:"Usar"})})]},C.id)):l.jsx("tr",{className:"small",children:l.jsx("td",{colSpan:5,className:"text-muted",children:"Sin resultados."})})})]})})]}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>$(!1),children:"Cerrar"})})]})})}),l.jsx("div",{className:"modal-backdrop fade show"})]}):null,He?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"modal fade show",style:{display:"block"},role:"dialog","aria-modal":"true",children:l.jsx("div",{className:"modal-dialog modal-lg",role:"document",children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h5",{className:"modal-title",children:Xt==="destino"?"Elegir carpeta de destino":"Elegir carpeta de origen"}),l.jsx("button",{type:"button",className:"btn-close","aria-label":"Cerrar",onClick:()=>st(!1)})]}),l.jsxs("div",{className:"modal-body",children:[Zn?l.jsx("div",{className:"alert alert-danger",role:"alert",children:Zn}):null,l.jsxs("div",{className:"row g-2",children:[l.jsxs("div",{className:"col-12 col-md-6",children:[l.jsx("label",{className:"form-label",children:"Raz"}),l.jsx("select",{className:"form-control form-control-sm",value:Hn,onChange:C=>{const ne=C.target.value;Ra(ne),zn(ne)},disabled:!At.length,children:At.length?At.map(C=>l.jsx("option",{value:C,children:C},C)):l.jsx("option",{value:"",children:"Sin races"})})]}),l.jsxs("div",{className:"col-12 col-md-6",children:[l.jsx("label",{className:"form-label",children:"Carpeta actual"}),l.jsx("input",{className:"form-control form-control-sm",value:an,readOnly:!0})]})]}),l.jsxs("div",{className:"mT-10",children:[l.jsx("label",{className:"form-label mB-5",children:"Navegacin"}),l.jsxs("div",{className:"p-10",style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:6},children:[l.jsx("div",{className:"d-flex flex-wrap align-items-center gap-10",children:Ds(an).map((C,ne,ie)=>l.jsxs("span",{className:"small d-inline-flex align-items-center",children:[l.jsx("button",{type:"button",className:"btn btn-link p-0 align-baseline",onClick:()=>void zn(C.path),disabled:Gt,title:`Ir a: ${C.path}`,children:C.label}),ne<ie.length-1?l.jsx("span",{className:"text-muted mX-5",children:"/"}):null]},`${C.path}-${ne}`))}),l.jsx("div",{className:"small text-muted mT-5",children:"Tip: Click en una seccin para saltar a esa carpeta."})]})]}),l.jsxs("div",{className:"row g-2 mT-10",children:[l.jsxs("div",{className:"col-12 col-md-8",children:[l.jsx("label",{className:"form-label",children:"Ir a ruta"}),l.jsxs("div",{className:"input-group input-group-sm",children:[l.jsx("input",{className:"form-control",value:ut,onChange:C=>Xe(C.target.value),onKeyDown:C=>{C.key==="Enter"&&(C.preventDefault(),Ta())},placeholder:"Pega una ruta (UNC o local) dentro de las races permitidas",disabled:Gt}),l.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>void Ta(),disabled:Gt||!ut.trim(),children:"Ir"})]})]}),l.jsxs("div",{className:"col-12 col-md-4",children:[l.jsx("label",{className:"form-label",children:"Acciones"}),l.jsx("div",{className:"d-flex align-items-end",style:{minHeight:31},children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>void fs(),disabled:!an||Gt,title:"Copiar la ruta actual al portapapeles",children:"Copiar ruta"})})]})]}),l.jsxs("div",{className:"d-flex gap-10 mT-10",children:[l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:rn,disabled:!an||Gt,children:"Subir nivel"}),l.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:Jn,disabled:!an||Gt,children:"Seleccionar carpeta"})]}),l.jsx("hr",{}),l.jsx("div",{className:"row g-2 mB-10",children:l.jsxs("div",{className:"col-12 col-md-8",children:[l.jsx("label",{className:"form-label",children:"Buscar subcarpeta"}),l.jsx("input",{className:"form-control form-control-sm",value:Ve,onChange:C=>rt(C.target.value),placeholder:"Filtrar por nombre",disabled:Gt}),l.jsxs("div",{className:"form-text",children:["Mostrando ",lt.length," de ",Xn.length]})]})}),Gt?l.jsx("div",{className:"text-muted small",children:"Cargando carpetas..."}):l.jsx("div",{className:"table-responsive",children:l.jsxs("table",{className:"table table-sm mB-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"small",children:[l.jsx("th",{children:"Subcarpetas"}),l.jsx("th",{style:{width:120}})]})}),l.jsx("tbody",{children:lt.length?lt.map((C,ne)=>l.jsxs("tr",{className:"small"+(X===C.path?" table-active":""),role:"button",tabIndex:0,"data-folder-idx":ne,title:"Click para seleccionar  Doble click para entrar",style:{cursor:Gt?"default":"pointer"},onClick:ie=>{Gt||(Ee(C.path),ie.currentTarget.focus())},onDoubleClick:()=>{Gt||zn(C.path)},onKeyDown:ie=>{if(!Gt){if(ie.key==="Enter"){ie.preventDefault(),zn(C.path);return}if(ie.key===" "||ie.key==="Spacebar"){ie.preventDefault(),Ee(C.path);return}}},children:[l.jsx("td",{style:{wordBreak:"break-all"},children:C.name}),l.jsx("td",{children:l.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:ie=>{ie.stopPropagation(),zn(C.path)},disabled:Gt,children:"Entrar"})})]},C.path)):l.jsx("tr",{className:"small",children:l.jsx("td",{colSpan:2,className:"text-muted",children:"Sin resultados para el filtro, o sin subcarpetas/permisos para listar."})})})]})})]}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>st(!1),children:"Cerrar"})})]})})}),l.jsx("div",{className:"modal-backdrop fade show",onClick:()=>st(!1)})]}):null]})}function X2(){const e=Ln();return l.jsx(l.Fragment,{children:l.jsxs(Ij,{children:[l.jsx(ln,{path:"/login",element:e?.token?l.jsx(or,{to:"/home",replace:!0}):l.jsx(AE,{})}),l.jsx(ln,{element:l.jsx(vT,{}),children:l.jsxs(ln,{element:l.jsx(wT,{}),children:[l.jsx(ln,{path:"/",element:l.jsx(or,{to:"/home",replace:!0})}),l.jsx(ln,{path:"/home",element:l.jsx(U2,{})}),l.jsx(ln,{path:"/oi",element:l.jsx(Sv,{})}),l.jsx(ln,{path:"/oi/:oiId",element:l.jsx(Sv,{})}),l.jsx(ln,{path:"/oi/list",element:l.jsx(_T,{})}),l.jsx(ln,{path:"/users",element:l.jsx(CT,{})}),l.jsx(ln,{path:"/password",element:l.jsx(AT,{})}),l.jsx(ln,{path:"/admin/permisos",element:l.jsx(TT,{})}),l.jsx(ln,{path:"/logistica/log01/excel",element:l.jsx($2,{})}),l.jsx(ln,{path:"/logistica/log01/history",element:l.jsx(G2,{})}),l.jsx(ln,{path:"/logistica/log02/pdfs",element:l.jsx(K2,{})}),l.jsx(ln,{path:"/oi/tools/vima-to-lista",element:l.jsx(HT,{})}),l.jsx(ln,{path:"/oi/tools/actualizacion-base",element:l.jsx(y2,{})}),l.jsx(ln,{path:"/oi/tools/formato-ac/history",element:l.jsx(_2,{})}),l.jsx(ln,{path:"/oi/tools/consolidacion",element:l.jsx(E2,{})}),l.jsx(ln,{path:"/oi/tools/consolidacion/correlativo",element:l.jsx(R2,{})}),l.jsx(ln,{path:"/oi/tools/consolidacion/no-correlativo",element:l.jsx(k2,{})}),l.jsx(ln,{path:"/oi/tools/excel",element:l.jsx(M2,{})})]})}),l.jsx(ln,{path:"*",element:l.jsx(or,{to:e?.token?"/home":"/login",replace:!0})})]})})}const J2=new Fw;QS.createRoot(document.getElementById("root")).render(l.jsx(gt.StrictMode,{children:l.jsx(Hw,{client:J2,children:l.jsx(dw,{children:l.jsx(CE,{children:l.jsx(X2,{})})})})}));
